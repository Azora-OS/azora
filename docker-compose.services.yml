# Docker Compose - Frontend-Backend Services
# Generated by connect-frontends-backends.js

version: '3.8'

services:

  api-gateway:
    build:
      context: ./services/api-gateway
      dockerfile: Dockerfile
    container_name: azora-api-gateway
    ports:
      - "4000:4000"
    environment:
      - PORT=4000
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  auth-service:
    build:
      context: ./services/auth-service
      dockerfile: Dockerfile
    container_name: azora-auth-service
    ports:
      - "4001:4001"
    environment:
      - PORT=4001
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4001/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  azora-education:
    build:
      context: ./services/azora-education
      dockerfile: Dockerfile
    container_name: azora-azora-education
    ports:
      - "4002:4002"
    environment:
      - PORT=4002
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4002/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  azora-finance:
    build:
      context: ./services/azora-finance
      dockerfile: Dockerfile
    container_name: azora-azora-finance
    ports:
      - "4003:4003"
    environment:
      - PORT=4003
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4003/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  azora-marketplace:
    build:
      context: ./services/azora-marketplace
      dockerfile: Dockerfile
    container_name: azora-azora-marketplace
    ports:
      - "4004:4004"
    environment:
      - PORT=4004
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4004/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  health-monitor:
    build:
      context: ./services/health-monitor
      dockerfile: Dockerfile
    container_name: azora-health-monitor
    ports:
      - "4005:4005"
    environment:
      - PORT=4005
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4005/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  azora-aegis:
    build:
      context: ./services/azora-aegis
      dockerfile: Dockerfile
    container_name: azora-azora-aegis
    ports:
      - "4006:4006"
    environment:
      - PORT=4006
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4006/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  ai-family-service:
    build:
      context: ./services/ai-family-service
      dockerfile: Dockerfile
    container_name: azora-ai-family-service
    ports:
      - "4010:4010"
    environment:
      - PORT=4010
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4010/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  azora-sapiens:
    build:
      context: ./services/azora-sapiens
      dockerfile: Dockerfile
    container_name: azora-azora-sapiens
    ports:
      - "4011:4011"
    environment:
      - PORT=4011
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4011/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  notification-service:
    build:
      context: ./services/notification-service
      dockerfile: Dockerfile
    container_name: azora-notification-service
    ports:
      - "4012:4012"
    environment:
      - PORT=4012
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4012/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  payment:
    build:
      context: ./services/payment
      dockerfile: Dockerfile
    container_name: azora-payment
    ports:
      - "4013:4013"
    environment:
      - PORT=4013
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4013/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  analytics-service:
    build:
      context: ./services/analytics-service
      dockerfile: Dockerfile
    container_name: azora-analytics-service
    ports:
      - "4014:4014"
    environment:
      - PORT=4014
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4014/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  enterprise:
    build:
      context: ./services/enterprise
      dockerfile: Dockerfile
    container_name: azora-enterprise
    ports:
      - "4020:4020"
    environment:
      - PORT=4020
      - NODE_ENV=development
    networks:
      - azora-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:4020/health"]
      interval: 30s
      timeout: 10s
      retries: 3

networks:
  azora-network:
    driver: bridge
