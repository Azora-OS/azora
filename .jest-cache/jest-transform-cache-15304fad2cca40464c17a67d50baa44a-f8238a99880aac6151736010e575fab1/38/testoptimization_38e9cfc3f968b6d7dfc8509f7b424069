e44eef08efa5a0601001a8a84821e8cb
/**
 * Test Optimization Utilities
 * Implements database transaction rollback, Redis pipeline operations, and caching
 */

const {
  PrismaClient
} = require('@prisma/client');
const Redis = require('ioredis');
class TestOptimizer {
  constructor() {
    this.prisma = null;
    this.redis = null;
    this.transactionStack = [];
    this.mockCache = new Map();
    this.initialized = false;
  }
  async initialize() {
    if (this.initialized) return;

    // Initialize Prisma with transaction support
    this.prisma = new PrismaClient({
      datasources: {
        db: {
          url: process.env.DATABASE_URL || 'postgresql://test:test@localhost:5432/azora_test'
        }
      }
    });

    // Initialize Redis with pipeline support
    this.redis = new Redis({
      host: process.env.REDIS_HOST || 'localhost',
      port: process.env.REDIS_PORT || 6379,
      retryDelayOnFailover: 100,
      maxRetriesPerRequest: 3,
      lazyConnect: true
    });
    await this.redis.connect();
    this.initialized = true;
  }

  /**
   * Start a database transaction for test isolation
   */
  async startTransaction() {
    if (!this.initialized) await this.initialize();
    const transaction = await this.prisma.$begin();
    this.transactionStack.push(transaction);
    return transaction;
  }

  /**
   * Rollback the current transaction
   */
  async rollbackTransaction() {
    if (this.transactionStack.length === 0) return;
    const transaction = this.transactionStack.pop();
    await transaction.$rollback();
  }

  /**
   * Execute Redis operations in pipeline for better performance
   */
  async executeRedisPipeline(operations) {
    if (!this.initialized) await this.initialize();
    const pipeline = this.redis.pipeline();
    operations.forEach(op => {
      pipeline[op.command](...op.args);
    });
    return await pipeline.exec();
  }

  /**
   * Cache mock responses to avoid repeated computation
   */
  cacheMockResponse(key, response) {
    this.mockCache.set(key, {
      response,
      timestamp: Date.now()
    });
  }

  /**
   * Get cached mock response if still valid
   */
  getCachedMockResponse(key, maxAge = 300000) {
    // 5 minutes default
    const cached = this.mockCache.get(key);
    if (!cached) return null;
    if (Date.now() - cached.timestamp > maxAge) {
      this.mockCache.delete(key);
      return null;
    }
    return cached.response;
  }

  /**
   * Batch database operations for better performance
   */
  async batchDatabaseOperations(operations) {
    if (!this.initialized) await this.initialize();
    const transaction = await this.startTransaction();
    try {
      const results = [];
      for (const op of operations) {
        const result = await transaction[op.model][op.operation](op.data);
        results.push(result);
      }
      await transaction.$commit();
      return results;
    } catch (error) {
      await this.rollbackTransaction();
      throw error;
    }
  }

  /**
   * Clean up resources
   */
  async cleanup() {
    // Rollback any pending transactions
    while (this.transactionStack.length > 0) {
      await this.rollbackTransaction();
    }

    // Clear mock cache
    this.mockCache.clear();

    // Close connections
    if (this.prisma) {
      await this.prisma.$disconnect();
    }
    if (this.redis) {
      await this.redis.disconnect();
    }
    this.initialized = false;
  }

  /**
   * Setup test environment with optimizations
   */
  async setupTestEnvironment() {
    await this.initialize();

    // Start fresh transaction for test isolation
    await this.startTransaction();

    // Clear Redis test data
    await this.redis.flushdb();

    // Setup test-specific optimizations
    await this.executeRedisPipeline([{
      command: 'set',
      args: ['test:session', 'active']
    }, {
      command: 'expire',
      args: ['test:session', 3600]
    }]);
  }

  /**
   * Teardown test environment
   */
  async teardownTestEnvironment() {
    // Rollback database changes
    await this.rollbackTransaction();

    // Clear Redis test data
    if (this.redis && this.redis.status === 'ready') {
      await this.redis.flushdb();
    }
  }
}

// Singleton instance
const testOptimizer = new TestOptimizer();

// Jest setup helpers
const setupOptimizedTest = async () => {
  await testOptimizer.setupTestEnvironment();
};
const teardownOptimizedTest = async () => {
  await testOptimizer.teardownTestEnvironment();
};

// Global cleanup
const globalCleanup = async () => {
  await testOptimizer.cleanup();
};
module.exports = {
  TestOptimizer,
  testOptimizer,
  setupOptimizedTest,
  teardownOptimizedTest,
  globalCleanup
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJyZXF1aXJlIiwiUmVkaXMiLCJUZXN0T3B0aW1pemVyIiwiY29uc3RydWN0b3IiLCJwcmlzbWEiLCJyZWRpcyIsInRyYW5zYWN0aW9uU3RhY2siLCJtb2NrQ2FjaGUiLCJNYXAiLCJpbml0aWFsaXplZCIsImluaXRpYWxpemUiLCJkYXRhc291cmNlcyIsImRiIiwidXJsIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsImhvc3QiLCJSRURJU19IT1NUIiwicG9ydCIsIlJFRElTX1BPUlQiLCJyZXRyeURlbGF5T25GYWlsb3ZlciIsIm1heFJldHJpZXNQZXJSZXF1ZXN0IiwibGF6eUNvbm5lY3QiLCJjb25uZWN0Iiwic3RhcnRUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uIiwiJGJlZ2luIiwicHVzaCIsInJvbGxiYWNrVHJhbnNhY3Rpb24iLCJsZW5ndGgiLCJwb3AiLCIkcm9sbGJhY2siLCJleGVjdXRlUmVkaXNQaXBlbGluZSIsIm9wZXJhdGlvbnMiLCJwaXBlbGluZSIsImZvckVhY2giLCJvcCIsImNvbW1hbmQiLCJhcmdzIiwiZXhlYyIsImNhY2hlTW9ja1Jlc3BvbnNlIiwia2V5IiwicmVzcG9uc2UiLCJzZXQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiZ2V0Q2FjaGVkTW9ja1Jlc3BvbnNlIiwibWF4QWdlIiwiY2FjaGVkIiwiZ2V0IiwiZGVsZXRlIiwiYmF0Y2hEYXRhYmFzZU9wZXJhdGlvbnMiLCJyZXN1bHRzIiwicmVzdWx0IiwibW9kZWwiLCJvcGVyYXRpb24iLCJkYXRhIiwiJGNvbW1pdCIsImVycm9yIiwiY2xlYW51cCIsImNsZWFyIiwiJGRpc2Nvbm5lY3QiLCJkaXNjb25uZWN0Iiwic2V0dXBUZXN0RW52aXJvbm1lbnQiLCJmbHVzaGRiIiwidGVhcmRvd25UZXN0RW52aXJvbm1lbnQiLCJzdGF0dXMiLCJ0ZXN0T3B0aW1pemVyIiwic2V0dXBPcHRpbWl6ZWRUZXN0IiwidGVhcmRvd25PcHRpbWl6ZWRUZXN0IiwiZ2xvYmFsQ2xlYW51cCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ0ZXN0LW9wdGltaXphdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3QgT3B0aW1pemF0aW9uIFV0aWxpdGllc1xuICogSW1wbGVtZW50cyBkYXRhYmFzZSB0cmFuc2FjdGlvbiByb2xsYmFjaywgUmVkaXMgcGlwZWxpbmUgb3BlcmF0aW9ucywgYW5kIGNhY2hpbmdcbiAqL1xuXG5jb25zdCB7IFByaXNtYUNsaWVudCB9ID0gcmVxdWlyZSgnQHByaXNtYS9jbGllbnQnKTtcbmNvbnN0IFJlZGlzID0gcmVxdWlyZSgnaW9yZWRpcycpO1xuXG5jbGFzcyBUZXN0T3B0aW1pemVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcmlzbWEgPSBudWxsO1xuICAgIHRoaXMucmVkaXMgPSBudWxsO1xuICAgIHRoaXMudHJhbnNhY3Rpb25TdGFjayA9IFtdO1xuICAgIHRoaXMubW9ja0NhY2hlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVybjtcblxuICAgIC8vIEluaXRpYWxpemUgUHJpc21hIHdpdGggdHJhbnNhY3Rpb24gc3VwcG9ydFxuICAgIHRoaXMucHJpc21hID0gbmV3IFByaXNtYUNsaWVudCh7XG4gICAgICBkYXRhc291cmNlczoge1xuICAgICAgICBkYjoge1xuICAgICAgICAgIHVybDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIHx8ICdwb3N0Z3Jlc3FsOi8vdGVzdDp0ZXN0QGxvY2FsaG9zdDo1NDMyL2F6b3JhX3Rlc3QnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEluaXRpYWxpemUgUmVkaXMgd2l0aCBwaXBlbGluZSBzdXBwb3J0XG4gICAgdGhpcy5yZWRpcyA9IG5ldyBSZWRpcyh7XG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5SRURJU19IT1NUIHx8ICdsb2NhbGhvc3QnLFxuICAgICAgcG9ydDogcHJvY2Vzcy5lbnYuUkVESVNfUE9SVCB8fCA2Mzc5LFxuICAgICAgcmV0cnlEZWxheU9uRmFpbG92ZXI6IDEwMCxcbiAgICAgIG1heFJldHJpZXNQZXJSZXF1ZXN0OiAzLFxuICAgICAgbGF6eUNvbm5lY3Q6IHRydWVcbiAgICB9KTtcblxuICAgIGF3YWl0IHRoaXMucmVkaXMuY29ubmVjdCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGEgZGF0YWJhc2UgdHJhbnNhY3Rpb24gZm9yIHRlc3QgaXNvbGF0aW9uXG4gICAqL1xuICBhc3luYyBzdGFydFRyYW5zYWN0aW9uKCkge1xuICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnByaXNtYS4kYmVnaW4oKTtcbiAgICB0aGlzLnRyYW5zYWN0aW9uU3RhY2sucHVzaCh0cmFuc2FjdGlvbik7XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJvbGxiYWNrIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uXG4gICAqL1xuICBhc3luYyByb2xsYmFja1RyYW5zYWN0aW9uKCkge1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uU3RhY2subGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLnRyYW5zYWN0aW9uU3RhY2sucG9wKCk7XG4gICAgYXdhaXQgdHJhbnNhY3Rpb24uJHJvbGxiYWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBSZWRpcyBvcGVyYXRpb25zIGluIHBpcGVsaW5lIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICovXG4gIGFzeW5jIGV4ZWN1dGVSZWRpc1BpcGVsaW5lKG9wZXJhdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIFxuICAgIGNvbnN0IHBpcGVsaW5lID0gdGhpcy5yZWRpcy5waXBlbGluZSgpO1xuICAgIFxuICAgIG9wZXJhdGlvbnMuZm9yRWFjaChvcCA9PiB7XG4gICAgICBwaXBlbGluZVtvcC5jb21tYW5kXSguLi5vcC5hcmdzKTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gYXdhaXQgcGlwZWxpbmUuZXhlYygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhY2hlIG1vY2sgcmVzcG9uc2VzIHRvIGF2b2lkIHJlcGVhdGVkIGNvbXB1dGF0aW9uXG4gICAqL1xuICBjYWNoZU1vY2tSZXNwb25zZShrZXksIHJlc3BvbnNlKSB7XG4gICAgdGhpcy5tb2NrQ2FjaGUuc2V0KGtleSwge1xuICAgICAgcmVzcG9uc2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2FjaGVkIG1vY2sgcmVzcG9uc2UgaWYgc3RpbGwgdmFsaWRcbiAgICovXG4gIGdldENhY2hlZE1vY2tSZXNwb25zZShrZXksIG1heEFnZSA9IDMwMDAwMCkgeyAvLyA1IG1pbnV0ZXMgZGVmYXVsdFxuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMubW9ja0NhY2hlLmdldChrZXkpO1xuICAgIGlmICghY2FjaGVkKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBpZiAoRGF0ZS5ub3coKSAtIGNhY2hlZC50aW1lc3RhbXAgPiBtYXhBZ2UpIHtcbiAgICAgIHRoaXMubW9ja0NhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjYWNoZWQucmVzcG9uc2U7XG4gIH1cblxuICAvKipcbiAgICogQmF0Y2ggZGF0YWJhc2Ugb3BlcmF0aW9ucyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAqL1xuICBhc3luYyBiYXRjaERhdGFiYXNlT3BlcmF0aW9ucyhvcGVyYXRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcbiAgICBcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMuc3RhcnRUcmFuc2FjdGlvbigpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGNvbnN0IG9wIG9mIG9wZXJhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNhY3Rpb25bb3AubW9kZWxdW29wLm9wZXJhdGlvbl0ob3AuZGF0YSk7XG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCB0cmFuc2FjdGlvbi4kY29tbWl0KCk7XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsYmFja1RyYW5zYWN0aW9uKCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgcmVzb3VyY2VzXG4gICAqL1xuICBhc3luYyBjbGVhbnVwKCkge1xuICAgIC8vIFJvbGxiYWNrIGFueSBwZW5kaW5nIHRyYW5zYWN0aW9uc1xuICAgIHdoaWxlICh0aGlzLnRyYW5zYWN0aW9uU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsYmFja1RyYW5zYWN0aW9uKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFyIG1vY2sgY2FjaGVcbiAgICB0aGlzLm1vY2tDYWNoZS5jbGVhcigpO1xuICAgIFxuICAgIC8vIENsb3NlIGNvbm5lY3Rpb25zXG4gICAgaWYgKHRoaXMucHJpc21hKSB7XG4gICAgICBhd2FpdCB0aGlzLnByaXNtYS4kZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5yZWRpcykge1xuICAgICAgYXdhaXQgdGhpcy5yZWRpcy5kaXNjb25uZWN0KCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCB0ZXN0IGVudmlyb25tZW50IHdpdGggb3B0aW1pemF0aW9uc1xuICAgKi9cbiAgYXN5bmMgc2V0dXBUZXN0RW52aXJvbm1lbnQoKSB7XG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgXG4gICAgLy8gU3RhcnQgZnJlc2ggdHJhbnNhY3Rpb24gZm9yIHRlc3QgaXNvbGF0aW9uXG4gICAgYXdhaXQgdGhpcy5zdGFydFRyYW5zYWN0aW9uKCk7XG4gICAgXG4gICAgLy8gQ2xlYXIgUmVkaXMgdGVzdCBkYXRhXG4gICAgYXdhaXQgdGhpcy5yZWRpcy5mbHVzaGRiKCk7XG4gICAgXG4gICAgLy8gU2V0dXAgdGVzdC1zcGVjaWZpYyBvcHRpbWl6YXRpb25zXG4gICAgYXdhaXQgdGhpcy5leGVjdXRlUmVkaXNQaXBlbGluZShbXG4gICAgICB7IGNvbW1hbmQ6ICdzZXQnLCBhcmdzOiBbJ3Rlc3Q6c2Vzc2lvbicsICdhY3RpdmUnXSB9LFxuICAgICAgeyBjb21tYW5kOiAnZXhwaXJlJywgYXJnczogWyd0ZXN0OnNlc3Npb24nLCAzNjAwXSB9XG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogVGVhcmRvd24gdGVzdCBlbnZpcm9ubWVudFxuICAgKi9cbiAgYXN5bmMgdGVhcmRvd25UZXN0RW52aXJvbm1lbnQoKSB7XG4gICAgLy8gUm9sbGJhY2sgZGF0YWJhc2UgY2hhbmdlc1xuICAgIGF3YWl0IHRoaXMucm9sbGJhY2tUcmFuc2FjdGlvbigpO1xuICAgIFxuICAgIC8vIENsZWFyIFJlZGlzIHRlc3QgZGF0YVxuICAgIGlmICh0aGlzLnJlZGlzICYmIHRoaXMucmVkaXMuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICBhd2FpdCB0aGlzLnJlZGlzLmZsdXNoZGIoKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gU2luZ2xldG9uIGluc3RhbmNlXG5jb25zdCB0ZXN0T3B0aW1pemVyID0gbmV3IFRlc3RPcHRpbWl6ZXIoKTtcblxuLy8gSmVzdCBzZXR1cCBoZWxwZXJzXG5jb25zdCBzZXR1cE9wdGltaXplZFRlc3QgPSBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IHRlc3RPcHRpbWl6ZXIuc2V0dXBUZXN0RW52aXJvbm1lbnQoKTtcbn07XG5cbmNvbnN0IHRlYXJkb3duT3B0aW1pemVkVGVzdCA9IGFzeW5jICgpID0+IHtcbiAgYXdhaXQgdGVzdE9wdGltaXplci50ZWFyZG93blRlc3RFbnZpcm9ubWVudCgpO1xufTtcblxuLy8gR2xvYmFsIGNsZWFudXBcbmNvbnN0IGdsb2JhbENsZWFudXAgPSBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IHRlc3RPcHRpbWl6ZXIuY2xlYW51cCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFRlc3RPcHRpbWl6ZXIsXG4gIHRlc3RPcHRpbWl6ZXIsXG4gIHNldHVwT3B0aW1pemVkVGVzdCxcbiAgdGVhcmRvd25PcHRpbWl6ZWRUZXN0LFxuICBnbG9iYWxDbGVhbnVwXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtFQUFFQTtBQUFhLENBQUMsR0FBR0MsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ2xELE1BQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUVoQyxNQUFNRSxhQUFhLENBQUM7RUFDbEJDLFdBQVdBLENBQUEsRUFBRztJQUNaLElBQUksQ0FBQ0MsTUFBTSxHQUFHLElBQUk7SUFDbEIsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSTtJQUNqQixJQUFJLENBQUNDLGdCQUFnQixHQUFHLEVBQUU7SUFDMUIsSUFBSSxDQUFDQyxTQUFTLEdBQUcsSUFBSUMsR0FBRyxDQUFDLENBQUM7SUFDMUIsSUFBSSxDQUFDQyxXQUFXLEdBQUcsS0FBSztFQUMxQjtFQUVBLE1BQU1DLFVBQVVB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