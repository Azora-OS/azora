700d4ed50547d3fdb8084237f6d16d41
"use strict";

var _healthMonitor = require("../src/health-monitor");
// Mock fetch globally
global.fetch = jest.fn();
describe('HealthMonitor', () => {
  let healthMonitor;
  beforeEach(() => {
    healthMonitor = new _healthMonitor.HealthMonitor(1000); // 1 second for testing
    jest.clearAllMocks();
  });
  afterEach(() => {
    healthMonitor.stop();
  });
  describe('Service Registration', () => {
    it('should register a service for monitoring', () => {
      healthMonitor.registerService('test-service', 'http://localhost:3000');
      const health = healthMonitor.getServiceHealth('test-service');
      expect(health).toBeDefined();
      expect(health?.name).toBe('test-service');
      expect(health?.url).toBe('http://localhost:3000');
    });
    it('should initialize service with healthy status', () => {
      healthMonitor.registerService('test-service', 'http://localhost:3000');
      const health = healthMonitor.getServiceHealth('test-service');
      expect(health?.status).toBe('healthy');
      expect(health?.uptime).toBe(100);
    });
    it('should register multiple services', () => {
      healthMonitor.registerService('service-1', 'http://localhost:3001');
      healthMonitor.registerService('service-2', 'http://localhost:3002');
      const allHealth = healthMonitor.getAllHealth();
      expect(allHealth).toHaveLength(2);
    });
  });
  describe('Health Checks', () => {
    beforeEach(() => {
      healthMonitor.registerService('test-service', 'http://localhost:3000');
    });
    it('should check service health successfully', async () => {
      global.fetch.mockResolvedValueOnce({
        ok: true,
        status: 200
      });
      const result = await healthMonitor.checkService('test-service');
      expect(result.healthy).toBe(true);
      expect(result.service).toBe('test-service');
      expect(result.responseTime).toBeGreaterThanOrEqual(0);
    });
    it('should detect unhealthy service', async () => {
      global.fetch.mockResolvedValueOnce({
        ok: false,
        status: 500
      });
      const result = await healthMonitor.checkService('test-service');
      expect(result.healthy).toBe(false);
      const health = healthMonitor.getServiceHealth('test-service');
      expect(health?.status).toBe('degraded');
    });
    it('should detect service down on fetch error', async () => {
      global.fetch.mockRejectedValueOnce(new Error('Connection refused'));
      const result = await healthMonitor.checkService('test-service');
      expect(result.healthy).toBe(false);
      expect(result.error).toBeDefined();
      const health = healthMonitor.getServiceHealth('test-service');
      expect(health?.status).toBe('down');
    });
    it('should track response time', async () => {
      global.fetch.mockImplementation(() => new Promise(resolve => setTimeout(() => resolve({
        ok: true
      }), 100)));
      const result = await healthMonitor.checkService('test-service');
      expect(result.responseTime).toBeGreaterThanOrEqual(100);
    });
    it('should update uptime on successful checks', async () => {
      global.fetch.mockResolvedValue({
        ok: true
      });
      await healthMonitor.checkService('test-service');
      const health = healthMonitor.getServiceHealth('test-service');
      expect(health?.uptime).toBeGreaterThanOrEqual(100);
    });
    it('should decrease uptime on failed checks', async () => {
      global.fetch.mockRejectedValue(new Error('Failed'));
      await healthMonitor.checkService('test-service');
      const health = healthMonitor.getServiceHealth('test-service');
      expect(health?.uptime).toBeLessThan(100);
    });
  });
  describe('Health Restoration', () => {
    beforeEach(() => {
      healthMonitor.registerService('test-service', 'http://localhost:3000');
    });
    it('should restore health after recovery', async () => {
      // First fail
      global.fetch.mockRejectedValueOnce(new Error('Failed'));
      await healthMonitor.checkService('test-service');
      let health = healthMonitor.getServiceHealth('test-service');
      expect(health?.status).toBe('down');

      // Then succeed
      global.fetch.mockResolvedValueOnce({
        ok: true
      });
      await healthMonitor.checkService('test-service');
      health = healthMonitor.getServiceHealth('test-service');
      expect(health?.status).toBe('healthy');
    });
    it('should gradually restore uptime', async () => {
      // Fail multiple times
      global.fetch.mockRejectedValue(new Error('Failed'));
      await healthMonitor.checkService('test-service');
      await healthMonitor.checkService('test-service');
      const downtimeUptime = healthMonitor.getServiceHealth('test-service')?.uptime || 0;

      // Succeed multiple times
      global.fetch.mockResolvedValue({
        ok: true
      });
      await healthMonitor.checkService('test-service');
      await healthMonitor.checkService('test-service');
      const recoveredUptime = healthMonitor.getServiceHealth('test-service')?.uptime || 0;
      expect(recoveredUptime).toBeGreaterThan(downtimeUptime);
    });
  });
  describe('Monitoring Control', () => {
    it('should start monitoring', () => {
      const consoleSpy = jest.spyOn(console, 'log');
      healthMonitor.start();
      expect(consoleSpy).toHaveBeenCalledWith(expect.stringContaining('Health monitoring started'));
      consoleSpy.mockRestore();
    });
    it('should stop monitoring', () => {
      healthMonitor.start();
      const consoleSpy = jest.spyOn(console, 'log');
      healthMonitor.stop();
      expect(consoleSpy).toHaveBeenCalledWith(expect.stringContaining('Health monitoring stopped'));
      consoleSpy.mockRestore();
    });
    it('should not start monitoring twice', () => {
      healthMonitor.start();
      const consoleSpy = jest.spyOn(console, 'log');
      healthMonitor.start();
      expect(consoleSpy).toHaveBeenCalledWith(expect.stringContaining('already active'));
      consoleSpy.mockRestore();
    });
  });
  describe('Unhealthy Services', () => {
    it('should identify unhealthy services', async () => {
      healthMonitor.registerService('healthy-service', 'http://localhost:3001');
      healthMonitor.registerService('unhealthy-service', 'http://localhost:3002');
      global.fetch.mockResolvedValueOnce({
        ok: true
      }).mockRejectedValueOnce(new Error('Failed'));
      await healthMonitor.checkService('healthy-service');
      await healthMonitor.checkService('unhealthy-service');
      const unhealthy = healthMonitor.getUnhealthyServices();
      expect(unhealthy).toHaveLength(1);
      expect(unhealthy[0].name).toBe('unhealthy-service');
    });
    it('should return empty array when all services healthy', async () => {
      healthMonitor.registerService('service-1', 'http://localhost:3001');
      healthMonitor.registerService('service-2', 'http://localhost:3002');
      global.fetch.mockResolvedValue({
        ok: true
      });
      await healthMonitor.checkService('service-1');
      await healthMonitor.checkService('service-2');
      const unhealthy = healthMonitor.getUnhealthyServices();
      expect(unhealthy).toHaveLength(0);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaGVhbHRoTW9uaXRvciIsInJlcXVpcmUiLCJnbG9iYWwiLCJmZXRjaCIsImplc3QiLCJmbiIsImRlc2NyaWJlIiwiaGVhbHRoTW9uaXRvciIsImJlZm9yZUVhY2giLCJIZWFsdGhNb25pdG9yIiwiY2xlYXJBbGxNb2NrcyIsImFmdGVyRWFjaCIsInN0b3AiLCJpdCIsInJlZ2lzdGVyU2VydmljZSIsImhlYWx0aCIsImdldFNlcnZpY2VIZWFsdGgiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsIm5hbWUiLCJ0b0JlIiwidXJsIiwic3RhdHVzIiwidXB0aW1lIiwiYWxsSGVhbHRoIiwiZ2V0QWxsSGVhbHRoIiwidG9IYXZlTGVuZ3RoIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwib2siLCJyZXN1bHQiLCJjaGVja1NlcnZpY2UiLCJoZWFsdGh5Iiwic2VydmljZSIsInJlc3BvbnNlVGltZSIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJtb2NrUmVqZWN0ZWRWYWx1ZU9uY2UiLCJFcnJvciIsImVycm9yIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsInRvQmVMZXNzVGhhbiIsImRvd250aW1lVXB0aW1lIiwicmVjb3ZlcmVkVXB0aW1lIiwidG9CZUdyZWF0ZXJUaGFuIiwiY29uc29sZVNweSIsInNweU9uIiwiY29uc29sZSIsInN0YXJ0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJzdHJpbmdDb250YWluaW5nIiwibW9ja1Jlc3RvcmUiLCJ1bmhlYWx0aHkiLCJnZXRVbmhlYWx0aHlTZXJ2aWNlcyJdLCJzb3VyY2VzIjpbImhlYWx0aC1tb25pdG9yLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGVhbHRoTW9uaXRvciwgU2VydmljZUhlYWx0aCB9IGZyb20gJy4uL3NyYy9oZWFsdGgtbW9uaXRvcic7XHJcblxyXG4vLyBNb2NrIGZldGNoIGdsb2JhbGx5XHJcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcclxuXHJcbmRlc2NyaWJlKCdIZWFsdGhNb25pdG9yJywgKCkgPT4ge1xyXG4gIGxldCBoZWFsdGhNb25pdG9yOiBIZWFsdGhNb25pdG9yO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGhlYWx0aE1vbml0b3IgPSBuZXcgSGVhbHRoTW9uaXRvcigxMDAwKTsgLy8gMSBzZWNvbmQgZm9yIHRlc3RpbmdcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgaGVhbHRoTW9uaXRvci5zdG9wKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTZXJ2aWNlIFJlZ2lzdHJhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmVnaXN0ZXIgYSBzZXJ2aWNlIGZvciBtb25pdG9yaW5nJywgKCkgPT4ge1xyXG4gICAgICBoZWFsdGhNb25pdG9yLnJlZ2lzdGVyU2VydmljZSgndGVzdC1zZXJ2aWNlJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xyXG5cclxuICAgICAgY29uc3QgaGVhbHRoID0gaGVhbHRoTW9uaXRvci5nZXRTZXJ2aWNlSGVhbHRoKCd0ZXN0LXNlcnZpY2UnKTtcclxuICAgICAgZXhwZWN0KGhlYWx0aCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGhlYWx0aD8ubmFtZSkudG9CZSgndGVzdC1zZXJ2aWNlJyk7XHJcbiAgICAgIGV4cGVjdChoZWFsdGg/LnVybCkudG9CZSgnaHR0cDovL2xvY2FsaG9zdDozMDAwJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgc2VydmljZSB3aXRoIGhlYWx0aHkgc3RhdHVzJywgKCkgPT4ge1xyXG4gICAgICBoZWFsdGhNb25pdG9yLnJlZ2lzdGVyU2VydmljZSgndGVzdC1zZXJ2aWNlJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xyXG5cclxuICAgICAgY29uc3QgaGVhbHRoID0gaGVhbHRoTW9uaXRvci5nZXRTZXJ2aWNlSGVhbHRoKCd0ZXN0LXNlcnZpY2UnKTtcclxuICAgICAgZXhwZWN0KGhlYWx0aD8uc3RhdHVzKS50b0JlKCdoZWFsdGh5Jyk7XHJcbiAgICAgIGV4cGVjdChoZWFsdGg/LnVwdGltZSkudG9CZSgxMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBtdWx0aXBsZSBzZXJ2aWNlcycsICgpID0+IHtcclxuICAgICAgaGVhbHRoTW9uaXRvci5yZWdpc3RlclNlcnZpY2UoJ3NlcnZpY2UtMScsICdodHRwOi8vbG9jYWxob3N0OjMwMDEnKTtcclxuICAgICAgaGVhbHRoTW9uaXRvci5yZWdpc3RlclNlcnZpY2UoJ3NlcnZpY2UtMicsICdodHRwOi8vbG9jYWxob3N0OjMwMDInKTtcclxuXHJcbiAgICAgIGNvbnN0IGFsbEhlYWx0aCA9IGhlYWx0aE1vbml0b3IuZ2V0QWxsSGVhbHRoKCk7XHJcbiAgICAgIGV4cGVjdChhbGxIZWFsdGgpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnSGVhbHRoIENoZWNrcycsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBoZWFsdGhNb25pdG9yLnJlZ2lzdGVyU2VydmljZSgndGVzdC1zZXJ2aWNlJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjaGVjayBzZXJ2aWNlIGhlYWx0aCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xyXG4gICAgICAgIG9rOiB0cnVlLFxyXG4gICAgICAgIHN0YXR1czogMjAwXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGVhbHRoTW9uaXRvci5jaGVja1NlcnZpY2UoJ3Rlc3Qtc2VydmljZScpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5oZWFsdGh5KS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnNlcnZpY2UpLnRvQmUoJ3Rlc3Qtc2VydmljZScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnJlc3BvbnNlVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHVuaGVhbHRoeSBzZXJ2aWNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcclxuICAgICAgICBvazogZmFsc2UsXHJcbiAgICAgICAgc3RhdHVzOiA1MDBcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoZWFsdGhNb25pdG9yLmNoZWNrU2VydmljZSgndGVzdC1zZXJ2aWNlJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWx0aHkpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBjb25zdCBoZWFsdGggPSBoZWFsdGhNb25pdG9yLmdldFNlcnZpY2VIZWFsdGgoJ3Rlc3Qtc2VydmljZScpO1xyXG4gICAgICBleHBlY3QoaGVhbHRoPy5zdGF0dXMpLnRvQmUoJ2RlZ3JhZGVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBzZXJ2aWNlIGRvd24gb24gZmV0Y2ggZXJyb3InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdDb25uZWN0aW9uIHJlZnVzZWQnKSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoZWFsdGhNb25pdG9yLmNoZWNrU2VydmljZSgndGVzdC1zZXJ2aWNlJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmhlYWx0aHkpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBjb25zdCBoZWFsdGggPSBoZWFsdGhNb25pdG9yLmdldFNlcnZpY2VIZWFsdGgoJ3Rlc3Qtc2VydmljZScpO1xyXG4gICAgICBleHBlY3QoaGVhbHRoPy5zdGF0dXMpLnRvQmUoJ2Rvd24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdHJhY2sgcmVzcG9uc2UgdGltZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBcclxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSh7IG9rOiB0cnVlIH0pLCAxMDApKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGVhbHRoTW9uaXRvci5jaGVja1NlcnZpY2UoJ3Rlc3Qtc2VydmljZScpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5yZXNwb25zZVRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMTAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHVwdGltZSBvbiBzdWNjZXNzZnVsIGNoZWNrcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHsgb2s6IHRydWUgfSk7XHJcblxyXG4gICAgICBhd2FpdCBoZWFsdGhNb25pdG9yLmNoZWNrU2VydmljZSgndGVzdC1zZXJ2aWNlJyk7XHJcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGhlYWx0aE1vbml0b3IuZ2V0U2VydmljZUhlYWx0aCgndGVzdC1zZXJ2aWNlJyk7XHJcblxyXG4gICAgICBleHBlY3QoaGVhbHRoPy51cHRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMTAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGVjcmVhc2UgdXB0aW1lIG9uIGZhaWxlZCBjaGVja3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0ZhaWxlZCcpKTtcclxuXHJcbiAgICAgIGF3YWl0IGhlYWx0aE1vbml0b3IuY2hlY2tTZXJ2aWNlKCd0ZXN0LXNlcnZpY2UnKTtcclxuICAgICAgY29uc3QgaGVhbHRoID0gaGVhbHRoTW9uaXRvci5nZXRTZXJ2aWNlSGVhbHRoKCd0ZXN0LXNlcnZpY2UnKTtcclxuXHJcbiAgICAgIGV4cGVjdChoZWFsdGg/LnVwdGltZSkudG9CZUxlc3NUaGFuKDEwMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0hlYWx0aCBSZXN0b3JhdGlvbicsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBoZWFsdGhNb25pdG9yLnJlZ2lzdGVyU2VydmljZSgndGVzdC1zZXJ2aWNlJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXN0b3JlIGhlYWx0aCBhZnRlciByZWNvdmVyeScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gRmlyc3QgZmFpbFxyXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignRmFpbGVkJykpO1xyXG4gICAgICBhd2FpdCBoZWFsdGhNb25pdG9yLmNoZWNrU2VydmljZSgndGVzdC1zZXJ2aWNlJyk7XHJcbiAgICAgIFxyXG4gICAgICBsZXQgaGVhbHRoID0gaGVhbHRoTW9uaXRvci5nZXRTZXJ2aWNlSGVhbHRoKCd0ZXN0LXNlcnZpY2UnKTtcclxuICAgICAgZXhwZWN0KGhlYWx0aD8uc3RhdHVzKS50b0JlKCdkb3duJyk7XHJcblxyXG4gICAgICAvLyBUaGVuIHN1Y2NlZWRcclxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IG9rOiB0cnVlIH0pO1xyXG4gICAgICBhd2FpdCBoZWFsdGhNb25pdG9yLmNoZWNrU2VydmljZSgndGVzdC1zZXJ2aWNlJyk7XHJcblxyXG4gICAgICBoZWFsdGggPSBoZWFsdGhNb25pdG9yLmdldFNlcnZpY2VIZWFsdGgoJ3Rlc3Qtc2VydmljZScpO1xyXG4gICAgICBleHBlY3QoaGVhbHRoPy5zdGF0dXMpLnRvQmUoJ2hlYWx0aHknKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ3JhZHVhbGx5IHJlc3RvcmUgdXB0aW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBGYWlsIG11bHRpcGxlIHRpbWVzXHJcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0ZhaWxlZCcpKTtcclxuICAgICAgYXdhaXQgaGVhbHRoTW9uaXRvci5jaGVja1NlcnZpY2UoJ3Rlc3Qtc2VydmljZScpO1xyXG4gICAgICBhd2FpdCBoZWFsdGhNb25pdG9yLmNoZWNrU2VydmljZSgndGVzdC1zZXJ2aWNlJyk7XHJcblxyXG4gICAgICBjb25zdCBkb3dudGltZVVwdGltZSA9IGhlYWx0aE1vbml0b3IuZ2V0U2VydmljZUhlYWx0aCgndGVzdC1zZXJ2aWNlJyk/LnVwdGltZSB8fCAwO1xyXG5cclxuICAgICAgLy8gU3VjY2VlZCBtdWx0aXBsZSB0aW1lc1xyXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoeyBvazogdHJ1ZSB9KTtcclxuICAgICAgYXdhaXQgaGVhbHRoTW9uaXRvci5jaGVja1NlcnZpY2UoJ3Rlc3Qtc2VydmljZScpO1xyXG4gICAgICBhd2FpdCBoZWFsdGhNb25pdG9yLmNoZWNrU2VydmljZSgndGVzdC1zZXJ2aWNlJyk7XHJcblxyXG4gICAgICBjb25zdCByZWNvdmVyZWRVcHRpbWUgPSBoZWFsdGhNb25pdG9yLmdldFNlcnZpY2VIZWFsdGgoJ3Rlc3Qtc2VydmljZScpPy51cHRpbWUgfHwgMDtcclxuICAgICAgZXhwZWN0KHJlY292ZXJlZFVwdGltZSkudG9CZUdyZWF0ZXJUaGFuKGRvd250aW1lVXB0aW1lKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnTW9uaXRvcmluZyBDb250cm9sJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzdGFydCBtb25pdG9yaW5nJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJyk7XHJcbiAgICAgIGhlYWx0aE1vbml0b3Iuc3RhcnQoKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnSGVhbHRoIG1vbml0b3Jpbmcgc3RhcnRlZCcpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN0b3AgbW9uaXRvcmluZycsICgpID0+IHtcclxuICAgICAgaGVhbHRoTW9uaXRvci5zdGFydCgpO1xyXG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJyk7XHJcbiAgICAgIFxyXG4gICAgICBoZWFsdGhNb25pdG9yLnN0b3AoKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnSGVhbHRoIG1vbml0b3Jpbmcgc3RvcHBlZCcpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIG5vdCBzdGFydCBtb25pdG9yaW5nIHR3aWNlJywgKCkgPT4ge1xyXG4gICAgICBoZWFsdGhNb25pdG9yLnN0YXJ0KCk7XHJcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKTtcclxuICAgICAgXHJcbiAgICAgIGhlYWx0aE1vbml0b3Iuc3RhcnQoKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnYWxyZWFkeSBhY3RpdmUnKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdVbmhlYWx0aHkgU2VydmljZXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IHVuaGVhbHRoeSBzZXJ2aWNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgaGVhbHRoTW9uaXRvci5yZWdpc3RlclNlcnZpY2UoJ2hlYWx0aHktc2VydmljZScsICdodHRwOi8vbG9jYWxob3N0OjMwMDEnKTtcclxuICAgICAgaGVhbHRoTW9uaXRvci5yZWdpc3RlclNlcnZpY2UoJ3VuaGVhbHRoeS1zZXJ2aWNlJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMicpO1xyXG5cclxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXHJcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IG9rOiB0cnVlIH0pXHJcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0ZhaWxlZCcpKTtcclxuXHJcbiAgICAgIGF3YWl0IGhlYWx0aE1vbml0b3IuY2hlY2tTZXJ2aWNlKCdoZWFsdGh5LXNlcnZpY2UnKTtcclxuICAgICAgYXdhaXQgaGVhbHRoTW9uaXRvci5jaGVja1NlcnZpY2UoJ3VuaGVhbHRoeS1zZXJ2aWNlJyk7XHJcblxyXG4gICAgICBjb25zdCB1bmhlYWx0aHkgPSBoZWFsdGhNb25pdG9yLmdldFVuaGVhbHRoeVNlcnZpY2VzKCk7XHJcbiAgICAgIGV4cGVjdCh1bmhlYWx0aHkpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHVuaGVhbHRoeVswXS5uYW1lKS50b0JlKCd1bmhlYWx0aHktc2VydmljZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgYXJyYXkgd2hlbiBhbGwgc2VydmljZXMgaGVhbHRoeScsIGFzeW5jICgpID0+IHtcclxuICAgICAgaGVhbHRoTW9uaXRvci5yZWdpc3RlclNlcnZpY2UoJ3NlcnZpY2UtMScsICdodHRwOi8vbG9jYWxob3N0OjMwMDEnKTtcclxuICAgICAgaGVhbHRoTW9uaXRvci5yZWdpc3RlclNlcnZpY2UoJ3NlcnZpY2UtMicsICdodHRwOi8vbG9jYWxob3N0OjMwMDInKTtcclxuXHJcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG9rOiB0cnVlIH0pO1xyXG5cclxuICAgICAgYXdhaXQgaGVhbHRoTW9uaXRvci5jaGVja1NlcnZpY2UoJ3NlcnZpY2UtMScpO1xyXG4gICAgICBhd2FpdCBoZWFsdGhNb25pdG9yLmNoZWNrU2VydmljZSgnc2VydmljZS0yJyk7XHJcblxyXG4gICAgICBjb25zdCB1bmhlYWx0aHkgPSBoZWFsdGhNb25pdG9yLmdldFVuaGVhbHRoeVNlcnZpY2VzKCk7XHJcbiAgICAgIGV4cGVjdCh1bmhlYWx0aHkpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLGNBQUEsR0FBQUMsT0FBQTtBQUVBO0FB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