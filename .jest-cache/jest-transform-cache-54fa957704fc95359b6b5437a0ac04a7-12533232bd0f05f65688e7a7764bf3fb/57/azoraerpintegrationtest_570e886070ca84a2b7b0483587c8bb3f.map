{"version":3,"names":["request","require","app","describe","beforeAll","afterAll","it","promises","Array","fill","map","get","responses","Promise","all","forEach","res","expect","status","toBe","post","send","rateLimited","some","r","headers","malicious","data","JSON","stringify","body","not","toContain"],"sources":["azora-erp.integration.test.js"],"sourcesContent":["const request = require('supertest');\nconst app = require('../server');\n\ndescribe('azora-erp Integration Tests', () => {\n  beforeAll(async () => {\n    // Setup test database\n  });\n\n  afterAll(async () => {\n    // Cleanup test database\n  });\n\n  describe('API Integration', () => {\n    it('should handle concurrent requests', async () => {\n      const promises = Array(10).fill().map(() => \n        request(app).get('/health')\n      );\n      const responses = await Promise.all(promises);\n      responses.forEach(res => {\n        expect(res.status).toBe(200);\n      });\n    });\n\n    it('should handle malformed requests gracefully', async () => {\n      const res = await request(app)\n        .post('/api/test')\n        .send('invalid json')\n        .expect(400);\n    });\n\n    it('should enforce rate limiting', async () => {\n      const promises = Array(200).fill().map(() => \n        request(app).get('/health')\n      );\n      const responses = await Promise.all(promises);\n      const rateLimited = responses.some(r => r.status === 429);\n      expect(rateLimited).toBe(true);\n    });\n  });\n\n  describe('Security Tests', () => {\n    it('should have security headers', async () => {\n      const res = await request(app).get('/health');\n      expect(res.headers['x-content-type-options']).toBe('nosniff');\n      expect(res.headers['x-frame-options']).toBe('DENY');\n    });\n\n    it('should sanitize XSS attempts', async () => {\n      const malicious = '<script>alert(\"xss\")</script>';\n      const res = await request(app)\n        .post('/api/test')\n        .send({ data: malicious });\n      expect(JSON.stringify(res.body)).not.toContain('<script>');\n    });\n  });\n});"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,WAAW,CAAC;AACpC,MAAMC,GAAG,GAAGD,OAAO,CAAC,WAAW,CAAC;AAEhCE,QAAQ,CAAC,6BAA6B,EAAE,MAAM;EAC5CC,SAAS,CAAC,YAAY;IACpB;EAAA,CACD,CAAC;EAEFC,QAAQ,CAAC,YAAY;IACnB;EAAA,CACD,CAAC;EAEFF,QAAQ,CAAC,iBAAiB,EAAE,MAAM;IAChCG,EAAE,CAAC,mCAAmC,EAAE,YAAY;MAClD,MAAMC,QAAQ,GAAGC,KAAK,CAAC,EAAE,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,GAAG,CAAC,MACpCV,OAAO,CAACE,GAAG,CAAC,CAACS,GAAG,CAAC,SAAS,CAC5B,CAAC;MACD,MAAMC,SAAS,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACP,QAAQ,CAAC;MAC7CK,SAAS,CAACG,OAAO,CAACC,GAAG,IAAI;QACvBC,MAAM,CAACD,GAAG,CAACE,MAAM,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;MAC9B,CAAC,CAAC;IACJ,CAAC,CAAC;IAEFb,EAAE,CAAC,6CAA6C,EAAE,YAAY;MAC5D,MAAMU,GAAG,GAAG,MAAMhB,OAAO,CAACE,GAAG,CAAC,CAC3BkB,IAAI,CAAC,WAAW,CAAC,CACjBC,IAAI,CAAC,cAAc,CAAC,CACpBJ,MAAM,CAAC,GAAG,CAAC;IAChB,CAAC,CAAC;IAEFX,EAAE,CAAC,8BAA8B,EAAE,YAAY;MAC7C,MAAMC,QAAQ,GAAGC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,GAAG,CAAC,MACrCV,OAAO,CAACE,GAAG,CAAC,CAACS,GAAG,CAAC,SAAS,CAC5B,CAAC;MACD,MAAMC,SAAS,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACP,QAAQ,CAAC;MAC7C,MAAMe,WAAW,GAAGV,SAAS,CAACW,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACN,MAAM,KAAK,GAAG,CAAC;MACzDD,MAAM,CAACK,WAAW,CAAC,CAACH,IAAI,CAAC,IAAI,CAAC;IAChC,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFhB,QAAQ,CAAC,gBAAgB,EAAE,MAAM;IAC/BG,EAAE,CAAC,8BAA8B,EAAE,YAAY;MAC7C,MAAMU,GAAG,GAAG,MAAMhB,OAAO,CAACE,GAAG,CAAC,CAACS,GAAG,CAAC,SAAS,CAAC;MAC7CM,MAAM,CAACD,GAAG,CAACS,OAAO,CAAC,wBAAwB,CAAC,CAAC,CAACN,IAAI,CAAC,SAAS,CAAC;MAC7DF,MAAM,CAACD,GAAG,CAACS,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAACN,IAAI,CAAC,MAAM,CAAC;IACrD,CAAC,CAAC;IAEFb,EAAE,CAAC,8BAA8B,EAAE,YAAY;MAC7C,MAAMoB,SAAS,GAAG,+BAA+B;MACjD,MAAMV,GAAG,GAAG,MAAMhB,OAAO,CAACE,GAAG,CAAC,CAC3BkB,IAAI,CAAC,WAAW,CAAC,CACjBC,IAAI,CAAC;QAAEM,IAAI,EAAED;MAAU,CAAC,CAAC;MAC5BT,MAAM,CAACW,IAAI,CAACC,SAAS,CAACb,GAAG,CAACc,IAAI,CAAC,CAAC,CAACC,GAAG,CAACC,SAAS,CAAC,UAAU,CAAC;IAC5D,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}