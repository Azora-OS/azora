{"version":3,"names":["request","require","express","createTestApp","app","use","json","get","req","res","connected","network","blockHeight","Math","floor","random","peers","blockNumber","params","number","parseInt","hash","toString","substr","timestamp","Date","toISOString","transactions","post","from","to","value","body","undefined","status","error","transaction","transactionId","now","describe","beforeEach","it","response","expect","toBe","toHaveProperty","Array","isArray","send"],"sources":["blockchain-integration.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst express = require('express');\r\n\r\nfunction createTestApp() {\r\n  const app = express();\r\n  app.use(express.json());\r\n\r\n  app.get('/api/blockchain/status', (req, res) => {\r\n    res.json({\r\n      connected: true,\r\n      network: 'testnet',\r\n      blockHeight: Math.floor(Math.random() * 1000000),\r\n      peers: Math.floor(Math.random() * 50) + 10\r\n    });\r\n  });\r\n\r\n  app.get('/api/blockchain/block/:blockNumber', (req, res) => {\r\n    const { blockNumber } = req.params;\r\n\r\n    res.json({\r\n      number: parseInt(blockNumber),\r\n      hash: `0x${Math.random().toString(16).substr(2, 64)}`,\r\n      timestamp: new Date().toISOString(),\r\n      transactions: []\r\n    });\r\n  });\r\n\r\n  app.post('/api/blockchain/transaction', (req, res) => {\r\n    const { from, to, value } = req.body;\r\n\r\n    if (!from || !to || value === undefined) {\r\n      return res.status(400).json({ error: 'From, to, and value are required' });\r\n    }\r\n\r\n    const transaction = {\r\n      transactionId: `tx_${Date.now()}`,\r\n      hash: `0x${Math.random().toString(16).substr(2, 64)}`,\r\n      from,\r\n      to,\r\n      value,\r\n      status: 'pending',\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    res.json(transaction);\r\n  });\r\n\r\n  return app;\r\n}\r\n\r\ndescribe('Azora Blockchain - Integration Tests', () => {\r\n  let app;\r\n\r\n  beforeEach(() => {\r\n    app = createTestApp();\r\n  });\r\n\r\n  describe('GET /api/blockchain/status', () => {\r\n    it('should return blockchain connection status', async () => {\r\n      const response = await request(app)\r\n        .get('/api/blockchain/status');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('connected');\r\n      expect(response.body).toHaveProperty('network');\r\n      expect(response.body).toHaveProperty('blockHeight');\r\n    });\r\n\r\n    it('should report peer count', async () => {\r\n      const response = await request(app)\r\n        .get('/api/blockchain/status');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('peers');\r\n      expect(typeof response.body.peers).toBe('number');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/blockchain/block/:blockNumber', () => {\r\n    it('should retrieve block by number', async () => {\r\n      const blockNumber = 12345;\r\n      const response = await request(app)\r\n        .get(`/api/blockchain/block/${blockNumber}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.number).toBe(blockNumber);\r\n      expect(response.body).toHaveProperty('hash');\r\n      expect(response.body).toHaveProperty('timestamp');\r\n    });\r\n\r\n    it('should include transactions in block', async () => {\r\n      const response = await request(app)\r\n        .get('/api/blockchain/block/100');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('transactions');\r\n      expect(Array.isArray(response.body.transactions)).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('POST /api/blockchain/transaction', () => {\r\n    it('should create blockchain transaction', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/transaction')\r\n        .send({\r\n          from: '0x1234567890123456789012345678901234567890',\r\n          to: '0xabcdefabcdefabcdefabcdefabcdefabcdefabcd',\r\n          value: '1000000000000000000'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('transactionId');\r\n      expect(response.body).toHaveProperty('hash');\r\n      expect(response.body.status).toBe('pending');\r\n    });\r\n\r\n    it('should return error when from address is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/transaction')\r\n        .send({ to: '0xabcd', value: '100' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('From, to, and value are required');\r\n    });\r\n\r\n    it('should return error when to address is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/transaction')\r\n        .send({ from: '0x1234', value: '100' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('From, to, and value are required');\r\n    });\r\n\r\n    it('should return error when value is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/transaction')\r\n        .send({ from: '0x1234', to: '0xabcd' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('From, to, and value are required');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}