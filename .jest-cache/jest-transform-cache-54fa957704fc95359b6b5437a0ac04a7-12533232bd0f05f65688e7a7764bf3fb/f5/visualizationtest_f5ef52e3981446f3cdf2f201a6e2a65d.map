{"version":3,"names":["request","require","express","createTestApp","app","use","json","post","req","res","chartType","data","options","body","status","error","visualization","visualizationId","Date","now","config","width","height","theme","dataPoints","Array","isArray","length","timestamp","toISOString","get","types","count","describe","beforeEach","it","response","send","x","y","expect","toBe","toHaveProperty","label","value","toContain"],"sources":["visualization.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst express = require('express');\r\n\r\nfunction createTestApp() {\r\n  const app = express();\r\n  app.use(express.json());\r\n\r\n  app.post('/api/analytics/visualize', (req, res) => {\r\n    const { chartType, data, options } = req.body;\r\n\r\n    if (!chartType || !data) {\r\n      return res.status(400).json({ error: 'Chart type and data are required' });\r\n    }\r\n\r\n    const visualization = {\r\n      visualizationId: `viz_${Date.now()}`,\r\n      chartType,\r\n      config: {\r\n        width: options?.width || 800,\r\n        height: options?.height || 600,\r\n        theme: options?.theme || 'light'\r\n      },\r\n      dataPoints: Array.isArray(data) ? data.length : 0,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    res.json(visualization);\r\n  });\r\n\r\n  app.get('/api/analytics/chart-types', (req, res) => {\r\n    res.json({\r\n      types: ['line', 'bar', 'pie', 'scatter', 'heatmap'],\r\n      count: 5\r\n    });\r\n  });\r\n\r\n  return app;\r\n}\r\n\r\ndescribe('Azora Analytics - Visualization Tests', () => {\r\n  let app;\r\n\r\n  beforeEach(() => {\r\n    app = createTestApp();\r\n  });\r\n\r\n  describe('POST /api/analytics/visualize', () => {\r\n    it('should create visualization with specified chart type', async () => {\r\n      const response = await request(app)\r\n        .post('/api/analytics/visualize')\r\n        .send({\r\n          chartType: 'line',\r\n          data: [\r\n            { x: 1, y: 10 },\r\n            { x: 2, y: 20 },\r\n            { x: 3, y: 15 }\r\n          ],\r\n          options: { width: 1000, height: 500 }\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('visualizationId');\r\n      expect(response.body.chartType).toBe('line');\r\n      expect(response.body.dataPoints).toBe(3);\r\n    });\r\n\r\n    it('should return error when chart type is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/analytics/visualize')\r\n        .send({ data: [{ x: 1, y: 2 }] });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Chart type and data are required');\r\n    });\r\n\r\n    it('should return error when data is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/analytics/visualize')\r\n        .send({ chartType: 'bar' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Chart type and data are required');\r\n    });\r\n\r\n    it('should use default dimensions when not specified', async () => {\r\n      const response = await request(app)\r\n        .post('/api/analytics/visualize')\r\n        .send({\r\n          chartType: 'pie',\r\n          data: [{ label: 'A', value: 30 }]\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.config.width).toBe(800);\r\n      expect(response.body.config.height).toBe(600);\r\n    });\r\n\r\n    it('should use light theme by default', async () => {\r\n      const response = await request(app)\r\n        .post('/api/analytics/visualize')\r\n        .send({\r\n          chartType: 'bar',\r\n          data: [{ x: 'A', y: 10 }]\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.config.theme).toBe('light');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/analytics/chart-types', () => {\r\n    it('should return available chart types', async () => {\r\n      const response = await request(app)\r\n        .get('/api/analytics/chart-types');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('types');\r\n      expect(Array.isArray(response.body.types)).toBe(true);\r\n      expect(response.body.types).toContain('line');\r\n      expect(response.body.types).toContain('bar');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}