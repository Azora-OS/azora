634bb6d6e08669b97ec6ffd069bf646d
"use strict";

var _localLlmService = require("../local-llm-service");
var _types = require("../types");
var _queryClassifier = require("../query-classifier");
/**
 * Local LLM Service Integration Tests
 */

describe('LocalLLMService Integration', () => {
  let llmService;
  let classifier;
  beforeEach(async () => {
    llmService = new _localLlmService.LocalLLMService();
    classifier = new _queryClassifier.QueryClassifier();
    await llmService.initialize();
  });
  afterEach(async () => {
    await llmService.unload();
  });
  it('should route simple queries to Local LLM', async () => {
    const classification = await classifier.classify({
      query: 'What is Azora?'
    });
    expect(classification.classifiedAs).toBe(_types.QueryComplexity.SIMPLE);
    expect(classification.routedTo).toBe(_types.RoutingTier.LOCAL_LLM);
  });
  it('should process queries with zero cost', async () => {
    const response = await llmService.processQuery({
      query: 'Test query'
    });
    expect(response.cost).toBe(0);
    expect(response.routingTier).toBe(_types.RoutingTier.LOCAL_LLM);
  });
  it('should cache responses efficiently', async () => {
    const query = 'Cache test';
    const response1 = await llmService.processQuery({
      query
    });
    expect(response1.cached).toBe(false);
    const response2 = await llmService.processQuery({
      query
    });
    expect(response2.cached).toBe(true);
  });
  it('should complete within performance targets', async () => {
    const response = await llmService.processQuery({
      query: 'Performance test'
    });
    expect(response.responseTime).toBeLessThan(500);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9jYWxMbG1TZXJ2aWNlIiwicmVxdWlyZSIsIl90eXBlcyIsIl9xdWVyeUNsYXNzaWZpZXIiLCJkZXNjcmliZSIsImxsbVNlcnZpY2UiLCJjbGFzc2lmaWVyIiwiYmVmb3JlRWFjaCIsIkxvY2FsTExNU2VydmljZSIsIlF1ZXJ5Q2xhc3NpZmllciIsImluaXRpYWxpemUiLCJhZnRlckVhY2giLCJ1bmxvYWQiLCJpdCIsImNsYXNzaWZpY2F0aW9uIiwiY2xhc3NpZnkiLCJxdWVyeSIsImV4cGVjdCIsImNsYXNzaWZpZWRBcyIsInRvQmUiLCJRdWVyeUNvbXBsZXhpdHkiLCJTSU1QTEUiLCJyb3V0ZWRUbyIsIlJvdXRpbmdUaWVyIiwiTE9DQUxfTExNIiwicmVzcG9uc2UiLCJwcm9jZXNzUXVlcnkiLCJjb3N0Iiwicm91dGluZ1RpZXIiLCJyZXNwb25zZTEiLCJjYWNoZWQiLCJyZXNwb25zZTIiLCJyZXNwb25zZVRpbWUiLCJ0b0JlTGVzc1RoYW4iXSwic291cmNlcyI6WyJsb2NhbC1sbG0taW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTG9jYWwgTExNIFNlcnZpY2UgSW50ZWdyYXRpb24gVGVzdHNcclxuICovXHJcblxyXG5pbXBvcnQgeyBMb2NhbExMTVNlcnZpY2UgfSBmcm9tICcuLi9sb2NhbC1sbG0tc2VydmljZSc7XHJcbmltcG9ydCB7IFJvdXRpbmdUaWVyLCBRdWVyeUNvbXBsZXhpdHkgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFF1ZXJ5Q2xhc3NpZmllciB9IGZyb20gJy4uL3F1ZXJ5LWNsYXNzaWZpZXInO1xyXG5cclxuZGVzY3JpYmUoJ0xvY2FsTExNU2VydmljZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcclxuICBsZXQgbGxtU2VydmljZTogTG9jYWxMTE1TZXJ2aWNlO1xyXG4gIGxldCBjbGFzc2lmaWVyOiBRdWVyeUNsYXNzaWZpZXI7XHJcblxyXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgbGxtU2VydmljZSA9IG5ldyBMb2NhbExMTVNlcnZpY2UoKTtcclxuICAgIGNsYXNzaWZpZXIgPSBuZXcgUXVlcnlDbGFzc2lmaWVyKCk7XHJcbiAgICBhd2FpdCBsbG1TZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IGxsbVNlcnZpY2UudW5sb2FkKCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgcm91dGUgc2ltcGxlIHF1ZXJpZXMgdG8gTG9jYWwgTExNJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBhd2FpdCBjbGFzc2lmaWVyLmNsYXNzaWZ5KHtcclxuICAgICAgcXVlcnk6ICdXaGF0IGlzIEF6b3JhPydcclxuICAgIH0pO1xyXG5cclxuICAgIGV4cGVjdChjbGFzc2lmaWNhdGlvbi5jbGFzc2lmaWVkQXMpLnRvQmUoUXVlcnlDb21wbGV4aXR5LlNJTVBMRSk7XHJcbiAgICBleHBlY3QoY2xhc3NpZmljYXRpb24ucm91dGVkVG8pLnRvQmUoUm91dGluZ1RpZXIuTE9DQUxfTExNKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBwcm9jZXNzIHF1ZXJpZXMgd2l0aCB6ZXJvIGNvc3QnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxsbVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHtcclxuICAgICAgcXVlcnk6ICdUZXN0IHF1ZXJ5J1xyXG4gICAgfSk7XHJcblxyXG4gICAgZXhwZWN0KHJlc3BvbnNlLmNvc3QpLnRvQmUoMCk7XHJcbiAgICBleHBlY3QocmVzcG9uc2Uucm91dGluZ1RpZXIpLnRvQmUoUm91dGluZ1RpZXIuTE9DQUxfTExNKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBjYWNoZSByZXNwb25zZXMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBxdWVyeSA9ICdDYWNoZSB0ZXN0JztcclxuXHJcbiAgICBjb25zdCByZXNwb25zZTEgPSBhd2FpdCBsbG1TZXJ2aWNlLnByb2Nlc3NRdWVyeSh7IHF1ZXJ5IH0pO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlMS5jYWNoZWQpLnRvQmUoZmFsc2UpO1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlMiA9IGF3YWl0IGxsbVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHsgcXVlcnkgfSk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UyLmNhY2hlZCkudG9CZSh0cnVlKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBjb21wbGV0ZSB3aXRoaW4gcGVyZm9ybWFuY2UgdGFyZ2V0cycsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbGxtU2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICBxdWVyeTogJ1BlcmZvcm1hbmNlIHRlc3QnXHJcbiAgICB9KTtcclxuXHJcbiAgICBleHBlY3QocmVzcG9uc2UucmVzcG9uc2VUaW1lKS50b0JlTGVzc1RoYW4oNTAwKTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFJQSxJQUFBQSxnQkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQU5BO0FBQ0E7QUFDQTs7QUFNQUcsUUFBUSxDQUFDLDZCQUE2QixFQUFFLE1BQU07RUFDNUMsSUFBSUMsVUFBMkI7RUFDL0IsSUFBSUMsVUFBMkI7RUFFL0JDLFVBQVUsQ0FBQyxZQUFZO0lBQ3JCRixVQUFVLEdBQUcsSUFBSUcsZ0NBQWUsQ0FBQyxDQUFDO0lBQ2xDRixVQUFVLEdBQUcsSUFBSUcsZ0NBQWUsQ0FBQyxDQUFDO0lBQ2xDLE1BQU1KLFVBQVUsQ0FBQ0ssVUFBVSxDQUFDLENBQUM7RUFDL0IsQ0FBQyxDQUFDO0VBRUZDLFNBQVMsQ0FBQyxZQUFZO0lBQ3BCLE1BQU1OLFVBQVUsQ0FBQ08sTUFBTSxDQUFDLENBQUM7RUFDM0IsQ0FBQyxDQUFDO0VBRUZDLEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxZQUFZO0lBQ3pELE1BQU1DLGNBQWMsR0FBRyxNQUFNUixVQUFVLENBQUNTLFFBQVEsQ0FBQztNQUMvQ0MsS0FBSyxFQUFFO0lBQ1QsQ0FBQyxDQUFDO0lBRUZDLE1BQU0sQ0FBQ0gsY0FBYyxDQUFDSSxZQUFZLENBQUMsQ0FBQ0MsSUFBSSxDQUFDQyxzQkFBZSxDQUFDQyxNQUFNLENBQUM7SUFDaEVKLE1BQU0sQ0FBQ0gsY0FBYyxDQUFDUSxRQUFRLENBQUMsQ0FBQ0gsSUFBSSxDQUFDSSxrQkFBVyxDQUFDQyxTQUFTLENBQUM7RUFDN0QsQ0FBQyxDQUFDO0VBRUZYLEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxZQUFZO0lBQ3RELE1BQU1ZLFFBQVEsR0FBRyxNQUFNcEIsVUFBVSxDQUFDcUIsWUFBWSxDQUFDO01BQzdDVixLQUFLLEVBQUU7SUFDVCxDQUFDLENBQUM7SUFFRkMsTUFBTSxDQUFDUSxRQUFRLENBQUNFLElBQUksQ0FBQyxDQUFDUixJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzdCRixNQUFNLENBQUNRLFFBQVEsQ0FBQ0csV0FBVyxDQUFDLENBQUNULElBQUksQ0FBQ0ksa0JBQVcsQ0FBQ0MsU0FBUyxDQUFDO0VBQzFELENBQUMsQ0FBQztFQUVGWCxFQUFFLENBQUMsb0NBQW9DLEVBQUUsWUFBWTtJQUNuRCxNQUFNRyxLQUFLLEdBQUcsWUFBWTtJQUUxQixNQUFNYSxTQUFTLEdBQUcsTUFBTXhCLFVBQVUsQ0FBQ3FCLFlBQVksQ0FBQztNQUFFVjtJQUFNLENBQUMsQ0FBQztJQUMxREMsTUFBTSxDQUFDWSxTQUFTLENBQUNDLE1BQU0sQ0FBQyxDQUFDWCxJQUFJLENBQUMsS0FBSyxDQUFDO0lBRXBDLE1BQU1ZLFNBQVMsR0FBRyxNQUFNMUIsVUFBVSxDQUFDcUIsWUFBWSxDQUFDO01BQUVWO0lBQU0sQ0FBQyxDQUFDO0lBQzFEQyxNQUFNLENBQUNjLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDLENBQUNYLElBQUksQ0FBQyxJQUFJLENBQUM7RUFDckMsQ0FBQyxDQUFDO0VBRUZOLEVBQUUsQ0FBQyw0Q0FBNEMsRUFBRSxZQUFZO0lBQzNELE1BQU1ZLFFBQVEsR0FBRyxNQUFNcEIsVUFBVSxDQUFDcUIsWUFBWSxDQUFDO01BQzdDVixLQUFLLEVBQUU7SUFDVCxDQUFDLENBQUM7SUFFRkMsTUFBTSxDQUFDUSxRQUFRLENBQUNPLFlBQVksQ0FBQyxDQUFDQyxZQUFZLENBQUMsR0FBRyxDQUFDO0VBQ2pELENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==