{"version":3,"names":["_getJestObj","mock","app","getPath","jest","fn","name","paths","userData","home","documents","desktop","dialog","showMessageBox","_PermissionManager","require","fs","_interopRequireWildcard","_electron","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","describe","permissionManager","mockWindow","beforeEach","clearAllMocks","PermissionManager","id","readFile","mockRejectedValue","Error","writeFile","mockResolvedValue","undefined","it","initialize","expect","toHaveBeenCalled","mockConfig","version","grants","networkAllowlist","autoGrantPatterns","JSON","stringify","allowlist","getNetworkAllowlist","length","toBeGreaterThan","some","domain","toBe","granted","requestPermission","type","resource","not","response","reason","getGrants","grant","find","g","permanent","grantPermission","duration","expiresAt","toBeDefined","auditLog","getAuditLog","toMatchObject","toBeUndefined","matchingGrants","filter","revoked","revokePermission","allowed","isNetworkAllowed","addToNetworkAllowlist","entry","removed","removeFromNetworkAllowlist","addAutoGrantPattern","patterns","getAutoGrantPatterns","toContain","removeAutoGrantPattern","count","p","clearAuditLog","toEqual","before","Date","after","timestamp","toBeInstanceOf","getTime","toBeGreaterThanOrEqual","toBeLessThanOrEqual"],"sources":["PermissionManager.test.ts"],"sourcesContent":["import { PermissionManager } from '../PermissionManager';\nimport * as fs from 'fs/promises';\nimport { dialog } from 'electron';\n\n// Mock electron\njest.mock('electron', () => ({\n  app: {\n    getPath: jest.fn((name: string) => {\n      const paths: Record<string, string> = {\n        userData: '/mock/user/data',\n        home: '/mock/home',\n        documents: '/mock/documents',\n        desktop: '/mock/desktop',\n      };\n      return paths[name] || '/mock/path';\n    }),\n  },\n  dialog: {\n    showMessageBox: jest.fn(),\n  },\n}));\n\n// Mock fs/promises\njest.mock('fs/promises');\n\ndescribe('PermissionManager', () => {\n  let permissionManager: PermissionManager;\n  let mockWindow: any;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    permissionManager = new PermissionManager();\n    mockWindow = { id: 1 };\n\n    // Mock fs operations\n    (fs.readFile as jest.Mock).mockRejectedValue(new Error('File not found'));\n    (fs.writeFile as jest.Mock).mockResolvedValue(undefined);\n  });\n\n  describe('initialization', () => {\n    it('should initialize successfully', async () => {\n      await permissionManager.initialize(mockWindow);\n      \n      expect(fs.writeFile).toHaveBeenCalled();\n    });\n\n    it('should load existing config if available', async () => {\n      const mockConfig = {\n        version: '1.0.0',\n        grants: [],\n        networkAllowlist: [],\n        autoGrantPatterns: [],\n      };\n\n      (fs.readFile as jest.Mock).mockResolvedValue(JSON.stringify(mockConfig));\n\n      await permissionManager.initialize(mockWindow);\n      \n      expect(fs.readFile).toHaveBeenCalled();\n    });\n\n    it('should add default network allowlist entries', async () => {\n      await permissionManager.initialize(mockWindow);\n      \n      const allowlist = permissionManager.getNetworkAllowlist();\n      expect(allowlist.length).toBeGreaterThan(0);\n      expect(allowlist.some(e => e.domain === 'api.openai.com')).toBe(true);\n      expect(allowlist.some(e => e.domain === 'api.anthropic.com')).toBe(true);\n    });\n  });\n\n  describe('requestPermission', () => {\n    beforeEach(async () => {\n      await permissionManager.initialize(mockWindow);\n    });\n\n    it('should auto-grant filesystem permissions for home directory', async () => {\n      const granted = await permissionManager.requestPermission({\n        type: 'filesystem:read',\n        resource: '/mock/home/projects/test',\n      });\n\n      expect(granted).toBe(true);\n      expect(dialog.showMessageBox).not.toHaveBeenCalled();\n    });\n\n    it('should prompt for non-auto-granted permissions', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 0 }); // Allow\n\n      const granted = await permissionManager.requestPermission({\n        type: 'network:request',\n        resource: 'unknown-domain.com',\n        reason: 'Test request',\n      });\n\n      expect(granted).toBe(true);\n      expect(dialog.showMessageBox).toHaveBeenCalled();\n    });\n\n    it('should deny permission when user clicks Deny', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 1 }); // Deny\n\n      const granted = await permissionManager.requestPermission({\n        type: 'network:request',\n        resource: 'unknown-domain.com',\n      });\n\n      expect(granted).toBe(false);\n    });\n\n    it('should grant permanent permission when user clicks Allow Always', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 2 }); // Allow Always\n\n      const granted = await permissionManager.requestPermission({\n        type: 'filesystem:write',\n        resource: '/some/path',\n      });\n\n      expect(granted).toBe(true);\n      \n      const grants = permissionManager.getGrants();\n      const grant = grants.find(g => g.resource === '/some/path');\n      expect(grant?.permanent).toBe(true);\n    });\n\n    it('should reuse existing grant', async () => {\n      await permissionManager.grantPermission('filesystem:read', '/test/path', true);\n\n      const granted = await permissionManager.requestPermission({\n        type: 'filesystem:read',\n        resource: '/test/path',\n      });\n\n      expect(granted).toBe(true);\n      expect(dialog.showMessageBox).not.toHaveBeenCalled();\n    });\n\n    it('should handle temporary permissions with expiration', async () => {\n      const duration = 1000; // 1 second\n      \n      await permissionManager.grantPermission('filesystem:write', '/temp/path', false, duration);\n\n      const grants = permissionManager.getGrants();\n      const grant = grants.find(g => g.resource === '/temp/path');\n      \n      expect(grant?.permanent).toBe(false);\n      expect(grant?.expiresAt).toBeDefined();\n    });\n\n    it('should log permission requests', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 0 });\n\n      await permissionManager.requestPermission({\n        type: 'network:request',\n        resource: 'test.com',\n        reason: 'Testing',\n      });\n\n      const auditLog = permissionManager.getAuditLog();\n      expect(auditLog.length).toBeGreaterThan(0);\n      expect(auditLog[auditLog.length - 1]).toMatchObject({\n        type: 'network:request',\n        resource: 'test.com',\n        granted: true,\n      });\n    });\n  });\n\n  describe('grantPermission', () => {\n    beforeEach(async () => {\n      await permissionManager.initialize(mockWindow);\n    });\n\n    it('should grant permanent permission', async () => {\n      await permissionManager.grantPermission('filesystem:read', '/test/path', true);\n\n      const grants = permissionManager.getGrants();\n      const grant = grants.find(g => g.resource === '/test/path');\n      \n      expect(grant).toBeDefined();\n      expect(grant?.permanent).toBe(true);\n      expect(grant?.expiresAt).toBeUndefined();\n    });\n\n    it('should grant temporary permission with expiration', async () => {\n      const duration = 3600000; // 1 hour\n      await permissionManager.grantPermission('filesystem:write', '/temp/path', false, duration);\n\n      const grants = permissionManager.getGrants();\n      const grant = grants.find(g => g.resource === '/temp/path');\n      \n      expect(grant).toBeDefined();\n      expect(grant?.permanent).toBe(false);\n      expect(grant?.expiresAt).toBeDefined();\n    });\n\n    it('should replace existing grant', async () => {\n      await permissionManager.grantPermission('filesystem:read', '/test/path', false);\n      await permissionManager.grantPermission('filesystem:read', '/test/path', true);\n\n      const grants = permissionManager.getGrants();\n      const matchingGrants = grants.filter(g => g.resource === '/test/path');\n      \n      expect(matchingGrants.length).toBe(1);\n      expect(matchingGrants[0].permanent).toBe(true);\n    });\n  });\n\n  describe('revokePermission', () => {\n    beforeEach(async () => {\n      await permissionManager.initialize(mockWindow);\n    });\n\n    it('should revoke existing permission', async () => {\n      await permissionManager.grantPermission('filesystem:read', '/test/path', true);\n      \n      const revoked = await permissionManager.revokePermission('filesystem:read', '/test/path');\n      expect(revoked).toBe(true);\n\n      const grants = permissionManager.getGrants();\n      expect(grants.find(g => g.resource === '/test/path')).toBeUndefined();\n    });\n\n    it('should return false for non-existent permission', async () => {\n      const revoked = await permissionManager.revokePermission('filesystem:read', '/nonexistent');\n      expect(revoked).toBe(false);\n    });\n  });\n\n  describe('network allowlist', () => {\n    beforeEach(async () => {\n      await permissionManager.initialize(mockWindow);\n    });\n\n    it('should allow known safe domains', async () => {\n      const allowed = await permissionManager.isNetworkAllowed('api.openai.com');\n      expect(allowed).toBe(true);\n    });\n\n    it('should prompt for unknown domains', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 0 }); // Allow\n\n      const allowed = await permissionManager.isNetworkAllowed('unknown-domain.com');\n      \n      expect(allowed).toBe(true);\n      expect(dialog.showMessageBox).toHaveBeenCalled();\n    });\n\n    it('should add domain to allowlist', async () => {\n      await permissionManager.addToNetworkAllowlist('test.com', true, 'Testing');\n\n      const allowlist = permissionManager.getNetworkAllowlist();\n      const entry = allowlist.find(e => e.domain === 'test.com');\n      \n      expect(entry).toBeDefined();\n      expect(entry?.allowed).toBe(true);\n      expect(entry?.reason).toBe('Testing');\n    });\n\n    it('should remove domain from allowlist', async () => {\n      await permissionManager.addToNetworkAllowlist('test.com', true);\n      \n      const removed = await permissionManager.removeFromNetworkAllowlist('test.com');\n      expect(removed).toBe(true);\n\n      const allowlist = permissionManager.getNetworkAllowlist();\n      expect(allowlist.find(e => e.domain === 'test.com')).toBeUndefined();\n    });\n\n    it('should block domains not in allowlist when user denies', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 1 }); // Deny\n\n      const allowed = await permissionManager.isNetworkAllowed('blocked-domain.com');\n      expect(allowed).toBe(false);\n    });\n  });\n\n  describe('auto-grant patterns', () => {\n    beforeEach(async () => {\n      await permissionManager.initialize(mockWindow);\n    });\n\n    it('should add auto-grant pattern', async () => {\n      await permissionManager.addAutoGrantPattern('/custom/path/**');\n\n      const patterns = permissionManager.getAutoGrantPatterns();\n      expect(patterns).toContain('/custom/path/**');\n    });\n\n    it('should remove auto-grant pattern', async () => {\n      await permissionManager.addAutoGrantPattern('/custom/path/**');\n      \n      const removed = await permissionManager.removeAutoGrantPattern('/custom/path/**');\n      expect(removed).toBe(true);\n\n      const patterns = permissionManager.getAutoGrantPatterns();\n      expect(patterns).not.toContain('/custom/path/**');\n    });\n\n    it('should not add duplicate patterns', async () => {\n      await permissionManager.addAutoGrantPattern('/test/**');\n      await permissionManager.addAutoGrantPattern('/test/**');\n\n      const patterns = permissionManager.getAutoGrantPatterns();\n      const count = patterns.filter(p => p === '/test/**').length;\n      expect(count).toBe(1);\n    });\n  });\n\n  describe('audit log', () => {\n    beforeEach(async () => {\n      await permissionManager.initialize(mockWindow);\n    });\n\n    it('should track permission requests in audit log', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 0 });\n\n      await permissionManager.requestPermission({\n        type: 'filesystem:write',\n        resource: '/test/path',\n        reason: 'Test operation',\n      });\n\n      const auditLog = permissionManager.getAuditLog();\n      expect(auditLog.length).toBeGreaterThan(0);\n      \n      const entry = auditLog[auditLog.length - 1];\n      expect(entry.type).toBe('filesystem:write');\n      expect(entry.resource).toBe('/test/path');\n      expect(entry.granted).toBe(true);\n    });\n\n    it('should clear audit log', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 0 });\n\n      await permissionManager.requestPermission({\n        type: 'filesystem:read',\n        resource: '/test',\n      });\n\n      expect(permissionManager.getAuditLog().length).toBeGreaterThan(0);\n      \n      permissionManager.clearAuditLog();\n      expect(permissionManager.getAuditLog()).toEqual([]);\n    });\n\n    it('should include timestamp in audit entries', async () => {\n      (dialog.showMessageBox as jest.Mock).mockResolvedValue({ response: 0 });\n\n      const before = new Date();\n      await permissionManager.requestPermission({\n        type: 'filesystem:read',\n        resource: '/test',\n      });\n      const after = new Date();\n\n      const auditLog = permissionManager.getAuditLog();\n      const entry = auditLog[auditLog.length - 1];\n      \n      expect(entry.timestamp).toBeInstanceOf(Date);\n      expect(entry.timestamp.getTime()).toBeGreaterThanOrEqual(before.getTime());\n      expect(entry.timestamp.getTime()).toBeLessThanOrEqual(after.getTime());\n    });\n  });\n\n  describe('getGrants', () => {\n    beforeEach(async () => {\n      await permissionManager.initialize(mockWindow);\n    });\n\n    it('should filter out expired grants', async () => {\n      // Add expired grant\n      await permissionManager.grantPermission('filesystem:read', '/expired', false, -1000);\n      \n      // Add valid grant\n      await permissionManager.grantPermission('filesystem:read', '/valid', true);\n\n      const grants = permissionManager.getGrants();\n      expect(grants.find(g => g.resource === '/expired')).toBeUndefined();\n      expect(grants.find(g => g.resource === '/valid')).toBeDefined();\n    });\n\n    it('should return all non-expired grants', async () => {\n      await permissionManager.grantPermission('filesystem:read', '/path1', true);\n      await permissionManager.grantPermission('filesystem:write', '/path2', true);\n      await permissionManager.grantPermission('network:request', 'domain.com', true);\n\n      const grants = permissionManager.getGrants();\n      expect(grants.length).toBeGreaterThanOrEqual(3);\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}