{"version":3,"names":["cov_22ol3qjmsp","actualCoverage","AppError","Error","constructor","statusCode","message","isOperational","b","f","s","Object","setPrototypeOf","prototype","exports","errorHandler","err","req","res","next","status","json","console","error","process","env","NODE_ENV"],"sources":["errorHandler.ts"],"sourcesContent":["import { Request, Response, NextFunction } from 'express';\n\nexport class AppError extends Error {\n  constructor(\n    public statusCode: number,\n    public message: string,\n    public isOperational = true\n  ) {\n    super(message);\n    Object.setPrototypeOf(this, AppError.prototype);\n  }\n}\n\nexport const errorHandler = (\n  err: Error,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  if (err instanceof AppError) {\n    return res.status(err.statusCode).json({\n      status: 'error',\n      message: err.message,\n    });\n  }\n\n  console.error('Unexpected error:', err);\n\n  const message = process.env.NODE_ENV === 'production'\n    ? 'Internal server error'\n    : err.message;\n\n  res.status(500).json({\n    status: 'error',\n    message,\n  });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAbL,MAAME,QAAQ,SAASC,KAAK,CAAC;EAClCC,WAAWA,CACFC,UAAkB,EAClBC,OAAe,EACfC,aAAa;EAAA;EAAA,CAAAP,cAAA,GAAAQ,CAAA,UAAG,IAAI,GAC3B;IAAA;IAAAR,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAU,CAAA;IACA,KAAK,CAACJ,OAAO,CAAC;IAAC;IAAA,KAJRD,UAAkB,GAAlBA,UAAkB;IAAA;IAAA,KAClBC,OAAe,GAAfA,OAAe;IAAA;IAAA,KACfC,aAAa,GAAbA,aAAa;IAAA;IAAAP,cAAA,GAAAU,CAAA;IAGpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEV,QAAQ,CAACW,SAAS,CAAC;EACjD;AACF;AAAC;AAAAC,OAAA,CAAAZ,QAAA,GAAAA,QAAA;AAAAF,cAAA,GAAAU,CAAA;AAEM,MAAMK,YAAY,GAAGA,CAC1BC,GAAU,EACVC,GAAY,EACZC,GAAa,EACbC,IAAkB,KACf;EAAA;EAAAnB,cAAA,GAAAS,CAAA;EAAAT,cAAA,GAAAU,CAAA;EACH,IAAIM,GAAG,YAAYd,QAAQ,EAAE;IAAA;IAAAF,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAU,CAAA;IAC3B,OAAOQ,GAAG,CAACE,MAAM,CAACJ,GAAG,CAACX,UAAU,CAAC,CAACgB,IAAI,CAAC;MACrCD,MAAM,EAAE,OAAO;MACfd,OAAO,EAAEU,GAAG,CAACV;IACf,CAAC,CAAC;EACJ,CAAC;EAAA;EAAA;IAAAN,cAAA,GAAAQ,CAAA;EAAA;EAAAR,cAAA,GAAAU,CAAA;EAEDY,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEP,GAAG,CAAC;EAEvC,MAAMV,OAAO;EAAA;EAAA,CAAAN,cAAA,GAAAU,CAAA,OAAGc,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY;EAAA;EAAA,CAAA1B,cAAA,GAAAQ,CAAA,UACjD,uBAAuB;EAAA;EAAA,CAAAR,cAAA,GAAAQ,CAAA,UACvBQ,GAAG,CAACV,OAAO;EAAC;EAAAN,cAAA,GAAAU,CAAA;EAEhBQ,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IACnBD,MAAM,EAAE,OAAO;IACfd;EACF,CAAC,CAAC;AACJ,CAAC;AAAC;AAAAQ,OAAA,CAAAC,YAAA,GAAAA,YAAA","ignoreList":[]}