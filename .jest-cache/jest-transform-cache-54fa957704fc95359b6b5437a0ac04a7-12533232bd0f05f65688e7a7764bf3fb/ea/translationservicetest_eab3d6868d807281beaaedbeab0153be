a50c02abb57d126df9f6368c34bb69de
"use strict";

_getJestObj().mock('@prisma/client', () => ({
  PrismaClient: jest.fn(() => ({
    course: {
      findUnique: jest.fn()
    },
    assessment: {
      findUnique: jest.fn()
    }
  }))
}));
var _translation = require("../translation.service");
var _client = require("@prisma/client");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('TranslationService', () => {
  let mockPrisma;
  beforeEach(() => {
    jest.clearAllMocks();
    mockPrisma = new _client.PrismaClient();
  });
  describe('translateCourse', () => {
    it('should translate course to target language', async () => {
      const mockCourse = {
        id: 'course-1',
        title: 'Advanced TypeScript',
        description: 'Learn advanced TypeScript concepts',
        modules: [{
          id: 'module-1',
          title: 'Generics',
          content: 'Understanding generics in TypeScript'
        }],
        assessments: [{
          id: 'assess-1',
          title: 'Quiz 1',
          questions: ['What are generics?']
        }]
      };
      mockPrisma.course.findUnique.mockResolvedValue(mockCourse);
      const translation = await _translation.translationService.translateCourse('course-1', 'es');
      expect(translation).toHaveProperty('courseId', 'course-1');
      expect(translation).toHaveProperty('language', 'es');
      expect(translation).toHaveProperty('translationStatus', 'completed');
    });
    it('should throw error for unsupported language', async () => {
      mockPrisma.course.findUnique.mockResolvedValue({
        id: 'course-1',
        title: 'Test Course',
        modules: [],
        assessments: []
      });
      await expect(_translation.translationService.translateCourse('course-1', 'xx')).rejects.toThrow('not supported');
    });
    it('should throw error if course not found', async () => {
      mockPrisma.course.findUnique.mockResolvedValue(null);
      await expect(_translation.translationService.translateCourse('invalid-id', 'es')).rejects.toThrow('Course not found');
    });
  });
  describe('getSupportedLanguages', () => {
    it('should return list of supported languages', () => {
      const languages = _translation.translationService.getSupportedLanguages();
      expect(Array.isArray(languages)).toBe(true);
      expect(languages.length).toBeGreaterThan(0);
      expect(languages).toContain('en');
      expect(languages).toContain('es');
      expect(languages).toContain('fr');
    });
    it('should include at least 10 languages', () => {
      const languages = _translation.translationService.getSupportedLanguages();
      expect(languages.length).toBeGreaterThanOrEqual(10);
    });
  });
  describe('getLocalizedUI', () => {
    it('should return localized UI strings for supported language', async () => {
      const uiStrings = await _translation.translationService.getLocalizedUI('es');
      expect(uiStrings).toHaveProperty('welcome');
      expect(uiStrings).toHaveProperty('courses');
      expect(uiStrings).toHaveProperty('enroll');
    });
    it('should throw error for unsupported language', async () => {
      await expect(_translation.translationService.getLocalizedUI('xx')).rejects.toThrow('not supported');
    });
    it('should return English strings as fallback', async () => {
      const uiStrings = await _translation.translationService.getLocalizedUI('en');
      expect(uiStrings.welcome).toBe('Welcome');
      expect(uiStrings.courses).toBe('Courses');
    });
    it('should return Spanish strings', async () => {
      const uiStrings = await _translation.translationService.getLocalizedUI('es');
      expect(uiStrings.welcome).toBe('Bienvenido');
      expect(uiStrings.courses).toBe('Cursos');
    });
    it('should return French strings', async () => {
      const uiStrings = await _translation.translationService.getLocalizedUI('fr');
      expect(uiStrings.welcome).toBe('Bienvenue');
      expect(uiStrings.courses).toBe('Cours');
    });
  });
  describe('localizeAssessment', () => {
    it('should localize assessment for target language', async () => {
      const mockAssessment = {
        id: 'assess-1',
        title: 'Quiz 1',
        questions: ['What are generics?', 'Explain interfaces']
      };
      mockPrisma.assessment.findUnique.mockResolvedValue(mockAssessment);
      const localized = await _translation.translationService.localizeAssessment('assess-1', 'es');
      expect(localized).toHaveProperty('id', 'assess-1');
      expect(localized).toHaveProperty('title');
      expect(localized).toHaveProperty('questions');
      expect(localized.questions).toHaveLength(2);
    });
    it('should throw error if assessment not found', async () => {
      mockPrisma.assessment.findUnique.mockResolvedValue(null);
      await expect(_translation.translationService.localizeAssessment('invalid-id', 'es')).rejects.toThrow('Assessment not found');
    });
    it('should throw error for unsupported language', async () => {
      mockPrisma.assessment.findUnique.mockResolvedValue({
        id: 'assess-1',
        title: 'Quiz',
        questions: []
      });
      await expect(_translation.translationService.localizeAssessment('assess-1', 'xx')).rejects.toThrow('not supported');
    });
  });
  describe('Language support', () => {
    it('should support Spanish', async () => {
      const languages = _translation.translationService.getSupportedLanguages();
      expect(languages).toContain('es');
    });
    it('should support French', async () => {
      const languages = _translation.translationService.getSupportedLanguages();
      expect(languages).toContain('fr');
    });
    it('should support German', async () => {
      const languages = _translation.translationService.getSupportedLanguages();
      expect(languages).toContain('de');
    });
    it('should support Chinese', async () => {
      const languages = _translation.translationService.getSupportedLanguages();
      expect(languages).toContain('zh');
    });
    it('should support Japanese', async () => {
      const languages = _translation.translationService.getSupportedLanguages();
      expect(languages).toContain('ja');
    });
    it('should support Arabic', async () => {
      const languages = _translation.translationService.getSupportedLanguages();
      expect(languages).toContain('ar');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJQcmlzbWFDbGllbnQiLCJqZXN0IiwiZm4iLCJjb3Vyc2UiLCJmaW5kVW5pcXVlIiwiYXNzZXNzbWVudCIsIl90cmFuc2xhdGlvbiIsInJlcXVpcmUiLCJfY2xpZW50IiwiZGVzY3JpYmUiLCJtb2NrUHJpc21hIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIm1vY2tDb3Vyc2UiLCJpZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJtb2R1bGVzIiwiY29udGVudCIsImFzc2Vzc21lbnRzIiwicXVlc3Rpb25zIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ0cmFuc2xhdGlvbiIsInRyYW5zbGF0aW9uU2VydmljZSIsInRyYW5zbGF0ZUNvdXJzZSIsImV4cGVjdCIsInRvSGF2ZVByb3BlcnR5IiwicmVqZWN0cyIsInRvVGhyb3ciLCJsYW5ndWFnZXMiLCJnZXRTdXBwb3J0ZWRMYW5ndWFnZXMiLCJBcnJheSIsImlzQXJyYXkiLCJ0b0JlIiwibGVuZ3RoIiwidG9CZUdyZWF0ZXJUaGFuIiwidG9Db250YWluIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInVpU3RyaW5ncyIsImdldExvY2FsaXplZFVJIiwid2VsY29tZSIsImNvdXJzZXMiLCJtb2NrQXNzZXNzbWVudCIsImxvY2FsaXplZCIsImxvY2FsaXplQXNzZXNzbWVudCIsInRvSGF2ZUxlbmd0aCJdLCJzb3VyY2VzIjpbInRyYW5zbGF0aW9uLnNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0cmFuc2xhdGlvblNlcnZpY2UgfSBmcm9tICcuLi90cmFuc2xhdGlvbi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5cclxuamVzdC5tb2NrKCdAcHJpc21hL2NsaWVudCcsICgpID0+ICh7XHJcbiAgUHJpc21hQ2xpZW50OiBqZXN0LmZuKCgpID0+ICh7XHJcbiAgICBjb3Vyc2U6IHtcclxuICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxyXG4gICAgfSxcclxuICAgIGFzc2Vzc21lbnQ6IHtcclxuICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxyXG4gICAgfSxcclxuICB9KSksXHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCdUcmFuc2xhdGlvblNlcnZpY2UnLCAoKSA9PiB7XHJcbiAgbGV0IG1vY2tQcmlzbWE6IGFueTtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIG1vY2tQcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCd0cmFuc2xhdGVDb3Vyc2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHRyYW5zbGF0ZSBjb3Vyc2UgdG8gdGFyZ2V0IGxhbmd1YWdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrQ291cnNlID0ge1xyXG4gICAgICAgIGlkOiAnY291cnNlLTEnLFxyXG4gICAgICAgIHRpdGxlOiAnQWR2YW5jZWQgVHlwZVNjcmlwdCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBhZHZhbmNlZCBUeXBlU2NyaXB0IGNvbmNlcHRzJyxcclxuICAgICAgICBtb2R1bGVzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAnbW9kdWxlLTEnLFxyXG4gICAgICAgICAgICB0aXRsZTogJ0dlbmVyaWNzJyxcclxuICAgICAgICAgICAgY29udGVudDogJ1VuZGVyc3RhbmRpbmcgZ2VuZXJpY3MgaW4gVHlwZVNjcmlwdCcsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgYXNzZXNzbWVudHM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6ICdhc3Nlc3MtMScsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnUXVpeiAxJyxcclxuICAgICAgICAgICAgcXVlc3Rpb25zOiBbJ1doYXQgYXJlIGdlbmVyaWNzPyddLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICBdLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja1ByaXNtYS5jb3Vyc2UuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ291cnNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gYXdhaXQgdHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZUNvdXJzZSgnY291cnNlLTEnLCAnZXMnKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0cmFuc2xhdGlvbikudG9IYXZlUHJvcGVydHkoJ2NvdXJzZUlkJywgJ2NvdXJzZS0xJyk7XHJcbiAgICAgIGV4cGVjdCh0cmFuc2xhdGlvbikudG9IYXZlUHJvcGVydHkoJ2xhbmd1YWdlJywgJ2VzJyk7XHJcbiAgICAgIGV4cGVjdCh0cmFuc2xhdGlvbikudG9IYXZlUHJvcGVydHkoJ3RyYW5zbGF0aW9uU3RhdHVzJywgJ2NvbXBsZXRlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgdW5zdXBwb3J0ZWQgbGFuZ3VhZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tQcmlzbWEuY291cnNlLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIGlkOiAnY291cnNlLTEnLFxyXG4gICAgICAgIHRpdGxlOiAnVGVzdCBDb3Vyc2UnLFxyXG4gICAgICAgIG1vZHVsZXM6IFtdLFxyXG4gICAgICAgIGFzc2Vzc21lbnRzOiBbXSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QodHJhbnNsYXRpb25TZXJ2aWNlLnRyYW5zbGF0ZUNvdXJzZSgnY291cnNlLTEnLCAneHgnKSkucmVqZWN0cy50b1Rocm93KFxyXG4gICAgICAgICdub3Qgc3VwcG9ydGVkJ1xyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBpZiBjb3Vyc2Ugbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrUHJpc21hLmNvdXJzZS5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHRyYW5zbGF0aW9uU2VydmljZS50cmFuc2xhdGVDb3Vyc2UoJ2ludmFsaWQtaWQnLCAnZXMnKSkucmVqZWN0cy50b1Rocm93KFxyXG4gICAgICAgICdDb3Vyc2Ugbm90IGZvdW5kJ1xyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRTdXBwb3J0ZWRMYW5ndWFnZXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBsaXN0IG9mIHN1cHBvcnRlZCBsYW5ndWFnZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRTdXBwb3J0ZWRMYW5ndWFnZXMoKTtcclxuXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGxhbmd1YWdlcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYW5ndWFnZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChsYW5ndWFnZXMpLnRvQ29udGFpbignZW4nKTtcclxuICAgICAgZXhwZWN0KGxhbmd1YWdlcykudG9Db250YWluKCdlcycpO1xyXG4gICAgICBleHBlY3QobGFuZ3VhZ2VzKS50b0NvbnRhaW4oJ2ZyJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgYXQgbGVhc3QgMTAgbGFuZ3VhZ2VzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBsYW5ndWFnZXMgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0U3VwcG9ydGVkTGFuZ3VhZ2VzKCk7XHJcblxyXG4gICAgICBleHBlY3QobGFuZ3VhZ2VzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldExvY2FsaXplZFVJJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbG9jYWxpemVkIFVJIHN0cmluZ3MgZm9yIHN1cHBvcnRlZCBsYW5ndWFnZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdWlTdHJpbmdzID0gYXdhaXQgdHJhbnNsYXRpb25TZXJ2aWNlLmdldExvY2FsaXplZFVJKCdlcycpO1xyXG5cclxuICAgICAgZXhwZWN0KHVpU3RyaW5ncykudG9IYXZlUHJvcGVydHkoJ3dlbGNvbWUnKTtcclxuICAgICAgZXhwZWN0KHVpU3RyaW5ncykudG9IYXZlUHJvcGVydHkoJ2NvdXJzZXMnKTtcclxuICAgICAgZXhwZWN0KHVpU3RyaW5ncykudG9IYXZlUHJvcGVydHkoJ2Vucm9sbCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgdW5zdXBwb3J0ZWQgbGFuZ3VhZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGV4cGVjdCh0cmFuc2xhdGlvblNlcnZpY2UuZ2V0TG9jYWxpemVkVUkoJ3h4JykpLnJlamVjdHMudG9UaHJvdygnbm90IHN1cHBvcnRlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gRW5nbGlzaCBzdHJpbmdzIGFzIGZhbGxiYWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB1aVN0cmluZ3MgPSBhd2FpdCB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0TG9jYWxpemVkVUkoJ2VuJyk7XHJcblxyXG4gICAgICBleHBlY3QodWlTdHJpbmdzLndlbGNvbWUpLnRvQmUoJ1dlbGNvbWUnKTtcclxuICAgICAgZXhwZWN0KHVpU3RyaW5ncy5jb3Vyc2VzKS50b0JlKCdDb3Vyc2VzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBTcGFuaXNoIHN0cmluZ3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVpU3RyaW5ncyA9IGF3YWl0IHRyYW5zbGF0aW9uU2VydmljZS5nZXRMb2NhbGl6ZWRVSSgnZXMnKTtcclxuXHJcbiAgICAgIGV4cGVjdCh1aVN0cmluZ3Mud2VsY29tZSkudG9CZSgnQmllbnZlbmlkbycpO1xyXG4gICAgICBleHBlY3QodWlTdHJpbmdzLmNvdXJzZXMpLnRvQmUoJ0N1cnNvcycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gRnJlbmNoIHN0cmluZ3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVpU3RyaW5ncyA9IGF3YWl0IHRyYW5zbGF0aW9uU2VydmljZS5nZXRMb2NhbGl6ZWRVSSgnZnInKTtcclxuXHJcbiAgICAgIGV4cGVjdCh1aVN0cmluZ3Mud2VsY29tZSkudG9CZSgnQmllbnZlbnVlJyk7XHJcbiAgICAgIGV4cGVjdCh1aVN0cmluZ3MuY291cnNlcykudG9CZSgnQ291cnMnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnbG9jYWxpemVBc3Nlc3NtZW50JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2NhbGl6ZSBhc3Nlc3NtZW50IGZvciB0YXJnZXQgbGFuZ3VhZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tBc3Nlc3NtZW50ID0ge1xyXG4gICAgICAgIGlkOiAnYXNzZXNzLTEnLFxyXG4gICAgICAgIHRpdGxlOiAnUXVpeiAxJyxcclxuICAgICAgICBxdWVzdGlvbnM6IFsnV2hhdCBhcmUgZ2VuZXJpY3M/JywgJ0V4cGxhaW4gaW50ZXJmYWNlcyddLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja1ByaXNtYS5hc3Nlc3NtZW50LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Fzc2Vzc21lbnQpO1xyXG5cclxuICAgICAgY29uc3QgbG9jYWxpemVkID0gYXdhaXQgdHJhbnNsYXRpb25TZXJ2aWNlLmxvY2FsaXplQXNzZXNzbWVudCgnYXNzZXNzLTEnLCAnZXMnKTtcclxuXHJcbiAgICAgIGV4cGVjdChsb2NhbGl6ZWQpLnRvSGF2ZVByb3BlcnR5KCdpZCcsICdhc3Nlc3MtMScpO1xyXG4gICAgICBleHBlY3QobG9jYWxpemVkKS50b0hhdmVQcm9wZXJ0eSgndGl0bGUnKTtcclxuICAgICAgZXhwZWN0KGxvY2FsaXplZCkudG9IYXZlUHJvcGVydHkoJ3F1ZXN0aW9ucycpO1xyXG4gICAgICBleHBlY3QobG9jYWxpemVkLnF1ZXN0aW9ucykudG9IYXZlTGVuZ3RoKDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBpZiBhc3Nlc3NtZW50IG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1ByaXNtYS5hc3Nlc3NtZW50LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QodHJhbnNsYXRpb25TZXJ2aWNlLmxvY2FsaXplQXNzZXNzbWVudCgnaW52YWxpZC1pZCcsICdlcycpKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICAgJ0Fzc2Vzc21lbnQgbm90IGZvdW5kJ1xyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgdW5zdXBwb3J0ZWQgbGFuZ3VhZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tQcmlzbWEuYXNzZXNzbWVudC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBpZDogJ2Fzc2Vzcy0xJyxcclxuICAgICAgICB0aXRsZTogJ1F1aXonLFxyXG4gICAgICAgIHF1ZXN0aW9uczogW10sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHRyYW5zbGF0aW9uU2VydmljZS5sb2NhbGl6ZUFzc2Vzc21lbnQoJ2Fzc2Vzcy0xJywgJ3h4JykpLnJlamVjdHMudG9UaHJvdyhcclxuICAgICAgICAnbm90IHN1cHBvcnRlZCdcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnTGFuZ3VhZ2Ugc3VwcG9ydCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBTcGFuaXNoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBsYW5ndWFnZXMgPSB0cmFuc2xhdGlvblNlcnZpY2UuZ2V0U3VwcG9ydGVkTGFuZ3VhZ2VzKCk7XHJcbiAgICAgIGV4cGVjdChsYW5ndWFnZXMpLnRvQ29udGFpbignZXMnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBGcmVuY2gnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRTdXBwb3J0ZWRMYW5ndWFnZXMoKTtcclxuICAgICAgZXhwZWN0KGxhbmd1YWdlcykudG9Db250YWluKCdmcicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IEdlcm1hbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFN1cHBvcnRlZExhbmd1YWdlcygpO1xyXG4gICAgICBleHBlY3QobGFuZ3VhZ2VzKS50b0NvbnRhaW4oJ2RlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgQ2hpbmVzZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFN1cHBvcnRlZExhbmd1YWdlcygpO1xyXG4gICAgICBleHBlY3QobGFuZ3VhZ2VzKS50b0NvbnRhaW4oJ3poJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgSmFwYW5lc2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IHRyYW5zbGF0aW9uU2VydmljZS5nZXRTdXBwb3J0ZWRMYW5ndWFnZXMoKTtcclxuICAgICAgZXhwZWN0KGxhbmd1YWdlcykudG9Db250YWluKCdqYScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IEFyYWJpYycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gdHJhbnNsYXRpb25TZXJ2aWNlLmdldFN1cHBvcnRlZExhbmd1YWdlcygpO1xyXG4gICAgICBleHBlY3QobGFuZ3VhZ2VzKS50b0NvbnRhaW4oJ2FyJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFHQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsT0FBTztFQUNqQ0MsWUFBWSxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxPQUFPO0lBQzNCQyxNQUFNLEVBQUU7TUFDTkMsVUFBVSxFQUFFSCxJQUFJLENBQUNDLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBQ0RHLFVBQVUsRUFBRTtNQUNWRCxVQUFVLEVBQUVILElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ3RCO0VBQ0YsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDLENBQUM7QUFaSCxJQUFBSSxZQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFBOEMsU0FBQVQsWUFBQTtFQUFBO0lBQUFHO0VBQUEsSUFBQU0sT0FBQTtFQUFBVCxXQUFBLEdBQUFBLENBQUEsS0FBQUcsSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQWE5Q1EsUUFBUSxDQUFDLG9CQUFvQixFQUFFLE1BQU07RUFDbkMsSUFBSUMsVUFBZTtFQUVuQkMsVUFBVSxDQUFDLE1BQU07SUFDZlYsSUFBSSxDQUFDVyxhQUFhLENBQUMsQ0FBQztJQUNwQkYsVUFBVSxHQUFHLElBQUlWLG9CQUFZLENBQUMsQ0FBQztFQUNqQyxDQUFDLENBQUM7RUFFRlMsUUFBUSxDQUFD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