{"version":3,"names":["request","require","app","describe","it","response","get","expect","body","status","toBe","service","success","Array","isArray","data","length","toBeGreaterThan","id","name","error","evolutionData","modelId","performanceData","accuracy","biasScore","responseTime","feedback","post","send","model","version","not","adaptiveData","userData","preferences","context","userId","adaptations","feedbackData","rating"],"sources":["ai-evolution.test.js"],"sourcesContent":["const request = require('supertest');\nconst app = require('../index.js');\n\ndescribe('AI Evolution Engine', () => {\n  // Health check test\n  describe('GET /health', () => {\n    it('should return health status', async () => {\n      const response = await request(app)\n        .get('/health')\n        .expect(200);\n\n      expect(response.body.status).toBe('healthy');\n      expect(response.body.service).toBe('ai-evolution-engine');\n    });\n  });\n\n  // Get all models test\n  describe('GET /api/models', () => {\n    it('should return list of models', async () => {\n      const response = await request(app)\n        .get('/api/models')\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(Array.isArray(response.body.data)).toBe(true);\n      expect(response.body.data.length).toBeGreaterThan(0);\n    });\n  });\n\n  // Get specific model test\n  describe('GET /api/models/:modelId', () => {\n    it('should return specific model data', async () => {\n      const response = await request(app)\n        .get('/api/models/model-1')\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.id).toBe('model-1');\n      expect(response.body.data.name).toBe('Constitutional AI Assistant');\n    });\n\n    it('should return 404 for non-existent model', async () => {\n      const response = await request(app)\n        .get('/api/models/non-existent')\n        .expect(404);\n\n      expect(response.body.error).toBe('Model not found');\n    });\n  });\n\n  // Model evolution test\n  describe('POST /api/evolve', () => {\n    it('should evolve a model with performance data', async () => {\n      const evolutionData = {\n        modelId: 'model-1',\n        performanceData: {\n          accuracy: 0.95,\n          biasScore: 0.10,\n          responseTime: 100\n        },\n        feedback: ['Great responses', 'Very helpful']\n      };\n\n      const response = await request(app)\n        .post('/api/evolve')\n        .send(evolutionData)\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.model.id).toBe('model-1');\n      expect(response.body.data.model.version).not.toBe('1.0.0');\n    });\n\n    it('should return 400 for missing model ID', async () => {\n      const evolutionData = {\n        performanceData: {\n          accuracy: 0.95\n        }\n      };\n\n      const response = await request(app)\n        .post('/api/evolve')\n        .send(evolutionData)\n        .expect(400);\n\n      expect(response.body.error).toBe('Model ID is required');\n    });\n\n    it('should return 404 for non-existent model', async () => {\n      const evolutionData = {\n        modelId: 'non-existent',\n        performanceData: {\n          accuracy: 0.95\n        }\n      };\n\n      const response = await request(app)\n        .post('/api/evolve')\n        .send(evolutionData)\n        .expect(404);\n\n      expect(response.body.error).toBe('Model not found');\n    });\n  });\n\n  // Adaptive learning test\n  describe('POST /api/adaptive-learning', () => {\n    it('should apply adaptive learning', async () => {\n      const adaptiveData = {\n        userData: {\n          id: 'user-123',\n          preferences: ['concise', 'technical']\n        },\n        context: 'programming',\n        preferences: ['concise', 'technical']\n      };\n\n      const response = await request(app)\n        .post('/api/adaptive-learning')\n        .send(adaptiveData)\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.userId).toBe('user-123');\n      expect(Array.isArray(response.body.data.adaptations)).toBe(true);\n    });\n\n    it('should return 400 for missing user data', async () => {\n      const adaptiveData = {\n        context: 'programming'\n      };\n\n      const response = await request(app)\n        .post('/api/adaptive-learning')\n        .send(adaptiveData)\n        .expect(400);\n\n      expect(response.body.error).toBe('User data with ID is required');\n    });\n  });\n\n  // Submit feedback test\n  describe('POST /api/models/:modelId/feedback', () => {\n    it('should record feedback for a model', async () => {\n      const feedbackData = {\n        feedback: 'This model is very accurate',\n        rating: 5,\n        userId: 'user-123'\n      };\n\n      const response = await request(app)\n        .post('/api/models/model-1/feedback')\n        .send(feedbackData)\n        .expect(200);\n\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.modelId).toBe('model-1');\n      expect(response.body.data.feedback).toBe('This model is very accurate');\n    });\n\n    it('should return 400 for missing feedback', async () => {\n      const feedbackData = {\n        rating: 5\n      };\n\n      const response = await request(app)\n        .post('/api/models/model-1/feedback')\n        .send(feedbackData)\n        .expect(400);\n\n      expect(response.body.error).toBe('Feedback is required');\n    });\n\n    it('should return 404 for non-existent model', async () => {\n      const feedbackData = {\n        feedback: 'Great model',\n        rating: 5\n      };\n\n      const response = await request(app)\n        .post('/api/models/non-existent/feedback')\n        .send(feedbackData)\n        .expect(404);\n\n      expect(response.body.error).toBe('Model not found');\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}