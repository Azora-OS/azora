33570a9b1e6bac3a414c14873d83be23
"use strict";

const request = require('supertest');
const app = require('../server');
describe('enterprise Performance Tests', () => {
  it('should respond within 100ms', async () => {
    const start = Date.now();
    await request(app).get('/health').expect(200);
    const duration = Date.now() - start;
    expect(duration).toBeLessThan(100);
  });
  it('should handle 1000 requests per second', async () => {
    const start = Date.now();
    const promises = Array(1000).fill().map(() => request(app).get('/health'));
    await Promise.all(promises);
    const duration = Date.now() - start;
    expect(duration).toBeLessThan(1000);
  });
  it('should have low memory usage', () => {
    const memBefore = process.memoryUsage().heapUsed;
    // Simulate workload
    for (let i = 0; i < 10000; i++) {
      const obj = {
        data: 'test'.repeat(100)
      };
    }
    const memAfter = process.memoryUsage().heapUsed;
    const memIncrease = memAfter - memBefore;
    expect(memIncrease).toBeLessThan(50 * 1024 * 1024); // 50MB
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsImRlc2NyaWJlIiwiaXQiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJnZXQiLCJleHBlY3QiLCJkdXJhdGlvbiIsInRvQmVMZXNzVGhhbiIsInByb21pc2VzIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiUHJvbWlzZSIsImFsbCIsIm1lbUJlZm9yZSIsInByb2Nlc3MiLCJtZW1vcnlVc2FnZSIsImhlYXBVc2VkIiwiaSIsIm9iaiIsImRhdGEiLCJyZXBlYXQiLCJtZW1BZnRlciIsIm1lbUluY3JlYXNlIl0sInNvdXJjZXMiOlsiZW50ZXJwcmlzZS5wZXJmb3JtYW5jZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IGFwcCA9IHJlcXVpcmUoJy4uL3NlcnZlcicpO1xuXG5kZXNjcmliZSgnZW50ZXJwcmlzZSBQZXJmb3JtYW5jZSBUZXN0cycsICgpID0+IHtcbiAgaXQoJ3Nob3VsZCByZXNwb25kIHdpdGhpbiAxMDBtcycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgYXdhaXQgcmVxdWVzdChhcHApLmdldCgnL2hlYWx0aCcpLmV4cGVjdCgyMDApO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIDEwMDAgcmVxdWVzdHMgcGVyIHNlY29uZCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBBcnJheSgxMDAwKS5maWxsKCkubWFwKCgpID0+IFxuICAgICAgcmVxdWVzdChhcHApLmdldCgnL2hlYWx0aCcpXG4gICAgKTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGF2ZSBsb3cgbWVtb3J5IHVzYWdlJywgKCkgPT4ge1xuICAgIGNvbnN0IG1lbUJlZm9yZSA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKS5oZWFwVXNlZDtcbiAgICAvLyBTaW11bGF0ZSB3b3JrbG9hZFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwMDA7IGkrKykge1xuICAgICAgY29uc3Qgb2JqID0geyBkYXRhOiAndGVzdCcucmVwZWF0KDEwMCkgfTtcbiAgICB9XG4gICAgY29uc3QgbWVtQWZ0ZXIgPSBwcm9jZXNzLm1lbW9yeVVzYWdlKCkuaGVhcFVzZWQ7XG4gICAgY29uc3QgbWVtSW5jcmVhc2UgPSBtZW1BZnRlciAtIG1lbUJlZm9yZTtcbiAgICBleHBlY3QobWVtSW5jcmVhc2UpLnRvQmVMZXNzVGhhbig1MCAqIDEwMjQgKiAxMDI0KTsgLy8gNTBNQlxuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRWhDRSxRQUFRLENBQUMsOEJBQThCLEVBQUUsTUFBTTtFQUM3Q0MsRUFBRSxDQUFDLDZCQUE2QixFQUFFLFlBQVk7SUFDNUMsTUFBTUMsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCLE1BQU1QLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQUNNLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQztJQUM3QyxNQUFNQyxRQUFRLEdBQUdKLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBR0YsS0FBSztJQUNuQ0ksTUFBTSxDQUFDQyxRQUFRLENBQUMsQ0FBQ0MsWUFBWSxDQUFDLEdBQUcsQ0FBQztFQUNwQyxDQUFDLENBQUM7RUFFRlAsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLFlBQVk7SUFDdkQsTUFBTUMsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCLE1BQU1LLFFBQVEsR0FBR0MsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxHQUFHLENBQUMsTUFDdENmLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQUNNLEdBQUcsQ0FBQyxTQUFTLENBQzVCLENBQUM7SUFDRCxNQUFNUSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0wsUUFBUSxDQUFDO0lBQzNCLE1BQU1GLFFBQVEsR0FBR0osSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHRixLQUFLO0lBQ25DSSxNQUFNLENBQUNDLFFBQVEsQ0FBQyxDQUFDQyxZQUFZLENBQUMsSUFBSSxDQUFDO0VBQ3JDLENBQUMsQ0FBQztFQUVGUCxFQUFFLENBQUMsOEJBQThCLEVBQUUsTUFBTTtJQUN2QyxNQUFNYyxTQUFTLEdBQUdDLE9BQU8sQ0FBQ0MsV0FBVyxDQUFDLENBQUMsQ0FBQ0MsUUFBUTtJQUNoRDtJQUNBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLEtBQUssRUFBRUEsQ0FBQyxFQUFFLEVBQUU7TUFDOUIsTUFBTUMsR0FBRyxHQUFHO1FBQUVDLElBQUksRUFBRSxNQUFNLENBQUNDLE1BQU0sQ0FBQyxHQUFHO01BQUUsQ0FBQztJQUMxQztJQUNBLE1BQU1DLFFBQVEsR0FBR1AsT0FBTyxDQUFDQyxXQUFXLENBQUMsQ0FBQyxDQUFDQyxRQUFRO0lBQy9DLE1BQU1NLFdBQVcsR0FBR0QsUUFBUSxHQUFHUixTQUFTO0lBQ3hDVCxNQUFNLENBQUNrQixXQUFXLENBQUMsQ0FBQ2hCLFlBQVksQ0FBQyxFQUFFLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDdEQsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119