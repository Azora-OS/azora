df915fb160abb78e5019f97859760d47
"use strict";

const request = require('supertest');
const app = require('../index.js');
describe('Azora Treasury Service', () => {
  // Health check test
  describe('GET /health', () => {
    it('should return health status', async () => {
      const response = await request(app).get('/health').expect(200);
      expect(response.body.status).toBe('healthy');
      expect(response.body.service).toBe('azora-treasury');
    });
  });

  // Get all treasury assets test
  describe('GET /api/assets', () => {
    it('should return all treasury assets', async () => {
      const response = await request(app).get('/api/assets').expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.assets).toBeDefined();
      expect(response.body.data.totalValue).toBeDefined();
      expect(response.body.data.count).toBeGreaterThanOrEqual(0);
    });
  });

  // Get specific treasury asset test
  describe('GET /api/assets/:assetId', () => {
    it('should return specific treasury asset', async () => {
      const response = await request(app).get('/api/assets/asset_1').expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.id).toBe('asset_1');
    });
    it('should return 404 for non-existent asset', async () => {
      const response = await request(app).get('/api/assets/non-existent').expect(404);
      expect(response.body.error).toBe('Asset not found');
    });
  });

  // Add a new treasury asset test
  describe('POST /api/assets', () => {
    it('should add a new treasury asset', async () => {
      const assetData = {
        type: 'cryptocurrency',
        name: 'Ethereum',
        symbol: 'ETH',
        amount: 50,
        value: 150000
      };
      const response = await request(app).post('/api/assets').send(assetData).expect(201);
      expect(response.body.success).toBe(true);
      expect(response.body.data.type).toBe('cryptocurrency');
      expect(response.body.data.name).toBe('Ethereum');
      expect(response.body.data.symbol).toBe('ETH');
    });
    it('should return 400 for missing required fields', async () => {
      const assetData = {
        type: 'cryptocurrency',
        name: 'Ethereum'
        // Missing symbol, amount, and value
      };
      const response = await request(app).post('/api/assets').send(assetData).expect(400);
      expect(response.body.error).toBe('Type, name, symbol, amount, and value are required');
    });
  });

  // Update treasury asset test
  describe('PUT /api/assets/:assetId', () => {
    let assetId;
    beforeAll(async () => {
      // Create an asset first
      const assetData = {
        type: 'fiat',
        name: 'EUR',
        symbol: 'EUR',
        amount: 50000,
        value: 50000
      };
      const response = await request(app).post('/api/assets').send(assetData);
      assetId = response.body.data.id;
    });
    it('should update treasury asset', async () => {
      const updateData = {
        amount: 75000,
        value: 75000
      };
      const response = await request(app).put(`/api/assets/${assetId}`).send(updateData).expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.amount).toBe(75000);
      expect(response.body.data.value).toBe(75000);
    });
    it('should return 404 for non-existent asset', async () => {
      const updateData = {
        amount: 100000
      };
      const response = await request(app).put('/api/assets/non-existent').send(updateData).expect(404);
      expect(response.body.error).toBe('Asset not found');
    });
  });

  // Reserve management test
  describe('POST /api/reserves', () => {
    let assetId;
    beforeAll(async () => {
      // Create an asset first
      const assetData = {
        type: 'commodity',
        name: 'Gold',
        symbol: 'XAU',
        amount: 100,
        value: 200000
      };
      const response = await request(app).post('/api/assets').send(assetData);
      assetId = response.body.data.id;
    });
    it('should manage treasury reserves', async () => {
      const reserveData = {
        assetId: assetId,
        amount: 25,
        action: 'add',
        description: 'Additional gold purchase'
      };
      const response = await request(app).post('/api/reserves').send(reserveData).expect(201);
      expect(response.body.success).toBe(true);
      expect(response.body.data.assetId).toBe(assetId);
      expect(response.body.data.amount).toBe(25);
      expect(response.body.data.action).toBe('add');
    });
    it('should return 400 for missing required fields', async () => {
      const reserveData = {
        assetId: assetId,
        amount: 25
        // Missing action
      };
      const response = await request(app).post('/api/reserves').send(reserveData).expect(400);
      expect(response.body.error).toBe('Asset ID, amount, and action are required');
    });
    it('should return 404 for non-existent asset', async () => {
      const reserveData = {
        assetId: 'non-existent',
        amount: 25,
        action: 'add'
      };
      const response = await request(app).post('/api/reserves').send(reserveData).expect(404);
      expect(response.body.error).toBe('Asset not found');
    });
  });

  // Get all reserve transactions test
  describe('GET /api/reserves', () => {
    it('should return all reserve transactions', async () => {
      const response = await request(app).get('/api/reserves').expect(200);
      expect(response.body.success).toBe(true);
      expect(Array.isArray(response.body.data)).toBe(true);
      expect(response.body.count).toBeGreaterThanOrEqual(0);
    });
  });

  // Get specific reserve transaction test
  describe('GET /api/reserves/:transactionId', () => {
    let transactionId;
    beforeAll(async () => {
      // Create an asset first
      const assetData = {
        type: 'equity',
        name: 'Apple Stock',
        symbol: 'AAPL',
        amount: 1000,
        value: 150000
      };
      const assetResponse = await request(app).post('/api/assets').send(assetData);
      const assetId = assetResponse.body.data.id;

      // Create a transaction
      const reserveData = {
        assetId: assetId,
        amount: 100,
        action: 'add',
        description: 'Additional stock purchase'
      };
      const transactionResponse = await request(app).post('/api/reserves').send(reserveData);
      transactionId = transactionResponse.body.data.id;
    });
    it('should return specific reserve transaction', async () => {
      const response = await request(app).get(`/api/reserves/${transactionId}`).expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.id).toBe(transactionId);
    });
    it('should return 404 for non-existent transaction', async () => {
      const response = await request(app).get('/api/reserves/non-existent').expect(404);
      expect(response.body.error).toBe('Transaction not found');
    });
  });

  // Financial reporting test
  describe('GET /api/reports', () => {
    it('should generate a financial report', async () => {
      const response = await request(app).get('/api/reports').expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.totalAssets).toBeDefined();
      expect(response.body.data.totalLiabilities).toBeDefined();
      expect(response.body.data.netWorth).toBeDefined();
      expect(response.body.data.assetBreakdown).toBeDefined();
    });
  });

  // Get specific financial report test
  describe('GET /api/reports/:reportId', () => {
    let reportId;
    beforeAll(async () => {
      // Generate a report first
      const response = await request(app).get('/api/reports');
      reportId = response.body.data.id;
    });
    it('should return specific financial report', async () => {
      const response = await request(app).get(`/api/reports/${reportId}`).expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.id).toBe(reportId);
    });
    it('should return 404 for non-existent report', async () => {
      const response = await request(app).get('/api/reports/non-existent').expect(404);
      expect(response.body.error).toBe('Report not found');
    });
  });

  // Get all financial reports test
  describe('GET /api/reports/history', () => {
    it('should return all financial reports', async () => {
      const response = await request(app).get('/api/reports/history').expect(200);
      expect(response.body.success).toBe(true);
      expect(Array.isArray(response.body.data)).toBe(true);
      expect(response.body.count).toBeGreaterThanOrEqual(0);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsImRlc2NyaWJlIiwiaXQiLCJyZXNwb25zZSIsImdldCIsImV4cGVjdCIsImJvZHkiLCJzdGF0dXMiLCJ0b0JlIiwic2VydmljZSIsInN1Y2Nlc3MiLCJkYXRhIiwiYXNzZXRzIiwidG9CZURlZmluZWQiLCJ0b3RhbFZhbHVlIiwiY291bnQiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwiaWQiLCJlcnJvciIsImFzc2V0RGF0YSIsInR5cGUiLCJuYW1lIiwic3ltYm9sIiwiYW1vdW50IiwidmFsdWUiLCJwb3N0Iiwic2VuZCIsImFzc2V0SWQiLCJiZWZvcmVBbGwiLCJ1cGRhdGVEYXRhIiwicHV0IiwicmVzZXJ2ZURhdGEiLCJhY3Rpb24iLCJkZXNjcmlwdGlvbiIsIkFycmF5IiwiaXNBcnJheSIsInRyYW5zYWN0aW9uSWQiLCJhc3NldFJlc3BvbnNlIiwidHJhbnNhY3Rpb25SZXNwb25zZSIsInRvdGFsQXNzZXRzIiwidG90YWxMaWFiaWxpdGllcyIsIm5ldFdvcnRoIiwiYXNzZXRCcmVha2Rvd24iLCJyZXBvcnRJZCJdLCJzb3VyY2VzIjpbInRyZWFzdXJ5LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vaW5kZXguanMnKTtcblxuZGVzY3JpYmUoJ0F6b3JhIFRyZWFzdXJ5IFNlcnZpY2UnLCAoKSA9PiB7XG4gIC8vIEhlYWx0aCBjaGVjayB0ZXN0XG4gIGRlc2NyaWJlKCdHRVQgL2hlYWx0aCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBoZWFsdGggc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2hlYWx0aCcpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3RhdHVzKS50b0JlKCdoZWFsdGh5Jyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zZXJ2aWNlKS50b0JlKCdhem9yYS10cmVhc3VyeScpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBHZXQgYWxsIHRyZWFzdXJ5IGFzc2V0cyB0ZXN0XG4gIGRlc2NyaWJlKCdHRVQgL2FwaS9hc3NldHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYWxsIHRyZWFzdXJ5IGFzc2V0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvYXNzZXRzJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5hc3NldHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnRvdGFsVmFsdWUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmNvdW50KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBHZXQgc3BlY2lmaWMgdHJlYXN1cnkgYXNzZXQgdGVzdFxuICBkZXNjcmliZSgnR0VUIC9hcGkvYXNzZXRzLzphc3NldElkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHNwZWNpZmljIHRyZWFzdXJ5IGFzc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9hc3NldHMvYXNzZXRfMScpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuaWQpLnRvQmUoJ2Fzc2V0XzEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwNCBmb3Igbm9uLWV4aXN0ZW50IGFzc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9hc3NldHMvbm9uLWV4aXN0ZW50JylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9CZSgnQXNzZXQgbm90IGZvdW5kJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEFkZCBhIG5ldyB0cmVhc3VyeSBhc3NldCB0ZXN0XG4gIGRlc2NyaWJlKCdQT1NUIC9hcGkvYXNzZXRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWRkIGEgbmV3IHRyZWFzdXJ5IGFzc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXNzZXREYXRhID0ge1xuICAgICAgICB0eXBlOiAnY3J5cHRvY3VycmVuY3knLFxuICAgICAgICBuYW1lOiAnRXRoZXJldW0nLFxuICAgICAgICBzeW1ib2w6ICdFVEgnLFxuICAgICAgICBhbW91bnQ6IDUwLFxuICAgICAgICB2YWx1ZTogMTUwMDAwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hc3NldHMnKVxuICAgICAgICAuc2VuZChhc3NldERhdGEpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEudHlwZSkudG9CZSgnY3J5cHRvY3VycmVuY3knKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEubmFtZSkudG9CZSgnRXRoZXJldW0nKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuc3ltYm9sKS50b0JlKCdFVEgnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgbWlzc2luZyByZXF1aXJlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhc3NldERhdGEgPSB7XG4gICAgICAgIHR5cGU6ICdjcnlwdG9jdXJyZW5jeScsXG4gICAgICAgIG5hbWU6ICdFdGhlcmV1bSdcbiAgICAgICAgLy8gTWlzc2luZyBzeW1ib2wsIGFtb3VudCwgYW5kIHZhbHVlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hc3NldHMnKVxuICAgICAgICAuc2VuZChhc3NldERhdGEpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQmUoJ1R5cGUsIG5hbWUsIHN5bWJvbCwgYW1vdW50LCBhbmQgdmFsdWUgYXJlIHJlcXVpcmVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSB0cmVhc3VyeSBhc3NldCB0ZXN0XG4gIGRlc2NyaWJlKCdQVVQgL2FwaS9hc3NldHMvOmFzc2V0SWQnLCAoKSA9PiB7XG4gICAgbGV0IGFzc2V0SWQ7XG5cbiAgICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGFuIGFzc2V0IGZpcnN0XG4gICAgICBjb25zdCBhc3NldERhdGEgPSB7XG4gICAgICAgIHR5cGU6ICdmaWF0JyxcbiAgICAgICAgbmFtZTogJ0VVUicsXG4gICAgICAgIHN5bWJvbDogJ0VVUicsXG4gICAgICAgIGFtb3VudDogNTAwMDAsXG4gICAgICAgIHZhbHVlOiA1MDAwMFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXNzZXRzJylcbiAgICAgICAgLnNlbmQoYXNzZXREYXRhKTtcblxuICAgICAgYXNzZXRJZCA9IHJlc3BvbnNlLmJvZHkuZGF0YS5pZDtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHRyZWFzdXJ5IGFzc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgICAgYW1vdW50OiA3NTAwMCxcbiAgICAgICAgdmFsdWU6IDc1MDAwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucHV0KGAvYXBpL2Fzc2V0cy8ke2Fzc2V0SWR9YClcbiAgICAgICAgLnNlbmQodXBkYXRlRGF0YSlcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5hbW91bnQpLnRvQmUoNzUwMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS52YWx1ZSkudG9CZSg3NTAwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDQgZm9yIG5vbi1leGlzdGVudCBhc3NldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICAgIGFtb3VudDogMTAwMDAwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucHV0KCcvYXBpL2Fzc2V0cy9ub24tZXhpc3RlbnQnKVxuICAgICAgICAuc2VuZCh1cGRhdGVEYXRhKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdBc3NldCBub3QgZm91bmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gUmVzZXJ2ZSBtYW5hZ2VtZW50IHRlc3RcbiAgZGVzY3JpYmUoJ1BPU1QgL2FwaS9yZXNlcnZlcycsICgpID0+IHtcbiAgICBsZXQgYXNzZXRJZDtcblxuICAgIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYW4gYXNzZXQgZmlyc3RcbiAgICAgIGNvbnN0IGFzc2V0RGF0YSA9IHtcbiAgICAgICAgdHlwZTogJ2NvbW1vZGl0eScsXG4gICAgICAgIG5hbWU6ICdHb2xkJyxcbiAgICAgICAgc3ltYm9sOiAnWEFVJyxcbiAgICAgICAgYW1vdW50OiAxMDAsXG4gICAgICAgIHZhbHVlOiAyMDAwMDBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2Fzc2V0cycpXG4gICAgICAgIC5zZW5kKGFzc2V0RGF0YSk7XG5cbiAgICAgIGFzc2V0SWQgPSByZXNwb25zZS5ib2R5LmRhdGEuaWQ7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1hbmFnZSB0cmVhc3VyeSByZXNlcnZlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc2VydmVEYXRhID0ge1xuICAgICAgICBhc3NldElkOiBhc3NldElkLFxuICAgICAgICBhbW91bnQ6IDI1LFxuICAgICAgICBhY3Rpb246ICdhZGQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0FkZGl0aW9uYWwgZ29sZCBwdXJjaGFzZSdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL3Jlc2VydmVzJylcbiAgICAgICAgLnNlbmQocmVzZXJ2ZURhdGEpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuYXNzZXRJZCkudG9CZShhc3NldElkKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuYW1vdW50KS50b0JlKDI1KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuYWN0aW9uKS50b0JlKCdhZGQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgbWlzc2luZyByZXF1aXJlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNlcnZlRGF0YSA9IHtcbiAgICAgICAgYXNzZXRJZDogYXNzZXRJZCxcbiAgICAgICAgYW1vdW50OiAyNVxuICAgICAgICAvLyBNaXNzaW5nIGFjdGlvblxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvcmVzZXJ2ZXMnKVxuICAgICAgICAuc2VuZChyZXNlcnZlRGF0YSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9CZSgnQXNzZXQgSUQsIGFtb3VudCwgYW5kIGFjdGlvbiBhcmUgcmVxdWlyZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwNCBmb3Igbm9uLWV4aXN0ZW50IGFzc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzZXJ2ZURhdGEgPSB7XG4gICAgICAgIGFzc2V0SWQ6ICdub24tZXhpc3RlbnQnLFxuICAgICAgICBhbW91bnQ6IDI1LFxuICAgICAgICBhY3Rpb246ICdhZGQnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9yZXNlcnZlcycpXG4gICAgICAgIC5zZW5kKHJlc2VydmVEYXRhKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdBc3NldCBub3QgZm91bmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gR2V0IGFsbCByZXNlcnZlIHRyYW5zYWN0aW9ucyB0ZXN0XG4gIGRlc2NyaWJlKCdHRVQgL2FwaS9yZXNlcnZlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhbGwgcmVzZXJ2ZSB0cmFuc2FjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL3Jlc2VydmVzJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzcG9uc2UuYm9keS5kYXRhKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNvdW50KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBHZXQgc3BlY2lmaWMgcmVzZXJ2ZSB0cmFuc2FjdGlvbiB0ZXN0XG4gIGRlc2NyaWJlKCdHRVQgL2FwaS9yZXNlcnZlcy86dHJhbnNhY3Rpb25JZCcsICgpID0+IHtcbiAgICBsZXQgdHJhbnNhY3Rpb25JZDtcblxuICAgIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYW4gYXNzZXQgZmlyc3RcbiAgICAgIGNvbnN0IGFzc2V0RGF0YSA9IHtcbiAgICAgICAgdHlwZTogJ2VxdWl0eScsXG4gICAgICAgIG5hbWU6ICdBcHBsZSBTdG9jaycsXG4gICAgICAgIHN5bWJvbDogJ0FBUEwnLFxuICAgICAgICBhbW91bnQ6IDEwMDAsXG4gICAgICAgIHZhbHVlOiAxNTAwMDBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFzc2V0UmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXNzZXRzJylcbiAgICAgICAgLnNlbmQoYXNzZXREYXRhKTtcblxuICAgICAgY29uc3QgYXNzZXRJZCA9IGFzc2V0UmVzcG9uc2UuYm9keS5kYXRhLmlkO1xuXG4gICAgICAvLyBDcmVhdGUgYSB0cmFuc2FjdGlvblxuICAgICAgY29uc3QgcmVzZXJ2ZURhdGEgPSB7XG4gICAgICAgIGFzc2V0SWQ6IGFzc2V0SWQsXG4gICAgICAgIGFtb3VudDogMTAwLFxuICAgICAgICBhY3Rpb246ICdhZGQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0FkZGl0aW9uYWwgc3RvY2sgcHVyY2hhc2UnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB0cmFuc2FjdGlvblJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL3Jlc2VydmVzJylcbiAgICAgICAgLnNlbmQocmVzZXJ2ZURhdGEpO1xuXG4gICAgICB0cmFuc2FjdGlvbklkID0gdHJhbnNhY3Rpb25SZXNwb25zZS5ib2R5LmRhdGEuaWQ7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBzcGVjaWZpYyByZXNlcnZlIHRyYW5zYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldChgL2FwaS9yZXNlcnZlcy8ke3RyYW5zYWN0aW9uSWR9YClcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5pZCkudG9CZSh0cmFuc2FjdGlvbklkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwNCBmb3Igbm9uLWV4aXN0ZW50IHRyYW5zYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9yZXNlcnZlcy9ub24tZXhpc3RlbnQnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdUcmFuc2FjdGlvbiBub3QgZm91bmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gRmluYW5jaWFsIHJlcG9ydGluZyB0ZXN0XG4gIGRlc2NyaWJlKCdHRVQgL2FwaS9yZXBvcnRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgYSBmaW5hbmNpYWwgcmVwb3J0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9yZXBvcnRzJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS50b3RhbEFzc2V0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEudG90YWxMaWFiaWxpdGllcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEubmV0V29ydGgpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmFzc2V0QnJlYWtkb3duKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBHZXQgc3BlY2lmaWMgZmluYW5jaWFsIHJlcG9ydCB0ZXN0XG4gIGRlc2NyaWJlKCdHRVQgL2FwaS9yZXBvcnRzLzpyZXBvcnRJZCcsICgpID0+IHtcbiAgICBsZXQgcmVwb3J0SWQ7XG5cbiAgICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gR2VuZXJhdGUgYSByZXBvcnQgZmlyc3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvcmVwb3J0cycpO1xuXG4gICAgICByZXBvcnRJZCA9IHJlc3BvbnNlLmJvZHkuZGF0YS5pZDtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHNwZWNpZmljIGZpbmFuY2lhbCByZXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL3JlcG9ydHMvJHtyZXBvcnRJZH1gKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmlkKS50b0JlKHJlcG9ydElkKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwNCBmb3Igbm9uLWV4aXN0ZW50IHJlcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvcmVwb3J0cy9ub24tZXhpc3RlbnQnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdSZXBvcnQgbm90IGZvdW5kJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEdldCBhbGwgZmluYW5jaWFsIHJlcG9ydHMgdGVzdFxuICBkZXNjcmliZSgnR0VUIC9hcGkvcmVwb3J0cy9oaXN0b3J5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGFsbCBmaW5hbmNpYWwgcmVwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvcmVwb3J0cy9oaXN0b3J5JylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzcG9uc2UuYm9keS5kYXRhKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNvdW50KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBRWxDRSxRQUFRLENBQUMsd0JBQXdCLEVBQUUsTUFBTTtFQUN2QztFQUNBQSxRQUFRLENBQUMsYUFBYSxFQUFFLE1BQU07SUFDNUJDLEVBQUUsQ0FBQyw2QkFBNkIsRUFBRSxZQUFZO01BQzVDLE1BQU1DLFFBQVEsR0FBRyxNQUFNTCxPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQ0ksR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUNkQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ0YsUUFBUSxDQUFDRyxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDQyxJQUFJLENBQUMsU0FBUyxDQUFDO01BQzVDSCxNQUFNLENBQUNGLFFBQVEsQ0FBQ0csSUFBSSxDQUFDRyxPQUFPLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDO0lBQ3RELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQzs7RUFFRjtFQUNBUCxRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTTtJQUNoQ0MsRUFBRSxDQUFDLG1DQUFtQyxFQUFFLFlBQVk7TUFDbEQsTUFBTUMsUUFBUSxHQUFHLE1BQU1MLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQ2hDSSxHQUFHLENBQUMsYUFB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