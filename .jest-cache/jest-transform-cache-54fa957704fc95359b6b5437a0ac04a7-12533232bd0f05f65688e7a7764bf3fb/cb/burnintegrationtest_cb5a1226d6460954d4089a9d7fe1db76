2881dbd6d33a25d32c2ebcaba00237d1
"use strict";

var _library = require("@prisma/client/runtime/library");
var _tokenBurnCalculator = require("../../services/tokens/token-burn-calculator");
var _tokenBurn = require("../../services/tokens/token-burn.types");
/**
 * Burn Integration Tests
 * Tests for token burn mechanism integration into payment flows
 */

describe('Burn Integration Tests', () => {
  let burnService;
  let calculator;
  beforeEach(() => {
    calculator = new _tokenBurnCalculator.TokenBurnCalculator();
    burnService = createBurnIntegrationService();
  });
  describe('Course Sale Burn', () => {
    it('should calculate 5% burn on course sale', () => {
      const saleAmount = new _library.Decimal(100);
      const calculation = calculator.calculateBurn(saleAmount, _tokenBurn.BurnTransactionType.COURSE_SALE);
      expect(calculation.originalAmount.toString()).toBe('100');
      expect(calculation.burnRate).toBe(0.05);
      expect(calculation.burnedAmount.toString()).toBe('5');
      expect(calculation.netAmount.toString()).toBe('95');
    });
    it('should handle decimal amounts correctly', () => {
      const saleAmount = new _library.Decimal('99.99');
      const calculation = calculator.calculateBurn(saleAmount, _tokenBurn.BurnTransactionType.COURSE_SALE);
      expect(calculation.burnedAmount.toNumber()).toBeCloseTo(4.9995, 4);
      expect(calculation.netAmount.toNumber()).toBeCloseTo(94.9905, 4);
    });
    it('should validate burn transaction before execution', () => {
      const amount = new _library.Decimal(100);
      const userBalance = new _library.Decimal(50);
      const validation = calculator.validateBurnTransaction(amount, _tokenBurn.BurnTransactionType.COURSE_SALE, userBalance);
      expect(validation.isValid).toBe(false);
      expect(validation.errors).toContain('Insufficient balance. Required: 100, Available: 50');
    });
    it('should pass validation with sufficient balance', () => {
      const amount = new _library.Decimal(100);
      const userBalance = new _library.Decimal(150);
      const validation = calculator.validateBurnTransaction(amount, _tokenBurn.BurnTransactionType.COURSE_SALE, userBalance);
      expect(validation.isValid).toBe(true);
      expect(validation.errors).toHaveLength(0);
    });
  });
  describe('Earnings Withdrawal Burn', () => {
    it('should calculate 3% burn on earnings withdrawal', () => {
      const withdrawalAmount = new _library.Decimal(1000);
      const calculation = calculator.calculateBurn(withdrawalAmount, _tokenBurn.BurnTransactionType.EARNINGS_WITHDRAWAL);
      expect(calculation.originalAmount.toString()).toBe('1000');
      expect(calculation.burnRate).toBe(0.03);
      expect(calculation.burnedAmount.toString()).toBe('30');
      expect(calculation.netAmount.toString()).toBe('970');
    });
    it('should handle large withdrawal amounts', () => {
      const withdrawalAmount = new _library.Decimal('50000');
      const calculation = calculator.calculateBurn(withdrawalAmount, _tokenBurn.BurnTransactionType.EARNINGS_WITHDRAWAL);
      expect(calculation.burnedAmount.toString()).toBe('1500');
      expect(calculation.netAmount.toString()).toBe('48500');
    });
    it('should calculate percentage loss correctly', () => {
      const percentageLoss = calculator.calculatePercentageLoss(new _library.Decimal(1000), _tokenBurn.BurnTransactionType.EARNINGS_WITHDRAWAL);
      expect(percentageLoss).toBe(3);
    });
  });
  describe('Token Redemption Burn', () => {
    it('should calculate 2% burn on token redemption', () => {
      const redemptionAmount = new _library.Decimal(500);
      const calculation = calculator.calculateBurn(redemptionAmount, _tokenBurn.BurnTransactionType.TOKEN_REDEMPTION);
      expect(calculation.originalAmount.toString()).toBe('500');
      expect(calculation.burnRate).toBe(0.02);
      expect(calculation.burnedAmount.toString()).toBe('10');
      expect(calculation.netAmount.toString()).toBe('490');
    });
    it('should handle small redemption amounts', () => {
      const redemptionAmount = new _library.Decimal('10');
      const calculation = calculator.calculateBurn(redemptionAmount, _tokenBurn.BurnTransactionType.TOKEN_REDEMPTION);
      expect(calculation.burnedAmount.toString()).toBe('0.2');
      expect(calculation.netAmount.toString()).toBe('9.8');
    });
  });
  describe('Bulk Burn Calculations', () => {
    it('should calculate multiple burns', () => {
      const transactions = [{
        amount: new _library.Decimal(100),
        type: _tokenBurn.BurnTransactionType.COURSE_SALE
      }, {
        amount: new _library.Decimal(1000),
        type: _tokenBurn.BurnTransactionType.EARNINGS_WITHDRAWAL
      }, {
        amount: new _library.Decimal(500),
        type: _tokenBurn.BurnTransactionType.TOKEN_REDEMPTION
      }];
      const calculations = calculator.calculateBulkBurns(transactions);
      expect(calculations).toHaveLength(3);
      expect(calculations[0].burnedAmount.toString()).toBe('5'); // 5%
      expect(calculations[1].burnedAmount.toString()).toBe('30'); // 3%
      expect(calculations[2].burnedAmount.toString()).toBe('10'); // 2%
    });
    it('should calculate total burn from multiple transactions', () => {
      const transactions = [{
        amount: new _library.Decimal(100),
        type: _tokenBurn.BurnTransactionType.COURSE_SALE
      }, {
        amount: new _library.Decimal(1000),
        type: _tokenBurn.BurnTransactionType.EARNINGS_WITHDRAWAL
      }, {
        amount: new _library.Decimal(500),
        type: _tokenBurn.BurnTransactionType.TOKEN_REDEMPTION
      }];
      const totalBurn = calculator.calculateTotalBurn(transactions);
      expect(totalBurn.toString()).toBe('45'); // 5 + 30 + 10
    });
  });
  describe('Effective Price Calculations', () => {
    it('should calculate effective price after burn for course sale', () => {
      const originalPrice = new _library.Decimal(100);
      const effectivePrice = calculator.calculateEffectivePrice(originalPrice, _tokenBurn.BurnTransactionType.COURSE_SALE);
      expect(effectivePrice.toString()).toBe('95');
    });
    it('should calculate effective price after burn for withdrawal', () => {
      const originalAmount = new _library.Decimal(1000);
      const effectiveAmount = calculator.calculateEffectivePrice(originalAmount, _tokenBurn.BurnTransactionType.EARNINGS_WITHDRAWAL);
      expect(effectiveAmount.toString()).toBe('970');
    });
    it('should calculate reverse burn correctly', () => {
      const netAmount = new _library.Decimal(95);
      const calculation = calculator.calculateReverseBurn(netAmount, _tokenBurn.BurnTransactionType.COURSE_SALE);
      expect(calculation.originalAmount.toString()).toBe('100');
      expect(calculation.burnedAmount.toString()).toBe('5');
      expect(calculation.netAmount.toString()).toBe('95');
    });
  });
  describe('Burn Rate Configuration', () => {
    it('should allow custom burn rates', () => {
      const customCalculator = new _tokenBurnCalculator.TokenBurnCalculator({
        courseSale: 0.1,
        // 10%
        earningsWithdrawal: 0.05,
        // 5%
        tokenRedemption: 0.03 // 3%
      });
      const calculation = customCalculator.calculateBurn(new _library.Decimal(100), _tokenBurn.BurnTransactionType.COURSE_SALE);
      expect(calculation.burnedAmount.toString()).toBe('10');
    });
    it('should update burn rates dynamically', () => {
      calculator.updateBurnRates({
        courseSale: 0.08
      });
      const rates = calculator.getBurnRates();
      expect(rates.courseSale).toBe(0.08);
      expect(rates.earningsWithdrawal).toBe(0.03); // Unchanged
    });
    it('should get current burn rates', () => {
      const rates = calculator.getBurnRates();
      expect(rates.courseSale).toBe(0.05);
      expect(rates.earningsWithdrawal).toBe(0.03);
      expect(rates.tokenRedemption).toBe(0.02);
    });
  });
  describe('Error Handling', () => {
    it('should reject zero amount', () => {
      expect(() => {
        calculator.calculateBurn(new _library.Decimal(0), _tokenBurn.BurnTransactionType.COURSE_SALE);
      }).toThrow('Amount must be greater than 0');
    });
    it('should reject negative amount', () => {
      expect(() => {
        calculator.calculateBurn(new _library.Decimal(-100), _tokenBurn.BurnTransactionType.COURSE_SALE);
      }).toThrow('Amount must be greater than 0');
    });
    it('should reject invalid transaction type', () => {
      const validation = calculator.validateBurnTransaction(new _library.Decimal(100), 'INVALID_TYPE', new _library.Decimal(200));
      expect(validation.isValid).toBe(false);
      expect(validation.errors.length).toBeGreaterThan(0);
    });
    it('should handle validation with zero balance', () => {
      const validation = calculator.validateBurnTransaction(new _library.Decimal(100), _tokenBurn.BurnTransactionType.COURSE_SALE, new _library.Decimal(0));
      expect(validation.isValid).toBe(false);
      expect(validation.errors).toContain('Insufficient balance. Required: 100, Available: 0');
    });
  });
  describe('Burn Impact Analysis', () => {
    it('should calculate burn impact for course sale', async () => {
      const impact = await burnService.getBurnImpact(new _library.Decimal(100), _tokenBurn.BurnTransactionType.COURSE_SALE);
      expect(impact.originalAmount.toString()).toBe('100');
      expect(impact.burnedAmount.toString()).toBe('5');
      expect(impact.netAmount.toString()).toBe('95');
      expect(impact.burnPercentage).toBe(5);
    });
    it('should calculate burn impact for withdrawal', async () => {
      const impact = await burnService.getBurnImpact(new _library.Decimal(1000), _tokenBurn.BurnTransactionType.EARNINGS_WITHDRAWAL);
      expect(impact.originalAmount.toString()).toBe('1000');
      expect(impact.burnedAmount.toString()).toBe('30');
      expect(impact.netAmount.toString()).toBe('970');
      expect(impact.burnPercentage).toBe(3);
    });
    it('should calculate burn impact for redemption', async () => {
      const impact = await burnService.getBurnImpact(new _library.Decimal(500), _tokenBurn.BurnTransactionType.TOKEN_REDEMPTION);
      expect(impact.originalAmount.toString()).toBe('500');
      expect(impact.burnedAmount.toString()).toBe('10');
      expect(impact.netAmount.toString()).toBe('490');
      expect(impact.burnPercentage).toBe(2);
    });
  });
  describe('Burn Validation', () => {
    it('should validate burn transaction with sufficient balance', async () => {
      const validation = await burnService.validateBurnTransaction('user-123', new _library.Decimal(100), _tokenBurn.BurnTransactionType.COURSE_SALE, new _library.Decimal(500));
      expect(validation.isValid).toBe(true);
      expect(validation.errors).toHaveLength(0);
    });
    it('should reject burn transaction with insufficient balance', async () => {
      const validation = await burnService.validateBurnTransaction('user-123', new _library.Decimal(100), _tokenBurn.BurnTransactionType.COURSE_SALE, new _library.Decimal(50));
      expect(validation.isValid).toBe(false);
      expect(validation.errors.length).toBeGreaterThan(0);
    });
    it('should warn on significant burn relative to balance', async () => {
      const validation = await burnService.validateBurnTransaction('user-123', new _library.Decimal(100), _tokenBurn.BurnTransactionType.COURSE_SALE, new _library.Decimal(5) // Only 5 tokens, burn is 5 tokens (100% of balance)
      );
      expect(validation.warnings.length).toBeGreaterThan(0);
    });
  });
  describe('Burn Rate Comparison', () => {
    it('should show course sale has highest burn rate', () => {
      const rates = calculator.getBurnRates();
      expect(rates.courseSale).toBeGreaterThan(rates.earningsWithdrawal);
      expect(rates.earningsWithdrawal).toBeGreaterThan(rates.tokenRedemption);
    });
    it('should calculate burn impact differences across transaction types', () => {
      const amount = new _library.Decimal(1000);
      const saleBurn = calculator.calculateBurn(amount, _tokenBurn.BurnTransactionType.COURSE_SALE);
      const withdrawalBurn = calculator.calculateBurn(amount, _tokenBurn.BurnTransactionType.EARNINGS_WITHDRAWAL);
      const redemptionBurn = calculator.calculateBurn(amount, _tokenBurn.BurnTransactionType.TOKEN_REDEMPTION);
      expect(saleBurn.burnedAmount.toNumber()).toBeGreaterThan(withdrawalBurn.burnedAmount.toNumber());
      expect(withdrawalBurn.burnedAmount.toNumber()).toBeGreaterThan(redemptionBurn.burnedAmount.toNumber());
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbGlicmFyeSIsInJlcXVpcmUiLCJfdG9rZW5CdXJuQ2FsY3VsYXRvciIsIl90b2tlbkJ1cm4iLCJkZXNjcmliZSIsImJ1cm5TZXJ2aWNlIiwiY2FsY3VsYXRvciIsImJlZm9yZUVhY2giLCJUb2tlbkJ1cm5DYWxjdWxhdG9yIiwiY3JlYXRlQnVybkludGVncmF0aW9uU2VydmljZSIsIml0Iiwic2FsZUFtb3VudCIsIkRlY2ltYWwiLCJjYWxjdWxhdGlvbiIsImNhbGN1bGF0ZUJ1cm4iLCJCdXJuVHJhbnNhY3Rpb25UeXBlIiwiQ09VUlNFX1NBTEUiLCJleHBlY3QiLCJvcmlnaW5hbEFtb3VudCIsInRvU3RyaW5nIiwidG9CZSIsImJ1cm5SYXRlIiwiYnVybmVkQW1vdW50IiwibmV0QW1vdW50IiwidG9OdW1iZXIiLCJ0b0JlQ2xvc2VUbyIsImFtb3VudCIsInVzZXJCYWxhbmNlIiwidmFsaWRhdGlvbiIsInZhbGlkYXRlQnVyblRyYW5zYWN0aW9uIiwiaXNWYWxpZCIsImVycm9ycyIsInRvQ29udGFpbiIsInRvSGF2ZUxlbmd0aCIsIndpdGhkcmF3YWxBbW91bnQiLCJFQVJOSU5HU19XSVRIRFJBV0FMIiwicGVyY2VudGFnZUxvc3MiLCJjYWxjdWxhdGVQZXJjZW50YWdlTG9zcyIsInJlZGVtcHRpb25BbW91bnQiLCJUT0tFTl9SRURFTVBUSU9OIiwidHJhbnNhY3Rpb25zIiwidHlwZSIsImNhbGN1bGF0aW9ucyIsImNhbGN1bGF0ZUJ1bGtCdXJucyIsInRvdGFsQnVybiIsImNhbGN1bGF0ZVRvdGFsQnVybiIsIm9yaWdpbmFsUHJpY2UiLCJlZmZlY3RpdmVQcmljZSIsImNhbGN1bGF0ZUVmZmVjdGl2ZVByaWNlIiwiZWZmZWN0aXZlQW1vdW50IiwiY2FsY3VsYXRlUmV2ZXJzZUJ1cm4iLCJjdXN0b21DYWxjdWxhdG9yIiwiY291cnNlU2FsZSIsImVhcm5pbmdzV2l0aGRyYXdhbCIsInRva2VuUmVkZW1wdGlvbiIsInVwZGF0ZUJ1cm5SYXRlcyIsInJhdGVzIiwiZ2V0QnVyblJhdGVzIiwidG9UaHJvdyIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImltcGFjdCIsImdldEJ1cm5JbXBhY3QiLCJidXJuUGVyY2VudGFnZSIsIndhcm5pbmdzIiwic2FsZUJ1cm4iLCJ3aXRoZHJhd2FsQnVybiIsInJlZGVtcHRpb25CdXJuIl0sInNvdXJjZXMiOlsiYnVybi1pbnRlZ3JhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBCdXJuIEludGVncmF0aW9uIFRlc3RzXHJcbiAqIFRlc3RzIGZvciB0b2tlbiBidXJuIG1lY2hhbmlzbSBpbnRlZ3JhdGlvbiBpbnRvIHBheW1lbnQgZmxvd3NcclxuICovXHJcblxyXG5pbXBvcnQgeyBEZWNpbWFsIH0gZnJvbSAnQHByaXNtYS9jbGllbnQvcnVudGltZS9saWJyYXJ5JztcclxuaW1wb3J0IHsgVG9rZW5CdXJuQ2FsY3VsYXRvciB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3Rva2Vucy90b2tlbi1idXJuLWNhbGN1bGF0b3InO1xyXG5pbXBvcnQgeyBCdXJuVHJhbnNhY3Rpb25UeXBlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvdG9rZW5zL3Rva2VuLWJ1cm4udHlwZXMnO1xyXG5cclxuZGVzY3JpYmUoJ0J1cm4gSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XHJcbiAgbGV0IGJ1cm5TZXJ2aWNlOiBCdXJuSW50ZWdyYXRpb25TZXJ2aWNlO1xyXG4gIGxldCBjYWxjdWxhdG9yOiBUb2tlbkJ1cm5DYWxjdWxhdG9yO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGNhbGN1bGF0b3IgPSBuZXcgVG9rZW5CdXJuQ2FsY3VsYXRvcigpO1xyXG4gICAgYnVyblNlcnZpY2UgPSBjcmVhdGVCdXJuSW50ZWdyYXRpb25TZXJ2aWNlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDb3Vyc2UgU2FsZSBCdXJuJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgNSUgYnVybiBvbiBjb3Vyc2Ugc2FsZScsICgpID0+IHtcclxuICAgICAgY29uc3Qgc2FsZUFtb3VudCA9IG5ldyBEZWNpbWFsKDEwMCk7XHJcbiAgICAgIGNvbnN0IGNhbGN1bGF0aW9uID0gY2FsY3VsYXRvci5jYWxjdWxhdGVCdXJuKHNhbGVBbW91bnQsIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUpO1xyXG5cclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLm9yaWdpbmFsQW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzEwMCcpO1xyXG4gICAgICBleHBlY3QoY2FsY3VsYXRpb24uYnVyblJhdGUpLnRvQmUoMC4wNSk7XHJcbiAgICAgIGV4cGVjdChjYWxjdWxhdGlvbi5idXJuZWRBbW91bnQudG9TdHJpbmcoKSkudG9CZSgnNScpO1xyXG4gICAgICBleHBlY3QoY2FsY3VsYXRpb24ubmV0QW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzk1Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWNpbWFsIGFtb3VudHMgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzYWxlQW1vdW50ID0gbmV3IERlY2ltYWwoJzk5Ljk5Jyk7XHJcbiAgICAgIGNvbnN0IGNhbGN1bGF0aW9uID0gY2FsY3VsYXRvci5jYWxjdWxhdGVCdXJuKHNhbGVBbW91bnQsIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUpO1xyXG5cclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLmJ1cm5lZEFtb3VudC50b051bWJlcigpKS50b0JlQ2xvc2VUbyg0Ljk5OTUsIDQpO1xyXG4gICAgICBleHBlY3QoY2FsY3VsYXRpb24ubmV0QW1vdW50LnRvTnVtYmVyKCkpLnRvQmVDbG9zZVRvKDk0Ljk5MDUsIDQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBidXJuIHRyYW5zYWN0aW9uIGJlZm9yZSBleGVjdXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFtb3VudCA9IG5ldyBEZWNpbWFsKDEwMCk7XHJcbiAgICAgIGNvbnN0IHVzZXJCYWxhbmNlID0gbmV3IERlY2ltYWwoNTApO1xyXG5cclxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGNhbGN1bGF0b3IudmFsaWRhdGVCdXJuVHJhbnNhY3Rpb24oXHJcbiAgICAgICAgYW1vdW50LFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUsXHJcbiAgICAgICAgdXNlckJhbGFuY2VcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcnMpLnRvQ29udGFpbihcclxuICAgICAgICAnSW5zdWZmaWNpZW50IGJhbGFuY2UuIFJlcXVpcmVkOiAxMDAsIEF2YWlsYWJsZTogNTAnXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHBhc3MgdmFsaWRhdGlvbiB3aXRoIHN1ZmZpY2llbnQgYmFsYW5jZScsICgpID0+IHtcclxuICAgICAgY29uc3QgYW1vdW50ID0gbmV3IERlY2ltYWwoMTAwKTtcclxuICAgICAgY29uc3QgdXNlckJhbGFuY2UgPSBuZXcgRGVjaW1hbCgxNTApO1xyXG5cclxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGNhbGN1bGF0b3IudmFsaWRhdGVCdXJuVHJhbnNhY3Rpb24oXHJcbiAgICAgICAgYW1vdW50LFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUsXHJcbiAgICAgICAgdXNlckJhbGFuY2VcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmVycm9ycykudG9IYXZlTGVuZ3RoKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFYXJuaW5ncyBXaXRoZHJhd2FsIEJ1cm4nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSAzJSBidXJuIG9uIGVhcm5pbmdzIHdpdGhkcmF3YWwnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHdpdGhkcmF3YWxBbW91bnQgPSBuZXcgRGVjaW1hbCgxMDAwKTtcclxuICAgICAgY29uc3QgY2FsY3VsYXRpb24gPSBjYWxjdWxhdG9yLmNhbGN1bGF0ZUJ1cm4oXHJcbiAgICAgICAgd2l0aGRyYXdhbEFtb3VudCxcclxuICAgICAgICBCdXJuVHJhbnNhY3Rpb25UeXBlLkVBUk5JTkdTX1dJVEhEUkFXQUxcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChjYWxjdWxhdGlvbi5vcmlnaW5hbEFtb3VudC50b1N0cmluZygpKS50b0JlKCcxMDAwJyk7XHJcbiAgICAgIGV4cGVjdChjYWxjdWxhdGlvbi5idXJuUmF0ZSkudG9CZSgwLjAzKTtcclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLmJ1cm5lZEFtb3VudC50b1N0cmluZygpKS50b0JlKCczMCcpO1xyXG4gICAgICBleHBlY3QoY2FsY3VsYXRpb24ubmV0QW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzk3MCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2Ugd2l0aGRyYXdhbCBhbW91bnRzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB3aXRoZHJhd2FsQW1vdW50ID0gbmV3IERlY2ltYWwoJzUwMDAwJyk7XHJcbiAgICAgIGNvbnN0IGNhbGN1bGF0aW9uID0gY2FsY3VsYXRvci5jYWxjdWxhdGVCdXJuKFxyXG4gICAgICAgIHdpdGhkcmF3YWxBbW91bnQsXHJcbiAgICAgICAgQnVyblRyYW5zYWN0aW9uVHlwZS5FQVJOSU5HU19XSVRIRFJBV0FMXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QoY2FsY3VsYXRpb24uYnVybmVkQW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzE1MDAnKTtcclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLm5ldEFtb3VudC50b1N0cmluZygpKS50b0JlKCc0ODUwMCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgcGVyY2VudGFnZSBsb3NzIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgY29uc3QgcGVyY2VudGFnZUxvc3MgPSBjYWxjdWxhdG9yLmNhbGN1bGF0ZVBlcmNlbnRhZ2VMb3NzKFxyXG4gICAgICAgIG5ldyBEZWNpbWFsKDEwMDApLFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuRUFSTklOR1NfV0lUSERSQVdBTFxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KHBlcmNlbnRhZ2VMb3NzKS50b0JlKDMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdUb2tlbiBSZWRlbXB0aW9uIEJ1cm4nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSAyJSBidXJuIG9uIHRva2VuIHJlZGVtcHRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlZGVtcHRpb25BbW91bnQgPSBuZXcgRGVjaW1hbCg1MDApO1xyXG4gICAgICBjb25zdCBjYWxjdWxhdGlvbiA9IGNhbGN1bGF0b3IuY2FsY3VsYXRlQnVybihcclxuICAgICAgICByZWRlbXB0aW9uQW1vdW50LFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuVE9LRU5fUkVERU1QVElPTlxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLm9yaWdpbmFsQW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzUwMCcpO1xyXG4gICAgICBleHBlY3QoY2FsY3VsYXRpb24uYnVyblJhdGUpLnRvQmUoMC4wMik7XHJcbiAgICAgIGV4cGVjdChjYWxjdWxhdGlvbi5idXJuZWRBbW91bnQudG9TdHJpbmcoKSkudG9CZSgnMTAnKTtcclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLm5ldEFtb3VudC50b1N0cmluZygpKS50b0JlKCc0OTAnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNtYWxsIHJlZGVtcHRpb24gYW1vdW50cycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVkZW1wdGlvbkFtb3VudCA9IG5ldyBEZWNpbWFsKCcxMCcpO1xyXG4gICAgICBjb25zdCBjYWxjdWxhdGlvbiA9IGNhbGN1bGF0b3IuY2FsY3VsYXRlQnVybihcclxuICAgICAgICByZWRlbXB0aW9uQW1vdW50LFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuVE9LRU5fUkVERU1QVElPTlxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLmJ1cm5lZEFtb3VudC50b1N0cmluZygpKS50b0JlKCcwLjInKTtcclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLm5ldEFtb3VudC50b1N0cmluZygpKS50b0JlKCc5LjgnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQnVsayBCdXJuIENhbGN1bGF0aW9ucycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIG11bHRpcGxlIGJ1cm5zJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBbXHJcbiAgICAgICAgeyBhbW91bnQ6IG5ldyBEZWNpbWFsKDEwMCksIHR5cGU6IEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUgfSxcclxuICAgICAgICB7IGFtb3VudDogbmV3IERlY2ltYWwoMTAwMCksIHR5cGU6IEJ1cm5UcmFuc2FjdGlvblR5cGUuRUFSTklOR1NfV0lUSERSQVdBTCB9LFxyXG4gICAgICAgIHsgYW1vdW50OiBuZXcgRGVjaW1hbCg1MDApLCB0eXBlOiBCdXJuVHJhbnNhY3Rpb25UeXBlLlRPS0VOX1JFREVNUFRJT04gfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGNvbnN0IGNhbGN1bGF0aW9ucyA9IGNhbGN1bGF0b3IuY2FsY3VsYXRlQnVsa0J1cm5zKHRyYW5zYWN0aW9ucyk7XHJcblxyXG4gICAgICBleHBlY3QoY2FsY3VsYXRpb25zKS50b0hhdmVMZW5ndGgoMyk7XHJcbiAgICAgIGV4cGVjdChjYWxjdWxhdGlvbnNbMF0uYnVybmVkQW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzUnKTsgLy8gNSVcclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uc1sxXS5idXJuZWRBbW91bnQudG9TdHJpbmcoKSkudG9CZSgnMzAnKTsgLy8gMyVcclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uc1syXS5idXJuZWRBbW91bnQudG9TdHJpbmcoKSkudG9CZSgnMTAnKTsgLy8gMiVcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHRvdGFsIGJ1cm4gZnJvbSBtdWx0aXBsZSB0cmFuc2FjdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IFtcclxuICAgICAgICB7IGFtb3VudDogbmV3IERlY2ltYWwoMTAwKSwgdHlwZTogQnVyblRyYW5zYWN0aW9uVHlwZS5DT1VSU0VfU0FMRSB9LFxyXG4gICAgICAgIHsgYW1vdW50OiBuZXcgRGVjaW1hbCgxMDAwKSwgdHlwZTogQnVyblRyYW5zYWN0aW9uVHlwZS5FQVJOSU5HU19XSVRIRFJBV0FMIH0sXHJcbiAgICAgICAgeyBhbW91bnQ6IG5ldyBEZWNpbWFsKDUwMCksIHR5cGU6IEJ1cm5UcmFuc2FjdGlvblR5cGUuVE9LRU5fUkVERU1QVElPTiB9LFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc3QgdG90YWxCdXJuID0gY2FsY3VsYXRvci5jYWxjdWxhdGVUb3RhbEJ1cm4odHJhbnNhY3Rpb25zKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0b3RhbEJ1cm4udG9TdHJpbmcoKSkudG9CZSgnNDUnKTsgLy8gNSArIDMwICsgMTBcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRWZmZWN0aXZlIFByaWNlIENhbGN1bGF0aW9ucycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGVmZmVjdGl2ZSBwcmljZSBhZnRlciBidXJuIGZvciBjb3Vyc2Ugc2FsZScsICgpID0+IHtcclxuICAgICAgY29uc3Qgb3JpZ2luYWxQcmljZSA9IG5ldyBEZWNpbWFsKDEwMCk7XHJcbiAgICAgIGNvbnN0IGVmZmVjdGl2ZVByaWNlID0gY2FsY3VsYXRvci5jYWxjdWxhdGVFZmZlY3RpdmVQcmljZShcclxuICAgICAgICBvcmlnaW5hbFByaWNlLFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEVcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChlZmZlY3RpdmVQcmljZS50b1N0cmluZygpKS50b0JlKCc5NScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgZWZmZWN0aXZlIHByaWNlIGFmdGVyIGJ1cm4gZm9yIHdpdGhkcmF3YWwnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9yaWdpbmFsQW1vdW50ID0gbmV3IERlY2ltYWwoMTAwMCk7XHJcbiAgICAgIGNvbnN0IGVmZmVjdGl2ZUFtb3VudCA9IGNhbGN1bGF0b3IuY2FsY3VsYXRlRWZmZWN0aXZlUHJpY2UoXHJcbiAgICAgICAgb3JpZ2luYWxBbW91bnQsXHJcbiAgICAgICAgQnVyblRyYW5zYWN0aW9uVHlwZS5FQVJOSU5HU19XSVRIRFJBV0FMXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QoZWZmZWN0aXZlQW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzk3MCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgcmV2ZXJzZSBidXJuIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgY29uc3QgbmV0QW1vdW50ID0gbmV3IERlY2ltYWwoOTUpO1xyXG4gICAgICBjb25zdCBjYWxjdWxhdGlvbiA9IGNhbGN1bGF0b3IuY2FsY3VsYXRlUmV2ZXJzZUJ1cm4oXHJcbiAgICAgICAgbmV0QW1vdW50LFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEVcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChjYWxjdWxhdGlvbi5vcmlnaW5hbEFtb3VudC50b1N0cmluZygpKS50b0JlKCcxMDAnKTtcclxuICAgICAgZXhwZWN0KGNhbGN1bGF0aW9uLmJ1cm5lZEFtb3VudC50b1N0cmluZygpKS50b0JlKCc1Jyk7XHJcbiAgICAgIGV4cGVjdChjYWxjdWxhdGlvbi5uZXRBbW91bnQudG9TdHJpbmcoKSkudG9CZSgnOTUnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQnVybiBSYXRlIENvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGFsbG93IGN1c3RvbSBidXJuIHJhdGVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXN0b21DYWxjdWxhdG9yID0gbmV3IFRva2VuQnVybkNhbGN1bGF0b3Ioe1xyXG4gICAgICAgIGNvdXJzZVNhbGU6IDAuMSwgLy8gMTAlXHJcbiAgICAgICAgZWFybmluZ3NXaXRoZHJhd2FsOiAwLjA1LCAvLyA1JVxyXG4gICAgICAgIHRva2VuUmVkZW1wdGlvbjogMC4wMywgLy8gMyVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBjYWxjdWxhdGlvbiA9IGN1c3RvbUNhbGN1bGF0b3IuY2FsY3VsYXRlQnVybihcclxuICAgICAgICBuZXcgRGVjaW1hbCgxMDApLFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEVcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChjYWxjdWxhdGlvbi5idXJuZWRBbW91bnQudG9TdHJpbmcoKSkudG9CZSgnMTAnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGJ1cm4gcmF0ZXMgZHluYW1pY2FsbHknLCAoKSA9PiB7XHJcbiAgICAgIGNhbGN1bGF0b3IudXBkYXRlQnVyblJhdGVzKHtcclxuICAgICAgICBjb3Vyc2VTYWxlOiAwLjA4LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJhdGVzID0gY2FsY3VsYXRvci5nZXRCdXJuUmF0ZXMoKTtcclxuICAgICAgZXhwZWN0KHJhdGVzLmNvdXJzZVNhbGUpLnRvQmUoMC4wOCk7XHJcbiAgICAgIGV4cGVjdChyYXRlcy5lYXJuaW5nc1dpdGhkcmF3YWwpLnRvQmUoMC4wMyk7IC8vIFVuY2hhbmdlZFxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCBidXJuIHJhdGVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByYXRlcyA9IGNhbGN1bGF0b3IuZ2V0QnVyblJhdGVzKCk7XHJcblxyXG4gICAgICBleHBlY3QocmF0ZXMuY291cnNlU2FsZSkudG9CZSgwLjA1KTtcclxuICAgICAgZXhwZWN0KHJhdGVzLmVhcm5pbmdzV2l0aGRyYXdhbCkudG9CZSgwLjAzKTtcclxuICAgICAgZXhwZWN0KHJhdGVzLnRva2VuUmVkZW1wdGlvbikudG9CZSgwLjAyKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCB6ZXJvIGFtb3VudCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICBjYWxjdWxhdG9yLmNhbGN1bGF0ZUJ1cm4obmV3IERlY2ltYWwoMCksIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUpO1xyXG4gICAgICB9KS50b1Rocm93KCdBbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgbmVnYXRpdmUgYW1vdW50JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNhbGN1bGF0b3IuY2FsY3VsYXRlQnVybihuZXcgRGVjaW1hbCgtMTAwKSwgQnVyblRyYW5zYWN0aW9uVHlwZS5DT1VSU0VfU0FMRSk7XHJcbiAgICAgIH0pLnRvVGhyb3coJ0Ftb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIHRyYW5zYWN0aW9uIHR5cGUnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBjYWxjdWxhdG9yLnZhbGlkYXRlQnVyblRyYW5zYWN0aW9uKFxyXG4gICAgICAgIG5ldyBEZWNpbWFsKDEwMCksXHJcbiAgICAgICAgJ0lOVkFMSURfVFlQRScgYXMgYW55LFxyXG4gICAgICAgIG5ldyBEZWNpbWFsKDIwMClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB2YWxpZGF0aW9uIHdpdGggemVybyBiYWxhbmNlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gY2FsY3VsYXRvci52YWxpZGF0ZUJ1cm5UcmFuc2FjdGlvbihcclxuICAgICAgICBuZXcgRGVjaW1hbCgxMDApLFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUsXHJcbiAgICAgICAgbmV3IERlY2ltYWwoMClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcnMpLnRvQ29udGFpbihcclxuICAgICAgICAnSW5zdWZmaWNpZW50IGJhbGFuY2UuIFJlcXVpcmVkOiAxMDAsIEF2YWlsYWJsZTogMCdcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQnVybiBJbXBhY3QgQW5hbHlzaXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBidXJuIGltcGFjdCBmb3IgY291cnNlIHNhbGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGltcGFjdCA9IGF3YWl0IGJ1cm5TZXJ2aWNlLmdldEJ1cm5JbXBhY3QoXHJcbiAgICAgICAgbmV3IERlY2ltYWwoMTAwKSxcclxuICAgICAgICBCdXJuVHJhbnNhY3Rpb25UeXBlLkNPVVJTRV9TQUxFXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QoaW1wYWN0Lm9yaWdpbmFsQW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzEwMCcpO1xyXG4gICAgICBleHBlY3QoaW1wYWN0LmJ1cm5lZEFtb3VudC50b1N0cmluZygpKS50b0JlKCc1Jyk7XHJcbiAgICAgIGV4cGVjdChpbXBhY3QubmV0QW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzk1Jyk7XHJcbiAgICAgIGV4cGVjdChpbXBhY3QuYnVyblBlcmNlbnRhZ2UpLnRvQmUoNSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBidXJuIGltcGFjdCBmb3Igd2l0aGRyYXdhbCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW1wYWN0ID0gYXdhaXQgYnVyblNlcnZpY2UuZ2V0QnVybkltcGFjdChcclxuICAgICAgICBuZXcgRGVjaW1hbCgxMDAwKSxcclxuICAgICAgICBCdXJuVHJhbnNhY3Rpb25UeXBlLkVBUk5JTkdTX1dJVEhEUkFXQUxcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChpbXBhY3Qub3JpZ2luYWxBbW91bnQudG9TdHJpbmcoKSkudG9CZSgnMTAwMCcpO1xyXG4gICAgICBleHBlY3QoaW1wYWN0LmJ1cm5lZEFtb3VudC50b1N0cmluZygpKS50b0JlKCczMCcpO1xyXG4gICAgICBleHBlY3QoaW1wYWN0Lm5ldEFtb3VudC50b1N0cmluZygpKS50b0JlKCc5NzAnKTtcclxuICAgICAgZXhwZWN0KGltcGFjdC5idXJuUGVyY2VudGFnZSkudG9CZSgzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGJ1cm4gaW1wYWN0IGZvciByZWRlbXB0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbXBhY3QgPSBhd2FpdCBidXJuU2VydmljZS5nZXRCdXJuSW1wYWN0KFxyXG4gICAgICAgIG5ldyBEZWNpbWFsKDUwMCksXHJcbiAgICAgICAgQnVyblRyYW5zYWN0aW9uVHlwZS5UT0tFTl9SRURFTVBUSU9OXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QoaW1wYWN0Lm9yaWdpbmFsQW1vdW50LnRvU3RyaW5nKCkpLnRvQmUoJzUwMCcpO1xyXG4gICAgICBleHBlY3QoaW1wYWN0LmJ1cm5lZEFtb3VudC50b1N0cmluZygpKS50b0JlKCcxMCcpO1xyXG4gICAgICBleHBlY3QoaW1wYWN0Lm5ldEFtb3VudC50b1N0cmluZygpKS50b0JlKCc0OTAnKTtcclxuICAgICAgZXhwZWN0KGltcGFjdC5idXJuUGVyY2VudGFnZSkudG9CZSgyKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQnVybiBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBidXJuIHRyYW5zYWN0aW9uIHdpdGggc3VmZmljaWVudCBiYWxhbmNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgYnVyblNlcnZpY2UudmFsaWRhdGVCdXJuVHJhbnNhY3Rpb24oXHJcbiAgICAgICAgJ3VzZXItMTIzJyxcclxuICAgICAgICBuZXcgRGVjaW1hbCgxMDApLFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUsXHJcbiAgICAgICAgbmV3IERlY2ltYWwoNTAwKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uZXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBidXJuIHRyYW5zYWN0aW9uIHdpdGggaW5zdWZmaWNpZW50IGJhbGFuY2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBidXJuU2VydmljZS52YWxpZGF0ZUJ1cm5UcmFuc2FjdGlvbihcclxuICAgICAgICAndXNlci0xMjMnLFxyXG4gICAgICAgIG5ldyBEZWNpbWFsKDEwMCksXHJcbiAgICAgICAgQnVyblRyYW5zYWN0aW9uVHlwZS5DT1VSU0VfU0FMRSxcclxuICAgICAgICBuZXcgRGVjaW1hbCg1MClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHdhcm4gb24gc2lnbmlmaWNhbnQgYnVybiByZWxhdGl2ZSB0byBiYWxhbmNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgYnVyblNlcnZpY2UudmFsaWRhdGVCdXJuVHJhbnNhY3Rpb24oXHJcbiAgICAgICAgJ3VzZXItMTIzJyxcclxuICAgICAgICBuZXcgRGVjaW1hbCgxMDApLFxyXG4gICAgICAgIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUsXHJcbiAgICAgICAgbmV3IERlY2ltYWwoNSkgLy8gT25seSA1IHRva2VucywgYnVybiBpcyA1IHRva2VucyAoMTAwJSBvZiBiYWxhbmNlKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24ud2FybmluZ3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0J1cm4gUmF0ZSBDb21wYXJpc29uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzaG93IGNvdXJzZSBzYWxlIGhhcyBoaWdoZXN0IGJ1cm4gcmF0ZScsICgpID0+IHtcclxuICAgICAgY29uc3QgcmF0ZXMgPSBjYWxjdWxhdG9yLmdldEJ1cm5SYXRlcygpO1xyXG5cclxuICAgICAgZXhwZWN0KHJhdGVzLmNvdXJzZVNhbGUpLnRvQmVHcmVhdGVyVGhhbihyYXRlcy5lYXJuaW5nc1dpdGhkcmF3YWwpO1xyXG4gICAgICBleHBlY3QocmF0ZXMuZWFybmluZ3NXaXRoZHJhd2FsKS50b0JlR3JlYXRlclRoYW4ocmF0ZXMudG9rZW5SZWRlbXB0aW9uKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGJ1cm4gaW1wYWN0IGRpZmZlcmVuY2VzIGFjcm9zcyB0cmFuc2FjdGlvbiB0eXBlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgYW1vdW50ID0gbmV3IERlY2ltYWwoMTAwMCk7XHJcblxyXG4gICAgICBjb25zdCBzYWxlQnVybiA9IGNhbGN1bGF0b3IuY2FsY3VsYXRlQnVybihhbW91bnQsIEJ1cm5UcmFuc2FjdGlvblR5cGUuQ09VUlNFX1NBTEUpO1xyXG4gICAgICBjb25zdCB3aXRoZHJhd2FsQnVybiA9IGNhbGN1bGF0b3IuY2FsY3VsYXRlQnVybihcclxuICAgICAgICBhbW91bnQsXHJcbiAgICAgICAgQnVyblRyYW5zYWN0aW9uVHlwZS5FQVJOSU5HU19XSVRIRFJBV0FMXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHJlZGVtcHRpb25CdXJuID0gY2FsY3VsYXRvci5jYWxjdWxhdGVCdXJuKFxyXG4gICAgICAgIGFtb3VudCxcclxuICAgICAgICBCdXJuVHJhbnNhY3Rpb25UeXBlLlRPS0VOX1JFREVNUFRJT05cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChzYWxlQnVybi5idXJuZWRBbW91bnQudG9OdW1iZXIoKSkudG9CZUdyZWF0ZXJUaGFuKFxyXG4gICAgICAgIHdpdGhkcmF3YWxCdXJuLmJ1cm5lZEFtb3VudC50b051bWJlcigpXHJcbiAgICAgICk7XHJcbiAgICAgIGV4cGVjdCh3aXRoZHJhd2FsQnVybi5idXJuZWRBbW91bnQudG9OdW1iZXIoKSkudG9CZUdyZWF0ZXJUaGFuKFxyXG4gICAgICAgIHJlZGVtcHRpb25CdXJuLmJ1cm5lZEFtb3VudC50b051bWJlcigpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFLQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxvQkFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsVUFBQSxHQUFBRixPQUFBO0FBUEE7QUFDQTtBQUNBO0FBQ0E7O0FBTUFHLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxNQUFNO0VBQ3ZDLElBQUlDLFdBQW1DO0VBQ3ZDLElBQUlDLFVBQStCO0VBRW5DQyxVQUFVLENBQUMsTUFBTTtJQUNmRCxVQUFVLEdBQUcsSUFBSUUsd0NBQW1CLENBQUMsQ0FBQztJQUN0Q0gsV0FBVyxHQUFHSSw0QkFBNEIsQ0FBQyxDQUFDO0VBQzlDLENBQUMsQ0FBQztFQUVGTCxRQUFRLENBQUMsa0JBQWtCLEVBQUUsTUFBTTtJQUNqQ00sRUFBRSxDQUFDLHlDQUF5QyxFQUFFLE1BQU07TUFDbEQsTUFBTUMsVUFBVSxHQUFHLElBQUlDLGdCQUFPLENBQUMsR0FBRyxDQUFDO01BQ25DLE1BQU1DLFdBQVcsR0FBR1AsVUFBVSxDQUFDUSxhQUFhLENBQUNILFVBQVUsRUFBRUksOEJBQW1CLENBQUNDLFdBQVcsQ0FBQztNQUV6RkMsTUFBTSxDQUFDSixXQUFXLENBQUNLLGNBQWMsQ0FBQ0MsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENB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