{"version":3,"names":["request","require","app","describe","it","response","get","expect","status","toBe","body","service","paymentData","amount","currency","description","post","send","set","success","paymentId","toBeDefined","error"],"sources":["azora-pay.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst app = require('../server.js');\r\n\r\ndescribe('Azora Pay Service', () => {\r\n  describe('GET /health', () => {\r\n    it('should return health status', async () => {\r\n      const response = await request(app).get('/health');\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.status).toBe('OK');\r\n      expect(response.body.service).toBe('azora-pay');\r\n    });\r\n  });\r\n\r\n  describe('POST /api/payments', () => {\r\n    it('should process a payment successfully', async () => {\r\n      const paymentData = {\r\n        amount: 100,\r\n        currency: 'USD',\r\n        description: 'Test payment'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/payments')\r\n        .send(paymentData)\r\n        .set('Accept', 'application/json');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.amount).toBe(paymentData.amount);\r\n      expect(response.body.currency).toBe(paymentData.currency);\r\n      expect(response.body.description).toBe(paymentData.description);\r\n      expect(response.body.paymentId).toBeDefined();\r\n      expect(response.body.status).toBe('processed');\r\n    });\r\n\r\n    it('should return error when amount is missing', async () => {\r\n      const paymentData = {\r\n        currency: 'USD'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/payments')\r\n        .send(paymentData)\r\n        .set('Accept', 'application/json');\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Amount and currency are required');\r\n    });\r\n\r\n    it('should return error when currency is missing', async () => {\r\n      const paymentData = {\r\n        amount: 100\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/payments')\r\n        .send(paymentData)\r\n        .set('Accept', 'application/json');\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Amount and currency are required');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/payments/:paymentId', () => {\r\n    it('should return payment status', async () => {\r\n      const paymentId = 'pay_12345';\r\n\r\n      const response = await request(app)\r\n        .get(`/api/payments/${paymentId}`)\r\n        .set('Accept', 'application/json');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.paymentId).toBe(paymentId);\r\n      expect(response.body.status).toBe('processed');\r\n    });\r\n  });\r\n\r\n  describe('404 handling', () => {\r\n    it('should return 404 for unknown routes', async () => {\r\n      const response = await request(app).get('/non-existent-route');\r\n      expect(response.status).toBe(404);\r\n      expect(response.body.error).toBe('Route not found');\r\n    });\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}