{"version":3,"names":["request","require","app","describe","it","response","get","expect","status","toBe","body","service","userId","set","success","recommendations","toBeDefined","preferences","interests","preferredContentTypes","post","send","message","error"],"sources":["personalization-engine.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst app = require('../server.js');\r\n\r\ndescribe('Personalization Engine Service', () => {\r\n  describe('GET /health', () => {\r\n    it('should return health status', async () => {\r\n      const response = await request(app).get('/health');\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.status).toBe('OK');\r\n      expect(response.body.service).toBe('personalization-engine');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/recommendations/:userId', () => {\r\n    it('should return personalized recommendations for a user', async () => {\r\n      const userId = 'user_123';\r\n\r\n      const response = await request(app)\r\n        .get(`/api/recommendations/${userId}`)\r\n        .set('Accept', 'application/json');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.userId).toBe(userId);\r\n      expect(response.body.recommendations).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('POST /api/preferences/:userId', () => {\r\n    it('should update user preferences', async () => {\r\n      const userId = 'user_123';\r\n      const preferences = {\r\n        interests: ['technology', 'science'],\r\n        preferredContentTypes: ['video', 'article']\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post(`/api/preferences/${userId}`)\r\n        .send(preferences)\r\n        .set('Accept', 'application/json');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.userId).toBe(userId);\r\n      expect(response.body.message).toBe('Preferences updated successfully');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/preferences/:userId', () => {\r\n    it('should return user preferences', async () => {\r\n      const userId = 'user_123';\r\n\r\n      const response = await request(app)\r\n        .get(`/api/preferences/${userId}`)\r\n        .set('Accept', 'application/json');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.userId).toBe(userId);\r\n      expect(response.body.preferences).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('404 handling', () => {\r\n    it('should return 404 for unknown routes', async () => {\r\n      const response = await request(app).get('/non-existent-route');\r\n      expect(response.status).toBe(404);\r\n      expect(response.body.error).toBe('Route not found');\r\n    });\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}