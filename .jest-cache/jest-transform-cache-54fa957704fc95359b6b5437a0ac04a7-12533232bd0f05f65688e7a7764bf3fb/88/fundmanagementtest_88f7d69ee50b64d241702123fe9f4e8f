f5ee9888a8aef3581694f56d4cbf279d
"use strict";

var _fundService = require("../services/fund.service.js");
var _errorHandler = require("../middleware/errorHandler.js");
describe('Citadel Fund Management - Task 15', () => {
  const userId = '550e8400-e29b-41d4-a716-446655440003';
  const ipAddress = '192.168.1.1';
  beforeEach(() => {
    jest.clearAllMocks();
  });
  describe('Fund Balance Tracking', () => {
    it('should get initial fund status', async () => {
      const fund = await _fundService.fundService.getFundStatus();
      expect(fund).toBeDefined();
      expect(fund.id).toBeDefined();
      expect(fund.balance).toBeGreaterThanOrEqual(0);
      expect(fund.totalContributions).toBeGreaterThanOrEqual(0);
      expect(fund.totalDistributions).toBeGreaterThanOrEqual(0);
      expect(fund.updatedAt).toBeDefined();
    });
    it('should get fund balance', async () => {
      const balance = await _fundService.fundService.getBalance();
      expect(typeof balance).toBe('number');
      expect(balance).toBeGreaterThanOrEqual(0);
    });
    it('should add contribution to fund', async () => {
      const initialBalance = await _fundService.fundService.getBalance();
      const contributionAmount = 1000;
      const updatedFund = await _fundService.fundService.addContribution(contributionAmount, 'business_revenue');
      expect(updatedFund.balance).toBe(initialBalance + contributionAmount);
      expect(updatedFund.totalContributions).toBeGreaterThanOrEqual(contributionAmount);
    });
    it('should reject negative contributions', async () => {
      await expect(_fundService.fundService.addContribution(-100, 'test')).rejects.toThrow(_errorHandler.AppError);
    });
    it('should reject zero contributions', async () => {
      await expect(_fundService.fundService.addContribution(0, 'test')).rejects.toThrow(_errorHandler.AppError);
    });
    it('should track multiple contributions', async () => {
      const amounts = [500, 1000, 250];
      const expectedTotal = amounts.reduce((a, b) => a + b, 0);
      for (const amount of amounts) {
        await _fundService.fundService.addContribution(amount, 'business_revenue');
      }
      const fund = await _fundService.fundService.getFundStatus();
      expect(fund.totalContributions).toBeGreaterThanOrEqual(expectedTotal);
    });
  });
  describe('Contribution Recording', () => {
    it('should create distribution record', async () => {
      const distribution = await _fundService.fundService.createDistribution({
        amount: 500,
        type: 'scholarship',
        description: 'Scholarship for student'
      });
      expect(distribution).toBeDefined();
      expect(distribution.id).toBeDefined();
      expect(distribution.amount).toBe(500);
      expect(distribution.type).toBe('scholarship');
      expect(distribution.status).toBe('pending');
      expect(distribution.distributedAt).toBeDefined();
    });
    it('should validate distribution amount', async () => {
      await expect(_fundService.fundService.createDistribution({
        amount: -100,
        type: 'scholarship',
        description: 'Invalid'
      })).rejects.toThrow(_errorHandler.AppError);
    });
    it('should check sufficient fund balance', async () => {
      const balance = await _fundService.fundService.getBalance();
      const excessiveAmount = balance + 10000;
      await expect(_fundService.fundService.createDistribution({
        amount: excessiveAmount,
        type: 'scholarship',
        description: 'Too much'
      })).rejects.toThrow(_errorHandler.AppError);
    });
    it('should retrieve distribution by ID', async () => {
      const created = await _fundService.fundService.createDistribution({
        amount: 300,
        type: 'project',
        description: 'Community project'
      });
      const retrieved = await _fundService.fundService.getDistributionById(created.id);
      expect(retrieved).toBeDefined();
      expect(retrieved.id).toBe(created.id);
      expect(retrieved.amount).toBe(300);
      expect(retrieved.type).toBe('project');
    });
    it('should throw error for non-existent distribution', async () => {
      await expect(_fundService.fundService.getDistributionById('non-existent-id')).rejects.toThrow(_errorHandler.AppError);
    });
  });
  describe('Distribution Logic', () => {
    it('should update distribution status to completed', async () => {
      const distribution = await _fundService.fundService.createDistribution({
        amount: 200,
        type: 'scholarship',
        description: 'Test scholarship'
      });
      const updated = await _fundService.fundService.updateDistributionStatus(distribution.id, 'completed');
      expect(updated.status).toBe('completed');
    });
    it('should deduct from fund balance when distribution completed', async () => {
      const initialBalance = await _fundService.fundService.getBalance();
      const distribution = await _fundService.fundService.createDistribution({
        amount: 100,
        type: 'community',
        description: 'Community fund'
      });
      await _fundService.fundService.updateDistributionStatus(distribution.id, 'completed');
      const finalBalance = await _fundService.fundService.getBalance();
      expect(finalBalance).toBe(initialBalance - 100);
    });
    it('should get all distributions with pagination', async () => {
      const result = await _fundService.fundService.getDistributions(1, 10);
      expect(result).toBeDefined();
      expect(result.distributions).toBeDefined();
      expect(Array.isArray(result.distributions)).toBe(true);
      expect(result.total).toBeGreaterThanOrEqual(0);
      expect(result.page).toBe(1);
      expect(result.pageSize).toBe(10);
      expect(result.totalPages).toBeGreaterThanOrEqual(0);
    });
    it('should filter distributions by type', async () => {
      await _fundService.fundService.createDistribution({
        amount: 100,
        type: 'scholarship',
        description: 'Scholarship 1'
      });
      await _fundService.fundService.createDistribution({
        amount: 200,
        type: 'project',
        description: 'Project 1'
      });
      const scholarships = await _fundService.fundService.getDistributions(1, 10, 'scholarship');
      expect(scholarships.distributions.length).toBeGreaterThanOrEqual(1);
      scholarships.distributions.forEach(d => {
        expect(d.type).toBe('scholarship');
      });
    });
    it('should get distribution statistics', async () => {
      const stats = await _fundService.fundService.getDistributionStats();
      expect(stats).toBeDefined();
      expect(stats.totalDistributions).toBeGreaterThanOrEqual(0);
      expect(stats.totalDistributedAmount).toBeGreaterThanOrEqual(0);
      expect(stats.averageDistribution).toBeGreaterThanOrEqual(0);
      expect(stats.byType).toBeDefined();
      expect(stats.byStatus).toBeDefined();
    });
    it('should get impact metrics', async () => {
      const metrics = await _fundService.fundService.getImpactMetrics();
      expect(metrics).toBeDefined();
      expect(metrics.scholarshipsAwarded).toBeGreaterThanOrEqual(0);
      expect(metrics.projectsFunded).toBeGreaterThanOrEqual(0);
      expect(metrics.communityBeneficiaries).toBeGreaterThanOrEqual(0);
      expect(metrics.totalImpactAmount).toBeGreaterThanOrEqual(0);
    });
  });
  describe('Fund Audit Trail', () => {
    it('should get audit trail with pagination', async () => {
      const auditTrail = await _fundService.fundService.getAuditTrail(1, 10);
      expect(auditTrail).toBeDefined();
      expect(auditTrail.entries).toBeDefined();
      expect(Array.isArray(auditTrail.entries)).toBe(true);
      expect(auditTrail.total).toBeGreaterThanOrEqual(0);
      expect(auditTrail.page).toBe(1);
      expect(auditTrail.pageSize).toBe(10);
      expect(auditTrail.totalPages).toBeGreaterThanOrEqual(0);
    });
    it('should log contribution action', async () => {
      await _fundService.fundService.addContribution(500, 'test_source');
      const auditTrail = await _fundService.fundService.getAuditTrail(1, 100);
      expect(auditTrail.entries.length).toBeGreaterThan(0);
      const contributionEntry = auditTrail.entries.find(e => e.action === 'contribution_added');
      expect(contributionEntry).toBeDefined();
    });
    it('should log distribution creation', async () => {
      await _fundService.fundService.createDistribution({
        amount: 300,
        type: 'scholarship',
        description: 'Test'
      });
      const auditTrail = await _fundService.fundService.getAuditTrail(1, 100);
      expect(auditTrail.entries.length).toBeGreaterThan(0);
      const distributionEntry = auditTrail.entries.find(e => e.action === 'distribution_created');
      expect(distributionEntry).toBeDefined();
    });
    it('should log distribution status updates', async () => {
      const distribution = await _fundService.fundService.createDistribution({
        amount: 200,
        type: 'project',
        description: 'Test project'
      });
      await _fundService.fundService.updateDistributionStatus(distribution.id, 'completed');
      const auditTrail = await _fundService.fundService.getAuditTrail(1, 100);
      expect(auditTrail.entries.length).toBeGreaterThan(0);
      const statusEntry = auditTrail.entries.find(e => e.action === 'distribution_completed');
      expect(statusEntry).toBeDefined();
    });
    it('should include timestamp in audit entries', async () => {
      const before = new Date();
      await _fundService.fundService.addContribution(100, 'test');
      const after = new Date();
      const auditTrail = await _fundService.fundService.getAuditTrail(1, 100);
      expect(auditTrail.entries.length).toBeGreaterThan(0);
      const entry = auditTrail.entries[0];
      expect(entry.timestamp).toBeDefined();
      expect(entry.timestamp.getTime()).toBeGreaterThanOrEqual(before.getTime());
      expect(entry.timestamp.getTime()).toBeLessThanOrEqual(after.getTime());
    });
  });
  describe('Fund Analytics', () => {
    it('should get fund analytics', async () => {
      const analytics = await _fundService.fundService.getAnalytics();
      expect(analytics).toBeDefined();
      expect(analytics.currentBalance).toBeGreaterThanOrEqual(0);
      expect(analytics.totalContributions).toBeGreaterThanOrEqual(0);
      expect(analytics.totalDistributions).toBeGreaterThanOrEqual(0);
      expect(analytics.contributionTrend).toBeDefined();
      expect(analytics.distributionTrend).toBeDefined();
      expect(analytics.topDistributionTypes).toBeDefined();
    });
    it('should get analytics with date range', async () => {
      const startDate = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);
      const endDate = new Date();
      const analytics = await _fundService.fundService.getAnalytics(startDate, endDate);
      expect(analytics).toBeDefined();
      expect(analytics.currentBalance).toBeGreaterThanOrEqual(0);
    });
    it('should track distribution trends', async () => {
      await _fundService.fundService.createDistribution({
        amount: 150,
        type: 'scholarship',
        description: 'Trend test'
      });
      const analytics = await _fundService.fundService.getAnalytics();
      expect(analytics.distributionTrend).toBeDefined();
      expect(Array.isArray(analytics.distributionTrend)).toBe(true);
    });
    it('should track top distribution types', async () => {
      const analytics = await _fundService.fundService.getAnalytics();
      expect(analytics.topDistributionTypes).toBeDefined();
      expect(Array.isArray(analytics.topDistributionTypes)).toBe(true);
    });
  });
  describe('Distribution Validation', () => {
    it('should validate distribution data', async () => {
      const validation = _fundService.fundService.validateDistribution({
        amount: 500,
        type: 'scholarship',
        description: 'Valid distribution'
      });
      expect(validation.valid).toBe(true);
      expect(validation.errors).toHaveLength(0);
    });
    it('should reject invalid distribution type', async () => {
      const validation = _fundService.fundService.validateDistribution({
        amount: 500,
        type: 'invalid_type',
        description: 'Invalid'
      });
      expect(validation.valid).toBe(false);
      expect(validation.errors.length).toBeGreaterThan(0);
    });
    it('should reject missing description', async () => {
      const validation = _fundService.fundService.validateDistribution({
        amount: 500,
        type: 'scholarship',
        description: ''
      });
      expect(validation.valid).toBe(false);
      expect(validation.errors.length).toBeGreaterThan(0);
    });
    it('should reject negative amount', async () => {
      const validation = _fundService.fundService.validateDistribution({
        amount: -100,
        type: 'scholarship',
        description: 'Negative'
      });
      expect(validation.valid).toBe(false);
      expect(validation.errors.length).toBeGreaterThan(0);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZnVuZFNlcnZpY2UiLCJyZXF1aXJlIiwiX2Vycm9ySGFuZGxlciIsImRlc2NyaWJlIiwidXNlcklkIiwiaXBBZGRyZXNzIiwiYmVmb3JlRWFjaCIsImplc3QiLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJmdW5kIiwiZnVuZFNlcnZpY2UiLCJnZXRGdW5kU3RhdHVzIiwiZXhwZWN0IiwidG9CZURlZmluZWQiLCJpZCIsImJhbGFuY2UiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwidG90YWxDb250cmlidXRpb25zIiwidG90YWxEaXN0cmlidXRpb25zIiwidXBkYXRlZEF0IiwiZ2V0QmFsYW5jZSIsInRvQmUiLCJpbml0aWFsQmFsYW5jZSIsImNvbnRyaWJ1dGlvbkFtb3VudCIsInVwZGF0ZWRGdW5kIiwiYWRkQ29udHJpYnV0aW9uIiwicmVqZWN0cyIsInRvVGhyb3ciLCJBcHBFcnJvciIsImFtb3VudHMiLCJleHBlY3RlZFRvdGFsIiwicmVkdWNlIiwiYSIsImIiLCJhbW91bnQiLCJkaXN0cmlidXRpb24iLCJjcmVhdGVEaXN0cmlidXRpb24iLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJzdGF0dXMiLCJkaXN0cmlidXRlZEF0IiwiZXhjZXNzaXZlQW1vdW50IiwiY3JlYXRlZCIsInJldHJpZXZlZCIsImdldERpc3RyaWJ1dGlvbkJ5SWQiLCJ1cGRhdGVkIiwidXBkYXRlRGlzdHJpYnV0aW9uU3RhdHVzIiwiZmluYWxCYWxhbmNlIiwicmVzdWx0IiwiZ2V0RGlzdHJpYnV0aW9ucyIsImRpc3RyaWJ1dGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJ0b3RhbCIsInBhZ2UiLCJwYWdlU2l6ZSIsInRvdGFsUGFnZXMiLCJzY2hvbGFyc2hpcHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiZCIsInN0YXRzIiwiZ2V0RGlzdHJpYnV0aW9uU3RhdHMiLCJ0b3RhbERpc3RyaWJ1dGVkQW1vdW50IiwiYXZlcmFnZURpc3RyaWJ1dGlvbiIsImJ5VHlwZSIsImJ5U3RhdHVzIiwibWV0cmljcyIsImdldEltcGFjdE1ldHJpY3MiLCJzY2hvbGFyc2hpcHNBd2FyZGVkIiwicHJvamVjdHNGdW5kZWQiLCJjb21tdW5pdHlCZW5lZmljaWFyaWVzIiwidG90YWxJbXBhY3RBbW91bnQiLCJhdWRpdFRyYWlsIiwiZ2V0QXVkaXRUcmFpbCIsImVudHJpZXMiLCJ0b0JlR3JlYXRlclRoYW4iLCJjb250cmlidXRpb25FbnRyeSIsImZpbmQiLCJlIiwiYWN0aW9uIiwiZGlzdHJpYnV0aW9uRW50cnkiLCJzdGF0dXNFbnRyeSIsImJlZm9yZSIsIkRhdGUiLCJhZnRlciIsImVudHJ5IiwidGltZXN0YW1wIiwiZ2V0VGltZSIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJhbmFseXRpY3MiLCJnZXRBbmFseXRpY3MiLCJjdXJyZW50QmFsYW5jZSIsImNvbnRyaWJ1dGlvblRyZW5kIiwiZGlzdHJpYnV0aW9uVHJlbmQiLCJ0b3BEaXN0cmlidXRpb25UeXBlcyIsInN0YXJ0RGF0ZSIsIm5vdyIsImVuZERhdGUiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVEaXN0cmlidXRpb24iLCJ2YWxpZCIsImVycm9ycyIsInRvSGF2ZUxlbmd0aCJdLCJzb3VyY2VzIjpbImZ1bmQtbWFuYWdlbWVudC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZ1bmRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvZnVuZC5zZXJ2aWNlLmpzJztcclxuaW1wb3J0IHsgQXBwRXJyb3IgfSBmcm9tICcuLi9taWRkbGV3YXJlL2Vycm9ySGFuZGxlci5qcyc7XHJcblxyXG5kZXNjcmliZSgnQ2l0YWRlbCBGdW5kIE1hbmFnZW1lbnQgLSBUYXNrIDE1JywgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJJZCA9ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDMnO1xyXG4gIGNvbnN0IGlwQWRkcmVzcyA9ICcxOTIuMTY4LjEuMSc7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdGdW5kIEJhbGFuY2UgVHJhY2tpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGdldCBpbml0aWFsIGZ1bmQgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmdW5kID0gYXdhaXQgZnVuZFNlcnZpY2UuZ2V0RnVuZFN0YXR1cygpO1xyXG5cclxuICAgICAgZXhwZWN0KGZ1bmQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChmdW5kLmlkKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoZnVuZC5iYWxhbmNlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QoZnVuZC50b3RhbENvbnRyaWJ1dGlvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChmdW5kLnRvdGFsRGlzdHJpYnV0aW9ucykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KGZ1bmQudXBkYXRlZEF0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZXQgZnVuZCBiYWxhbmNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBiYWxhbmNlID0gYXdhaXQgZnVuZFNlcnZpY2UuZ2V0QmFsYW5jZSgpO1xyXG5cclxuICAgICAgZXhwZWN0KHR5cGVvZiBiYWxhbmNlKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgZXhwZWN0KGJhbGFuY2UpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGFkZCBjb250cmlidXRpb24gdG8gZnVuZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW5pdGlhbEJhbGFuY2UgPSBhd2FpdCBmdW5kU2VydmljZS5nZXRCYWxhbmNlKCk7XHJcbiAgICAgIGNvbnN0IGNvbnRyaWJ1dGlvbkFtb3VudCA9IDEwMDA7XHJcblxyXG4gICAgICBjb25zdCB1cGRhdGVkRnVuZCA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmFkZENvbnRyaWJ1dGlvbihjb250cmlidXRpb25BbW91bnQsICdidXNpbmVzc19yZXZlbnVlJyk7XHJcblxyXG4gICAgICBleHBlY3QodXBkYXRlZEZ1bmQuYmFsYW5jZSkudG9CZShpbml0aWFsQmFsYW5jZSArIGNvbnRyaWJ1dGlvbkFtb3VudCk7XHJcbiAgICAgIGV4cGVjdCh1cGRhdGVkRnVuZC50b3RhbENvbnRyaWJ1dGlvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoY29udHJpYnV0aW9uQW1vdW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG5lZ2F0aXZlIGNvbnRyaWJ1dGlvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChmdW5kU2VydmljZS5hZGRDb250cmlidXRpb24oLTEwMCwgJ3Rlc3QnKSkucmVqZWN0cy50b1Rocm93KEFwcEVycm9yKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHplcm8gY29udHJpYnV0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgZXhwZWN0KGZ1bmRTZXJ2aWNlLmFkZENvbnRyaWJ1dGlvbigwLCAndGVzdCcpKS5yZWplY3RzLnRvVGhyb3coQXBwRXJyb3IpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBtdWx0aXBsZSBjb250cmlidXRpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBhbW91bnRzID0gWzUwMCwgMTAwMCwgMjUwXTtcclxuICAgICAgY29uc3QgZXhwZWN0ZWRUb3RhbCA9IGFtb3VudHMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGFtb3VudCBvZiBhbW91bnRzKSB7XHJcbiAgICAgICAgYXdhaXQgZnVuZFNlcnZpY2UuYWRkQ29udHJpYnV0aW9uKGFtb3VudCwgJ2J1c2luZXNzX3JldmVudWUnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZnVuZCA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmdldEZ1bmRTdGF0dXMoKTtcclxuICAgICAgZXhwZWN0KGZ1bmQudG90YWxDb250cmlidXRpb25zKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKGV4cGVjdGVkVG90YWwpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDb250cmlidXRpb24gUmVjb3JkaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgZGlzdHJpYnV0aW9uIHJlY29yZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZGlzdHJpYnV0aW9uID0gYXdhaXQgZnVuZFNlcnZpY2UuY3JlYXRlRGlzdHJpYnV0aW9uKHtcclxuICAgICAgICBhbW91bnQ6IDUwMCxcclxuICAgICAgICB0eXBlOiAnc2Nob2xhcnNoaXAnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU2Nob2xhcnNoaXAgZm9yIHN0dWRlbnQnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24uaWQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24uYW1vdW50KS50b0JlKDUwMCk7XHJcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24udHlwZSkudG9CZSgnc2Nob2xhcnNoaXAnKTtcclxuICAgICAgZXhwZWN0KGRpc3RyaWJ1dGlvbi5zdGF0dXMpLnRvQmUoJ3BlbmRpbmcnKTtcclxuICAgICAgZXhwZWN0KGRpc3RyaWJ1dGlvbi5kaXN0cmlidXRlZEF0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBkaXN0cmlidXRpb24gYW1vdW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBleHBlY3QoXHJcbiAgICAgICAgZnVuZFNlcnZpY2UuY3JlYXRlRGlzdHJpYnV0aW9uKHtcclxuICAgICAgICAgIGFtb3VudDogLTEwMCxcclxuICAgICAgICAgIHR5cGU6ICdzY2hvbGFyc2hpcCcsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0ludmFsaWQnLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEFwcEVycm9yKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY2hlY2sgc3VmZmljaWVudCBmdW5kIGJhbGFuY2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCBmdW5kU2VydmljZS5nZXRCYWxhbmNlKCk7XHJcbiAgICAgIGNvbnN0IGV4Y2Vzc2l2ZUFtb3VudCA9IGJhbGFuY2UgKyAxMDAwMDtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChcclxuICAgICAgICBmdW5kU2VydmljZS5jcmVhdGVEaXN0cmlidXRpb24oe1xyXG4gICAgICAgICAgYW1vdW50OiBleGNlc3NpdmVBbW91bnQsXHJcbiAgICAgICAgICB0eXBlOiAnc2Nob2xhcnNoaXAnLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdUb28gbXVjaCcsXHJcbiAgICAgICAgfSlcclxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQXBwRXJyb3IpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBkaXN0cmlidXRpb24gYnkgSUQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBmdW5kU2VydmljZS5jcmVhdGVEaXN0cmlidXRpb24oe1xyXG4gICAgICAgIGFtb3VudDogMzAwLFxyXG4gICAgICAgIHR5cGU6ICdwcm9qZWN0JyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ0NvbW11bml0eSBwcm9qZWN0JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXRyaWV2ZWQgPSBhd2FpdCBmdW5kU2VydmljZS5nZXREaXN0cmlidXRpb25CeUlkKGNyZWF0ZWQuaWQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJldHJpZXZlZCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJldHJpZXZlZC5pZCkudG9CZShjcmVhdGVkLmlkKTtcclxuICAgICAgZXhwZWN0KHJldHJpZXZlZC5hbW91bnQpLnRvQmUoMzAwKTtcclxuICAgICAgZXhwZWN0KHJldHJpZXZlZC50eXBlKS50b0JlKCdwcm9qZWN0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBub24tZXhpc3RlbnQgZGlzdHJpYnV0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBleHBlY3QoZnVuZFNlcnZpY2UuZ2V0RGlzdHJpYnV0aW9uQnlJZCgnbm9uLWV4aXN0ZW50LWlkJykpLnJlamVjdHMudG9UaHJvdyhBcHBFcnJvcik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Rpc3RyaWJ1dGlvbiBMb2dpYycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGRpc3RyaWJ1dGlvbiBzdGF0dXMgdG8gY29tcGxldGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkaXN0cmlidXRpb24gPSBhd2FpdCBmdW5kU2VydmljZS5jcmVhdGVEaXN0cmlidXRpb24oe1xyXG4gICAgICAgIGFtb3VudDogMjAwLFxyXG4gICAgICAgIHR5cGU6ICdzY2hvbGFyc2hpcCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0IHNjaG9sYXJzaGlwJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgZnVuZFNlcnZpY2UudXBkYXRlRGlzdHJpYnV0aW9uU3RhdHVzKGRpc3RyaWJ1dGlvbi5pZCwgJ2NvbXBsZXRlZCcpO1xyXG5cclxuICAgICAgZXhwZWN0KHVwZGF0ZWQuc3RhdHVzKS50b0JlKCdjb21wbGV0ZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGVkdWN0IGZyb20gZnVuZCBiYWxhbmNlIHdoZW4gZGlzdHJpYnV0aW9uIGNvbXBsZXRlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW5pdGlhbEJhbGFuY2UgPSBhd2FpdCBmdW5kU2VydmljZS5nZXRCYWxhbmNlKCk7XHJcblxyXG4gICAgICBjb25zdCBkaXN0cmlidXRpb24gPSBhd2FpdCBmdW5kU2VydmljZS5jcmVhdGVEaXN0cmlidXRpb24oe1xyXG4gICAgICAgIGFtb3VudDogMTAwLFxyXG4gICAgICAgIHR5cGU6ICdjb21tdW5pdHknLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tbXVuaXR5IGZ1bmQnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGZ1bmRTZXJ2aWNlLnVwZGF0ZURpc3RyaWJ1dGlvblN0YXR1cyhkaXN0cmlidXRpb24uaWQsICdjb21wbGV0ZWQnKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbmFsQmFsYW5jZSA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmdldEJhbGFuY2UoKTtcclxuICAgICAgZXhwZWN0KGZpbmFsQmFsYW5jZSkudG9CZShpbml0aWFsQmFsYW5jZSAtIDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGdldCBhbGwgZGlzdHJpYnV0aW9ucyB3aXRoIHBhZ2luYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmdldERpc3RyaWJ1dGlvbnMoMSwgMTApO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5kaXN0cmlidXRpb25zKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQuZGlzdHJpYnV0aW9ucykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWwpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucGFnZSkudG9CZSgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5wYWdlU2l6ZSkudG9CZSgxMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxQYWdlcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGRpc3RyaWJ1dGlvbnMgYnkgdHlwZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgZnVuZFNlcnZpY2UuY3JlYXRlRGlzdHJpYnV0aW9uKHtcclxuICAgICAgICBhbW91bnQ6IDEwMCxcclxuICAgICAgICB0eXBlOiAnc2Nob2xhcnNoaXAnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU2Nob2xhcnNoaXAgMScsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgZnVuZFNlcnZpY2UuY3JlYXRlRGlzdHJpYnV0aW9uKHtcclxuICAgICAgICBhbW91bnQ6IDIwMCxcclxuICAgICAgICB0eXBlOiAncHJvamVjdCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdQcm9qZWN0IDEnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHNjaG9sYXJzaGlwcyA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmdldERpc3RyaWJ1dGlvbnMoMSwgMTAsICdzY2hvbGFyc2hpcCcpO1xyXG5cclxuICAgICAgZXhwZWN0KHNjaG9sYXJzaGlwcy5kaXN0cmlidXRpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKTtcclxuICAgICAgc2Nob2xhcnNoaXBzLmRpc3RyaWJ1dGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChkLnR5cGUpLnRvQmUoJ3NjaG9sYXJzaGlwJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZXQgZGlzdHJpYnV0aW9uIHN0YXRpc3RpY3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZnVuZFNlcnZpY2UuZ2V0RGlzdHJpYnV0aW9uU3RhdHMoKTtcclxuXHJcbiAgICAgIGV4cGVjdChzdGF0cykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsRGlzdHJpYnV0aW9ucykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsRGlzdHJpYnV0ZWRBbW91bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlRGlzdHJpYnV0aW9uKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3Qoc3RhdHMuYnlUeXBlKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3Qoc3RhdHMuYnlTdGF0dXMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGdldCBpbXBhY3QgbWV0cmljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmdldEltcGFjdE1ldHJpY3MoKTtcclxuXHJcbiAgICAgIGV4cGVjdChtZXRyaWNzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5zY2hvbGFyc2hpcHNBd2FyZGVkKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5wcm9qZWN0c0Z1bmRlZCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MuY29tbXVuaXR5QmVuZWZpY2lhcmllcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MudG90YWxJbXBhY3RBbW91bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Z1bmQgQXVkaXQgVHJhaWwnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGdldCBhdWRpdCB0cmFpbCB3aXRoIHBhZ2luYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGF1ZGl0VHJhaWwgPSBhd2FpdCBmdW5kU2VydmljZS5nZXRBdWRpdFRyYWlsKDEsIDEwKTtcclxuXHJcbiAgICAgIGV4cGVjdChhdWRpdFRyYWlsKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoYXVkaXRUcmFpbC5lbnRyaWVzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhdWRpdFRyYWlsLmVudHJpZXMpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoYXVkaXRUcmFpbC50b3RhbCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KGF1ZGl0VHJhaWwucGFnZSkudG9CZSgxKTtcclxuICAgICAgZXhwZWN0KGF1ZGl0VHJhaWwucGFnZVNpemUpLnRvQmUoMTApO1xyXG4gICAgICBleHBlY3QoYXVkaXRUcmFpbC50b3RhbFBhZ2VzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBsb2cgY29udHJpYnV0aW9uIGFjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgZnVuZFNlcnZpY2UuYWRkQ29udHJpYnV0aW9uKDUwMCwgJ3Rlc3Rfc291cmNlJyk7XHJcblxyXG4gICAgICBjb25zdCBhdWRpdFRyYWlsID0gYXdhaXQgZnVuZFNlcnZpY2UuZ2V0QXVkaXRUcmFpbCgxLCAxMDApO1xyXG5cclxuICAgICAgZXhwZWN0KGF1ZGl0VHJhaWwuZW50cmllcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgY29uc3QgY29udHJpYnV0aW9uRW50cnkgPSBhdWRpdFRyYWlsLmVudHJpZXMuZmluZCgoZSkgPT4gZS5hY3Rpb24gPT09ICdjb250cmlidXRpb25fYWRkZWQnKTtcclxuICAgICAgZXhwZWN0KGNvbnRyaWJ1dGlvbkVudHJ5KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBsb2cgZGlzdHJpYnV0aW9uIGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBmdW5kU2VydmljZS5jcmVhdGVEaXN0cmlidXRpb24oe1xyXG4gICAgICAgIGFtb3VudDogMzAwLFxyXG4gICAgICAgIHR5cGU6ICdzY2hvbGFyc2hpcCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBhdWRpdFRyYWlsID0gYXdhaXQgZnVuZFNlcnZpY2UuZ2V0QXVkaXRUcmFpbCgxLCAxMDApO1xyXG5cclxuICAgICAgZXhwZWN0KGF1ZGl0VHJhaWwuZW50cmllcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgY29uc3QgZGlzdHJpYnV0aW9uRW50cnkgPSBhdWRpdFRyYWlsLmVudHJpZXMuZmluZCgoZSkgPT4gZS5hY3Rpb24gPT09ICdkaXN0cmlidXRpb25fY3JlYXRlZCcpO1xyXG4gICAgICBleHBlY3QoZGlzdHJpYnV0aW9uRW50cnkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvZyBkaXN0cmlidXRpb24gc3RhdHVzIHVwZGF0ZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmNyZWF0ZURpc3RyaWJ1dGlvbih7XHJcbiAgICAgICAgYW1vdW50OiAyMDAsXHJcbiAgICAgICAgdHlwZTogJ3Byb2plY3QnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBwcm9qZWN0JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBmdW5kU2VydmljZS51cGRhdGVEaXN0cmlidXRpb25TdGF0dXMoZGlzdHJpYnV0aW9uLmlkLCAnY29tcGxldGVkJyk7XHJcblxyXG4gICAgICBjb25zdCBhdWRpdFRyYWlsID0gYXdhaXQgZnVuZFNlcnZpY2UuZ2V0QXVkaXRUcmFpbCgxLCAxMDApO1xyXG5cclxuICAgICAgZXhwZWN0KGF1ZGl0VHJhaWwuZW50cmllcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgY29uc3Qgc3RhdHVzRW50cnkgPSBhdWRpdFRyYWlsLmVudHJpZXMuZmluZCgoZSkgPT4gZS5hY3Rpb24gPT09ICdkaXN0cmlidXRpb25fY29tcGxldGVkJyk7XHJcbiAgICAgIGV4cGVjdChzdGF0dXNFbnRyeSkudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSB0aW1lc3RhbXAgaW4gYXVkaXQgZW50cmllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYmVmb3JlID0gbmV3IERhdGUoKTtcclxuICAgICAgYXdhaXQgZnVuZFNlcnZpY2UuYWRkQ29udHJpYnV0aW9uKDEwMCwgJ3Rlc3QnKTtcclxuICAgICAgY29uc3QgYWZ0ZXIgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgY29uc3QgYXVkaXRUcmFpbCA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmdldEF1ZGl0VHJhaWwoMSwgMTAwKTtcclxuXHJcbiAgICAgIGV4cGVjdChhdWRpdFRyYWlsLmVudHJpZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGNvbnN0IGVudHJ5ID0gYXVkaXRUcmFpbC5lbnRyaWVzWzBdO1xyXG4gICAgICBleHBlY3QoZW50cnkudGltZXN0YW1wKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoZW50cnkudGltZXN0YW1wLmdldFRpbWUoKSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChiZWZvcmUuZ2V0VGltZSgpKTtcclxuICAgICAgZXhwZWN0KGVudHJ5LnRpbWVzdGFtcC5nZXRUaW1lKCkpLnRvQmVMZXNzVGhhbk9yRXF1YWwoYWZ0ZXIuZ2V0VGltZSgpKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRnVuZCBBbmFseXRpY3MnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGdldCBmdW5kIGFuYWx5dGljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYW5hbHl0aWNzID0gYXdhaXQgZnVuZFNlcnZpY2UuZ2V0QW5hbHl0aWNzKCk7XHJcblxyXG4gICAgICBleHBlY3QoYW5hbHl0aWNzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoYW5hbHl0aWNzLmN1cnJlbnRCYWxhbmNlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QoYW5hbHl0aWNzLnRvdGFsQ29udHJpYnV0aW9ucykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KGFuYWx5dGljcy50b3RhbERpc3RyaWJ1dGlvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChhbmFseXRpY3MuY29udHJpYnV0aW9uVHJlbmQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChhbmFseXRpY3MuZGlzdHJpYnV0aW9uVHJlbmQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChhbmFseXRpY3MudG9wRGlzdHJpYnV0aW9uVHlwZXMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGdldCBhbmFseXRpY3Mgd2l0aCBkYXRlIHJhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICAgICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICBjb25zdCBhbmFseXRpY3MgPSBhd2FpdCBmdW5kU2VydmljZS5nZXRBbmFseXRpY3Moc3RhcnREYXRlLCBlbmREYXRlKTtcclxuXHJcbiAgICAgIGV4cGVjdChhbmFseXRpY3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChhbmFseXRpY3MuY3VycmVudEJhbGFuY2UpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIGRpc3RyaWJ1dGlvbiB0cmVuZHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGZ1bmRTZXJ2aWNlLmNyZWF0ZURpc3RyaWJ1dGlvbih7XHJcbiAgICAgICAgYW1vdW50OiAxNTAsXHJcbiAgICAgICAgdHlwZTogJ3NjaG9sYXJzaGlwJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ1RyZW5kIHRlc3QnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGFuYWx5dGljcyA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmdldEFuYWx5dGljcygpO1xyXG5cclxuICAgICAgZXhwZWN0KGFuYWx5dGljcy5kaXN0cmlidXRpb25UcmVuZCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHl0aWNzLmRpc3RyaWJ1dGlvblRyZW5kKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdHJhY2sgdG9wIGRpc3RyaWJ1dGlvbiB0eXBlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYW5hbHl0aWNzID0gYXdhaXQgZnVuZFNlcnZpY2UuZ2V0QW5hbHl0aWNzKCk7XHJcblxyXG4gICAgICBleHBlY3QoYW5hbHl0aWNzLnRvcERpc3RyaWJ1dGlvblR5cGVzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhbmFseXRpY3MudG9wRGlzdHJpYnV0aW9uVHlwZXMpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEaXN0cmlidXRpb24gVmFsaWRhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgZGlzdHJpYnV0aW9uIGRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBmdW5kU2VydmljZS52YWxpZGF0ZURpc3RyaWJ1dGlvbih7XHJcbiAgICAgICAgYW1vdW50OiA1MDAsXHJcbiAgICAgICAgdHlwZTogJ3NjaG9sYXJzaGlwJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhbGlkIGRpc3RyaWJ1dGlvbicsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24udmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmVycm9ycykudG9IYXZlTGVuZ3RoKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBkaXN0cmlidXRpb24gdHlwZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGZ1bmRTZXJ2aWNlLnZhbGlkYXRlRGlzdHJpYnV0aW9uKHtcclxuICAgICAgICBhbW91bnQ6IDUwMCxcclxuICAgICAgICB0eXBlOiAnaW52YWxpZF90eXBlJyBhcyBhbnksXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdJbnZhbGlkJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi52YWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmVycm9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG1pc3NpbmcgZGVzY3JpcHRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBmdW5kU2VydmljZS52YWxpZGF0ZURpc3RyaWJ1dGlvbih7XHJcbiAgICAgICAgYW1vdW50OiA1MDAsXHJcbiAgICAgICAgdHlwZTogJ3NjaG9sYXJzaGlwJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24udmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBuZWdhdGl2ZSBhbW91bnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBmdW5kU2VydmljZS52YWxpZGF0ZURpc3RyaWJ1dGlvbih7XHJcbiAgICAgICAgYW1vdW50OiAtMTAwLFxyXG4gICAgICAgIHR5cGU6ICdzY2hvbGFyc2hpcCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdOZWdhdGl2ZScsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24udmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxZQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxhQUFBLEdBQUFELE9BQUE7QUFFQUUsUUFBUSxDQUFDLG1DQUFtQyxFQUFFLE1BQU07RUFDbEQsTUFBTUMsTUFBTSxHQUFHLHNDQUFzQztFQUNyRCxNQUFNQyxTQUFTLEdBQUcsYUFBYTtFQUUvQkMsVUFBVSxDQUFDLE1BQU07SUFDZkMsSUFBSSxDQUFDQyxhQUFhLENBQUMsQ0FBQztFQUN0QixDQUFDLENBQUM7RUFFRkwsUUFBUSxDQUFDLHVCQUF1QixFQUFFLE1B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