f68786895a33c27e6f3878e74a254445
"use strict";

// Mock the service
_getJestObj().mock('../../services/conversion-metrics.service');
var _supertest = _interopRequireDefault(require("supertest"));
var _express = _interopRequireDefault(require("express"));
var _conversionMetrics = _interopRequireDefault(require("../conversion-metrics.routes"));
var _conversionMetrics2 = require("../../services/conversion-metrics.service");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const app = (0, _express.default)();
app.use(_express.default.json());
app.use('/', _conversionMetrics.default);
describe('Conversion Metrics Routes', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });
  describe('GET /analytics/conversion/metrics', () => {
    it('should return conversion metrics for current month', async () => {
      const mockMetrics = {
        period: '2024-01',
        freeUsers: 100,
        premiumUsers: 30,
        proUsers: 5,
        conversionRate: 23.08,
        churnRate: 5.2,
        lifetimeValue: 50,
        customerAcquisitionCost: 10,
        paybackPeriod: 2.4
      };
      _conversionMetrics2.conversionMetricsService.getConversionMetrics.mockResolvedValue(mockMetrics);
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics');
      expect(response.status).toBe(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data).toEqual(mockMetrics);
    });
    it('should handle errors gracefully', async () => {
      _conversionMetrics2.conversionMetricsService.getConversionMetrics.mockRejectedValue(new Error('Database error'));
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics');
      expect(response.status).toBe(500);
      expect(response.body.success).toBe(false);
      expect(response.body.error).toBe('Failed to fetch conversion metrics');
    });
  });
  describe('GET /analytics/conversion/metrics/:period', () => {
    it('should return conversion metrics for specified month', async () => {
      const mockMetrics = {
        period: '2024-03',
        freeUsers: 150,
        premiumUsers: 45,
        proUsers: 10,
        conversionRate: 23.08,
        churnRate: 3.5,
        lifetimeValue: 55,
        customerAcquisitionCost: 12,
        paybackPeriod: 2.6
      };
      _conversionMetrics2.conversionMetricsService.getConversionMetrics.mockResolvedValue(mockMetrics);
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics/2024-03');
      expect(response.status).toBe(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.period).toBe('2024-03');
    });
    it('should return conversion metrics for specified quarter', async () => {
      const mockMetrics = {
        period: '2024-Q1',
        freeUsers: 300,
        premiumUsers: 90,
        proUsers: 20,
        conversionRate: 23.08,
        churnRate: 4.2,
        lifetimeValue: 52,
        customerAcquisitionCost: 11,
        paybackPeriod: 2.5
      };
      _conversionMetrics2.conversionMetricsService.getConversionMetrics.mockResolvedValue(mockMetrics);
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics/2024-Q1');
      expect(response.status).toBe(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.period).toBe('2024-Q1');
    });
    it('should return conversion metrics for specified year', async () => {
      const mockMetrics = {
        period: '2024',
        freeUsers: 1200,
        premiumUsers: 360,
        proUsers: 80,
        conversionRate: 23.08,
        churnRate: 4.0,
        lifetimeValue: 51,
        customerAcquisitionCost: 10.5,
        paybackPeriod: 2.45
      };
      _conversionMetrics2.conversionMetricsService.getConversionMetrics.mockResolvedValue(mockMetrics);
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics/2024');
      expect(response.status).toBe(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.period).toBe('2024');
    });
    it('should reject invalid period format', async () => {
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics/invalid-period');
      expect(response.status).toBe(400);
      expect(response.body.success).toBe(false);
      expect(response.body.error).toContain('Invalid period format');
    });
    it('should reject invalid month', async () => {
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics/2024-13');
      expect(response.status).toBe(400);
      expect(response.body.success).toBe(false);
    });
    it('should handle service errors', async () => {
      _conversionMetrics2.conversionMetricsService.getConversionMetrics.mockRejectedValue(new Error('Service error'));
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics/2024-01');
      expect(response.status).toBe(500);
      expect(response.body.success).toBe(false);
    });
  });
  describe('Data aggregation', () => {
    it('should aggregate conversion metrics correctly', async () => {
      const mockMetrics = {
        period: '2024-01',
        freeUsers: 100,
        premiumUsers: 30,
        proUsers: 5,
        conversionRate: 23.08,
        churnRate: 5.2,
        lifetimeValue: 50,
        customerAcquisitionCost: 10,
        paybackPeriod: 2.4
      };
      _conversionMetrics2.conversionMetricsService.getConversionMetrics.mockResolvedValue(mockMetrics);
      const response = await (0, _supertest.default)(app).get('/analytics/conversion/metrics/2024-01');
      expect(response.body.data.freeUsers).toBe(100);
      expect(response.body.data.premiumUsers).toBe(30);
      expect(response.body.data.proUsers).toBe(5);
      expect(response.body.data.conversionRate).toBeCloseTo(23.08, 1);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJfc3VwZXJ0ZXN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZXhwcmVzcyIsIl9jb252ZXJzaW9uTWV0cmljcyIsIl9jb252ZXJzaW9uTWV0cmljczIiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJqZXN0IiwiYXBwIiwiZXhwcmVzcyIsInVzZSIsImpzb24iLCJjb252ZXJzaW9uTWV0cmljc1JvdXRlciIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIm1vY2tNZXRyaWNzIiwicGVyaW9kIiwiZnJlZVVzZXJzIiwicHJlbWl1bVVzZXJzIiwicHJvVXNlcnMiLCJjb252ZXJzaW9uUmF0ZSIsImNodXJuUmF0ZSIsImxpZmV0aW1lVmFsdWUiLCJjdXN0b21lckFjcXVpc2l0aW9uQ29zdCIsInBheWJhY2tQZXJpb2QiLCJjb252ZXJzaW9uTWV0cmljc1NlcnZpY2UiLCJnZXRDb252ZXJzaW9uTWV0cmljcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwicmVzcG9uc2UiLCJyZXF1ZXN0IiwiZ2V0IiwiZXhwZWN0Iiwic3RhdHVzIiwidG9CZSIsImJvZHkiLCJzdWNjZXNzIiwiZGF0YSIsInRvRXF1YWwiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwiZXJyb3IiLCJ0b0NvbnRhaW4iLCJ0b0JlQ2xvc2VUbyJdLCJzb3VyY2VzIjpbImNvbnZlcnNpb24tbWV0cmljcy5yb3V0ZXMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVxdWVzdCBmcm9tICdzdXBlcnRlc3QnO1xyXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGNvbnZlcnNpb25NZXRyaWNzUm91dGVyIGZyb20gJy4uL2NvbnZlcnNpb24tbWV0cmljcy5yb3V0ZXMnO1xyXG5pbXBvcnQgeyBjb252ZXJzaW9uTWV0cmljc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9jb252ZXJzaW9uLW1ldHJpY3Muc2VydmljZSc7XHJcblxyXG4vLyBNb2NrIHRoZSBzZXJ2aWNlXHJcbmplc3QubW9jaygnLi4vLi4vc2VydmljZXMvY29udmVyc2lvbi1tZXRyaWNzLnNlcnZpY2UnKTtcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcbmFwcC51c2UoJy8nLCBjb252ZXJzaW9uTWV0cmljc1JvdXRlcik7XHJcblxyXG5kZXNjcmliZSgnQ29udmVyc2lvbiBNZXRyaWNzIFJvdXRlcycsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnR0VUIC9hbmFseXRpY3MvY29udmVyc2lvbi9tZXRyaWNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29udmVyc2lvbiBtZXRyaWNzIGZvciBjdXJyZW50IG1vbnRoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrTWV0cmljcyA9IHtcclxuICAgICAgICBwZXJpb2Q6ICcyMDI0LTAxJyxcclxuICAgICAgICBmcmVlVXNlcnM6IDEwMCxcclxuICAgICAgICBwcmVtaXVtVXNlcnM6IDMwLFxyXG4gICAgICAgIHByb1VzZXJzOiA1LFxyXG4gICAgICAgIGNvbnZlcnNpb25SYXRlOiAyMy4wOCxcclxuICAgICAgICBjaHVyblJhdGU6IDUuMixcclxuICAgICAgICBsaWZldGltZVZhbHVlOiA1MCxcclxuICAgICAgICBjdXN0b21lckFjcXVpc2l0aW9uQ29zdDogMTAsXHJcbiAgICAgICAgcGF5YmFja1BlcmlvZDogMi40LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgKGNvbnZlcnNpb25NZXRyaWNzU2VydmljZS5nZXRDb252ZXJzaW9uTWV0cmljcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tNZXRyaWNzKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApLmdldCgnL2FuYWx5dGljcy9jb252ZXJzaW9uL21ldHJpY3MnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9FcXVhbChtb2NrTWV0cmljcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgKGNvbnZlcnNpb25NZXRyaWNzU2VydmljZS5nZXRDb252ZXJzaW9uTWV0cmljcyBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKFxyXG4gICAgICAgIG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcCkuZ2V0KCcvYW5hbHl0aWNzL2NvbnZlcnNpb24vbWV0cmljcycpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQmUoJ0ZhaWxlZCB0byBmZXRjaCBjb252ZXJzaW9uIG1ldHJpY3MnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnR0VUIC9hbmFseXRpY3MvY29udmVyc2lvbi9tZXRyaWNzLzpwZXJpb2QnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb252ZXJzaW9uIG1ldHJpY3MgZm9yIHNwZWNpZmllZCBtb250aCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja01ldHJpY3MgPSB7XHJcbiAgICAgICAgcGVyaW9kOiAnMjAyNC0wMycsXHJcbiAgICAgICAgZnJlZVVzZXJzOiAxNTAsXHJcbiAgICAgICAgcHJlbWl1bVVzZXJzOiA0NSxcclxuICAgICAgICBwcm9Vc2VyczogMTAsXHJcbiAgICAgICAgY29udmVyc2lvblJhdGU6IDIzLjA4LFxyXG4gICAgICAgIGNodXJuUmF0ZTogMy41LFxyXG4gICAgICAgIGxpZmV0aW1lVmFsdWU6IDU1LFxyXG4gICAgICAgIGN1c3RvbWVyQWNxdWlzaXRpb25Db3N0OiAxMixcclxuICAgICAgICBwYXliYWNrUGVyaW9kOiAyLjYsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAoY29udmVyc2lvbk1ldHJpY3NTZXJ2aWNlLmdldENvbnZlcnNpb25NZXRyaWNzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja01ldHJpY3MpO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcCkuZ2V0KCcvYW5hbHl0aWNzL2NvbnZlcnNpb24vbWV0cmljcy8yMDI0LTAzJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEucGVyaW9kKS50b0JlKCcyMDI0LTAzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb252ZXJzaW9uIG1ldHJpY3MgZm9yIHNwZWNpZmllZCBxdWFydGVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrTWV0cmljcyA9IHtcclxuICAgICAgICBwZXJpb2Q6ICcyMDI0LVExJyxcclxuICAgICAgICBmcmVlVXNlcnM6IDMwMCxcclxuICAgICAgICBwcmVtaXVtVXNlcnM6IDkwLFxyXG4gICAgICAgIHByb1VzZXJzOiAyMCxcclxuICAgICAgICBjb252ZXJzaW9uUmF0ZTogMjMuMDgsXHJcbiAgICAgICAgY2h1cm5SYXRlOiA0LjIsXHJcbiAgICAgICAgbGlmZXRpbWVWYWx1ZTogNTIsXHJcbiAgICAgICAgY3VzdG9tZXJBY3F1aXNpdGlvbkNvc3Q6IDExLFxyXG4gICAgICAgIHBheWJhY2tQZXJpb2Q6IDIuNSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChjb252ZXJzaW9uTWV0cmljc1NlcnZpY2UuZ2V0Q29udmVyc2lvbk1ldHJpY3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrTWV0cmljcyk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoJy9hbmFseXRpY3MvY29udmVyc2lvbi9tZXRyaWNzLzIwMjQtUTEnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5wZXJpb2QpLnRvQmUoJzIwMjQtUTEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvbnZlcnNpb24gbWV0cmljcyBmb3Igc3BlY2lmaWVkIHllYXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tNZXRyaWNzID0ge1xyXG4gICAgICAgIHBlcmlvZDogJzIwMjQnLFxyXG4gICAgICAgIGZyZWVVc2VyczogMTIwMCxcclxuICAgICAgICBwcmVtaXVtVXNlcnM6IDM2MCxcclxuICAgICAgICBwcm9Vc2VyczogODAsXHJcbiAgICAgICAgY29udmVyc2lvblJhdGU6IDIzLjA4LFxyXG4gICAgICAgIGNodXJuUmF0ZTogNC4wLFxyXG4gICAgICAgIGxpZmV0aW1lVmFsdWU6IDUxLFxyXG4gICAgICAgIGN1c3RvbWVyQWNxdWlzaXRpb25Db3N0OiAxMC41LFxyXG4gICAgICAgIHBheWJhY2tQZXJpb2Q6IDIuNDUsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAoY29udmVyc2lvbk1ldHJpY3NTZXJ2aWNlLmdldENvbnZlcnNpb25NZXRyaWNzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja01ldHJpY3MpO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcCkuZ2V0KCcvYW5hbHl0aWNzL2NvbnZlcnNpb24vbWV0cmljcy8yMDI0Jyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEucGVyaW9kKS50b0JlKCcyMDI0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIHBlcmlvZCBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApLmdldCgnL2FuYWx5dGljcy9jb252ZXJzaW9uL21ldHJpY3MvaW52YWxpZC1wZXJpb2QnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ0ludmFsaWQgcGVyaW9kIGZvcm1hdCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBtb250aCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcCkuZ2V0KCcvYW5hbHl0aWNzL2NvbnZlcnNpb24vbWV0cmljcy8yMDI0LTEzJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIChjb252ZXJzaW9uTWV0cmljc1NlcnZpY2UuZ2V0Q29udmVyc2lvbk1ldHJpY3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShcclxuICAgICAgICBuZXcgRXJyb3IoJ1NlcnZpY2UgZXJyb3InKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcCkuZ2V0KCcvYW5hbHl0aWNzL2NvbnZlcnNpb24vbWV0cmljcy8yMDI0LTAxJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEYXRhIGFnZ3JlZ2F0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBhZ2dyZWdhdGUgY29udmVyc2lvbiBtZXRyaWNzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja01ldHJpY3MgPSB7XHJcbiAgICAgICAgcGVyaW9kOiAnMjAyNC0wMScsXHJcbiAgICAgICAgZnJlZVVzZXJzOiAxMDAsXHJcbiAgICAgICAgcHJlbWl1bVVzZXJzOiAzMCxcclxuICAgICAgICBwcm9Vc2VyczogNSxcclxuICAgICAgICBjb252ZXJzaW9uUmF0ZTogMjMuMDgsXHJcbiAgICAgICAgY2h1cm5SYXRlOiA1LjIsXHJcbiAgICAgICAgbGlmZXRpbWVWYWx1ZTogNTAsXHJcbiAgICAgICAgY3VzdG9tZXJBY3F1aXNpdGlvbkNvc3Q6IDEwLFxyXG4gICAgICAgIHBheWJhY2tQZXJpb2Q6IDIuNCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChjb252ZXJzaW9uTWV0cmljc1NlcnZpY2UuZ2V0Q29udmVyc2lvbk1ldHJpY3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrTWV0cmljcyk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoJy9hbmFseXRpY3MvY29udmVyc2lvbi9tZXRyaWNzLzIwMjQtMDEnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuZnJlZVVzZXJzKS50b0JlKDEwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEucHJlbWl1bVVzZXJzKS50b0JlKDMwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5wcm9Vc2VycykudG9CZSg1KTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5jb252ZXJzaW9uUmF0ZSkudG9CZUNsb3NlVG8oMjMuMDgsIDEpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBS0E7QUFDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsMkNBQTJDLENBQUM7QUFOdEQsSUFBQUMsVUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsa0JBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLG1CQUFBLEdBQUFILE9BQUE7QUFBcUYsU0FBQUQsdUJBQUFLLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFBQSxTQUFBUixZQUFBO0VBQUE7SUFBQVc7RUFBQSxJQUFBUCxP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