{"version":3,"names":["path","_interopRequireWildcard","require","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ServiceGenerator","generateService","spec","outputDir","changes","serviceName","toKebabCase","name","serviceDir","join","push","type","content","generateIndexFile","generateController","generateServiceLayer","database","generateRepository","generatePrismaSchema","generateErrorHandler","authentication","generateAuthMiddleware","generateTypes","generateValidationSchemas","generatePackageJson","generateTsConfig","generateEnvExample","generateReadme","toPascalCase","port","serviceVar","toCamelCase","modelName","toSnakeCase","JSON","stringify","version","description","main","scripts","dev","build","start","test","lint","dependencies","express","cors","helmet","zod","jsonwebtoken","devDependencies","typescript","jest","eslint","prisma","compilerOptions","target","module","lib","outDir","rootDir","strict","esModuleInterop","skipLibCheck","forceConsistentCasingInFileNames","resolveJsonModule","declaration","declarationMap","sourceMap","include","exclude","env","str","replace","toLowerCase","_","c","toUpperCase","camel","charAt","slice","exports"],"sources":["ServiceGenerator.ts"],"sourcesContent":["import * as path from 'path';\nimport { FileChange } from './ChangesetManager';\n\nexport interface ServiceSpec {\n  name: string;\n  type: 'rest-api' | 'graphql' | 'microservice' | 'worker';\n  port?: number;\n  database?: boolean;\n  authentication?: boolean;\n  features?: string[];\n}\n\nexport class ServiceGenerator {\n  /**\n   * Generate complete service boilerplate\n   */\n  generateService(spec: ServiceSpec, outputDir: string): FileChange[] {\n    const changes: FileChange[] = [];\n    const serviceName = this.toKebabCase(spec.name);\n    const serviceDir = path.join(outputDir, 'services', serviceName);\n\n    // Generate main service file\n    changes.push({\n      path: path.join(serviceDir, 'src', 'index.ts'),\n      type: 'create',\n      content: this.generateIndexFile(spec),\n    });\n\n    // Generate controller\n    changes.push({\n      path: path.join(serviceDir, 'src', 'controllers', `${serviceName}.controller.ts`),\n      type: 'create',\n      content: this.generateController(spec),\n    });\n\n    // Generate service layer\n    changes.push({\n      path: path.join(serviceDir, 'src', 'services', `${serviceName}.service.ts`),\n      type: 'create',\n      content: this.generateServiceLayer(spec),\n    });\n\n    // Generate repository if database is enabled\n    if (spec.database) {\n      changes.push({\n        path: path.join(serviceDir, 'src', 'repositories', `${serviceName}.repository.ts`),\n        type: 'create',\n        content: this.generateRepository(spec),\n      });\n\n      changes.push({\n        path: path.join(serviceDir, 'prisma', 'schema.prisma'),\n        type: 'create',\n        content: this.generatePrismaSchema(spec),\n      });\n    }\n\n    // Generate middleware\n    changes.push({\n      path: path.join(serviceDir, 'src', 'middleware', 'error-handler.ts'),\n      type: 'create',\n      content: this.generateErrorHandler(),\n    });\n\n    if (spec.authentication) {\n      changes.push({\n        path: path.join(serviceDir, 'src', 'middleware', 'auth.ts'),\n        type: 'create',\n        content: this.generateAuthMiddleware(),\n      });\n    }\n\n    // Generate types\n    changes.push({\n      path: path.join(serviceDir, 'src', 'types', 'index.ts'),\n      type: 'create',\n      content: this.generateTypes(spec),\n    });\n\n    // Generate validation schemas\n    changes.push({\n      path: path.join(serviceDir, 'src', 'validation', 'schemas.ts'),\n      type: 'create',\n      content: this.generateValidationSchemas(spec),\n    });\n\n    // Generate package.json\n    changes.push({\n      path: path.join(serviceDir, 'package.json'),\n      type: 'create',\n      content: this.generatePackageJson(spec),\n    });\n\n    // Generate tsconfig.json\n    changes.push({\n      path: path.join(serviceDir, 'tsconfig.json'),\n      type: 'create',\n      content: this.generateTsConfig(),\n    });\n\n    // Generate .env.example\n    changes.push({\n      path: path.join(serviceDir, '.env.example'),\n      type: 'create',\n      content: this.generateEnvExample(spec),\n    });\n\n    // Generate README\n    changes.push({\n      path: path.join(serviceDir, 'README.md'),\n      type: 'create',\n      content: this.generateReadme(spec),\n    });\n\n    return changes;\n  }\n\n  /**\n   * Generate index.ts file\n   */\n  private generateIndexFile(spec: ServiceSpec): string {\n    const serviceName = this.toPascalCase(spec.name);\n    const port = spec.port || 3000;\n\n    return `import express, { Application } from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport { ${serviceName}Controller } from './controllers/${this.toKebabCase(spec.name)}.controller';\nimport { errorHandler } from './middleware/error-handler';\n${spec.authentication ? \"import { authMiddleware } from './middleware/auth';\" : ''}\n\nconst app: Application = express();\nconst PORT = process.env.PORT || ${port};\n\n// Middleware\napp.use(helmet());\napp.use(cors());\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\n\n// Health check\napp.get('/health', (req, res) => {\n  res.json({ status: 'healthy', service: '${spec.name}' });\n});\n\n// Routes\nconst controller = new ${serviceName}Controller();\napp.use('/api/${this.toKebabCase(spec.name)}', controller.router);\n\n// Error handling\napp.use(errorHandler);\n\n// Start server\napp.listen(PORT, () => {\n  console.log(\\`${spec.name} service running on port \\${PORT}\\`);\n});\n\nexport default app;\n`;\n  }\n\n  /**\n   * Generate controller file\n   */\n  private generateController(spec: ServiceSpec): string {\n    const serviceName = this.toPascalCase(spec.name);\n    const serviceVar = this.toCamelCase(spec.name);\n\n    return `import { Router, Request, Response, NextFunction } from 'express';\nimport { ${serviceName}Service } from '../services/${this.toKebabCase(spec.name)}.service';\nimport { validate } from '../middleware/validation';\nimport { ${serviceName}Schema } from '../validation/schemas';\n${spec.authentication ? \"import { authMiddleware } from '../middleware/auth';\" : ''}\n\nexport class ${serviceName}Controller {\n  public router: Router;\n  private ${serviceVar}Service: ${serviceName}Service;\n\n  constructor() {\n    this.router = Router();\n    this.${serviceVar}Service = new ${serviceName}Service();\n    this.initializeRoutes();\n  }\n\n  private initializeRoutes(): void {\n    // GET all\n    this.router.get('/', ${spec.authentication ? 'authMiddleware, ' : ''}this.getAll.bind(this));\n    \n    // GET by ID\n    this.router.get('/:id', ${spec.authentication ? 'authMiddleware, ' : ''}this.getById.bind(this));\n    \n    // POST create\n    this.router.post(\n      '/',\n      ${spec.authentication ? 'authMiddleware, ' : ''}validate(${serviceName}Schema.create),\n      this.create.bind(this)\n    );\n    \n    // PUT update\n    this.router.put(\n      '/:id',\n      ${spec.authentication ? 'authMiddleware, ' : ''}validate(${serviceName}Schema.update),\n      this.update.bind(this)\n    );\n    \n    // DELETE\n    this.router.delete('/:id', ${spec.authentication ? 'authMiddleware, ' : ''}this.delete.bind(this));\n  }\n\n  private async getAll(req: Request, res: Response, next: NextFunction): Promise<void> {\n    try {\n      const items = await this.${serviceVar}Service.findAll();\n      res.json({ success: true, data: items });\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  private async getById(req: Request, res: Response, next: NextFunction): Promise<void> {\n    try {\n      const { id } = req.params;\n      const item = await this.${serviceVar}Service.findById(id);\n      \n      if (!item) {\n        res.status(404).json({ success: false, error: 'Not found' });\n        return;\n      }\n      \n      res.json({ success: true, data: item });\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  private async create(req: Request, res: Response, next: NextFunction): Promise<void> {\n    try {\n      const item = await this.${serviceVar}Service.create(req.body);\n      res.status(201).json({ success: true, data: item });\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  private async update(req: Request, res: Response, next: NextFunction): Promise<void> {\n    try {\n      const { id } = req.params;\n      const item = await this.${serviceVar}Service.update(id, req.body);\n      \n      if (!item) {\n        res.status(404).json({ success: false, error: 'Not found' });\n        return;\n      }\n      \n      res.json({ success: true, data: item });\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  private async delete(req: Request, res: Response, next: NextFunction): Promise<void> {\n    try {\n      const { id } = req.params;\n      await this.${serviceVar}Service.delete(id);\n      res.status(204).send();\n    } catch (error) {\n      next(error);\n    }\n  }\n}\n`;\n  }\n\n  /**\n   * Generate service layer file\n   */\n  private generateServiceLayer(spec: ServiceSpec): string {\n    const serviceName = this.toPascalCase(spec.name);\n\n    return `${spec.database ? `import { ${serviceName}Repository } from '../repositories/${this.toKebabCase(spec.name)}.repository';` : ''}\nimport { ${serviceName}, Create${serviceName}Input, Update${serviceName}Input } from '../types';\n\nexport class ${serviceName}Service {\n  ${spec.database ? `private repository: ${serviceName}Repository;` : ''}\n\n  constructor() {\n    ${spec.database ? `this.repository = new ${serviceName}Repository();` : ''}\n  }\n\n  async findAll(): Promise<${serviceName}[]> {\n    ${spec.database ? `return this.repository.findAll();` : `// TODO: Implement findAll logic\\n    return [];`}\n  }\n\n  async findById(id: string): Promise<${serviceName} | null> {\n    ${spec.database ? `return this.repository.findById(id);` : `// TODO: Implement findById logic\\n    return null;`}\n  }\n\n  async create(data: Create${serviceName}Input): Promise<${serviceName}> {\n    // Add business logic here\n    ${spec.database ? `return this.repository.create(data);` : `// TODO: Implement create logic\\n    throw new Error('Not implemented');`}\n  }\n\n  async update(id: string, data: Update${serviceName}Input): Promise<${serviceName} | null> {\n    // Add business logic here\n    ${spec.database ? `return this.repository.update(id, data);` : `// TODO: Implement update logic\\n    return null;`}\n  }\n\n  async delete(id: string): Promise<void> {\n    ${spec.database ? `await this.repository.delete(id);` : `// TODO: Implement delete logic`}\n  }\n}\n`;\n  }\n\n  /**\n   * Generate repository file\n   */\n  private generateRepository(spec: ServiceSpec): string {\n    const serviceName = this.toPascalCase(spec.name);\n    const modelName = this.toCamelCase(spec.name);\n\n    return `import { PrismaClient } from '@prisma/client';\nimport { ${serviceName}, Create${serviceName}Input, Update${serviceName}Input } from '../types';\n\nconst prisma = new PrismaClient();\n\nexport class ${serviceName}Repository {\n  async findAll(): Promise<${serviceName}[]> {\n    return prisma.${modelName}.findMany();\n  }\n\n  async findById(id: string): Promise<${serviceName} | null> {\n    return prisma.${modelName}.findUnique({\n      where: { id },\n    });\n  }\n\n  async create(data: Create${serviceName}Input): Promise<${serviceName}> {\n    return prisma.${modelName}.create({\n      data,\n    });\n  }\n\n  async update(id: string, data: Update${serviceName}Input): Promise<${serviceName} | null> {\n    return prisma.${modelName}.update({\n      where: { id },\n      data,\n    });\n  }\n\n  async delete(id: string): Promise<void> {\n    await prisma.${modelName}.delete({\n      where: { id },\n    });\n  }\n}\n`;\n  }\n\n  /**\n   * Generate Prisma schema\n   */\n  private generatePrismaSchema(spec: ServiceSpec): string {\n    const modelName = this.toPascalCase(spec.name);\n\n    return `generator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider = \"postgresql\"\n  url      = env(\"DATABASE_URL\")\n}\n\nmodel ${modelName} {\n  id        String   @id @default(cuid())\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n  \n  // Add your fields here\n  name      String\n  \n  @@map(\"${this.toSnakeCase(spec.name)}\")\n}\n`;\n  }\n\n  /**\n   * Generate error handler middleware\n   */\n  private generateErrorHandler(): string {\n    return `import { Request, Response, NextFunction } from 'express';\n\nexport class AppError extends Error {\n  constructor(\n    public statusCode: number,\n    public message: string,\n    public isOperational = true\n  ) {\n    super(message);\n    Object.setPrototypeOf(this, AppError.prototype);\n  }\n}\n\nexport const errorHandler = (\n  err: Error | AppError,\n  req: Request,\n  res: Response,\n  next: NextFunction\n): void => {\n  if (err instanceof AppError) {\n    res.status(err.statusCode).json({\n      success: false,\n      error: err.message,\n    });\n    return;\n  }\n\n  // Log unexpected errors\n  console.error('Unexpected error:', err);\n\n  res.status(500).json({\n    success: false,\n    error: 'Internal server error',\n  });\n};\n`;\n  }\n\n  /**\n   * Generate auth middleware\n   */\n  private generateAuthMiddleware(): string {\n    return `import { Request, Response, NextFunction } from 'express';\nimport jwt from 'jsonwebtoken';\nimport { AppError } from './error-handler';\n\ninterface JWTPayload {\n  userId: string;\n  email: string;\n}\n\ndeclare global {\n  namespace Express {\n    interface Request {\n      user?: JWTPayload;\n    }\n  }\n}\n\nexport const authMiddleware = (\n  req: Request,\n  res: Response,\n  next: NextFunction\n): void => {\n  try {\n    const token = req.headers.authorization?.replace('Bearer ', '');\n\n    if (!token) {\n      throw new AppError(401, 'Authentication required');\n    }\n\n    const secret = process.env.JWT_SECRET || 'your-secret-key';\n    const decoded = jwt.verify(token, secret) as JWTPayload;\n\n    req.user = decoded;\n    next();\n  } catch (error) {\n    next(new AppError(401, 'Invalid or expired token'));\n  }\n};\n`;\n  }\n\n  /**\n   * Generate types file\n   */\n  private generateTypes(spec: ServiceSpec): string {\n    const serviceName = this.toPascalCase(spec.name);\n\n    return `export interface ${serviceName} {\n  id: string;\n  createdAt: Date;\n  updatedAt: Date;\n  name: string;\n  // Add more fields as needed\n}\n\nexport interface Create${serviceName}Input {\n  name: string;\n  // Add more fields as needed\n}\n\nexport interface Update${serviceName}Input {\n  name?: string;\n  // Add more fields as needed\n}\n`;\n  }\n\n  /**\n   * Generate validation schemas\n   */\n  private generateValidationSchemas(spec: ServiceSpec): string {\n    const serviceName = this.toPascalCase(spec.name);\n\n    return `import { z } from 'zod';\n\nexport const ${serviceName}Schema = {\n  create: z.object({\n    body: z.object({\n      name: z.string().min(1).max(255),\n      // Add more validation rules\n    }),\n  }),\n\n  update: z.object({\n    body: z.object({\n      name: z.string().min(1).max(255).optional(),\n      // Add more validation rules\n    }),\n    params: z.object({\n      id: z.string().cuid(),\n    }),\n  }),\n};\n`;\n  }\n\n  /**\n   * Generate package.json\n   */\n  private generatePackageJson(spec: ServiceSpec): string {\n    const serviceName = this.toKebabCase(spec.name);\n\n    return JSON.stringify({\n      name: serviceName,\n      version: '1.0.0',\n      description: `${spec.name} service`,\n      main: 'dist/index.js',\n      scripts: {\n        dev: 'ts-node-dev --respawn --transpile-only src/index.ts',\n        build: 'tsc',\n        start: 'node dist/index.js',\n        test: 'jest',\n        'test:watch': 'jest --watch',\n        lint: 'eslint src --ext .ts',\n        'lint:fix': 'eslint src --ext .ts --fix',\n      },\n      dependencies: {\n        express: '^4.18.2',\n        cors: '^2.8.5',\n        helmet: '^7.1.0',\n        zod: '^3.22.4',\n        ...(spec.database && {\n          '@prisma/client': '^5.7.1',\n        }),\n        ...(spec.authentication && {\n          jsonwebtoken: '^9.0.2',\n          '@types/jsonwebtoken': '^9.0.5',\n        }),\n      },\n      devDependencies: {\n        '@types/express': '^4.17.21',\n        '@types/cors': '^2.8.17',\n        '@types/node': '^20.10.5',\n        typescript: '^5.3.3',\n        'ts-node-dev': '^2.0.0',\n        jest: '^29.7.0',\n        '@types/jest': '^29.5.11',\n        'ts-jest': '^29.1.1',\n        eslint: '^8.56.0',\n        '@typescript-eslint/eslint-plugin': '^6.15.0',\n        '@typescript-eslint/parser': '^6.15.0',\n        ...(spec.database && {\n          prisma: '^5.7.1',\n        }),\n      },\n    }, null, 2);\n  }\n\n  /**\n   * Generate tsconfig.json\n   */\n  private generateTsConfig(): string {\n    return JSON.stringify({\n      compilerOptions: {\n        target: 'ES2020',\n        module: 'commonjs',\n        lib: ['ES2020'],\n        outDir: './dist',\n        rootDir: './src',\n        strict: true,\n        esModuleInterop: true,\n        skipLibCheck: true,\n        forceConsistentCasingInFileNames: true,\n        resolveJsonModule: true,\n        declaration: true,\n        declarationMap: true,\n        sourceMap: true,\n      },\n      include: ['src/**/*'],\n      exclude: ['node_modules', 'dist', '**/*.test.ts'],\n    }, null, 2);\n  }\n\n  /**\n   * Generate .env.example\n   */\n  private generateEnvExample(spec: ServiceSpec): string {\n    let env = `PORT=${spec.port || 3000}\\nNODE_ENV=development\\n`;\n\n    if (spec.database) {\n      env += '\\nDATABASE_URL=postgresql://user:password@localhost:5432/dbname\\n';\n    }\n\n    if (spec.authentication) {\n      env += '\\nJWT_SECRET=your-secret-key-here\\n';\n    }\n\n    return env;\n  }\n\n  /**\n   * Generate README.md\n   */\n  private generateReadme(spec: ServiceSpec): string {\n    const serviceName = spec.name;\n\n    return `# ${serviceName} Service\n\n## Description\n\n${serviceName} service generated by AzStudio.\n\n## Installation\n\n\\`\\`\\`bash\nnpm install\n\\`\\`\\`\n\n## Configuration\n\nCopy \\`.env.example\\` to \\`.env\\` and configure your environment variables.\n\n${spec.database ? `## Database Setup\n\n\\`\\`\\`bash\nnpx prisma migrate dev\nnpx prisma generate\n\\`\\`\\`\n` : ''}\n\n## Development\n\n\\`\\`\\`bash\nnpm run dev\n\\`\\`\\`\n\n## Build\n\n\\`\\`\\`bash\nnpm run build\n\\`\\`\\`\n\n## Production\n\n\\`\\`\\`bash\nnpm start\n\\`\\`\\`\n\n## Testing\n\n\\`\\`\\`bash\nnpm test\n\\`\\`\\`\n\n## API Endpoints\n\n- \\`GET /api/${this.toKebabCase(serviceName)}\\` - Get all items\n- \\`GET /api/${this.toKebabCase(serviceName)}/:id\\` - Get item by ID\n- \\`POST /api/${this.toKebabCase(serviceName)}\\` - Create new item\n- \\`PUT /api/${this.toKebabCase(serviceName)}/:id\\` - Update item\n- \\`DELETE /api/${this.toKebabCase(serviceName)}/:id\\` - Delete item\n\n## Health Check\n\n\\`GET /health\\` - Service health status\n`;\n  }\n\n  // Utility methods\n  private toKebabCase(str: string): string {\n    return str\n      .replace(/([a-z])([A-Z])/g, '$1-$2')\n      .replace(/[\\s_]+/g, '-')\n      .toLowerCase();\n  }\n\n  private toCamelCase(str: string): string {\n    return str\n      .replace(/[-_\\s]+(.)?/g, (_, c) => (c ? c.toUpperCase() : ''))\n      .replace(/^[A-Z]/, c => c.toLowerCase());\n  }\n\n  private toPascalCase(str: string): string {\n    const camel = this.toCamelCase(str);\n    return camel.charAt(0).toUpperCase() + camel.slice(1);\n  }\n\n  private toSnakeCase(str: string): string {\n    return str\n      .replace(/([a-z])([A-Z])/g, '$1_$2')\n      .replace(/[\\s-]+/g, '_')\n      .toLowerCase();\n  }\n}\n"],"mappings":"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K,IAAI,CAAC;AACtC;AACA,CAAC;EACC;;EAEA;AACF;AACA;EACUY,oBAAoBA,CAAA,EAAW;IACrC,OAAO;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;EACC;;EAEA;AACF;AACA;EACUE,sBAAsBA,CAAA,EAAW;IACvC,OAAO;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;EACC;;EAEA;AACF;AACA;EACUC,aAAaA,CAACpB,IAAiB,EAAU;IAC/C,MAAMG,WAAW,GAAG,IAAI,CAACuB,YAAY,CAAC1B,IAAI,CAACK,IAAI,CAAC;IAEhD,OAAO,oBAAoBF,WAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyBA,WAAW;AACpC;AACA;AACA;AACA;AACA,yBAAyBA,WAAW;AACpC;AACA;AACA;AACA,CAAC;EACC;;EAEA;AACF;AACA;EACUkB,yBAAyBA,CAACrB,IAAiB,EAAU;IAC3D,MAAMG,WAAW,GAAG,IAAI,CAACuB,YAAY,CAAC1B,IAAI,CAACK,IAAI,CAAC;IAEhD,OAAO;AACX;AACA,eAAeF,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;EACC;;EAEA;AACF;AACA;EACUmB,mBAAmBA,CAACtB,IAAiB,EAAU;IACrD,MAAMG,WAAW,GAAG,IAAI,CAACC,WAAW,CAACJ,IAAI,CAACK,IAAI,CAAC;IAE/C,OAAO2B,IAAI,CAACC,SAAS,CAAC;MACpB5B,IAAI,EAAEF,WAA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","ignoreList":[]}