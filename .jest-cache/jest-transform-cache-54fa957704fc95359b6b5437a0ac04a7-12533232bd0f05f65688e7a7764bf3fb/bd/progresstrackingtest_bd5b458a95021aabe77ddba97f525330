08d29efeec0cb6379fd9602001f59a54
"use strict";

var _factories = require("../../../tests/factories");
var _database = require("../../../tests/utils/database");
const prisma = (0, _database.getTestPrismaClient)();
describe('Education Service - Progress Tracking', () => {
  afterEach(async () => {
    await (0, _database.cleanupTestDatabase)();
  });
  it('should track enrollment progress', async () => {
    const student = await _factories.userFactory.createStudent();
    const instructor = await _factories.userFactory.createInstructor();
    const course = await _factories.courseFactory.create({
      instructorId: instructor.id
    });
    const enrollment = await _factories.enrollmentFactory.create({
      userId: student.id,
      courseId: course.id,
      progress: 25
    });
    const updated = await prisma.enrollment.update({
      where: {
        id: enrollment.id
      },
      data: {
        progress: 50
      }
    });
    expect(updated.progress).toBe(50);
  });
  it('should calculate completion percentage', async () => {
    const student = await _factories.userFactory.createStudent();
    const instructor = await _factories.userFactory.createInstructor();
    const course = await _factories.courseFactory.create({
      instructorId: instructor.id
    });
    const enrollment = await _factories.enrollmentFactory.create({
      userId: student.id,
      courseId: course.id,
      progress: 75
    });
    const completionPercentage = enrollment.progress;
    expect(completionPercentage).toBe(75);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZmFjdG9yaWVzIiwicmVxdWlyZSIsIl9kYXRhYmFzZSIsInByaXNtYSIsImdldFRlc3RQcmlzbWFDbGllbnQiLCJkZXNjcmliZSIsImFmdGVyRWFjaCIsImNsZWFudXBUZXN0RGF0YWJhc2UiLCJpdCIsInN0dWRlbnQiLCJ1c2VyRmFjdG9yeSIsImNyZWF0ZVN0dWRlbnQiLCJpbnN0cnVjdG9yIiwiY3JlYXRlSW5zdHJ1Y3RvciIsImNvdXJzZSIsImNvdXJzZUZhY3RvcnkiLCJjcmVhdGUiLCJpbnN0cnVjdG9ySWQiLCJpZCIsImVucm9sbG1lbnQiLCJlbnJvbGxtZW50RmFjdG9yeSIsInVzZXJJZCIsImNvdXJzZUlkIiwicHJvZ3Jlc3MiLCJ1cGRhdGVkIiwidXBkYXRlIiwid2hlcmUiLCJkYXRhIiwiZXhwZWN0IiwidG9CZSIsImNvbXBsZXRpb25QZXJjZW50YWdlIl0sInNvdXJjZXMiOlsicHJvZ3Jlc3MtdHJhY2tpbmcudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VyRmFjdG9yeSwgY291cnNlRmFjdG9yeSwgZW5yb2xsbWVudEZhY3RvcnkgfSBmcm9tICcuLi8uLi8uLi90ZXN0cy9mYWN0b3JpZXMnO1xuaW1wb3J0IHsgZ2V0VGVzdFByaXNtYUNsaWVudCwgY2xlYW51cFRlc3REYXRhYmFzZSB9IGZyb20gJy4uLy4uLy4uL3Rlc3RzL3V0aWxzL2RhdGFiYXNlJztcblxuY29uc3QgcHJpc21hID0gZ2V0VGVzdFByaXNtYUNsaWVudCgpO1xuXG5kZXNjcmliZSgnRWR1Y2F0aW9uIFNlcnZpY2UgLSBQcm9ncmVzcyBUcmFja2luZycsICgpID0+IHtcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBjbGVhbnVwVGVzdERhdGFiYXNlKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdHJhY2sgZW5yb2xsbWVudCBwcm9ncmVzcycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzdHVkZW50ID0gYXdhaXQgdXNlckZhY3RvcnkuY3JlYXRlU3R1ZGVudCgpO1xuICAgIGNvbnN0IGluc3RydWN0b3IgPSBhd2FpdCB1c2VyRmFjdG9yeS5jcmVhdGVJbnN0cnVjdG9yKCk7XG4gICAgY29uc3QgY291cnNlID0gYXdhaXQgY291cnNlRmFjdG9yeS5jcmVhdGUoeyBpbnN0cnVjdG9ySWQ6IGluc3RydWN0b3IuaWQgfSk7XG5cbiAgICBjb25zdCBlbnJvbGxtZW50ID0gYXdhaXQgZW5yb2xsbWVudEZhY3RvcnkuY3JlYXRlKHtcbiAgICAgIHVzZXJJZDogc3R1ZGVudC5pZCxcbiAgICAgIGNvdXJzZUlkOiBjb3Vyc2UuaWQsXG4gICAgICBwcm9ncmVzczogMjUsXG4gICAgfSk7XG5cbiAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgcHJpc21hLmVucm9sbG1lbnQudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBlbnJvbGxtZW50LmlkIH0sXG4gICAgICBkYXRhOiB7IHByb2dyZXNzOiA1MCB9LFxuICAgIH0pO1xuXG4gICAgZXhwZWN0KHVwZGF0ZWQucHJvZ3Jlc3MpLnRvQmUoNTApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBjb21wbGV0aW9uIHBlcmNlbnRhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc3R1ZGVudCA9IGF3YWl0IHVzZXJGYWN0b3J5LmNyZWF0ZVN0dWRlbnQoKTtcbiAgICBjb25zdCBpbnN0cnVjdG9yID0gYXdhaXQgdXNlckZhY3RvcnkuY3JlYXRlSW5zdHJ1Y3RvcigpO1xuICAgIGNvbnN0IGNvdXJzZSA9IGF3YWl0IGNvdXJzZUZhY3RvcnkuY3JlYXRlKHsgaW5zdHJ1Y3RvcklkOiBpbnN0cnVjdG9yLmlkIH0pO1xuXG4gICAgY29uc3QgZW5yb2xsbWVudCA9IGF3YWl0IGVucm9sbG1lbnRGYWN0b3J5LmNyZWF0ZSh7XG4gICAgICB1c2VySWQ6IHN0dWRlbnQuaWQsXG4gICAgICBjb3Vyc2VJZDogY291cnNlLmlkLFxuICAgICAgcHJvZ3Jlc3M6IDc1LFxuICAgIH0pO1xuXG4gICAgY29uc3QgY29tcGxldGlvblBlcmNlbnRhZ2UgPSBlbnJvbGxtZW50LnByb2dyZXNzO1xuICAgIGV4cGVjdChjb21wbGV0aW9uUGVyY2VudGFnZSkudG9CZSg3NSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUQsT0FBQTtBQUVBLE1BQU1FLE1BQU0sR0FBRyxJQUFBQyw2QkFBbUIsRUFBQyxDQUFDO0FBRXBDQyxRQUFRLENBQUMsdUNBQXVDLEVBQUUsTUFBTTtFQUN0REMsU0FBUyxDQUFDLFlBQVk7SUFDcEIsTUFBTSxJQUFBQyw2QkFBbUIsRUFBQyxDQUFDO0VBQzdCLENBQUMsQ0FBQztFQUVGQyxFQUFFLENBQUMsa0NBQWtDLEVBQUUsWUFBWTtJQUNqRCxNQUFNQyxPQUFPLEdBQUcsTUFBTUMsc0JBQVcsQ0FBQ0MsYUFBYSxDQUFDLENBQUM7SUFDakQsTUFBTUMsVUFBVSxHQUFHLE1BQU1GLHNCQUFXLENBQUNHLGdCQUFnQixDQUFDLENBQUM7SUFDdkQsTUFBTUMsTUFBTSxHQUFHLE1BQU1DLHdCQUFhLENBQUNDLE1BQU0sQ0FBQztNQUFFQyxZQUFZLEVBQUVMLFVBQVUsQ0FBQ007SUFBRyxDQUFDLENBQUM7SUFFMUUsTUFBTUMsVUFBVSxHQUFHLE1BQU1DLDRCQUFpQixDQUFDSixNQUFNLENBQUM7TUFDaERLLE1BQU0sRUFBRVosT0FBTyxDQUFDUyxFQUFFO01BQ2xCSSxRQUFRLEVBQUVSLE1BQU0sQ0FBQ0ksRUFBRTtNQUNuQkssUUFBUSxFQUFFO0lBQ1osQ0FBQyxDQUFDO0lBRUYsTUFBTUMsT0FBTyxHQUFHLE1BQU1yQixNQUFNLENBQUNnQixVQUFVLENBQUNNLE1BQU0sQ0FBQztNQUM3Q0MsS0FBSyxFQUFFO1FBQUVSLEVBQUUsRUFBRUMsVUFBVSxDQUFDRDtNQUFHLENBQUM7TUFDNUJTLElBQUksRUFBRTtRQUFFSixRQUFRLEVBQUU7TUFBRztJQUN2QixDQUFDLENBQUM7SUFFRkssTUFBTSxDQUFDSixPQUFPLENBQUNELFFBQVEsQ0FBQyxDQUFDTSxJQUFJLENBQUMsRUFBRSxDQUFDO0VBQ25DLENBQUMsQ0FBQztFQUVGckIsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLFlBQVk7SUFDdkQsTUFBTUMsT0FBTyxHQUFHLE1BQU1DLHNCQUFXLENBQUNDLGFBQWEsQ0FBQyxDQUFDO0lBQ2pELE1BQU1DLFVBQVUsR0FBRyxNQUFNRixzQkFBVyxDQUFDRyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3ZELE1BQU1DLE1BQU0sR0FBRyxNQUFNQyx3QkFBYSxDQUFDQyxNQUFNLENBQUM7TUFBRUMsWUFBWSxFQUFFTCxVQUFVLENBQUNNO0lBQUcsQ0FBQyxDQUFDO0lBRTFFLE1BQU1DLFVBQVUsR0FBRyxNQUFNQyw0QkFBaUIsQ0FBQ0osTUFBTSxDQUFDO01BQ2hESyxNQUFNLEVBQUVaLE9BQU8sQ0FBQ1MsRUFBRTtNQUNsQkksUUFBUSxFQUFFUixNQUFNLENBQUNJLEVBQUU7TUFDbkJLLFFBQVEsRUFBRTtJQUNaLENBQUMsQ0FBQztJQUVGLE1BQU1PLG9CQUFvQixHQUFHWCxVQUFVLENBQUNJLFFBQVE7SUFDaERLLE1BQU0sQ0FBQ0Usb0JBQW9CLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQztFQUN2QyxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=