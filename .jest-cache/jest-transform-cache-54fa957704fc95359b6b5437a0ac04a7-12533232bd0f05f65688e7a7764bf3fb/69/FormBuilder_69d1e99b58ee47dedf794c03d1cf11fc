550341ce00543977fc78d599259e9f31
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FormBuilder = void 0;
var path = _interopRequireWildcard(require("path"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
class FormBuilder {
  /**
   * Generate a complete form component with React Hook Form and validation
   */
  generateForm(spec, outputDir) {
    const changes = [];
    const componentPath = path.join(outputDir, 'components', 'forms', `${this.toKebabCase(spec.name)}.tsx`);
    changes.push({
      path: componentPath,
      type: 'create',
      content: this.generateFormComponent(spec)
    });

    // Generate Zod schema if not provided
    if (!spec.zodSchema) {
      const schemaPath = path.join(outputDir, 'schemas', `${this.toKebabCase(spec.name)}-schema.ts`);
      changes.push({
        path: schemaPath,
        type: 'create',
        content: this.generateZodSchema(spec)
      });
    }
    return changes;
  }

  /**
   * Generate form component with React Hook Form
   */
  generateFormComponent(spec) {
    const componentName = this.toPascalCase(spec.name);
    const schemaName = `${this.toCamelCase(spec.name)}Schema`;
    const hasSubmitEndpoint = !!spec.submitEndpoint;
    return `'use client';

import React from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
${hasSubmitEndpoint ? "import { useMutation } from '@tanstack/react-query';" : ''}
${hasSubmitEndpoint ? "import { useRouter } from 'next/navigation';" : ''}
import { ${schemaName}, type ${this.toPascalCase(spec.name)}FormData } from '@/schemas/${this.toKebabCase(spec.name)}-schema';

interface ${componentName}Props {
  defaultValues?: Partial<${this.toPascalCase(spec.name)}FormData>;
  onSubmit?: (data: ${this.toPascalCase(spec.name)}FormData) => void | Promise<void>;
}

export default function ${componentName}({ defaultValues, onSubmit }: ${componentName}Props) {
  ${hasSubmitEndpoint ? 'const router = useRouter();' : ''}
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    reset,
  } = useForm<${this.toPascalCase(spec.name)}FormData>({
    resolver: zodResolver(${schemaName}),
    defaultValues,
  });

  ${hasSubmitEndpoint ? this.generateMutationHook(spec) : ''}

  const onSubmitHandler = async (data: ${this.toPascalCase(spec.name)}FormData) => {
    try {
      ${hasSubmitEndpoint ? `
      await mutation.mutateAsync(data);
      ${spec.onSuccessRedirect ? `router.push('${spec.onSuccessRedirect}');` : ''}
      reset();
      ` : `
      if (onSubmit) {
        await onSubmit(data);
      }
      `}
    } catch (error) {
      console.error('Form submission error:', error);
    }
  };

  return (
    <form onSubmit={handleSubmit(onSubmitHandler)} className="space-y-6 max-w-2xl">
      ${this.generateFormFields(spec.fields)}

      <div className="flex items-center justify-between pt-4">
        <button
          type="button"
          onClick={() => reset()}
          className="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
        >
          Reset
        </button>
        <button
          type="submit"
          disabled={isSubmitting${hasSubmitEndpoint ? ' || mutation.isPending' : ''}}
          className="px-6 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {isSubmitting${hasSubmitEndpoint ? ' || mutation.isPending' : ''} ? 'Submitting...' : 'Submit'}
        </button>
      </div>

      ${hasSubmitEndpoint ? `
      {mutation.isError && (
        <div className="rounded-md bg-red-50 p-4">
          <p className="text-sm text-red-800">
            Error: {mutation.error instanceof Error ? mutation.error.message : 'An error occurred'}
          </p>
        </div>
      )}

      {mutation.isSuccess && (
        <div className="rounded-md bg-green-50 p-4">
          <p className="text-sm text-green-800">Form submitted successfully!</p>
        </div>
      )}
      ` : ''}
    </form>
  );
}
`;
  }

  /**
   * Generate mutation hook for form submission
   */
  generateMutationHook(spec) {
    if (!spec.submitEndpoint) return '';
    return `
  const mutation = useMutation({
    mutationFn: async (data: ${this.toPascalCase(spec.name)}FormData) => {
      const response = await fetch('${spec.submitEndpoint}', {
        method: '${spec.submitMethod || 'POST'}',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
      });

      if (!response.ok) {
        throw new Error(\`HTTP error! status: \${response.status}\`);
      }

      return response.json();
    },
  });
`;
  }

  /**
   * Generate form fields JSX
   */
  generateFormFields(fields) {
    return fields.map(field => this.generateFormField(field)).join('\n\n      ');
  }

  /**
   * Generate a single form field
   */
  generateFormField(field) {
    switch (field.type) {
      case 'textarea':
        return this.generateTextareaField(field);
      case 'select':
        return this.generateSelectField(field);
      case 'checkbox':
        return this.generateCheckboxField(field);
      case 'radio':
        return this.generateRadioField(field);
      default:
        return this.generateInputField(field);
    }
  }

  /**
   * Generate standard input field
   */
  generateInputField(field) {
    return `<div>
        <label htmlFor="${field.name}" className="block text-sm font-medium text-gray-700 mb-1">
          ${field.label}${field.required ? ' *' : ''}
        </label>
        <input
          id="${field.name}"
          type="${field.type}"
          {...register('${field.name}')}
          placeholder="${field.placeholder || ''}"
          className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        />
        {errors.${field.name} && (
          <p className="mt-1 text-sm text-red-600">{errors.${field.name}?.message}</p>
        )}
      </div>`;
  }

  /**
   * Generate textarea field
   */
  generateTextareaField(field) {
    return `<div>
        <label htmlFor="${field.name}" className="block text-sm font-medium text-gray-700 mb-1">
          ${field.label}${field.required ? ' *' : ''}
        </label>
        <textarea
          id="${field.name}"
          {...register('${field.name}')}
          placeholder="${field.placeholder || ''}"
          rows={4}
          className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        />
        {errors.${field.name} && (
          <p className="mt-1 text-sm text-red-600">{errors.${field.name}?.message}</p>
        )}
      </div>`;
  }

  /**
   * Generate select field
   */
  generateSelectField(field) {
    const options = field.options || [];
    return `<div>
        <label htmlFor="${field.name}" className="block text-sm font-medium text-gray-700 mb-1">
          ${field.label}${field.required ? ' *' : ''}
        </label>
        <select
          id="${field.name}"
          {...register('${field.name}')}
          className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        >
          <option value="">Select an option</option>
          ${options.map(opt => `<option value="${opt.value}">${opt.label}</option>`).join('\n          ')}
        </select>
        {errors.${field.name} && (
          <p className="mt-1 text-sm text-red-600">{errors.${field.name}?.message}</p>
        )}
      </div>`;
  }

  /**
   * Generate checkbox field
   */
  generateCheckboxField(field) {
    return `<div className="flex items-center">
        <input
          id="${field.name}"
          type="checkbox"
          {...register('${field.name}')}
          className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
        />
        <label htmlFor="${field.name}" className="ml-2 block text-sm text-gray-900">
          ${field.label}${field.required ? ' *' : ''}
        </label>
        {errors.${field.name} && (
          <p className="ml-6 text-sm text-red-600">{errors.${field.name}?.message}</p>
        )}
      </div>`;
  }

  /**
   * Generate radio field group
   */
  generateRadioField(field) {
    const options = field.options || [];
    return `<div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ${field.label}${field.required ? ' *' : ''}
        </label>
        <div className="space-y-2">
          ${options.map(opt => `
          <div className="flex items-center">
            <input
              id="${field.name}-${opt.value}"
              type="radio"
              value="${opt.value}"
              {...register('${field.name}')}
              className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"
            />
            <label htmlFor="${field.name}-${opt.value}" className="ml-2 block text-sm text-gray-900">
              ${opt.label}
            </label>
          </div>`).join('\n          ')}
        </div>
        {errors.${field.name} && (
          <p className="mt-1 text-sm text-red-600">{errors.${field.name}?.message}</p>
        )}
      </div>`;
  }

  /**
   * Generate Zod validation schema
   */
  generateZodSchema(spec) {
    const schemaName = `${this.toCamelCase(spec.name)}Schema`;
    const typeName = `${this.toPascalCase(spec.name)}FormData`;
    return `import { z } from 'zod';

export const ${schemaName} = z.object({
${spec.fields.map(field => this.generateZodFieldValidation(field)).join(',\n')}
});

export type ${typeName} = z.infer<typeof ${schemaName}>;
`;
  }

  /**
   * Generate Zod validation for a single field
   */
  generateZodFieldValidation(field) {
    let validation = this.getBaseZodType(field);

    // Add validation rules
    if (field.validation) {
      const v = field.validation;
      if (field.type === 'text' || field.type === 'textarea' || field.type === 'email' || field.type === 'password' || field.type === 'tel' || field.type === 'url') {
        if (v.minLength !== undefined) {
          validation += `.min(${v.minLength}, { message: '${field.label} must be at least ${v.minLength} characters' })`;
        }
        if (v.maxLength !== undefined) {
          validation += `.max(${v.maxLength}, { message: '${field.label} must be at most ${v.maxLength} characters' })`;
        }
        if (v.pattern) {
          validation += `.regex(/${v.pattern}/, { message: '${field.label} format is invalid' })`;
        }
      }
      if (field.type === 'number') {
        if (v.min !== undefined) {
          validation += `.min(${v.min}, { message: '${field.label} must be at least ${v.min}' })`;
        }
        if (v.max !== undefined) {
          validation += `.max(${v.max}, { message: '${field.label} must be at most ${v.max}' })`;
        }
      }
    }

    // Make optional if not required
    if (!field.required) {
      validation += '.optional()';
    }
    return `  ${field.name}: ${validation}`;
  }

  /**
   * Get base Zod type for field
   */
  getBaseZodType(field) {
    switch (field.type) {
      case 'email':
        return "z.string().email({ message: 'Invalid email address' })";
      case 'url':
        return "z.string().url({ message: 'Invalid URL' })";
      case 'number':
        return 'z.number({ required_error: `${field.label} is required` })';
      case 'date':
        return 'z.string().datetime()';
      case 'checkbox':
        return 'z.boolean()';
      case 'select':
      case 'radio':
        if (field.options && field.options.length > 0) {
          const values = field.options.map(o => `'${o.value}'`).join(', ');
          return `z.enum([${values}])`;
        }
        return "z.string()";
      default:
        return `z.string({ required_error: '${field.label} is required' })`;
    }
  }

  /**
   * Convert string to PascalCase
   */
  toPascalCase(str) {
    return str.replace(/[-_\s]+(.)?/g, (_, c) => c ? c.toUpperCase() : '').replace(/^[a-z]/, c => c.toUpperCase());
  }

  /**
   * Convert string to camelCase
   */
  toCamelCase(str) {
    const pascal = this.toPascalCase(str);
    return pascal.charAt(0).toLowerCase() + pascal.slice(1);
  }

  /**
   * Convert string to kebab-case
   */
  toKebabCase(str) {
    return str.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[\s_]+/g, '-').toLowerCase();
  }
}
exports.FormBuilder = FormBuilder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXRoIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiRm9ybUJ1aWxkZXIiLCJnZW5lcmF0ZUZvcm0iLCJzcGVjIiwib3V0cHV0RGlyIiwiY2hhbmdlcyIsImNvbXBvbmVudFBhdGgiLCJqb2luIiwidG9LZWJhYkNhc2UiLCJuYW1lIiwicHVzaCIsInR5cGUiLCJjb250ZW50IiwiZ2VuZXJhdGVGb3JtQ29tcG9uZW50Iiwiem9kU2NoZW1hIiwic2NoZW1hUGF0aCIsImdlbmVyYXRlWm9kU2NoZW1hIiwiY29tcG9uZW50TmFtZSIsInRvUGFzY2FsQ2FzZSIsInNjaGVtYU5hbWUiLCJ0b0NhbWVsQ2FzZSIsImhhc1N1Ym1pdEVuZHBvaW50Iiwic3VibWl0RW5kcG9pbnQiLCJnZW5lcmF0ZU11dGF0aW9uSG9vayIsIm9uU3VjY2Vzc1JlZGlyZWN0IiwiZ2VuZXJhdGVGb3JtRmllbGRzIiwiZmllbGRzIiwic3VibWl0TWV0aG9kIiwibWFwIiwiZmllbGQiLCJnZW5lcmF0ZUZvcm1GaWVsZCIsImdlbmVyYXRlVGV4dGFyZWFGaWVsZCIsImdlbmVyYXRlU2VsZWN0RmllbGQiLCJnZW5lcmF0ZUNoZWNrYm94RmllbGQiLCJnZW5lcmF0ZVJhZGlvRmllbGQiLCJnZW5lcmF0ZUlucHV0RmllbGQiLCJsYWJlbCIsInJlcXVpcmVkIiwicGxhY2Vob2xkZXIiLCJvcHRpb25zIiwib3B0IiwidmFsdWUiLCJ0eXBlTmFtZSIsImdlbmVyYXRlWm9kRmllbGRWYWxpZGF0aW9uIiwidmFsaWRhdGlvbiIsImdldEJhc2Vab2RUeXBlIiwidiIsIm1pbkxlbmd0aCIsInVuZGVmaW5lZCIsIm1heExlbmd0aCIsInBhdHRlcm4iLCJtaW4iLCJtYXgiLCJsZW5ndGgiLCJ2YWx1ZXMiLCJzdHIiLCJyZXBsYWNlIiwiXyIsImMiLCJ0b1VwcGVyQ2FzZSIsInBhc2NhbCIsImNoYXJBdCIsInRvTG93ZXJDYXNlIiwic2xpY2UiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiRm9ybUJ1aWxkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmlsZUNoYW5nZSB9IGZyb20gJy4vQ2hhbmdlc2V0TWFuYWdlcic7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZvcm1GaWVsZCB7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogJ3RleHQnIHwgJ2VtYWlsJyB8ICdwYXNzd29yZCcgfCAnbnVtYmVyJyB8ICd0ZWwnIHwgJ3VybCcgfCAnZGF0ZScgfCAndGV4dGFyZWEnIHwgJ3NlbGVjdCcgfCAnY2hlY2tib3gnIHwgJ3JhZGlvJztcbiAgbGFiZWw6IHN0cmluZztcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgdmFsaWRhdGlvbj86IEZpZWxkVmFsaWRhdGlvbjtcbiAgb3B0aW9ucz86IEFycmF5PHsgbGFiZWw6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB8IG51bWJlciB9PjsgLy8gRm9yIHNlbGVjdC9yYWRpb1xuICBkZWZhdWx0VmFsdWU/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmllbGRWYWxpZGF0aW9uIHtcbiAgbWluPzogbnVtYmVyO1xuICBtYXg/OiBudW1iZXI7XG4gIG1pbkxlbmd0aD86IG51bWJlcjtcbiAgbWF4TGVuZ3RoPzogbnVtYmVyO1xuICBwYXR0ZXJuPzogc3RyaW5nO1xuICBjdXN0b20/OiBzdHJpbmc7IC8vIEN1c3RvbSB2YWxpZGF0aW9uIGZ1bmN0aW9uXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRm9ybVNwZWMge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGZpZWxkczogRm9ybUZpZWxkW107XG4gIHN1Ym1pdEVuZHBvaW50Pzogc3RyaW5nO1xuICBzdWJtaXRNZXRob2Q/OiAnUE9TVCcgfCAnUFVUJyB8ICdQQVRDSCc7XG4gIG9uU3VjY2Vzc1JlZGlyZWN0Pzogc3RyaW5nO1xuICB6b2RTY2hlbWE/OiBzdHJpbmc7IC8vIEJhY2tlbmQgWm9kIHNjaGVtYSB0byBzeW5jIHdpdGhcbn1cblxuZXhwb3J0IGNsYXNzIEZvcm1CdWlsZGVyIHtcbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgY29tcGxldGUgZm9ybSBjb21wb25lbnQgd2l0aCBSZWFjdCBIb29rIEZvcm0gYW5kIHZhbGlkYXRpb25cbiAgICovXG4gIGdlbmVyYXRlRm9ybShzcGVjOiBGb3JtU3BlYywgb3V0cHV0RGlyOiBzdHJpbmcpOiBGaWxlQ2hhbmdlW10ge1xuICAgIGNvbnN0IGNoYW5nZXM6IEZpbGVDaGFuZ2VbXSA9IFtdO1xuICAgIGNvbnN0IGNvbXBvbmVudFBhdGggPSBwYXRoLmpvaW4ob3V0cHV0RGlyLCAnY29tcG9uZW50cycsICdmb3JtcycsIGAke3RoaXMudG9LZWJhYkNhc2Uoc3BlYy5uYW1lKX0udHN4YCk7XG4gICAgXG4gICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgIHBhdGg6IGNvbXBvbmVudFBhdGgsXG4gICAgICB0eXBlOiAnY3JlYXRlJyxcbiAgICAgIGNvbnRlbnQ6IHRoaXMuZ2VuZXJhdGVGb3JtQ29tcG9uZW50KHNwZWMpLFxuICAgIH0pO1xuXG4gICAgLy8gR2VuZXJhdGUgWm9kIHNjaGVtYSBpZiBub3QgcHJvdmlkZWRcbiAgICBpZiAoIXNwZWMuem9kU2NoZW1hKSB7XG4gICAgICBjb25zdCBzY2hlbWFQYXRoID0gcGF0aC5qb2luKG91dHB1dERpciwgJ3NjaGVtYXMnLCBgJHt0aGlzLnRvS2ViYWJDYXNlKHNwZWMubmFtZSl9LXNjaGVtYS50c2ApO1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgcGF0aDogc2NoZW1hUGF0aCxcbiAgICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICAgIGNvbnRlbnQ6IHRoaXMuZ2VuZXJhdGVab2RTY2hlbWEoc3BlYyksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbmdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBmb3JtIGNvbXBvbmVudCB3aXRoIFJlYWN0IEhvb2sgRm9ybVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUZvcm1Db21wb25lbnQoc3BlYzogRm9ybVNwZWMpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSB0aGlzLnRvUGFzY2FsQ2FzZShzcGVjLm5hbWUpO1xuICAgIGNvbnN0IHNjaGVtYU5hbWUgPSBgJHt0aGlzLnRvQ2FtZWxDYXNlKHNwZWMubmFtZSl9U2NoZW1hYDtcbiAgICBjb25zdCBoYXNTdWJtaXRFbmRwb2ludCA9ICEhc3BlYy5zdWJtaXRFbmRwb2ludDtcbiAgICBcbiAgICByZXR1cm4gYCd1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUZvcm0gfSBmcm9tICdyZWFjdC1ob29rLWZvcm0nO1xuaW1wb3J0IHsgem9kUmVzb2x2ZXIgfSBmcm9tICdAaG9va2Zvcm0vcmVzb2x2ZXJzL3pvZCc7XG4ke2hhc1N1Ym1pdEVuZHBvaW50ID8gXCJpbXBvcnQgeyB1c2VNdXRhdGlvbiB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XCIgOiAnJ31cbiR7aGFzU3VibWl0RW5kcG9pbnQgPyBcImltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XCIgOiAnJ31cbmltcG9ydCB7ICR7c2NoZW1hTmFtZX0sIHR5cGUgJHt0aGlzLnRvUGFzY2FsQ2FzZShzcGVjLm5hbWUpfUZvcm1EYXRhIH0gZnJvbSAnQC9zY2hlbWFzLyR7dGhpcy50b0tlYmFiQ2FzZShzcGVjLm5hbWUpfS1zY2hlbWEnO1xuXG5pbnRlcmZhY2UgJHtjb21wb25lbnROYW1lfVByb3BzIHtcbiAgZGVmYXVsdFZhbHVlcz86IFBhcnRpYWw8JHt0aGlzLnRvUGFzY2FsQ2FzZShzcGVjLm5hbWUpfUZvcm1EYXRhPjtcbiAgb25TdWJtaXQ/OiAoZGF0YTogJHt0aGlzLnRvUGFzY2FsQ2FzZShzcGVjLm5hbWUpfUZvcm1EYXRhKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gJHtjb21wb25lbnROYW1lfSh7IGRlZmF1bHRWYWx1ZXMsIG9uU3VibWl0IH06ICR7Y29tcG9uZW50TmFtZX1Qcm9wcykge1xuICAke2hhc1N1Ym1pdEVuZHBvaW50ID8gJ2NvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpOycgOiAnJ31cbiAgY29uc3Qge1xuICAgIHJlZ2lzdGVyLFxuICAgIGhhbmRsZVN1Ym1pdCxcbiAgICBmb3JtU3RhdGU6IHsgZXJyb3JzLCBpc1N1Ym1pdHRpbmcgfSxcbiAgICByZXNldCxcbiAgfSA9IHVzZUZvcm08JHt0aGlzLnRvUGFzY2FsQ2FzZShzcGVjLm5hbWUpfUZvcm1EYXRhPih7XG4gICAgcmVzb2x2ZXI6IHpvZFJlc29sdmVyKCR7c2NoZW1hTmFtZX0pLFxuICAgIGRlZmF1bHRWYWx1ZXMsXG4gIH0pO1xuXG4gICR7aGFzU3VibWl0RW5kcG9pbnQgPyB0aGlzLmdlbmVyYXRlTXV0YXRpb25Ib29rKHNwZWMpIDogJyd9XG5cbiAgY29uc3Qgb25TdWJtaXRIYW5kbGVyID0gYXN5bmMgKGRhdGE6ICR7dGhpcy50b1Bhc2NhbENhc2Uoc3BlYy5uYW1lKX1Gb3JtRGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAke2hhc1N1Ym1pdEVuZHBvaW50ID8gYFxuICAgICAgYXdhaXQgbXV0YXRpb24ubXV0YXRlQXN5bmMoZGF0YSk7XG4gICAgICAke3NwZWMub25TdWNjZXNzUmVkaXJlY3QgPyBgcm91dGVyLnB1c2goJyR7c3BlYy5vblN1Y2Nlc3NSZWRpcmVjdH0nKTtgIDogJyd9XG4gICAgICByZXNldCgpO1xuICAgICAgYCA6IGBcbiAgICAgIGlmIChvblN1Ym1pdCkge1xuICAgICAgICBhd2FpdCBvblN1Ym1pdChkYXRhKTtcbiAgICAgIH1cbiAgICAgIGB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Zvcm0gc3VibWlzc2lvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdChvblN1Ym1pdEhhbmRsZXIpfSBjbGFzc05hbWU9XCJzcGFjZS15LTYgbWF4LXctMnhsXCI+XG4gICAgICAke3RoaXMuZ2VuZXJhdGVGb3JtRmllbGRzKHNwZWMuZmllbGRzKX1cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHQtNFwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gcmVzZXQoKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBob3ZlcjpiZy1ncmF5LTUwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1vZmZzZXQtMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgPlxuICAgICAgICAgIFJlc2V0XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgZGlzYWJsZWQ9e2lzU3VibWl0dGluZyR7aGFzU3VibWl0RW5kcG9pbnQgPyAnIHx8IG11dGF0aW9uLmlzUGVuZGluZycgOiAnJ319XG4gICAgICAgICAgY2xhc3NOYW1lPVwicHgtNiBweS0yIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC13aGl0ZSBiZy1ibHVlLTYwMCBib3JkZXIgYm9yZGVyLXRyYW5zcGFyZW50IHJvdW5kZWQtbWQgaG92ZXI6YmctYmx1ZS03MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctYmx1ZS01MDAgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWRcIlxuICAgICAgICA+XG4gICAgICAgICAge2lzU3VibWl0dGluZyR7aGFzU3VibWl0RW5kcG9pbnQgPyAnIHx8IG11dGF0aW9uLmlzUGVuZGluZycgOiAnJ30gPyAnU3VibWl0dGluZy4uLicgOiAnU3VibWl0J31cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cblxuICAgICAgJHtoYXNTdWJtaXRFbmRwb2ludCA/IGBcbiAgICAgIHttdXRhdGlvbi5pc0Vycm9yICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3VuZGVkLW1kIGJnLXJlZC01MCBwLTRcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTgwMFwiPlxuICAgICAgICAgICAgRXJyb3I6IHttdXRhdGlvbi5lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gbXV0YXRpb24uZXJyb3IubWVzc2FnZSA6ICdBbiBlcnJvciBvY2N1cnJlZCd9XG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHttdXRhdGlvbi5pc1N1Y2Nlc3MgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbWQgYmctZ3JlZW4tNTAgcC00XCI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyZWVuLTgwMFwiPkZvcm0gc3VibWl0dGVkIHN1Y2Nlc3NmdWxseSE8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIGAgOiAnJ31cbiAgICA8L2Zvcm0+XG4gICk7XG59XG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG11dGF0aW9uIGhvb2sgZm9yIGZvcm0gc3VibWlzc2lvblxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZU11dGF0aW9uSG9vayhzcGVjOiBGb3JtU3BlYyk6IHN0cmluZyB7XG4gICAgaWYgKCFzcGVjLnN1Ym1pdEVuZHBvaW50KSByZXR1cm4gJyc7XG4gICAgXG4gICAgcmV0dXJuIGBcbiAgY29uc3QgbXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKGRhdGE6ICR7dGhpcy50b1Bhc2NhbENhc2Uoc3BlYy5uYW1lKX1Gb3JtRGF0YSkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnJHtzcGVjLnN1Ym1pdEVuZHBvaW50fScsIHtcbiAgICAgICAgbWV0aG9kOiAnJHtzcGVjLnN1Ym1pdE1ldGhvZCB8fCAnUE9TVCd9JyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxcYEhUVFAgZXJyb3IhIHN0YXR1czogXFwke3Jlc3BvbnNlLnN0YXR1c31cXGApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gIH0pO1xuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBmb3JtIGZpZWxkcyBKU1hcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVGb3JtRmllbGRzKGZpZWxkczogRm9ybUZpZWxkW10pOiBzdHJpbmcge1xuICAgIHJldHVybiBmaWVsZHMubWFwKGZpZWxkID0+IHRoaXMuZ2VuZXJhdGVGb3JtRmllbGQoZmllbGQpKS5qb2luKCdcXG5cXG4gICAgICAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHNpbmdsZSBmb3JtIGZpZWxkXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlRm9ybUZpZWxkKGZpZWxkOiBGb3JtRmllbGQpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVRleHRhcmVhRmllbGQoZmllbGQpO1xuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVTZWxlY3RGaWVsZChmaWVsZCk7XG4gICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlQ2hlY2tib3hGaWVsZChmaWVsZCk7XG4gICAgICBjYXNlICdyYWRpbyc6XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlUmFkaW9GaWVsZChmaWVsZCk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUlucHV0RmllbGQoZmllbGQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzdGFuZGFyZCBpbnB1dCBmaWVsZFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlucHV0RmllbGQoZmllbGQ6IEZvcm1GaWVsZCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGA8ZGl2PlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIiR7ZmllbGQubmFtZX1cIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPlxuICAgICAgICAgICR7ZmllbGQubGFiZWx9JHtmaWVsZC5yZXF1aXJlZCA/ICcgKicgOiAnJ31cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgaWQ9XCIke2ZpZWxkLm5hbWV9XCJcbiAgICAgICAgICB0eXBlPVwiJHtmaWVsZC50eXBlfVwiXG4gICAgICAgICAgey4uLnJlZ2lzdGVyKCcke2ZpZWxkLm5hbWV9Jyl9XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCIke2ZpZWxkLnBsYWNlaG9sZGVyIHx8ICcnfVwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDBcIlxuICAgICAgICAvPlxuICAgICAgICB7ZXJyb3JzLiR7ZmllbGQubmFtZX0gJiYgKFxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTEgdGV4dC1zbSB0ZXh0LXJlZC02MDBcIj57ZXJyb3JzLiR7ZmllbGQubmFtZX0/Lm1lc3NhZ2V9PC9wPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSB0ZXh0YXJlYSBmaWVsZFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVRleHRhcmVhRmllbGQoZmllbGQ6IEZvcm1GaWVsZCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGA8ZGl2PlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIiR7ZmllbGQubmFtZX1cIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPlxuICAgICAgICAgICR7ZmllbGQubGFiZWx9JHtmaWVsZC5yZXF1aXJlZCA/ICcgKicgOiAnJ31cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgaWQ9XCIke2ZpZWxkLm5hbWV9XCJcbiAgICAgICAgICB7Li4ucmVnaXN0ZXIoJyR7ZmllbGQubmFtZX0nKX1cbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIiR7ZmllbGQucGxhY2Vob2xkZXIgfHwgJyd9XCJcbiAgICAgICAgICByb3dzPXs0fVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHNoYWRvdy1zbSBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwXCJcbiAgICAgICAgLz5cbiAgICAgICAge2Vycm9ycy4ke2ZpZWxkLm5hbWV9ICYmIChcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0xIHRleHQtc20gdGV4dC1yZWQtNjAwXCI+e2Vycm9ycy4ke2ZpZWxkLm5hbWV9Py5tZXNzYWdlfTwvcD5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PmA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgc2VsZWN0IGZpZWxkXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlU2VsZWN0RmllbGQoZmllbGQ6IEZvcm1GaWVsZCk6IHN0cmluZyB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGZpZWxkLm9wdGlvbnMgfHwgW107XG4gICAgcmV0dXJuIGA8ZGl2PlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIiR7ZmllbGQubmFtZX1cIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPlxuICAgICAgICAgICR7ZmllbGQubGFiZWx9JHtmaWVsZC5yZXF1aXJlZCA/ICcgKicgOiAnJ31cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPHNlbGVjdFxuICAgICAgICAgIGlkPVwiJHtmaWVsZC5uYW1lfVwiXG4gICAgICAgICAgey4uLnJlZ2lzdGVyKCcke2ZpZWxkLm5hbWV9Jyl9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDBcIlxuICAgICAgICA+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPlNlbGVjdCBhbiBvcHRpb248L29wdGlvbj5cbiAgICAgICAgICAke29wdGlvbnMubWFwKG9wdCA9PiBgPG9wdGlvbiB2YWx1ZT1cIiR7b3B0LnZhbHVlfVwiPiR7b3B0LmxhYmVsfTwvb3B0aW9uPmApLmpvaW4oJ1xcbiAgICAgICAgICAnKX1cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIHtlcnJvcnMuJHtmaWVsZC5uYW1lfSAmJiAoXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXNtIHRleHQtcmVkLTYwMFwiPntlcnJvcnMuJHtmaWVsZC5uYW1lfT8ubWVzc2FnZX08L3A+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNoZWNrYm94IGZpZWxkXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ2hlY2tib3hGaWVsZChmaWVsZDogRm9ybUZpZWxkKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgaWQ9XCIke2ZpZWxkLm5hbWV9XCJcbiAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgIHsuLi5yZWdpc3RlcignJHtmaWVsZC5uYW1lfScpfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImgtNCB3LTQgdGV4dC1ibHVlLTYwMCBmb2N1czpyaW5nLWJsdWUtNTAwIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkXCJcbiAgICAgICAgLz5cbiAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCIke2ZpZWxkLm5hbWV9XCIgY2xhc3NOYW1lPVwibWwtMiBibG9jayB0ZXh0LXNtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAke2ZpZWxkLmxhYmVsfSR7ZmllbGQucmVxdWlyZWQgPyAnIConIDogJyd9XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIHtlcnJvcnMuJHtmaWVsZC5uYW1lfSAmJiAoXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWwtNiB0ZXh0LXNtIHRleHQtcmVkLTYwMFwiPntlcnJvcnMuJHtmaWVsZC5uYW1lfT8ubWVzc2FnZX08L3A+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHJhZGlvIGZpZWxkIGdyb3VwXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlUmFkaW9GaWVsZChmaWVsZDogRm9ybUZpZWxkKTogc3RyaW5nIHtcbiAgICBjb25zdCBvcHRpb25zID0gZmllbGQub3B0aW9ucyB8fCBbXTtcbiAgICByZXR1cm4gYDxkaXY+XG4gICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMlwiPlxuICAgICAgICAgICR7ZmllbGQubGFiZWx9JHtmaWVsZC5yZXF1aXJlZCA/ICcgKicgOiAnJ31cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAke29wdGlvbnMubWFwKG9wdCA9PiBgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGlkPVwiJHtmaWVsZC5uYW1lfS0ke29wdC52YWx1ZX1cIlxuICAgICAgICAgICAgICB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICB2YWx1ZT1cIiR7b3B0LnZhbHVlfVwiXG4gICAgICAgICAgICAgIHsuLi5yZWdpc3RlcignJHtmaWVsZC5uYW1lfScpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtYmx1ZS02MDAgZm9jdXM6cmluZy1ibHVlLTUwMCBib3JkZXItZ3JheS0zMDBcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiJHtmaWVsZC5uYW1lfS0ke29wdC52YWx1ZX1cIiBjbGFzc05hbWU9XCJtbC0yIGJsb2NrIHRleHQtc20gdGV4dC1ncmF5LTkwMFwiPlxuICAgICAgICAgICAgICAke29wdC5sYWJlbH1cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPC9kaXY+YCkuam9pbignXFxuICAgICAgICAgICcpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2Vycm9ycy4ke2ZpZWxkLm5hbWV9ICYmIChcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0xIHRleHQtc20gdGV4dC1yZWQtNjAwXCI+e2Vycm9ycy4ke2ZpZWxkLm5hbWV9Py5tZXNzYWdlfTwvcD5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PmA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgWm9kIHZhbGlkYXRpb24gc2NoZW1hXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlWm9kU2NoZW1hKHNwZWM6IEZvcm1TcGVjKTogc3RyaW5nIHtcbiAgICBjb25zdCBzY2hlbWFOYW1lID0gYCR7dGhpcy50b0NhbWVsQ2FzZShzcGVjLm5hbWUpfVNjaGVtYWA7XG4gICAgY29uc3QgdHlwZU5hbWUgPSBgJHt0aGlzLnRvUGFzY2FsQ2FzZShzcGVjLm5hbWUpfUZvcm1EYXRhYDtcbiAgICBcbiAgICByZXR1cm4gYGltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5leHBvcnQgY29uc3QgJHtzY2hlbWFOYW1lfSA9IHoub2JqZWN0KHtcbiR7c3BlYy5maWVsZHMubWFwKGZpZWxkID0+IHRoaXMuZ2VuZXJhdGVab2RGaWVsZFZhbGlkYXRpb24oZmllbGQpKS5qb2luKCcsXFxuJyl9XG59KTtcblxuZXhwb3J0IHR5cGUgJHt0eXBlTmFtZX0gPSB6LmluZmVyPHR5cGVvZiAke3NjaGVtYU5hbWV9PjtcbmA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgWm9kIHZhbGlkYXRpb24gZm9yIGEgc2luZ2xlIGZpZWxkXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlWm9kRmllbGRWYWxpZGF0aW9uKGZpZWxkOiBGb3JtRmllbGQpOiBzdHJpbmcge1xuICAgIGxldCB2YWxpZGF0aW9uID0gdGhpcy5nZXRCYXNlWm9kVHlwZShmaWVsZCk7XG4gICAgXG4gICAgLy8gQWRkIHZhbGlkYXRpb24gcnVsZXNcbiAgICBpZiAoZmllbGQudmFsaWRhdGlvbikge1xuICAgICAgY29uc3QgdiA9IGZpZWxkLnZhbGlkYXRpb247XG4gICAgICBcbiAgICAgIGlmIChmaWVsZC50eXBlID09PSAndGV4dCcgfHwgZmllbGQudHlwZSA9PT0gJ3RleHRhcmVhJyB8fCBmaWVsZC50eXBlID09PSAnZW1haWwnIHx8IGZpZWxkLnR5cGUgPT09ICdwYXNzd29yZCcgfHwgZmllbGQudHlwZSA9PT0gJ3RlbCcgfHwgZmllbGQudHlwZSA9PT0gJ3VybCcpIHtcbiAgICAgICAgaWYgKHYubWluTGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2YWxpZGF0aW9uICs9IGAubWluKCR7di5taW5MZW5ndGh9LCB7IG1lc3NhZ2U6ICcke2ZpZWxkLmxhYmVsfSBtdXN0IGJlIGF0IGxlYXN0ICR7di5taW5MZW5ndGh9IGNoYXJhY3RlcnMnIH0pYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodi5tYXhMZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhbGlkYXRpb24gKz0gYC5tYXgoJHt2Lm1heExlbmd0aH0sIHsgbWVzc2FnZTogJyR7ZmllbGQubGFiZWx9IG11c3QgYmUgYXQgbW9zdCAke3YubWF4TGVuZ3RofSBjaGFyYWN0ZXJzJyB9KWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYucGF0dGVybikge1xuICAgICAgICAgIHZhbGlkYXRpb24gKz0gYC5yZWdleCgvJHt2LnBhdHRlcm59LywgeyBtZXNzYWdlOiAnJHtmaWVsZC5sYWJlbH0gZm9ybWF0IGlzIGludmFsaWQnIH0pYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKHYubWluICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2YWxpZGF0aW9uICs9IGAubWluKCR7di5taW59LCB7IG1lc3NhZ2U6ICcke2ZpZWxkLmxhYmVsfSBtdXN0IGJlIGF0IGxlYXN0ICR7di5taW59JyB9KWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2YWxpZGF0aW9uICs9IGAubWF4KCR7di5tYXh9LCB7IG1lc3NhZ2U6ICcke2ZpZWxkLmxhYmVsfSBtdXN0IGJlIGF0IG1vc3QgJHt2Lm1heH0nIH0pYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBNYWtlIG9wdGlvbmFsIGlmIG5vdCByZXF1aXJlZFxuICAgIGlmICghZmllbGQucmVxdWlyZWQpIHtcbiAgICAgIHZhbGlkYXRpb24gKz0gJy5vcHRpb25hbCgpJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGAgICR7ZmllbGQubmFtZX06ICR7dmFsaWRhdGlvbn1gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBiYXNlIFpvZCB0eXBlIGZvciBmaWVsZFxuICAgKi9cbiAgcHJpdmF0ZSBnZXRCYXNlWm9kVHlwZShmaWVsZDogRm9ybUZpZWxkKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgcmV0dXJuIFwiei5zdHJpbmcoKS5lbWFpbCh7IG1lc3NhZ2U6ICdJbnZhbGlkIGVtYWlsIGFkZHJlc3MnIH0pXCI7XG4gICAgICBjYXNlICd1cmwnOlxuICAgICAgICByZXR1cm4gXCJ6LnN0cmluZygpLnVybCh7IG1lc3NhZ2U6ICdJbnZhbGlkIFVSTCcgfSlcIjtcbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgIHJldHVybiAnei5udW1iZXIoeyByZXF1aXJlZF9lcnJvcjogYCR7ZmllbGQubGFiZWx9IGlzIHJlcXVpcmVkYCB9KSc7XG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgcmV0dXJuICd6LnN0cmluZygpLmRhdGV0aW1lKCknO1xuICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICByZXR1cm4gJ3ouYm9vbGVhbigpJztcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICBjYXNlICdyYWRpbyc6XG4gICAgICAgIGlmIChmaWVsZC5vcHRpb25zICYmIGZpZWxkLm9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGZpZWxkLm9wdGlvbnMubWFwKG8gPT4gYCcke28udmFsdWV9J2ApLmpvaW4oJywgJyk7XG4gICAgICAgICAgcmV0dXJuIGB6LmVudW0oWyR7dmFsdWVzfV0pYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJ6LnN0cmluZygpXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYHouc3RyaW5nKHsgcmVxdWlyZWRfZXJyb3I6ICcke2ZpZWxkLmxhYmVsfSBpcyByZXF1aXJlZCcgfSlgO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHN0cmluZyB0byBQYXNjYWxDYXNlXG4gICAqL1xuICBwcml2YXRlIHRvUGFzY2FsQ2FzZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLV9cXHNdKyguKT8vZywgKF8sIGMpID0+IGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJylcbiAgICAgIC5yZXBsYWNlKC9eW2Etel0vLCBjID0+IGMudG9VcHBlckNhc2UoKSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBzdHJpbmcgdG8gY2FtZWxDYXNlXG4gICAqL1xuICBwcml2YXRlIHRvQ2FtZWxDYXNlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXNjYWwgPSB0aGlzLnRvUGFzY2FsQ2FzZShzdHIpO1xuICAgIHJldHVybiBwYXNjYWwuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBwYXNjYWwuc2xpY2UoMSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBzdHJpbmcgdG8ga2ViYWItY2FzZVxuICAgKi9cbiAgcHJpdmF0ZSB0b0tlYmFiQ2FzZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0clxuICAgICAgLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csICckMS0kMicpXG4gICAgICAucmVwbGFjZSgvW1xcc19dKy9nLCAnLScpXG4gICAgICAudG9Mb3dlckNhc2UoKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxJQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFBNkIsU0FBQUQsd0JBQUFFLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFKLHVCQUFBLFlBQUFBLENBQUFFLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEsSUFBQUEsQ0FBQSxDQUFBSyxVQUFBLFNBQUFMLENBQUEsTUFBQU0sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBQyxPQUFBLEVBQUFWLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVEsQ0FBQSxNQUFBRixDQUFBLEdBQUFMLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFHLENBQUEsQ0FBQUssR0FBQSxDQUFBWCxDQUFBLFVBQUFNLENBQUEsQ0FBQU0sR0FBQSxDQUFBWixDQUFBLEdBQUFNLENBQUEsQ0FBQU8sR0FBQSxDQUFBYixDQUFBLEVBQUFRLENBQUEsZ0JBQUFQLENBQUEsSUFBQUQsQ0FBQSxnQkFBQUMsQ0FBQSxPQUFBYSxjQUFBLENBQUFDLElBQUEsQ0FBQWYsQ0FBQSxFQUFBQyxDQUFBLE9BQUFNLENBQUEsSUFBQUQsQ0FBQSxH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