{"version":3,"names":["request","require","app","describe","it","response","get","expect","body","status","toBe","service","success","Array","isArray","data","count","toBeGreaterThanOrEqual","id","error","projectData","title","description","leadResearcher","post","send","projectId","beforeAll","updateData","put","publicationData","abstract","authors"],"sources":["research-center.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst app = require('../index');\r\n\r\ndescribe('Research Center Service', () => {\r\n  // Health check test\r\n  describe('GET /health', () => {\r\n    it('should return health status', async () => {\r\n      const response = await request(app)\r\n        .get('/health')\r\n        .expect(200);\r\n      \r\n      expect(response.body.status).toBe('healthy');\r\n      expect(response.body.service).toBe('research-center-service');\r\n    });\r\n  });\r\n\r\n  // Get all research projects test\r\n  describe('GET /api/research-projects', () => {\r\n    it('should return all research projects', async () => {\r\n      const response = await request(app)\r\n        .get('/api/research-projects')\r\n        .expect(200);\r\n      \r\n      expect(response.body.success).toBe(true);\r\n      expect(Array.isArray(response.body.data)).toBe(true);\r\n      expect(response.body.count).toBeGreaterThanOrEqual(0);\r\n    });\r\n  });\r\n\r\n  // Get specific research project test\r\n  describe('GET /api/research-projects/:projectId', () => {\r\n    it('should return specific research project', async () => {\r\n      const response = await request(app)\r\n        .get('/api/research-projects/project_1')\r\n        .expect(200);\r\n      \r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data.id).toBe('project_1');\r\n    });\r\n\r\n    it('should return 404 for non-existent project', async () => {\r\n      const response = await request(app)\r\n        .get('/api/research-projects/non-existent')\r\n        .expect(404);\r\n      \r\n      expect(response.body.error).toBe('Research project not found');\r\n    });\r\n  });\r\n\r\n  // Create a new research project test\r\n  describe('POST /api/research-projects', () => {\r\n    it('should create a new research project', async () => {\r\n      const projectData = {\r\n        title: 'New Research Project',\r\n        description: 'A new research project for testing',\r\n        leadResearcher: 'Dr. Test Researcher',\r\n        status: 'active'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/research-projects')\r\n        .send(projectData)\r\n        .expect(201);\r\n      \r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data.title).toBe('New Research Project');\r\n      expect(response.body.data.description).toBe('A new research project for testing');\r\n      expect(response.body.data.leadResearcher).toBe('Dr. Test Researcher');\r\n    });\r\n\r\n    it('should return 400 for missing required fields', async () => {\r\n      const projectData = {\r\n        title: 'New Research Project'\r\n        // Missing description and leadResearcher\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/research-projects')\r\n        .send(projectData)\r\n        .expect(400);\r\n      \r\n      expect(response.body.error).toBe('Title, description, and lead researcher are required');\r\n    });\r\n  });\r\n\r\n  // Update research project test\r\n  describe('PUT /api/research-projects/:projectId', () => {\r\n    let projectId;\r\n\r\n    beforeAll(async () => {\r\n      // Create a project first\r\n      const projectData = {\r\n        title: 'Test Research Project',\r\n        description: 'Test research project for updating',\r\n        leadResearcher: 'Dr. Test Researcher'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/research-projects')\r\n        .send(projectData);\r\n\r\n      projectId = response.body.data.id;\r\n    });\r\n\r\n    it('should update research project', async () => {\r\n      const updateData = {\r\n        title: 'Updated Research Project',\r\n        status: 'completed'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .put(`/api/research-projects/${projectId}`)\r\n        .send(updateData)\r\n        .expect(200);\r\n      \r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data.title).toBe('Updated Research Project');\r\n      expect(response.body.data.status).toBe('completed');\r\n    });\r\n\r\n    it('should return 404 for non-existent project', async () => {\r\n      const updateData = {\r\n        title: 'Updated Research Project'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .put('/api/research-projects/non-existent')\r\n        .send(updateData)\r\n        .expect(404);\r\n      \r\n      expect(response.body.error).toBe('Research project not found');\r\n    });\r\n  });\r\n\r\n  // Get all publications test\r\n  describe('GET /api/publications', () => {\r\n    it('should return all publications', async () => {\r\n      const response = await request(app)\r\n        .get('/api/publications')\r\n        .expect(200);\r\n      \r\n      expect(response.body.success).toBe(true);\r\n      expect(Array.isArray(response.body.data)).toBe(true);\r\n      expect(response.body.count).toBeGreaterThanOrEqual(0);\r\n    });\r\n  });\r\n\r\n  // Get publications for a specific project test\r\n  describe('GET /api/research-projects/:projectId/publications', () => {\r\n    it('should return publications for a specific project', async () => {\r\n      const response = await request(app)\r\n        .get('/api/research-projects/project_1/publications')\r\n        .expect(200);\r\n      \r\n      expect(response.body.success).toBe(true);\r\n      expect(Array.isArray(response.body.data)).toBe(true);\r\n    });\r\n  });\r\n\r\n  // Create a new publication test\r\n  describe('POST /api/publications', () => {\r\n    it('should create a new publication', async () => {\r\n      const publicationData = {\r\n        title: 'New Research Publication',\r\n        abstract: 'Abstract of the new research publication',\r\n        projectId: 'project_1',\r\n        authors: ['Dr. Test Researcher', 'Dr. Another Researcher']\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/publications')\r\n        .send(publicationData)\r\n        .expect(201);\r\n      \r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data.title).toBe('New Research Publication');\r\n      expect(response.body.data.abstract).toBe('Abstract of the new research publication');\r\n      expect(response.body.data.projectId).toBe('project_1');\r\n    });\r\n\r\n    it('should return 400 for missing required fields', async () => {\r\n      const publicationData = {\r\n        title: 'New Research Publication'\r\n        // Missing abstract and projectId\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/publications')\r\n        .send(publicationData)\r\n        .expect(400);\r\n      \r\n      expect(response.body.error).toBe('Title, abstract, and project ID are required');\r\n    });\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}