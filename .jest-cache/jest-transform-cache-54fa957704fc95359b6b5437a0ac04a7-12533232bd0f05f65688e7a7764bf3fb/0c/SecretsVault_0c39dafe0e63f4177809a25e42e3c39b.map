{"version":3,"names":["crypto","_interopRequireWildcard","require","fs","path","_electron","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","SecretsVault","ALGORITHM","KEY_LENGTH","IV_LENGTH","AUTH_TAG_LENGTH","VAULT_VERSION","masterKey","projectVaultPath","auditLog","constructor","projectPath","globalVaultPath","join","app","getPath","initialize","loadOrGenerateMasterKey","ensureVaultFile","setSecret","key","value","scope","metadata","Error","vaultPath","encrypted","encrypt","vaultData","loadVaultData","secrets","saveVaultData","logAccess","getSecret","decrypted","decrypt","deleteSecret","listSecrets","keys","data","iv","randomBytes","cipher","createCipheriv","update","final","authTag","getAuthTag","toString","encryptedData","Buffer","from","decipher","createDecipheriv","setAuthTag","getAuditLog","clearAuditLog","operation","push","timestamp","Date","keyPath","keyData","readFile","error","writeFile","mode","access","dir","dirname","mkdir","recursive","emptyVault","version","JSON","stringify","parse","exports"],"sources":["SecretsVault.ts"],"sourcesContent":["import * as crypto from 'crypto';\nimport * as fs from 'fs/promises';\nimport * as path from 'path';\nimport { app } from 'electron';\n\n/**\n * Secret entry stored in the vault\n */\nexport interface Secret {\n  key: string;\n  value: string;\n  scope: 'global' | 'project';\n  createdAt: Date;\n  updatedAt: Date;\n  metadata?: Record<string, any>;\n}\n\n/**\n * Encrypted secret data structure\n */\nexport interface EncryptedSecret {\n  iv: string;\n  encryptedData: string;\n  authTag: string;\n}\n\n/**\n * Vault storage structure\n */\ninterface VaultData {\n  version: string;\n  secrets: Record<string, EncryptedSecret>;\n}\n\n/**\n * SecretsVault provides secure storage for sensitive data like API keys,\n * database credentials, and service tokens using AES-256-GCM encryption.\n * \n * Features:\n * - OS keychain integration for master key storage\n * - Project and global scope support\n * - Encrypted storage with AES-256-GCM\n * - Audit logging of all operations\n */\nexport class SecretsVault {\n  private static readonly ALGORITHM = 'aes-256-gcm';\n  private static readonly KEY_LENGTH = 32; // 256 bits\n  private static readonly IV_LENGTH = 16; // 128 bits\n  private static readonly AUTH_TAG_LENGTH = 16; // 128 bits\n  private static readonly VAULT_VERSION = '1.0.0';\n\n  private masterKey: Buffer | null = null;\n  private globalVaultPath: string;\n  private projectVaultPath: string | null = null;\n  private auditLog: Array<{ timestamp: Date; operation: string; key: string; scope: string }> = [];\n\n  constructor(projectPath?: string) {\n    // Global vault in user data directory\n    this.globalVaultPath = path.join(app.getPath('userData'), 'secrets-vault.json');\n    \n    // Project-specific vault if project path provided\n    if (projectPath) {\n      this.projectVaultPath = path.join(projectPath, '.azstudio', 'secrets-vault.json');\n    }\n  }\n\n  /**\n   * Initialize the vault and generate/load master key\n   */\n  async initialize(): Promise<void> {\n    // Generate or load master key\n    await this.loadOrGenerateMasterKey();\n\n    // Ensure vault files exist\n    await this.ensureVaultFile(this.globalVaultPath);\n    if (this.projectVaultPath) {\n      await this.ensureVaultFile(this.projectVaultPath);\n    }\n  }\n\n  /**\n   * Set a secret in the vault\n   */\n  async setSecret(key: string, value: string, scope: 'global' | 'project' = 'global', metadata?: Record<string, any>): Promise<void> {\n    if (!this.masterKey) {\n      throw new Error('Vault not initialized. Call initialize() first.');\n    }\n\n    if (scope === 'project' && !this.projectVaultPath) {\n      throw new Error('Project vault not available. Provide projectPath in constructor.');\n    }\n\n    const vaultPath = scope === 'global' ? this.globalVaultPath : this.projectVaultPath!;\n    \n    // Encrypt the secret\n    const encrypted = this.encrypt(value);\n    \n    // Load existing vault data\n    const vaultData = await this.loadVaultData(vaultPath);\n    \n    // Store encrypted secret\n    vaultData.secrets[key] = encrypted;\n    \n    // Save vault data\n    await this.saveVaultData(vaultPath, vaultData);\n    \n    // Log the operation\n    this.logAccess(key, 'write', scope);\n  }\n\n  /**\n   * Get a secret from the vault\n   */\n  async getSecret(key: string, scope: 'global' | 'project' = 'global'): Promise<string | null> {\n    if (!this.masterKey) {\n      throw new Error('Vault not initialized. Call initialize() first.');\n    }\n\n    if (scope === 'project' && !this.projectVaultPath) {\n      throw new Error('Project vault not available. Provide projectPath in constructor.');\n    }\n\n    const vaultPath = scope === 'global' ? this.globalVaultPath : this.projectVaultPath!;\n    \n    // Load vault data\n    const vaultData = await this.loadVaultData(vaultPath);\n    \n    // Get encrypted secret\n    const encrypted = vaultData.secrets[key];\n    if (!encrypted) {\n      return null;\n    }\n    \n    // Decrypt and return\n    const decrypted = this.decrypt(encrypted);\n    \n    // Log the operation\n    this.logAccess(key, 'read', scope);\n    \n    return decrypted;\n  }\n\n  /**\n   * Delete a secret from the vault\n   */\n  async deleteSecret(key: string, scope: 'global' | 'project' = 'global'): Promise<boolean> {\n    if (!this.masterKey) {\n      throw new Error('Vault not initialized. Call initialize() first.');\n    }\n\n    if (scope === 'project' && !this.projectVaultPath) {\n      throw new Error('Project vault not available. Provide projectPath in constructor.');\n    }\n\n    const vaultPath = scope === 'global' ? this.globalVaultPath : this.projectVaultPath!;\n    \n    // Load vault data\n    const vaultData = await this.loadVaultData(vaultPath);\n    \n    // Check if secret exists\n    if (!vaultData.secrets[key]) {\n      return false;\n    }\n    \n    // Delete secret\n    delete vaultData.secrets[key];\n    \n    // Save vault data\n    await this.saveVaultData(vaultPath, vaultData);\n    \n    // Log the operation\n    this.logAccess(key, 'delete', scope);\n    \n    return true;\n  }\n\n  /**\n   * List all secret keys in a scope\n   */\n  async listSecrets(scope: 'global' | 'project' = 'global'): Promise<string[]> {\n    if (!this.masterKey) {\n      throw new Error('Vault not initialized. Call initialize() first.');\n    }\n\n    if (scope === 'project' && !this.projectVaultPath) {\n      return [];\n    }\n\n    const vaultPath = scope === 'global' ? this.globalVaultPath : this.projectVaultPath!;\n    \n    // Load vault data\n    const vaultData = await this.loadVaultData(vaultPath);\n    \n    return Object.keys(vaultData.secrets);\n  }\n\n  /**\n   * Encrypt data using AES-256-GCM\n   */\n  encrypt(data: string): EncryptedSecret {\n    if (!this.masterKey) {\n      throw new Error('Master key not available');\n    }\n\n    // Generate random IV\n    const iv = crypto.randomBytes(SecretsVault.IV_LENGTH);\n    \n    // Create cipher\n    const cipher = crypto.createCipheriv(SecretsVault.ALGORITHM, this.masterKey, iv);\n    \n    // Encrypt data\n    let encrypted = cipher.update(data, 'utf8', 'hex');\n    encrypted += cipher.final('hex');\n    \n    // Get auth tag\n    const authTag = cipher.getAuthTag();\n    \n    return {\n      iv: iv.toString('hex'),\n      encryptedData: encrypted,\n      authTag: authTag.toString('hex'),\n    };\n  }\n\n  /**\n   * Decrypt data using AES-256-GCM\n   */\n  decrypt(encrypted: EncryptedSecret): string {\n    if (!this.masterKey) {\n      throw new Error('Master key not available');\n    }\n\n    // Convert hex strings to buffers\n    const iv = Buffer.from(encrypted.iv, 'hex');\n    const authTag = Buffer.from(encrypted.authTag, 'hex');\n    \n    // Create decipher\n    const decipher = crypto.createDecipheriv(SecretsVault.ALGORITHM, this.masterKey, iv);\n    decipher.setAuthTag(authTag);\n    \n    // Decrypt data\n    let decrypted = decipher.update(encrypted.encryptedData, 'hex', 'utf8');\n    decrypted += decipher.final('utf8');\n    \n    return decrypted;\n  }\n\n  /**\n   * Get audit log entries\n   */\n  getAuditLog(): Array<{ timestamp: Date; operation: string; key: string; scope: string }> {\n    return [...this.auditLog];\n  }\n\n  /**\n   * Clear audit log\n   */\n  clearAuditLog(): void {\n    this.auditLog = [];\n  }\n\n  /**\n   * Log access to secrets\n   */\n  private logAccess(key: string, operation: 'read' | 'write' | 'delete', scope: string): void {\n    this.auditLog.push({\n      timestamp: new Date(),\n      operation,\n      key,\n      scope,\n    });\n  }\n\n  /**\n   * Load or generate master encryption key\n   */\n  private async loadOrGenerateMasterKey(): Promise<void> {\n    const keyPath = path.join(app.getPath('userData'), '.master-key');\n    \n    try {\n      // Try to load existing key\n      const keyData = await fs.readFile(keyPath);\n      this.masterKey = keyData;\n    } catch (error) {\n      // Generate new key if not found\n      this.masterKey = crypto.randomBytes(SecretsVault.KEY_LENGTH);\n      \n      // Save key with restricted permissions\n      await fs.writeFile(keyPath, this.masterKey, { mode: 0o600 });\n    }\n  }\n\n  /**\n   * Ensure vault file exists\n   */\n  private async ensureVaultFile(vaultPath: string): Promise<void> {\n    try {\n      await fs.access(vaultPath);\n    } catch {\n      // Create directory if needed\n      const dir = path.dirname(vaultPath);\n      await fs.mkdir(dir, { recursive: true });\n      \n      // Create empty vault\n      const emptyVault: VaultData = {\n        version: SecretsVault.VAULT_VERSION,\n        secrets: {},\n      };\n      \n      await fs.writeFile(vaultPath, JSON.stringify(emptyVault, null, 2), { mode: 0o600 });\n    }\n  }\n\n  /**\n   * Load vault data from file\n   */\n  private async loadVaultData(vaultPath: string): Promise<VaultData> {\n    try {\n      const data = await fs.readFile(vaultPath, 'utf-8');\n      return JSON.parse(data);\n    } catch (error) {\n      // Return empty vault if file doesn't exist or is corrupted\n      return {\n        version: SecretsVault.VAULT_VERSION,\n        secrets: {},\n      };\n    }\n  }\n\n  /**\n   * Save vault data to file\n   */\n  private async saveVaultData(vaultPath: string, data: VaultData): Promise<void> {\n    await fs.writeFile(vaultPath, JSON.stringify(data, null, 2), { mode: 0o600 });\n  }\n}\n"],"mappings":"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","ignoreList":[]}