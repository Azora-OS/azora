6cc73ea637e920a6680054968cc556e9
"use strict";

/**
 * Enhanced Update Server for AzStudio
 * 
 * Features:
 * - Staged rollout support (alpha/beta/stable channels)
 * - Delta updates for efficient downloads
 * - Rollback capability
 * - Analytics and monitoring
 * - Rate limiting and security
 */

const express = require('express');
const path = require('path');
const fs = require('fs');
const cors = require('cors');
const crypto = require('crypto');
const app = express();
const PORT = process.env.PORT || 3001;
const RELEASE_DIR = path.join(__dirname, '..', 'release');
const CONFIG_DIR = path.join(__dirname, '..', 'release', 'config');
const ANALYTICS_DIR = path.join(__dirname, '..', 'release', 'analytics');

// Ensure directories exist
[CONFIG_DIR, ANALYTICS_DIR].forEach(dir => {
  if (!fs.existsSync(dir)) {
    fs.mkdirSync(dir, {
      recursive: true
    });
  }
});

// Enable CORS for update checks
app.use(cors());
app.use(express.json());

// Serve static files from release directory
app.use(express.static(RELEASE_DIR));

// Analytics tracking
const analytics = {
  updateChecks: new Map(),
  downloads: new Map(),
  installations: new Map(),
  rollbacks: new Map()
};

// Load rollout configuration
function loadRolloutConfig(channel) {
  const configPath = path.join(CONFIG_DIR, `${channel}-rollout.json`);
  if (fs.existsSync(configPath)) {
    try {
      return JSON.parse(fs.readFileSync(configPath, 'utf-8'));
    } catch (error) {
      console.error(`Failed to load rollout config for ${channel}:`, error);
    }
  }

  // Default: 100% rollout
  return {
    version: null,
    percentage: 100,
    startDate: new Date().toISOString(),
    endDate: null
  };
}

// Save rollout configuration
function saveRolloutConfig(channel, config) {
  const configPath = path.join(CONFIG_DIR, `${channel}-rollout.json`);
  try {
    fs.writeFileSync(configPath, JSON.stringify(config, null, 2));
    return true;
  } catch (error) {
    console.error(`Failed to save rollout config for ${channel}:`, error);
    return false;
  }
}

// Check if client should receive update based on staged rollout
function shouldReceiveUpdate(channel, clientId) {
  const config = loadRolloutConfig(channel);
  if (config.percentage >= 100) {
    return true;
  }

  // Use consistent hashing to determine if client is in rollout group
  const hash = crypto.createHash('sha256').update(clientId + config.version).digest('hex');
  const hashValue = parseInt(hash.substring(0, 8), 16);
  const percentage = hashValue % 100 + 1;
  return percentage <= config.percentage;
}

// Track analytics event
function trackEvent(category, action, label, value = 1) {
  const key = `${category}:${action}:${label}`;
  const map = analytics[category] || new Map();
  map.set(key, (map.get(key) || 0) + value);
  analytics[category] = map;

  // Persist analytics periodically
  if (Math.random() < 0.1) {
    // 10% chance to save
    saveAnalytics();
  }
}

// Save analytics to disk
function saveAnalytics() {
  const timestamp = new Date().toISOString().split('T')[0];
  const analyticsPath = path.join(ANALYTICS_DIR, `analytics-${timestamp}.json`);
  const data = {
    date: timestamp,
    updateChecks: Object.fromEntries(analytics.updateChecks),
    downloads: Object.fromEntries(analytics.downloads),
    installations: Object.fromEntries(analytics.installations),
    rollbacks: Object.fromEntries(analytics.rollbacks)
  };
  try {
    fs.writeFileSync(analyticsPath, JSON.stringify(data, null, 2));
  } catch (error) {
    console.error('Failed to save analytics:', error);
  }
}

// Health check endpoint
app.get('/health', (req, res) => {
  res.json({
    status: 'ok',
    timestamp: new Date().toISOString(),
    channels: ['alpha', 'beta', 'stable']
  });
});

// Get latest version info with staged rollout support
app.get('/latest', (req, res) => {
  const channel = req.query.channel || 'stable';
  const clientId = req.query.clientId || req.ip;
  const currentVersion = req.query.currentVersion;
  trackEvent('updateChecks', channel, currentVersion || 'unknown');
  const manifestPath = path.join(RELEASE_DIR, channel, 'latest.yml');
  if (!fs.existsSync(manifestPath)) {
    return res.status(404).json({
      error: 'No updates available'
    });
  }

  // Check staged rollout
  if (!shouldReceiveUpdate(channel, clientId)) {
    return res.status(204).send(); // No update for this client yet
  }
  try {
    const manifest = fs.readFileSync(manifestPath, 'utf-8');
    res.type('text/yaml').send(manifest);
  } catch (error) {
    res.status(500).json({
      error: 'Failed to read manifest'
    });
  }
});

// Get delta update if available
app.get('/delta/:channel/:fromVersion/:toVersion', (req, res) => {
  const {
    channel,
    fromVersion,
    toVersion
  } = req.params;
  const deltaPath = path.join(RELEASE_DIR, channel, toVersion, `delta-${fromVersion}-${toVersion}.nupkg`);
  if (!fs.existsSync(deltaPath)) {
    return res.status(404).json({
      error: 'Delta update not available',
      fallback: `/download/${channel}/${toVersion}/full`
    });
  }
  trackEvent('downloads', 'delta', `${channel}:${fromVersion}-${toVersion}`);
  res.download(deltaPath);
});

// Get specific version info
app.get('/version/:version', (req, res) => {
  const {
    version
  } = req.params;
  const channel = req.query.channel || 'stable';
  const versionPath = path.join(RELEASE_DIR, channel, version);
  if (!fs.existsSync(versionPath)) {
    return res.status(404).json({
      error: 'Version not found'
    });
  }
  const files = fs.readdirSync(versionPath);
  const releaseNotesPath = path.join(versionPath, 'RELEASE_NOTES.md');
  const releaseNotes = fs.existsSync(releaseNotesPath) ? fs.readFileSync(releaseNotesPath, 'utf-8') : null;
  res.json({
    version,
    channel,
    files,
    releaseNotes,
    hasDelta: files.some(f => f.startsWith('delta-'))
  });
});

// List all available versions
app.get('/versions', (req, res) => {
  const channel = req.query.channel || 'stable';
  const channelPath = path.join(RELEASE_DIR, channel);
  if (!fs.existsSync(channelPath)) {
    return res.json({
      versions: []
    });
  }
  try {
    const versions = fs.readdirSync(channelPath).filter(file => {
      const filePath = path.join(channelPath, file);
      return fs.statSync(filePath).isDirectory();
    }).sort((a, b) => b.localeCompare(a)); // Sort descending

    res.json({
      channel,
      versions
    });
  } catch (error) {
    res.status(500).json({
      error: 'Failed to list versions'
    });
  }
});

// Download installer
app.get('/download/:channel/:version/:file', (req, res) => {
  const {
    channel,
    version,
    file
  } = req.params;
  const filePath = path.join(RELEASE_DIR, channel, version, file);
  if (!fs.existsSync(filePath)) {
    return res.status(404).json({
      error: 'File not found'
    });
  }
  trackEvent('downloads', 'full', `${channel}:${version}:${file}`);
  res.download(filePath);
});

// Report successful installation
app.post('/report/install', (req, res) => {
  const {
    channel,
    version,
    previousVersion,
    clientId
  } = req.body;
  if (!channel || !version) {
    return res.status(400).json({
      error: 'Missing required fields'
    });
  }
  trackEvent('installations', channel, `${previousVersion || 'new'}->${version}`);
  res.json({
    success: true
  });
});

// Report rollback
app.post('/report/rollback', (req, res) => {
  const {
    channel,
    fromVersion,
    toVersion,
    reason,
    clientId
  } = req.body;
  if (!channel || !fromVersion || !toVersion) {
    return res.status(400).json({
      error: 'Missing required fields'
    });
  }
  trackEvent('rollbacks', channel, `${fromVersion}->${toVersion}`);

  // Log rollback for investigation
  const rollbackLog = {
    timestamp: new Date().toISOString(),
    channel,
    fromVersion,
    toVersion,
    reason,
    clientId: clientId || 'unknown'
  };
  const logPath = path.join(ANALYTICS_DIR, 'rollbacks.log');
  fs.appendFileSync(logPath, JSON.stringify(rollbackLog) + '\n');
  res.json({
    success: true
  });
});

// Admin: Configure staged rollout
app.post('/admin/rollout/:channel', (req, res) => {
  const {
    channel
  } = req.params;
  const {
    version,
    percentage,
    startDate,
    endDate
  } = req.body;
  if (!['alpha', 'beta', 'stable'].includes(channel)) {
    return res.status(400).json({
      error: 'Invalid channel'
    });
  }
  if (percentage < 0 || percentage > 100) {
    return res.status(400).json({
      error: 'Percentage must be between 0 and 100'
    });
  }
  const config = {
    version,
    percentage,
    startDate: startDate || new Date().toISOString(),
    endDate: endDate || null
  };
  if (saveRolloutConfig(channel, config)) {
    res.json({
      success: true,
      config
    });
  } else {
    res.status(500).json({
      error: 'Failed to save configuration'
    });
  }
});

// Admin: Get rollout configuration
app.get('/admin/rollout/:channel', (req, res) => {
  const {
    channel
  } = req.params;
  if (!['alpha', 'beta', 'stable'].includes(channel)) {
    return res.status(400).json({
      error: 'Invalid channel'
    });
  }
  const config = loadRolloutConfig(channel);
  res.json(config);
});

// Admin: Get analytics
app.get('/admin/analytics', (req, res) => {
  const days = parseInt(req.query.days) || 7;
  const analyticsFiles = [];
  for (let i = 0; i < days; i++) {
    const date = new Date();
    date.setDate(date.getDate() - i);
    const dateStr = date.toISOString().split('T')[0];
    const filePath = path.join(ANALYTICS_DIR, `analytics-${dateStr}.json`);
    if (fs.existsSync(filePath)) {
      try {
        const data = JSON.parse(fs.readFileSync(filePath, 'utf-8'));
        analyticsFiles.push(data);
      } catch (error) {
        console.error(`Failed to read analytics for ${dateStr}:`, error);
      }
    }
  }
  res.json({
    period: `${days} days`,
    data: analyticsFiles
  });
});

// Admin: Trigger rollback for a channel
app.post('/admin/rollback/:channel', (req, res) => {
  const {
    channel
  } = req.params;
  const {
    toVersion
  } = req.body;
  if (!['alpha', 'beta', 'stable'].includes(channel)) {
    return res.status(400).json({
      error: 'Invalid channel'
    });
  }
  const versionPath = path.join(RELEASE_DIR, channel, toVersion);
  if (!fs.existsSync(versionPath)) {
    return res.status(404).json({
      error: 'Target version not found'
    });
  }

  // Copy the target version's manifest to latest.yml
  const sourceManifest = path.join(versionPath, 'latest.yml');
  const targetManifest = path.join(RELEASE_DIR, channel, 'latest.yml');
  if (!fs.existsSync(sourceManifest)) {
    return res.status(404).json({
      error: 'Version manifest not found'
    });
  }
  try {
    fs.copyFileSync(sourceManifest, targetManifest);

    // Reset rollout to 100%
    saveRolloutConfig(channel, {
      version: toVersion,
      percentage: 100,
      startDate: new Date().toISOString(),
      endDate: null
    });
    res.json({
      success: true,
      message: `Rolled back ${channel} to version ${toVersion}`
    });
  } catch (error) {
    res.status(500).json({
      error: 'Failed to rollback',
      details: error.message
    });
  }
});

// Graceful shutdown
process.on('SIGTERM', () => {
  console.log('Saving analytics before shutdown...');
  saveAnalytics();
  process.exit(0);
});

// Save analytics periodically
setInterval(saveAnalytics, 5 * 60 * 1000); // Every 5 minutes

// Start server
app.listen(PORT, () => {
  console.log(`üöÄ AzStudio Update Server running on port ${PORT}`);
  console.log(`üìÅ Serving files from: ${RELEASE_DIR}`);
  console.log(`\nEndpoints:`);
  console.log(`  GET  /health - Health check`);
  console.log(`  GET  /latest?channel=stable&clientId=xxx - Get latest version manifest`);
  console.log(`  GET  /delta/:channel/:fromVersion/:toVersion - Get delta update`);
  console.log(`  GET  /versions?channel=stable - List all versions`);
  console.log(`  GET  /version/:version?channel=stable - Get version info`);
  console.log(`  GET  /download/:channel/:version/:file - Download file`);
  console.log(`  POST /report/install - Report successful installation`);
  console.log(`  POST /report/rollback - Report rollback`);
  console.log(`\nAdmin Endpoints:`);
  console.log(`  POST /admin/rollout/:channel - Configure staged rollout`);
  console.log(`  GET  /admin/rollout/:channel - Get rollout configuration`);
  console.log(`  GET  /admin/analytics?days=7 - Get analytics data`);
  console.log(`  POST /admin/rollback/:channel - Trigger rollback`);
  console.log(`\nChannels: alpha, beta, stable`);
});
module.exports = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInBhdGgiLCJmcyIsImNvcnMiLCJjcnlwdG8iLCJhcHAiLCJQT1JUIiwicHJvY2VzcyIsImVudiIsIlJFTEVBU0VfRElSIiwiam9pbiIsIl9fZGlybmFtZSIsIkNPTkZJR19ESVIiLCJBTkFMWVRJQ1NfRElSIiwiZm9yRWFjaCIsImRpciIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJ1c2UiLCJqc29uIiwic3RhdGljIiwiYW5hbHl0aWNzIiwidXBkYXRlQ2hlY2tzIiwiTWFwIiwiZG93bmxvYWRzIiwiaW5zdGFsbGF0aW9ucyIsInJvbGxiYWNrcyIsImxvYWRSb2xsb3V0Q29uZmlnIiwiY2hhbm5lbCIsImNvbmZpZ1BhdGgiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJlcnJvciIsImNvbnNvbGUiLCJ2ZXJzaW9uIiwicGVyY2VudGFnZSIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVuZERhdGUiLCJzYXZlUm9sbG91dENvbmZpZyIsImNvbmZpZyIsIndyaXRlRmlsZVN5bmMiLCJzdHJpbmdpZnkiLCJzaG91bGRSZWNlaXZlVXBkYXRlIiwiY2xpZW50SWQiLCJoYXNoIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImhhc2hWYWx1ZSIsInBhcnNlSW50Iiwic3Vic3RyaW5nIiwidHJhY2tFdmVudCIsImNhdGVnb3J5IiwiYWN0aW9uIiwibGFiZWwiLCJ2YWx1ZSIsImtleSIsIm1hcCIsInNldCIsImdldCIsIk1hdGgiLCJyYW5kb20iLCJzYXZlQW5hbHl0aWNzIiwidGltZXN0YW1wIiwic3BsaXQiLCJhbmFseXRpY3NQYXRoIiwiZGF0YSIsImRhdGUiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsInJlcSIsInJlcyIsInN0YXR1cyIsImNoYW5uZWxzIiwicXVlcnkiLCJpcCIsImN1cnJlbnRWZXJzaW9uIiwibWFuaWZlc3RQYXRoIiwic2VuZCIsIm1hbmlmZXN0IiwidHlwZSIsImZyb21WZXJzaW9uIiwidG9WZXJzaW9uIiwicGFyYW1zIiwiZGVsdGFQYXRoIiwiZmFsbGJhY2siLCJkb3dubG9hZCIsInZlcnNpb25QYXRoIiwiZmlsZXMiLCJyZWFkZGlyU3luYyIsInJlbGVhc2VOb3Rlc1BhdGgiLCJyZWxlYXNlTm90ZXMiLCJoYXNEZWx0YSIsInNvbWUiLCJmIiwic3RhcnRzV2l0aCIsImNoYW5uZWxQYXRoIiwidmVyc2lvbnMiLCJmaWx0ZXIiLCJmaWxlIiwiZmlsZVBhdGgiLCJzdGF0U3luYyIsImlzRGlyZWN0b3J5Iiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsInBvc3QiLCJwcmV2aW91c1ZlcnNpb24iLCJib2R5Iiwic3VjY2VzcyIsInJlYXNvbiIsInJvbGxiYWNrTG9nIiwibG9nUGF0aCIsImFwcGVuZEZpbGVTeW5jIiwiaW5jbHVkZXMiLCJkYXlzIiwiYW5hbHl0aWNzRmlsZXMiLCJpIiwic2V0RGF0ZSIsImdldERhdGUiLCJkYXRlU3RyIiwicHVzaCIsInBlcmlvZCIsInNvdXJjZU1hbmlmZXN0IiwidGFyZ2V0TWFuaWZlc3QiLCJjb3B5RmlsZVN5bmMiLCJtZXNzYWdlIiwiZGV0YWlscyIsIm9uIiwibG9nIiwiZXhpdCIsInNldEludGVydmFsIiwibGlzdGVuIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVwZGF0ZS1zZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmhhbmNlZCBVcGRhdGUgU2VydmVyIGZvciBBelN0dWRpb1xuICogXG4gKiBGZWF0dXJlczpcbiAqIC0gU3RhZ2VkIHJvbGxvdXQgc3VwcG9ydCAoYWxwaGEvYmV0YS9zdGFibGUgY2hhbm5lbHMpXG4gKiAtIERlbHRhIHVwZGF0ZXMgZm9yIGVmZmljaWVudCBkb3dubG9hZHNcbiAqIC0gUm9sbGJhY2sgY2FwYWJpbGl0eVxuICogLSBBbmFseXRpY3MgYW5kIG1vbml0b3JpbmdcbiAqIC0gUmF0ZSBsaW1pdGluZyBhbmQgc2VjdXJpdHlcbiAqL1xuXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMTtcbmNvbnN0IFJFTEVBU0VfRElSID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJ3JlbGVhc2UnKTtcbmNvbnN0IENPTkZJR19ESVIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAncmVsZWFzZScsICdjb25maWcnKTtcbmNvbnN0IEFOQUxZVElDU19ESVIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAncmVsZWFzZScsICdhbmFseXRpY3MnKTtcblxuLy8gRW5zdXJlIGRpcmVjdG9yaWVzIGV4aXN0XG5bQ09ORklHX0RJUiwgQU5BTFlUSUNTX0RJUl0uZm9yRWFjaChkaXIgPT4ge1xuICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xuICAgIGZzLm1rZGlyU3luYyhkaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICB9XG59KTtcblxuLy8gRW5hYmxlIENPUlMgZm9yIHVwZGF0ZSBjaGVja3NcbmFwcC51c2UoY29ycygpKTtcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuXG4vLyBTZXJ2ZSBzdGF0aWMgZmlsZXMgZnJvbSByZWxlYXNlIGRpcmVjdG9yeVxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhSRUxFQVNFX0RJUikpO1xuXG4vLyBBbmFseXRpY3MgdHJhY2tpbmdcbmNvbnN0IGFuYWx5dGljcyA9IHtcbiAgdXBkYXRlQ2hlY2tzOiBuZXcgTWFwKCksXG4gIGRvd25sb2FkczogbmV3IE1hcCgpLFxuICBpbnN0YWxsYXRpb25zOiBuZXcgTWFwKCksXG4gIHJvbGxiYWNrczogbmV3IE1hcCgpXG59O1xuXG4vLyBMb2FkIHJvbGxvdXQgY29uZmlndXJhdGlvblxuZnVuY3Rpb24gbG9hZFJvbGxvdXRDb25maWcoY2hhbm5lbCkge1xuICBjb25zdCBjb25maWdQYXRoID0gcGF0aC5qb2luKENPTkZJR19ESVIsIGAke2NoYW5uZWx9LXJvbGxvdXQuanNvbmApO1xuICBpZiAoZnMuZXhpc3RzU3luYyhjb25maWdQYXRoKSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoY29uZmlnUGF0aCwgJ3V0Zi04JykpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCByb2xsb3V0IGNvbmZpZyBmb3IgJHtjaGFubmVsfTpgLCBlcnJvcik7XG4gICAgfVxuICB9XG4gIFxuICAvLyBEZWZhdWx0OiAxMDAlIHJvbGxvdXRcbiAgcmV0dXJuIHtcbiAgICB2ZXJzaW9uOiBudWxsLFxuICAgIHBlcmNlbnRhZ2U6IDEwMCxcbiAgICBzdGFydERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBlbmREYXRlOiBudWxsXG4gIH07XG59XG5cbi8vIFNhdmUgcm9sbG91dCBjb25maWd1cmF0aW9uXG5mdW5jdGlvbiBzYXZlUm9sbG91dENvbmZpZyhjaGFubmVsLCBjb25maWcpIHtcbiAgY29uc3QgY29uZmlnUGF0aCA9IHBhdGguam9pbihDT05GSUdfRElSLCBgJHtjaGFubmVsfS1yb2xsb3V0Lmpzb25gKTtcbiAgdHJ5IHtcbiAgICBmcy53cml0ZUZpbGVTeW5jKGNvbmZpZ1BhdGgsIEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgMikpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBzYXZlIHJvbGxvdXQgY29uZmlnIGZvciAke2NoYW5uZWx9OmAsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gQ2hlY2sgaWYgY2xpZW50IHNob3VsZCByZWNlaXZlIHVwZGF0ZSBiYXNlZCBvbiBzdGFnZWQgcm9sbG91dFxuZnVuY3Rpb24gc2hvdWxkUmVjZWl2ZVVwZGF0ZShjaGFubmVsLCBjbGllbnRJZCkge1xuICBjb25zdCBjb25maWcgPSBsb2FkUm9sbG91dENvbmZpZyhjaGFubmVsKTtcbiAgXG4gIGlmIChjb25maWcucGVyY2VudGFnZSA+PSAxMDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgLy8gVXNlIGNvbnNpc3RlbnQgaGFzaGluZyB0byBkZXRlcm1pbmUgaWYgY2xpZW50IGlzIGluIHJvbGxvdXQgZ3JvdXBcbiAgY29uc3QgaGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKVxuICAgIC51cGRhdGUoY2xpZW50SWQgKyBjb25maWcudmVyc2lvbilcbiAgICAuZGlnZXN0KCdoZXgnKTtcbiAgY29uc3QgaGFzaFZhbHVlID0gcGFyc2VJbnQoaGFzaC5zdWJzdHJpbmcoMCwgOCksIDE2KTtcbiAgY29uc3QgcGVyY2VudGFnZSA9IChoYXNoVmFsdWUgJSAxMDApICsgMTtcbiAgXG4gIHJldHVybiBwZXJjZW50YWdlIDw9IGNvbmZpZy5wZXJjZW50YWdlO1xufVxuXG4vLyBUcmFjayBhbmFseXRpY3MgZXZlbnRcbmZ1bmN0aW9uIHRyYWNrRXZlbnQoY2F0ZWdvcnksIGFjdGlvbiwgbGFiZWwsIHZhbHVlID0gMSkge1xuICBjb25zdCBrZXkgPSBgJHtjYXRlZ29yeX06JHthY3Rpb259OiR7bGFiZWx9YDtcbiAgY29uc3QgbWFwID0gYW5hbHl0aWNzW2NhdGVnb3J5XSB8fCBuZXcgTWFwKCk7XG4gIG1hcC5zZXQoa2V5LCAobWFwLmdldChrZXkpIHx8IDApICsgdmFsdWUpO1xuICBhbmFseXRpY3NbY2F0ZWdvcnldID0gbWFwO1xuICBcbiAgLy8gUGVyc2lzdCBhbmFseXRpY3MgcGVyaW9kaWNhbGx5XG4gIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4xKSB7IC8vIDEwJSBjaGFuY2UgdG8gc2F2ZVxuICAgIHNhdmVBbmFseXRpY3MoKTtcbiAgfVxufVxuXG4vLyBTYXZlIGFuYWx5dGljcyB0byBkaXNrXG5mdW5jdGlvbiBzYXZlQW5hbHl0aWNzKCkge1xuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgY29uc3QgYW5hbHl0aWNzUGF0aCA9IHBhdGguam9pbihBTkFMWVRJQ1NfRElSLCBgYW5hbHl0aWNzLSR7dGltZXN0YW1wfS5qc29uYCk7XG4gIFxuICBjb25zdCBkYXRhID0ge1xuICAgIGRhdGU6IHRpbWVzdGFtcCxcbiAgICB1cGRhdGVDaGVja3M6IE9iamVjdC5mcm9tRW50cmllcyhhbmFseXRpY3MudXBkYXRlQ2hlY2tzKSxcbiAgICBkb3dubG9hZHM6IE9iamVjdC5mcm9tRW50cmllcyhhbmFseXRpY3MuZG93bmxvYWRzKSxcbiAgICBpbnN0YWxsYXRpb25zOiBPYmplY3QuZnJvbUVudHJpZXMoYW5hbHl0aWNzLmluc3RhbGxhdGlvbnMpLFxuICAgIHJvbGxiYWNrczogT2JqZWN0LmZyb21FbnRyaWVzKGFuYWx5dGljcy5yb2xsYmFja3MpXG4gIH07XG4gIFxuICB0cnkge1xuICAgIGZzLndyaXRlRmlsZVN5bmMoYW5hbHl0aWNzUGF0aCwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGFuYWx5dGljczonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gSGVhbHRoIGNoZWNrIGVuZHBvaW50XG5hcHAuZ2V0KCcvaGVhbHRoJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHsgXG4gICAgc3RhdHVzOiAnb2snLCBcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBjaGFubmVsczogWydhbHBoYScsICdiZXRhJywgJ3N0YWJsZSddXG4gIH0pO1xufSk7XG5cbi8vIEdldCBsYXRlc3QgdmVyc2lvbiBpbmZvIHdpdGggc3RhZ2VkIHJvbGxvdXQgc3VwcG9ydFxuYXBwLmdldCgnL2xhdGVzdCcsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBjaGFubmVsID0gcmVxLnF1ZXJ5LmNoYW5uZWwgfHwgJ3N0YWJsZSc7XG4gIGNvbnN0IGNsaWVudElkID0gcmVxLnF1ZXJ5LmNsaWVudElkIHx8IHJlcS5pcDtcbiAgY29uc3QgY3VycmVudFZlcnNpb24gPSByZXEucXVlcnkuY3VycmVudFZlcnNpb247XG4gIFxuICB0cmFja0V2ZW50KCd1cGRhdGVDaGVja3MnLCBjaGFubmVsLCBjdXJyZW50VmVyc2lvbiB8fCAndW5rbm93bicpO1xuICBcbiAgY29uc3QgbWFuaWZlc3RQYXRoID0gcGF0aC5qb2luKFJFTEVBU0VfRElSLCBjaGFubmVsLCAnbGF0ZXN0LnltbCcpO1xuICBcbiAgaWYgKCFmcy5leGlzdHNTeW5jKG1hbmlmZXN0UGF0aCkpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ05vIHVwZGF0ZXMgYXZhaWxhYmxlJyB9KTtcbiAgfVxuICBcbiAgLy8gQ2hlY2sgc3RhZ2VkIHJvbGxvdXRcbiAgaWYgKCFzaG91bGRSZWNlaXZlVXBkYXRlKGNoYW5uZWwsIGNsaWVudElkKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwNCkuc2VuZCgpOyAvLyBObyB1cGRhdGUgZm9yIHRoaXMgY2xpZW50IHlldFxuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IG1hbmlmZXN0ID0gZnMucmVhZEZpbGVTeW5jKG1hbmlmZXN0UGF0aCwgJ3V0Zi04Jyk7XG4gICAgcmVzLnR5cGUoJ3RleHQveWFtbCcpLnNlbmQobWFuaWZlc3QpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gcmVhZCBtYW5pZmVzdCcgfSk7XG4gIH1cbn0pO1xuXG4vLyBHZXQgZGVsdGEgdXBkYXRlIGlmIGF2YWlsYWJsZVxuYXBwLmdldCgnL2RlbHRhLzpjaGFubmVsLzpmcm9tVmVyc2lvbi86dG9WZXJzaW9uJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgY2hhbm5lbCwgZnJvbVZlcnNpb24sIHRvVmVyc2lvbiB9ID0gcmVxLnBhcmFtcztcbiAgY29uc3QgZGVsdGFQYXRoID0gcGF0aC5qb2luKFJFTEVBU0VfRElSLCBjaGFubmVsLCB0b1ZlcnNpb24sIGBkZWx0YS0ke2Zyb21WZXJzaW9ufS0ke3RvVmVyc2lvbn0ubnVwa2dgKTtcbiAgXG4gIGlmICghZnMuZXhpc3RzU3luYyhkZWx0YVBhdGgpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgXG4gICAgICBlcnJvcjogJ0RlbHRhIHVwZGF0ZSBub3QgYXZhaWxhYmxlJyxcbiAgICAgIGZhbGxiYWNrOiBgL2Rvd25sb2FkLyR7Y2hhbm5lbH0vJHt0b1ZlcnNpb259L2Z1bGxgXG4gICAgfSk7XG4gIH1cbiAgXG4gIHRyYWNrRXZlbnQoJ2Rvd25sb2FkcycsICdkZWx0YScsIGAke2NoYW5uZWx9OiR7ZnJvbVZlcnNpb259LSR7dG9WZXJzaW9ufWApO1xuICByZXMuZG93bmxvYWQoZGVsdGFQYXRoKTtcbn0pO1xuXG4vLyBHZXQgc3BlY2lmaWMgdmVyc2lvbiBpbmZvXG5hcHAuZ2V0KCcvdmVyc2lvbi86dmVyc2lvbicsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHZlcnNpb24gfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IGNoYW5uZWwgPSByZXEucXVlcnkuY2hhbm5lbCB8fCAnc3RhYmxlJztcbiAgY29uc3QgdmVyc2lvblBhdGggPSBwYXRoLmpvaW4oUkVMRUFTRV9ESVIsIGNoYW5uZWwsIHZlcnNpb24pO1xuICBcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHZlcnNpb25QYXRoKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVmVyc2lvbiBub3QgZm91bmQnIH0pO1xuICB9XG4gIFxuICBjb25zdCBmaWxlcyA9IGZzLnJlYWRkaXJTeW5jKHZlcnNpb25QYXRoKTtcbiAgY29uc3QgcmVsZWFzZU5vdGVzUGF0aCA9IHBhdGguam9pbih2ZXJzaW9uUGF0aCwgJ1JFTEVBU0VfTk9URVMubWQnKTtcbiAgY29uc3QgcmVsZWFzZU5vdGVzID0gZnMuZXhpc3RzU3luYyhyZWxlYXNlTm90ZXNQYXRoKSBcbiAgICA/IGZzLnJlYWRGaWxlU3luYyhyZWxlYXNlTm90ZXNQYXRoLCAndXRmLTgnKVxuICAgIDogbnVsbDtcbiAgXG4gIHJlcy5qc29uKHsgXG4gICAgdmVyc2lvbiwgXG4gICAgY2hhbm5lbCxcbiAgICBmaWxlcyxcbiAgICByZWxlYXNlTm90ZXMsXG4gICAgaGFzRGVsdGE6IGZpbGVzLnNvbWUoZiA9PiBmLnN0YXJ0c1dpdGgoJ2RlbHRhLScpKVxuICB9KTtcbn0pO1xuXG4vLyBMaXN0IGFsbCBhdmFpbGFibGUgdmVyc2lvbnNcbmFwcC5nZXQoJy92ZXJzaW9ucycsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBjaGFubmVsID0gcmVxLnF1ZXJ5LmNoYW5uZWwgfHwgJ3N0YWJsZSc7XG4gIGNvbnN0IGNoYW5uZWxQYXRoID0gcGF0aC5qb2luKFJFTEVBU0VfRElSLCBjaGFubmVsKTtcbiAgXG4gIGlmICghZnMuZXhpc3RzU3luYyhjaGFubmVsUGF0aCkpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oeyB2ZXJzaW9uczogW10gfSk7XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgdmVyc2lvbnMgPSBmcy5yZWFkZGlyU3luYyhjaGFubmVsUGF0aClcbiAgICAgIC5maWx0ZXIoZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKGNoYW5uZWxQYXRoLCBmaWxlKTtcbiAgICAgICAgcmV0dXJuIGZzLnN0YXRTeW5jKGZpbGVQYXRoKS5pc0RpcmVjdG9yeSgpO1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmxvY2FsZUNvbXBhcmUoYSkpOyAvLyBTb3J0IGRlc2NlbmRpbmdcbiAgICBcbiAgICByZXMuanNvbih7IGNoYW5uZWwsIHZlcnNpb25zIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gbGlzdCB2ZXJzaW9ucycgfSk7XG4gIH1cbn0pO1xuXG4vLyBEb3dubG9hZCBpbnN0YWxsZXJcbmFwcC5nZXQoJy9kb3dubG9hZC86Y2hhbm5lbC86dmVyc2lvbi86ZmlsZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IGNoYW5uZWwsIHZlcnNpb24sIGZpbGUgfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKFJFTEVBU0VfRElSLCBjaGFubmVsLCB2ZXJzaW9uLCBmaWxlKTtcbiAgXG4gIGlmICghZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0ZpbGUgbm90IGZvdW5kJyB9KTtcbiAgfVxuICBcbiAgdHJhY2tFdmVudCgnZG93bmxvYWRzJywgJ2Z1bGwnLCBgJHtjaGFubmVsfToke3ZlcnNpb259OiR7ZmlsZX1gKTtcbiAgcmVzLmRvd25sb2FkKGZpbGVQYXRoKTtcbn0pO1xuXG4vLyBSZXBvcnQgc3VjY2Vzc2Z1bCBpbnN0YWxsYXRpb25cbmFwcC5wb3N0KCcvcmVwb3J0L2luc3RhbGwnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBjaGFubmVsLCB2ZXJzaW9uLCBwcmV2aW91c1ZlcnNpb24sIGNsaWVudElkIH0gPSByZXEuYm9keTtcbiAgXG4gIGlmICghY2hhbm5lbCB8fCAhdmVyc2lvbikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnIH0pO1xuICB9XG4gIFxuICB0cmFja0V2ZW50KCdpbnN0YWxsYXRpb25zJywgY2hhbm5lbCwgYCR7cHJldmlvdXNWZXJzaW9uIHx8ICduZXcnfS0+JHt2ZXJzaW9ufWApO1xuICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcblxuLy8gUmVwb3J0IHJvbGxiYWNrXG5hcHAucG9zdCgnL3JlcG9ydC9yb2xsYmFjaycsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IGNoYW5uZWwsIGZyb21WZXJzaW9uLCB0b1ZlcnNpb24sIHJlYXNvbiwgY2xpZW50SWQgfSA9IHJlcS5ib2R5O1xuICBcbiAgaWYgKCFjaGFubmVsIHx8ICFmcm9tVmVyc2lvbiB8fCAhdG9WZXJzaW9uKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycgfSk7XG4gIH1cbiAgXG4gIHRyYWNrRXZlbnQoJ3JvbGxiYWNrcycsIGNoYW5uZWwsIGAke2Zyb21WZXJzaW9ufS0+JHt0b1ZlcnNpb259YCk7XG4gIFxuICAvLyBMb2cgcm9sbGJhY2sgZm9yIGludmVzdGlnYXRpb25cbiAgY29uc3Qgcm9sbGJhY2tMb2cgPSB7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgY2hhbm5lbCxcbiAgICBmcm9tVmVyc2lvbixcbiAgICB0b1ZlcnNpb24sXG4gICAgcmVhc29uLFxuICAgIGNsaWVudElkOiBjbGllbnRJZCB8fCAndW5rbm93bidcbiAgfTtcbiAgXG4gIGNvbnN0IGxvZ1BhdGggPSBwYXRoLmpvaW4oQU5BTFlUSUNTX0RJUiwgJ3JvbGxiYWNrcy5sb2cnKTtcbiAgZnMuYXBwZW5kRmlsZVN5bmMobG9nUGF0aCwgSlNPTi5zdHJpbmdpZnkocm9sbGJhY2tMb2cpICsgJ1xcbicpO1xuICBcbiAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xufSk7XG5cbi8vIEFkbWluOiBDb25maWd1cmUgc3RhZ2VkIHJvbGxvdXRcbmFwcC5wb3N0KCcvYWRtaW4vcm9sbG91dC86Y2hhbm5lbCcsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IGNoYW5uZWwgfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IHsgdmVyc2lvbiwgcGVyY2VudGFnZSwgc3RhcnREYXRlLCBlbmREYXRlIH0gPSByZXEuYm9keTtcbiAgXG4gIGlmICghWydhbHBoYScsICdiZXRhJywgJ3N0YWJsZSddLmluY2x1ZGVzKGNoYW5uZWwpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGNoYW5uZWwnIH0pO1xuICB9XG4gIFxuICBpZiAocGVyY2VudGFnZSA8IDAgfHwgcGVyY2VudGFnZSA+IDEwMCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUGVyY2VudGFnZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwJyB9KTtcbiAgfVxuICBcbiAgY29uc3QgY29uZmlnID0ge1xuICAgIHZlcnNpb24sXG4gICAgcGVyY2VudGFnZSxcbiAgICBzdGFydERhdGU6IHN0YXJ0RGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgZW5kRGF0ZTogZW5kRGF0ZSB8fCBudWxsXG4gIH07XG4gIFxuICBpZiAoc2F2ZVJvbGxvdXRDb25maWcoY2hhbm5lbCwgY29uZmlnKSkge1xuICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgY29uZmlnIH0pO1xuICB9IGVsc2Uge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gc2F2ZSBjb25maWd1cmF0aW9uJyB9KTtcbiAgfVxufSk7XG5cbi8vIEFkbWluOiBHZXQgcm9sbG91dCBjb25maWd1cmF0aW9uXG5hcHAuZ2V0KCcvYWRtaW4vcm9sbG91dC86Y2hhbm5lbCcsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IGNoYW5uZWwgfSA9IHJlcS5wYXJhbXM7XG4gIFxuICBpZiAoIVsnYWxwaGEnLCAnYmV0YScsICdzdGFibGUnXS5pbmNsdWRlcyhjaGFubmVsKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBjaGFubmVsJyB9KTtcbiAgfVxuICBcbiAgY29uc3QgY29uZmlnID0gbG9hZFJvbGxvdXRDb25maWcoY2hhbm5lbCk7XG4gIHJlcy5qc29uKGNvbmZpZyk7XG59KTtcblxuLy8gQWRtaW46IEdldCBhbmFseXRpY3NcbmFwcC5nZXQoJy9hZG1pbi9hbmFseXRpY3MnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgZGF5cyA9IHBhcnNlSW50KHJlcS5xdWVyeS5kYXlzKSB8fCA3O1xuICBjb25zdCBhbmFseXRpY3NGaWxlcyA9IFtdO1xuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXlzOyBpKyspIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBpKTtcbiAgICBjb25zdCBkYXRlU3RyID0gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oQU5BTFlUSUNTX0RJUiwgYGFuYWx5dGljcy0ke2RhdGVTdHJ9Lmpzb25gKTtcbiAgICBcbiAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0Zi04JykpO1xuICAgICAgICBhbmFseXRpY3NGaWxlcy5wdXNoKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHJlYWQgYW5hbHl0aWNzIGZvciAke2RhdGVTdHJ9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJlcy5qc29uKHtcbiAgICBwZXJpb2Q6IGAke2RheXN9IGRheXNgLFxuICAgIGRhdGE6IGFuYWx5dGljc0ZpbGVzXG4gIH0pO1xufSk7XG5cbi8vIEFkbWluOiBUcmlnZ2VyIHJvbGxiYWNrIGZvciBhIGNoYW5uZWxcbmFwcC5wb3N0KCcvYWRtaW4vcm9sbGJhY2svOmNoYW5uZWwnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBjaGFubmVsIH0gPSByZXEucGFyYW1zO1xuICBjb25zdCB7IHRvVmVyc2lvbiB9ID0gcmVxLmJvZHk7XG4gIFxuICBpZiAoIVsnYWxwaGEnLCAnYmV0YScsICdzdGFibGUnXS5pbmNsdWRlcyhjaGFubmVsKSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBjaGFubmVsJyB9KTtcbiAgfVxuICBcbiAgY29uc3QgdmVyc2lvblBhdGggPSBwYXRoLmpvaW4oUkVMRUFTRV9ESVIsIGNoYW5uZWwsIHRvVmVyc2lvbik7XG4gIGlmICghZnMuZXhpc3RzU3luYyh2ZXJzaW9uUGF0aCkpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1RhcmdldCB2ZXJzaW9uIG5vdCBmb3VuZCcgfSk7XG4gIH1cbiAgXG4gIC8vIENvcHkgdGhlIHRhcmdldCB2ZXJzaW9uJ3MgbWFuaWZlc3QgdG8gbGF0ZXN0LnltbFxuICBjb25zdCBzb3VyY2VNYW5pZmVzdCA9IHBhdGguam9pbih2ZXJzaW9uUGF0aCwgJ2xhdGVzdC55bWwnKTtcbiAgY29uc3QgdGFyZ2V0TWFuaWZlc3QgPSBwYXRoLmpvaW4oUkVMRUFTRV9ESVIsIGNoYW5uZWwsICdsYXRlc3QueW1sJyk7XG4gIFxuICBpZiAoIWZzLmV4aXN0c1N5bmMoc291cmNlTWFuaWZlc3QpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdWZXJzaW9uIG1hbmlmZXN0IG5vdCBmb3VuZCcgfSk7XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgZnMuY29weUZpbGVTeW5jKHNvdXJjZU1hbmlmZXN0LCB0YXJnZXRNYW5pZmVzdCk7XG4gICAgXG4gICAgLy8gUmVzZXQgcm9sbG91dCB0byAxMDAlXG4gICAgc2F2ZVJvbGxvdXRDb25maWcoY2hhbm5lbCwge1xuICAgICAgdmVyc2lvbjogdG9WZXJzaW9uLFxuICAgICAgcGVyY2VudGFnZTogMTAwLFxuICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBlbmREYXRlOiBudWxsXG4gICAgfSk7XG4gICAgXG4gICAgcmVzLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgbWVzc2FnZTogYFJvbGxlZCBiYWNrICR7Y2hhbm5lbH0gdG8gdmVyc2lvbiAke3RvVmVyc2lvbn1gIFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gcm9sbGJhY2snLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59KTtcblxuLy8gR3JhY2VmdWwgc2h1dGRvd25cbnByb2Nlc3Mub24oJ1NJR1RFUk0nLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdTYXZpbmcgYW5hbHl0aWNzIGJlZm9yZSBzaHV0ZG93bi4uLicpO1xuICBzYXZlQW5hbHl0aWNzKCk7XG4gIHByb2Nlc3MuZXhpdCgwKTtcbn0pO1xuXG4vLyBTYXZlIGFuYWx5dGljcyBwZXJpb2RpY2FsbHlcbnNldEludGVydmFsKHNhdmVBbmFseXRpY3MsIDUgKiA2MCAqIDEwMDApOyAvLyBFdmVyeSA1IG1pbnV0ZXNcblxuLy8gU3RhcnQgc2VydmVyXG5hcHAubGlzdGVuKFBPUlQsICgpID0+IHtcbiAgY29uc29sZS5sb2coYPCfmoAgQXpTdHVkaW8gVXBkYXRlIFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICBjb25zb2xlLmxvZyhg8J+TgSBTZXJ2aW5nIGZpbGVzIGZyb206ICR7UkVMRUFTRV9ESVJ9YCk7XG4gIGNvbnNvbGUubG9nKGBcXG5FbmRwb2ludHM6YCk7XG4gIGNvbnNvbGUubG9nKGAgIEdFVCAgL2hlYWx0aCAtIEhlYWx0aCBjaGVja2ApO1xuICBjb25zb2xlLmxvZyhgICBHRVQgIC9sYXRlc3Q/Y2hhbm5lbD1zdGFibGUmY2xpZW50SWQ9eHh4IC0gR2V0IGxhdGVzdCB2ZXJzaW9uIG1hbmlmZXN0YCk7XG4gIGNvbnNvbGUubG9nKGAgIEdFVCAgL2RlbHRhLzpjaGFubmVsLzpmcm9tVmVyc2lvbi86dG9WZXJzaW9uIC0gR2V0IGRlbHRhIHVwZGF0ZWApO1xuICBjb25zb2xlLmxvZyhgICBHRVQgIC92ZXJzaW9ucz9jaGFubmVsPXN0YWJsZSAtIExpc3QgYWxsIHZlcnNpb25zYCk7XG4gIGNvbnNvbGUubG9nKGAgIEdFVCAgL3ZlcnNpb24vOnZlcnNpb24/Y2hhbm5lbD1zdGFibGUgLSBHZXQgdmVyc2lvbiBpbmZvYCk7XG4gIGNvbnNvbGUubG9nKGAgIEdFVCAgL2Rvd25sb2FkLzpjaGFubmVsLzp2ZXJzaW9uLzpmaWxlIC0gRG93bmxvYWQgZmlsZWApO1xuICBjb25zb2xlLmxvZyhgICBQT1NUIC9yZXBvcnQvaW5zdGFsbCAtIFJlcG9ydCBzdWNjZXNzZnVsIGluc3RhbGxhdGlvbmApO1xuICBjb25zb2xlLmxvZyhgICBQT1NUIC9yZXBvcnQvcm9sbGJhY2sgLSBSZXBvcnQgcm9sbGJhY2tgKTtcbiAgY29uc29sZS5sb2coYFxcbkFkbWluIEVuZHBvaW50czpgKTtcbiAgY29uc29sZS5sb2coYCAgUE9TVCAvYWRtaW4vcm9sbG91dC86Y2hhbm5lbCAtIENvbmZpZ3VyZSBzdGFnZWQgcm9sbG91dGApO1xuICBjb25zb2xlLmxvZyhgICBHRVQgIC9hZG1pbi9yb2xsb3V0LzpjaGFubmVsIC0gR2V0IHJvbGxvdXQgY29uZmlndXJhdGlvbmApO1xuICBjb25zb2xlLmxvZyhgICBHRVQgIC9hZG1pbi9hbmFseXRpY3M/ZGF5cz03IC0gR2V0IGFuYWx5dGljcyBkYXRhYCk7XG4gIGNvbnNvbGUubG9nKGAgIFBPU1QgL2FkbWluL3JvbGxiYWNrLzpjaGFubmVsIC0gVHJpZ2dlciByb2xsYmFja2ApO1xuICBjb25zb2xlLmxvZyhgXFxuQ2hhbm5lbHM6IGFscGhhLCBiZXRhLCBzdGFibGVgKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1FLEVBQUUsR0FBR0YsT0FBTyxDQUFDLElBQUksQ0FBQztBQUN4QixNQUFNRyxJQUFJLEdBQUdILE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUksTUFBTSxHQUFHSixPQUFPLENBQUMsUUFBUSxDQUFDO0FBRWhDLE1BQU1LLEdBQUcsR0FBR04sT0FBTyxDQUFDLENBQUM7QUFDckIsTUFBTU8sSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsSUFBSSxJQUFJLElBQUk7QUFDckMsTUFBTUcsV0FBVyxHQUFHUixJQUFJLENBQUNTLElBQUksQ0FBQ0MsU0FBUyxFQUFFLElBQUksRUFBRSxTQUFTLENBQUM7QUFDekQsTUFBTUMsVUFBVSxHQUFHWCxJQUFJLENBQUNTLElBQUksQ0FBQ0MsU0FBUyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDO0FBQ2xFLE1BQU1FLGFBQWEsR0FBR1osSUFBSSxDQUFDUyxJQUFJLENBQUNDLFNBQVMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQzs7QUFFeEU7QUFDQSxDQUFDQyxVQUFVLEVBQUVDLGFBQWEsQ0FBQyxDQUFDQyxPQUFPLENBQUNDLEdBQUcsSUFBSTtFQUN6QyxJQUFJLENBQUNiLEVBQUUsQ0FBQ2MsVUFBVSxDQUFDRCxHQUFHLENBQUMsRUFBRTtJQUN2QmIsRUFBRSxDQUFDZSxTQUFTLENBQUNGLEdBQUcsRUFBRTtNQUFFRyxTQUFTLEVBQUU7SUFBSyxDQUFDLENBQUM7RUFDeEM7QUFDRixDQUFDLENB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