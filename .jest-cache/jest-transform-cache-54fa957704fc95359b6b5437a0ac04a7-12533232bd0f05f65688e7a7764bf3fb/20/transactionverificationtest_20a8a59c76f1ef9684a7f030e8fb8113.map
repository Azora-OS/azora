{"version":3,"names":["request","require","express","createTestApp","app","use","json","post","req","res","transactionHash","body","status","error","verification","verified","confirmations","Math","floor","random","blockNumber","timestamp","Date","toISOString","get","hash","params","from","to","value","message","signature","address","validation","valid","describe","beforeEach","it","txHash","repeat","response","send","expect","toBe","toHaveProperty"],"sources":["transaction-verification.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst express = require('express');\r\n\r\nfunction createTestApp() {\r\n  const app = express();\r\n  app.use(express.json());\r\n\r\n  app.post('/api/blockchain/verify-transaction', (req, res) => {\r\n    const { transactionHash } = req.body;\r\n\r\n    if (!transactionHash) {\r\n      return res.status(400).json({ error: 'Transaction hash is required' });\r\n    }\r\n\r\n    const verification = {\r\n      transactionHash,\r\n      verified: true,\r\n      confirmations: Math.floor(Math.random() * 100),\r\n      status: 'confirmed',\r\n      blockNumber: Math.floor(Math.random() * 1000000),\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    res.json(verification);\r\n  });\r\n\r\n  app.get('/api/blockchain/transaction/:hash', (req, res) => {\r\n    const { hash } = req.params;\r\n\r\n    res.json({\r\n      hash,\r\n      from: '0x1234567890123456789012345678901234567890',\r\n      to: '0xabcdefabcdefabcdefabcdefabcdefabcdefabcd',\r\n      value: '1000000000000000000',\r\n      status: 'confirmed',\r\n      confirmations: 12\r\n    });\r\n  });\r\n\r\n  app.post('/api/blockchain/validate-signature', (req, res) => {\r\n    const { message, signature, address } = req.body;\r\n\r\n    if (!message || !signature || !address) {\r\n      return res.status(400).json({ error: 'Message, signature, and address are required' });\r\n    }\r\n\r\n    const validation = {\r\n      valid: true,\r\n      address,\r\n      message,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    res.json(validation);\r\n  });\r\n\r\n  return app;\r\n}\r\n\r\ndescribe('Azora Blockchain - Transaction Verification Tests', () => {\r\n  let app;\r\n\r\n  beforeEach(() => {\r\n    app = createTestApp();\r\n  });\r\n\r\n  describe('POST /api/blockchain/verify-transaction', () => {\r\n    it('should verify transaction by hash', async () => {\r\n      const txHash = '0x' + '1'.repeat(64);\r\n      const response = await request(app)\r\n        .post('/api/blockchain/verify-transaction')\r\n        .send({ transactionHash: txHash });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.transactionHash).toBe(txHash);\r\n      expect(response.body).toHaveProperty('verified');\r\n      expect(response.body).toHaveProperty('confirmations');\r\n    });\r\n\r\n    it('should return error when transaction hash is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/verify-transaction')\r\n        .send({});\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Transaction hash is required');\r\n    });\r\n\r\n    it('should include block number in verification', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/verify-transaction')\r\n        .send({ transactionHash: '0xabcd' });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('blockNumber');\r\n      expect(typeof response.body.blockNumber).toBe('number');\r\n    });\r\n\r\n    it('should report transaction status', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/verify-transaction')\r\n        .send({ transactionHash: '0x1234' });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('status');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/blockchain/transaction/:hash', () => {\r\n    it('should retrieve transaction details', async () => {\r\n      const txHash = '0x' + 'a'.repeat(64);\r\n      const response = await request(app)\r\n        .get(`/api/blockchain/transaction/${txHash}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.hash).toBe(txHash);\r\n      expect(response.body).toHaveProperty('from');\r\n      expect(response.body).toHaveProperty('to');\r\n      expect(response.body).toHaveProperty('value');\r\n    });\r\n\r\n    it('should include confirmation count', async () => {\r\n      const response = await request(app)\r\n        .get('/api/blockchain/transaction/0x1234');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('confirmations');\r\n      expect(typeof response.body.confirmations).toBe('number');\r\n    });\r\n  });\r\n\r\n  describe('POST /api/blockchain/validate-signature', () => {\r\n    it('should validate cryptographic signature', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/validate-signature')\r\n        .send({\r\n          message: 'Test message',\r\n          signature: '0xsignature',\r\n          address: '0x1234567890123456789012345678901234567890'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('valid');\r\n      expect(response.body.address).toBe('0x1234567890123456789012345678901234567890');\r\n    });\r\n\r\n    it('should return error when message is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/validate-signature')\r\n        .send({ signature: '0xsig', address: '0x1234' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Message, signature, and address are required');\r\n    });\r\n\r\n    it('should return error when signature is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/blockchain/validate-signature')\r\n        .send({ message: 'test', address: '0x1234' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Message, signature, and address are required');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}