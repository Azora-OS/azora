{"version":3,"names":["_getJestObj","mock","_supertest","_interopRequireDefault","require","_express","_enrollment","_enrollment2","e","__esModule","default","jest","app","express","use","json","enrollmentRoutes","describe","beforeEach","clearAllMocks","it","enrollmentData","studentId","courseId","tier","mockEnrollment","id","status","progress","enrollmentService","enrollStudent","mockResolvedValue","response","request","post","send","expect","toBe","body","success","data","toEqual","getEnrollment","get","mockEnrollments","getStudentEnrollments","mockUpdatedEnrollment","updateProgress","put","mockCompletedEnrollment","completeEnrollment","mockDroppedEnrollment","dropEnrollment"],"sources":["enrollment.routes.test.ts"],"sourcesContent":["import request from 'supertest';\r\nimport express from 'express';\r\nimport enrollmentRoutes from '../enrollment.routes';\r\nimport { enrollmentService } from '../../services/enrollment.service';\r\n\r\njest.mock('../../services/enrollment.service');\r\n\r\nconst app = express();\r\napp.use(express.json());\r\napp.use('/api/v1/enrollments', enrollmentRoutes);\r\n\r\ndescribe('Enrollment Routes', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('POST /api/v1/enrollments', () => {\r\n    it('should enroll a student', async () => {\r\n      const enrollmentData = {\r\n        studentId: 'student-1',\r\n        courseId: 'course-1',\r\n        tier: 'free',\r\n      };\r\n\r\n      const mockEnrollment = {\r\n        id: 'enrollment-1',\r\n        ...enrollmentData,\r\n        status: 'active',\r\n        progress: 0,\r\n      };\r\n\r\n      (enrollmentService.enrollStudent as jest.Mock).mockResolvedValue(mockEnrollment);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/enrollments')\r\n        .send(enrollmentData);\r\n\r\n      expect(response.status).toBe(201);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toEqual(mockEnrollment);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/v1/enrollments/:id', () => {\r\n    it('should get an enrollment', async () => {\r\n      const mockEnrollment = {\r\n        id: 'enrollment-1',\r\n        studentId: 'student-1',\r\n        courseId: 'course-1',\r\n        tier: 'free',\r\n        status: 'active',\r\n        progress: 50,\r\n      };\r\n\r\n      (enrollmentService.getEnrollment as jest.Mock).mockResolvedValue(mockEnrollment);\r\n\r\n      const response = await request(app).get('/api/v1/enrollments/enrollment-1');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toEqual(mockEnrollment);\r\n    });\r\n\r\n    it('should return 404 if enrollment not found', async () => {\r\n      (enrollmentService.getEnrollment as jest.Mock).mockResolvedValue(null);\r\n\r\n      const response = await request(app).get('/api/v1/enrollments/non-existent');\r\n\r\n      expect(response.status).toBe(404);\r\n      expect(response.body.success).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/v1/enrollments/student/:studentId', () => {\r\n    it('should get student enrollments', async () => {\r\n      const mockEnrollments = [\r\n        {\r\n          id: 'enrollment-1',\r\n          studentId: 'student-1',\r\n          courseId: 'course-1',\r\n          tier: 'free',\r\n          status: 'active',\r\n          progress: 50,\r\n        },\r\n      ];\r\n\r\n      (enrollmentService.getStudentEnrollments as jest.Mock).mockResolvedValue(mockEnrollments);\r\n\r\n      const response = await request(app).get('/api/v1/enrollments/student/student-1');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toEqual(mockEnrollments);\r\n    });\r\n  });\r\n\r\n  describe('PUT /api/v1/enrollments/:id/progress', () => {\r\n    it('should update progress', async () => {\r\n      const mockUpdatedEnrollment = {\r\n        id: 'enrollment-1',\r\n        studentId: 'student-1',\r\n        courseId: 'course-1',\r\n        tier: 'free',\r\n        status: 'active',\r\n        progress: 75,\r\n      };\r\n\r\n      (enrollmentService.updateProgress as jest.Mock).mockResolvedValue(mockUpdatedEnrollment);\r\n\r\n      const response = await request(app)\r\n        .put('/api/v1/enrollments/enrollment-1/progress')\r\n        .send({ progress: 75 });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data.progress).toBe(75);\r\n    });\r\n\r\n    it('should return 400 for invalid progress', async () => {\r\n      const response = await request(app)\r\n        .put('/api/v1/enrollments/enrollment-1/progress')\r\n        .send({ progress: 'invalid' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.success).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('POST /api/v1/enrollments/:id/complete', () => {\r\n    it('should complete an enrollment', async () => {\r\n      const mockCompletedEnrollment = {\r\n        id: 'enrollment-1',\r\n        studentId: 'student-1',\r\n        courseId: 'course-1',\r\n        tier: 'free',\r\n        status: 'completed',\r\n        progress: 100,\r\n      };\r\n\r\n      (enrollmentService.completeEnrollment as jest.Mock).mockResolvedValue(mockCompletedEnrollment);\r\n\r\n      const response = await request(app).post('/api/v1/enrollments/enrollment-1/complete');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data.status).toBe('completed');\r\n    });\r\n  });\r\n\r\n  describe('POST /api/v1/enrollments/:id/drop', () => {\r\n    it('should drop an enrollment', async () => {\r\n      const mockDroppedEnrollment = {\r\n        id: 'enrollment-1',\r\n        studentId: 'student-1',\r\n        courseId: 'course-1',\r\n        tier: 'free',\r\n        status: 'dropped',\r\n        progress: 30,\r\n      };\r\n\r\n      (enrollmentService.dropEnrollment as jest.Mock).mockResolvedValue(mockDroppedEnrollment);\r\n\r\n      const response = await request(app).post('/api/v1/enrollments/enrollment-1/drop');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data.status).toBe('dropped');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}