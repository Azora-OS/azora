{"version":3,"names":["_getJestObj","mock","_supertest","_interopRequireDefault","require","_express","_course","_course2","e","__esModule","default","jest","app","express","use","json","courseRoutes","describe","beforeEach","clearAllMocks","it","mockCourses","id","title","description","instructorId","tier","modules","assessments","courseService","listCourses","mockResolvedValue","courses","total","response","request","get","expect","status","toBe","body","success","data","toEqual","courseData","mockCourse","createCourse","post","send","getCourse","updateData","mockUpdatedCourse","updateCourse","put","deleteCourse","undefined","delete","moduleData","content","order","estimatedTime","mockModule","courseId","createModule","assessmentData","moduleId","questions","passingScore","mockAssessment","createAssessment"],"sources":["course.routes.test.ts"],"sourcesContent":["import request from 'supertest';\r\nimport express from 'express';\r\nimport courseRoutes from '../course.routes';\r\nimport { courseService } from '../../services/course.service';\r\n\r\njest.mock('../../services/course.service');\r\n\r\nconst app = express();\r\napp.use(express.json());\r\napp.use('/api/v1/courses', courseRoutes);\r\n\r\ndescribe('Course Routes', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('GET /api/v1/courses', () => {\r\n    it('should list courses', async () => {\r\n      const mockCourses = [\r\n        {\r\n          id: 'course-1',\r\n          title: 'Course 1',\r\n          description: 'Description 1',\r\n          instructorId: 'instructor-1',\r\n          tier: 'free',\r\n          modules: [],\r\n          assessments: [],\r\n        },\r\n      ];\r\n\r\n      (courseService.listCourses as jest.Mock).mockResolvedValue({\r\n        courses: mockCourses,\r\n        total: 1,\r\n      });\r\n\r\n      const response = await request(app).get('/api/v1/courses');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toEqual(mockCourses);\r\n    });\r\n  });\r\n\r\n  describe('POST /api/v1/courses', () => {\r\n    it('should create a course', async () => {\r\n      const courseData = {\r\n        title: 'New Course',\r\n        description: 'Course description',\r\n        instructorId: 'instructor-1',\r\n        tier: 'free',\r\n      };\r\n\r\n      const mockCourse = {\r\n        id: 'course-1',\r\n        ...courseData,\r\n        modules: [],\r\n        assessments: [],\r\n      };\r\n\r\n      (courseService.createCourse as jest.Mock).mockResolvedValue(mockCourse);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/courses')\r\n        .send(courseData);\r\n\r\n      expect(response.status).toBe(201);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toEqual(mockCourse);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/v1/courses/:id', () => {\r\n    it('should get a course by ID', async () => {\r\n      const mockCourse = {\r\n        id: 'course-1',\r\n        title: 'Course 1',\r\n        description: 'Description',\r\n        instructorId: 'instructor-1',\r\n        tier: 'free',\r\n        modules: [],\r\n        assessments: [],\r\n      };\r\n\r\n      (courseService.getCourse as jest.Mock).mockResolvedValue(mockCourse);\r\n\r\n      const response = await request(app).get('/api/v1/courses/course-1');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toEqual(mockCourse);\r\n    });\r\n\r\n    it('should return 404 if course not found', async () => {\r\n      (courseService.getCourse as jest.Mock).mockResolvedValue(null);\r\n\r\n      const response = await request(app).get('/api/v1/courses/non-existent');\r\n\r\n      expect(response.status).toBe(404);\r\n      expect(response.body.success).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('PUT /api/v1/courses/:id', () => {\r\n    it('should update a course', async () => {\r\n      const updateData = { title: 'Updated Title' };\r\n      const mockUpdatedCourse = {\r\n        id: 'course-1',\r\n        title: 'Updated Title',\r\n        description: 'Description',\r\n        instructorId: 'instructor-1',\r\n        tier: 'free',\r\n        modules: [],\r\n        assessments: [],\r\n      };\r\n\r\n      (courseService.updateCourse as jest.Mock).mockResolvedValue(mockUpdatedCourse);\r\n\r\n      const response = await request(app)\r\n        .put('/api/v1/courses/course-1')\r\n        .send(updateData);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data.title).toBe('Updated Title');\r\n    });\r\n  });\r\n\r\n  describe('DELETE /api/v1/courses/:id', () => {\r\n    it('should delete a course', async () => {\r\n      (courseService.deleteCourse as jest.Mock).mockResolvedValue(undefined);\r\n\r\n      const response = await request(app).delete('/api/v1/courses/course-1');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('POST /api/v1/courses/:id/modules', () => {\r\n    it('should create a module', async () => {\r\n      const moduleData = {\r\n        title: 'Module 1',\r\n        content: 'Module content',\r\n        order: 1,\r\n        estimatedTime: 60,\r\n      };\r\n\r\n      const mockModule = {\r\n        id: 'module-1',\r\n        courseId: 'course-1',\r\n        ...moduleData,\r\n      };\r\n\r\n      (courseService.createModule as jest.Mock).mockResolvedValue(mockModule);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/courses/course-1/modules')\r\n        .send(moduleData);\r\n\r\n      expect(response.status).toBe(201);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toEqual(mockModule);\r\n    });\r\n  });\r\n\r\n  describe('POST /api/v1/courses/:id/assessments', () => {\r\n    it('should create an assessment', async () => {\r\n      const assessmentData = {\r\n        moduleId: 'module-1',\r\n        title: 'Quiz 1',\r\n        questions: ['Q1', 'Q2'],\r\n        passingScore: 70,\r\n      };\r\n\r\n      const mockAssessment = {\r\n        id: 'assessment-1',\r\n        courseId: 'course-1',\r\n        ...assessmentData,\r\n      };\r\n\r\n      (courseService.createAssessment as jest.Mock).mockResolvedValue(mockAssessment);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/courses/course-1/assessments')\r\n        .send(assessmentData);\r\n\r\n      expect(response.status).toBe(201);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toEqual(mockAssessment);\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}