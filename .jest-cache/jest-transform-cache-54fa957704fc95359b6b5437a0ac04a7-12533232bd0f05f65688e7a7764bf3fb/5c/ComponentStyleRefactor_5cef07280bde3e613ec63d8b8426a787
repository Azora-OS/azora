f8a9a7d00122dad0603be74b7452a4ef
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComponentStyleRefactor = void 0;
var fs = _interopRequireWildcard(require("fs"));
var path = _interopRequireWildcard(require("path"));
var _glob = require("glob");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
class ComponentStyleRefactor {
  constructor(projectRoot) {
    this.projectRoot = projectRoot;

    // Patterns that indicate custom overrides that should be preserved
    this.customOverridePatterns = [/\/\*\s*custom\s*\*\//i, /\/\*\s*override\s*\*\//i, /\/\*\s*preserve\s*\*\//i, /\/\*\s*@custom\s*\*\//i, /data-custom-style/i];
  }

  /**
   * Identify all components using old styles
   */
  async identifyComponentsWithOldStyles(classMapping) {
    const componentFiles = await this.findAllComponentFiles();
    const componentsWithOldStyles = [];
    for (const filePath of componentFiles) {
      const info = await this.analyzeComponentStyles(filePath, classMapping);

      // Check if component uses any old styles
      const usesOldStyles = info.classNames.some(className => Object.keys(classMapping).some(oldClass => className.includes(oldClass)));
      if (usesOldStyles || info.hasInlineStyles || info.hasCSSModule) {
        componentsWithOldStyles.push(info);
      }
    }
    return componentsWithOldStyles;
  }

  /**
   * Analyze component styles
   */
  async analyzeComponentStyles(filePath, _classMapping) {
    const content = await fs.promises.readFile(filePath, 'utf-8');
    const componentName = this.extractComponentName(filePath);

    // Extract class names
    const classNames = this.extractClassNames(content);

    // Extract inline styles
    const inlineStyles = this.extractInlineStyles(content);

    // Check for CSS module
    const hasCSSModule = this.hasCSSModuleImport(content);
    const cssModuleClasses = hasCSSModule ? this.extractCSSModuleClasses(content) : [];

    // Check for custom overrides
    const hasCustomOverrides = this.hasCustomOverrides(content);
    return {
      filePath,
      componentName,
      hasInlineStyles: inlineStyles.length > 0,
      hasCSSModule,
      hasCustomOverrides,
      classNames,
      inlineStyles,
      cssModuleClasses
    };
  }

  /**
   * Apply Tailwind class transformations to components
   */
  async applyTailwindTransformations(components, classMapping) {
    const changes = [];
    for (const component of components) {
      const content = await fs.promises.readFile(component.filePath, 'utf-8');
      let modifiedContent = content;

      // Transform className attributes
      modifiedContent = this.transformClassNames(modifiedContent, classMapping);

      // Transform inline styles to Tailwind classes where possible
      if (component.hasInlineStyles) {
        modifiedContent = this.transformInlineStyles(modifiedContent, classMapping);
      }

      // Update CSS module references
      if (component.hasCSSModule) {
        modifiedContent = await this.updateCSSModuleReferences(component.filePath, modifiedContent, classMapping);
      }

      // Preserve custom overrides
      if (component.hasCustomOverrides) {
        modifiedContent = this.preserveCustomOverrides(content, modifiedContent);
      }
      if (modifiedContent !== content) {
        changes.push({
          path: component.filePath,
          type: 'modify',
          content: modifiedContent,
          originalContent: content
        });
      }
    }
    return changes;
  }

  /**
   * Transform className attributes with new Tailwind classes
   */
  transformClassNames(content, classMapping) {
    let result = content;

    // Match className="..." and className={...}
    const classNameRegex = /className\s*=\s*(?:"([^"]*)"|{`([^`]*)`}|{['"]([^'"]*)['"]})/g;
    result = result.replace(classNameRegex, (_match, quoted, template, jsString) => {
      const classString = quoted || template || jsString;
      const transformedClasses = this.transformClassString(classString, classMapping);
      if (quoted) {
        return `className="${transformedClasses}"`;
      } else if (template) {
        return `className={\`${transformedClasses}\`}`;
      } else {
        return `className={'${transformedClasses}'}`;
      }
    });
    return result;
  }

  /**
   * Transform a class string using the mapping
   */
  transformClassString(classString, classMapping) {
    const classes = classString.split(/\s+/).filter(Boolean);
    const transformedClasses = classes.map(cls => {
      // Check for exact match
      if (classMapping[cls]) {
        return classMapping[cls];
      }

      // Check for partial matches (e.g., bg-blue-500 -> bg-primary-500)
      for (const [oldClass, newClass] of Object.entries(classMapping)) {
        if (cls.includes(oldClass)) {
          return cls.replace(oldClass, newClass);
        }
      }
      return cls;
    });
    return transformedClasses.join(' ');
  }

  /**
   * Transform inline styles to Tailwind classes where possible
   */
  transformInlineStyles(content, classMapping) {
    let result = content;

    // Match style={{ ... }}
    const styleRegex = /style\s*=\s*{{([^}]*)}}/g;
    result = result.replace(styleRegex, (match, styleContent) => {
      const tailwindClasses = this.convertInlineStylesToTailwind(styleContent);
      if (tailwindClasses.length > 0) {
        // Try to merge with existing className
        const transformedClasses = this.transformClassString(tailwindClasses.join(' '), classMapping);
        return `className="${transformedClasses}"`;
      }
      return match; // Keep original if conversion not possible
    });
    return result;
  }

  /**
   * Convert inline styles to Tailwind classes
   */
  convertInlineStylesToTailwind(styleContent) {
    const classes = [];

    // Common style to Tailwind mappings
    const styleMappings = {
      color: v => {
        if (v.includes('#')) return null; // Keep custom colors
        return `text-${v}`;
      },
      backgroundColor: v => {
        if (v.includes('#')) return null;
        return `bg-${v}`;
      },
      padding: v => {
        const num = parseInt(v);
        if (isNaN(num)) return null;
        return `p-${Math.floor(num / 4)}`;
      },
      margin: v => {
        const num = parseInt(v);
        if (isNaN(num)) return null;
        return `m-${Math.floor(num / 4)}`;
      },
      display: v => v === 'flex' ? 'flex' : v === 'block' ? 'block' : null,
      flexDirection: v => v === 'column' ? 'flex-col' : v === 'row' ? 'flex-row' : null,
      justifyContent: v => {
        const map = {
          'center': 'justify-center',
          'space-between': 'justify-between',
          'flex-start': 'justify-start',
          'flex-end': 'justify-end'
        };
        return map[v] || null;
      },
      alignItems: v => {
        const map = {
          'center': 'items-center',
          'flex-start': 'items-start',
          'flex-end': 'items-end'
        };
        return map[v] || null;
      }
    };

    // Parse style properties
    const properties = styleContent.split(',').map(p => p.trim());
    for (const prop of properties) {
      const [key, value] = prop.split(':').map(s => s.trim().replace(/['"]/g, ''));
      if (key && value && styleMappings[key]) {
        const tailwindClass = styleMappings[key](value);
        if (tailwindClass) {
          classes.push(tailwindClass);
        }
      }
    }
    return classes;
  }

  /**
   * Update CSS module references
   */
  async updateCSSModuleReferences(componentPath, content, classMapping) {
    // Find CSS module file
    const cssModulePath = this.findCSSModulePath(componentPath);
    if (!cssModulePath || !fs.existsSync(cssModulePath)) {
      return content;
    }

    // Read CSS module
    const cssContent = await fs.promises.readFile(cssModulePath, 'utf-8');

    // Update CSS module file with transformed classes
    let updatedCSSContent = cssContent;

    // Transform CSS properties to match new design system
    updatedCSSContent = this.transformCSSProperties(updatedCSSContent, classMapping);

    // Write updated CSS module
    if (updatedCSSContent !== cssContent) {
      await fs.promises.writeFile(cssModulePath, updatedCSSContent, 'utf-8');
    }
    return content;
  }

  /**
   * Transform CSS properties in CSS modules
   */
  transformCSSProperties(cssContent, classMapping) {
    let result = cssContent;

    // Transform color values
    result = result.replace(/color:\s*([^;]+);/g, (_match, value) => {
      const transformed = this.transformCSSValue(value.trim(), classMapping);
      return `color: ${transformed};`;
    });

    // Transform background colors
    result = result.replace(/background-color:\s*([^;]+);/g, (_match, value) => {
      const transformed = this.transformCSSValue(value.trim(), classMapping);
      return `background-color: ${transformed};`;
    });
    return result;
  }

  /**
   * Transform CSS value using mapping
   */
  transformCSSValue(value, classMapping) {
    // Check if value matches any old class pattern
    for (const [oldClass, newClass] of Object.entries(classMapping)) {
      if (value.includes(oldClass)) {
        return value.replace(oldClass, newClass);
      }
    }
    return value;
  }

  /**
   * Preserve custom overrides marked by developers
   */
  preserveCustomOverrides(originalContent, modifiedContent) {
    const lines = originalContent.split('\n');
    const modifiedLines = modifiedContent.split('\n');
    const result = [];
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];

      // Check if line has custom override marker
      const hasCustomMarker = this.customOverridePatterns.some(pattern => pattern.test(line));
      if (hasCustomMarker) {
        // Preserve original line
        result.push(line);
      } else {
        // Use modified line
        result.push(modifiedLines[i] || line);
      }
    }
    return result.join('\n');
  }

  /**
   * Find all component files in the project
   */
  async findAllComponentFiles() {
    const patterns = [path.join(this.projectRoot, '**/*.tsx'), path.join(this.projectRoot, '**/*.jsx')];
    const files = [];
    for (const pattern of patterns) {
      const matches = await (0, _glob.glob)(pattern, {
        ignore: ['**/node_modules/**', '**/dist/**', '**/build/**']
      });
      files.push(...matches);
    }
    return files;
  }

  /**
   * Extract component name from file path
   */
  extractComponentName(filePath) {
    const basename = path.basename(filePath, path.extname(filePath));
    return basename;
  }

  /**
   * Extract class names from component content
   */
  extractClassNames(content) {
    const classNames = [];
    const classNameRegex = /className\s*=\s*(?:"([^"]*)"|{`([^`]*)`}|{['"]([^'"]*)['"]})/g;
    let match;
    while ((match = classNameRegex.exec(content)) !== null) {
      const classString = match[1] || match[2] || match[3];
      if (classString) {
        classNames.push(...classString.split(/\s+/).filter(Boolean));
      }
    }
    return [...new Set(classNames)]; // Remove duplicates
  }

  /**
   * Extract inline styles from component content
   */
  extractInlineStyles(content) {
    const inlineStyles = [];
    const lines = content.split('\n');
    lines.forEach((line, index) => {
      const styleMatch = line.match(/style\s*=\s*{{([^}]*)}}/);
      if (styleMatch) {
        const styleContent = styleMatch[1];
        const properties = styleContent.split(',');
        properties.forEach(prop => {
          const [key, value] = prop.split(':').map(s => s.trim());
          if (key && value) {
            inlineStyles.push({
              line: index + 1,
              property: key,
              value: value.replace(/['"]/g, ''),
              context: line.trim()
            });
          }
        });
      }
    });
    return inlineStyles;
  }

  /**
   * Check if component has CSS module import
   */
  hasCSSModuleImport(content) {
    return /import\s+.*\s+from\s+['"].*\.module\.(css|scss|sass)['"]/i.test(content);
  }

  /**
   * Extract CSS module class names
   */
  extractCSSModuleClasses(content) {
    const classes = [];

    // Match styles.className or styles['className']
    const styleRegex = /styles\.(\w+)|styles\[['"](\w+)['"]\]/g;
    let match;
    while ((match = styleRegex.exec(content)) !== null) {
      const className = match[1] || match[2];
      if (className) {
        classes.push(className);
      }
    }
    return [...new Set(classes)];
  }

  /**
   * Check if content has custom overrides
   */
  hasCustomOverrides(content) {
    return this.customOverridePatterns.some(pattern => pattern.test(content));
  }

  /**
   * Find CSS module path for a component
   */
  findCSSModulePath(componentPath) {
    const dir = path.dirname(componentPath);
    const basename = path.basename(componentPath, path.extname(componentPath));
    const possiblePaths = [path.join(dir, `${basename}.module.css`), path.join(dir, `${basename}.module.scss`), path.join(dir, `${basename}.module.sass`)];
    for (const cssPath of possiblePaths) {
      if (fs.existsSync(cssPath)) {
        return cssPath;
      }
    }
    return null;
  }

  /**
   * Extract class names from CSS content
   */
  extractCSSClassNames(cssContent) {
    const classes = [];
    const classRegex = /\.([a-zA-Z_-][a-zA-Z0-9_-]*)\s*{/g;
    let match;
    while ((match = classRegex.exec(cssContent)) !== null) {
      classes.push(match[1]);
    }
    return classes;
  }

  /**
   * Refactor all components with old styles
   */
  async refactorComponents(classMapping) {
    // Identify components with old styles
    const components = await this.identifyComponentsWithOldStyles(classMapping);

    // Apply transformations
    const changes = await this.applyTailwindTransformations(components, classMapping);

    // Calculate statistics
    const stats = this.calculateRefactorStats(components, changes);
    return {
      filesProcessed: components.length,
      componentsRefactored: changes.length,
      classesTransformed: stats.classesTransformed,
      inlineStylesUpdated: stats.inlineStylesUpdated,
      customOverridesPreserved: stats.customOverridesPreserved,
      changes
    };
  }

  /**
   * Calculate refactoring statistics
   */
  calculateRefactorStats(components, _changes) {
    let classesTransformed = 0;
    let inlineStylesUpdated = 0;
    let customOverridesPreserved = 0;
    for (const component of components) {
      classesTransformed += component.classNames.length;
      inlineStylesUpdated += component.inlineStyles.length;
      if (component.hasCustomOverrides) {
        customOverridesPreserved++;
      }
    }
    return {
      classesTransformed,
      inlineStylesUpdated,
      customOverridesPreserved
    };
  }
}
exports.ComponentStyleRefactor = ComponentStyleRefactor;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsInBhdGgiLCJfZ2xvYiIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkNvbXBvbmVudFN0eWxlUmVmYWN0b3IiLCJjb25zdHJ1Y3RvciIsInByb2plY3RSb290IiwiY3VzdG9tT3ZlcnJpZGVQYXR0ZXJucyIsImlkZW50aWZ5Q29tcG9uZW50c1dpdGhPbGRTdHlsZXMiLCJjbGFzc01hcHBpbmciLCJjb21wb25lbnRGaWxlcyIsImZpbmRBbGxDb21wb25lbnRGaWxlcyIsImNvbXBvbmVudHNXaXRoT2xkU3R5bGVzIiwiZmlsZVBhdGgiLCJpbmZvIiwiYW5hbHl6ZUNvbXBvbmVudFN0eWxlcyIsInVzZXNPbGRTdHlsZXMiLCJjbGFzc05hbWVzIiwic29tZSIsImNsYXNzTmFtZSIsImtleXMiLCJvbGRDbGFzcyIsImluY2x1ZGVzIiwiaGFzSW5saW5lU3R5bGVzIiwiaGFzQ1NTTW9kdWxlIiwicHVzaCIsIl9jbGFzc01hcHBpbmciLCJjb250ZW50IiwicHJvbWlzZXMiLCJyZWFkRmlsZSIsImNvbXBvbmVudE5hbWUiLCJleHRyYWN0Q29tcG9uZW50TmFtZSIsImV4dHJhY3RDbGFzc05hbWVzIiwiaW5saW5lU3R5bGVzIiwiZXh0cmFjdElubGluZVN0eWxlcyIsImhhc0NTU01vZHVsZUltcG9ydCIsImNzc01vZHVsZUNsYXNzZXMiLCJleHRyYWN0Q1NTTW9kdWxlQ2xhc3NlcyIsImhhc0N1c3RvbU92ZXJyaWRlcyIsImxlbmd0aCIsImFwcGx5VGFpbHdpbmRUcmFuc2Zvcm1hdGlvbnMiLCJjb21wb25lbnRzIiwiY2hhbmdlcyIsImNvbXBvbmVudCIsIm1vZGlmaWVkQ29udGVudCIsInRyYW5zZm9ybUNsYXNzTmFtZXMiLCJ0cmFuc2Zvcm1JbmxpbmVTdHlsZXMiLCJ1cGRhdGVDU1NNb2R1bGVSZWZlcmVuY2VzIiwicHJlc2VydmVDdXN0b21PdmVycmlkZXMiLCJ0eXBlIiwib3JpZ2luYWxDb250ZW50IiwicmVzdWx0IiwiY2xhc3NOYW1lUmVnZXgiLCJyZXBsYWNlIiwiX21hdGNoIiwicXVvdGVkIiwidGVtcGxhdGUiLCJqc1N0cmluZyIsImNsYXNzU3RyaW5nIiwidHJhbnNmb3JtZWRDbGFzc2VzIiwidHJhbnNmb3JtQ2xhc3NTdHJpbmciLCJjbGFzc2VzIiwic3BsaXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwibWFwIiwiY2xzIiwibmV3Q2xhc3MiLCJlbnRyaWVzIiwiam9pbiIsInN0eWxlUmVnZXgiLCJtYXRjaCIsInN0eWxlQ29udGVudCIsInRhaWx3aW5kQ2xhc3NlcyIsImNvbnZlcnRJbmxpbmVTdHlsZXNUb1RhaWx3aW5kIiwic3R5bGVNYXBwaW5ncyIsImNvbG9yIiwidiIsImJhY2tncm91bmRDb2xvciIsInBhZGRpbmciLCJudW0iLCJwYXJzZUludCIsImlzTmFOIiwiTWF0aCIsImZsb29yIiwibWFyZ2luIiwiZGlzcGxheSIsImZsZXhEaXJlY3Rpb24iLCJqdXN0aWZ5Q29udGVudCIsImFsaWduSXRlbXMiLCJwcm9wZXJ0aWVzIiwicCIsInRyaW0iLCJwcm9wIiwia2V5IiwidmFsdWUiLCJzIiwidGFpbHdpbmRDbGFzcyIsImNvbXBvbmVudFBhdGgiLCJjc3NNb2R1bGVQYXRoIiwiZmluZENTU01vZHVsZVBhdGgiLCJleGlzdHNTeW5jIiwiY3NzQ29udGVudCIsInVwZGF0ZWRDU1NDb250ZW50IiwidHJhbnNmb3JtQ1NTUHJvcGVydGllcyIsIndyaXRlRmlsZSIsInRyYW5zZm9ybWVkIiwidHJhbnNmb3JtQ1NTVmFsdWUiLCJsaW5lcyIsIm1vZGlmaWVkTGluZXMiLCJsaW5lIiwiaGFzQ3VzdG9tTWFya2VyIiwicGF0dGVybiIsInRlc3QiLCJwYXR0ZXJucyIsImZpbGVzIiwibWF0Y2hlcyIsImdsb2IiLCJpZ25vcmUiLCJiYXNlbmFtZSIsImV4dG5hbWUiLCJleGVjIiwiU2V0IiwiZm9yRWFjaCIsImluZGV4Iiwic3R5bGVNYXRjaCIsInByb3BlcnR5IiwiY29udGV4dCIsImRpciIsImRpcm5hbWUiLCJwb3NzaWJsZVBhdGhzIiwiY3NzUGF0aCIsImV4dHJhY3RDU1NDbGFzc05hbWVzIiwiY2xhc3NSZWdleCIsInJlZmFjdG9yQ29tcG9uZW50cyIsInN0YXRzIiwiY2FsY3VsYXRlUmVmYWN0b3JTdGF0cyIsImZpbGVzUHJvY2Vzc2VkIiwiY29tcG9uZW50c1JlZmFjdG9yZWQiLCJjbGFzc2VzVHJhbnNmb3JtZWQiLCJpbmxpbmVTdHlsZXNVcGRhdGVkIiwiY3VzdG9tT3ZlcnJpZGVzUHJlc2VydmVkIiwiX2NoYW5nZXMiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiQ29tcG9uZW50U3R5bGVSZWZhY3Rvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZ2xvYiB9IGZyb20gJ2dsb2InO1xuaW1wb3J0IHsgRmlsZUNoYW5nZSB9IGZyb20gJy4vQ2hhbmdlc2V0TWFuYWdlcic7XG5pbXBvcnQgeyBDbGFzc01hcHBpbmcgfSBmcm9tICcuL0Rlc2lnbkZpbHRlckVuZ2luZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50U3R5bGVJbmZvIHtcbiAgZmlsZVBhdGg6IHN0cmluZztcbiAgY29tcG9uZW50TmFtZTogc3RyaW5nO1xuICBoYXNJbmxpbmVTdHlsZXM6IGJvb2xlYW47XG4gIGhhc0NTU01vZHVsZTogYm9vbGVhbjtcbiAgaGFzQ3VzdG9tT3ZlcnJpZGVzOiBib29sZWFuO1xuICBjbGFzc05hbWVzOiBzdHJpbmdbXTtcbiAgaW5saW5lU3R5bGVzOiBJbmxpbmVTdHlsZUluZm9bXTtcbiAgY3NzTW9kdWxlQ2xhc3Nlczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5saW5lU3R5bGVJbmZvIHtcbiAgbGluZTogbnVtYmVyO1xuICBwcm9wZXJ0eTogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xuICBjb250ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VzdG9tT3ZlcnJpZGUge1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBzZWxlY3Rvcjogc3RyaW5nO1xuICBwcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBzaG91bGRQcmVzZXJ2ZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWZhY3RvclJlc3VsdCB7XG4gIGZpbGVzUHJvY2Vzc2VkOiBudW1iZXI7XG4gIGNvbXBvbmVudHNSZWZhY3RvcmVkOiBudW1iZXI7XG4gIGNsYXNzZXNUcmFuc2Zvcm1lZDogbnVtYmVyO1xuICBpbmxpbmVTdHlsZXNVcGRhdGVkOiBudW1iZXI7XG4gIGN1c3RvbU92ZXJyaWRlc1ByZXNlcnZlZDogbnVtYmVyO1xuICBjaGFuZ2VzOiBGaWxlQ2hhbmdlW107XG59XG5cbmV4cG9ydCBjbGFzcyBDb21wb25lbnRTdHlsZVJlZmFjdG9yIHtcbiAgcHJpdmF0ZSBwcm9qZWN0Um9vdDogc3RyaW5nO1xuICBwcml2YXRlIGN1c3RvbU92ZXJyaWRlUGF0dGVybnM6IFJlZ0V4cFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByb2plY3RSb290OiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2plY3RSb290ID0gcHJvamVjdFJvb3Q7XG4gICAgXG4gICAgLy8gUGF0dGVybnMgdGhhdCBpbmRpY2F0ZSBjdXN0b20gb3ZlcnJpZGVzIHRoYXQgc2hvdWxkIGJlIHByZXNlcnZlZFxuICAgIHRoaXMuY3VzdG9tT3ZlcnJpZGVQYXR0ZXJucyA9IFtcbiAgICAgIC9cXC9cXCpcXHMqY3VzdG9tXFxzKlxcKlxcLy9pLFxuICAgICAgL1xcL1xcKlxccypvdmVycmlkZVxccypcXCpcXC8vaSxcbiAgICAgIC9cXC9cXCpcXHMqcHJlc2VydmVcXHMqXFwqXFwvL2ksXG4gICAgICAvXFwvXFwqXFxzKkBjdXN0b21cXHMqXFwqXFwvL2ksXG4gICAgICAvZGF0YS1jdXN0b20tc3R5bGUvaSxcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIElkZW50aWZ5IGFsbCBjb21wb25lbnRzIHVzaW5nIG9sZCBzdHlsZXNcbiAgICovXG4gIGFzeW5jIGlkZW50aWZ5Q29tcG9uZW50c1dpdGhPbGRTdHlsZXMoXG4gICAgY2xhc3NNYXBwaW5nOiBDbGFzc01hcHBpbmdcbiAgKTogUHJvbWlzZTxDb21wb25lbnRTdHlsZUluZm9bXT4ge1xuICAgIGNvbnN0IGNvbXBvbmVudEZpbGVzID0gYXdhaXQgdGhpcy5maW5kQWxsQ29tcG9uZW50RmlsZXMoKTtcbiAgICBjb25zdCBjb21wb25lbnRzV2l0aE9sZFN0eWxlczogQ29tcG9uZW50U3R5bGVJbmZvW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgY29tcG9uZW50RmlsZXMpIHtcbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLmFuYWx5emVDb21wb25lbnRTdHlsZXMoZmlsZVBhdGgsIGNsYXNzTWFwcGluZyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGNvbXBvbmVudCB1c2VzIGFueSBvbGQgc3R5bGVzXG4gICAgICBjb25zdCB1c2VzT2xkU3R5bGVzID0gaW5mby5jbGFzc05hbWVzLnNvbWUoY2xhc3NOYW1lID0+XG4gICAgICAgIE9iamVjdC5rZXlzKGNsYXNzTWFwcGluZykuc29tZShvbGRDbGFzcyA9PiBjbGFzc05hbWUuaW5jbHVkZXMob2xkQ2xhc3MpKVxuICAgICAgKTtcblxuICAgICAgaWYgKHVzZXNPbGRTdHlsZXMgfHwgaW5mby5oYXNJbmxpbmVTdHlsZXMgfHwgaW5mby5oYXNDU1NNb2R1bGUpIHtcbiAgICAgICAgY29tcG9uZW50c1dpdGhPbGRTdHlsZXMucHVzaChpbmZvKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29tcG9uZW50c1dpdGhPbGRTdHlsZXM7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBjb21wb25lbnQgc3R5bGVzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVDb21wb25lbnRTdHlsZXMoXG4gICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICBfY2xhc3NNYXBwaW5nOiBDbGFzc01hcHBpbmdcbiAgKTogUHJvbWlzZTxDb21wb25lbnRTdHlsZUluZm8+IHtcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZEZpbGUoZmlsZVBhdGgsICd1dGYtOCcpO1xuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSB0aGlzLmV4dHJhY3RDb21wb25lbnROYW1lKGZpbGVQYXRoKTtcblxuICAgIC8vIEV4dHJhY3QgY2xhc3MgbmFtZXNcbiAgICBjb25zdCBjbGFzc05hbWVzID0gdGhpcy5leHRyYWN0Q2xhc3NOYW1lcyhjb250ZW50KTtcblxuICAgIC8vIEV4dHJhY3QgaW5saW5lIHN0eWxlc1xuICAgIGNvbnN0IGlubGluZVN0eWxlcyA9IHRoaXMuZXh0cmFjdElubGluZVN0eWxlcyhjb250ZW50KTtcblxuICAgIC8vIENoZWNrIGZvciBDU1MgbW9kdWxlXG4gICAgY29uc3QgaGFzQ1NTTW9kdWxlID0gdGhpcy5oYXNDU1NNb2R1bGVJbXBvcnQoY29udGVudCk7XG4gICAgY29uc3QgY3NzTW9kdWxlQ2xhc3NlcyA9IGhhc0NTU01vZHVsZSA/IHRoaXMuZXh0cmFjdENTU01vZHVsZUNsYXNzZXMoY29udGVudCkgOiBbXTtcblxuICAgIC8vIENoZWNrIGZvciBjdXN0b20gb3ZlcnJpZGVzXG4gICAgY29uc3QgaGFzQ3VzdG9tT3ZlcnJpZGVzID0gdGhpcy5oYXNDdXN0b21PdmVycmlkZXMoY29udGVudCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZmlsZVBhdGgsXG4gICAgICBjb21wb25lbnROYW1lLFxuICAgICAgaGFzSW5saW5lU3R5bGVzOiBpbmxpbmVTdHlsZXMubGVuZ3RoID4gMCxcbiAgICAgIGhhc0NTU01vZHVsZSxcbiAgICAgIGhhc0N1c3RvbU92ZXJyaWRlcyxcbiAgICAgIGNsYXNzTmFtZXMsXG4gICAgICBpbmxpbmVTdHlsZXMsXG4gICAgICBjc3NNb2R1bGVDbGFzc2VzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgVGFpbHdpbmQgY2xhc3MgdHJhbnNmb3JtYXRpb25zIHRvIGNvbXBvbmVudHNcbiAgICovXG4gIGFzeW5jIGFwcGx5VGFpbHdpbmRUcmFuc2Zvcm1hdGlvbnMoXG4gICAgY29tcG9uZW50czogQ29tcG9uZW50U3R5bGVJbmZvW10sXG4gICAgY2xhc3NNYXBwaW5nOiBDbGFzc01hcHBpbmdcbiAgKTogUHJvbWlzZTxGaWxlQ2hhbmdlW10+IHtcbiAgICBjb25zdCBjaGFuZ2VzOiBGaWxlQ2hhbmdlW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIGNvbXBvbmVudHMpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5wcm9taXNlcy5yZWFkRmlsZShjb21wb25lbnQuZmlsZVBhdGgsICd1dGYtOCcpO1xuICAgICAgbGV0IG1vZGlmaWVkQ29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSBjbGFzc05hbWUgYXR0cmlidXRlc1xuICAgICAgbW9kaWZpZWRDb250ZW50ID0gdGhpcy50cmFuc2Zvcm1DbGFzc05hbWVzKG1vZGlmaWVkQ29udGVudCwgY2xhc3NNYXBwaW5nKTtcblxuICAgICAgLy8gVHJhbnNmb3JtIGlubGluZSBzdHlsZXMgdG8gVGFpbHdpbmQgY2xhc3NlcyB3aGVyZSBwb3NzaWJsZVxuICAgICAgaWYgKGNvbXBvbmVudC5oYXNJbmxpbmVTdHlsZXMpIHtcbiAgICAgICAgbW9kaWZpZWRDb250ZW50ID0gdGhpcy50cmFuc2Zvcm1JbmxpbmVTdHlsZXMobW9kaWZpZWRDb250ZW50LCBjbGFzc01hcHBpbmcpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgQ1NTIG1vZHVsZSByZWZlcmVuY2VzXG4gICAgICBpZiAoY29tcG9uZW50Lmhhc0NTU01vZHVsZSkge1xuICAgICAgICBtb2RpZmllZENvbnRlbnQgPSBhd2FpdCB0aGlzLnVwZGF0ZUNTU01vZHVsZVJlZmVyZW5jZXMoXG4gICAgICAgICAgY29tcG9uZW50LmZpbGVQYXRoLFxuICAgICAgICAgIG1vZGlmaWVkQ29udGVudCxcbiAgICAgICAgICBjbGFzc01hcHBpbmdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlc2VydmUgY3VzdG9tIG92ZXJyaWRlc1xuICAgICAgaWYgKGNvbXBvbmVudC5oYXNDdXN0b21PdmVycmlkZXMpIHtcbiAgICAgICAgbW9kaWZpZWRDb250ZW50ID0gdGhpcy5wcmVzZXJ2ZUN1c3RvbU92ZXJyaWRlcyhjb250ZW50LCBtb2RpZmllZENvbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kaWZpZWRDb250ZW50ICE9PSBjb250ZW50KSB7XG4gICAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgICAgcGF0aDogY29tcG9uZW50LmZpbGVQYXRoLFxuICAgICAgICAgIHR5cGU6ICdtb2RpZnknLFxuICAgICAgICAgIGNvbnRlbnQ6IG1vZGlmaWVkQ29udGVudCxcbiAgICAgICAgICBvcmlnaW5hbENvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjaGFuZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybSBjbGFzc05hbWUgYXR0cmlidXRlcyB3aXRoIG5ldyBUYWlsd2luZCBjbGFzc2VzXG4gICAqL1xuICBwcml2YXRlIHRyYW5zZm9ybUNsYXNzTmFtZXMoY29udGVudDogc3RyaW5nLCBjbGFzc01hcHBpbmc6IENsYXNzTWFwcGluZyk6IHN0cmluZyB7XG4gICAgbGV0IHJlc3VsdCA9IGNvbnRlbnQ7XG5cbiAgICAvLyBNYXRjaCBjbGFzc05hbWU9XCIuLi5cIiBhbmQgY2xhc3NOYW1lPXsuLi59XG4gICAgY29uc3QgY2xhc3NOYW1lUmVnZXggPSAvY2xhc3NOYW1lXFxzKj1cXHMqKD86XCIoW15cIl0qKVwifHtgKFteYF0qKWB9fHtbJ1wiXShbXidcIl0qKVsnXCJdfSkvZztcblxuICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKGNsYXNzTmFtZVJlZ2V4LCAoX21hdGNoLCBxdW90ZWQsIHRlbXBsYXRlLCBqc1N0cmluZykgPT4ge1xuICAgICAgY29uc3QgY2xhc3NTdHJpbmcgPSBxdW90ZWQgfHwgdGVtcGxhdGUgfHwganNTdHJpbmc7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZENsYXNzZXMgPSB0aGlzLnRyYW5zZm9ybUNsYXNzU3RyaW5nKGNsYXNzU3RyaW5nLCBjbGFzc01hcHBpbmcpO1xuICAgICAgXG4gICAgICBpZiAocXVvdGVkKSB7XG4gICAgICAgIHJldHVybiBgY2xhc3NOYW1lPVwiJHt0cmFuc2Zvcm1lZENsYXNzZXN9XCJgO1xuICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICByZXR1cm4gYGNsYXNzTmFtZT17XFxgJHt0cmFuc2Zvcm1lZENsYXNzZXN9XFxgfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYGNsYXNzTmFtZT17JyR7dHJhbnNmb3JtZWRDbGFzc2VzfSd9YDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtIGEgY2xhc3Mgc3RyaW5nIHVzaW5nIHRoZSBtYXBwaW5nXG4gICAqL1xuICBwcml2YXRlIHRyYW5zZm9ybUNsYXNzU3RyaW5nKGNsYXNzU3RyaW5nOiBzdHJpbmcsIGNsYXNzTWFwcGluZzogQ2xhc3NNYXBwaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGFzc2VzID0gY2xhc3NTdHJpbmcuc3BsaXQoL1xccysvKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgY29uc3QgdHJhbnNmb3JtZWRDbGFzc2VzID0gY2xhc3Nlcy5tYXAoY2xzID0+IHtcbiAgICAgIC8vIENoZWNrIGZvciBleGFjdCBtYXRjaFxuICAgICAgaWYgKGNsYXNzTWFwcGluZ1tjbHNdKSB7XG4gICAgICAgIHJldHVybiBjbGFzc01hcHBpbmdbY2xzXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgZm9yIHBhcnRpYWwgbWF0Y2hlcyAoZS5nLiwgYmctYmx1ZS01MDAgLT4gYmctcHJpbWFyeS01MDApXG4gICAgICBmb3IgKGNvbnN0IFtvbGRDbGFzcywgbmV3Q2xhc3NdIG9mIE9iamVjdC5lbnRyaWVzKGNsYXNzTWFwcGluZykpIHtcbiAgICAgICAgaWYgKGNscy5pbmNsdWRlcyhvbGRDbGFzcykpIHtcbiAgICAgICAgICByZXR1cm4gY2xzLnJlcGxhY2Uob2xkQ2xhc3MsIG5ld0NsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2xzO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkQ2xhc3Nlcy5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtIGlubGluZSBzdHlsZXMgdG8gVGFpbHdpbmQgY2xhc3NlcyB3aGVyZSBwb3NzaWJsZVxuICAgKi9cbiAgcHJpdmF0ZSB0cmFuc2Zvcm1JbmxpbmVTdHlsZXMoY29udGVudDogc3RyaW5nLCBjbGFzc01hcHBpbmc6IENsYXNzTWFwcGluZyk6IHN0cmluZyB7XG4gICAgbGV0IHJlc3VsdCA9IGNvbnRlbnQ7XG5cbiAgICAvLyBNYXRjaCBzdHlsZT17eyAuLi4gfX1cbiAgICBjb25zdCBzdHlsZVJlZ2V4ID0gL3N0eWxlXFxzKj1cXHMqe3soW159XSopfX0vZztcblxuICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKHN0eWxlUmVnZXgsIChtYXRjaCwgc3R5bGVDb250ZW50KSA9PiB7XG4gICAgICBjb25zdCB0YWlsd2luZENsYXNzZXMgPSB0aGlzLmNvbnZlcnRJbmxpbmVTdHlsZXNUb1RhaWx3aW5kKHN0eWxlQ29udGVudCk7XG4gICAgICBcbiAgICAgIGlmICh0YWlsd2luZENsYXNzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBUcnkgdG8gbWVyZ2Ugd2l0aCBleGlzdGluZyBjbGFzc05hbWVcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRDbGFzc2VzID0gdGhpcy50cmFuc2Zvcm1DbGFzc1N0cmluZyhcbiAgICAgICAgICB0YWlsd2luZENsYXNzZXMuam9pbignICcpLFxuICAgICAgICAgIGNsYXNzTWFwcGluZ1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gYGNsYXNzTmFtZT1cIiR7dHJhbnNmb3JtZWRDbGFzc2VzfVwiYDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1hdGNoOyAvLyBLZWVwIG9yaWdpbmFsIGlmIGNvbnZlcnNpb24gbm90IHBvc3NpYmxlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgaW5saW5lIHN0eWxlcyB0byBUYWlsd2luZCBjbGFzc2VzXG4gICAqL1xuICBwcml2YXRlIGNvbnZlcnRJbmxpbmVTdHlsZXNUb1RhaWx3aW5kKHN0eWxlQ29udGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGNsYXNzZXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gQ29tbW9uIHN0eWxlIHRvIFRhaWx3aW5kIG1hcHBpbmdzXG4gICAgY29uc3Qgc3R5bGVNYXBwaW5nczogUmVjb3JkPHN0cmluZywgKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZyB8IG51bGw+ID0ge1xuICAgICAgY29sb3I6ICh2KSA9PiB7XG4gICAgICAgIGlmICh2LmluY2x1ZGVzKCcjJykpIHJldHVybiBudWxsOyAvLyBLZWVwIGN1c3RvbSBjb2xvcnNcbiAgICAgICAgcmV0dXJuIGB0ZXh0LSR7dn1gO1xuICAgICAgfSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogKHYpID0+IHtcbiAgICAgICAgaWYgKHYuaW5jbHVkZXMoJyMnKSkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBgYmctJHt2fWA7XG4gICAgICB9LFxuICAgICAgcGFkZGluZzogKHYpID0+IHtcbiAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodik7XG4gICAgICAgIGlmIChpc05hTihudW0pKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIGBwLSR7TWF0aC5mbG9vcihudW0gLyA0KX1gO1xuICAgICAgfSxcbiAgICAgIG1hcmdpbjogKHYpID0+IHtcbiAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodik7XG4gICAgICAgIGlmIChpc05hTihudW0pKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIGBtLSR7TWF0aC5mbG9vcihudW0gLyA0KX1gO1xuICAgICAgfSxcbiAgICAgIGRpc3BsYXk6ICh2KSA9PiB2ID09PSAnZmxleCcgPyAnZmxleCcgOiB2ID09PSAnYmxvY2snID8gJ2Jsb2NrJyA6IG51bGwsXG4gICAgICBmbGV4RGlyZWN0aW9uOiAodikgPT4gdiA9PT0gJ2NvbHVtbicgPyAnZmxleC1jb2wnIDogdiA9PT0gJ3JvdycgPyAnZmxleC1yb3cnIDogbnVsbCxcbiAgICAgIGp1c3RpZnlDb250ZW50OiAodikgPT4ge1xuICAgICAgICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgJ2NlbnRlcic6ICdqdXN0aWZ5LWNlbnRlcicsXG4gICAgICAgICAgJ3NwYWNlLWJldHdlZW4nOiAnanVzdGlmeS1iZXR3ZWVuJyxcbiAgICAgICAgICAnZmxleC1zdGFydCc6ICdqdXN0aWZ5LXN0YXJ0JyxcbiAgICAgICAgICAnZmxleC1lbmQnOiAnanVzdGlmeS1lbmQnLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbWFwW3ZdIHx8IG51bGw7XG4gICAgICB9LFxuICAgICAgYWxpZ25JdGVtczogKHYpID0+IHtcbiAgICAgICAgY29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICAgICdjZW50ZXInOiAnaXRlbXMtY2VudGVyJyxcbiAgICAgICAgICAnZmxleC1zdGFydCc6ICdpdGVtcy1zdGFydCcsXG4gICAgICAgICAgJ2ZsZXgtZW5kJzogJ2l0ZW1zLWVuZCcsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBtYXBbdl0gfHwgbnVsbDtcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIC8vIFBhcnNlIHN0eWxlIHByb3BlcnRpZXNcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gc3R5bGVDb250ZW50LnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpO1xuICAgIFxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBwcm9wLnNwbGl0KCc6JykubWFwKHMgPT4gcy50cmltKCkucmVwbGFjZSgvWydcIl0vZywgJycpKTtcbiAgICAgIFxuICAgICAgaWYgKGtleSAmJiB2YWx1ZSAmJiBzdHlsZU1hcHBpbmdzW2tleV0pIHtcbiAgICAgICAgY29uc3QgdGFpbHdpbmRDbGFzcyA9IHN0eWxlTWFwcGluZ3Nba2V5XSh2YWx1ZSk7XG4gICAgICAgIGlmICh0YWlsd2luZENsYXNzKSB7XG4gICAgICAgICAgY2xhc3Nlcy5wdXNoKHRhaWx3aW5kQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzZXM7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIENTUyBtb2R1bGUgcmVmZXJlbmNlc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVDU1NNb2R1bGVSZWZlcmVuY2VzKFxuICAgIGNvbXBvbmVudFBhdGg6IHN0cmluZyxcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgY2xhc3NNYXBwaW5nOiBDbGFzc01hcHBpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBGaW5kIENTUyBtb2R1bGUgZmlsZVxuICAgIGNvbnN0IGNzc01vZHVsZVBhdGggPSB0aGlzLmZpbmRDU1NNb2R1bGVQYXRoKGNvbXBvbmVudFBhdGgpO1xuICAgIFxuICAgIGlmICghY3NzTW9kdWxlUGF0aCB8fCAhZnMuZXhpc3RzU3luYyhjc3NNb2R1bGVQYXRoKSkge1xuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgLy8gUmVhZCBDU1MgbW9kdWxlXG4gICAgY29uc3QgY3NzQ29udGVudCA9IGF3YWl0IGZzLnByb21pc2VzLnJlYWRGaWxlKGNzc01vZHVsZVBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBDU1MgbW9kdWxlIGZpbGUgd2l0aCB0cmFuc2Zvcm1lZCBjbGFzc2VzXG4gICAgbGV0IHVwZGF0ZWRDU1NDb250ZW50ID0gY3NzQ29udGVudDtcbiAgICBcbiAgICAvLyBUcmFuc2Zvcm0gQ1NTIHByb3BlcnRpZXMgdG8gbWF0Y2ggbmV3IGRlc2lnbiBzeXN0ZW1cbiAgICB1cGRhdGVkQ1NTQ29udGVudCA9IHRoaXMudHJhbnNmb3JtQ1NTUHJvcGVydGllcyh1cGRhdGVkQ1NTQ29udGVudCwgY2xhc3NNYXBwaW5nKTtcblxuICAgIC8vIFdyaXRlIHVwZGF0ZWQgQ1NTIG1vZHVsZVxuICAgIGlmICh1cGRhdGVkQ1NTQ29udGVudCAhPT0gY3NzQ29udGVudCkge1xuICAgICAgYXdhaXQgZnMucHJvbWlzZXMud3JpdGVGaWxlKGNzc01vZHVsZVBhdGgsIHVwZGF0ZWRDU1NDb250ZW50LCAndXRmLTgnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gQ1NTIHByb3BlcnRpZXMgaW4gQ1NTIG1vZHVsZXNcbiAgICovXG4gIHByaXZhdGUgdHJhbnNmb3JtQ1NTUHJvcGVydGllcyhjc3NDb250ZW50OiBzdHJpbmcsIGNsYXNzTWFwcGluZzogQ2xhc3NNYXBwaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgcmVzdWx0ID0gY3NzQ29udGVudDtcblxuICAgIC8vIFRyYW5zZm9ybSBjb2xvciB2YWx1ZXNcbiAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvY29sb3I6XFxzKihbXjtdKyk7L2csIChfbWF0Y2gsIHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHRoaXMudHJhbnNmb3JtQ1NTVmFsdWUodmFsdWUudHJpbSgpLCBjbGFzc01hcHBpbmcpO1xuICAgICAgcmV0dXJuIGBjb2xvcjogJHt0cmFuc2Zvcm1lZH07YDtcbiAgICB9KTtcblxuICAgIC8vIFRyYW5zZm9ybSBiYWNrZ3JvdW5kIGNvbG9yc1xuICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9iYWNrZ3JvdW5kLWNvbG9yOlxccyooW147XSspOy9nLCAoX21hdGNoLCB2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSB0aGlzLnRyYW5zZm9ybUNTU1ZhbHVlKHZhbHVlLnRyaW0oKSwgY2xhc3NNYXBwaW5nKTtcbiAgICAgIHJldHVybiBgYmFja2dyb3VuZC1jb2xvcjogJHt0cmFuc2Zvcm1lZH07YDtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtIENTUyB2YWx1ZSB1c2luZyBtYXBwaW5nXG4gICAqL1xuICBwcml2YXRlIHRyYW5zZm9ybUNTU1ZhbHVlKHZhbHVlOiBzdHJpbmcsIGNsYXNzTWFwcGluZzogQ2xhc3NNYXBwaW5nKTogc3RyaW5nIHtcbiAgICAvLyBDaGVjayBpZiB2YWx1ZSBtYXRjaGVzIGFueSBvbGQgY2xhc3MgcGF0dGVyblxuICAgIGZvciAoY29uc3QgW29sZENsYXNzLCBuZXdDbGFzc10gb2YgT2JqZWN0LmVudHJpZXMoY2xhc3NNYXBwaW5nKSkge1xuICAgICAgaWYgKHZhbHVlLmluY2x1ZGVzKG9sZENsYXNzKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShvbGRDbGFzcywgbmV3Q2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogUHJlc2VydmUgY3VzdG9tIG92ZXJyaWRlcyBtYXJrZWQgYnkgZGV2ZWxvcGVyc1xuICAgKi9cbiAgcHJpdmF0ZSBwcmVzZXJ2ZUN1c3RvbU92ZXJyaWRlcyhvcmlnaW5hbENvbnRlbnQ6IHN0cmluZywgbW9kaWZpZWRDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpbmVzID0gb3JpZ2luYWxDb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBtb2RpZmllZExpbmVzID0gbW9kaWZpZWRDb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGxpbmUgaGFzIGN1c3RvbSBvdmVycmlkZSBtYXJrZXJcbiAgICAgIGNvbnN0IGhhc0N1c3RvbU1hcmtlciA9IHRoaXMuY3VzdG9tT3ZlcnJpZGVQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gXG4gICAgICAgIHBhdHRlcm4udGVzdChsaW5lKVxuICAgICAgKTtcblxuICAgICAgaWYgKGhhc0N1c3RvbU1hcmtlcikge1xuICAgICAgICAvLyBQcmVzZXJ2ZSBvcmlnaW5hbCBsaW5lXG4gICAgICAgIHJlc3VsdC5wdXNoKGxpbmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNlIG1vZGlmaWVkIGxpbmVcbiAgICAgICAgcmVzdWx0LnB1c2gobW9kaWZpZWRMaW5lc1tpXSB8fCBsaW5lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgYWxsIGNvbXBvbmVudCBmaWxlcyBpbiB0aGUgcHJvamVjdFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmaW5kQWxsQ29tcG9uZW50RmlsZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IHBhdHRlcm5zID0gW1xuICAgICAgcGF0aC5qb2luKHRoaXMucHJvamVjdFJvb3QsICcqKi8qLnRzeCcpLFxuICAgICAgcGF0aC5qb2luKHRoaXMucHJvamVjdFJvb3QsICcqKi8qLmpzeCcpLFxuICAgIF07XG5cbiAgICBjb25zdCBmaWxlczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBhd2FpdCBnbG9iKHBhdHRlcm4sIHtcbiAgICAgICAgaWdub3JlOiBbJyoqL25vZGVfbW9kdWxlcy8qKicsICcqKi9kaXN0LyoqJywgJyoqL2J1aWxkLyoqJ10sXG4gICAgICB9KTtcbiAgICAgIGZpbGVzLnB1c2goLi4ubWF0Y2hlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgY29tcG9uZW50IG5hbWUgZnJvbSBmaWxlIHBhdGhcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdENvbXBvbmVudE5hbWUoZmlsZVBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYmFzZW5hbWUgPSBwYXRoLmJhc2VuYW1lKGZpbGVQYXRoLCBwYXRoLmV4dG5hbWUoZmlsZVBhdGgpKTtcbiAgICByZXR1cm4gYmFzZW5hbWU7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBjbGFzcyBuYW1lcyBmcm9tIGNvbXBvbmVudCBjb250ZW50XG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RDbGFzc05hbWVzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjbGFzc05hbWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGNsYXNzTmFtZVJlZ2V4ID0gL2NsYXNzTmFtZVxccyo9XFxzKig/OlwiKFteXCJdKilcInx7YChbXmBdKilgfXx7WydcIl0oW14nXCJdKilbJ1wiXX0pL2c7XG4gICAgXG4gICAgbGV0IG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSBjbGFzc05hbWVSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgY2xhc3NTdHJpbmcgPSBtYXRjaFsxXSB8fCBtYXRjaFsyXSB8fCBtYXRjaFszXTtcbiAgICAgIGlmIChjbGFzc1N0cmluZykge1xuICAgICAgICBjbGFzc05hbWVzLnB1c2goLi4uY2xhc3NTdHJpbmcuc3BsaXQoL1xccysvKS5maWx0ZXIoQm9vbGVhbikpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbLi4ubmV3IFNldChjbGFzc05hbWVzKV07IC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBpbmxpbmUgc3R5bGVzIGZyb20gY29tcG9uZW50IGNvbnRlbnRcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdElubGluZVN0eWxlcyhjb250ZW50OiBzdHJpbmcpOiBJbmxpbmVTdHlsZUluZm9bXSB7XG4gICAgY29uc3QgaW5saW5lU3R5bGVzOiBJbmxpbmVTdHlsZUluZm9bXSA9IFtdO1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgXG4gICAgbGluZXMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHN0eWxlTWF0Y2ggPSBsaW5lLm1hdGNoKC9zdHlsZVxccyo9XFxzKnt7KFtefV0qKX19Lyk7XG4gICAgICBcbiAgICAgIGlmIChzdHlsZU1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlQ29udGVudCA9IHN0eWxlTWF0Y2hbMV07XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBzdHlsZUNvbnRlbnQuc3BsaXQoJywnKTtcbiAgICAgICAgXG4gICAgICAgIHByb3BlcnRpZXMuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBwcm9wLnNwbGl0KCc6JykubWFwKHMgPT4gcy50cmltKCkpO1xuICAgICAgICAgIGlmIChrZXkgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgIGlubGluZVN0eWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgbGluZTogaW5kZXggKyAxLFxuICAgICAgICAgICAgICBwcm9wZXJ0eToga2V5LFxuICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUucmVwbGFjZSgvWydcIl0vZywgJycpLFxuICAgICAgICAgICAgICBjb250ZXh0OiBsaW5lLnRyaW0oKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5saW5lU3R5bGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNvbXBvbmVudCBoYXMgQ1NTIG1vZHVsZSBpbXBvcnRcbiAgICovXG4gIHByaXZhdGUgaGFzQ1NTTW9kdWxlSW1wb3J0KGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAvaW1wb3J0XFxzKy4qXFxzK2Zyb21cXHMrWydcIl0uKlxcLm1vZHVsZVxcLihjc3N8c2Nzc3xzYXNzKVsnXCJdL2kudGVzdChjb250ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IENTUyBtb2R1bGUgY2xhc3MgbmFtZXNcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdENTU01vZHVsZUNsYXNzZXMoY29udGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGNsYXNzZXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gTWF0Y2ggc3R5bGVzLmNsYXNzTmFtZSBvciBzdHlsZXNbJ2NsYXNzTmFtZSddXG4gICAgY29uc3Qgc3R5bGVSZWdleCA9IC9zdHlsZXNcXC4oXFx3Kyl8c3R5bGVzXFxbWydcIl0oXFx3KylbJ1wiXVxcXS9nO1xuICAgIFxuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gc3R5bGVSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gbWF0Y2hbMV0gfHwgbWF0Y2hbMl07XG4gICAgICBpZiAoY2xhc3NOYW1lKSB7XG4gICAgICAgIGNsYXNzZXMucHVzaChjbGFzc05hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbLi4ubmV3IFNldChjbGFzc2VzKV07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY29udGVudCBoYXMgY3VzdG9tIG92ZXJyaWRlc1xuICAgKi9cbiAgcHJpdmF0ZSBoYXNDdXN0b21PdmVycmlkZXMoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY3VzdG9tT3ZlcnJpZGVQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGNvbnRlbnQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIENTUyBtb2R1bGUgcGF0aCBmb3IgYSBjb21wb25lbnRcbiAgICovXG4gIHByaXZhdGUgZmluZENTU01vZHVsZVBhdGgoY29tcG9uZW50UGF0aDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKGNvbXBvbmVudFBhdGgpO1xuICAgIGNvbnN0IGJhc2VuYW1lID0gcGF0aC5iYXNlbmFtZShjb21wb25lbnRQYXRoLCBwYXRoLmV4dG5hbWUoY29tcG9uZW50UGF0aCkpO1xuICAgIFxuICAgIGNvbnN0IHBvc3NpYmxlUGF0aHMgPSBbXG4gICAgICBwYXRoLmpvaW4oZGlyLCBgJHtiYXNlbmFtZX0ubW9kdWxlLmNzc2ApLFxuICAgICAgcGF0aC5qb2luKGRpciwgYCR7YmFzZW5hbWV9Lm1vZHVsZS5zY3NzYCksXG4gICAgICBwYXRoLmpvaW4oZGlyLCBgJHtiYXNlbmFtZX0ubW9kdWxlLnNhc3NgKSxcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBjc3NQYXRoIG9mIHBvc3NpYmxlUGF0aHMpIHtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKGNzc1BhdGgpKSB7XG4gICAgICAgIHJldHVybiBjc3NQYXRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgY2xhc3MgbmFtZXMgZnJvbSBDU1MgY29udGVudFxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0Q1NTQ2xhc3NOYW1lcyhjc3NDb250ZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgY2xhc3Nlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBjbGFzc1JlZ2V4ID0gL1xcLihbYS16QS1aXy1dW2EtekEtWjAtOV8tXSopXFxzKnsvZztcbiAgICBcbiAgICBsZXQgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IGNsYXNzUmVnZXguZXhlYyhjc3NDb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgIGNsYXNzZXMucHVzaChtYXRjaFsxXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzZXM7XG4gIH1cblxuICAvKipcbiAgICogUmVmYWN0b3IgYWxsIGNvbXBvbmVudHMgd2l0aCBvbGQgc3R5bGVzXG4gICAqL1xuICBhc3luYyByZWZhY3RvckNvbXBvbmVudHMoY2xhc3NNYXBwaW5nOiBDbGFzc01hcHBpbmcpOiBQcm9taXNlPFJlZmFjdG9yUmVzdWx0PiB7XG4gICAgLy8gSWRlbnRpZnkgY29tcG9uZW50cyB3aXRoIG9sZCBzdHlsZXNcbiAgICBjb25zdCBjb21wb25lbnRzID0gYXdhaXQgdGhpcy5pZGVudGlmeUNvbXBvbmVudHNXaXRoT2xkU3R5bGVzKGNsYXNzTWFwcGluZyk7XG5cbiAgICAvLyBBcHBseSB0cmFuc2Zvcm1hdGlvbnNcbiAgICBjb25zdCBjaGFuZ2VzID0gYXdhaXQgdGhpcy5hcHBseVRhaWx3aW5kVHJhbnNmb3JtYXRpb25zKGNvbXBvbmVudHMsIGNsYXNzTWFwcGluZyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgc3RhdGlzdGljc1xuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5jYWxjdWxhdGVSZWZhY3RvclN0YXRzKGNvbXBvbmVudHMsIGNoYW5nZXMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZpbGVzUHJvY2Vzc2VkOiBjb21wb25lbnRzLmxlbmd0aCxcbiAgICAgIGNvbXBvbmVudHNSZWZhY3RvcmVkOiBjaGFuZ2VzLmxlbmd0aCxcbiAgICAgIGNsYXNzZXNUcmFuc2Zvcm1lZDogc3RhdHMuY2xhc3Nlc1RyYW5zZm9ybWVkLFxuICAgICAgaW5saW5lU3R5bGVzVXBkYXRlZDogc3RhdHMuaW5saW5lU3R5bGVzVXBkYXRlZCxcbiAgICAgIGN1c3RvbU92ZXJyaWRlc1ByZXNlcnZlZDogc3RhdHMuY3VzdG9tT3ZlcnJpZGVzUHJlc2VydmVkLFxuICAgICAgY2hhbmdlcyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSByZWZhY3RvcmluZyBzdGF0aXN0aWNzXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVJlZmFjdG9yU3RhdHMoXG4gICAgY29tcG9uZW50czogQ29tcG9uZW50U3R5bGVJbmZvW10sXG4gICAgX2NoYW5nZXM6IEZpbGVDaGFuZ2VbXVxuICApOiB7XG4gICAgY2xhc3Nlc1RyYW5zZm9ybWVkOiBudW1iZXI7XG4gICAgaW5saW5lU3R5bGVzVXBkYXRlZDogbnVtYmVyO1xuICAgIGN1c3RvbU92ZXJyaWRlc1ByZXNlcnZlZDogbnVtYmVyO1xuICB9IHtcbiAgICBsZXQgY2xhc3Nlc1RyYW5zZm9ybWVkID0gMDtcbiAgICBsZXQgaW5saW5lU3R5bGVzVXBkYXRlZCA9IDA7XG4gICAgbGV0IGN1c3RvbU92ZXJyaWRlc1ByZXNlcnZlZCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBjb21wb25lbnRzKSB7XG4gICAgICBjbGFzc2VzVHJhbnNmb3JtZWQgKz0gY29tcG9uZW50LmNsYXNzTmFtZXMubGVuZ3RoO1xuICAgICAgaW5saW5lU3R5bGVzVXBkYXRlZCArPSBjb21wb25lbnQuaW5saW5lU3R5bGVzLmxlbmd0aDtcbiAgICAgIFxuICAgICAgaWYgKGNvbXBvbmVudC5oYXNDdXN0b21PdmVycmlkZXMpIHtcbiAgICAgICAgY3VzdG9tT3ZlcnJpZGVzUHJlc2VydmVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNsYXNzZXNUcmFuc2Zvcm1lZCxcbiAgICAgIGlubGluZVN0eWxlc1VwZGF0ZWQsXG4gICAgICBjdXN0b21PdmVycmlkZXNQcmVzZXJ2ZWQsXG4gICAgfTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxFQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxJQUFBLEdBQUFGLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxLQUFBLEdBQUFGLE9BQUE7QUFBNEIsU0FBQUQsd0JBQUFJLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFOLHVCQUFBLFlBQUFBLENBQUFJLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEsSUFBQUEsQ0FBQSxDQUFBSyxVQUFBLFNBQUFMLENBQUEsTUFBQU0sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBQyxPQUFBLEVBQUFWLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVEsQ0FBQSxNQUFBRixDQUFBLEdBQUFMLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFHLENBQUEsQ0FBQUssR0FBQSxDQUFBWCxDQUFBLFVBQUFNLENBQUEsQ0FBQU0sR0FBQSxDQUFBWixDQUFBLEdBQUFNLENBQUEsQ0FBQU8sR0FBQSxDQUFBYixDQUFBLEVBQUFRLENBQUEsZ0JBQUFQLENBQUEsSUFBQUQsQ0FBQSxnQkFBQUMsQ0FBQSxPQUFBYSxjQUFBLENBQUFDLElBQUEsQ0FBQWYsQ0FBQSxFQUFBQyxDQUFBLE9BQUFNLENBQUEsSUFBQUQsQ0FBQSxHQUFBVSxNQUFBLENBQUFDLGNBQUEsS0FBQUQsTUFB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