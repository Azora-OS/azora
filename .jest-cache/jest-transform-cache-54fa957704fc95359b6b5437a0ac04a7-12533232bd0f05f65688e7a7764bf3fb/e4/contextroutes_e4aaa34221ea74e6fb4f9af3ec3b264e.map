{"version":3,"names":["_express","require","_knowledgeOceanIntegration","cov_185t2awbub","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","_coverageSchema","coverage","actualCoverage","router","Router","post","req","res","next","studentId","courseId","moduleId","query","language","topK","body","result","contextRetrievalService","retrieveContext","status","json","success","data","timestamp","Date","error","get","resources","getLanguageSpecificResources","params","count","length","Array","isArray","rankedResources","rankResources","_default","exports","default"],"sources":["context.routes.ts"],"sourcesContent":["import { Router, Request, Response, NextFunction } from 'express';\r\nimport { contextRetrievalService } from '../integrations/knowledge-ocean-integration';\r\n\r\nconst router = Router();\r\n\r\n// POST /api/v1/context/retrieve - Retrieve context for a query\r\nrouter.post('/retrieve', async (req: Request, res: Response, next: NextFunction) => {\r\n  try {\r\n    const { studentId, courseId, moduleId, query, language, topK } = req.body;\r\n\r\n    const result = await contextRetrievalService.retrieveContext({\r\n      studentId,\r\n      courseId,\r\n      moduleId,\r\n      query,\r\n      language,\r\n      topK,\r\n    });\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      data: result,\r\n      timestamp: new Date(),\r\n    });\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n});\r\n\r\n// GET /api/v1/context/language/:courseId/:moduleId/:language - Get language-specific resources\r\nrouter.get(\r\n  '/language/:courseId/:moduleId/:language',\r\n  async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const resources = await contextRetrievalService.getLanguageSpecificResources(\r\n        req.params.courseId,\r\n        req.params.moduleId,\r\n        req.params.language\r\n      );\r\n\r\n      res.json({\r\n        success: true,\r\n        data: {\r\n          courseId: req.params.courseId,\r\n          moduleId: req.params.moduleId,\r\n          language: req.params.language,\r\n          resources,\r\n          count: resources.length,\r\n        },\r\n        timestamp: new Date(),\r\n      });\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  }\r\n);\r\n\r\n// POST /api/v1/context/rank - Rank resources by relevance\r\nrouter.post('/rank', async (req: Request, res: Response, next: NextFunction) => {\r\n  try {\r\n    const { resources } = req.body;\r\n\r\n    if (!resources || !Array.isArray(resources)) {\r\n      res.status(400).json({\r\n        success: false,\r\n        error: 'Resources array is required',\r\n        timestamp: new Date(),\r\n      });\r\n      return;\r\n    }\r\n\r\n    const rankedResources = await contextRetrievalService.rankResources(resources);\r\n\r\n    res.json({\r\n      success: true,\r\n      data: {\r\n        resources: rankedResources,\r\n        count: rankedResources.length,\r\n      },\r\n      timestamp: new Date(),\r\n    });\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n});\r\n\r\nexport default router;\r\n"],"mappings":"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","ignoreList":[]}