835e3c4b5b3725368072ca27dd2bf246
"use strict";

var _supertest = _interopRequireDefault(require("supertest"));
var _client = require("@prisma/client");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/**
 * End-to-End AI Integration Tests
 * Tests Elara, Knowledge Ocean, and Constitutional AI integrations
 */

const BASE_URL = process.env.API_URL || 'http://localhost:3020';
const prisma = new _client.PrismaClient();
describe('E2E: AI Integration', () => {
  let studentId;
  let courseId;
  let enrollmentId;
  beforeAll(async () => {
    // Setup: Create student and course
    const studentResponse = await (0, _supertest.default)(BASE_URL).post('/api/v1/enrollments').send({
      email: 'ai-test@example.com',
      name: 'AI Test Student',
      tier: 'premium'
    });
    studentId = studentResponse.body.data.id;
    const courseResponse = await (0, _supertest.default)(BASE_URL).post('/api/v1/courses').send({
      title: 'AI Test Course',
      description: 'Course for AI testing',
      tier: 'premium',
      instructorId: 'test-instructor'
    });
    courseId = courseResponse.body.data.id;
    const enrollmentResponse = await (0, _supertest.default)(BASE_URL).post(`/api/v1/enrollments/${studentId}/courses`).send({
      courseId
    });
    enrollmentId = enrollmentResponse.body.data.id;
  });
  afterAll(async () => {
    await prisma.$disconnect();
  });
  describe('Elara Orchestrator Tutoring', () => {
    it('should provide tutoring response', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question: 'What is the main concept?'
      });
      expect(response.status).toBe(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data).toHaveProperty('response');
      expect(response.body.data.response.length).toBeGreaterThan(0);
    });
    it('should include context in tutoring response', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question: 'Explain the concept',
        context: {
          moduleId: 'module-1',
          previousResponses: []
        }
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('response');
      expect(response.body.data).toHaveProperty('context');
    });
    it('should cache tutoring responses', async () => {
      const question = 'What is caching?';
      const response1 = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question
      });
      const response2 = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question
      });
      expect(response1.body.data.response).toBe(response2.body.data.response);
    });
    it('should track tutoring history', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/tutoring/history/${studentId}`);
      expect(response.status).toBe(200);
      expect(Array.isArray(response.body.data)).toBe(true);
      expect(response.body.data.length).toBeGreaterThan(0);
    });
    it('should handle tutoring errors gracefully', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question: '' // Empty question
      });
      expect(response.status).toBe(400);
      expect(response.body.error).toBeDefined();
    });
  });
  describe('Knowledge Ocean Context Retrieval', () => {
    it('should retrieve context for topic', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/context/retrieve`).query({
        courseId,
        topic: 'main-concept',
        tier: 'premium'
      });
      expect(response.status).toBe(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data).toHaveProperty('resources');
      expect(Array.isArray(response.body.data.resources)).toBe(true);
    });
    it('should enforce 70/30 resource ratio', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/context/retrieve`).query({
        courseId,
        topic: 'main-concept',
        tier: 'premium'
      });
      const resources = response.body.data.resources;
      const internalCount = resources.filter(r => r.source === 'internal').length;
      const externalCount = resources.filter(r => r.source === 'external').length;
      const total = internalCount + externalCount;
      const internalRatio = internalCount / total * 100;
      expect(internalRatio).toBeGreaterThanOrEqual(70);
    });
    it('should rank resources by relevance', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/context/retrieve`).query({
        courseId,
        topic: 'main-concept',
        tier: 'premium'
      });
      const resources = response.body.data.resources;
      for (let i = 0; i < resources.length - 1; i++) {
        expect(resources[i].relevanceScore).toBeGreaterThanOrEqual(resources[i + 1].relevanceScore);
      }
    });
    it('should support language-specific retrieval', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/context/retrieve`).query({
        courseId,
        topic: 'main-concept',
        language: 'en',
        tier: 'premium'
      });
      expect(response.status).toBe(200);
      expect(response.body.data.resources.length).toBeGreaterThan(0);
    });
    it('should handle context retrieval errors', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/context/retrieve`).query({
        courseId: 'invalid-course',
        topic: 'main-concept',
        tier: 'premium'
      });
      expect(response.status).toBe(404);
    });
  });
  describe('Constitutional AI Content Validation', () => {
    it('should validate course content', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/quality/validate-course`).send({
        courseId,
        instructorId: 'test-instructor'
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('isValid');
      expect(response.body.data).toHaveProperty('feedback');
    });
    it('should check for bias in content', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/quality/validate-course`).send({
        courseId,
        checkBias: true
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('biasScore');
      expect(response.body.data.biasScore).toBeGreaterThanOrEqual(0);
      expect(response.body.data.biasScore).toBeLessThanOrEqual(100);
    });
    it('should verify accuracy of content', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/quality/validate-course`).send({
        courseId,
        checkAccuracy: true
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('accuracyScore');
    });
    it('should check clarity of content', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/quality/validate-course`).send({
        courseId,
        checkClarity: true
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('clarityScore');
    });
    it('should validate assessment questions', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/quality/validate-assessment`).send({
        courseId,
        questions: [{
          id: 'q1',
          text: 'What is the concept?',
          options: ['A', 'B', 'C', 'D'],
          correctAnswer: 'A'
        }]
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('isValid');
    });
    it('should validate teacher feedback', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/quality/validate-feedback`).send({
        courseId,
        feedback: 'Great work on this assignment!'
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('isValid');
    });
  });
  describe('AI Error Handling and Fallbacks', () => {
    it('should handle tutoring timeout gracefully', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question: 'Complex question',
        timeout: 100 // Very short timeout
      });

      // Should either succeed or return graceful error
      expect([200, 408, 504]).toContain(response.status);
    });
    it('should provide fallback response on AI failure', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question: 'Test question'
      });

      // Should always return a response
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('response');
    });
    it('should retry failed AI requests', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question: 'Test question',
        retryCount: 3
      });
      expect(response.status).toBe(200);
    });
    it('should log AI errors for monitoring', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/monitoring/logs`).query({
        filter: 'ai_error',
        limit: 10
      });
      expect(response.status).toBe(200);
      expect(Array.isArray(response.body.data)).toBe(true);
    });
  });
  describe('AI Performance Metrics', () => {
    it('should track tutoring latency', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/monitoring/metrics`).query({
        metric: 'ai_query_duration',
        engine: 'elara'
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('p95');
      expect(response.body.data.p95).toBeLessThan(5000); // 5 seconds
    });
    it('should track AI error rates', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/monitoring/metrics`).query({
        metric: 'ai_error_rate'
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('errorRate');
      expect(response.body.data.errorRate).toBeLessThan(10); // Less than 10%
    });
    it('should track context retrieval performance', async () => {
      const response = await (0, _supertest.default)(BASE_URL).get(`/api/v1/monitoring/metrics`).query({
        metric: 'ai_query_duration',
        engine: 'knowledge-ocean'
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('p95');
    });
  });
  describe('Multi-AI Orchestration', () => {
    it('should coordinate multiple AI engines', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question: 'Complex question requiring multiple AI engines',
        useMultipleEngines: true
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('response');
      expect(response.body.data).toHaveProperty('enginesUsed');
    });
    it('should validate AI responses with Constitutional AI', async () => {
      const response = await (0, _supertest.default)(BASE_URL).post(`/api/v1/tutoring/ask`).send({
        studentId,
        courseId,
        question: 'Test question',
        validateResponse: true
      });
      expect(response.status).toBe(200);
      expect(response.body.data).toHaveProperty('validated');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3VwZXJ0ZXN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfY2xpZW50IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiQVBJX1VSTCIsInByaXNtYSIsIlByaXNtYUNsaWVudCIsImRlc2NyaWJlIiwic3R1ZGVudElkIiwiY291cnNlSWQiLCJlbnJvbGxtZW50SWQiLCJiZWZvcmVBbGwiLCJzdHVkZW50UmVzcG9uc2UiLCJyZXF1ZXN0IiwicG9zdCIsInNlbmQiLCJlbWFpbCIsIm5hbWUiLCJ0aWVyIiwiYm9keSIsImRhdGEiLCJpZCIsImNvdXJzZVJlc3BvbnNlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImluc3RydWN0b3JJZCIsImVucm9sbG1lbnRSZXNwb25zZSIsImFmdGVyQWxsIiwiJGRpc2Nvbm5lY3QiLCJpdCIsInJlc3BvbnNlIiwicXVlc3Rpb24iLCJleHBlY3QiLCJzdGF0dXMiLCJ0b0JlIiwic3VjY2VzcyIsInRvSGF2ZVByb3BlcnR5IiwibGVuZ3RoIiwidG9CZUdyZWF0ZXJUaGFuIiwiY29udGV4dCIsIm1vZHVsZUlkIiwicHJldmlvdXNSZXNwb25zZXMiLCJyZXNwb25zZTEiLCJyZXNwb25zZTIiLCJnZXQiLCJBcnJheSIsImlzQXJyYXkiLCJlcnJvciIsInRvQmVEZWZpbmVkIiwicXVlcnkiLCJ0b3BpYyIsInJlc291cmNlcyIsImludGVybmFsQ291bnQiLCJmaWx0ZXIiLCJyIiwic291cmNlIiwiZXh0ZXJuYWxDb3VudCIsInRvdGFsIiwiaW50ZXJuYWxSYXRpbyIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJpIiwicmVsZXZhbmNlU2NvcmUiLCJsYW5ndWFnZSIsImNoZWNrQmlhcyIsImJpYXNTY29yZSIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJjaGVja0FjY3VyYWN5IiwiY2hlY2tDbGFyaXR5IiwicXVlc3Rpb25zIiwidGV4dCIsIm9wdGlvbnMiLCJjb3JyZWN0QW5zd2VyIiwiZmVlZGJhY2siLCJ0aW1lb3V0IiwidG9Db250YWluIiwicmV0cnlDb3VudCIsImxpbWl0IiwibWV0cmljIiwiZW5naW5lIiwicDk1IiwidG9CZUxlc3NUaGFuIiwiZXJyb3JSYXRlIiwidXNlTXVsdGlwbGVFbmdpbmVzIiwidmFsaWRhdGVSZXNwb25zZSJdLCJzb3VyY2VzIjpbImFpLWludGVncmF0aW9uLmUyZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBFbmQtdG8tRW5kIEFJIEludGVncmF0aW9uIFRlc3RzXHJcbiAqIFRlc3RzIEVsYXJhLCBLbm93bGVkZ2UgT2NlYW4sIGFuZCBDb25zdGl0dXRpb25hbCBBSSBpbnRlZ3JhdGlvbnNcclxuICovXHJcblxyXG5pbXBvcnQgcmVxdWVzdCBmcm9tICdzdXBlcnRlc3QnO1xyXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG5jb25zdCBCQVNFX1VSTCA9IHByb2Nlc3MuZW52LkFQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAyMCc7XHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcclxuXHJcbmRlc2NyaWJlKCdFMkU6IEFJIEludGVncmF0aW9uJywgKCkgPT4ge1xyXG4gIGxldCBzdHVkZW50SWQ6IHN0cmluZztcclxuICBsZXQgY291cnNlSWQ6IHN0cmluZztcclxuICBsZXQgZW5yb2xsbWVudElkOiBzdHJpbmc7XHJcblxyXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBTZXR1cDogQ3JlYXRlIHN0dWRlbnQgYW5kIGNvdXJzZVxyXG4gICAgY29uc3Qgc3R1ZGVudFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChCQVNFX1VSTClcclxuICAgICAgLnBvc3QoJy9hcGkvdjEvZW5yb2xsbWVudHMnKVxyXG4gICAgICAuc2VuZCh7XHJcbiAgICAgICAgZW1haWw6ICdhaS10ZXN0QGV4YW1wbGUuY29tJyxcclxuICAgICAgICBuYW1lOiAnQUkgVGVzdCBTdHVkZW50JyxcclxuICAgICAgICB0aWVyOiAncHJlbWl1bScsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHN0dWRlbnRJZCA9IHN0dWRlbnRSZXNwb25zZS5ib2R5LmRhdGEuaWQ7XHJcblxyXG4gICAgY29uc3QgY291cnNlUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAucG9zdCgnL2FwaS92MS9jb3Vyc2VzJylcclxuICAgICAgLnNlbmQoe1xyXG4gICAgICAgIHRpdGxlOiAnQUkgVGVzdCBDb3Vyc2UnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQ291cnNlIGZvciBBSSB0ZXN0aW5nJyxcclxuICAgICAgICB0aWVyOiAncHJlbWl1bScsXHJcbiAgICAgICAgaW5zdHJ1Y3RvcklkOiAndGVzdC1pbnN0cnVjdG9yJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgY291cnNlSWQgPSBjb3Vyc2VSZXNwb25zZS5ib2R5LmRhdGEuaWQ7XHJcblxyXG4gICAgY29uc3QgZW5yb2xsbWVudFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChCQVNFX1VSTClcclxuICAgICAgLnBvc3QoYC9hcGkvdjEvZW5yb2xsbWVudHMvJHtzdHVkZW50SWR9L2NvdXJzZXNgKVxyXG4gICAgICAuc2VuZCh7XHJcbiAgICAgICAgY291cnNlSWQsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGVucm9sbG1lbnRJZCA9IGVucm9sbG1lbnRSZXNwb25zZS5ib2R5LmRhdGEuaWQ7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IHByaXNtYS4kZGlzY29ubmVjdCgpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRWxhcmEgT3JjaGVzdHJhdG9yIFR1dG9yaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIHR1dG9yaW5nIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLnBvc3QoYC9hcGkvdjEvdHV0b3JpbmcvYXNrYClcclxuICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICBzdHVkZW50SWQsXHJcbiAgICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBpcyB0aGUgbWFpbiBjb25jZXB0PycsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdyZXNwb25zZScpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnJlc3BvbnNlLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGNvbnRleHQgaW4gdHV0b3JpbmcgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChCQVNFX1VSTClcclxuICAgICAgICAucG9zdChgL2FwaS92MS90dXRvcmluZy9hc2tgKVxyXG4gICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgIHN0dWRlbnRJZCxcclxuICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgcXVlc3Rpb246ICdFeHBsYWluIHRoZSBjb25jZXB0JyxcclxuICAgICAgICAgIGNvbnRleHQ6IHtcclxuICAgICAgICAgICAgbW9kdWxlSWQ6ICdtb2R1bGUtMScsXHJcbiAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VzOiBbXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdyZXNwb25zZScpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhKS50b0hhdmVQcm9wZXJ0eSgnY29udGV4dCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjYWNoZSB0dXRvcmluZyByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHF1ZXN0aW9uID0gJ1doYXQgaXMgY2FjaGluZz8nO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UxID0gYXdhaXQgcmVxdWVzdChCQVNFX1VSTClcclxuICAgICAgICAucG9zdChgL2FwaS92MS90dXRvcmluZy9hc2tgKVxyXG4gICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgIHN0dWRlbnRJZCxcclxuICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgcXVlc3Rpb24sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZTIgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5wb3N0KGAvYXBpL3YxL3R1dG9yaW5nL2Fza2ApXHJcbiAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgc3R1ZGVudElkLFxyXG4gICAgICAgICAgY291cnNlSWQsXHJcbiAgICAgICAgICBxdWVzdGlvbixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZTEuYm9keS5kYXRhLnJlc3BvbnNlKS50b0JlKHJlc3BvbnNlMi5ib2R5LmRhdGEucmVzcG9uc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0cmFjayB0dXRvcmluZyBoaXN0b3J5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLmdldChgL2FwaS92MS90dXRvcmluZy9oaXN0b3J5LyR7c3R1ZGVudElkfWApO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRhdGEpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdHV0b3JpbmcgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChCQVNFX1VSTClcclxuICAgICAgICAucG9zdChgL2FwaS92MS90dXRvcmluZy9hc2tgKVxyXG4gICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgIHN0dWRlbnRJZCxcclxuICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgcXVlc3Rpb246ICcnLCAvLyBFbXB0eSBxdWVzdGlvblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnS25vd2xlZGdlIE9jZWFuIENvbnRleHQgUmV0cmlldmFsJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBjb250ZXh0IGZvciB0b3BpYycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5nZXQoYC9hcGkvdjEvY29udGV4dC9yZXRyaWV2ZWApXHJcbiAgICAgICAgLnF1ZXJ5KHtcclxuICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgdG9waWM6ICdtYWluLWNvbmNlcHQnLFxyXG4gICAgICAgICAgdGllcjogJ3ByZW1pdW0nLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhKS50b0hhdmVQcm9wZXJ0eSgncmVzb3VyY2VzJyk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkuZGF0YS5yZXNvdXJjZXMpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBlbmZvcmNlIDcwLzMwIHJlc291cmNlIHJhdGlvJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLmdldChgL2FwaS92MS9jb250ZXh0L3JldHJpZXZlYClcclxuICAgICAgICAucXVlcnkoe1xyXG4gICAgICAgICAgY291cnNlSWQsXHJcbiAgICAgICAgICB0b3BpYzogJ21haW4tY29uY2VwdCcsXHJcbiAgICAgICAgICB0aWVyOiAncHJlbWl1bScsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXNvdXJjZXMgPSByZXNwb25zZS5ib2R5LmRhdGEucmVzb3VyY2VzO1xyXG4gICAgICBjb25zdCBpbnRlcm5hbENvdW50ID0gcmVzb3VyY2VzLmZpbHRlcigocjogYW55KSA9PiByLnNvdXJjZSA9PT0gJ2ludGVybmFsJykubGVuZ3RoO1xyXG4gICAgICBjb25zdCBleHRlcm5hbENvdW50ID0gcmVzb3VyY2VzLmZpbHRlcigocjogYW55KSA9PiByLnNvdXJjZSA9PT0gJ2V4dGVybmFsJykubGVuZ3RoO1xyXG4gICAgICBjb25zdCB0b3RhbCA9IGludGVybmFsQ291bnQgKyBleHRlcm5hbENvdW50O1xyXG5cclxuICAgICAgY29uc3QgaW50ZXJuYWxSYXRpbyA9IChpbnRlcm5hbENvdW50IC8gdG90YWwpICogMTAwO1xyXG4gICAgICBleHBlY3QoaW50ZXJuYWxSYXRpbykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg3MCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJhbmsgcmVzb3VyY2VzIGJ5IHJlbGV2YW5jZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5nZXQoYC9hcGkvdjEvY29udGV4dC9yZXRyaWV2ZWApXHJcbiAgICAgICAgLnF1ZXJ5KHtcclxuICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgdG9waWM6ICdtYWluLWNvbmNlcHQnLFxyXG4gICAgICAgICAgdGllcjogJ3ByZW1pdW0nLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzb3VyY2VzID0gcmVzcG9uc2UuYm9keS5kYXRhLnJlc291cmNlcztcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNvdXJjZXMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgZXhwZWN0KHJlc291cmNlc1tpXS5yZWxldmFuY2VTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChcclxuICAgICAgICAgIHJlc291cmNlc1tpICsgMV0ucmVsZXZhbmNlU2NvcmVcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgbGFuZ3VhZ2Utc3BlY2lmaWMgcmV0cmlldmFsJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLmdldChgL2FwaS92MS9jb250ZXh0L3JldHJpZXZlYClcclxuICAgICAgICAucXVlcnkoe1xyXG4gICAgICAgICAgY291cnNlSWQsXHJcbiAgICAgICAgICB0b3BpYzogJ21haW4tY29uY2VwdCcsXHJcbiAgICAgICAgICBsYW5ndWFnZTogJ2VuJyxcclxuICAgICAgICAgIHRpZXI6ICdwcmVtaXVtJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5yZXNvdXJjZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb250ZXh0IHJldHJpZXZhbCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChCQVNFX1VSTClcclxuICAgICAgICAuZ2V0KGAvYXBpL3YxL2NvbnRleHQvcmV0cmlldmVgKVxyXG4gICAgICAgIC5xdWVyeSh7XHJcbiAgICAgICAgICBjb3Vyc2VJZDogJ2ludmFsaWQtY291cnNlJyxcclxuICAgICAgICAgIHRvcGljOiAnbWFpbi1jb25jZXB0JyxcclxuICAgICAgICAgIHRpZXI6ICdwcmVtaXVtJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDA0KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29uc3RpdHV0aW9uYWwgQUkgQ29udGVudCBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjb3Vyc2UgY29udGVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5wb3N0KGAvYXBpL3YxL3F1YWxpdHkvdmFsaWRhdGUtY291cnNlYClcclxuICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICAgIGluc3RydWN0b3JJZDogJ3Rlc3QtaW5zdHJ1Y3RvcicsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdpc1ZhbGlkJyk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdmZWVkYmFjaycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjaGVjayBmb3IgYmlhcyBpbiBjb250ZW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLnBvc3QoYC9hcGkvdjEvcXVhbGl0eS92YWxpZGF0ZS1jb3Vyc2VgKVxyXG4gICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgY2hlY2tCaWFzOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhKS50b0hhdmVQcm9wZXJ0eSgnYmlhc1Njb3JlJyk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuYmlhc1Njb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmJpYXNTY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2ZXJpZnkgYWNjdXJhY3kgb2YgY29udGVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5wb3N0KGAvYXBpL3YxL3F1YWxpdHkvdmFsaWRhdGUtY291cnNlYClcclxuICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICAgIGNoZWNrQWNjdXJhY3k6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdhY2N1cmFjeVNjb3JlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNoZWNrIGNsYXJpdHkgb2YgY29udGVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5wb3N0KGAvYXBpL3YxL3F1YWxpdHkvdmFsaWRhdGUtY291cnNlYClcclxuICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICAgIGNoZWNrQ2xhcml0eTogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ2NsYXJpdHlTY29yZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhc3Nlc3NtZW50IHF1ZXN0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5wb3N0KGAvYXBpL3YxL3F1YWxpdHkvdmFsaWRhdGUtYXNzZXNzbWVudGApXHJcbiAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgY291cnNlSWQsXHJcbiAgICAgICAgICBxdWVzdGlvbnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlkOiAncTEnLFxyXG4gICAgICAgICAgICAgIHRleHQ6ICdXaGF0IGlzIHRoZSBjb25jZXB0PycsXHJcbiAgICAgICAgICAgICAgb3B0aW9uczogWydBJywgJ0InLCAnQycsICdEJ10sXHJcbiAgICAgICAgICAgICAgY29ycmVjdEFuc3dlcjogJ0EnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ2lzVmFsaWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgdGVhY2hlciBmZWVkYmFjaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5wb3N0KGAvYXBpL3YxL3F1YWxpdHkvdmFsaWRhdGUtZmVlZGJhY2tgKVxyXG4gICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgZmVlZGJhY2s6ICdHcmVhdCB3b3JrIG9uIHRoaXMgYXNzaWdubWVudCEnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhKS50b0hhdmVQcm9wZXJ0eSgnaXNWYWxpZCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdBSSBFcnJvciBIYW5kbGluZyBhbmQgRmFsbGJhY2tzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdHV0b3JpbmcgdGltZW91dCBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLnBvc3QoYC9hcGkvdjEvdHV0b3JpbmcvYXNrYClcclxuICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICBzdHVkZW50SWQsXHJcbiAgICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICAgIHF1ZXN0aW9uOiAnQ29tcGxleCBxdWVzdGlvbicsXHJcbiAgICAgICAgICB0aW1lb3V0OiAxMDAsIC8vIFZlcnkgc2hvcnQgdGltZW91dFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU2hvdWxkIGVpdGhlciBzdWNjZWVkIG9yIHJldHVybiBncmFjZWZ1bCBlcnJvclxyXG4gICAgICBleHBlY3QoWzIwMCwgNDA4LCA1MDRdKS50b0NvbnRhaW4ocmVzcG9uc2Uuc3RhdHVzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBmYWxsYmFjayByZXNwb25zZSBvbiBBSSBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLnBvc3QoYC9hcGkvdjEvdHV0b3JpbmcvYXNrYClcclxuICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICBzdHVkZW50SWQsXHJcbiAgICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICAgIHF1ZXN0aW9uOiAnVGVzdCBxdWVzdGlvbicsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBTaG91bGQgYWx3YXlzIHJldHVybiBhIHJlc3BvbnNlXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3Jlc3BvbnNlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHJ5IGZhaWxlZCBBSSByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5wb3N0KGAvYXBpL3YxL3R1dG9yaW5nL2Fza2ApXHJcbiAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgc3R1ZGVudElkLFxyXG4gICAgICAgICAgY291cnNlSWQsXHJcbiAgICAgICAgICBxdWVzdGlvbjogJ1Rlc3QgcXVlc3Rpb24nLFxyXG4gICAgICAgICAgcmV0cnlDb3VudDogMyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbG9nIEFJIGVycm9ycyBmb3IgbW9uaXRvcmluZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5nZXQoYC9hcGkvdjEvbW9uaXRvcmluZy9sb2dzYClcclxuICAgICAgICAucXVlcnkoe1xyXG4gICAgICAgICAgZmlsdGVyOiAnYWlfZXJyb3InLFxyXG4gICAgICAgICAgbGltaXQ6IDEwLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRhdGEpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdBSSBQZXJmb3JtYW5jZSBNZXRyaWNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB0cmFjayB0dXRvcmluZyBsYXRlbmN5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLmdldChgL2FwaS92MS9tb25pdG9yaW5nL21ldHJpY3NgKVxyXG4gICAgICAgIC5xdWVyeSh7XHJcbiAgICAgICAgICBtZXRyaWM6ICdhaV9xdWVyeV9kdXJhdGlvbicsXHJcbiAgICAgICAgICBlbmdpbmU6ICdlbGFyYScsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdwOTUnKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5wOTUpLnRvQmVMZXNzVGhhbig1MDAwKTsgLy8gNSBzZWNvbmRzXHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIEFJIGVycm9yIHJhdGVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoQkFTRV9VUkwpXHJcbiAgICAgICAgLmdldChgL2FwaS92MS9tb25pdG9yaW5nL21ldHJpY3NgKVxyXG4gICAgICAgIC5xdWVyeSh7XHJcbiAgICAgICAgICBtZXRyaWM6ICdhaV9lcnJvcl9yYXRlJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ2Vycm9yUmF0ZScpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmVycm9yUmF0ZSkudG9CZUxlc3NUaGFuKDEwKTsgLy8gTGVzcyB0aGFuIDEwJVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBjb250ZXh0IHJldHJpZXZhbCBwZXJmb3JtYW5jZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5nZXQoYC9hcGkvdjEvbW9uaXRvcmluZy9tZXRyaWNzYClcclxuICAgICAgICAucXVlcnkoe1xyXG4gICAgICAgICAgbWV0cmljOiAnYWlfcXVlcnlfZHVyYXRpb24nLFxyXG4gICAgICAgICAgZW5naW5lOiAna25vd2xlZGdlLW9jZWFuJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3A5NScpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdNdWx0aS1BSSBPcmNoZXN0cmF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjb29yZGluYXRlIG11bHRpcGxlIEFJIGVuZ2luZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChCQVNFX1VSTClcclxuICAgICAgICAucG9zdChgL2FwaS92MS90dXRvcmluZy9hc2tgKVxyXG4gICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgIHN0dWRlbnRJZCxcclxuICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgcXVlc3Rpb246ICdDb21wbGV4IHF1ZXN0aW9uIHJlcXVpcmluZyBtdWx0aXBsZSBBSSBlbmdpbmVzJyxcclxuICAgICAgICAgIHVzZU11bHRpcGxlRW5naW5lczogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3Jlc3BvbnNlJyk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlbmdpbmVzVXNlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBBSSByZXNwb25zZXMgd2l0aCBDb25zdGl0dXRpb25hbCBBSScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KEJBU0VfVVJMKVxyXG4gICAgICAgIC5wb3N0KGAvYXBpL3YxL3R1dG9yaW5nL2Fza2ApXHJcbiAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgc3R1ZGVudElkLFxyXG4gICAgICAgICAgY291cnNlSWQsXHJcbiAgICAgICAgICBxdWVzdGlvbjogJ1Rlc3QgcXVlc3Rpb24nLFxyXG4gICAgICAgICAgdmFsaWRhdGVSZXNwb25zZTogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3ZhbGlkYXRlZCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBS0EsSUFBQUEsVUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRCxPQUFBO0FBQThDLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBTjlDO0FBQ0E7QUFDQTtBQUNBOztBQUtBLE1BQU1HLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU8sSUFBSSx1QkFBdUI7QUFDL0QsTUFBTUMsTUFBTSxHQUFHLElBQUlDLG9CQUFZLENBQUMsQ0FBQztBQUVqQ0MsUUFBUSxDQUFDLHFCQUFxQixFQUFFLE1BQU07RUFDcEMsSUFBSUMsU0FBaUI7RUFDckIsSUFBSUMsUUFBZ0I7RUFDcEIsSUFBSUMsWUFBb0I7RUFFeEJDLFNBQVMsQ0FBQyxZQUFZO0lBQ3BCO0lBQ0EsTUFBTUMsZUFBZSxHQUFHLE1BQU0sSUFBQUMsa0JBQU8sRUFBQ1osUUFBUSxDQUFDLENBQzVDYSxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FDM0JDLElBQUksQ0FBQztNQUNKQyxLQUFL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