{"version":3,"names":["cov_1wt69dkjgb","actualCoverage","createLogger","LogLevel","s","require","EventBus","AuditLoggingService","constructor","f","logger","eventBus","auditLogs","logSecurityEvent","userId","action","resource","details","b","auditEntry","id","generateId","type","timestamp","Date","severity","determineSeverity","push","info","publish","logUserAction","logSystemEvent","service","logDataAccess","getAuditLogs","filters","filteredLogs","filter","log","startDate","endDate","sort","a","page","limit","startIndex","endIndex","logs","slice","total","length","now","toString","Math","random","substr","highSeverityActions","mediumSeverityActions","includes","getSecurityStats","securityLogs","stats","totalEvents","highSeverity","mediumSeverity","lowSeverity","recentEvents","clearOldLogs","retentionDays","cutoffDate","setDate","getDate","initialCount","removedCount","module","exports"],"sources":["index.js"],"sourcesContent":["const { createLogger, LogLevel } = require('@azora/shared-services/logging');\nconst { EventBus } = require('@azora/shared-services/event-bus');\n\nclass AuditLoggingService {\n  constructor() {\n    this.logger = createLogger('AuditLoggingService');\n    this.eventBus = new EventBus();\n    this.auditLogs = [];\n  }\n\n  /**\n   * Log a security-related event\n   */\n  logSecurityEvent(userId, action, resource, details = {}) {\n    const auditEntry = {\n      id: this.generateId(),\n      type: 'security',\n      userId,\n      action,\n      resource,\n      timestamp: new Date(),\n      details,\n      severity: this.determineSeverity(action, details)\n    };\n\n    this.auditLogs.push(auditEntry);\n    this.logger.info(`Security event logged: ${action} on ${resource}`, { userId, action, resource });\n\n    // Emit event for real-time monitoring\n    this.eventBus.publish('audit.security', auditEntry);\n\n    return auditEntry;\n  }\n\n  /**\n   * Log a user action event\n   */\n  logUserAction(userId, action, resource, details = {}) {\n    const auditEntry = {\n      id: this.generateId(),\n      type: 'user_action',\n      userId,\n      action,\n      resource,\n      timestamp: new Date(),\n      details\n    };\n\n    this.auditLogs.push(auditEntry);\n    this.logger.info(`User action logged: ${action} on ${resource}`, { userId, action, resource });\n\n    // Emit event for real-time monitoring\n    this.eventBus.publish('audit.user_action', auditEntry);\n\n    return auditEntry;\n  }\n\n  /**\n   * Log a system event\n   */\n  logSystemEvent(service, action, details = {}) {\n    const auditEntry = {\n      id: this.generateId(),\n      type: 'system',\n      service,\n      action,\n      timestamp: new Date(),\n      details\n    };\n\n    this.auditLogs.push(auditEntry);\n    this.logger.info(`System event logged: ${action} in ${service}`, { service, action });\n\n    // Emit event for real-time monitoring\n    this.eventBus.publish('audit.system', auditEntry);\n\n    return auditEntry;\n  }\n\n  /**\n   * Log a data access event\n   */\n  logDataAccess(userId, action, resource, details = {}) {\n    const auditEntry = {\n      id: this.generateId(),\n      type: 'data_access',\n      userId,\n      action,\n      resource,\n      timestamp: new Date(),\n      details\n    };\n\n    this.auditLogs.push(auditEntry);\n    this.logger.info(`Data access logged: ${action} on ${resource}`, { userId, action, resource });\n\n    // Emit event for real-time monitoring\n    this.eventBus.publish('audit.data_access', auditEntry);\n\n    return auditEntry;\n  }\n\n  /**\n   * Get audit logs with filtering options\n   */\n  getAuditLogs(filters = {}) {\n    let filteredLogs = [...this.auditLogs];\n\n    // Apply filters\n    if (filters.type) {\n      filteredLogs = filteredLogs.filter(log => log.type === filters.type);\n    }\n\n    if (filters.userId) {\n      filteredLogs = filteredLogs.filter(log => log.userId === filters.userId);\n    }\n\n    if (filters.action) {\n      filteredLogs = filteredLogs.filter(log => log.action === filters.action);\n    }\n\n    if (filters.resource) {\n      filteredLogs = filteredLogs.filter(log => log.resource === filters.resource);\n    }\n\n    if (filters.startDate) {\n      filteredLogs = filteredLogs.filter(log => log.timestamp >= new Date(filters.startDate));\n    }\n\n    if (filters.endDate) {\n      filteredLogs = filteredLogs.filter(log => log.timestamp <= new Date(filters.endDate));\n    }\n\n    // Sort by timestamp (newest first)\n    filteredLogs.sort((a, b) => b.timestamp - a.timestamp);\n\n    // Apply pagination\n    const page = filters.page || 1;\n    const limit = filters.limit || 50;\n    const startIndex = (page - 1) * limit;\n    const endIndex = startIndex + limit;\n\n    return {\n      logs: filteredLogs.slice(startIndex, endIndex),\n      total: filteredLogs.length,\n      page,\n      limit\n    };\n  }\n\n  /**\n   * Generate a unique ID for audit entries\n   */\n  generateId() {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\n  }\n\n  /**\n   * Determine severity level for security events\n   */\n  determineSeverity(action, details) {\n    const highSeverityActions = [\n      'login_failed', 'password_reset', 'account_locked',\n      'unauthorized_access', 'data_breach', 'suspicious_activity'\n    ];\n\n    const mediumSeverityActions = [\n      'login_success', 'logout', 'password_changed',\n      'profile_updated', 'permission_changed'\n    ];\n\n    if (highSeverityActions.includes(action)) {\n      return 'high';\n    } else if (mediumSeverityActions.includes(action)) {\n      return 'medium';\n    } else {\n      return 'low';\n    }\n  }\n\n  /**\n   * Get security statistics\n   */\n  getSecurityStats() {\n    const securityLogs = this.auditLogs.filter(log => log.type === 'security');\n\n    const stats = {\n      totalEvents: securityLogs.length,\n      highSeverity: securityLogs.filter(log => log.severity === 'high').length,\n      mediumSeverity: securityLogs.filter(log => log.severity === 'medium').length,\n      lowSeverity: securityLogs.filter(log => log.severity === 'low').length,\n      recentEvents: securityLogs.slice(-10)\n    };\n\n    return stats;\n  }\n\n  /**\n   * Clear old audit logs (retention policy)\n   */\n  clearOldLogs(retentionDays = 90) {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - retentionDays);\n\n    const initialCount = this.auditLogs.length;\n    this.auditLogs = this.auditLogs.filter(log => log.timestamp >= cutoffDate);\n    const removedCount = initialCount - this.auditLogs.length;\n\n    this.logger.info(`Cleared ${removedCount} old audit logs`, { retentionDays });\n\n    return removedCount;\n  }\n}\n\nmodule.exports = new AuditLoggingService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}