{"version":3,"names":["_getJestObj","mock","_ComponentStyleRefactor","require","fs","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","jest","describe","refactor","mockProjectRoot","beforeEach","ComponentStyleRefactor","clearAllMocks","it","classMapping","mockComponent","glob","mockResolvedValue","promises","readFile","components","identifyComponentsWithOldStyles","expect","length","toBeGreaterThan","classNames","toContain","filePath","componentName","hasInlineStyles","hasCSSModule","hasCustomOverrides","inlineStyles","cssModuleClasses","mockContent","changes","applyTailwindTransformations","toBe","content","not","line","property","value","context","result","refactorComponents","filesProcessed","toBeGreaterThanOrEqual","toBeDefined","Array","isArray"],"sources":["ComponentStyleRefactor.test.ts"],"sourcesContent":["import { ComponentStyleRefactor } from '../ComponentStyleRefactor';\nimport { ClassMapping } from '../DesignFilterEngine';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n// Mock fs and glob\njest.mock('fs');\njest.mock('glob');\n\ndescribe('ComponentStyleRefactor', () => {\n  let refactor: ComponentStyleRefactor;\n  const mockProjectRoot = '/mock/project';\n\n  beforeEach(() => {\n    refactor = new ComponentStyleRefactor(mockProjectRoot);\n    jest.clearAllMocks();\n  });\n\n  describe('identifyComponentsWithOldStyles', () => {\n    it('should identify components with old Tailwind classes', async () => {\n      const classMapping: ClassMapping = {\n        'bg-blue-500': 'bg-primary-500',\n        'text-gray-900': 'text-neutral-900',\n      };\n\n      const mockComponent = `\n        import React from 'react';\n        \n        export const Button = () => {\n          return <button className=\"bg-blue-500 text-gray-900\">Click me</button>;\n        };\n      `;\n\n      // Mock glob to return test files\n      const { glob } = require('glob');\n      glob.mockResolvedValue(['/mock/project/Button.tsx']);\n\n      // Mock fs.promises.readFile\n      (fs.promises.readFile as jest.Mock).mockResolvedValue(mockComponent);\n\n      const components = await refactor.identifyComponentsWithOldStyles(classMapping);\n\n      expect(components.length).toBeGreaterThan(0);\n      expect(components[0].classNames).toContain('bg-blue-500');\n      expect(components[0].classNames).toContain('text-gray-900');\n    });\n  });\n\n  describe('applyTailwindTransformations', () => {\n    it('should transform className attributes', async () => {\n      const classMapping: ClassMapping = {\n        'bg-blue-500': 'bg-primary-500',\n        'text-gray-900': 'text-neutral-900',\n      };\n\n      const mockComponent = {\n        filePath: '/mock/project/Button.tsx',\n        componentName: 'Button',\n        hasInlineStyles: false,\n        hasCSSModule: false,\n        hasCustomOverrides: false,\n        classNames: ['bg-blue-500', 'text-gray-900'],\n        inlineStyles: [],\n        cssModuleClasses: [],\n      };\n\n      const mockContent = `\n        import React from 'react';\n        \n        export const Button = () => {\n          return <button className=\"bg-blue-500 text-gray-900\">Click me</button>;\n        };\n      `;\n\n      (fs.promises.readFile as jest.Mock).mockResolvedValue(mockContent);\n\n      const changes = await refactor.applyTailwindTransformations([mockComponent], classMapping);\n\n      expect(changes.length).toBe(1);\n      expect(changes[0].content).toContain('bg-primary-500');\n      expect(changes[0].content).toContain('text-neutral-900');\n      expect(changes[0].content).not.toContain('bg-blue-500');\n    });\n\n    it('should convert inline styles to Tailwind classes', async () => {\n      const classMapping: ClassMapping = {};\n\n      const mockComponent = {\n        filePath: '/mock/project/Card.tsx',\n        componentName: 'Card',\n        hasInlineStyles: true,\n        hasCSSModule: false,\n        hasCustomOverrides: false,\n        classNames: [],\n        inlineStyles: [\n          { line: 5, property: 'display', value: 'flex', context: 'style={{display: \"flex\"}}' },\n        ],\n        cssModuleClasses: [],\n      };\n\n      const mockContent = `\n        import React from 'react';\n        \n        export const Card = () => {\n          return <div style={{display: 'flex'}}>Content</div>;\n        };\n      `;\n\n      (fs.promises.readFile as jest.Mock).mockResolvedValue(mockContent);\n\n      const changes = await refactor.applyTailwindTransformations([mockComponent], classMapping);\n\n      expect(changes.length).toBe(1);\n      expect(changes[0].content).toContain('className=\"flex\"');\n    });\n\n    it('should preserve custom overrides', async () => {\n      const classMapping: ClassMapping = {\n        'bg-blue-500': 'bg-primary-500',\n      };\n\n      const mockComponent = {\n        filePath: '/mock/project/Custom.tsx',\n        componentName: 'Custom',\n        hasInlineStyles: false,\n        hasCSSModule: false,\n        hasCustomOverrides: true,\n        classNames: ['bg-blue-500'],\n        inlineStyles: [],\n        cssModuleClasses: [],\n      };\n\n      const mockContent = `\n        import React from 'react';\n        \n        export const Custom = () => {\n          return (\n            <div>\n              {/* custom */}\n              <button className=\"bg-blue-500\">Original</button>\n            </div>\n          );\n        };\n      `;\n\n      (fs.promises.readFile as jest.Mock).mockResolvedValue(mockContent);\n\n      const changes = await refactor.applyTailwindTransformations([mockComponent], classMapping);\n\n      expect(changes.length).toBe(1);\n      // Custom override line should be preserved\n      expect(changes[0].content).toContain('/* custom */');\n    });\n  });\n\n  describe('refactorComponents', () => {\n    it('should return refactor statistics', async () => {\n      const classMapping: ClassMapping = {\n        'bg-blue-500': 'bg-primary-500',\n      };\n\n      const { glob } = require('glob');\n      glob.mockResolvedValue(['/mock/project/Button.tsx']);\n\n      const mockContent = `\n        import React from 'react';\n        export const Button = () => <button className=\"bg-blue-500\">Click</button>;\n      `;\n\n      (fs.promises.readFile as jest.Mock).mockResolvedValue(mockContent);\n\n      const result = await refactor.refactorComponents(classMapping);\n\n      expect(result.filesProcessed).toBeGreaterThanOrEqual(0);\n      expect(result.changes).toBeDefined();\n      expect(Array.isArray(result.changes)).toBe(true);\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}