5bf6f8e09f155a691a89e0fe8daffcec
"use strict";

var _tokenMinter = require("../src/token-minter");
var _economicPolicy = require("../src/economic-policy");
describe('TokenMinter', () => {
  let minter;
  let economicPolicy;
  beforeEach(() => {
    economicPolicy = new _economicPolicy.EconomicPolicyEngine();
    minter = new _tokenMinter.TokenMinter(economicPolicy);
  });
  it('should create a wallet', () => {
    const wallet = minter.createWallet('user1');
    expect(wallet).toHaveProperty('address');
    expect(wallet.balance).toBe(0);
    expect(wallet.staked).toBe(0);
  });
  it('should mint rewards', () => {
    const wallet = minter.createWallet('user1');
    const result = minter.mintReward(wallet.address, 100, 'test');
    expect(result.success).toBe(true);
    expect(result.balance).toBe(100);
  });
  it('should transfer tokens', () => {
    const wallet1 = minter.createWallet('user1');
    const wallet2 = minter.createWallet('user2');
    minter.mintReward(wallet1.address, 100, 'test');
    const result = minter.transfer(wallet1.address, wallet2.address, 50);
    expect(result.success).toBe(true);
    expect(result.from).toBe(50);
    expect(result.to).toBe(50);
  });
  it('should stake tokens', () => {
    const wallet = minter.createWallet('user1');
    minter.mintReward(wallet.address, 100, 'test');
    const result = minter.stake(wallet.address, 50);
    expect(result.success).toBe(true);
    expect(result.staked).toBe(50);
    expect(result.balance).toBe(50);
  });
  it('should unstake tokens', () => {
    const wallet = minter.createWallet('user1');
    minter.mintReward(wallet.address, 100, 'test');
    minter.stake(wallet.address, 50);
    const result = minter.unstake(wallet.address, 50);
    expect(result.success).toBe(true);
    expect(result.staked).toBe(0);
    expect(result.balance).toBe(100);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdG9rZW5NaW50ZXIiLCJyZXF1aXJlIiwiX2Vjb25vbWljUG9saWN5IiwiZGVzY3JpYmUiLCJtaW50ZXIiLCJlY29ub21pY1BvbGljeSIsImJlZm9yZUVhY2giLCJFY29ub21pY1BvbGljeUVuZ2luZSIsIlRva2VuTWludGVyIiwiaXQiLCJ3YWxsZXQiLCJjcmVhdGVXYWxsZXQiLCJleHBlY3QiLCJ0b0hhdmVQcm9wZXJ0eSIsImJhbGFuY2UiLCJ0b0JlIiwic3Rha2VkIiwicmVzdWx0IiwibWludFJld2FyZCIsImFkZHJlc3MiLCJzdWNjZXNzIiwid2FsbGV0MSIsIndhbGxldDIiLCJ0cmFuc2ZlciIsImZyb20iLCJ0byIsInN0YWtlIiwidW5zdGFrZSJdLCJzb3VyY2VzIjpbIm1pbnQudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUb2tlbk1pbnRlciB9IGZyb20gJy4uL3NyYy90b2tlbi1taW50ZXInO1xyXG5pbXBvcnQgeyBFY29ub21pY1BvbGljeUVuZ2luZSB9IGZyb20gJy4uL3NyYy9lY29ub21pYy1wb2xpY3knO1xyXG5cclxuZGVzY3JpYmUoJ1Rva2VuTWludGVyJywgKCkgPT4ge1xyXG4gIGxldCBtaW50ZXI6IFRva2VuTWludGVyO1xyXG4gIGxldCBlY29ub21pY1BvbGljeTogRWNvbm9taWNQb2xpY3lFbmdpbmU7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgZWNvbm9taWNQb2xpY3kgPSBuZXcgRWNvbm9taWNQb2xpY3lFbmdpbmUoKTtcclxuICAgIG1pbnRlciA9IG5ldyBUb2tlbk1pbnRlcihlY29ub21pY1BvbGljeSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgY3JlYXRlIGEgd2FsbGV0JywgKCkgPT4ge1xyXG4gICAgY29uc3Qgd2FsbGV0ID0gbWludGVyLmNyZWF0ZVdhbGxldCgndXNlcjEnKTtcclxuICAgIGV4cGVjdCh3YWxsZXQpLnRvSGF2ZVByb3BlcnR5KCdhZGRyZXNzJyk7XHJcbiAgICBleHBlY3Qod2FsbGV0LmJhbGFuY2UpLnRvQmUoMCk7XHJcbiAgICBleHBlY3Qod2FsbGV0LnN0YWtlZCkudG9CZSgwKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBtaW50IHJld2FyZHMnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB3YWxsZXQgPSBtaW50ZXIuY3JlYXRlV2FsbGV0KCd1c2VyMScpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gbWludGVyLm1pbnRSZXdhcmQod2FsbGV0LmFkZHJlc3MsIDEwMCwgJ3Rlc3QnKTtcclxuICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgIGV4cGVjdChyZXN1bHQuYmFsYW5jZSkudG9CZSgxMDApO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIHRyYW5zZmVyIHRva2VucycsICgpID0+IHtcclxuICAgIGNvbnN0IHdhbGxldDEgPSBtaW50ZXIuY3JlYXRlV2FsbGV0KCd1c2VyMScpO1xyXG4gICAgY29uc3Qgd2FsbGV0MiA9IG1pbnRlci5jcmVhdGVXYWxsZXQoJ3VzZXIyJyk7XHJcbiAgICBtaW50ZXIubWludFJld2FyZCh3YWxsZXQxLmFkZHJlc3MsIDEwMCwgJ3Rlc3QnKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IG1pbnRlci50cmFuc2Zlcih3YWxsZXQxLmFkZHJlc3MsIHdhbGxldDIuYWRkcmVzcywgNTApO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5mcm9tKS50b0JlKDUwKTtcclxuICAgIGV4cGVjdChyZXN1bHQudG8pLnRvQmUoNTApO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIHN0YWtlIHRva2VucycsICgpID0+IHtcclxuICAgIGNvbnN0IHdhbGxldCA9IG1pbnRlci5jcmVhdGVXYWxsZXQoJ3VzZXIxJyk7XHJcbiAgICBtaW50ZXIubWludFJld2FyZCh3YWxsZXQuYWRkcmVzcywgMTAwLCAndGVzdCcpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gbWludGVyLnN0YWtlKHdhbGxldC5hZGRyZXNzLCA1MCk7XHJcbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LnN0YWtlZCkudG9CZSg1MCk7XHJcbiAgICBleHBlY3QocmVzdWx0LmJhbGFuY2UpLnRvQmUoNTApO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIHVuc3Rha2UgdG9rZW5zJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgd2FsbGV0ID0gbWludGVyLmNyZWF0ZVdhbGxldCgndXNlcjEnKTtcclxuICAgIG1pbnRlci5taW50UmV3YXJkKHdhbGxldC5hZGRyZXNzLCAxMDAsICd0ZXN0Jyk7XHJcbiAgICBtaW50ZXIuc3Rha2Uod2FsbGV0LmFkZHJlc3MsIDUwKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IG1pbnRlci51bnN0YWtlKHdhbGxldC5hZGRyZXNzLCA1MCk7XHJcbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LnN0YWtlZCkudG9CZSgwKTtcclxuICAgIGV4cGVjdChyZXN1bHQuYmFsYW5jZSkudG9CZSgxMDApO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLFlBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUVBRSxRQUFRLENBQUMsYUFBYSxFQUFFLE1BQU07RUFDNUIsSUFBSUMsTUFBbUI7RUFDdkIsSUFBSUMsY0FBb0M7RUFFeENDLFVBQVUsQ0FBQyxNQUFNO0lBQ2ZELGNBQWMsR0FBRyxJQUFJRSxvQ0FBb0IsQ0FBQyxDQUFDO0lBQzNDSCxNQUFNLEdBQUcsSUFBSUksd0JBQVcsQ0FBQ0gsY0FBYyxDQUFDO0VBQzFDLENBQUMsQ0FBQztFQUVGSSxFQUFFLENBQUMsd0JBQXdCLEVBQUUsTUFBTTtJQUNqQyxNQUFNQyxNQUFNLEdBQUdOLE1BQU0s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