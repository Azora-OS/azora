b28d0eadc6ac5f457ab9fec80f3e3010
"use strict";

/**
 * Test Optimization Utilities
 * Implements database transaction rollback, Redis pipeline operations, and caching
 */

const {
  PrismaClient
} = require('@prisma/client');
const Redis = require('ioredis');
class TestOptimizer {
  constructor() {
    this.prisma = null;
    this.redis = null;
    this.transactionStack = [];
    this.mockCache = new Map();
    this.initialized = false;
  }
  async initialize() {
    if (this.initialized) return;

    // Initialize Prisma with transaction support
    this.prisma = new PrismaClient({
      datasources: {
        db: {
          url: process.env.DATABASE_URL || 'postgresql://test:test@localhost:5432/azora_test'
        }
      }
    });

    // Initialize Redis with pipeline support
    this.redis = new Redis({
      host: process.env.REDIS_HOST || 'localhost',
      port: process.env.REDIS_PORT || 6379,
      retryDelayOnFailover: 100,
      maxRetriesPerRequest: 3,
      lazyConnect: true
    });
    await this.redis.connect();
    this.initialized = true;
  }

  /**
   * Start a database transaction for test isolation
   */
  async startTransaction() {
    if (!this.initialized) await this.initialize();
    const transaction = await this.prisma.$begin();
    this.transactionStack.push(transaction);
    return transaction;
  }

  /**
   * Rollback the current transaction
   */
  async rollbackTransaction() {
    if (this.transactionStack.length === 0) return;
    const transaction = this.transactionStack.pop();
    await transaction.$rollback();
  }

  /**
   * Execute Redis operations in pipeline for better performance
   */
  async executeRedisPipeline(operations) {
    if (!this.initialized) await this.initialize();
    const pipeline = this.redis.pipeline();
    operations.forEach(op => {
      pipeline[op.command](...op.args);
    });
    return await pipeline.exec();
  }

  /**
   * Cache mock responses to avoid repeated computation
   */
  cacheMockResponse(key, response) {
    this.mockCache.set(key, {
      response,
      timestamp: Date.now()
    });
  }

  /**
   * Get cached mock response if still valid
   */
  getCachedMockResponse(key, maxAge = 300000) {
    // 5 minutes default
    const cached = this.mockCache.get(key);
    if (!cached) return null;
    if (Date.now() - cached.timestamp > maxAge) {
      this.mockCache.delete(key);
      return null;
    }
    return cached.response;
  }

  /**
   * Batch database operations for better performance
   */
  async batchDatabaseOperations(operations) {
    if (!this.initialized) await this.initialize();
    const transaction = await this.startTransaction();
    try {
      const results = [];
      for (const op of operations) {
        const result = await transaction[op.model][op.operation](op.data);
        results.push(result);
      }
      await transaction.$commit();
      return results;
    } catch (error) {
      await this.rollbackTransaction();
      throw error;
    }
  }

  /**
   * Clean up resources
   */
  async cleanup() {
    // Rollback any pending transactions
    while (this.transactionStack.length > 0) {
      await this.rollbackTransaction();
    }

    // Clear mock cache
    this.mockCache.clear();

    // Close connections
    if (this.prisma) {
      await this.prisma.$disconnect();
    }
    if (this.redis) {
      await this.redis.disconnect();
    }
    this.initialized = false;
  }

  /**
   * Setup test environment with optimizations
   */
  async setupTestEnvironment() {
    await this.initialize();

    // Start fresh transaction for test isolation
    await this.startTransaction();

    // Clear Redis test data
    await this.redis.flushdb();

    // Setup test-specific optimizations
    await this.executeRedisPipeline([{
      command: 'set',
      args: ['test:session', 'active']
    }, {
      command: 'expire',
      args: ['test:session', 3600]
    }]);
  }

  /**
   * Teardown test environment
   */
  async teardownTestEnvironment() {
    // Rollback database changes
    await this.rollbackTransaction();

    // Clear Redis test data
    if (this.redis && this.redis.status === 'ready') {
      await this.redis.flushdb();
    }
  }
}

// Singleton instance
const testOptimizer = new TestOptimizer();

// Jest setup helpers
const setupOptimizedTest = async () => {
  await testOptimizer.setupTestEnvironment();
};
const teardownOptimizedTest = async () => {
  await testOptimizer.teardownTestEnvironment();
};

// Global cleanup
const globalCleanup = async () => {
  await testOptimizer.cleanup();
};
module.exports = {
  TestOptimizer,
  testOptimizer,
  setupOptimizedTest,
  teardownOptimizedTest,
  globalCleanup
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJyZXF1aXJlIiwiUmVkaXMiLCJUZXN0T3B0aW1pemVyIiwiY29uc3RydWN0b3IiLCJwcmlzbWEiLCJyZWRpcyIsInRyYW5zYWN0aW9uU3RhY2siLCJtb2NrQ2FjaGUiLCJNYXAiLCJpbml0aWFsaXplZCIsImluaXRpYWxpemUiLCJkYXRhc291cmNlcyIsImRiIiwidXJsIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsImhvc3QiLCJSRURJU19IT1NUIiwicG9ydCIsIlJFRElTX1BPUlQiLCJyZXRyeURlbGF5T25GYWlsb3ZlciIsIm1heFJldHJpZXNQZXJSZXF1ZXN0IiwibGF6eUNvbm5lY3QiLCJjb25uZWN0Iiwic3RhcnRUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uIiwiJGJlZ2luIiwicHVzaCIsInJvbGxiYWNrVHJhbnNhY3Rpb24iLCJsZW5ndGgiLCJwb3AiLCIkcm9sbGJhY2siLCJleGVjdXRlUmVkaXNQaXBlbGluZSIsIm9wZXJhdGlvbnMiLCJwaXBlbGluZSIsImZvckVhY2giLCJvcCIsImNvbW1hbmQiLCJhcmdzIiwiZXhlYyIsImNhY2hlTW9ja1Jlc3BvbnNlIiwia2V5IiwicmVzcG9uc2UiLCJzZXQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiZ2V0Q2FjaGVkTW9ja1Jlc3BvbnNlIiwibWF4QWdlIiwiY2FjaGVkIiwiZ2V0IiwiZGVsZXRlIiwiYmF0Y2hEYXRhYmFzZU9wZXJhdGlvbnMiLCJyZXN1bHRzIiwicmVzdWx0IiwibW9kZWwiLCJvcGVyYXRpb24iLCJkYXRhIiwiJGNvbW1pdCIsImVycm9yIiwiY2xlYW51cCIsImNsZWFyIiwiJGRpc2Nvbm5lY3QiLCJkaXNjb25uZWN0Iiwic2V0dXBUZXN0RW52aXJvbm1lbnQiLCJmbHVzaGRiIiwidGVhcmRvd25UZXN0RW52aXJvbm1lbnQiLCJzdGF0dXMiLCJ0ZXN0T3B0aW1pemVyIiwic2V0dXBPcHRpbWl6ZWRUZXN0IiwidGVhcmRvd25PcHRpbWl6ZWRUZXN0IiwiZ2xvYmFsQ2xlYW51cCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ0ZXN0LW9wdGltaXphdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3QgT3B0aW1pemF0aW9uIFV0aWxpdGllc1xuICogSW1wbGVtZW50cyBkYXRhYmFzZSB0cmFuc2FjdGlvbiByb2xsYmFjaywgUmVkaXMgcGlwZWxpbmUgb3BlcmF0aW9ucywgYW5kIGNhY2hpbmdcbiAqL1xuXG5jb25zdCB7IFByaXNtYUNsaWVudCB9ID0gcmVxdWlyZSgnQHByaXNtYS9jbGllbnQnKTtcbmNvbnN0IFJlZGlzID0gcmVxdWlyZSgnaW9yZWRpcycpO1xuXG5jbGFzcyBUZXN0T3B0aW1pemVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcmlzbWEgPSBudWxsO1xuICAgIHRoaXMucmVkaXMgPSBudWxsO1xuICAgIHRoaXMudHJhbnNhY3Rpb25TdGFjayA9IFtdO1xuICAgIHRoaXMubW9ja0NhY2hlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVybjtcblxuICAgIC8vIEluaXRpYWxpemUgUHJpc21hIHdpdGggdHJhbnNhY3Rpb24gc3VwcG9ydFxuICAgIHRoaXMucHJpc21hID0gbmV3IFByaXNtYUNsaWVudCh7XG4gICAgICBkYXRhc291cmNlczoge1xuICAgICAgICBkYjoge1xuICAgICAgICAgIHVybDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIHx8ICdwb3N0Z3Jlc3FsOi8vdGVzdDp0ZXN0QGxvY2FsaG9zdDo1NDMyL2F6b3JhX3Rlc3QnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEluaXRpYWxpemUgUmVkaXMgd2l0aCBwaXBlbGluZSBzdXBwb3J0XG4gICAgdGhpcy5yZWRpcyA9IG5ldyBSZWRpcyh7XG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5SRURJU19IT1NUIHx8ICdsb2NhbGhvc3QnLFxuICAgICAgcG9ydDogcHJvY2Vzcy5lbnYuUkVESVNfUE9SVCB8fCA2Mzc5LFxuICAgICAgcmV0cnlEZWxheU9uRmFpbG92ZXI6IDEwMCxcbiAgICAgIG1heFJldHJpZXNQZXJSZXF1ZXN0OiAzLFxuICAgICAgbGF6eUNvbm5lY3Q6IHRydWVcbiAgICB9KTtcblxuICAgIGF3YWl0IHRoaXMucmVkaXMuY29ubmVjdCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGEgZGF0YWJhc2UgdHJhbnNhY3Rpb24gZm9yIHRlc3QgaXNvbGF0aW9uXG4gICAqL1xuICBhc3luYyBzdGFydFRyYW5zYWN0aW9uKCkge1xuICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnByaXNtYS4kYmVnaW4oKTtcbiAgICB0aGlzLnRyYW5zYWN0aW9uU3RhY2sucHVzaCh0cmFuc2FjdGlvbik7XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJvbGxiYWNrIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uXG4gICAqL1xuICBhc3luYyByb2xsYmFja1RyYW5zYWN0aW9uKCkge1xuICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uU3RhY2subGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLnRyYW5zYWN0aW9uU3RhY2sucG9wKCk7XG4gICAgYXdhaXQgdHJhbnNhY3Rpb24uJHJvbGxiYWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBSZWRpcyBvcGVyYXRpb25zIGluIHBpcGVsaW5lIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICovXG4gIGFzeW5jIGV4ZWN1dGVSZWRpc1BpcGVsaW5lKG9wZXJhdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIFxuICAgIGNvbnN0IHBpcGVsaW5lID0gdGhpcy5yZWRpcy5waXBlbGluZSgpO1xuICAgIFxuICAgIG9wZXJhdGlvbnMuZm9yRWFjaChvcCA9PiB7XG4gICAgICBwaXBlbGluZVtvcC5jb21tYW5kXSguLi5vcC5hcmdzKTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gYXdhaXQgcGlwZWxpbmUuZXhlYygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhY2hlIG1vY2sgcmVzcG9uc2VzIHRvIGF2b2lkIHJlcGVhdGVkIGNvbXB1dGF0aW9uXG4gICAqL1xuICBjYWNoZU1vY2tSZXNwb25zZShrZXksIHJlc3BvbnNlKSB7XG4gICAgdGhpcy5tb2NrQ2FjaGUuc2V0KGtleSwge1xuICAgICAgcmVzcG9uc2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2FjaGVkIG1vY2sgcmVzcG9uc2UgaWYgc3RpbGwgdmFsaWRcbiAgICovXG4gIGdldENhY2hlZE1vY2tSZXNwb25zZShrZXksIG1heEFnZSA9IDMwMDAwMCkgeyAvLyA1IG1pbnV0ZXMgZGVmYXVsdFxuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMubW9ja0NhY2hlLmdldChrZXkpO1xuICAgIGlmICghY2FjaGVkKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBpZiAoRGF0ZS5ub3coKSAtIGNhY2hlZC50aW1lc3RhbXAgPiBtYXhBZ2UpIHtcbiAgICAgIHRoaXMubW9ja0NhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjYWNoZWQucmVzcG9uc2U7XG4gIH1cblxuICAvKipcbiAgICogQmF0Y2ggZGF0YWJhc2Ugb3BlcmF0aW9ucyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAqL1xuICBhc3luYyBiYXRjaERhdGFiYXNlT3BlcmF0aW9ucyhvcGVyYXRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcbiAgICBcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMuc3RhcnRUcmFuc2FjdGlvbigpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGNvbnN0IG9wIG9mIG9wZXJhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHJhbnNhY3Rpb25bb3AubW9kZWxdW29wLm9wZXJhdGlvbl0ob3AuZGF0YSk7XG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCB0cmFuc2FjdGlvbi4kY29tbWl0KCk7XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsYmFja1RyYW5zYWN0aW9uKCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgcmVzb3VyY2VzXG4gICAqL1xuICBhc3luYyBjbGVhbnVwKCkge1xuICAgIC8vIFJvbGxiYWNrIGFueSBwZW5kaW5nIHRyYW5zYWN0aW9uc1xuICAgIHdoaWxlICh0aGlzLnRyYW5zYWN0aW9uU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsYmFja1RyYW5zYWN0aW9uKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFyIG1vY2sgY2FjaGVcbiAgICB0aGlzLm1vY2tDYWNoZS5jbGVhcigpO1xuICAgIFxuICAgIC8vIENsb3NlIGNvbm5lY3Rpb25zXG4gICAgaWYgKHRoaXMucHJpc21hKSB7XG4gICAgICBhd2FpdCB0aGlzLnByaXNtYS4kZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5yZWRpcykge1xuICAgICAgYXdhaXQgdGhpcy5yZWRpcy5kaXNjb25uZWN0KCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCB0ZXN0IGVudmlyb25tZW50IHdpdGggb3B0aW1pemF0aW9uc1xuICAgKi9cbiAgYXN5bmMgc2V0dXBUZXN0RW52aXJvbm1lbnQoKSB7XG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgXG4gICAgLy8gU3RhcnQgZnJlc2ggdHJhbnNhY3Rpb24gZm9yIHRlc3QgaXNvbGF0aW9uXG4gICAgYXdhaXQgdGhpcy5zdGFydFRyYW5zYWN0aW9uKCk7XG4gICAgXG4gICAgLy8gQ2xlYXIgUmVkaXMgdGVzdCBkYXRhXG4gICAgYXdhaXQgdGhpcy5yZWRpcy5mbHVzaGRiKCk7XG4gICAgXG4gICAgLy8gU2V0dXAgdGVzdC1zcGVjaWZpYyBvcHRpbWl6YXRpb25zXG4gICAgYXdhaXQgdGhpcy5leGVjdXRlUmVkaXNQaXBlbGluZShbXG4gICAgICB7IGNvbW1hbmQ6ICdzZXQnLCBhcmdzOiBbJ3Rlc3Q6c2Vzc2lvbicsICdhY3RpdmUnXSB9LFxuICAgICAgeyBjb21tYW5kOiAnZXhwaXJlJywgYXJnczogWyd0ZXN0OnNlc3Npb24nLCAzNjAwXSB9XG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogVGVhcmRvd24gdGVzdCBlbnZpcm9ubWVudFxuICAgKi9cbiAgYXN5bmMgdGVhcmRvd25UZXN0RW52aXJvbm1lbnQoKSB7XG4gICAgLy8gUm9sbGJhY2sgZGF0YWJhc2UgY2hhbmdlc1xuICAgIGF3YWl0IHRoaXMucm9sbGJhY2tUcmFuc2FjdGlvbigpO1xuICAgIFxuICAgIC8vIENsZWFyIFJlZGlzIHRlc3QgZGF0YVxuICAgIGlmICh0aGlzLnJlZGlzICYmIHRoaXMucmVkaXMuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICBhd2FpdCB0aGlzLnJlZGlzLmZsdXNoZGIoKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gU2luZ2xldG9uIGluc3RhbmNlXG5jb25zdCB0ZXN0T3B0aW1pemVyID0gbmV3IFRlc3RPcHRpbWl6ZXIoKTtcblxuLy8gSmVzdCBzZXR1cCBoZWxwZXJzXG5jb25zdCBzZXR1cE9wdGltaXplZFRlc3QgPSBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IHRlc3RPcHRpbWl6ZXIuc2V0dXBUZXN0RW52aXJvbm1lbnQoKTtcbn07XG5cbmNvbnN0IHRlYXJkb3duT3B0aW1pemVkVGVzdCA9IGFzeW5jICgpID0+IHtcbiAgYXdhaXQgdGVzdE9wdGltaXplci50ZWFyZG93blRlc3RFbnZpcm9ubWVudCgpO1xufTtcblxuLy8gR2xvYmFsIGNsZWFudXBcbmNvbnN0IGdsb2JhbENsZWFudXAgPSBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IHRlc3RPcHRpbWl6ZXIuY2xlYW51cCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFRlc3RPcHRpbWl6ZXIsXG4gIHRlc3RPcHRpbWl6ZXIsXG4gIHNldHVwT3B0aW1pemVkVGVzdCxcbiAgdGVhcmRvd25PcHRpbWl6ZWRUZXN0LFxuICBnbG9iYWxDbGVhbnVwXG59OyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQUVBO0FBQWEsQ0FBQyxHQUFHQyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDbEQsTUFBTUMsS0FBSyxHQUFHRCxPQUFPLENBQUMsU0FBUyxDQUFDO0FBRWhDLE1BQU1FLGFBQWEsQ0FBQztFQUNsQkMsV0FBV0EsQ0FBQSxFQUFHO0lBQ1osSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSTtJQUNsQixJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJO0lBQ2pCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsRUFBRTtJQUMxQixJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJQyxHQUFHLENBQUMsQ0FBQztJQUMxQixJQUFJLENBQUNDLFdBQVcsR0FBRyxLQUFLO0VBQzFCO0VBRUEsTUFBTUMsVUFB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