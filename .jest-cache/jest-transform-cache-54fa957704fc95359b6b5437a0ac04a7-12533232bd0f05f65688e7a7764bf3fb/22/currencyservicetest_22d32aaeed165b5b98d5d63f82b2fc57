4ff7e6e5e2f2766a99e554a25c020aea
"use strict";

// Mock Prisma before importing the service
_getJestObj().mock('../../index', () => ({
  prisma: {
    countryPricing: {
      findUnique: jest.fn(),
      findMany: jest.fn(),
      create: jest.fn(),
      update: jest.fn()
    }
  }
}));
var _currency = require("../currency.service");
var _index = require("../../index");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('CurrencyService', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });
  describe('getCurrencyForCountry', () => {
    it('should return USD for US', () => {
      const currency = _currency.currencyService.getCurrencyForCountry('US');
      expect(currency).toBe('USD');
    });
    it('should return GBP for GB', () => {
      const currency = _currency.currencyService.getCurrencyForCountry('GB');
      expect(currency).toBe('GBP');
    });
    it('should return INR for IN', () => {
      const currency = _currency.currencyService.getCurrencyForCountry('IN');
      expect(currency).toBe('INR');
    });
    it('should return ZAR for ZA', () => {
      const currency = _currency.currencyService.getCurrencyForCountry('ZA');
      expect(currency).toBe('ZAR');
    });
    it('should return USD for unknown country', () => {
      const currency = _currency.currencyService.getCurrencyForCountry('XX');
      expect(currency).toBe('USD');
    });
    it('should handle lowercase country codes', () => {
      const currency = _currency.currencyService.getCurrencyForCountry('us');
      expect(currency).toBe('USD');
    });
  });
  describe('calculateLocalizedPrice', () => {
    it('should return base price for US', () => {
      const price = _currency.currencyService.calculateLocalizedPrice(29.99, 'US');
      expect(price).toBeCloseTo(29.99, 2);
    });
    it('should apply multiplier for GB', () => {
      const price = _currency.currencyService.calculateLocalizedPrice(29.99, 'GB');
      expect(price).toBeCloseTo(25.49, 2);
    });
    it('should apply multiplier for IN', () => {
      const price = _currency.currencyService.calculateLocalizedPrice(29.99, 'IN');
      expect(price).toBeCloseTo(0.36, 2);
    });
    it('should apply multiplier for ZA', () => {
      const price = _currency.currencyService.calculateLocalizedPrice(29.99, 'ZA');
      expect(price).toBeCloseTo(1.59, 2);
    });
    it('should handle unknown countries with 1.0 multiplier', () => {
      const price = _currency.currencyService.calculateLocalizedPrice(29.99, 'XX');
      expect(price).toBeCloseTo(29.99, 2);
    });
  });
  describe('createCountryPricing', () => {
    it('should create country pricing', async () => {
      const data = {
        pricingTierId: 'tier-1',
        countryCode: 'us',
        currency: 'usd',
        monthlyPrice: 29.99,
        studentDiscount: 50
      };
      const mockPricing = {
        id: 'pricing-1',
        pricingTierId: 'tier-1',
        countryCode: 'US',
        currency: 'USD',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        createdAt: new Date(),
        updatedAt: new Date()
      };
      _index.prisma.countryPricing.findUnique.mockResolvedValue(null);
      _index.prisma.countryPricing.create.mockResolvedValue(mockPricing);
      const result = await _currency.currencyService.createCountryPricing(data);
      expect(result.countryCode).toBe('US');
      expect(result.currency).toBe('USD');
      expect(result.monthlyPrice).toBe(29.99);
      expect(_index.prisma.countryPricing.create).toHaveBeenCalled();
    });
    it('should throw error if pricing already exists', async () => {
      const data = {
        pricingTierId: 'tier-1',
        countryCode: 'US',
        currency: 'USD',
        monthlyPrice: 29.99,
        studentDiscount: 50
      };
      _index.prisma.countryPricing.findUnique.mockResolvedValue({
        id: 'pricing-1',
        ...data
      });
      await expect(_currency.currencyService.createCountryPricing(data)).rejects.toThrow('Pricing already exists');
    });
    it('should throw validation error for invalid data', async () => {
      const invalidData = {
        pricingTierId: 'tier-1',
        countryCode: 'INVALID',
        currency: 'USD',
        monthlyPrice: -10
      };
      await expect(_currency.currencyService.createCountryPricing(invalidData)).rejects.toThrow();
    });
  });
  describe('getCountryPricing', () => {
    it('should return country pricing', async () => {
      const mockPricing = {
        id: 'pricing-1',
        pricingTierId: 'tier-1',
        countryCode: 'US',
        currency: 'USD',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        createdAt: new Date(),
        updatedAt: new Date()
      };
      _index.prisma.countryPricing.findUnique.mockResolvedValue(mockPricing);
      const result = await _currency.currencyService.getCountryPricing('tier-1', 'US');
      expect(result).not.toBeNull();
      expect(result?.countryCode).toBe('US');
      expect(result?.currency).toBe('USD');
    });
    it('should return null if pricing not found', async () => {
      _index.prisma.countryPricing.findUnique.mockResolvedValue(null);
      const result = await _currency.currencyService.getCountryPricing('tier-1', 'US');
      expect(result).toBeNull();
    });
  });
  describe('getAllCountryPricing', () => {
    it('should return all country pricing for a tier', async () => {
      const mockPricing = [{
        id: 'pricing-1',
        pricingTierId: 'tier-1',
        countryCode: 'US',
        currency: 'USD',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        createdAt: new Date(),
        updatedAt: new Date()
      }, {
        id: 'pricing-2',
        pricingTierId: 'tier-1',
        countryCode: 'GB',
        currency: 'GBP',
        monthlyPrice: 25.49,
        studentDiscount: 50,
        createdAt: new Date(),
        updatedAt: new Date()
      }];
      _index.prisma.countryPricing.findMany.mockResolvedValue(mockPricing);
      const result = await _currency.currencyService.getAllCountryPricing('tier-1');
      expect(result).toHaveLength(2);
      expect(result[0].countryCode).toBe('US');
      expect(result[1].countryCode).toBe('GB');
    });
  });
  describe('updateCountryPricing', () => {
    it('should update country pricing', async () => {
      const mockUpdated = {
        id: 'pricing-1',
        pricingTierId: 'tier-1',
        countryCode: 'US',
        currency: 'USD',
        monthlyPrice: 39.99,
        studentDiscount: 40,
        createdAt: new Date(),
        updatedAt: new Date()
      };
      _index.prisma.countryPricing.update.mockResolvedValue(mockUpdated);
      const result = await _currency.currencyService.updateCountryPricing('tier-1', 'US', {
        monthlyPrice: 39.99,
        studentDiscount: 40
      });
      expect(result.monthlyPrice).toBe(39.99);
      expect(result.studentDiscount).toBe(40);
    });
  });
  describe('getLocalizedPricing', () => {
    it('should return localized pricing with country-specific data', async () => {
      const mockTier = {
        id: 'tier-1',
        name: 'premium',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        features: [],
        limits: {
          coursesPerMonth: 999999,
          aiQueriesPerMonth: 999999,
          storageGB: 10,
          supportLevel: 'priority'
        }
      };
      const mockCountryPricing = {
        id: 'pricing-1',
        pricingTierId: 'tier-1',
        countryCode: 'GB',
        currency: 'GBP',
        monthlyPrice: 25.49,
        studentDiscount: 50,
        createdAt: new Date(),
        updatedAt: new Date()
      };
      const mockPricingService = {
        getTierByName: jest.fn().mockResolvedValue(mockTier)
      };
      _index.prisma.countryPricing.findUnique.mockResolvedValue(mockCountryPricing);
      const result = await _currency.currencyService.getLocalizedPricing('premium', 'GB', mockPricingService);
      expect(result).not.toBeNull();
      expect(result?.countryCode).toBe('GB');
      expect(result?.currency).toBe('GBP');
      expect(result?.originalPrice).toBe(25.49);
      expect(result?.studentDiscount).toBe(50);
    });
    it('should fallback to calculated pricing if not explicitly set', async () => {
      const mockTier = {
        id: 'tier-1',
        name: 'premium',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        features: [],
        limits: {
          coursesPerMonth: 999999,
          aiQueriesPerMonth: 999999,
          storageGB: 10,
          supportLevel: 'priority'
        }
      };
      const mockPricingService = {
        getTierByName: jest.fn().mockResolvedValue(mockTier)
      };
      _index.prisma.countryPricing.findUnique.mockResolvedValue(null);
      const result = await _currency.currencyService.getLocalizedPricing('premium', 'IN', mockPricingService);
      expect(result).not.toBeNull();
      expect(result?.countryCode).toBe('IN');
      expect(result?.currency).toBe('INR');
      expect(result?.originalPrice).toBeCloseTo(0.36, 2);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJwcmlzbWEiLCJjb3VudHJ5UHJpY2luZyIsImZpbmRVbmlxdWUiLCJqZXN0IiwiZm4iLCJmaW5kTWFueSIsImNyZWF0ZSIsInVwZGF0ZSIsIl9jdXJyZW5jeSIsInJlcXVpcmUiLCJfaW5kZXgiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJjdXJyZW5jeSIsImN1cnJlbmN5U2VydmljZSIsImdldEN1cnJlbmN5Rm9yQ291bnRyeSIsImV4cGVjdCIsInRvQmUiLCJwcmljZSIsImNhbGN1bGF0ZUxvY2FsaXplZFByaWNlIiwidG9CZUNsb3NlVG8iLCJkYXRhIiwicHJpY2luZ1RpZXJJZCIsImNvdW50cnlDb2RlIiwibW9udGhseVByaWNlIiwic3R1ZGVudERpc2NvdW50IiwibW9ja1ByaWNpbmciLCJpZCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInJlc3VsdCIsImNyZWF0ZUNvdW50cnlQcmljaW5nIiwidG9IYXZlQmVlbkNhbGxlZCIsInJlamVjdHMiLCJ0b1Rocm93IiwiaW52YWxpZERhdGEiLCJnZXRDb3VudHJ5UHJpY2luZyIsIm5vdCIsInRvQmVOdWxsIiwiZ2V0QWxsQ291bnRyeVByaWNpbmciLCJ0b0hhdmVMZW5ndGgiLCJtb2NrVXBkYXRlZCIsInVwZGF0ZUNvdW50cnlQcmljaW5nIiwibW9ja1RpZXIiLCJuYW1lIiwiZmVhdHVyZXMiLCJsaW1pdHMiLCJjb3Vyc2VzUGVyTW9udGgiLCJhaVF1ZXJpZXNQZXJNb250aCIsInN0b3JhZ2VHQiIsInN1cHBvcnRMZXZlbCIsIm1vY2tDb3VudHJ5UHJpY2luZyIsIm1vY2tQcmljaW5nU2VydmljZSIsImdldFRpZXJCeU5hbWUiLCJnZXRMb2NhbGl6ZWRQcmljaW5nIiwib3JpZ2luYWxQcmljZSJdLCJzb3VyY2VzIjpbImN1cnJlbmN5LnNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNb2NrIFByaXNtYSBiZWZvcmUgaW1wb3J0aW5nIHRoZSBzZXJ2aWNlXHJcbmplc3QubW9jaygnLi4vLi4vaW5kZXgnLCAoKSA9PiAoe1xyXG4gIHByaXNtYToge1xyXG4gICAgY291bnRyeVByaWNpbmc6IHtcclxuICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxyXG4gICAgICBmaW5kTWFueTogamVzdC5mbigpLFxyXG4gICAgICBjcmVhdGU6IGplc3QuZm4oKSxcclxuICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXHJcbiAgICB9LFxyXG4gIH0sXHJcbn0pKTtcclxuXHJcbmltcG9ydCB7IGN1cnJlbmN5U2VydmljZSB9IGZyb20gJy4uL2N1cnJlbmN5LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi8uLi9pbmRleCc7XHJcblxyXG5kZXNjcmliZSgnQ3VycmVuY3lTZXJ2aWNlJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRDdXJyZW5jeUZvckNvdW50cnknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBVU0QgZm9yIFVTJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXJyZW5jeSA9IGN1cnJlbmN5U2VydmljZS5nZXRDdXJyZW5jeUZvckNvdW50cnkoJ1VTJyk7XHJcbiAgICAgIGV4cGVjdChjdXJyZW5jeSkudG9CZSgnVVNEJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBHQlAgZm9yIEdCJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXJyZW5jeSA9IGN1cnJlbmN5U2VydmljZS5nZXRDdXJyZW5jeUZvckNvdW50cnkoJ0dCJyk7XHJcbiAgICAgIGV4cGVjdChjdXJyZW5jeSkudG9CZSgnR0JQJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBJTlIgZm9yIElOJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXJyZW5jeSA9IGN1cnJlbmN5U2VydmljZS5nZXRDdXJyZW5jeUZvckNvdW50cnkoJ0lOJyk7XHJcbiAgICAgIGV4cGVjdChjdXJyZW5jeSkudG9CZSgnSU5SJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBaQVIgZm9yIFpBJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXJyZW5jeSA9IGN1cnJlbmN5U2VydmljZS5nZXRDdXJyZW5jeUZvckNvdW50cnkoJ1pBJyk7XHJcbiAgICAgIGV4cGVjdChjdXJyZW5jeSkudG9CZSgnWkFSJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBVU0QgZm9yIHVua25vd24gY291bnRyeScsICgpID0+IHtcclxuICAgICAgY29uc3QgY3VycmVuY3kgPSBjdXJyZW5jeVNlcnZpY2UuZ2V0Q3VycmVuY3lGb3JDb3VudHJ5KCdYWCcpO1xyXG4gICAgICBleHBlY3QoY3VycmVuY3kpLnRvQmUoJ1VTRCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbG93ZXJjYXNlIGNvdW50cnkgY29kZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbmN5ID0gY3VycmVuY3lTZXJ2aWNlLmdldEN1cnJlbmN5Rm9yQ291bnRyeSgndXMnKTtcclxuICAgICAgZXhwZWN0KGN1cnJlbmN5KS50b0JlKCdVU0QnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY2FsY3VsYXRlTG9jYWxpemVkUHJpY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBiYXNlIHByaWNlIGZvciBVUycsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2UgPSBjdXJyZW5jeVNlcnZpY2UuY2FsY3VsYXRlTG9jYWxpemVkUHJpY2UoMjkuOTksICdVUycpO1xyXG4gICAgICBleHBlY3QocHJpY2UpLnRvQmVDbG9zZVRvKDI5Ljk5LCAyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgYXBwbHkgbXVsdGlwbGllciBmb3IgR0InLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByaWNlID0gY3VycmVuY3lTZXJ2aWNlLmNhbGN1bGF0ZUxvY2FsaXplZFByaWNlKDI5Ljk5LCAnR0InKTtcclxuICAgICAgZXhwZWN0KHByaWNlKS50b0JlQ2xvc2VUbygyNS40OSwgMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGFwcGx5IG11bHRpcGxpZXIgZm9yIElOJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZSA9IGN1cnJlbmN5U2VydmljZS5jYWxjdWxhdGVMb2NhbGl6ZWRQcmljZSgyOS45OSwgJ0lOJyk7XHJcbiAgICAgIGV4cGVjdChwcmljZSkudG9CZUNsb3NlVG8oMC4zNiwgMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGFwcGx5IG11bHRpcGxpZXIgZm9yIFpBJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZSA9IGN1cnJlbmN5U2VydmljZS5jYWxjdWxhdGVMb2NhbGl6ZWRQcmljZSgyOS45OSwgJ1pBJyk7XHJcbiAgICAgIGV4cGVjdChwcmljZSkudG9CZUNsb3NlVG8oMS41OSwgMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmtub3duIGNvdW50cmllcyB3aXRoIDEuMCBtdWx0aXBsaWVyJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmljZSA9IGN1cnJlbmN5U2VydmljZS5jYWxjdWxhdGVMb2NhbGl6ZWRQcmljZSgyOS45OSwgJ1hYJyk7XHJcbiAgICAgIGV4cGVjdChwcmljZSkudG9CZUNsb3NlVG8oMjkuOTksIDIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdjcmVhdGVDb3VudHJ5UHJpY2luZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGNvdW50cnkgcHJpY2luZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICBwcmljaW5nVGllcklkOiAndGllci0xJyxcclxuICAgICAgICBjb3VudHJ5Q29kZTogJ3VzJyxcclxuICAgICAgICBjdXJyZW5jeTogJ3VzZCcsXHJcbiAgICAgICAgbW9udGhseVByaWNlOiAyOS45OSxcclxuICAgICAgICBzdHVkZW50RGlzY291bnQ6IDUwLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbW9ja1ByaWNpbmcgPSB7XHJcbiAgICAgICAgaWQ6ICdwcmljaW5nLTEnLFxyXG4gICAgICAgIHByaWNpbmdUaWVySWQ6ICd0aWVyLTEnLFxyXG4gICAgICAgIGNvdW50cnlDb2RlOiAnVVMnLFxyXG4gICAgICAgIGN1cnJlbmN5OiAnVVNEJyxcclxuICAgICAgICBtb250aGx5UHJpY2U6IDI5Ljk5LFxyXG4gICAgICAgIHN0dWRlbnREaXNjb3VudDogNTAsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChwcmlzbWEuY291bnRyeVByaWNpbmcuZmluZFVuaXF1ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICAocHJpc21hLmNvdW50cnlQcmljaW5nLmNyZWF0ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQcmljaW5nKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGN1cnJlbmN5U2VydmljZS5jcmVhdGVDb3VudHJ5UHJpY2luZyhkYXRhKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY291bnRyeUNvZGUpLnRvQmUoJ1VTJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVuY3kpLnRvQmUoJ1VTRCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1vbnRobHlQcmljZSkudG9CZSgyOS45OSk7XHJcbiAgICAgIGV4cGVjdChwcmlzbWEuY291bnRyeVByaWNpbmcuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGlmIHByaWNpbmcgYWxyZWFkeSBleGlzdHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgcHJpY2luZ1RpZXJJZDogJ3RpZXItMScsXHJcbiAgICAgICAgY291bnRyeUNvZGU6ICdVUycsXHJcbiAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxyXG4gICAgICAgIG1vbnRobHlQcmljZTogMjkuOTksXHJcbiAgICAgICAgc3R1ZGVudERpc2NvdW50OiA1MCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChwcmlzbWEuY291bnRyeVByaWNpbmcuZmluZFVuaXF1ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBpZDogJ3ByaWNpbmctMScsXHJcbiAgICAgICAgLi4uZGF0YSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QoY3VycmVuY3lTZXJ2aWNlLmNyZWF0ZUNvdW50cnlQcmljaW5nKGRhdGEpKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICAgJ1ByaWNpbmcgYWxyZWFkeSBleGlzdHMnXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IHZhbGlkYXRpb24gZXJyb3IgZm9yIGludmFsaWQgZGF0YScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7XHJcbiAgICAgICAgcHJpY2luZ1RpZXJJZDogJ3RpZXItMScsXHJcbiAgICAgICAgY291bnRyeUNvZGU6ICdJTlZBTElEJyxcclxuICAgICAgICBjdXJyZW5jeTogJ1VTRCcsXHJcbiAgICAgICAgbW9udGhseVByaWNlOiAtMTAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QoY3VycmVuY3lTZXJ2aWNlLmNyZWF0ZUNvdW50cnlQcmljaW5nKGludmFsaWREYXRhKSkucmVqZWN0cy50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldENvdW50cnlQcmljaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY291bnRyeSBwcmljaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrUHJpY2luZyA9IHtcclxuICAgICAgICBpZDogJ3ByaWNpbmctMScsXHJcbiAgICAgICAgcHJpY2luZ1RpZXJJZDogJ3RpZXItMScsXHJcbiAgICAgICAgY291bnRyeUNvZGU6ICdVUycsXHJcbiAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxyXG4gICAgICAgIG1vbnRobHlQcmljZTogMjkuOTksXHJcbiAgICAgICAgc3R1ZGVudERpc2NvdW50OiA1MCxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgKHByaXNtYS5jb3VudHJ5UHJpY2luZy5maW5kVW5pcXVlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1ByaWNpbmcpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3VycmVuY3lTZXJ2aWNlLmdldENvdW50cnlQcmljaW5nKCd0aWVyLTEnLCAnVVMnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLm5vdC50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Py5jb3VudHJ5Q29kZSkudG9CZSgnVVMnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdD8uY3VycmVuY3kpLnRvQmUoJ1VTRCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBpZiBwcmljaW5nIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgKHByaXNtYS5jb3VudHJ5UHJpY2luZy5maW5kVW5pcXVlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjdXJyZW5jeVNlcnZpY2UuZ2V0Q291bnRyeVByaWNpbmcoJ3RpZXItMScsICdVUycpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0QWxsQ291bnRyeVByaWNpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhbGwgY291bnRyeSBwcmljaW5nIGZvciBhIHRpZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tQcmljaW5nID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAncHJpY2luZy0xJyxcclxuICAgICAgICAgIHByaWNpbmdUaWVySWQ6ICd0aWVyLTEnLFxyXG4gICAgICAgICAgY291bnRyeUNvZGU6ICdVUycsXHJcbiAgICAgICAgICBjdXJyZW5jeTogJ1VTRCcsXHJcbiAgICAgICAgICBtb250aGx5UHJpY2U6IDI5Ljk5LFxyXG4gICAgICAgICAgc3R1ZGVudERpc2NvdW50OiA1MCxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAncHJpY2luZy0yJyxcclxuICAgICAgICAgIHByaWNpbmdUaWVySWQ6ICd0aWVyLTEnLFxyXG4gICAgICAgICAgY291bnRyeUNvZGU6ICdHQicsXHJcbiAgICAgICAgICBjdXJyZW5jeTogJ0dCUCcsXHJcbiAgICAgICAgICBtb250aGx5UHJpY2U6IDI1LjQ5LFxyXG4gICAgICAgICAgc3R1ZGVudERpc2NvdW50OiA1MCxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB9LFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgKHByaXNtYS5jb3VudHJ5UHJpY2luZy5maW5kTWFueSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQcmljaW5nKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGN1cnJlbmN5U2VydmljZS5nZXRBbGxDb3VudHJ5UHJpY2luZygndGllci0xJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY291bnRyeUNvZGUpLnRvQmUoJ1VTJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRbMV0uY291bnRyeUNvZGUpLnRvQmUoJ0dCJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3VwZGF0ZUNvdW50cnlQcmljaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgY291bnRyeSBwcmljaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrVXBkYXRlZCA9IHtcclxuICAgICAgICBpZDogJ3ByaWNpbmctMScsXHJcbiAgICAgICAgcHJpY2luZ1RpZXJJZDogJ3RpZXItMScsXHJcbiAgICAgICAgY291bnRyeUNvZGU6ICdVUycsXHJcbiAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxyXG4gICAgICAgIG1vbnRobHlQcmljZTogMzkuOTksXHJcbiAgICAgICAgc3R1ZGVudERpc2NvdW50OiA0MCxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgKHByaXNtYS5jb3VudHJ5UHJpY2luZy51cGRhdGUgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXBkYXRlZCk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjdXJyZW5jeVNlcnZpY2UudXBkYXRlQ291bnRyeVByaWNpbmcoJ3RpZXItMScsICdVUycsIHtcclxuICAgICAgICBtb250aGx5UHJpY2U6IDM5Ljk5LFxyXG4gICAgICAgIHN0dWRlbnREaXNjb3VudDogNDAsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5tb250aGx5UHJpY2UpLnRvQmUoMzkuOTkpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN0dWRlbnREaXNjb3VudCkudG9CZSg0MCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldExvY2FsaXplZFByaWNpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBsb2NhbGl6ZWQgcHJpY2luZyB3aXRoIGNvdW50cnktc3BlY2lmaWMgZGF0YScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1RpZXIgPSB7XHJcbiAgICAgICAgaWQ6ICd0aWVyLTEnLFxyXG4gICAgICAgIG5hbWU6ICdwcmVtaXVtJyxcclxuICAgICAgICBtb250aGx5UHJpY2U6IDI5Ljk5LFxyXG4gICAgICAgIHN0dWRlbnREaXNjb3VudDogNTAsXHJcbiAgICAgICAgZmVhdHVyZXM6IFtdLFxyXG4gICAgICAgIGxpbWl0czoge1xyXG4gICAgICAgICAgY291cnNlc1Blck1vbnRoOiA5OTk5OTksXHJcbiAgICAgICAgICBhaVF1ZXJpZXNQZXJNb250aDogOTk5OTk5LFxyXG4gICAgICAgICAgc3RvcmFnZUdCOiAxMCxcclxuICAgICAgICAgIHN1cHBvcnRMZXZlbDogJ3ByaW9yaXR5JyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbW9ja0NvdW50cnlQcmljaW5nID0ge1xyXG4gICAgICAgIGlkOiAncHJpY2luZy0xJyxcclxuICAgICAgICBwcmljaW5nVGllcklkOiAndGllci0xJyxcclxuICAgICAgICBjb3VudHJ5Q29kZTogJ0dCJyxcclxuICAgICAgICBjdXJyZW5jeTogJ0dCUCcsXHJcbiAgICAgICAgbW9udGhseVByaWNlOiAyNS40OSxcclxuICAgICAgICBzdHVkZW50RGlzY291bnQ6IDUwLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBtb2NrUHJpY2luZ1NlcnZpY2UgPSB7XHJcbiAgICAgICAgZ2V0VGllckJ5TmFtZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUaWVyKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChwcmlzbWEuY291bnRyeVByaWNpbmcuZmluZFVuaXF1ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb3VudHJ5UHJpY2luZyk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjdXJyZW5jeVNlcnZpY2UuZ2V0TG9jYWxpemVkUHJpY2luZyhcclxuICAgICAgICAncHJlbWl1bScsXHJcbiAgICAgICAgJ0dCJyxcclxuICAgICAgICBtb2NrUHJpY2luZ1NlcnZpY2VcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLm5vdC50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Py5jb3VudHJ5Q29kZSkudG9CZSgnR0InKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdD8uY3VycmVuY3kpLnRvQmUoJ0dCUCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Py5vcmlnaW5hbFByaWNlKS50b0JlKDI1LjQ5KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdD8uc3R1ZGVudERpc2NvdW50KS50b0JlKDUwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZmFsbGJhY2sgdG8gY2FsY3VsYXRlZCBwcmljaW5nIGlmIG5vdCBleHBsaWNpdGx5IHNldCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1RpZXIgPSB7XHJcbiAgICAgICAgaWQ6ICd0aWVyLTEnLFxyXG4gICAgICAgIG5hbWU6ICdwcmVtaXVtJyxcclxuICAgICAgICBtb250aGx5UHJpY2U6IDI5Ljk5LFxyXG4gICAgICAgIHN0dWRlbnREaXNjb3VudDogNTAsXHJcbiAgICAgICAgZmVhdHVyZXM6IFtdLFxyXG4gICAgICAgIGxpbWl0czoge1xyXG4gICAgICAgICAgY291cnNlc1Blck1vbnRoOiA5OTk5OTksXHJcbiAgICAgICAgICBhaVF1ZXJpZXNQZXJNb250aDogOTk5OTk5LFxyXG4gICAgICAgICAgc3RvcmFnZUdCOiAxMCxcclxuICAgICAgICAgIHN1cHBvcnRMZXZlbDogJ3ByaW9yaXR5JyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbW9ja1ByaWNpbmdTZXJ2aWNlID0ge1xyXG4gICAgICAgIGdldFRpZXJCeU5hbWU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGllciksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAocHJpc21hLmNvdW50cnlQcmljaW5nLmZpbmRVbmlxdWUgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGN1cnJlbmN5U2VydmljZS5nZXRMb2NhbGl6ZWRQcmljaW5nKFxyXG4gICAgICAgICdwcmVtaXVtJyxcclxuICAgICAgICAnSU4nLFxyXG4gICAgICAgIG1vY2tQcmljaW5nU2VydmljZVxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkubm90LnRvQmVOdWxsKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQ/LmNvdW50cnlDb2RlKS50b0JlKCdJTicpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Py5jdXJyZW5jeSkudG9CZSgnSU5SJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQ/Lm9yaWdpbmFsUHJpY2UpLnRvQmVDbG9zZVRvKDAuMzYsIDIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsYUFBYSxFQUFFLE9BQU87RUFDOUJDLE1BQU0sRUFBRTtJQUNOQyxjQUFjLEVBQUU7TUFDZEMsVUFBVSxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ3JCQyxRQUFRLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7TUFDbkJFLE1BQU0sRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUNqQkcsTUFBTSxFQUFFSixJQUFJLENBQUNDLEVBQUUsQ0FBQztJQUNsQjtFQUNGO0FBQ0YsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFBSSxTQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFELE9BQUE7QUFBcUMsU0FBQVgsWUFBQTtFQUFBO0lBQUFLO0VBQUEsSUFBQU0sT0FBQTtFQUFBWCxXQUFBLEdBQUFBLENBQUEsS0FBQUssSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQUVyQ1EsUUFBUSxDQUFDLGlCQUFpQixFQUFFLE1BQU07RUFDaENDLFVBQVUsQ0FBQyxNQUFNO0lBQ2ZULElBQUksQ0FBQ1UsYUFBYSxDQUFDLENBQUM7RUFDdEIsQ0FBQyxDQUFDO0VBRUZGLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxNQUFNO0lBQ3RDRyxFQUFFLENBQUMsMEJBQTBCLEVBQUUsTUFBTTtNQUNuQyxNQUFNQyxRQUFRLEdBQUdDLHlCQUFlLENBQUNDLHFCQUFxQixDQUFDLElBQUksQ0FBQztNQUM1REMsTUFBTSxDQUFDSCxRQUFRLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQztJQUM5QixDQUFDLENBQUM7SUFFRkwsRUFBRSxDQUFDLDBCQUEwQixFQUFFLE1BQU07TUFDbkMsTUFBTUMsUUFBUSxH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