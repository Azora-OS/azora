3f9af1f40fb230110f17e087127df7b3
"use strict";

// Mock the elaraIntegration to avoid external dependencies
_getJestObj().mock('../services/elara-integration-service', () => ({
  elaraIntegration: {
    logEvent: jest.fn(),
    registerUser: jest.fn(),
    getUserContext: jest.fn()
  }
}));
var _elaraIntegrationService = require("../services/elara-integration-service");
var _unifiedVideoPlatform = require("../services/unified-video-platform");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
/**
 * AZORA OS - Elara Video Platform Integration Tests
 */
describe('Elara Video Platform Integration', () => {
  let service;
  beforeEach(() => {
    service = new _unifiedVideoPlatform.UnifiedVideoPlatformService(_unifiedVideoPlatform.defaultVideoPlatformConfig);
  });
  afterEach(async () => {
    await service.cleanup();
  });
  describe('Elara Event Logging', () => {
    it('should log progress updates to Elara', async () => {
      const progress = {
        userId: 'test-user',
        videoId: 'yt-sample-001',
        platform: 'youtube',
        progress: 75,
        completed: false
      };
      await service.trackProgress(progress);
      expect(_elaraIntegrationService.elaraIntegration.logEvent).toHaveBeenCalledWith({
        type: 'video-progress-updated',
        data: {
          userId: 'test-user',
          videoId: 'yt-sample-001',
          platform: 'youtube',
          progress: 75,
          completed: false
        },
        userId: 'test-user'
      });
    });
    it('should log recommendations to Elara', () => {
      const recommendations = service.getRecommendations('test-user');
      expect(_elaraIntegrationService.elaraIntegration.logEvent).toHaveBeenCalledWith({
        type: 'video-recommendations-generated',
        data: {
          userId: 'test-user',
          recommendationCount: recommendations.length,
          completedVideoCount: 0
        },
        userId: 'test-user'
      });
    });
    it('should log content sync to Elara', async () => {
      await service.syncContent();
      expect(_elaraIntegrationService.elaraIntegration.logEvent).toHaveBeenCalledWith({
        type: 'video-content-synced',
        data: {
          platformCount: 0,
          // No platforms configured in default config
          contentCount: expect.any(Number)
        }
      });
    });
  });
  describe('User Registration with Elara', () => {
    it('should register users with Elara', () => {
      const userContext = {
        id: 'test-user',
        email: 'test@example.com',
        name: 'Test User',
        role: 'student',
        preferences: {
          learningStyle: 'visual',
          communicationPreference: 'email'
        }
      };
      _elaraIntegrationService.elaraIntegration.registerUser(userContext);
      expect(_elaraIntegrationService.elaraIntegration.registerUser).toHaveBeenCalledWith(userContext);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJlbGFyYUludGVncmF0aW9uIiwibG9nRXZlbnQiLCJqZXN0IiwiZm4iLCJyZWdpc3RlclVzZXIiLCJnZXRVc2VyQ29udGV4dCIsIl9lbGFyYUludGVncmF0aW9uU2VydmljZSIsInJlcXVpcmUiLCJfdW5pZmllZFZpZGVvUGxhdGZvcm0iLCJkZXNjcmliZSIsInNlcnZpY2UiLCJiZWZvcmVFYWNoIiwiVW5pZmllZFZpZGVvUGxhdGZvcm1TZXJ2aWNlIiwiZGVmYXVsdFZpZGVvUGxhdGZvcm1Db25maWciLCJhZnRlckVhY2giLCJjbGVhbnVwIiwiaXQiLCJwcm9ncmVzcyIsInVzZXJJZCIsInZpZGVvSWQiLCJwbGF0Zm9ybSIsImNvbXBsZXRlZCIsInRyYWNrUHJvZ3Jlc3MiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInR5cGUiLCJkYXRhIiwicmVjb21tZW5kYXRpb25zIiwiZ2V0UmVjb21tZW5kYXRpb25zIiwicmVjb21tZW5kYXRpb25Db3VudCIsImxlbmd0aCIsImNvbXBsZXRlZFZpZGVvQ291bnQiLCJzeW5jQ29udGVudCIsInBsYXRmb3JtQ291bnQiLCJjb250ZW50Q291bnQiLCJhbnkiLCJOdW1iZXIiLCJ1c2VyQ29udGV4dCIsImlkIiwiZW1haWwiLCJuYW1lIiwicm9sZSIsInByZWZlcmVuY2VzIiwibGVhcm5pbmdTdHlsZSIsImNvbW11bmljYXRpb25QcmVmZXJlbmNlIl0sInNvdXJjZXMiOlsiZWxhcmEtdmlkZW8taW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQVpPUkEgT1MgLSBFbGFyYSBWaWRlbyBQbGF0Zm9ybSBJbnRlZ3JhdGlvbiBUZXN0c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IGVsYXJhSW50ZWdyYXRpb24gfSBmcm9tICcuLi9zZXJ2aWNlcy9lbGFyYS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcclxuaW1wb3J0IHtcclxuICBVbmlmaWVkVmlkZW9QbGF0Zm9ybVNlcnZpY2UsXHJcbiAgZGVmYXVsdFZpZGVvUGxhdGZvcm1Db25maWcsXHJcbn0gZnJvbSAnLi4vc2VydmljZXMvdW5pZmllZC12aWRlby1wbGF0Zm9ybSc7XHJcblxyXG4vLyBNb2NrIHRoZSBlbGFyYUludGVncmF0aW9uIHRvIGF2b2lkIGV4dGVybmFsIGRlcGVuZGVuY2llc1xyXG5qZXN0Lm1vY2soJy4uL3NlcnZpY2VzL2VsYXJhLWludGVncmF0aW9uLXNlcnZpY2UnLCAoKSA9PiAoe1xyXG4gIGVsYXJhSW50ZWdyYXRpb246IHtcclxuICAgIGxvZ0V2ZW50OiBqZXN0LmZuKCksXHJcbiAgICByZWdpc3RlclVzZXI6IGplc3QuZm4oKSxcclxuICAgIGdldFVzZXJDb250ZXh0OiBqZXN0LmZuKCksXHJcbiAgfSxcclxufSkpO1xyXG5cclxuZGVzY3JpYmUoJ0VsYXJhIFZpZGVvIFBsYXRmb3JtIEludGVncmF0aW9uJywgKCkgPT4ge1xyXG4gIGxldCBzZXJ2aWNlOiBVbmlmaWVkVmlkZW9QbGF0Zm9ybVNlcnZpY2U7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgc2VydmljZSA9IG5ldyBVbmlmaWVkVmlkZW9QbGF0Zm9ybVNlcnZpY2UoZGVmYXVsdFZpZGVvUGxhdGZvcm1Db25maWcpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgc2VydmljZS5jbGVhbnVwKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFbGFyYSBFdmVudCBMb2dnaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2cgcHJvZ3Jlc3MgdXBkYXRlcyB0byBFbGFyYScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSB7XHJcbiAgICAgICAgdXNlcklkOiAndGVzdC11c2VyJyxcclxuICAgICAgICB2aWRlb0lkOiAneXQtc2FtcGxlLTAwMScsXHJcbiAgICAgICAgcGxhdGZvcm06ICd5b3V0dWJlJyxcclxuICAgICAgICBwcm9ncmVzczogNzUsXHJcbiAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGF3YWl0IHNlcnZpY2UudHJhY2tQcm9ncmVzcyhwcm9ncmVzcyk7XHJcblxyXG4gICAgICBleHBlY3QoZWxhcmFJbnRlZ3JhdGlvbi5sb2dFdmVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIHR5cGU6ICd2aWRlby1wcm9ncmVzcy11cGRhdGVkJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB1c2VySWQ6ICd0ZXN0LXVzZXInLFxyXG4gICAgICAgICAgdmlkZW9JZDogJ3l0LXNhbXBsZS0wMDEnLFxyXG4gICAgICAgICAgcGxhdGZvcm06ICd5b3V0dWJlJyxcclxuICAgICAgICAgIHByb2dyZXNzOiA3NSxcclxuICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB1c2VySWQ6ICd0ZXN0LXVzZXInLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbG9nIHJlY29tbWVuZGF0aW9ucyB0byBFbGFyYScsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gc2VydmljZS5nZXRSZWNvbW1lbmRhdGlvbnMoJ3Rlc3QtdXNlcicpO1xyXG5cclxuICAgICAgZXhwZWN0KGVsYXJhSW50ZWdyYXRpb24ubG9nRXZlbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICB0eXBlOiAndmlkZW8tcmVjb21tZW5kYXRpb25zLWdlbmVyYXRlZCcsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgdXNlcklkOiAndGVzdC11c2VyJyxcclxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uQ291bnQ6IHJlY29tbWVuZGF0aW9ucy5sZW5ndGgsXHJcbiAgICAgICAgICBjb21wbGV0ZWRWaWRlb0NvdW50OiAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXNlcklkOiAndGVzdC11c2VyJyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvZyBjb250ZW50IHN5bmMgdG8gRWxhcmEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlcnZpY2Uuc3luY0NvbnRlbnQoKTtcclxuXHJcbiAgICAgIGV4cGVjdChlbGFyYUludGVncmF0aW9uLmxvZ0V2ZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgdHlwZTogJ3ZpZGVvLWNvbnRlbnQtc3luY2VkJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBwbGF0Zm9ybUNvdW50OiAwLCAvLyBObyBwbGF0Zm9ybXMgY29uZmlndXJlZCBpbiBkZWZhdWx0IGNvbmZpZ1xyXG4gICAgICAgICAgY29udGVudENvdW50OiBleHBlY3QuYW55KE51bWJlciksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1VzZXIgUmVnaXN0cmF0aW9uIHdpdGggRWxhcmEnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIHVzZXJzIHdpdGggRWxhcmEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVzZXJDb250ZXh0ID0ge1xyXG4gICAgICAgIGlkOiAndGVzdC11c2VyJyxcclxuICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgIG5hbWU6ICdUZXN0IFVzZXInLFxyXG4gICAgICAgIHJvbGU6ICdzdHVkZW50JyxcclxuICAgICAgICBwcmVmZXJlbmNlczoge1xyXG4gICAgICAgICAgbGVhcm5pbmdTdHlsZTogJ3Zpc3VhbCcsXHJcbiAgICAgICAgICBjb21tdW5pY2F0aW9uUHJlZmVyZW5jZTogJ2VtYWlsJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZWxhcmFJbnRlZ3JhdGlvbi5yZWdpc3RlclVzZXIodXNlckNvbnRleHQpO1xyXG5cclxuICAgICAgZXhwZWN0KGVsYXJhSW50ZWdyYXRpb24ucmVnaXN0ZXJVc2VyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh1c2VyQ29udGV4dCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFVQTtBQUNBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyx1Q0FBdUMsRUFBRSxPQUFPO0VBQ3hEQyxnQkFBZ0IsRUFBRTtJQUNoQkMsUUFBUSxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ25CQyxZQUFZLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDdkJFLGNBQWMsRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUM7RUFDMUI7QUFDRixDQUFDLENBQUMsQ0FBQztBQWJILElBQUFHLHdCQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxxQkFBQSxHQUFBRCxPQUFBO0FBRzRDLFNBQUFULFlBQUE7RUFBQTtJQUFBSTtFQUFBLElBQUFLLE9BQUE7RUFBQVQsV0FBQSxHQUFBQSxDQUFBLEtBQUFJLElBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFSNUM7QUFDQTtBQUNBO0FBaUJBTyxRQUFRLENBQUMsa0NBQWtDLEVBQUUsTUFBTTtFQUNqRCxJQUFJQyxPQUFvQztFQUV4Q0MsVUFBVSxDQUFDLE1BQU07SUFDZkQsT0FBTyxHQUFHLElBQUlFLGlEQUEyQixDQUFDQyxnREFBMEIsQ0FBQztFQUN2RSxDQUFDLENBQUM7RUFFRkMsU0FBUyxDQUFDLFlBQVk7SUFDcEIsTUFBTUosT0FBTyxDQUFDSyxPQUFPLENBQUMsQ0FBQztFQUN6QixDQUFDLENBQUM7RUFFRk4sUUFBUSxDQUFDLHFCQUFxQixFQUFFLE1BQU07SUFDcENPLEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxZQUFZO01BQ3JELE1BQU1DLFFBQVEsR0FBRztRQUNmQyxNQUFNLEVBQUUsV0FBVztRQUNuQkMsT0FBTyxFQUFFLGVBQWU7UUFDeEJDLFFBQVEsRUFBRSxTQUFTO1FBQ25CSCxRQUFRLEVBQUUsRUFBRTtRQUNaSSxTQUFTLEVBQUU7TUFDYixDQUFDO01BRUQsTUFBTVgsT0FBTyxDQUFDWSxhQUFhLENBQUNMLFFBQVEsQ0FBQztNQUVyQ00sTUFBTSxDQUFDdkIseUNBQWdCLENBQUNDLFFBQVEsQ0FBQyxDQUFDdUIsb0JBQW9CLENBQUM7UUFDckRDLElBQUksRUFBRSx3QkFBd0I7UUFDOUJDLElBQUksRUFBRTtVQUNKUixNQUFNLEVBQUUsV0FBVztVQUNuQkMsT0FBTyxFQUFFLGVBQWU7VUFDeEJDLFFBQVEsRUFBRSxTQUFTO1VBQ25CSCxRQUFRLEVBQUUsRUFBRTtVQUNaSSxTQUFTLEVBQUU7UUFDYixDQUFDO1FBQ0RILE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztJQUVGRixFQUFFLENBQUMscUNBQXFDLEVBQUUsTUFBTTtNQUM5QyxNQUFNVyxlQUFlLEdBQUdqQixPQUFPLENBQUNrQixrQkFBa0IsQ0FBQyxXQUFXLENBQUM7TUFFL0RMLE1BQU0sQ0FBQ3ZCLHlDQUFnQixDQUFDQyxRQUFRLENBQUMsQ0FBQ3VCLG9CQUFvQixDQUFDO1FBQ3JEQyxJQUFJLEVBQUUsaUNBQWlDO1FBQ3ZDQyxJQUFJLEVBQUU7VUFDSlIsTUFBTSxFQUFFLFdBQVc7VUFDbkJXLG1CQUFtQixFQUFFRixlQUFlLENBQUNHLE1BQU07VUFDM0NDLG1CQUFtQixFQUFFO1FBQ3ZCLENBQUM7UUFDRGIsTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUZGLEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxZQUFZO01BQ2pELE1BQU1OLE9BQU8sQ0FBQ3NCLFdBQVcsQ0FBQyxDQUFDO01BRTNCVCxNQUFNLENBQUN2Qix5Q0FBZ0IsQ0FBQ0MsUUFBUSxDQUFDLENBQUN1QixvQkFBb0IsQ0FBQztRQUNyREMsSUFBSSxFQUFFLHNCQUFzQjtRQUM1QkMsSUFBSSxFQUFFO1VBQ0pPLGFBQWEsRUFBRSxDQUFDO1VBQUU7VUFDbEJDLFlBQVksRUFBRVgsTUFBTSxDQUFDWSxHQUFHLENBQUNDLE1BQU07UUFDakM7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRjNCLFFBQVEsQ0FBQyw4QkFBOEIsRUFBRSxNQUFNO0lBQzdDTyxFQUFFLENBQUMsa0NBQWtDLEVBQUUsTUFBTTtNQUMzQyxNQUFNcUIsV0FBVyxHQUFHO1FBQ2xCQyxFQUFFLEVBQUUsV0FBVztRQUNmQyxLQUFLLEVBQUUsa0JBQWtCO1FBQ3pCQyxJQUFJLEVBQUUsV0FBVztRQUNqQkMsSUFBSSxFQUFFLFNBQVM7UUFDZkMsV0FBVyxFQUFFO1VBQ1hDLGFBQWEsRUFBRSxRQUFRO1VBQ3ZCQyx1QkFBdUIsRUFBRTtRQUMzQjtNQUNGLENBQUM7TUFFRDVDLHlDQUFnQixDQUFDSSxZQUFZLENBQUNpQyxXQUFXLENBQUM7TUFFMUNkLE1BQU0sQ0FBQ3ZCLHlDQUFnQixDQUFDSSxZQUFZLENBQUMsQ0FBQ29CLG9CQUFvQixDQUFDYSxXQUFXLENBQUM7SUFDekUsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119