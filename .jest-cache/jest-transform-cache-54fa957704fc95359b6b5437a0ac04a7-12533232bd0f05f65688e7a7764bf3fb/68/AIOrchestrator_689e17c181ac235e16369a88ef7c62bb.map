{"version":3,"names":["_openai","_interopRequireDefault","require","_sdk","e","__esModule","default","AIOrchestrator","openai","anthropic","cache","Map","CACHE_TTL","totalTokensUsed","totalCost","constructor","validator","ConstitutionalValidator","getInstance","process","env","OPENAI_API_KEY","OpenAI","apiKey","ANTHROPIC_API_KEY","Anthropic","generateCode","prompt","context","model","cacheKey","getCacheKey","cached","getCachedResponse","console","log","content","response","tokensUsed","cost","selectedModel","selectModel","fullPrompt","buildPrompt","provider","generateWithOpenAI","generateWithClaude","ethicalAnalysis","validateContent","approved","warn","concerns","Error","join","cacheResponse","completion","chat","completions","create","messages","role","max_tokens","maxTokens","temperature","choices","message","usage","total_tokens","calculateCost","type","text","input_tokens","output_tokens","taskType","userPrompt","projectInfo","frameworks","length","files","file","path","conventions","packageManager","typescript","testing","estimateCost","estimatedTokens","Math","ceil","tokens","pricing","input","output","modelPricing","inputTokens","outputTokens","contextStr","JSON","stringify","map","f","hash","i","char","charCodeAt","toString","key","get","Date","now","timestamp","delete","set","size","firstKey","keys","next","value","getUsageStats","totalTokens","cacheSize","clearCache","clear","exports"],"sources":["AIOrchestrator.ts"],"sourcesContent":["import OpenAI from 'openai';\nimport Anthropic from '@anthropic-ai/sdk';\n\nexport interface AIModel {\n  provider: 'openai' | 'anthropic';\n  model: string;\n  maxTokens: number;\n  temperature: number;\n}\n\nexport interface AIContext {\n  files: Array<{ path: string; content: string }>;\n  projectInfo: {\n    frameworks: string[];\n    conventions: any;\n  };\n  userPrompt: string;\n}\n\nexport interface AIResponse {\n  content: string;\n  model: string;\n  tokensUsed: number;\n  cost: number;\n}\n\nexport interface CachedResponse {\n  prompt: string;\n  response: string;\n  timestamp: number;\n  model: string;\n}\n\nexport class AIOrchestrator {\n  private openai: OpenAI | null = null;\n  private anthropic: Anthropic | null = null;\n  private validator: ConstitutionalValidator;\n  private cache: Map<string, CachedResponse> = new Map();\n  private readonly CACHE_TTL = 3600000; // 1 hour\n  private totalTokensUsed = 0;\n  private totalCost = 0;\n\n  constructor() {\n    this.validator = ConstitutionalValidator.getInstance();\n    // Initialize clients if API keys are available\n    if (process.env.OPENAI_API_KEY) {\n      this.openai = new OpenAI({\n        apiKey: process.env.OPENAI_API_KEY,\n      });\n    }\n\n    if (process.env.ANTHROPIC_API_KEY) {\n      this.anthropic = new Anthropic({\n        apiKey: process.env.ANTHROPIC_API_KEY,\n      });\n    }\n  }\n\n  async generateCode(prompt: string, context: AIContext, model?: AIModel): Promise<AIResponse> {\n    // Check cache first\n    const cacheKey = this.getCacheKey(prompt, context);\n    const cached = this.getCachedResponse(cacheKey);\n    if (cached) {\n      console.log('Using cached AI response');\n      return {\n        content: cached.response,\n        model: cached.model,\n        tokensUsed: 0,\n        cost: 0,\n      };\n    }\n\n    // Select model\n    const selectedModel = model || this.selectModel('code-generation');\n\n    // Build full prompt with context\n    const fullPrompt = this.buildPrompt(prompt, context);\n\n    // Generate response\n    let response: AIResponse;\n    if (selectedModel.provider === 'openai') {\n      response = await this.generateWithOpenAI(fullPrompt, selectedModel);\n    } else {\n      response = await this.generateWithClaude(fullPrompt, selectedModel);\n    }\n\n    // CONSTITUTIONAL CHECK (The Conscience)\n    console.log('[AIOrchestrator] Validating generated code against Divine Law...');\n    const ethicalAnalysis = await this.validator.validateContent(response.content, prompt);\n\n    if (!ethicalAnalysis.approved) {\n      console.warn('[AIOrchestrator] Code generation VETOED by Constitution:', ethicalAnalysis.concerns);\n      throw new Error(`Constitutional Violation: ${ethicalAnalysis.concerns.join(', ')}`);\n    }\n\n    // Cache response\n    this.cacheResponse(cacheKey, response.content, response.model);\n\n    // Track usage\n    this.totalTokensUsed += response.tokensUsed;\n    this.totalCost += response.cost;\n\n    return response;\n  }\n\n  private async generateWithOpenAI(prompt: string, model: AIModel): Promise<AIResponse> {\n    if (!this.openai) {\n      throw new Error('OpenAI client not initialized. Please set OPENAI_API_KEY.');\n    }\n\n    const completion = await this.openai.chat.completions.create({\n      model: model.model,\n      messages: [\n        {\n          role: 'system',\n          content: 'You are an expert software developer assistant. Generate clean, production-ready code following best practices.',\n        },\n        {\n          role: 'user',\n          content: prompt,\n        },\n      ],\n      max_tokens: model.maxTokens,\n      temperature: model.temperature,\n    });\n\n    const content = completion.choices[0]?.message?.content || '';\n    const tokensUsed = completion.usage?.total_tokens || 0;\n    const cost = this.calculateCost('openai', model.model, tokensUsed);\n\n    return {\n      content,\n      model: model.model,\n      tokensUsed,\n      cost,\n    };\n  }\n\n  private async generateWithClaude(prompt: string, model: AIModel): Promise<AIResponse> {\n    if (!this.anthropic) {\n      throw new Error('Anthropic client not initialized. Please set ANTHROPIC_API_KEY.');\n    }\n\n    const message = await this.anthropic.messages.create({\n      model: model.model,\n      max_tokens: model.maxTokens,\n      temperature: model.temperature,\n      messages: [\n        {\n          role: 'user',\n          content: prompt,\n        },\n      ],\n    });\n\n    const content = message.content[0]?.type === 'text' ? message.content[0].text : '';\n    const tokensUsed = message.usage.input_tokens + message.usage.output_tokens;\n    const cost = this.calculateCost('anthropic', model.model, tokensUsed);\n\n    return {\n      content,\n      model: model.model,\n      tokensUsed,\n      cost,\n    };\n  }\n\n  selectModel(taskType: string): AIModel {\n    // Select appropriate model based on task type\n    switch (taskType) {\n      case 'code-generation':\n        return {\n          provider: 'openai',\n          model: 'gpt-4-turbo-preview',\n          maxTokens: 4096,\n          temperature: 0.2,\n        };\n      case 'refactoring':\n        return {\n          provider: 'anthropic',\n          model: 'claude-3-opus-20240229',\n          maxTokens: 4096,\n          temperature: 0.1,\n        };\n      case 'explanation':\n        return {\n          provider: 'openai',\n          model: 'gpt-4-turbo-preview',\n          maxTokens: 2048,\n          temperature: 0.7,\n        };\n      default:\n        return {\n          provider: 'openai',\n          model: 'gpt-4-turbo-preview',\n          maxTokens: 4096,\n          temperature: 0.3,\n        };\n    }\n  }\n\n  private buildPrompt(userPrompt: string, context: AIContext): string {\n    let prompt = `# Task\\n${userPrompt}\\n\\n`;\n\n    // Add project context\n    if (context.projectInfo.frameworks.length > 0) {\n      prompt += `# Project Frameworks\\n${context.projectInfo.frameworks.join(', ')}\\n\\n`;\n    }\n\n    // Add relevant files\n    if (context.files.length > 0) {\n      prompt += `# Relevant Files\\n\\n`;\n      for (const file of context.files) {\n        prompt += `## ${file.path}\\n\\`\\`\\`\\n${file.content}\\n\\`\\`\\`\\n\\n`;\n      }\n    }\n\n    // Add conventions\n    if (context.projectInfo.conventions) {\n      prompt += `# Project Conventions\\n`;\n      prompt += `- Package Manager: ${context.projectInfo.conventions.packageManager}\\n`;\n      prompt += `- TypeScript: ${context.projectInfo.conventions.typescript ? 'Yes' : 'No'}\\n`;\n      if (context.projectInfo.conventions.testing.length > 0) {\n        prompt += `- Testing: ${context.projectInfo.conventions.testing.join(', ')}\\n`;\n      }\n      prompt += `\\n`;\n    }\n\n    prompt += `# Instructions\\n`;\n    prompt += `- Generate clean, production-ready code\\n`;\n    prompt += `- Follow the project's existing patterns and conventions\\n`;\n    prompt += `- Include proper error handling\\n`;\n    prompt += `- Add TypeScript types where applicable\\n`;\n    prompt += `- Write self-documenting code with clear variable names\\n`;\n\n    return prompt;\n  }\n\n  async estimateCost(prompt: string, context: AIContext): Promise<number> {\n    const fullPrompt = this.buildPrompt(prompt, context);\n    const estimatedTokens = Math.ceil(fullPrompt.length / 4); // Rough estimate: 1 token â‰ˆ 4 chars\n    const model = this.selectModel('code-generation');\n    return this.calculateCost(model.provider, model.model, estimatedTokens);\n  }\n\n  private calculateCost(provider: string, model: string, tokens: number): number {\n    // Pricing per 1M tokens (as of 2024)\n    const pricing: Record<string, { input: number; output: number }> = {\n      'gpt-4-turbo-preview': { input: 10, output: 30 },\n      'gpt-4': { input: 30, output: 60 },\n      'gpt-3.5-turbo': { input: 0.5, output: 1.5 },\n      'claude-3-opus-20240229': { input: 15, output: 75 },\n      'claude-3-sonnet-20240229': { input: 3, output: 15 },\n    };\n\n    const modelPricing = pricing[model] || { input: 10, output: 30 };\n    // Assume 50/50 split between input and output tokens\n    const inputTokens = tokens * 0.5;\n    const outputTokens = tokens * 0.5;\n    \n    return (inputTokens * modelPricing.input + outputTokens * modelPricing.output) / 1000000;\n  }\n\n  private getCacheKey(prompt: string, context: AIContext): string {\n    const contextStr = JSON.stringify({\n      prompt,\n      files: context.files.map(f => f.path),\n      frameworks: context.projectInfo.frameworks,\n    });\n    \n    // Simple hash function\n    let hash = 0;\n    for (let i = 0; i < contextStr.length; i++) {\n      const char = contextStr.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    return hash.toString(36);\n  }\n\n  getCachedResponse(key: string): CachedResponse | null {\n    const cached = this.cache.get(key);\n    if (!cached) return null;\n\n    // Check if cache is still valid\n    if (Date.now() - cached.timestamp > this.CACHE_TTL) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return cached;\n  }\n\n  cacheResponse(key: string, response: string, model: string): void {\n    this.cache.set(key, {\n      prompt: key,\n      response,\n      timestamp: Date.now(),\n      model,\n    });\n\n    // Limit cache size\n    if (this.cache.size > 100) {\n      const firstKey = this.cache.keys().next().value as string | undefined;\n      if (firstKey) {\n        this.cache.delete(firstKey);\n      }\n    }\n  }\n\n  getUsageStats(): { totalTokens: number; totalCost: number; cacheSize: number } {\n    return {\n      totalTokens: this.totalTokensUsed,\n      totalCost: this.totalCost,\n      cacheSize: this.cache.size,\n    };\n  }\n\n  clearCache(): void {\n    this.cache.clear();\n  }\n}\n"],"mappings":"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","ignoreList":[]}