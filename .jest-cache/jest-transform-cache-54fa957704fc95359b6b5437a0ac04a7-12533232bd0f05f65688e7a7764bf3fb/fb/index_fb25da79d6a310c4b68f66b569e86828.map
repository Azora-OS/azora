{"version":3,"names":["cov_11tjpc3api","actualCoverage","BiasType","exports","BiasSeverity","PIIType","HarmType"],"sources":["index.ts"],"sourcesContent":["/**\r\n * Constitutional AI System - Type Definitions\r\n * Core interfaces and types for ethical AI validation\r\n */\r\n\r\n/**\r\n * Validation result from any validator\r\n */\r\nexport interface ValidationResult {\r\n  isValid: boolean;\r\n  violations: string[];\r\n  score: number; // 0-100\r\n  suggestions: string[];\r\n}\r\n\r\n/**\r\n * Ubuntu principles validation result\r\n */\r\nexport interface UbuntuValidationResult extends ValidationResult {\r\n  collectiveBenefitScore: number;\r\n  knowledgeSharingScore: number;\r\n  inclusiveDesignScore: number;\r\n}\r\n\r\n/**\r\n * Bias detection types\r\n */\r\nexport enum BiasType {\r\n  GENDER = 'gender',\r\n  RACE = 'race',\r\n  AGE = 'age',\r\n  RELIGION = 'religion',\r\n  DISABILITY = 'disability',\r\n  SOCIOECONOMIC = 'socioeconomic',\r\n  NATIONALITY = 'nationality'\r\n}\r\n\r\n/**\r\n * Bias severity levels\r\n */\r\nexport enum BiasSeverity {\r\n  LOW = 'low',\r\n  MEDIUM = 'medium',\r\n  HIGH = 'high',\r\n  CRITICAL = 'critical'\r\n}\r\n\r\n/**\r\n * Individual bias score\r\n */\r\nexport interface BiasScore {\r\n  type: BiasType;\r\n  severity: BiasSeverity;\r\n  confidence: number; // 0-1\r\n  context: string;\r\n  location: {\r\n    start: number;\r\n    end: number;\r\n  };\r\n}\r\n\r\n/**\r\n * Bias detection report\r\n */\r\nexport interface BiasReport {\r\n  hasBias: boolean;\r\n  biasTypes: BiasScore[];\r\n  overallSeverity: BiasSeverity;\r\n  mitigatedOutput?: string;\r\n  mitigationApplied: boolean;\r\n}\r\n\r\n/**\r\n * PII (Personally Identifiable Information) types\r\n */\r\nexport enum PIIType {\r\n  EMAIL = 'email',\r\n  PHONE = 'phone',\r\n  SSN = 'ssn',\r\n  ADDRESS = 'address',\r\n  NAME = 'name',\r\n  CREDIT_CARD = 'credit_card',\r\n  IP_ADDRESS = 'ip_address',\r\n  DATE_OF_BIRTH = 'date_of_birth'\r\n}\r\n\r\n/**\r\n * PII match in text\r\n */\r\nexport interface PIIMatch {\r\n  type: PIIType;\r\n  value: string;\r\n  startIndex: number;\r\n  endIndex: number;\r\n  confidence: number; // 0-1\r\n}\r\n\r\n/**\r\n * Privacy filter result\r\n */\r\nexport interface FilterResult {\r\n  hasPII: boolean;\r\n  matches: PIIMatch[];\r\n  filteredOutput: string;\r\n  redactionCount: number;\r\n}\r\n\r\n/**\r\n * Harm types\r\n */\r\nexport enum HarmType {\r\n  VIOLENCE = 'violence',\r\n  HATE_SPEECH = 'hate_speech',\r\n  SELF_HARM = 'self_harm',\r\n  ILLEGAL = 'illegal',\r\n  MISINFORMATION = 'misinformation',\r\n  EXPLOITATION = 'exploitation',\r\n  HARASSMENT = 'harassment',\r\n  DANGEROUS_CONTENT = 'dangerous_content'\r\n}\r\n\r\n/**\r\n * Harm assessment result\r\n */\r\nexport interface HarmAssessment {\r\n  isHarmful: boolean;\r\n  harmTypes: HarmType[];\r\n  severity: number; // 0-10\r\n  explanation: string;\r\n  confidence: number; // 0-1\r\n}\r\n\r\n/**\r\n * Violation details\r\n */\r\nexport interface Violation {\r\n  type: 'ubuntu' | 'bias' | 'privacy' | 'harm';\r\n  severity: BiasSeverity;\r\n  description: string;\r\n  suggestion: string;\r\n  location?: {\r\n    start: number;\r\n    end: number;\r\n  };\r\n}\r\n\r\n/**\r\n * Constitutional validation result\r\n */\r\nexport interface ConstitutionalResult {\r\n  isValid: boolean;\r\n  validatedOutput: string;\r\n  violations: Violation[];\r\n  complianceScore: number; // 0-100\r\n  timestamp: Date;\r\n  metadata: {\r\n    ubuntuValidation: UbuntuValidationResult;\r\n    biasDetection: BiasReport;\r\n    privacyFilter: FilterResult;\r\n    harmPrevention: HarmAssessment;\r\n  };\r\n}\r\n\r\n/**\r\n * Constitutional audit log entry\r\n */\r\nexport interface ConstitutionalAuditLog {\r\n  id: string;\r\n  userId: string;\r\n  query: string;\r\n  originalOutput: string;\r\n  validatedOutput: string;\r\n  violations: Violation[];\r\n  complianceScore: number;\r\n  timestamp: Date;\r\n  tier: string;\r\n  processingTime: number; // milliseconds\r\n}\r\n\r\n/**\r\n * Ubuntu validator interface\r\n */\r\nexport interface IUbuntuValidator {\r\n  validate(output: string): Promise<UbuntuValidationResult>;\r\n  checkCollectiveBenefit(output: string): Promise<number>;\r\n  checkKnowledgeSharing(output: string): Promise<number>;\r\n  checkInclusiveDesign(output: string): Promise<number>;\r\n}\r\n\r\n/**\r\n * Bias detector interface\r\n */\r\nexport interface IBiasDetector {\r\n  detectBias(output: string): Promise<BiasReport>;\r\n  checkDemographicBias(output: string): Promise<BiasScore[]>;\r\n  mitigateBias(output: string, biases: BiasScore[]): Promise<string>;\r\n}\r\n\r\n/**\r\n * Privacy filter interface\r\n */\r\nexport interface IPrivacyFilter {\r\n  filterPII(output: string): Promise<FilterResult>;\r\n  detectPII(output: string): Promise<PIIMatch[]>;\r\n  redactPII(output: string, matches: PIIMatch[]): Promise<string>;\r\n}\r\n\r\n/**\r\n * Harm prevention interface\r\n */\r\nexport interface IHarmPrevention {\r\n  assessHarm(query: string, output: string): Promise<HarmAssessment>;\r\n  isHarmful(assessment: HarmAssessment): boolean;\r\n  generateSafeResponse(query: string): string;\r\n}\r\n\r\n/**\r\n * Constitutional orchestrator interface\r\n */\r\nexport interface IConstitutionalOrchestrator {\r\n  validateOutput(query: string, output: string, context?: Record<string, any>): Promise<ConstitutionalResult>;\r\n  logValidation(result: ConstitutionalResult, userId: string): Promise<void>;\r\n  getComplianceMetrics(): Promise<ComplianceMetrics>;\r\n}\r\n\r\n/**\r\n * Compliance metrics\r\n */\r\nexport interface ComplianceMetrics {\r\n  totalValidations: number;\r\n  successfulValidations: number;\r\n  failedValidations: number;\r\n  averageComplianceScore: number;\r\n  violationsByType: Record<string, number>;\r\n  averageProcessingTime: number;\r\n  lastUpdated: Date;\r\n}\r\n\r\n/**\r\n * Configuration for Constitutional AI\r\n */\r\nexport interface ConstitutionalAIConfig {\r\n  // Ubuntu validation settings\r\n  ubuntuEnabled: boolean;\r\n  ubuntuThreshold: number; // 0-100\r\n  \r\n  // Bias detection settings\r\n  biasDetectionEnabled: boolean;\r\n  biasSeverityThreshold: BiasSeverity;\r\n  autoMitigateBias: boolean;\r\n  \r\n  // Privacy filter settings\r\n  privacyFilterEnabled: boolean;\r\n  piiRedactionEnabled: boolean;\r\n  piiTypes: PIIType[];\r\n  \r\n  // Harm prevention settings\r\n  harmPreventionEnabled: boolean;\r\n  harmSeverityThreshold: number; // 0-10\r\n  blockHarmfulContent: boolean;\r\n  \r\n  // Audit logging settings\r\n  auditLoggingEnabled: boolean;\r\n  auditLogRetention: number; // days\r\n  \r\n  // Performance settings\r\n  validationTimeout: number; // milliseconds\r\n  parallelValidation: boolean;\r\n  \r\n  // Compliance settings\r\n  minComplianceScore: number; // 0-100\r\n  strictMode: boolean;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;AACA;AACA;AAEA;AACA;AACA;AAQA;AACA;AACA;AAOA;AACA;AACA;AAFA,IAGYE,QAAQ,GAAAC,OAAA,CAAAD,QAAA,0BAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAAA,OAARA,QAAQ;AAAA;AAUpB;AACA;AACA;AAFA;AAAA,IAGYE,YAAY,GAAAD,OAAA,CAAAC,YAAA,0BAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAA,OAAZA,YAAY;AAAA;AAOxB;AACA;AACA;AAYA;AACA;AACA;AAFA;AAWA;AACA;AACA;AAFA,IAGYC,OAAO,GAAAF,OAAA,CAAAE,OAAA,0BAAPA,OAAO;EAAPA,OAAO;EAAPA,OAAO;EAAPA,OAAO;EAAPA,OAAO;EAAPA,OAAO;EAAPA,OAAO;EAAPA,OAAO;EAAPA,OAAO;EAAA,OAAPA,OAAO;AAAA;AAWnB;AACA;AACA;AASA;AACA;AACA;AAFA;AAUA;AACA;AACA;AAFA,IAGYC,QAAQ,GAAAH,OAAA,CAAAG,QAAA,0BAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAARA,QAAQ;EAAA,OAARA,QAAQ;AAAA;AAWpB;AACA;AACA;AASA;AACA;AACA;AAYA;AACA;AACA;AAeA;AACA;AACA;AAcA;AACA;AACA;AAQA;AACA;AACA;AAOA;AACA;AACA;AAOA;AACA;AACA;AAOA;AACA;AACA;AAOA;AACA;AACA;AAWA;AACA;AACA","ignoreList":[]}