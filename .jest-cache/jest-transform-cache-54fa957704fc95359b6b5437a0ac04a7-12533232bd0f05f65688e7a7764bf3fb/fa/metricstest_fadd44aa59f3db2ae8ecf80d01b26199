4a30befde399edd69573d0f75c269af4
"use strict";

var _metrics = require("../metrics");
/**
 * Metrics Tests
 */

describe('Metrics', () => {
  describe('recordHttpRequest', () => {
    it('should record HTTP request metrics', () => {
      const initialCount = _metrics.httpRequestTotal.get({
        method: 'GET',
        route: '/api/v1/courses',
        status_code: '200'
      })?.values[0]?.value || 0;
      (0, _metrics.recordHttpRequest)('GET', '/api/v1/courses', 200, 0.5);
      const finalCount = _metrics.httpRequestTotal.get({
        method: 'GET',
        route: '/api/v1/courses',
        status_code: '200'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
    it('should record HTTP request duration', () => {
      (0, _metrics.recordHttpRequest)('POST', '/api/v1/enrollments', 201, 1.2);
      // Histogram records are stored internally
      expect(_metrics.httpRequestDuration).toBeDefined();
    });
  });
  describe('recordHttpError', () => {
    it('should record HTTP errors', () => {
      const initialCount = _metrics.httpErrorsTotal.get({
        method: 'GET',
        route: '/api/v1/courses',
        error_type: 'ValidationError'
      })?.values[0]?.value || 0;
      (0, _metrics.recordHttpError)('GET', '/api/v1/courses', 'ValidationError');
      const finalCount = _metrics.httpErrorsTotal.get({
        method: 'GET',
        route: '/api/v1/courses',
        error_type: 'ValidationError'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
  });
  describe('recordDbQuery', () => {
    it('should record successful database queries', () => {
      const initialCount = _metrics.dbQueryTotal.get({
        operation: 'SELECT',
        table: 'courses',
        status: 'success'
      })?.values[0]?.value || 0;
      (0, _metrics.recordDbQuery)('SELECT', 'courses', 0.05, 'success');
      const finalCount = _metrics.dbQueryTotal.get({
        operation: 'SELECT',
        table: 'courses',
        status: 'success'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
    it('should record failed database queries', () => {
      const initialCount = _metrics.dbQueryTotal.get({
        operation: 'INSERT',
        table: 'enrollments',
        status: 'error'
      })?.values[0]?.value || 0;
      (0, _metrics.recordDbQuery)('INSERT', 'enrollments', 0.1, 'error');
      const finalCount = _metrics.dbQueryTotal.get({
        operation: 'INSERT',
        table: 'enrollments',
        status: 'error'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
  });
  describe('recordAiQuery', () => {
    it('should record successful AI queries', () => {
      const initialCount = _metrics.aiQueryTotal.get({
        engine: 'elara',
        operation: 'tutoring',
        status: 'success'
      })?.values[0]?.value || 0;
      (0, _metrics.recordAiQuery)('elara', 'tutoring', 2.5, 'success');
      const finalCount = _metrics.aiQueryTotal.get({
        engine: 'elara',
        operation: 'tutoring',
        status: 'success'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
    it('should record failed AI queries', () => {
      const initialCount = _metrics.aiQueryTotal.get({
        engine: 'knowledge-ocean',
        operation: 'retrieval',
        status: 'error'
      })?.values[0]?.value || 0;
      (0, _metrics.recordAiQuery)('knowledge-ocean', 'retrieval', 5.0, 'error');
      const finalCount = _metrics.aiQueryTotal.get({
        engine: 'knowledge-ocean',
        operation: 'retrieval',
        status: 'error'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
  });
  describe('recordAiError', () => {
    it('should record AI errors', () => {
      const initialCount = _metrics.aiErrorsTotal.get({
        engine: 'constitutional-ai',
        error_type: 'ValidationError'
      })?.values[0]?.value || 0;
      (0, _metrics.recordAiError)('constitutional-ai', 'ValidationError');
      const finalCount = _metrics.aiErrorsTotal.get({
        engine: 'constitutional-ai',
        error_type: 'ValidationError'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
  });
  describe('recordCacheHit', () => {
    it('should record cache hits', () => {
      const initialCount = _metrics.cacheHitTotal.get({
        cache_type: 'redis'
      })?.values[0]?.value || 0;
      (0, _metrics.recordCacheHit)('redis');
      const finalCount = _metrics.cacheHitTotal.get({
        cache_type: 'redis'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
  });
  describe('recordCacheMiss', () => {
    it('should record cache misses', () => {
      const initialCount = _metrics.cacheMissTotal.get({
        cache_type: 'redis'
      })?.values[0]?.value || 0;
      (0, _metrics.recordCacheMiss)('redis');
      const finalCount = _metrics.cacheMissTotal.get({
        cache_type: 'redis'
      })?.values[0]?.value || 0;
      expect(finalCount).toBeGreaterThan(initialCount);
    });
  });
  describe('updateSystemMetrics', () => {
    it('should update system metrics without errors', () => {
      expect(() => {
        (0, _metrics.updateSystemMetrics)();
      }).not.toThrow();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbWV0cmljcyIsInJlcXVpcmUiLCJkZXNjcmliZSIsIml0IiwiaW5pdGlhbENvdW50IiwiaHR0cFJlcXVlc3RUb3RhbCIsImdldCIsIm1ldGhvZCIsInJvdXRlIiwic3RhdHVzX2NvZGUiLCJ2YWx1ZXMiLCJ2YWx1ZSIsInJlY29yZEh0dHBSZXF1ZXN0IiwiZmluYWxDb3VudCIsImV4cGVjdCIsInRvQmVHcmVhdGVyVGhhbiIsImh0dHBSZXF1ZXN0RHVyYXRpb24iLCJ0b0JlRGVmaW5lZCIsImh0dHBFcnJvcnNUb3RhbCIsImVycm9yX3R5cGUiLCJyZWNvcmRIdHRwRXJyb3IiLCJkYlF1ZXJ5VG90YWwiLCJvcGVyYXRpb24iLCJ0YWJsZSIsInN0YXR1cyIsInJlY29yZERiUXVlcnkiLCJhaVF1ZXJ5VG90YWwiLCJlbmdpbmUiLCJyZWNvcmRBaVF1ZXJ5IiwiYWlFcnJvcnNUb3RhbCIsInJlY29yZEFpRXJyb3IiLCJjYWNoZUhpdFRvdGFsIiwiY2FjaGVfdHlwZSIsInJlY29yZENhY2hlSGl0IiwiY2FjaGVNaXNzVG90YWwiLCJyZWNvcmRDYWNoZU1pc3MiLCJ1cGRhdGVTeXN0ZW1NZXRyaWNzIiwibm90IiwidG9UaHJvdyJdLCJzb3VyY2VzIjpbIm1ldHJpY3MudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTWV0cmljcyBUZXN0c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgcmVjb3JkSHR0cFJlcXVlc3QsXHJcbiAgcmVjb3JkSHR0cEVycm9yLFxyXG4gIHJlY29yZERiUXVlcnksXHJcbiAgcmVjb3JkQWlRdWVyeSxcclxuICByZWNvcmRBaUVycm9yLFxyXG4gIHJlY29yZENhY2hlSGl0LFxyXG4gIHJlY29yZENhY2hlTWlzcyxcclxuICB1cGRhdGVTeXN0ZW1NZXRyaWNzLFxyXG4gIGh0dHBSZXF1ZXN0RHVyYXRpb24sXHJcbiAgaHR0cFJlcXVlc3RUb3RhbCxcclxuICBodHRwRXJyb3JzVG90YWwsXHJcbiAgZGJRdWVyeUR1cmF0aW9uLFxyXG4gIGRiUXVlcnlUb3RhbCxcclxuICBhaVF1ZXJ5RHVyYXRpb24sXHJcbiAgYWlRdWVyeVRvdGFsLFxyXG4gIGFpRXJyb3JzVG90YWwsXHJcbiAgY2FjaGVIaXRUb3RhbCxcclxuICBjYWNoZU1pc3NUb3RhbCxcclxufSBmcm9tICcuLi9tZXRyaWNzJztcclxuXHJcbmRlc2NyaWJlKCdNZXRyaWNzJywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdyZWNvcmRIdHRwUmVxdWVzdCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmVjb3JkIEhUVFAgcmVxdWVzdCBtZXRyaWNzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbml0aWFsQ291bnQgPSAoaHR0cFJlcXVlc3RUb3RhbCBhcyBhbnkpLmdldCh7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICByb3V0ZTogJy9hcGkvdjEvY291cnNlcycsXHJcbiAgICAgICAgc3RhdHVzX2NvZGU6ICcyMDAnLFxyXG4gICAgICB9KT8udmFsdWVzWzBdPy52YWx1ZSB8fCAwO1xyXG5cclxuICAgICAgcmVjb3JkSHR0cFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YxL2NvdXJzZXMnLCAyMDAsIDAuNSk7XHJcblxyXG4gICAgICBjb25zdCBmaW5hbENvdW50ID0gKGh0dHBSZXF1ZXN0VG90YWwgYXMgYW55KS5nZXQoe1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgcm91dGU6ICcvYXBpL3YxL2NvdXJzZXMnLFxyXG4gICAgICAgIHN0YXR1c19jb2RlOiAnMjAwJyxcclxuICAgICAgfSk/LnZhbHVlc1swXT8udmFsdWUgfHwgMDtcclxuXHJcbiAgICAgIGV4cGVjdChmaW5hbENvdW50KS50b0JlR3JlYXRlclRoYW4oaW5pdGlhbENvdW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVjb3JkIEhUVFAgcmVxdWVzdCBkdXJhdGlvbicsICgpID0+IHtcclxuICAgICAgcmVjb3JkSHR0cFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92MS9lbnJvbGxtZW50cycsIDIwMSwgMS4yKTtcclxuICAgICAgLy8gSGlzdG9ncmFtIHJlY29yZHMgYXJlIHN0b3JlZCBpbnRlcm5hbGx5XHJcbiAgICAgIGV4cGVjdChodHRwUmVxdWVzdER1cmF0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdyZWNvcmRIdHRwRXJyb3InLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJlY29yZCBIVFRQIGVycm9ycycsICgpID0+IHtcclxuICAgICAgY29uc3QgaW5pdGlhbENvdW50ID0gKGh0dHBFcnJvcnNUb3RhbCBhcyBhbnkpLmdldCh7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICByb3V0ZTogJy9hcGkvdjEvY291cnNlcycsXHJcbiAgICAgICAgZXJyb3JfdHlwZTogJ1ZhbGlkYXRpb25FcnJvcicsXHJcbiAgICAgIH0pPy52YWx1ZXNbMF0/LnZhbHVlIHx8IDA7XHJcblxyXG4gICAgICByZWNvcmRIdHRwRXJyb3IoJ0dFVCcsICcvYXBpL3YxL2NvdXJzZXMnLCAnVmFsaWRhdGlvbkVycm9yJyk7XHJcblxyXG4gICAgICBjb25zdCBmaW5hbENvdW50ID0gKGh0dHBFcnJvcnNUb3RhbCBhcyBhbnkpLmdldCh7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICByb3V0ZTogJy9hcGkvdjEvY291cnNlcycsXHJcbiAgICAgICAgZXJyb3JfdHlwZTogJ1ZhbGlkYXRpb25FcnJvcicsXHJcbiAgICAgIH0pPy52YWx1ZXNbMF0/LnZhbHVlIHx8IDA7XHJcblxyXG4gICAgICBleHBlY3QoZmluYWxDb3VudCkudG9CZUdyZWF0ZXJUaGFuKGluaXRpYWxDb3VudCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3JlY29yZERiUXVlcnknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJlY29yZCBzdWNjZXNzZnVsIGRhdGFiYXNlIHF1ZXJpZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluaXRpYWxDb3VudCA9IChkYlF1ZXJ5VG90YWwgYXMgYW55KS5nZXQoe1xyXG4gICAgICAgIG9wZXJhdGlvbjogJ1NFTEVDVCcsXHJcbiAgICAgICAgdGFibGU6ICdjb3Vyc2VzJyxcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgfSk/LnZhbHVlc1swXT8udmFsdWUgfHwgMDtcclxuXHJcbiAgICAgIHJlY29yZERiUXVlcnkoJ1NFTEVDVCcsICdjb3Vyc2VzJywgMC4wNSwgJ3N1Y2Nlc3MnKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbmFsQ291bnQgPSAoZGJRdWVyeVRvdGFsIGFzIGFueSkuZ2V0KHtcclxuICAgICAgICBvcGVyYXRpb246ICdTRUxFQ1QnLFxyXG4gICAgICAgIHRhYmxlOiAnY291cnNlcycsXHJcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXHJcbiAgICAgIH0pPy52YWx1ZXNbMF0/LnZhbHVlIHx8IDA7XHJcblxyXG4gICAgICBleHBlY3QoZmluYWxDb3VudCkudG9CZUdyZWF0ZXJUaGFuKGluaXRpYWxDb3VudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlY29yZCBmYWlsZWQgZGF0YWJhc2UgcXVlcmllcycsICgpID0+IHtcclxuICAgICAgY29uc3QgaW5pdGlhbENvdW50ID0gKGRiUXVlcnlUb3RhbCBhcyBhbnkpLmdldCh7XHJcbiAgICAgICAgb3BlcmF0aW9uOiAnSU5TRVJUJyxcclxuICAgICAgICB0YWJsZTogJ2Vucm9sbG1lbnRzJyxcclxuICAgICAgICBzdGF0dXM6ICdlcnJvcicsXHJcbiAgICAgIH0pPy52YWx1ZXNbMF0/LnZhbHVlIHx8IDA7XHJcblxyXG4gICAgICByZWNvcmREYlF1ZXJ5KCdJTlNFUlQnLCAnZW5yb2xsbWVudHMnLCAwLjEsICdlcnJvcicpO1xyXG5cclxuICAgICAgY29uc3QgZmluYWxDb3VudCA9IChkYlF1ZXJ5VG90YWwgYXMgYW55KS5nZXQoe1xyXG4gICAgICAgIG9wZXJhdGlvbjogJ0lOU0VSVCcsXHJcbiAgICAgICAgdGFibGU6ICdlbnJvbGxtZW50cycsXHJcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICB9KT8udmFsdWVzWzBdPy52YWx1ZSB8fCAwO1xyXG5cclxuICAgICAgZXhwZWN0KGZpbmFsQ291bnQpLnRvQmVHcmVhdGVyVGhhbihpbml0aWFsQ291bnQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdyZWNvcmRBaVF1ZXJ5JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZWNvcmQgc3VjY2Vzc2Z1bCBBSSBxdWVyaWVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbml0aWFsQ291bnQgPSAoYWlRdWVyeVRvdGFsIGFzIGFueSkuZ2V0KHtcclxuICAgICAgICBlbmdpbmU6ICdlbGFyYScsXHJcbiAgICAgICAgb3BlcmF0aW9uOiAndHV0b3JpbmcnLFxyXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICB9KT8udmFsdWVzWzBdPy52YWx1ZSB8fCAwO1xyXG5cclxuICAgICAgcmVjb3JkQWlRdWVyeSgnZWxhcmEnLCAndHV0b3JpbmcnLCAyLjUsICdzdWNjZXNzJyk7XHJcblxyXG4gICAgICBjb25zdCBmaW5hbENvdW50ID0gKGFpUXVlcnlUb3RhbCBhcyBhbnkpLmdldCh7XHJcbiAgICAgICAgZW5naW5lOiAnZWxhcmEnLFxyXG4gICAgICAgIG9wZXJhdGlvbjogJ3R1dG9yaW5nJyxcclxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgfSk/LnZhbHVlc1swXT8udmFsdWUgfHwgMDtcclxuXHJcbiAgICAgIGV4cGVjdChmaW5hbENvdW50KS50b0JlR3JlYXRlclRoYW4oaW5pdGlhbENvdW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVjb3JkIGZhaWxlZCBBSSBxdWVyaWVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbml0aWFsQ291bnQgPSAoYWlRdWVyeVRvdGFsIGFzIGFueSkuZ2V0KHtcclxuICAgICAgICBlbmdpbmU6ICdrbm93bGVkZ2Utb2NlYW4nLFxyXG4gICAgICAgIG9wZXJhdGlvbjogJ3JldHJpZXZhbCcsXHJcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICB9KT8udmFsdWVzWzBdPy52YWx1ZSB8fCAwO1xyXG5cclxuICAgICAgcmVjb3JkQWlRdWVyeSgna25vd2xlZGdlLW9jZWFuJywgJ3JldHJpZXZhbCcsIDUuMCwgJ2Vycm9yJyk7XHJcblxyXG4gICAgICBjb25zdCBmaW5hbENvdW50ID0gKGFpUXVlcnlUb3RhbCBhcyBhbnkpLmdldCh7XHJcbiAgICAgICAgZW5naW5lOiAna25vd2xlZGdlLW9jZWFuJyxcclxuICAgICAgICBvcGVyYXRpb246ICdyZXRyaWV2YWwnLFxyXG4gICAgICAgIHN0YXR1czogJ2Vycm9yJyxcclxuICAgICAgfSk/LnZhbHVlc1swXT8udmFsdWUgfHwgMDtcclxuXHJcbiAgICAgIGV4cGVjdChmaW5hbENvdW50KS50b0JlR3JlYXRlclRoYW4oaW5pdGlhbENvdW50KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncmVjb3JkQWlFcnJvcicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmVjb3JkIEFJIGVycm9ycycsICgpID0+IHtcclxuICAgICAgY29uc3QgaW5pdGlhbENvdW50ID0gKGFpRXJyb3JzVG90YWwgYXMgYW55KS5nZXQoe1xyXG4gICAgICAgIGVuZ2luZTogJ2NvbnN0aXR1dGlvbmFsLWFpJyxcclxuICAgICAgICBlcnJvcl90eXBlOiAnVmFsaWRhdGlvbkVycm9yJyxcclxuICAgICAgfSk/LnZhbHVlc1swXT8udmFsdWUgfHwgMDtcclxuXHJcbiAgICAgIHJlY29yZEFpRXJyb3IoJ2NvbnN0aXR1dGlvbmFsLWFpJywgJ1ZhbGlkYXRpb25FcnJvcicpO1xyXG5cclxuICAgICAgY29uc3QgZmluYWxDb3VudCA9IChhaUVycm9yc1RvdGFsIGFzIGFueSkuZ2V0KHtcclxuICAgICAgICBlbmdpbmU6ICdjb25zdGl0dXRpb25hbC1haScsXHJcbiAgICAgICAgZXJyb3JfdHlwZTogJ1ZhbGlkYXRpb25FcnJvcicsXHJcbiAgICAgIH0pPy52YWx1ZXNbMF0/LnZhbHVlIHx8IDA7XHJcblxyXG4gICAgICBleHBlY3QoZmluYWxDb3VudCkudG9CZUdyZWF0ZXJUaGFuKGluaXRpYWxDb3VudCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3JlY29yZENhY2hlSGl0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZWNvcmQgY2FjaGUgaGl0cycsICgpID0+IHtcclxuICAgICAgY29uc3QgaW5pdGlhbENvdW50ID0gKGNhY2hlSGl0VG90YWwgYXMgYW55KS5nZXQoe1xyXG4gICAgICAgIGNhY2hlX3R5cGU6ICdyZWRpcycsXHJcbiAgICAgIH0pPy52YWx1ZXNbMF0/LnZhbHVlIHx8IDA7XHJcblxyXG4gICAgICByZWNvcmRDYWNoZUhpdCgncmVkaXMnKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbmFsQ291bnQgPSAoY2FjaGVIaXRUb3RhbCBhcyBhbnkpLmdldCh7XHJcbiAgICAgICAgY2FjaGVfdHlwZTogJ3JlZGlzJyxcclxuICAgICAgfSk/LnZhbHVlc1swXT8udmFsdWUgfHwgMDtcclxuXHJcbiAgICAgIGV4cGVjdChmaW5hbENvdW50KS50b0JlR3JlYXRlclRoYW4oaW5pdGlhbENvdW50KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncmVjb3JkQ2FjaGVNaXNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZWNvcmQgY2FjaGUgbWlzc2VzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbml0aWFsQ291bnQgPSAoY2FjaGVNaXNzVG90YWwgYXMgYW55KS5nZXQoe1xyXG4gICAgICAgIGNhY2hlX3R5cGU6ICdyZWRpcycsXHJcbiAgICAgIH0pPy52YWx1ZXNbMF0/LnZhbHVlIHx8IDA7XHJcblxyXG4gICAgICByZWNvcmRDYWNoZU1pc3MoJ3JlZGlzJyk7XHJcblxyXG4gICAgICBjb25zdCBmaW5hbENvdW50ID0gKGNhY2hlTWlzc1RvdGFsIGFzIGFueSkuZ2V0KHtcclxuICAgICAgICBjYWNoZV90eXBlOiAncmVkaXMnLFxyXG4gICAgICB9KT8udmFsdWVzWzBdPy52YWx1ZSB8fCAwO1xyXG5cclxuICAgICAgZXhwZWN0KGZpbmFsQ291bnQpLnRvQmVHcmVhdGVyVGhhbihpbml0aWFsQ291bnQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCd1cGRhdGVTeXN0ZW1NZXRyaWNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgc3lzdGVtIG1ldHJpY3Mgd2l0aG91dCBlcnJvcnMnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgdXBkYXRlU3lzdGVtTWV0cmljcygpO1xyXG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBSUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBSkE7QUFDQTtBQUNBOztBQXVCQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxNQUFNO0VBQ3hCQSxRQUFRLENBQUMsbUJBQW1CLEVBQUUsTUFBTTtJQUNsQ0MsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLE1BQU07TUFDN0MsTUFBTUMsWUFBWSxHQUFJQyx5QkFBZ0IsQ0FBU0MsR0FBRyxDQUFDO1FBQ2pEQyxNQUFNLEVBQUUsS0FBSztRQUNiQyxLQUFLLEVBQUUsaUJBQWlCO1FBQ3hCQyxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUMsRUFBRUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFQyxLQUFLLElBQUksQ0FBQztNQUV6QixJQUFBQywwQkFBaUIsRUFBQyxLQUFLLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztNQUVyRCxNQUFNQyxVQUFVLEdBQUlSLHlCQUFnQixDQUFTQyxHQUFHLENBQUM7UUFDL0NDLE1BQU0sRUFBRSxLQUFLO1FBQ2JDLEtBQUssRUFBRSxpQkFBaUI7UUFDeEJDLFdBQVcsRUFBRTtNQUNmLENBQUMsQ0FBQyxFQUFFQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVDLEtBQUssSUFBSSxDQUFDO01BRXpCRyxNQUFNLENBQUNELFVBQVUsQ0FBQyxDQUFDRSxlQUFlLENBQUNYLFlBQVksQ0FBQztJQUNsRCxDQUFDLENBQUM7SUFFRkQsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLE1BQU07TUFDOUMsSUFBQVMsMEJBQWlCLEVBQUMsTUFBTSxFQUFFLHFCQUFxQixFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7TUFDMUQ7TUFDQUUsTUFBTSxDQUFDRSw0QkFBbUIsQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBQztJQUMzQyxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRmYsUUFBUSxDQUFDLGlCQUFpQixFQUFFLE1BQU07SUFDaENDLEVBQUUsQ0FBQywyQkFBMkIsRUFBRSxNQUFNO01BQ3BDLE1BQU1DLFlBQVksR0FBSWMsd0JBQWUsQ0FBU1osR0FBRyxDQUFDO1FBQ2hEQyxNQUFNLEVBQUUsS0FBSztRQUNiQyxLQUFLLEVBQUUsaUJBQWlCO1FBQ3hCVyxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUMsRUFBRVQsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFQyxLQUFLLElBQUksQ0FBQztNQUV6QixJQUFBUyx3QkFBZSxFQUFDLEtBQUssRUFBRSxpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQztNQUU1RCxNQUFNUCxVQUFVLEdBQUlLLHdCQUFlLENBQVNaLEdBQUcsQ0FBQztRQUM5Q0MsTUFBTSxFQUFFLEtBQUs7UUFDYkMsS0FBSyxFQUFFLGlCQUFpQjtRQUN4QlcsVUFBVSxFQUFFO01BQ2QsQ0FBQyxDQUFDLEVBQUVULE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRUMsS0FBSyxJQUFJLENBQUM7TUFFekJHLE1BQU0sQ0FBQ0QsVUFBVSxDQUFDLENBQUNFLGVBQWUsQ0FBQ1gsWUFBWSxDQUFDO0lBQ2xELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGRixRQUFRLENBQUMsZUFBZSxFQUFFLE1BQU07SUFDOUJDLEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxNQUFNO01BQ3BELE1BQU1DLFlBQVksR0FBSWlCLHFCQUFZLENBQVNmLEdBQUcsQ0FBQztRQUM3Q2dCLFNBQVMsRUFBRSxRQUFRO1FBQ25CQyxLQUFLLEVBQUUsU0FBUztRQUNoQkMsTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUFDLEVBQUVkLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRUMsS0FBSyxJQUFJLENBQUM7TUFFekIsSUFBQWMsc0JBQWEsRUFBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxTQUFTLENBQUM7TUFFbkQsTUFBTVosVUFBVSxHQUFJUSxxQkFBWSxDQUFTZixHQUFHLENBQUM7UUFDM0NnQixTQUFTLEVBQUUsUUFBUTtRQUNuQkMsS0FBSyxFQUFFLFNBQVM7UUFDaEJDLE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQyxFQUFFZCxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVDLEtBQUssSUFBSSxDQUFDO01BRXpCRyxNQUFNLENBQUNELFVBQVUsQ0FBQyxDQUFDRSxlQUFlLENBQUNYLFlBQVksQ0FBQztJQUNsRCxDQUFDLENBQUM7SUFFRkQsRUFBRSxDQUFDLHVDQUF1QyxFQUFFLE1BQU07TUFDaEQsTUFBTUMsWUFBWSxHQUFJaUIscUJBQVksQ0FBU2YsR0FBRyxDQUFDO1FBQzdDZ0IsU0FBUyxFQUFFLFFBQVE7UUFDbkJDLEtBQUssRUFBRSxhQUFhO1FBQ3BCQyxNQUFNLEVBQUU7TUFDVixDQUFDLENBQUMsRUFBRWQsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFQyxLQUFLLElBQUksQ0FBQztNQUV6QixJQUFBYyxzQkFBYSxFQUFDLFFBQVEsRUFBRSxhQUFhLEVBQUUsR0FBRyxFQUFFLE9BQU8sQ0FBQztNQUVwRCxNQUFNWixVQUFVLEdBQUlRLHFCQUFZLENBQVNmLEdBQUcsQ0FBQztRQUMzQ2dCLFNBQVMsRUFBRSxRQUFRO1FBQ25CQyxLQUFLLEVBQUUsYUFBYTtRQUNwQkMsTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUFDLEVBQUVkLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRUMsS0FBSyxJQUFJLENBQUM7TUFFekJHLE1BQU0sQ0FBQ0QsVUFBVSxDQUFDLENBQUNFLGVBQWUsQ0FBQ1gsWUFBWSxDQUFDO0lBQ2xELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGRixRQUFRLENBQUMsZUFBZSxFQUFFLE1BQU07SUFDOUJDLEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxNQUFNO01BQzlDLE1BQU1DLFlBQVksR0FBSXNCLHFCQUFZLENBQVNwQixHQUFHLENBQUM7UUFDN0NxQixNQUFNLEVBQUUsT0FBTztRQUNmTCxTQUFTLEVBQUUsVUFBVTtRQUNyQkUsTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUFDLEVBQUVkLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRUMsS0FBSyxJQUFJLENBQUM7TUFFekIsSUFBQWlCLHNCQUFhLEVBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsU0FBUyxDQUFDO01BRWxELE1BQU1mLFVBQVUsR0FBSWEscUJBQVksQ0FBU3BCLEdBQUcsQ0FBQztRQUMzQ3FCLE1BQU0sRUFBRSxPQUFPO1FBQ2ZMLFNBQVMsRUFBRSxVQUFVO1FBQ3JCRSxNQUFNLEVBQUU7TUFDVixDQUFDLENBQUMsRUFBRWQsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFQyxLQUFLLElBQUksQ0FBQztNQUV6QkcsTUFBTSxDQUFDRCxVQUFVLENBQUMsQ0FBQ0UsZUFBZSxDQUFDWCxZQUFZLENBQUM7SUFDbEQsQ0FBQyxDQUFDO0lBRUZELEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxNQUFNO01BQzFDLE1BQU1DLFlBQVksR0FBSXNCLHFCQUFZLENBQVNwQixHQUFHLENBQUM7UUFDN0NxQixNQUFNLEVBQUUsaUJBQWlCO1FBQ3pCTCxTQUFTLEVBQUUsV0FBVztRQUN0QkUsTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUFDLEVBQUVkLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRUMsS0FBSyxJQUFJLENBQUM7TUFFekIsSUFBQWlCLHNCQUFhLEVBQUMsaUJBQWlCLEVBQUUsV0FBVyxFQUFFLEdBQUcsRUFBRSxPQUFPLENBQUM7TUFFM0QsTUFBTWYsVUFBVSxHQUFJYSxxQkFBWSxDQUFTcEIsR0FBRyxDQUFDO1FBQzNDcUIsTUFBTSxFQUFFLGlCQUFpQjtRQUN6QkwsU0FBUyxFQUFFLFdBQVc7UUFDdEJFLE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQyxFQUFFZCxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVDLEtBQUssSUFBSSxDQUFDO01BRXpCRyxNQUFNLENBQUNELFVBQVUsQ0FBQyxDQUFDRSxlQUFlLENBQUNYLFlBQVksQ0FBQztJQUNsRCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRkYsUUFBUSxDQUFDLGVBQWUsRUFBRSxNQUFNO0lBQzlCQyxFQUFFLENBQUMseUJBQXlCLEVBQUUsTUFBTTtNQUNsQyxNQUFNQyxZQUFZLEdBQUl5QixzQkFBYSxDQUFTdkIsR0FBRyxDQUFDO1FBQzlDcUIsTUFBTSxFQUFFLG1CQUFtQjtRQUMzQlIsVUFBVSxFQUFFO01BQ2QsQ0FBQyxDQUFDLEVBQUVULE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRUMsS0FBSyxJQUFJLENBQUM7TUFFekIsSUFBQW1CLHNCQUFhLEVBQUMsbUJBQW1CLEVBQUUsaUJBQWlCLENBQUM7TUFFckQsTUFBTWpCLFVBQVUsR0FBSWdCLHNCQUFhLENBQVN2QixHQUFHLENBQUM7UUFDNUNxQixNQUFNLEVBQUUsbUJBQW1CO1FBQzNCUixVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUMsRUFBRVQsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFQyxLQUFLLElBQUksQ0FBQztNQUV6QkcsTUFBTSxDQUFDRCxVQUFVLENBQUMsQ0FBQ0UsZUFBZSxDQUFDWCxZQUFZLENBQUM7SUFDbEQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZGLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNO0lBQy9CQyxFQUFFLENBQUMsMEJBQTBCLEVBQUUsTUFBTTtNQUNuQyxNQUFNQyxZQUFZLEdBQUkyQixzQkFBYSxDQUFTekIsR0FBRyxDQUFDO1FBQzlDMEIsVUFBVSxFQUFFO01BQ2QsQ0FBQyxDQUFDLEVBQUV0QixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVDLEtBQUssSUFBSSxDQUFDO01BRXpCLElBQUFzQix1QkFBYyxFQUFDLE9BQU8sQ0FBQztNQUV2QixNQUFNcEIsVUFBVSxHQUFJa0Isc0JBQWEsQ0FBU3pCLEdBQUcsQ0FBQztRQUM1QzBCLFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQyxFQUFFdEIsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFQyxLQUFLLElBQUksQ0FBQztNQUV6QkcsTUFBTSxDQUFDRCxVQUFVLENBQUMsQ0FBQ0UsZUFBZSxDQUFDWCxZQUFZLENBQUM7SUFDbEQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZGLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxNQUFNO0lBQ2hDQyxFQUFFLENBQUMsNEJBQTRCLEVBQUUsTUFBTTtNQUNyQyxNQUFNQyxZQUFZLEdBQUk4Qix1QkFBYyxDQUFTNUIsR0FBRyxDQUFDO1FBQy9DMEIsVUFBVSxFQUFFO01BQ2QsQ0FBQyxDQUFDLEVBQUV0QixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUVDLEtBQUssSUFBSSxDQUFDO01BRXpCLElBQUF3Qix3QkFBZSxFQUFDLE9BQU8sQ0FBQztNQUV4QixNQUFNdEIsVUFBVSxHQUFJcUIsdUJBQWMsQ0FBUzVCLEdBQUcsQ0FBQztRQUM3QzBCLFVBQVUsRUFBRTtNQUNkLENBQUMsQ0FBQyxFQUFFdEIsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFQyxLQUFLLElBQUksQ0FBQztNQUV6QkcsTUFBTSxDQUFDRCxVQUFVLENBQUMsQ0FBQ0UsZUFBZSxDQUFDWCxZQUFZLENBQUM7SUFDbEQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZGLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxNQUFNO0lBQ3BDQyxFQUFFLENBQUMsNkNBQTZDLEVBQUUsTUFBTTtNQUN0RFcsTUFBTSxDQUFDLE1BQU07UUFDWCxJQUFBc0IsNEJBQW1CLEVBQUMsQ0FBQztNQUN2QixDQUFDLENBQUMsQ0FBQ0MsR0FBRyxDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUNsQixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=