f4b8f08d67072b3930dd6128ea681366
"use strict";

var _ServiceConnectionGenerator = require("../ServiceConnectionGenerator");
describe('ServiceConnectionGenerator', () => {
  let generator;
  const outputDir = '/test/output';
  beforeEach(() => {
    generator = new _ServiceConnectionGenerator.ServiceConnectionGenerator();
  });
  describe('generateServiceConnection', () => {
    it('should generate API routes and service client', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        endpoints: [{
          method: 'POST',
          path: '/payments',
          description: 'Create payment',
          requestSchema: 'CreatePaymentRequest',
          responseSchema: 'PaymentResponse'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      expect(changes).toBeInstanceOf(Array);
      expect(changes.length).toBeGreaterThan(0);
      const filePaths = changes.map(c => c.path);
      expect(filePaths).toContain(expect.stringContaining('user-service.controller.ts'));
      expect(filePaths).toContain(expect.stringContaining('user-service.service.ts'));
      expect(filePaths).toContain(expect.stringContaining('payment-service.client.ts'));
    });
    it('should generate authentication middleware when enabled', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        authentication: true,
        endpoints: [{
          method: 'GET',
          path: '/payments/:id',
          description: 'Get payment'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const filePaths = changes.map(c => c.path);
      expect(filePaths).toContain(expect.stringContaining('auth.middleware.ts'));
    });
    it('should generate route controller with endpoints', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        endpoints: [{
          method: 'GET',
          path: '/payments',
          description: 'List payments'
        }, {
          method: 'POST',
          path: '/payments',
          description: 'Create payment'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const controllerFile = changes.find(c => c.path.includes('user-service.controller.ts'));
      expect(controllerFile).toBeDefined();
      expect(controllerFile.content).toContain('router.get');
      expect(controllerFile.content).toContain('router.post');
      expect(controllerFile.content).toContain('List payments');
      expect(controllerFile.content).toContain('Create payment');
    });
    it('should generate service client with methods', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        endpoints: [{
          method: 'GET',
          path: '/payments/:id',
          description: 'Get payment',
          responseSchema: 'PaymentResponse'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const clientFile = changes.find(c => c.path.includes('payment-service.client.ts'));
      expect(clientFile).toBeDefined();
      expect(clientFile.content).toContain('class PaymentServiceClient');
      expect(clientFile.content).toContain('axios');
      expect(clientFile.content).toContain('async getPayments');
    });
    it('should include authentication in client when enabled', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        authentication: true,
        endpoints: [{
          method: 'GET',
          path: '/payments',
          description: 'List payments'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const clientFile = changes.find(c => c.path.includes('payment-service.client.ts'));
      expect(clientFile).toBeDefined();
      expect(clientFile.content).toContain('authToken');
      expect(clientFile.content).toContain('setAuthToken');
      expect(clientFile.content).toContain('Authorization');
    });
    it('should generate validation schemas for endpoints with request schemas', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        endpoints: [{
          method: 'POST',
          path: '/payments',
          description: 'Create payment',
          requestSchema: 'CreatePaymentRequest'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const validationFile = changes.find(c => c.path.includes('user-service.schemas.ts'));
      expect(validationFile).toBeDefined();
      expect(validationFile.content).toContain('z.object');
      expect(validationFile.content).toContain('UserServiceSchemas');
    });
    it('should generate client types for request and response schemas', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        endpoints: [{
          method: 'POST',
          path: '/payments',
          description: 'Create payment',
          requestSchema: 'CreatePaymentRequest',
          responseSchema: 'PaymentResponse'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const typesFile = changes.find(c => c.path.includes('payment-service.types.ts'));
      expect(typesFile).toBeDefined();
      expect(typesFile.content).toContain('interface CreatePaymentRequest');
      expect(typesFile.content).toContain('interface PaymentResponse');
    });
    it('should handle path parameters in endpoints', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        endpoints: [{
          method: 'GET',
          path: '/payments/:id',
          description: 'Get payment by ID'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const controllerFile = changes.find(c => c.path.includes('user-service.controller.ts'));
      const serviceFile = changes.find(c => c.path.includes('user-service.service.ts'));
      expect(controllerFile.content).toContain('req.params.id');
      expect(serviceFile.content).toContain('id: string');
    });
    it('should generate multiple endpoint methods', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        endpoints: [{
          method: 'GET',
          path: '/payments',
          description: 'List payments'
        }, {
          method: 'POST',
          path: '/payments',
          description: 'Create payment'
        }, {
          method: 'PUT',
          path: '/payments/:id',
          description: 'Update payment'
        }, {
          method: 'DELETE',
          path: '/payments/:id',
          description: 'Delete payment'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const clientFile = changes.find(c => c.path.includes('payment-service.client.ts'));
      expect(clientFile).toBeDefined();
      expect(clientFile.content).toContain('async getPayments');
      expect(clientFile.content).toContain('async postPayments');
      expect(clientFile.content).toContain('async putPayments');
      expect(clientFile.content).toContain('async deletePayments');
    });
    it('should generate service auth middleware', () => {
      const connection = {
        sourceService: 'user-service',
        targetService: 'payment-service',
        authentication: true,
        endpoints: [{
          method: 'GET',
          path: '/payments',
          description: 'List payments'
        }]
      };
      const changes = generator.generateServiceConnection(connection, outputDir);
      const middlewareFile = changes.find(c => c.path.includes('auth.middleware.ts'));
      expect(middlewareFile).toBeDefined();
      expect(middlewareFile.content).toContain('authMiddleware');
      expect(middlewareFile.content).toContain('serviceAuthMiddleware');
      expect(middlewareFile.content).toContain('x-api-key');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfU2VydmljZUNvbm5lY3Rpb25HZW5lcmF0b3IiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJnZW5lcmF0b3IiLCJvdXRwdXREaXIiLCJiZWZvcmVFYWNoIiwiU2VydmljZUNvbm5lY3Rpb25HZW5lcmF0b3IiLCJpdCIsImNvbm5lY3Rpb24iLCJzb3VyY2VTZXJ2aWNlIiwidGFyZ2V0U2VydmljZSIsImVuZHBvaW50cyIsIm1ldGhvZCIsInBhdGgiLCJkZXNjcmlwdGlvbiIsInJlcXVlc3RTY2hlbWEiLCJyZXNwb25zZVNjaGVtYSIsImNoYW5nZXMiLCJnZW5lcmF0ZVNlcnZpY2VDb25uZWN0aW9uIiwiZXhwZWN0IiwidG9CZUluc3RhbmNlT2YiLCJBcnJheSIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImZpbGVQYXRocyIsIm1hcCIsImMiLCJ0b0NvbnRhaW4iLCJzdHJpbmdDb250YWluaW5nIiwiYXV0aGVudGljYXRpb24iLCJjb250cm9sbGVyRmlsZSIsImZpbmQiLCJpbmNsdWRlcyIsInRvQmVEZWZpbmVkIiwiY29udGVudCIsImNsaWVudEZpbGUiLCJ2YWxpZGF0aW9uRmlsZSIsInR5cGVzRmlsZSIsInNlcnZpY2VGaWxlIiwibWlkZGxld2FyZUZpbGUiXSwic291cmNlcyI6WyJTZXJ2aWNlQ29ubmVjdGlvbkdlbmVyYXRvci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcnZpY2VDb25uZWN0aW9uR2VuZXJhdG9yLCBTZXJ2aWNlQ29ubmVjdGlvbiB9IGZyb20gJy4uL1NlcnZpY2VDb25uZWN0aW9uR2VuZXJhdG9yJztcblxuZGVzY3JpYmUoJ1NlcnZpY2VDb25uZWN0aW9uR2VuZXJhdG9yJywgKCkgPT4ge1xuICBsZXQgZ2VuZXJhdG9yOiBTZXJ2aWNlQ29ubmVjdGlvbkdlbmVyYXRvcjtcbiAgY29uc3Qgb3V0cHV0RGlyID0gJy90ZXN0L291dHB1dCc7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZ2VuZXJhdG9yID0gbmV3IFNlcnZpY2VDb25uZWN0aW9uR2VuZXJhdG9yKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZW5lcmF0ZVNlcnZpY2VDb25uZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgQVBJIHJvdXRlcyBhbmQgc2VydmljZSBjbGllbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uOiBTZXJ2aWNlQ29ubmVjdGlvbiA9IHtcbiAgICAgICAgc291cmNlU2VydmljZTogJ3VzZXItc2VydmljZScsXG4gICAgICAgIHRhcmdldFNlcnZpY2U6ICdwYXltZW50LXNlcnZpY2UnLFxuICAgICAgICBlbmRwb2ludHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHBhdGg6ICcvcGF5bWVudHMnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGUgcGF5bWVudCcsXG4gICAgICAgICAgICByZXF1ZXN0U2NoZW1hOiAnQ3JlYXRlUGF5bWVudFJlcXVlc3QnLFxuICAgICAgICAgICAgcmVzcG9uc2VTY2hlbWE6ICdQYXltZW50UmVzcG9uc2UnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gZ2VuZXJhdG9yLmdlbmVyYXRlU2VydmljZUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgb3V0cHV0RGlyKTtcblxuICAgICAgZXhwZWN0KGNoYW5nZXMpLnRvQmVJbnN0YW5jZU9mKEFycmF5KTtcbiAgICAgIGV4cGVjdChjaGFuZ2VzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICBjb25zdCBmaWxlUGF0aHMgPSBjaGFuZ2VzLm1hcChjID0+IGMucGF0aCk7XG4gICAgICBleHBlY3QoZmlsZVBhdGhzKS50b0NvbnRhaW4oZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ3VzZXItc2VydmljZS5jb250cm9sbGVyLnRzJykpO1xuICAgICAgZXhwZWN0KGZpbGVQYXRocykudG9Db250YWluKGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCd1c2VyLXNlcnZpY2Uuc2VydmljZS50cycpKTtcbiAgICAgIGV4cGVjdChmaWxlUGF0aHMpLnRvQ29udGFpbihleHBlY3Quc3RyaW5nQ29udGFpbmluZygncGF5bWVudC1zZXJ2aWNlLmNsaWVudC50cycpKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgYXV0aGVudGljYXRpb24gbWlkZGxld2FyZSB3aGVuIGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uOiBTZXJ2aWNlQ29ubmVjdGlvbiA9IHtcbiAgICAgICAgc291cmNlU2VydmljZTogJ3VzZXItc2VydmljZScsXG4gICAgICAgIHRhcmdldFNlcnZpY2U6ICdwYXltZW50LXNlcnZpY2UnLFxuICAgICAgICBhdXRoZW50aWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgZW5kcG9pbnRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHBhdGg6ICcvcGF5bWVudHMvOmlkJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnR2V0IHBheW1lbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gZ2VuZXJhdG9yLmdlbmVyYXRlU2VydmljZUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgb3V0cHV0RGlyKTtcbiAgICAgIGNvbnN0IGZpbGVQYXRocyA9IGNoYW5nZXMubWFwKGMgPT4gYy5wYXRoKTtcblxuICAgICAgZXhwZWN0KGZpbGVQYXRocykudG9Db250YWluKGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdhdXRoLm1pZGRsZXdhcmUudHMnKSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHJvdXRlIGNvbnRyb2xsZXIgd2l0aCBlbmRwb2ludHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uOiBTZXJ2aWNlQ29ubmVjdGlvbiA9IHtcbiAgICAgICAgc291cmNlU2VydmljZTogJ3VzZXItc2VydmljZScsXG4gICAgICAgIHRhcmdldFNlcnZpY2U6ICdwYXltZW50LXNlcnZpY2UnLFxuICAgICAgICBlbmRwb2ludHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgcGF0aDogJy9wYXltZW50cycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xpc3QgcGF5bWVudHMnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBwYXRoOiAnL3BheW1lbnRzJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIHBheW1lbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gZ2VuZXJhdG9yLmdlbmVyYXRlU2VydmljZUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgb3V0cHV0RGlyKTtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXJGaWxlID0gY2hhbmdlcy5maW5kKGMgPT4gYy5wYXRoLmluY2x1ZGVzKCd1c2VyLXNlcnZpY2UuY29udHJvbGxlci50cycpKTtcblxuICAgICAgZXhwZWN0KGNvbnRyb2xsZXJGaWxlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNvbnRyb2xsZXJGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ3JvdXRlci5nZXQnKTtcbiAgICAgIGV4cGVjdChjb250cm9sbGVyRmlsZSEuY29udGVudCkudG9Db250YWluKCdyb3V0ZXIucG9zdCcpO1xuICAgICAgZXhwZWN0KGNvbnRyb2xsZXJGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ0xpc3QgcGF5bWVudHMnKTtcbiAgICAgIGV4cGVjdChjb250cm9sbGVyRmlsZSEuY29udGVudCkudG9Db250YWluKCdDcmVhdGUgcGF5bWVudCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBzZXJ2aWNlIGNsaWVudCB3aXRoIG1ldGhvZHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uOiBTZXJ2aWNlQ29ubmVjdGlvbiA9IHtcbiAgICAgICAgc291cmNlU2VydmljZTogJ3VzZXItc2VydmljZScsXG4gICAgICAgIHRhcmdldFNlcnZpY2U6ICdwYXltZW50LXNlcnZpY2UnLFxuICAgICAgICBlbmRwb2ludHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgcGF0aDogJy9wYXltZW50cy86aWQnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdHZXQgcGF5bWVudCcsXG4gICAgICAgICAgICByZXNwb25zZVNjaGVtYTogJ1BheW1lbnRSZXNwb25zZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNoYW5nZXMgPSBnZW5lcmF0b3IuZ2VuZXJhdGVTZXJ2aWNlQ29ubmVjdGlvbihjb25uZWN0aW9uLCBvdXRwdXREaXIpO1xuICAgICAgY29uc3QgY2xpZW50RmlsZSA9IGNoYW5nZXMuZmluZChjID0+IGMucGF0aC5pbmNsdWRlcygncGF5bWVudC1zZXJ2aWNlLmNsaWVudC50cycpKTtcblxuICAgICAgZXhwZWN0KGNsaWVudEZpbGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY2xpZW50RmlsZSEuY29udGVudCkudG9Db250YWluKCdjbGFzcyBQYXltZW50U2VydmljZUNsaWVudCcpO1xuICAgICAgZXhwZWN0KGNsaWVudEZpbGUhLmNvbnRlbnQpLnRvQ29udGFpbignYXhpb3MnKTtcbiAgICAgIGV4cGVjdChjbGllbnRGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ2FzeW5jIGdldFBheW1lbnRzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgYXV0aGVudGljYXRpb24gaW4gY2xpZW50IHdoZW4gZW5hYmxlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb246IFNlcnZpY2VDb25uZWN0aW9uID0ge1xuICAgICAgICBzb3VyY2VTZXJ2aWNlOiAndXNlci1zZXJ2aWNlJyxcbiAgICAgICAgdGFyZ2V0U2VydmljZTogJ3BheW1lbnQtc2VydmljZScsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uOiB0cnVlLFxuICAgICAgICBlbmRwb2ludHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgcGF0aDogJy9wYXltZW50cycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xpc3QgcGF5bWVudHMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gZ2VuZXJhdG9yLmdlbmVyYXRlU2VydmljZUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgb3V0cHV0RGlyKTtcbiAgICAgIGNvbnN0IGNsaWVudEZpbGUgPSBjaGFuZ2VzLmZpbmQoYyA9PiBjLnBhdGguaW5jbHVkZXMoJ3BheW1lbnQtc2VydmljZS5jbGllbnQudHMnKSk7XG5cbiAgICAgIGV4cGVjdChjbGllbnRGaWxlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNsaWVudEZpbGUhLmNvbnRlbnQpLnRvQ29udGFpbignYXV0aFRva2VuJyk7XG4gICAgICBleHBlY3QoY2xpZW50RmlsZSEuY29udGVudCkudG9Db250YWluKCdzZXRBdXRoVG9rZW4nKTtcbiAgICAgIGV4cGVjdChjbGllbnRGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ0F1dGhvcml6YXRpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgdmFsaWRhdGlvbiBzY2hlbWFzIGZvciBlbmRwb2ludHMgd2l0aCByZXF1ZXN0IHNjaGVtYXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uOiBTZXJ2aWNlQ29ubmVjdGlvbiA9IHtcbiAgICAgICAgc291cmNlU2VydmljZTogJ3VzZXItc2VydmljZScsXG4gICAgICAgIHRhcmdldFNlcnZpY2U6ICdwYXltZW50LXNlcnZpY2UnLFxuICAgICAgICBlbmRwb2ludHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHBhdGg6ICcvcGF5bWVudHMnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGUgcGF5bWVudCcsXG4gICAgICAgICAgICByZXF1ZXN0U2NoZW1hOiAnQ3JlYXRlUGF5bWVudFJlcXVlc3QnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gZ2VuZXJhdG9yLmdlbmVyYXRlU2VydmljZUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgb3V0cHV0RGlyKTtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb25GaWxlID0gY2hhbmdlcy5maW5kKGMgPT4gYy5wYXRoLmluY2x1ZGVzKCd1c2VyLXNlcnZpY2Uuc2NoZW1hcy50cycpKTtcblxuICAgICAgZXhwZWN0KHZhbGlkYXRpb25GaWxlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb25GaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ3oub2JqZWN0Jyk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbkZpbGUhLmNvbnRlbnQpLnRvQ29udGFpbignVXNlclNlcnZpY2VTY2hlbWFzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGNsaWVudCB0eXBlcyBmb3IgcmVxdWVzdCBhbmQgcmVzcG9uc2Ugc2NoZW1hcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb246IFNlcnZpY2VDb25uZWN0aW9uID0ge1xuICAgICAgICBzb3VyY2VTZXJ2aWNlOiAndXNlci1zZXJ2aWNlJyxcbiAgICAgICAgdGFyZ2V0U2VydmljZTogJ3BheW1lbnQtc2VydmljZScsXG4gICAgICAgIGVuZHBvaW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgcGF0aDogJy9wYXltZW50cycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NyZWF0ZSBwYXltZW50JyxcbiAgICAgICAgICAgIHJlcXVlc3RTY2hlbWE6ICdDcmVhdGVQYXltZW50UmVxdWVzdCcsXG4gICAgICAgICAgICByZXNwb25zZVNjaGVtYTogJ1BheW1lbnRSZXNwb25zZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNoYW5nZXMgPSBnZW5lcmF0b3IuZ2VuZXJhdGVTZXJ2aWNlQ29ubmVjdGlvbihjb25uZWN0aW9uLCBvdXRwdXREaXIpO1xuICAgICAgY29uc3QgdHlwZXNGaWxlID0gY2hhbmdlcy5maW5kKGMgPT4gYy5wYXRoLmluY2x1ZGVzKCdwYXltZW50LXNlcnZpY2UudHlwZXMudHMnKSk7XG5cbiAgICAgIGV4cGVjdCh0eXBlc0ZpbGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodHlwZXNGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ2ludGVyZmFjZSBDcmVhdGVQYXltZW50UmVxdWVzdCcpO1xuICAgICAgZXhwZWN0KHR5cGVzRmlsZSEuY29udGVudCkudG9Db250YWluKCdpbnRlcmZhY2UgUGF5bWVudFJlc3BvbnNlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwYXRoIHBhcmFtZXRlcnMgaW4gZW5kcG9pbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29ubmVjdGlvbjogU2VydmljZUNvbm5lY3Rpb24gPSB7XG4gICAgICAgIHNvdXJjZVNlcnZpY2U6ICd1c2VyLXNlcnZpY2UnLFxuICAgICAgICB0YXJnZXRTZXJ2aWNlOiAncGF5bWVudC1zZXJ2aWNlJyxcbiAgICAgICAgZW5kcG9pbnRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHBhdGg6ICcvcGF5bWVudHMvOmlkJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnR2V0IHBheW1lbnQgYnkgSUQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gZ2VuZXJhdG9yLmdlbmVyYXRlU2VydmljZUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgb3V0cHV0RGlyKTtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXJGaWxlID0gY2hhbmdlcy5maW5kKGMgPT4gYy5wYXRoLmluY2x1ZGVzKCd1c2VyLXNlcnZpY2UuY29udHJvbGxlci50cycpKTtcbiAgICAgIGNvbnN0IHNlcnZpY2VGaWxlID0gY2hhbmdlcy5maW5kKGMgPT4gYy5wYXRoLmluY2x1ZGVzKCd1c2VyLXNlcnZpY2Uuc2VydmljZS50cycpKTtcblxuICAgICAgZXhwZWN0KGNvbnRyb2xsZXJGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ3JlcS5wYXJhbXMuaWQnKTtcbiAgICAgIGV4cGVjdChzZXJ2aWNlRmlsZSEuY29udGVudCkudG9Db250YWluKCdpZDogc3RyaW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIG11bHRpcGxlIGVuZHBvaW50IG1ldGhvZHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uOiBTZXJ2aWNlQ29ubmVjdGlvbiA9IHtcbiAgICAgICAgc291cmNlU2VydmljZTogJ3VzZXItc2VydmljZScsXG4gICAgICAgIHRhcmdldFNlcnZpY2U6ICdwYXltZW50LXNlcnZpY2UnLFxuICAgICAgICBlbmRwb2ludHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgcGF0aDogJy9wYXltZW50cycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xpc3QgcGF5bWVudHMnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBwYXRoOiAnL3BheW1lbnRzJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIHBheW1lbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIHBhdGg6ICcvcGF5bWVudHMvOmlkJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlIHBheW1lbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIHBhdGg6ICcvcGF5bWVudHMvOmlkJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGVsZXRlIHBheW1lbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gZ2VuZXJhdG9yLmdlbmVyYXRlU2VydmljZUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgb3V0cHV0RGlyKTtcbiAgICAgIGNvbnN0IGNsaWVudEZpbGUgPSBjaGFuZ2VzLmZpbmQoYyA9PiBjLnBhdGguaW5jbHVkZXMoJ3BheW1lbnQtc2VydmljZS5jbGllbnQudHMnKSk7XG5cbiAgICAgIGV4cGVjdChjbGllbnRGaWxlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNsaWVudEZpbGUhLmNvbnRlbnQpLnRvQ29udGFpbignYXN5bmMgZ2V0UGF5bWVudHMnKTtcbiAgICAgIGV4cGVjdChjbGllbnRGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ2FzeW5jIHBvc3RQYXltZW50cycpO1xuICAgICAgZXhwZWN0KGNsaWVudEZpbGUhLmNvbnRlbnQpLnRvQ29udGFpbignYXN5bmMgcHV0UGF5bWVudHMnKTtcbiAgICAgIGV4cGVjdChjbGllbnRGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ2FzeW5jIGRlbGV0ZVBheW1lbnRzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHNlcnZpY2UgYXV0aCBtaWRkbGV3YXJlJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29ubmVjdGlvbjogU2VydmljZUNvbm5lY3Rpb24gPSB7XG4gICAgICAgIHNvdXJjZVNlcnZpY2U6ICd1c2VyLXNlcnZpY2UnLFxuICAgICAgICB0YXJnZXRTZXJ2aWNlOiAncGF5bWVudC1zZXJ2aWNlJyxcbiAgICAgICAgYXV0aGVudGljYXRpb246IHRydWUsXG4gICAgICAgIGVuZHBvaW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBwYXRoOiAnL3BheW1lbnRzJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTGlzdCBwYXltZW50cycsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNoYW5nZXMgPSBnZW5lcmF0b3IuZ2VuZXJhdGVTZXJ2aWNlQ29ubmVjdGlvbihjb25uZWN0aW9uLCBvdXRwdXREaXIpO1xuICAgICAgY29uc3QgbWlkZGxld2FyZUZpbGUgPSBjaGFuZ2VzLmZpbmQoYyA9PiBjLnBhdGguaW5jbHVkZXMoJ2F1dGgubWlkZGxld2FyZS50cycpKTtcblxuICAgICAgZXhwZWN0KG1pZGRsZXdhcmVGaWxlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG1pZGRsZXdhcmVGaWxlIS5jb250ZW50KS50b0NvbnRhaW4oJ2F1dGhNaWRkbGV3YXJlJyk7XG4gICAgICBleHBlY3QobWlkZGxld2FyZUZpbGUhLmNvbnRlbnQpLnRvQ29udGFpbignc2VydmljZUF1dGhNaWRkbGV3YXJlJyk7XG4gICAgICBleHBlY3QobWlkZGxld2FyZUZpbGUhLmNvbnRlbnQpLnRvQ29udGFpbigneC1hcGkta2V5Jyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FB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