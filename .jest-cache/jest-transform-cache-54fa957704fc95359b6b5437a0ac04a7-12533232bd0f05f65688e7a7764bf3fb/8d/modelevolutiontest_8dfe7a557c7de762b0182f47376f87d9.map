{"version":3,"names":["request","require","express","createTestApp","app","use","json","post","req","res","modelId","dataset","epochs","body","status","error","training","trainingId","Date","now","accuracy","loss","timestamp","toISOString","get","params","version","parameters","lastTrained","testData","evaluation","evaluationId","Math","random","precision","recall","f1Score","describe","beforeEach","it","response","send","expect","toBe","toHaveProperty"],"sources":["model-evolution.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst express = require('express');\r\n\r\nfunction createTestApp() {\r\n  const app = express();\r\n  app.use(express.json());\r\n\r\n  app.post('/api/evolution/train', (req, res) => {\r\n    const { modelId, dataset, epochs } = req.body;\r\n\r\n    if (!modelId || !dataset) {\r\n      return res.status(400).json({ error: 'Model ID and dataset are required' });\r\n    }\r\n\r\n    const training = {\r\n      trainingId: `train_${Date.now()}`,\r\n      modelId,\r\n      epochs: epochs || 10,\r\n      status: 'in_progress',\r\n      accuracy: 0,\r\n      loss: 0,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    res.json(training);\r\n  });\r\n\r\n  app.get('/api/evolution/model/:modelId', (req, res) => {\r\n    const { modelId } = req.params;\r\n\r\n    res.json({\r\n      modelId,\r\n      version: '1.0.0',\r\n      accuracy: 0.95,\r\n      parameters: 1000000,\r\n      lastTrained: new Date().toISOString()\r\n    });\r\n  });\r\n\r\n  app.post('/api/evolution/evaluate', (req, res) => {\r\n    const { modelId, testData } = req.body;\r\n\r\n    if (!modelId) {\r\n      return res.status(400).json({ error: 'Model ID is required' });\r\n    }\r\n\r\n    const evaluation = {\r\n      evaluationId: `eval_${Date.now()}`,\r\n      modelId,\r\n      accuracy: Math.random() * 0.3 + 0.7,\r\n      precision: Math.random() * 0.3 + 0.7,\r\n      recall: Math.random() * 0.3 + 0.7,\r\n      f1Score: Math.random() * 0.3 + 0.7,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    res.json(evaluation);\r\n  });\r\n\r\n  return app;\r\n}\r\n\r\ndescribe('AI Evolution Engine - Model Evolution Tests', () => {\r\n  let app;\r\n\r\n  beforeEach(() => {\r\n    app = createTestApp();\r\n  });\r\n\r\n  describe('POST /api/evolution/train', () => {\r\n    it('should initiate model training', async () => {\r\n      const response = await request(app)\r\n        .post('/api/evolution/train')\r\n        .send({\r\n          modelId: 'model_123',\r\n          dataset: 'training_data_v1',\r\n          epochs: 20\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('trainingId');\r\n      expect(response.body.modelId).toBe('model_123');\r\n      expect(response.body.epochs).toBe(20);\r\n    });\r\n\r\n    it('should return error when model ID is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/evolution/train')\r\n        .send({ dataset: 'data' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Model ID and dataset are required');\r\n    });\r\n\r\n    it('should default to 10 epochs when not specified', async () => {\r\n      const response = await request(app)\r\n        .post('/api/evolution/train')\r\n        .send({\r\n          modelId: 'model_123',\r\n          dataset: 'data'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.epochs).toBe(10);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/evolution/model/:modelId', () => {\r\n    it('should retrieve model information', async () => {\r\n      const response = await request(app)\r\n        .get('/api/evolution/model/model_123');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.modelId).toBe('model_123');\r\n      expect(response.body).toHaveProperty('version');\r\n      expect(response.body).toHaveProperty('accuracy');\r\n      expect(response.body).toHaveProperty('parameters');\r\n    });\r\n  });\r\n\r\n  describe('POST /api/evolution/evaluate', () => {\r\n    it('should evaluate model performance', async () => {\r\n      const response = await request(app)\r\n        .post('/api/evolution/evaluate')\r\n        .send({\r\n          modelId: 'model_123',\r\n          testData: 'test_dataset'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('evaluationId');\r\n      expect(response.body).toHaveProperty('accuracy');\r\n      expect(response.body).toHaveProperty('precision');\r\n      expect(response.body).toHaveProperty('recall');\r\n      expect(response.body).toHaveProperty('f1Score');\r\n    });\r\n\r\n    it('should return error when model ID is missing', async () => {\r\n      const response = await request(app)\r\n        .post('/api/evolution/evaluate')\r\n        .send({ testData: 'data' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Model ID is required');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}