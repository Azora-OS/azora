7bc8c48b1418fd614761a216e0f5a10b
"use strict";

var _structuredLogger = require("../structured-logger");
/**
 * Structured Logger Tests
 */

describe('StructuredLogger', () => {
  describe('info', () => {
    it('should log info messages', () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      _structuredLogger.structuredLogger.info('Test info message');
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
    it('should log info with context', () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      _structuredLogger.structuredLogger.info('User enrolled', {
        userId: 'user-123',
        courseId: 'course-456'
      });
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
    it('should log info with metadata', () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      _structuredLogger.structuredLogger.info('Payment processed', {
        userId: 'user-123'
      }, {
        amount: 99.99,
        currency: 'USD'
      });
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
  describe('warn', () => {
    it('should log warning messages', () => {
      const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();
      _structuredLogger.structuredLogger.warn('Test warning message');
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
  describe('error', () => {
    it('should log error messages', () => {
      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();
      _structuredLogger.structuredLogger.error('Test error message', new Error('Test error'));
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
    it('should log error with string message', () => {
      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();
      _structuredLogger.structuredLogger.error('Test error', 'Error string');
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
    it('should log error with context and metadata', () => {
      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();
      _structuredLogger.structuredLogger.error('Payment failed', new Error('Insufficient funds'), {
        userId: 'user-123'
      }, {
        amount: 99.99,
        errorCode: 'INSUFFICIENT_FUNDS'
      });
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
  describe('debug', () => {
    it('should log debug messages', () => {
      const consoleSpy = jest.spyOn(console, 'debug').mockImplementation();
      _structuredLogger.structuredLogger.debug('Test debug message');
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
  describe('logHttpRequest', () => {
    it('should log HTTP requests', () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      _structuredLogger.structuredLogger.logHttpRequest('GET', '/api/v1/courses', 200, 0.5);
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
    it('should log HTTP requests with context', () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      _structuredLogger.structuredLogger.logHttpRequest('POST', '/api/v1/enrollments', 201, 1.2, {
        userId: 'user-123',
        requestId: 'req-456'
      });
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
  describe('logDbOperation', () => {
    it('should log database operations', () => {
      const consoleSpy = jest.spyOn(console, 'debug').mockImplementation();
      _structuredLogger.structuredLogger.logDbOperation('SELECT', 'courses', 0.05, 10);
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
  describe('logAiOperation', () => {
    it('should log successful AI operations', () => {
      const consoleSpy = jest.spyOn(console, 'debug').mockImplementation();
      _structuredLogger.structuredLogger.logAiOperation('elara', 'tutoring', 2.5, 'success');
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
    it('should log failed AI operations', () => {
      const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();
      _structuredLogger.structuredLogger.logAiOperation('knowledge-ocean', 'retrieval', 5.0, 'error');
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
  describe('logBusinessEvent', () => {
    it('should log business events', () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      _structuredLogger.structuredLogger.logBusinessEvent('enrollment_created', {
        studentId: 'student-123',
        courseId: 'course-456',
        tier: 'premium'
      });
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
  describe('createChildLogger', () => {
    it('should create a child logger with context', () => {
      const childLogger = _structuredLogger.structuredLogger.createChildLogger({
        userId: 'user-123',
        courseId: 'course-456'
      });
      expect(childLogger).toBeDefined();
      expect(childLogger.info).toBeDefined();
      expect(childLogger.warn).toBeDefined();
      expect(childLogger.error).toBeDefined();
      expect(childLogger.debug).toBeDefined();
    });
    it('should log with child logger context', () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      const childLogger = _structuredLogger.structuredLogger.createChildLogger({
        userId: 'user-123',
        courseId: 'course-456'
      });
      childLogger.info('Module completed');
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
    it('should log business events with child logger', () => {
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      const childLogger = _structuredLogger.structuredLogger.createChildLogger({
        userId: 'user-123'
      });
      childLogger.logBusinessEvent('course_completion', {
        score: 95
      });
      expect(consoleSpy).toHaveBeenCalled();
      consoleSpy.mockRestore();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3RydWN0dXJlZExvZ2dlciIsInJlcXVpcmUiLCJkZXNjcmliZSIsIml0IiwiY29uc29sZVNweSIsImplc3QiLCJzcHlPbiIsImNvbnNvbGUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJzdHJ1Y3R1cmVkTG9nZ2VyIiwiaW5mbyIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrUmVzdG9yZSIsInVzZXJJZCIsImNvdXJzZUlkIiwiYW1vdW50IiwiY3VycmVuY3kiLCJ3YXJuIiwiZXJyb3IiLCJFcnJvciIsImVycm9yQ29kZSIsImRlYnVnIiwibG9nSHR0cFJlcXVlc3QiLCJyZXF1ZXN0SWQiLCJsb2dEYk9wZXJhdGlvbiIsImxvZ0FpT3BlcmF0aW9uIiwibG9nQnVzaW5lc3NFdmVudCIsInN0dWRlbnRJZCIsInRpZXIiLCJjaGlsZExvZ2dlciIsImNyZWF0ZUNoaWxkTG9nZ2VyIiwidG9CZURlZmluZWQiLCJzY29yZSJdLCJzb3VyY2VzIjpbInN0cnVjdHVyZWQtbG9nZ2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFN0cnVjdHVyZWQgTG9nZ2VyIFRlc3RzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgc3RydWN0dXJlZExvZ2dlciB9IGZyb20gJy4uL3N0cnVjdHVyZWQtbG9nZ2VyJztcclxuXHJcbmRlc2NyaWJlKCdTdHJ1Y3R1cmVkTG9nZ2VyJywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdpbmZvJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2cgaW5mbyBtZXNzYWdlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xyXG5cclxuICAgICAgc3RydWN0dXJlZExvZ2dlci5pbmZvKCdUZXN0IGluZm8gbWVzc2FnZScpO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBsb2cgaW5mbyB3aXRoIGNvbnRleHQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcclxuXHJcbiAgICAgIHN0cnVjdHVyZWRMb2dnZXIuaW5mbygnVXNlciBlbnJvbGxlZCcsIHtcclxuICAgICAgICB1c2VySWQ6ICd1c2VyLTEyMycsXHJcbiAgICAgICAgY291cnNlSWQ6ICdjb3Vyc2UtNDU2JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvZyBpbmZvIHdpdGggbWV0YWRhdGEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcclxuXHJcbiAgICAgIHN0cnVjdHVyZWRMb2dnZXIuaW5mbygnUGF5bWVudCBwcm9jZXNzZWQnLCBcclxuICAgICAgICB7IHVzZXJJZDogJ3VzZXItMTIzJyB9LFxyXG4gICAgICAgIHsgYW1vdW50OiA5OS45OSwgY3VycmVuY3k6ICdVU0QnIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnd2FybicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgbG9nIHdhcm5pbmcgbWVzc2FnZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICd3YXJuJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XHJcblxyXG4gICAgICBzdHJ1Y3R1cmVkTG9nZ2VyLndhcm4oJ1Rlc3Qgd2FybmluZyBtZXNzYWdlJyk7XHJcblxyXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2cgZXJyb3IgbWVzc2FnZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xyXG5cclxuICAgICAgc3RydWN0dXJlZExvZ2dlci5lcnJvcignVGVzdCBlcnJvciBtZXNzYWdlJywgbmV3IEVycm9yKCdUZXN0IGVycm9yJykpO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBsb2cgZXJyb3Igd2l0aCBzdHJpbmcgbWVzc2FnZScsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XHJcblxyXG4gICAgICBzdHJ1Y3R1cmVkTG9nZ2VyLmVycm9yKCdUZXN0IGVycm9yJywgJ0Vycm9yIHN0cmluZycpO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBsb2cgZXJyb3Igd2l0aCBjb250ZXh0IGFuZCBtZXRhZGF0YScsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XHJcblxyXG4gICAgICBzdHJ1Y3R1cmVkTG9nZ2VyLmVycm9yKFxyXG4gICAgICAgICdQYXltZW50IGZhaWxlZCcsXHJcbiAgICAgICAgbmV3IEVycm9yKCdJbnN1ZmZpY2llbnQgZnVuZHMnKSxcclxuICAgICAgICB7IHVzZXJJZDogJ3VzZXItMTIzJyB9LFxyXG4gICAgICAgIHsgYW1vdW50OiA5OS45OSwgZXJyb3JDb2RlOiAnSU5TVUZGSUNJRU5UX0ZVTkRTJyB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2RlYnVnJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2cgZGVidWcgbWVzc2FnZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdkZWJ1ZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xyXG5cclxuICAgICAgc3RydWN0dXJlZExvZ2dlci5kZWJ1ZygnVGVzdCBkZWJ1ZyBtZXNzYWdlJyk7XHJcblxyXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2xvZ0h0dHBSZXF1ZXN0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2cgSFRUUCByZXF1ZXN0cycsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xyXG5cclxuICAgICAgc3RydWN0dXJlZExvZ2dlci5sb2dIdHRwUmVxdWVzdCgnR0VUJywgJy9hcGkvdjEvY291cnNlcycsIDIwMCwgMC41KTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbG9nIEhUVFAgcmVxdWVzdHMgd2l0aCBjb250ZXh0JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XHJcblxyXG4gICAgICBzdHJ1Y3R1cmVkTG9nZ2VyLmxvZ0h0dHBSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjEvZW5yb2xsbWVudHMnLCAyMDEsIDEuMiwge1xyXG4gICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcclxuICAgICAgICByZXF1ZXN0SWQ6ICdyZXEtNDU2JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2xvZ0RiT3BlcmF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2cgZGF0YWJhc2Ugb3BlcmF0aW9ucycsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2RlYnVnJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XHJcblxyXG4gICAgICBzdHJ1Y3R1cmVkTG9nZ2VyLmxvZ0RiT3BlcmF0aW9uKCdTRUxFQ1QnLCAnY291cnNlcycsIDAuMDUsIDEwKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnbG9nQWlPcGVyYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGxvZyBzdWNjZXNzZnVsIEFJIG9wZXJhdGlvbnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdkZWJ1ZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xyXG5cclxuICAgICAgc3RydWN0dXJlZExvZ2dlci5sb2dBaU9wZXJhdGlvbignZWxhcmEnLCAndHV0b3JpbmcnLCAyLjUsICdzdWNjZXNzJyk7XHJcblxyXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBjb25zb2xlU3B5Lm1vY2tSZXN0b3JlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvZyBmYWlsZWQgQUkgb3BlcmF0aW9ucycsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ3dhcm4nKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcclxuXHJcbiAgICAgIHN0cnVjdHVyZWRMb2dnZXIubG9nQWlPcGVyYXRpb24oJ2tub3dsZWRnZS1vY2VhbicsICdyZXRyaWV2YWwnLCA1LjAsICdlcnJvcicpO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdsb2dCdXNpbmVzc0V2ZW50JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2cgYnVzaW5lc3MgZXZlbnRzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XHJcblxyXG4gICAgICBzdHJ1Y3R1cmVkTG9nZ2VyLmxvZ0J1c2luZXNzRXZlbnQoJ2Vucm9sbG1lbnRfY3JlYXRlZCcsIHtcclxuICAgICAgICBzdHVkZW50SWQ6ICdzdHVkZW50LTEyMycsXHJcbiAgICAgICAgY291cnNlSWQ6ICdjb3Vyc2UtNDU2JyxcclxuICAgICAgICB0aWVyOiAncHJlbWl1bScsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdjcmVhdGVDaGlsZExvZ2dlcicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGEgY2hpbGQgbG9nZ2VyIHdpdGggY29udGV4dCcsICgpID0+IHtcclxuICAgICAgY29uc3QgY2hpbGRMb2dnZXIgPSBzdHJ1Y3R1cmVkTG9nZ2VyLmNyZWF0ZUNoaWxkTG9nZ2VyKHtcclxuICAgICAgICB1c2VySWQ6ICd1c2VyLTEyMycsXHJcbiAgICAgICAgY291cnNlSWQ6ICdjb3Vyc2UtNDU2JyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QoY2hpbGRMb2dnZXIpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChjaGlsZExvZ2dlci5pbmZvKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY2hpbGRMb2dnZXIud2FybikudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGNoaWxkTG9nZ2VyLmVycm9yKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY2hpbGRMb2dnZXIuZGVidWcpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvZyB3aXRoIGNoaWxkIGxvZ2dlciBjb250ZXh0JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XHJcblxyXG4gICAgICBjb25zdCBjaGlsZExvZ2dlciA9IHN0cnVjdHVyZWRMb2dnZXIuY3JlYXRlQ2hpbGRMb2dnZXIoe1xyXG4gICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcclxuICAgICAgICBjb3Vyc2VJZDogJ2NvdXJzZS00NTYnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNoaWxkTG9nZ2VyLmluZm8oJ01vZHVsZSBjb21wbGV0ZWQnKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbG9nIGJ1c2luZXNzIGV2ZW50cyB3aXRoIGNoaWxkIGxvZ2dlcicsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xyXG5cclxuICAgICAgY29uc3QgY2hpbGRMb2dnZXIgPSBzdHJ1Y3R1cmVkTG9nZ2VyLmNyZWF0ZUNoaWxkTG9nZ2VyKHtcclxuICAgICAgICB1c2VySWQ6ICd1c2VyLTEyMycsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY2hpbGRMb2dnZXIubG9nQnVzaW5lc3NFdmVudCgnY291cnNlX2NvbXBsZXRpb24nLCB7IHNjb3JlOiA5NSB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUlBLElBQUFBLGlCQUFBLEdBQUFD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