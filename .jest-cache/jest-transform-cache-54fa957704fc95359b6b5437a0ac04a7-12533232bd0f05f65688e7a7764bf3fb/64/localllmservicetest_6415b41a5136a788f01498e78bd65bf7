9f06723242c82188db7b8b55fa11e6d2
"use strict";

var _localLlmService = require("../local-llm-service");
var _types = require("../types");
/**
 * Local LLM Service Tests
 * Tests for on-device inference using quantized models
 */

describe('LocalLLMService', () => {
  let service;
  beforeEach(() => {
    service = new _localLlmService.LocalLLMService();
  });
  afterEach(async () => {
    await service.unload();
  });
  describe('Initialization', () => {
    it('should initialize with default config', () => {
      const status = service.getStatus();
      expect(status.model).toBe('llama');
      expect(status.quantization).toBe('q4');
      expect(status.maxTokens).toBe(512);
    });
    it('should initialize with custom config', () => {
      const customService = new _localLlmService.LocalLLMService({
        model: 'phi',
        quantization: 'q8',
        maxTokens: 1024
      });
      const status = customService.getStatus();
      expect(status.model).toBe('phi');
      expect(status.quantization).toBe('q8');
      expect(status.maxTokens).toBe(1024);
    });
    it('should load model on first use', async () => {
      expect(service.isReady()).toBe(false);
      await service.initialize();
      expect(service.isReady()).toBe(true);
    });
    it('should not reload model if already loaded', async () => {
      await service.initialize();
      const firstStatus = service.getStatus();
      await service.initialize();
      const secondStatus = service.getStatus();
      expect(firstStatus.loaded).toBe(secondStatus.loaded);
    });
  });
  describe('Query Processing', () => {
    beforeEach(async () => {
      await service.initialize();
    });
    it('should process a simple query', async () => {
      const response = await service.processQuery({
        query: 'Hello',
        userId: 'user-123'
      });
      expect(response.id).toBeDefined();
      expect(response.content).toBeDefined();
      expect(response.routingTier).toBe(_types.RoutingTier.LOCAL_LLM);
      expect(response.cost).toBe(0);
      expect(response.cached).toBe(false);
      expect(response.responseTime).toBeGreaterThan(0);
    });
    it('should return cached response on second query', async () => {
      const query = {
        query: 'What is Azora?'
      };
      const firstResponse = await service.processQuery(query);
      expect(firstResponse.cached).toBe(false);
      const secondResponse = await service.processQuery(query);
      expect(secondResponse.cached).toBe(true);
      expect(secondResponse.content).toBe(firstResponse.content);
    });
    it('should handle FAQ queries', async () => {
      const response = await service.processQuery({
        query: 'How do I start with Azora?'
      });
      expect(response.content).toContain('start');
      expect(response.content.length).toBeGreaterThan(0);
    });
    it('should handle token-related queries', async () => {
      const response = await service.processQuery({
        query: 'What are AZR tokens?'
      });
      expect(response.content).toContain('token');
      expect(response.content.length).toBeGreaterThan(0);
    });
    it('should handle factual queries', async () => {
      const response = await service.processQuery({
        query: 'What is the capital of France?'
      });
      expect(response.content).toContain('Paris');
    });
    it('should handle unknown queries gracefully', async () => {
      const response = await service.processQuery({
        query: 'xyzabc unknown query'
      });
      expect(response.content).toBeDefined();
      expect(response.content.length).toBeGreaterThan(0);
    });
    it('should include metadata in response', async () => {
      const response = await service.processQuery({
        query: 'Test query'
      });
      expect(response.metadata).toBeDefined();
      expect(response.metadata?.model).toBe('llama');
      expect(response.metadata?.quantization).toBe('q4');
      expect(response.metadata?.tokensGenerated).toBeGreaterThan(0);
    });
    it('should have zero cost for local LLM', async () => {
      const response = await service.processQuery({
        query: 'Test query'
      });
      expect(response.cost).toBe(0);
    });
    it('should complete within reasonable time', async () => {
      const response = await service.processQuery({
        query: 'Test query'
      });

      // Local LLM should respond within 500ms
      expect(response.responseTime).toBeLessThan(500);
    });
  });
  describe('Caching', () => {
    beforeEach(async () => {
      await service.initialize();
    });
    it('should cache responses', async () => {
      const query = {
        query: 'Cache test'
      };
      await service.processQuery(query);
      const stats1 = service.getCacheStats();
      expect(stats1.size).toBe(1);
      await service.processQuery(query);
      const stats2 = service.getCacheStats();
      expect(stats2.size).toBe(1); // Same query, same cache entry
    });
    it('should clear cache', async () => {
      await service.processQuery({
        query: 'Test 1'
      });
      await service.processQuery({
        query: 'Test 2'
      });
      let stats = service.getCacheStats();
      expect(stats.size).toBeGreaterThan(0);
      service.clearCache();
      stats = service.getCacheStats();
      expect(stats.size).toBe(0);
    });
    it('should report cache statistics', async () => {
      await service.processQuery({
        query: 'Test'
      });
      const stats = service.getCacheStats();
      expect(stats.size).toBeGreaterThan(0);
      expect(stats.maxSize).toBe(1000);
      expect(stats.utilizationPercent).toBeGreaterThan(0);
      expect(stats.utilizationPercent).toBeLessThanOrEqual(100);
    });
    it('should limit cache size', async () => {
      // Add many queries to exceed cache limit
      for (let i = 0; i < 1100; i++) {
        await service.processQuery({
          query: `Query ${i}`
        });
      }
      const stats = service.getCacheStats();
      // Cache should be limited to prevent memory issues
      expect(stats.size).toBeLessThanOrEqual(1000);
    });
  });
  describe('Service Status', () => {
    it('should report not ready before initialization', () => {
      expect(service.isReady()).toBe(false);
    });
    it('should report ready after initialization', async () => {
      await service.initialize();
      expect(service.isReady()).toBe(true);
    });
    it('should provide detailed status', async () => {
      await service.initialize();
      const status = service.getStatus();
      expect(status.loaded).toBe(true);
      expect(status.model).toBeDefined();
      expect(status.quantization).toBeDefined();
      expect(status.cacheSize).toBeGreaterThanOrEqual(0);
      expect(status.maxTokens).toBeGreaterThan(0);
    });
  });
  describe('Model Unloading', () => {
    it('should unload model and free resources', async () => {
      await service.initialize();
      expect(service.isReady()).toBe(true);
      await service.unload();
      expect(service.isReady()).toBe(false);
      const stats = service.getCacheStats();
      expect(stats.size).toBe(0);
    });
    it('should reinitialize after unloading', async () => {
      await service.initialize();
      await service.unload();
      expect(service.isReady()).toBe(false);
      await service.initialize();
      expect(service.isReady()).toBe(true);
    });
  });
  describe('Configuration Options', () => {
    it('should support different quantization levels', () => {
      const q4Service = new _localLlmService.LocalLLMService({
        quantization: 'q4'
      });
      const q5Service = new _localLlmService.LocalLLMService({
        quantization: 'q5'
      });
      const q8Service = new _localLlmService.LocalLLMService({
        quantization: 'q8'
      });
      expect(q4Service.getStatus().quantization).toBe('q4');
      expect(q5Service.getStatus().quantization).toBe('q5');
      expect(q8Service.getStatus().quantization).toBe('q8');
    });
    it('should support different models', () => {
      const llamaService = new _localLlmService.LocalLLMService({
        model: 'llama'
      });
      const phiService = new _localLlmService.LocalLLMService({
        model: 'phi'
      });
      expect(llamaService.getStatus().model).toBe('llama');
      expect(phiService.getStatus().model).toBe('phi');
    });
    it('should support custom token limits', () => {
      const service512 = new _localLlmService.LocalLLMService({
        maxTokens: 512
      });
      const service1024 = new _localLlmService.LocalLLMService({
        maxTokens: 1024
      });
      expect(service512.getStatus().maxTokens).toBe(512);
      expect(service1024.getStatus().maxTokens).toBe(1024);
    });
  });
  describe('Response Quality', () => {
    beforeEach(async () => {
      await service.initialize();
    });
    it('should generate non-empty responses', async () => {
      const response = await service.processQuery({
        query: 'Test'
      });
      expect(response.content).toBeDefined();
      expect(response.content.length).toBeGreaterThan(0);
    });
    it('should estimate token count', async () => {
      const response = await service.processQuery({
        query: 'Test'
      });
      expect(response.metadata?.tokensGenerated).toBeGreaterThan(0);
      // Rough check: tokens should be roughly 1/4 of characters
      const estimatedTokens = Math.ceil(response.content.length / 4);
      expect(response.metadata?.tokensGenerated).toBeLessThanOrEqual(estimatedTokens + 10);
    });
    it('should include temperature and topP in metadata', async () => {
      const response = await service.processQuery({
        query: 'Test'
      });
      expect(response.metadata?.temperature).toBe(0.7);
      expect(response.metadata?.topP).toBe(0.9);
    });
  });
  describe('Error Handling', () => {
    it('should handle initialization errors gracefully', async () => {
      // Create a service and try to process without proper initialization
      const testService = new _localLlmService.LocalLLMService();
      // Should auto-initialize on first query
      const response = await testService.processQuery({
        query: 'Test'
      });
      expect(response).toBeDefined();
      expect(response.content).toBeDefined();
    });
    it('should handle empty queries', async () => {
      await service.initialize();
      const response = await service.processQuery({
        query: ''
      });
      expect(response.content).toBeDefined();
    });
    it('should handle very long queries', async () => {
      await service.initialize();
      const longQuery = 'test '.repeat(1000);
      const response = await service.processQuery({
        query: longQuery
      });
      expect(response.content).toBeDefined();
      expect(response.responseTime).toBeGreaterThan(0);
    });
  });
  describe('Performance', () => {
    beforeEach(async () => {
      await service.initialize();
    });
    it('should process queries quickly', async () => {
      const startTime = Date.now();
      for (let i = 0; i < 10; i++) {
        await service.processQuery({
          query: `Query ${i}`
        });
      }
      const totalTime = Date.now() - startTime;
      const avgTime = totalTime / 10;

      // Average response time should be reasonable
      expect(avgTime).toBeLessThan(500);
    });
    it('should serve cached responses faster', async () => {
      const query = {
        query: 'Performance test'
      };

      // First query (not cached)
      const firstResponse = await service.processQuery(query);
      const firstTime = firstResponse.responseTime;

      // Second query (cached)
      const secondResponse = await service.processQuery(query);
      const secondTime = secondResponse.responseTime;

      // Cached response should be faster
      expect(secondTime).toBeLessThan(firstTime);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9jYWxMbG1TZXJ2aWNlIiwicmVxdWlyZSIsIl90eXBlcyIsImRlc2NyaWJlIiwic2VydmljZSIsImJlZm9yZUVhY2giLCJMb2NhbExMTVNlcnZpY2UiLCJhZnRlckVhY2giLCJ1bmxvYWQiLCJpdCIsInN0YXR1cyIsImdldFN0YXR1cyIsImV4cGVjdCIsIm1vZGVsIiwidG9CZSIsInF1YW50aXphdGlvbiIsIm1heFRva2VucyIsImN1c3RvbVNlcnZpY2UiLCJpc1JlYWR5IiwiaW5pdGlhbGl6ZSIsImZpcnN0U3RhdHVzIiwic2Vjb25kU3RhdHVzIiwibG9hZGVkIiwicmVzcG9uc2UiLCJwcm9jZXNzUXVlcnkiLCJxdWVyeSIsInVzZXJJZCIsImlkIiwidG9CZURlZmluZWQiLCJjb250ZW50Iiwicm91dGluZ1RpZXIiLCJSb3V0aW5nVGllciIsIkxPQ0FMX0xMTSIsImNvc3QiLCJjYWNoZWQiLCJyZXNwb25zZVRpbWUiLCJ0b0JlR3JlYXRlclRoYW4iLCJmaXJzdFJlc3BvbnNlIiwic2Vjb25kUmVzcG9uc2UiLCJ0b0NvbnRhaW4iLCJsZW5ndGgiLCJtZXRhZGF0YSIsInRva2Vuc0dlbmVyYXRlZCIsInRvQmVMZXNzVGhhbiIsInN0YXRzMSIsImdldENhY2hlU3RhdHMiLCJzaXplIiwic3RhdHMyIiwic3RhdHMiLCJjbGVhckNhY2hlIiwibWF4U2l6ZSIsInV0aWxpemF0aW9uUGVyY2VudCIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJpIiwiY2FjaGVTaXplIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInE0U2VydmljZSIsInE1U2VydmljZSIsInE4U2VydmljZSIsImxsYW1hU2VydmljZSIsInBoaVNlcnZpY2UiLCJzZXJ2aWNlNTEyIiwic2VydmljZTEwMjQiLCJlc3RpbWF0ZWRUb2tlbnMiLCJNYXRoIiwiY2VpbCIsInRlbXBlcmF0dXJlIiwidG9wUCIsInRlc3RTZXJ2aWNlIiwibG9uZ1F1ZXJ5IiwicmVwZWF0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInRvdGFsVGltZSIsImF2Z1RpbWUiLCJmaXJzdFRpbWUiLCJzZWNvbmRUaW1lIl0sInNvdXJjZXMiOlsibG9jYWwtbGxtLXNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTG9jYWwgTExNIFNlcnZpY2UgVGVzdHNcclxuICogVGVzdHMgZm9yIG9uLWRldmljZSBpbmZlcmVuY2UgdXNpbmcgcXVhbnRpemVkIG1vZGVsc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IExvY2FsTExNU2VydmljZSwgTG9jYWxMTE1Db25maWcgfSBmcm9tICcuLi9sb2NhbC1sbG0tc2VydmljZSc7XHJcbmltcG9ydCB7IFJvdXRpbmdUaWVyIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuZGVzY3JpYmUoJ0xvY2FsTExNU2VydmljZScsICgpID0+IHtcclxuICBsZXQgc2VydmljZTogTG9jYWxMTE1TZXJ2aWNlO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIHNlcnZpY2UgPSBuZXcgTG9jYWxMTE1TZXJ2aWNlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICBhd2FpdCBzZXJ2aWNlLnVubG9hZCgpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBkZWZhdWx0IGNvbmZpZycsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RhdHVzID0gc2VydmljZS5nZXRTdGF0dXMoKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5tb2RlbCkudG9CZSgnbGxhbWEnKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5xdWFudGl6YXRpb24pLnRvQmUoJ3E0Jyk7XHJcbiAgICAgIGV4cGVjdChzdGF0dXMubWF4VG9rZW5zKS50b0JlKDUxMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBjdXN0b20gY29uZmlnJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXN0b21TZXJ2aWNlID0gbmV3IExvY2FsTExNU2VydmljZSh7XHJcbiAgICAgICAgbW9kZWw6ICdwaGknLFxyXG4gICAgICAgIHF1YW50aXphdGlvbjogJ3E4JyxcclxuICAgICAgICBtYXhUb2tlbnM6IDEwMjRcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBzdGF0dXMgPSBjdXN0b21TZXJ2aWNlLmdldFN0YXR1cygpO1xyXG4gICAgICBleHBlY3Qoc3RhdHVzLm1vZGVsKS50b0JlKCdwaGknKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5xdWFudGl6YXRpb24pLnRvQmUoJ3E4Jyk7XHJcbiAgICAgIGV4cGVjdChzdGF0dXMubWF4VG9rZW5zKS50b0JlKDEwMjQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBsb2FkIG1vZGVsIG9uIGZpcnN0IHVzZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNlcnZpY2UuaXNSZWFkeSgpKS50b0JlKGZhbHNlKTtcclxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKCk7XHJcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmlzUmVhZHkoKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbm90IHJlbG9hZCBtb2RlbCBpZiBhbHJlYWR5IGxvYWRlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKCk7XHJcbiAgICAgIGNvbnN0IGZpcnN0U3RhdHVzID0gc2VydmljZS5nZXRTdGF0dXMoKTtcclxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKCk7XHJcbiAgICAgIGNvbnN0IHNlY29uZFN0YXR1cyA9IHNlcnZpY2UuZ2V0U3RhdHVzKCk7XHJcbiAgICAgIGV4cGVjdChmaXJzdFN0YXR1cy5sb2FkZWQpLnRvQmUoc2Vjb25kU3RhdHVzLmxvYWRlZCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1F1ZXJ5IFByb2Nlc3NpbmcnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgYSBzaW1wbGUgcXVlcnknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnSGVsbG8nLFxyXG4gICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5pZCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5yb3V0aW5nVGllcikudG9CZShSb3V0aW5nVGllci5MT0NBTF9MTE0pO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuY29zdCkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNhY2hlZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5yZXNwb25zZVRpbWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNhY2hlZCByZXNwb25zZSBvbiBzZWNvbmQgcXVlcnknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0geyBxdWVyeTogJ1doYXQgaXMgQXpvcmE/JyB9O1xyXG5cclxuICAgICAgY29uc3QgZmlyc3RSZXNwb25zZSA9IGF3YWl0IHNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5KTtcclxuICAgICAgZXhwZWN0KGZpcnN0UmVzcG9uc2UuY2FjaGVkKS50b0JlKGZhbHNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHNlY29uZFJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkocXVlcnkpO1xyXG4gICAgICBleHBlY3Qoc2Vjb25kUmVzcG9uc2UuY2FjaGVkKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3Qoc2Vjb25kUmVzcG9uc2UuY29udGVudCkudG9CZShmaXJzdFJlc3BvbnNlLmNvbnRlbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgRkFRIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnSG93IGRvIEkgc3RhcnQgd2l0aCBBem9yYT8nXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQpLnRvQ29udGFpbignc3RhcnQnKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB0b2tlbi1yZWxhdGVkIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnV2hhdCBhcmUgQVpSIHRva2Vucz8nXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQpLnRvQ29udGFpbigndG9rZW4nKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmYWN0dWFsIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnV2hhdCBpcyB0aGUgY2FwaXRhbCBvZiBGcmFuY2U/J1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50KS50b0NvbnRhaW4oJ1BhcmlzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmtub3duIHF1ZXJpZXMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZXJ2aWNlLnByb2Nlc3NRdWVyeSh7XHJcbiAgICAgICAgcXVlcnk6ICd4eXphYmMgdW5rbm93biBxdWVyeSdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UuY29udGVudCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgbWV0YWRhdGEgaW4gcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnVGVzdCBxdWVyeSdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UubWV0YWRhdGEpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5tZXRhZGF0YT8ubW9kZWwpLnRvQmUoJ2xsYW1hJyk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5tZXRhZGF0YT8ucXVhbnRpemF0aW9uKS50b0JlKCdxNCcpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UubWV0YWRhdGE/LnRva2Vuc0dlbmVyYXRlZCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHplcm8gY29zdCBmb3IgbG9jYWwgTExNJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHtcclxuICAgICAgICBxdWVyeTogJ1Rlc3QgcXVlcnknXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvc3QpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNvbXBsZXRlIHdpdGhpbiByZWFzb25hYmxlIHRpbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnVGVzdCBxdWVyeSdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBMb2NhbCBMTE0gc2hvdWxkIHJlc3BvbmQgd2l0aGluIDUwMG1zXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5yZXNwb25zZVRpbWUpLnRvQmVMZXNzVGhhbig1MDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDYWNoaW5nJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjYWNoZSByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0geyBxdWVyeTogJ0NhY2hlIHRlc3QnIH07XHJcblxyXG4gICAgICBhd2FpdCBzZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcbiAgICAgIGNvbnN0IHN0YXRzMSA9IHNlcnZpY2UuZ2V0Q2FjaGVTdGF0cygpO1xyXG4gICAgICBleHBlY3Qoc3RhdHMxLnNpemUpLnRvQmUoMSk7XHJcblxyXG4gICAgICBhd2FpdCBzZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcbiAgICAgIGNvbnN0IHN0YXRzMiA9IHNlcnZpY2UuZ2V0Q2FjaGVTdGF0cygpO1xyXG4gICAgICBleHBlY3Qoc3RhdHMyLnNpemUpLnRvQmUoMSk7IC8vIFNhbWUgcXVlcnksIHNhbWUgY2FjaGUgZW50cnlcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY2xlYXIgY2FjaGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHsgcXVlcnk6ICdUZXN0IDEnIH0pO1xyXG4gICAgICBhd2FpdCBzZXJ2aWNlLnByb2Nlc3NRdWVyeSh7IHF1ZXJ5OiAnVGVzdCAyJyB9KTtcclxuXHJcbiAgICAgIGxldCBzdGF0cyA9IHNlcnZpY2UuZ2V0Q2FjaGVTdGF0cygpO1xyXG4gICAgICBleHBlY3Qoc3RhdHMuc2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG5cclxuICAgICAgc2VydmljZS5jbGVhckNhY2hlKCk7XHJcbiAgICAgIHN0YXRzID0gc2VydmljZS5nZXRDYWNoZVN0YXRzKCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5zaXplKS50b0JlKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXBvcnQgY2FjaGUgc3RhdGlzdGljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoeyBxdWVyeTogJ1Rlc3QnIH0pO1xyXG5cclxuICAgICAgY29uc3Qgc3RhdHMgPSBzZXJ2aWNlLmdldENhY2hlU3RhdHMoKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnNpemUpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLm1heFNpemUpLnRvQmUoMTAwMCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy51dGlsaXphdGlvblBlcmNlbnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnV0aWxpemF0aW9uUGVyY2VudCkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBsaW1pdCBjYWNoZSBzaXplJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBZGQgbWFueSBxdWVyaWVzIHRvIGV4Y2VlZCBjYWNoZSBsaW1pdFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDExMDA7IGkrKykge1xyXG4gICAgICAgIGF3YWl0IHNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHsgcXVlcnk6IGBRdWVyeSAke2l9YCB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc3RhdHMgPSBzZXJ2aWNlLmdldENhY2hlU3RhdHMoKTtcclxuICAgICAgLy8gQ2FjaGUgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gcHJldmVudCBtZW1vcnkgaXNzdWVzXHJcbiAgICAgIGV4cGVjdChzdGF0cy5zaXplKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTZXJ2aWNlIFN0YXR1cycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmVwb3J0IG5vdCByZWFkeSBiZWZvcmUgaW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmlzUmVhZHkoKSkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlcG9ydCByZWFkeSBhZnRlciBpbml0aWFsaXphdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKCk7XHJcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmlzUmVhZHkoKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBkZXRhaWxlZCBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgY29uc3Qgc3RhdHVzID0gc2VydmljZS5nZXRTdGF0dXMoKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5sb2FkZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChzdGF0dXMubW9kZWwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChzdGF0dXMucXVhbnRpemF0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3Qoc3RhdHVzLmNhY2hlU2l6ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHN0YXR1cy5tYXhUb2tlbnMpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnTW9kZWwgVW5sb2FkaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB1bmxvYWQgbW9kZWwgYW5kIGZyZWUgcmVzb3VyY2VzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuICAgICAgZXhwZWN0KHNlcnZpY2UuaXNSZWFkeSgpKS50b0JlKHRydWUpO1xyXG5cclxuICAgICAgYXdhaXQgc2VydmljZS51bmxvYWQoKTtcclxuICAgICAgZXhwZWN0KHNlcnZpY2UuaXNSZWFkeSgpKS50b0JlKGZhbHNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXRzID0gc2VydmljZS5nZXRDYWNoZVN0YXRzKCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5zaXplKS50b0JlKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWluaXRpYWxpemUgYWZ0ZXIgdW5sb2FkaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuICAgICAgYXdhaXQgc2VydmljZS51bmxvYWQoKTtcclxuICAgICAgZXhwZWN0KHNlcnZpY2UuaXNSZWFkeSgpKS50b0JlKGZhbHNlKTtcclxuXHJcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICBleHBlY3Qoc2VydmljZS5pc1JlYWR5KCkpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvbmZpZ3VyYXRpb24gT3B0aW9ucycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBkaWZmZXJlbnQgcXVhbnRpemF0aW9uIGxldmVscycsICgpID0+IHtcclxuICAgICAgY29uc3QgcTRTZXJ2aWNlID0gbmV3IExvY2FsTExNU2VydmljZSh7IHF1YW50aXphdGlvbjogJ3E0JyB9KTtcclxuICAgICAgY29uc3QgcTVTZXJ2aWNlID0gbmV3IExvY2FsTExNU2VydmljZSh7IHF1YW50aXphdGlvbjogJ3E1JyB9KTtcclxuICAgICAgY29uc3QgcThTZXJ2aWNlID0gbmV3IExvY2FsTExNU2VydmljZSh7IHF1YW50aXphdGlvbjogJ3E4JyB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChxNFNlcnZpY2UuZ2V0U3RhdHVzKCkucXVhbnRpemF0aW9uKS50b0JlKCdxNCcpO1xyXG4gICAgICBleHBlY3QocTVTZXJ2aWNlLmdldFN0YXR1cygpLnF1YW50aXphdGlvbikudG9CZSgncTUnKTtcclxuICAgICAgZXhwZWN0KHE4U2VydmljZS5nZXRTdGF0dXMoKS5xdWFudGl6YXRpb24pLnRvQmUoJ3E4Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgZGlmZmVyZW50IG1vZGVscycsICgpID0+IHtcclxuICAgICAgY29uc3QgbGxhbWFTZXJ2aWNlID0gbmV3IExvY2FsTExNU2VydmljZSh7IG1vZGVsOiAnbGxhbWEnIH0pO1xyXG4gICAgICBjb25zdCBwaGlTZXJ2aWNlID0gbmV3IExvY2FsTExNU2VydmljZSh7IG1vZGVsOiAncGhpJyB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChsbGFtYVNlcnZpY2UuZ2V0U3RhdHVzKCkubW9kZWwpLnRvQmUoJ2xsYW1hJyk7XHJcbiAgICAgIGV4cGVjdChwaGlTZXJ2aWNlLmdldFN0YXR1cygpLm1vZGVsKS50b0JlKCdwaGknKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBjdXN0b20gdG9rZW4gbGltaXRzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzZXJ2aWNlNTEyID0gbmV3IExvY2FsTExNU2VydmljZSh7IG1heFRva2VuczogNTEyIH0pO1xyXG4gICAgICBjb25zdCBzZXJ2aWNlMTAyNCA9IG5ldyBMb2NhbExMTVNlcnZpY2UoeyBtYXhUb2tlbnM6IDEwMjQgfSk7XHJcblxyXG4gICAgICBleHBlY3Qoc2VydmljZTUxMi5nZXRTdGF0dXMoKS5tYXhUb2tlbnMpLnRvQmUoNTEyKTtcclxuICAgICAgZXhwZWN0KHNlcnZpY2UxMDI0LmdldFN0YXR1cygpLm1heFRva2VucykudG9CZSgxMDI0KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUmVzcG9uc2UgUXVhbGl0eScsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgbm9uLWVtcHR5IHJlc3BvbnNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZXJ2aWNlLnByb2Nlc3NRdWVyeSh7XHJcbiAgICAgICAgcXVlcnk6ICdUZXN0J1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuY29udGVudC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZXN0aW1hdGUgdG9rZW4gY291bnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnVGVzdCdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UubWV0YWRhdGE/LnRva2Vuc0dlbmVyYXRlZCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICAvLyBSb3VnaCBjaGVjazogdG9rZW5zIHNob3VsZCBiZSByb3VnaGx5IDEvNCBvZiBjaGFyYWN0ZXJzXHJcbiAgICAgIGNvbnN0IGVzdGltYXRlZFRva2VucyA9IE1hdGguY2VpbChyZXNwb25zZS5jb250ZW50Lmxlbmd0aCAvIDQpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UubWV0YWRhdGE/LnRva2Vuc0dlbmVyYXRlZCkudG9CZUxlc3NUaGFuT3JFcXVhbChlc3RpbWF0ZWRUb2tlbnMgKyAxMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgdGVtcGVyYXR1cmUgYW5kIHRvcFAgaW4gbWV0YWRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnVGVzdCdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UubWV0YWRhdGE/LnRlbXBlcmF0dXJlKS50b0JlKDAuNyk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5tZXRhZGF0YT8udG9wUCkudG9CZSgwLjkpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGluaXRpYWxpemF0aW9uIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBDcmVhdGUgYSBzZXJ2aWNlIGFuZCB0cnkgdG8gcHJvY2VzcyB3aXRob3V0IHByb3BlciBpbml0aWFsaXphdGlvblxyXG4gICAgICBjb25zdCB0ZXN0U2VydmljZSA9IG5ldyBMb2NhbExMTVNlcnZpY2UoKTtcclxuICAgICAgLy8gU2hvdWxkIGF1dG8taW5pdGlhbGl6ZSBvbiBmaXJzdCBxdWVyeVxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RTZXJ2aWNlLnByb2Nlc3NRdWVyeSh7XHJcbiAgICAgICAgcXVlcnk6ICdUZXN0J1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBxdWVyaWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiAnJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsb25nIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgY29uc3QgbG9uZ1F1ZXJ5ID0gJ3Rlc3QgJy5yZXBlYXQoMTAwMCk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5OiBsb25nUXVlcnlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UuY29udGVudCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnJlc3BvbnNlVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZScsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmluaXRpYWxpemUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcHJvY2VzcyBxdWVyaWVzIHF1aWNrbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICBhd2FpdCBzZXJ2aWNlLnByb2Nlc3NRdWVyeSh7XHJcbiAgICAgICAgICBxdWVyeTogYFF1ZXJ5ICR7aX1gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHRvdGFsVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICAgIGNvbnN0IGF2Z1RpbWUgPSB0b3RhbFRpbWUgLyAxMDtcclxuXHJcbiAgICAgIC8vIEF2ZXJhZ2UgcmVzcG9uc2UgdGltZSBzaG91bGQgYmUgcmVhc29uYWJsZVxyXG4gICAgICBleHBlY3QoYXZnVGltZSkudG9CZUxlc3NUaGFuKDUwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNlcnZlIGNhY2hlZCByZXNwb25zZXMgZmFzdGVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeSA9IHsgcXVlcnk6ICdQZXJmb3JtYW5jZSB0ZXN0JyB9O1xyXG5cclxuICAgICAgLy8gRmlyc3QgcXVlcnkgKG5vdCBjYWNoZWQpXHJcbiAgICAgIGNvbnN0IGZpcnN0UmVzcG9uc2UgPSBhd2FpdCBzZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcbiAgICAgIGNvbnN0IGZpcnN0VGltZSA9IGZpcnN0UmVzcG9uc2UucmVzcG9uc2VUaW1lO1xyXG5cclxuICAgICAgLy8gU2Vjb25kIHF1ZXJ5IChjYWNoZWQpXHJcbiAgICAgIGNvbnN0IHNlY29uZFJlc3BvbnNlID0gYXdhaXQgc2VydmljZS5wcm9jZXNzUXVlcnkocXVlcnkpO1xyXG4gICAgICBjb25zdCBzZWNvbmRUaW1lID0gc2Vjb25kUmVzcG9uc2UucmVzcG9uc2VUaW1lO1xyXG5cclxuICAgICAgLy8gQ2FjaGVkIHJlc3BvbnNlIHNob3VsZCBiZSBmYXN0ZXJcclxuICAgICAgZXhwZWN0KHNlY29uZFRpbWUpLnRvQmVMZXNzVGhhbihmaXJzdFRpbWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBS0EsSUFBQUEsZ0JBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQU5BO0FBQ0E7QUFDQTtBQUNBOztBQUtBRSxRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTTtFQUNoQyxJQUFJQyxPQUF3QjtFQUU1QkMsVUFBVSxDQUFDLE1BQU07SUFDZkQsT0FBTyxHQUFHLElBQUlFLGdDQUFlLENBQUMsQ0FBQztFQUNqQyxDQUFDLENBQUM7RUFFRkMsU0FBUyxDQUFDLFlBQVk7SUFDcEIsTUFBTUgsT0FBTyxDQUFDSSxNQUFNLENBQUMsQ0FBQztFQUN4QixDQUFDLENBQUM7RUFFRkwsUUFBUSxDQUFDLGdCQUFnQixFQUFFLE1BQU07SUFDL0JNLEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxNQUFNO01BQ2hELE1BQU1DLE1BQU0sR0FBR04sT0FBTyxDQUFDTyxTQUFTLENBQUMsQ0FBQztNQUNsQ0MsTUFBTSxDQUFDRixNQUFNLENBQUNHLEtBQUssQ0FBQyxDQUFDQyxJQUFJLENBQUMsT0FBTyxDQUFDO01BQ2xDRixNQUFNLENBQUNGLE1BQU0sQ0FBQ0ssWUFBWSxDQUFDLENBQUNELElBQUksQ0FBQyxJQUFJLENBQUM7TUFDdENGLE1BQU0sQ0FBQ0YsTUFBTSxDQUFDTSxTQUFTLENBQUMsQ0FBQ0YsSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNwQyxDQUFDLENBQUM7SUFFRkwsRUFB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