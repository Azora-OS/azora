{"version":3,"names":["_structuredLogger","require","describe","it","consoleSpy","jest","spyOn","console","mockImplementation","structuredLogger","info","expect","toHaveBeenCalled","mockRestore","userId","courseId","amount","currency","warn","error","Error","errorCode","debug","logHttpRequest","requestId","logDbOperation","logAiOperation","logBusinessEvent","studentId","tier","childLogger","createChildLogger","toBeDefined","score"],"sources":["structured-logger.test.ts"],"sourcesContent":["/**\r\n * Structured Logger Tests\r\n */\r\n\r\nimport { structuredLogger } from '../structured-logger';\r\n\r\ndescribe('StructuredLogger', () => {\r\n  describe('info', () => {\r\n    it('should log info messages', () => {\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      structuredLogger.info('Test info message');\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n\r\n    it('should log info with context', () => {\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      structuredLogger.info('User enrolled', {\r\n        userId: 'user-123',\r\n        courseId: 'course-456',\r\n      });\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n\r\n    it('should log info with metadata', () => {\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      structuredLogger.info('Payment processed', \r\n        { userId: 'user-123' },\r\n        { amount: 99.99, currency: 'USD' }\r\n      );\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('warn', () => {\r\n    it('should log warning messages', () => {\r\n      const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();\r\n\r\n      structuredLogger.warn('Test warning message');\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('error', () => {\r\n    it('should log error messages', () => {\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n\r\n      structuredLogger.error('Test error message', new Error('Test error'));\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n\r\n    it('should log error with string message', () => {\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n\r\n      structuredLogger.error('Test error', 'Error string');\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n\r\n    it('should log error with context and metadata', () => {\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n\r\n      structuredLogger.error(\r\n        'Payment failed',\r\n        new Error('Insufficient funds'),\r\n        { userId: 'user-123' },\r\n        { amount: 99.99, errorCode: 'INSUFFICIENT_FUNDS' }\r\n      );\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('debug', () => {\r\n    it('should log debug messages', () => {\r\n      const consoleSpy = jest.spyOn(console, 'debug').mockImplementation();\r\n\r\n      structuredLogger.debug('Test debug message');\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('logHttpRequest', () => {\r\n    it('should log HTTP requests', () => {\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      structuredLogger.logHttpRequest('GET', '/api/v1/courses', 200, 0.5);\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n\r\n    it('should log HTTP requests with context', () => {\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      structuredLogger.logHttpRequest('POST', '/api/v1/enrollments', 201, 1.2, {\r\n        userId: 'user-123',\r\n        requestId: 'req-456',\r\n      });\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('logDbOperation', () => {\r\n    it('should log database operations', () => {\r\n      const consoleSpy = jest.spyOn(console, 'debug').mockImplementation();\r\n\r\n      structuredLogger.logDbOperation('SELECT', 'courses', 0.05, 10);\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('logAiOperation', () => {\r\n    it('should log successful AI operations', () => {\r\n      const consoleSpy = jest.spyOn(console, 'debug').mockImplementation();\r\n\r\n      structuredLogger.logAiOperation('elara', 'tutoring', 2.5, 'success');\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n\r\n    it('should log failed AI operations', () => {\r\n      const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();\r\n\r\n      structuredLogger.logAiOperation('knowledge-ocean', 'retrieval', 5.0, 'error');\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('logBusinessEvent', () => {\r\n    it('should log business events', () => {\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      structuredLogger.logBusinessEvent('enrollment_created', {\r\n        studentId: 'student-123',\r\n        courseId: 'course-456',\r\n        tier: 'premium',\r\n      });\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('createChildLogger', () => {\r\n    it('should create a child logger with context', () => {\r\n      const childLogger = structuredLogger.createChildLogger({\r\n        userId: 'user-123',\r\n        courseId: 'course-456',\r\n      });\r\n\r\n      expect(childLogger).toBeDefined();\r\n      expect(childLogger.info).toBeDefined();\r\n      expect(childLogger.warn).toBeDefined();\r\n      expect(childLogger.error).toBeDefined();\r\n      expect(childLogger.debug).toBeDefined();\r\n    });\r\n\r\n    it('should log with child logger context', () => {\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      const childLogger = structuredLogger.createChildLogger({\r\n        userId: 'user-123',\r\n        courseId: 'course-456',\r\n      });\r\n\r\n      childLogger.info('Module completed');\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n\r\n    it('should log business events with child logger', () => {\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      const childLogger = structuredLogger.createChildLogger({\r\n        userId: 'user-123',\r\n      });\r\n\r\n      childLogger.logBusinessEvent('course_completion', { score: 95 });\r\n\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}