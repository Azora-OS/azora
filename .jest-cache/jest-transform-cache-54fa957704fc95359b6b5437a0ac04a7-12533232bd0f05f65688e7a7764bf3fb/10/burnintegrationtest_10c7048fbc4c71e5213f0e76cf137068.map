{"version":3,"names":["_library","require","_tokenBurnCalculator","_tokenBurn","describe","burnService","calculator","beforeEach","TokenBurnCalculator","createBurnIntegrationService","it","saleAmount","Decimal","calculation","calculateBurn","BurnTransactionType","COURSE_SALE","expect","originalAmount","toString","toBe","burnRate","burnedAmount","netAmount","toNumber","toBeCloseTo","amount","userBalance","validation","validateBurnTransaction","isValid","errors","toContain","toHaveLength","withdrawalAmount","EARNINGS_WITHDRAWAL","percentageLoss","calculatePercentageLoss","redemptionAmount","TOKEN_REDEMPTION","transactions","type","calculations","calculateBulkBurns","totalBurn","calculateTotalBurn","originalPrice","effectivePrice","calculateEffectivePrice","effectiveAmount","calculateReverseBurn","customCalculator","courseSale","earningsWithdrawal","tokenRedemption","updateBurnRates","rates","getBurnRates","toThrow","length","toBeGreaterThan","impact","getBurnImpact","burnPercentage","warnings","saleBurn","withdrawalBurn","redemptionBurn"],"sources":["burn-integration.test.ts"],"sourcesContent":["/**\r\n * Burn Integration Tests\r\n * Tests for token burn mechanism integration into payment flows\r\n */\r\n\r\nimport { Decimal } from '@prisma/client/runtime/library';\r\nimport { TokenBurnCalculator } from '../../services/tokens/token-burn-calculator';\r\nimport { BurnTransactionType } from '../../services/tokens/token-burn.types';\r\n\r\ndescribe('Burn Integration Tests', () => {\r\n  let burnService: BurnIntegrationService;\r\n  let calculator: TokenBurnCalculator;\r\n\r\n  beforeEach(() => {\r\n    calculator = new TokenBurnCalculator();\r\n    burnService = createBurnIntegrationService();\r\n  });\r\n\r\n  describe('Course Sale Burn', () => {\r\n    it('should calculate 5% burn on course sale', () => {\r\n      const saleAmount = new Decimal(100);\r\n      const calculation = calculator.calculateBurn(saleAmount, BurnTransactionType.COURSE_SALE);\r\n\r\n      expect(calculation.originalAmount.toString()).toBe('100');\r\n      expect(calculation.burnRate).toBe(0.05);\r\n      expect(calculation.burnedAmount.toString()).toBe('5');\r\n      expect(calculation.netAmount.toString()).toBe('95');\r\n    });\r\n\r\n    it('should handle decimal amounts correctly', () => {\r\n      const saleAmount = new Decimal('99.99');\r\n      const calculation = calculator.calculateBurn(saleAmount, BurnTransactionType.COURSE_SALE);\r\n\r\n      expect(calculation.burnedAmount.toNumber()).toBeCloseTo(4.9995, 4);\r\n      expect(calculation.netAmount.toNumber()).toBeCloseTo(94.9905, 4);\r\n    });\r\n\r\n    it('should validate burn transaction before execution', () => {\r\n      const amount = new Decimal(100);\r\n      const userBalance = new Decimal(50);\r\n\r\n      const validation = calculator.validateBurnTransaction(\r\n        amount,\r\n        BurnTransactionType.COURSE_SALE,\r\n        userBalance\r\n      );\r\n\r\n      expect(validation.isValid).toBe(false);\r\n      expect(validation.errors).toContain(\r\n        'Insufficient balance. Required: 100, Available: 50'\r\n      );\r\n    });\r\n\r\n    it('should pass validation with sufficient balance', () => {\r\n      const amount = new Decimal(100);\r\n      const userBalance = new Decimal(150);\r\n\r\n      const validation = calculator.validateBurnTransaction(\r\n        amount,\r\n        BurnTransactionType.COURSE_SALE,\r\n        userBalance\r\n      );\r\n\r\n      expect(validation.isValid).toBe(true);\r\n      expect(validation.errors).toHaveLength(0);\r\n    });\r\n  });\r\n\r\n  describe('Earnings Withdrawal Burn', () => {\r\n    it('should calculate 3% burn on earnings withdrawal', () => {\r\n      const withdrawalAmount = new Decimal(1000);\r\n      const calculation = calculator.calculateBurn(\r\n        withdrawalAmount,\r\n        BurnTransactionType.EARNINGS_WITHDRAWAL\r\n      );\r\n\r\n      expect(calculation.originalAmount.toString()).toBe('1000');\r\n      expect(calculation.burnRate).toBe(0.03);\r\n      expect(calculation.burnedAmount.toString()).toBe('30');\r\n      expect(calculation.netAmount.toString()).toBe('970');\r\n    });\r\n\r\n    it('should handle large withdrawal amounts', () => {\r\n      const withdrawalAmount = new Decimal('50000');\r\n      const calculation = calculator.calculateBurn(\r\n        withdrawalAmount,\r\n        BurnTransactionType.EARNINGS_WITHDRAWAL\r\n      );\r\n\r\n      expect(calculation.burnedAmount.toString()).toBe('1500');\r\n      expect(calculation.netAmount.toString()).toBe('48500');\r\n    });\r\n\r\n    it('should calculate percentage loss correctly', () => {\r\n      const percentageLoss = calculator.calculatePercentageLoss(\r\n        new Decimal(1000),\r\n        BurnTransactionType.EARNINGS_WITHDRAWAL\r\n      );\r\n\r\n      expect(percentageLoss).toBe(3);\r\n    });\r\n  });\r\n\r\n  describe('Token Redemption Burn', () => {\r\n    it('should calculate 2% burn on token redemption', () => {\r\n      const redemptionAmount = new Decimal(500);\r\n      const calculation = calculator.calculateBurn(\r\n        redemptionAmount,\r\n        BurnTransactionType.TOKEN_REDEMPTION\r\n      );\r\n\r\n      expect(calculation.originalAmount.toString()).toBe('500');\r\n      expect(calculation.burnRate).toBe(0.02);\r\n      expect(calculation.burnedAmount.toString()).toBe('10');\r\n      expect(calculation.netAmount.toString()).toBe('490');\r\n    });\r\n\r\n    it('should handle small redemption amounts', () => {\r\n      const redemptionAmount = new Decimal('10');\r\n      const calculation = calculator.calculateBurn(\r\n        redemptionAmount,\r\n        BurnTransactionType.TOKEN_REDEMPTION\r\n      );\r\n\r\n      expect(calculation.burnedAmount.toString()).toBe('0.2');\r\n      expect(calculation.netAmount.toString()).toBe('9.8');\r\n    });\r\n  });\r\n\r\n  describe('Bulk Burn Calculations', () => {\r\n    it('should calculate multiple burns', () => {\r\n      const transactions = [\r\n        { amount: new Decimal(100), type: BurnTransactionType.COURSE_SALE },\r\n        { amount: new Decimal(1000), type: BurnTransactionType.EARNINGS_WITHDRAWAL },\r\n        { amount: new Decimal(500), type: BurnTransactionType.TOKEN_REDEMPTION },\r\n      ];\r\n\r\n      const calculations = calculator.calculateBulkBurns(transactions);\r\n\r\n      expect(calculations).toHaveLength(3);\r\n      expect(calculations[0].burnedAmount.toString()).toBe('5'); // 5%\r\n      expect(calculations[1].burnedAmount.toString()).toBe('30'); // 3%\r\n      expect(calculations[2].burnedAmount.toString()).toBe('10'); // 2%\r\n    });\r\n\r\n    it('should calculate total burn from multiple transactions', () => {\r\n      const transactions = [\r\n        { amount: new Decimal(100), type: BurnTransactionType.COURSE_SALE },\r\n        { amount: new Decimal(1000), type: BurnTransactionType.EARNINGS_WITHDRAWAL },\r\n        { amount: new Decimal(500), type: BurnTransactionType.TOKEN_REDEMPTION },\r\n      ];\r\n\r\n      const totalBurn = calculator.calculateTotalBurn(transactions);\r\n\r\n      expect(totalBurn.toString()).toBe('45'); // 5 + 30 + 10\r\n    });\r\n  });\r\n\r\n  describe('Effective Price Calculations', () => {\r\n    it('should calculate effective price after burn for course sale', () => {\r\n      const originalPrice = new Decimal(100);\r\n      const effectivePrice = calculator.calculateEffectivePrice(\r\n        originalPrice,\r\n        BurnTransactionType.COURSE_SALE\r\n      );\r\n\r\n      expect(effectivePrice.toString()).toBe('95');\r\n    });\r\n\r\n    it('should calculate effective price after burn for withdrawal', () => {\r\n      const originalAmount = new Decimal(1000);\r\n      const effectiveAmount = calculator.calculateEffectivePrice(\r\n        originalAmount,\r\n        BurnTransactionType.EARNINGS_WITHDRAWAL\r\n      );\r\n\r\n      expect(effectiveAmount.toString()).toBe('970');\r\n    });\r\n\r\n    it('should calculate reverse burn correctly', () => {\r\n      const netAmount = new Decimal(95);\r\n      const calculation = calculator.calculateReverseBurn(\r\n        netAmount,\r\n        BurnTransactionType.COURSE_SALE\r\n      );\r\n\r\n      expect(calculation.originalAmount.toString()).toBe('100');\r\n      expect(calculation.burnedAmount.toString()).toBe('5');\r\n      expect(calculation.netAmount.toString()).toBe('95');\r\n    });\r\n  });\r\n\r\n  describe('Burn Rate Configuration', () => {\r\n    it('should allow custom burn rates', () => {\r\n      const customCalculator = new TokenBurnCalculator({\r\n        courseSale: 0.1, // 10%\r\n        earningsWithdrawal: 0.05, // 5%\r\n        tokenRedemption: 0.03, // 3%\r\n      });\r\n\r\n      const calculation = customCalculator.calculateBurn(\r\n        new Decimal(100),\r\n        BurnTransactionType.COURSE_SALE\r\n      );\r\n\r\n      expect(calculation.burnedAmount.toString()).toBe('10');\r\n    });\r\n\r\n    it('should update burn rates dynamically', () => {\r\n      calculator.updateBurnRates({\r\n        courseSale: 0.08,\r\n      });\r\n\r\n      const rates = calculator.getBurnRates();\r\n      expect(rates.courseSale).toBe(0.08);\r\n      expect(rates.earningsWithdrawal).toBe(0.03); // Unchanged\r\n    });\r\n\r\n    it('should get current burn rates', () => {\r\n      const rates = calculator.getBurnRates();\r\n\r\n      expect(rates.courseSale).toBe(0.05);\r\n      expect(rates.earningsWithdrawal).toBe(0.03);\r\n      expect(rates.tokenRedemption).toBe(0.02);\r\n    });\r\n  });\r\n\r\n  describe('Error Handling', () => {\r\n    it('should reject zero amount', () => {\r\n      expect(() => {\r\n        calculator.calculateBurn(new Decimal(0), BurnTransactionType.COURSE_SALE);\r\n      }).toThrow('Amount must be greater than 0');\r\n    });\r\n\r\n    it('should reject negative amount', () => {\r\n      expect(() => {\r\n        calculator.calculateBurn(new Decimal(-100), BurnTransactionType.COURSE_SALE);\r\n      }).toThrow('Amount must be greater than 0');\r\n    });\r\n\r\n    it('should reject invalid transaction type', () => {\r\n      const validation = calculator.validateBurnTransaction(\r\n        new Decimal(100),\r\n        'INVALID_TYPE' as any,\r\n        new Decimal(200)\r\n      );\r\n\r\n      expect(validation.isValid).toBe(false);\r\n      expect(validation.errors.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should handle validation with zero balance', () => {\r\n      const validation = calculator.validateBurnTransaction(\r\n        new Decimal(100),\r\n        BurnTransactionType.COURSE_SALE,\r\n        new Decimal(0)\r\n      );\r\n\r\n      expect(validation.isValid).toBe(false);\r\n      expect(validation.errors).toContain(\r\n        'Insufficient balance. Required: 100, Available: 0'\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('Burn Impact Analysis', () => {\r\n    it('should calculate burn impact for course sale', async () => {\r\n      const impact = await burnService.getBurnImpact(\r\n        new Decimal(100),\r\n        BurnTransactionType.COURSE_SALE\r\n      );\r\n\r\n      expect(impact.originalAmount.toString()).toBe('100');\r\n      expect(impact.burnedAmount.toString()).toBe('5');\r\n      expect(impact.netAmount.toString()).toBe('95');\r\n      expect(impact.burnPercentage).toBe(5);\r\n    });\r\n\r\n    it('should calculate burn impact for withdrawal', async () => {\r\n      const impact = await burnService.getBurnImpact(\r\n        new Decimal(1000),\r\n        BurnTransactionType.EARNINGS_WITHDRAWAL\r\n      );\r\n\r\n      expect(impact.originalAmount.toString()).toBe('1000');\r\n      expect(impact.burnedAmount.toString()).toBe('30');\r\n      expect(impact.netAmount.toString()).toBe('970');\r\n      expect(impact.burnPercentage).toBe(3);\r\n    });\r\n\r\n    it('should calculate burn impact for redemption', async () => {\r\n      const impact = await burnService.getBurnImpact(\r\n        new Decimal(500),\r\n        BurnTransactionType.TOKEN_REDEMPTION\r\n      );\r\n\r\n      expect(impact.originalAmount.toString()).toBe('500');\r\n      expect(impact.burnedAmount.toString()).toBe('10');\r\n      expect(impact.netAmount.toString()).toBe('490');\r\n      expect(impact.burnPercentage).toBe(2);\r\n    });\r\n  });\r\n\r\n  describe('Burn Validation', () => {\r\n    it('should validate burn transaction with sufficient balance', async () => {\r\n      const validation = await burnService.validateBurnTransaction(\r\n        'user-123',\r\n        new Decimal(100),\r\n        BurnTransactionType.COURSE_SALE,\r\n        new Decimal(500)\r\n      );\r\n\r\n      expect(validation.isValid).toBe(true);\r\n      expect(validation.errors).toHaveLength(0);\r\n    });\r\n\r\n    it('should reject burn transaction with insufficient balance', async () => {\r\n      const validation = await burnService.validateBurnTransaction(\r\n        'user-123',\r\n        new Decimal(100),\r\n        BurnTransactionType.COURSE_SALE,\r\n        new Decimal(50)\r\n      );\r\n\r\n      expect(validation.isValid).toBe(false);\r\n      expect(validation.errors.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should warn on significant burn relative to balance', async () => {\r\n      const validation = await burnService.validateBurnTransaction(\r\n        'user-123',\r\n        new Decimal(100),\r\n        BurnTransactionType.COURSE_SALE,\r\n        new Decimal(5) // Only 5 tokens, burn is 5 tokens (100% of balance)\r\n      );\r\n\r\n      expect(validation.warnings.length).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  describe('Burn Rate Comparison', () => {\r\n    it('should show course sale has highest burn rate', () => {\r\n      const rates = calculator.getBurnRates();\r\n\r\n      expect(rates.courseSale).toBeGreaterThan(rates.earningsWithdrawal);\r\n      expect(rates.earningsWithdrawal).toBeGreaterThan(rates.tokenRedemption);\r\n    });\r\n\r\n    it('should calculate burn impact differences across transaction types', () => {\r\n      const amount = new Decimal(1000);\r\n\r\n      const saleBurn = calculator.calculateBurn(amount, BurnTransactionType.COURSE_SALE);\r\n      const withdrawalBurn = calculator.calculateBurn(\r\n        amount,\r\n        BurnTransactionType.EARNINGS_WITHDRAWAL\r\n      );\r\n      const redemptionBurn = calculator.calculateBurn(\r\n        amount,\r\n        BurnTransactionType.TOKEN_REDEMPTION\r\n      );\r\n\r\n      expect(saleBurn.burnedAmount.toNumber()).toBeGreaterThan(\r\n        withdrawalBurn.burnedAmount.toNumber()\r\n      );\r\n      expect(withdrawalBurn.burnedAmount.toNumber()).toBeGreaterThan(\r\n        redemptionBurn.burnedAmount.toNumber()\r\n      );\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}