7e1697c5e90220901991f1a7345c070d
"use strict";

const request = require('supertest');
const app = require('../index.js');
describe('Azora Library Service', () => {
  // Close the server after all tests
  afterAll(done => {
    // Close any open connections
    done();
  });

  // Health check test
  describe('GET /health', () => {
    it('should return health status', async () => {
      const response = await request(app).get('/health').expect(200);
      expect(response.body.status).toBe('OK');
      expect(response.body.service).toBe('Azora Library');
    });
  });

  // AI Librarian info test
  describe('GET /ai-librarian', () => {
    it('should return AI librarian information', async () => {
      const response = await request(app).get('/ai-librarian').expect(200);
      expect(response.body.name).toBe('Libra');
      expect(response.body.capabilities).toEqual(expect.arrayContaining(['search', 'recommend', 'summarize', 'categorize']));
    });
  });

  // Get all books test
  describe('GET /books', () => {
    it('should return a list of books', async () => {
      const response = await request(app).get('/books').expect(200);
      expect(response.body.success).toBe(true);
      expect(Array.isArray(response.body.data)).toBe(true);
    });
  });

  // User registration test
  describe('POST /users/register', () => {
    it('should register a new user', async () => {
      const userData = {
        username: 'testuser',
        email: 'test@example.com',
        password: 'password123'
      };
      const response = await request(app).post('/users/register').send(userData).expect(201);
      expect(response.body.success).toBe(true);
      expect(response.body.data.username).toBe(userData.username);
      expect(response.body.data.email).toBe(userData.email);
      expect(response.body.token).toBeDefined();
    });
  });

  // User login test
  describe('POST /users/login', () => {
    it('should login an existing user', async () => {
      const loginData = {
        email: 'test@example.com',
        password: 'password123'
      };
      const response = await request(app).post('/users/login').send(loginData).expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.email).toBe(loginData.email);
      expect(response.body.token).toBeDefined();
    });
  });

  // Education system integration tests
  describe('Education System Integration', () => {
    let adminToken;
    let testBookId;
    const testCourseId = 'course-123';

    // Register and login as admin for testing
    beforeAll(async () => {
      // Register admin user
      const adminData = {
        username: 'adminuser',
        email: 'admin@example.com',
        password: 'adminpassword123'
      };
      await request(app).post('/users/register').send(adminData);

      // Login to get token
      const response = await request(app).post('/users/login').send({
        email: 'admin@example.com',
        password: 'adminpassword123'
      });
      adminToken = response.body.token;
    });

    // Create a test book
    beforeAll(async () => {
      const bookData = {
        title: 'Test Book for Education Integration',
        author: 'Test Author',
        description: 'A test book for education integration',
        category: 'Education',
        price: 0
      };
      const response = await request(app).post('/books').set('Authorization', `Bearer ${adminToken}`).send(bookData);
      testBookId = response.body.data.id;
    });

    // Test assigning a book to a course
    it('should assign a book to a course', async () => {
      const response = await request(app).post(`/courses/${testCourseId}/books/${testBookId}`).set('Authorization', `Bearer ${adminToken}`).send({
        required: true
      }).expect(201);
      expect(response.body.success).toBe(true);
      expect(response.body.data.courseId).toBe(testCourseId);
      expect(response.body.data.bookId).toBe(testBookId);
      expect(response.body.data.required).toBe(true);
    });

    // Test getting books for a course
    it('should get all books for a course', async () => {
      const response = await request(app).get(`/courses/${testCourseId}/books`).expect(200);
      expect(response.body.success).toBe(true);
      expect(Array.isArray(response.body.data)).toBe(true);
      expect(response.body.data.length).toBeGreaterThan(0);
      expect(response.body.data[0].id).toBe(testBookId);
    });

    // Test getting courses for a book
    it('should get all courses that use a specific book', async () => {
      const response = await request(app).get(`/books/${testBookId}/courses`).expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.bookId).toBe(testBookId);
      expect(Array.isArray(response.body.data.courseIds)).toBe(true);
      expect(response.body.data.courseIds).toContain(testCourseId);
    });

    // Test student recommendations
    it('should get book recommendations for a student', async () => {
      const response = await request(app).get('/students/student-123/recommendations').expect(200);
      expect(response.body.success).toBe(true);
      expect(Array.isArray(response.body.data)).toBe(true);
      expect(response.body.aiLibrarian).toBeDefined();
    });

    // Test removing a book from a course
    it('should remove a book from a course', async () => {
      const response = await request(app).delete(`/courses/${testCourseId}/books/${testBookId}`).set('Authorization', `Bearer ${adminToken}`).expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.message).toBe('Book removed from course successfully');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsImRlc2NyaWJlIiwiYWZ0ZXJBbGwiLCJkb25lIiwiaXQiLCJyZXNwb25zZSIsImdldCIsImV4cGVjdCIsImJvZHkiLCJzdGF0dXMiLCJ0b0JlIiwic2VydmljZSIsIm5hbWUiLCJjYXBhYmlsaXRpZXMiLCJ0b0VxdWFsIiwiYXJyYXlDb250YWluaW5nIiwic3VjY2VzcyIsIkFycmF5IiwiaXNBcnJheSIsImRhdGEiLCJ1c2VyRGF0YSIsInVzZXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInBvc3QiLCJzZW5kIiwidG9rZW4iLCJ0b0JlRGVmaW5lZCIsImxvZ2luRGF0YSIsImFkbWluVG9rZW4iLCJ0ZXN0Qm9va0lkIiwidGVzdENvdXJzZUlkIiwiYmVmb3JlQWxsIiwiYWRtaW5EYXRhIiwiYm9va0RhdGEiLCJ0aXRsZSIsImF1dGhvciIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJwcmljZSIsInNldCIsImlkIiwicmVxdWlyZWQiLCJjb3Vyc2VJZCIsImJvb2tJZCIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImNvdXJzZUlkcyIsInRvQ29udGFpbiIsImFpTGlicmFyaWFuIiwiZGVsZXRlIiwibWVzc2FnZSJdLCJzb3VyY2VzIjpbImxpYnJhcnkudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG5jb25zdCBhcHAgPSByZXF1aXJlKCcuLi9pbmRleC5qcycpO1xuXG5kZXNjcmliZSgnQXpvcmEgTGlicmFyeSBTZXJ2aWNlJywgKCkgPT4ge1xuICAvLyBDbG9zZSB0aGUgc2VydmVyIGFmdGVyIGFsbCB0ZXN0c1xuICBhZnRlckFsbCgoZG9uZSkgPT4ge1xuICAgIC8vIENsb3NlIGFueSBvcGVuIGNvbm5lY3Rpb25zXG4gICAgZG9uZSgpO1xuICB9KTtcblxuICAvLyBIZWFsdGggY2hlY2sgdGVzdFxuICBkZXNjcmliZSgnR0VUIC9oZWFsdGgnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gaGVhbHRoIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9oZWFsdGgnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN0YXR1cykudG9CZSgnT0snKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnNlcnZpY2UpLnRvQmUoJ0F6b3JhIExpYnJhcnknKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gQUkgTGlicmFyaWFuIGluZm8gdGVzdFxuICBkZXNjcmliZSgnR0VUIC9haS1saWJyYXJpYW4nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gQUkgbGlicmFyaWFuIGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FpLWxpYnJhcmlhbicpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubmFtZSkudG9CZSgnTGlicmEnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNhcGFiaWxpdGllcykudG9FcXVhbChcbiAgICAgICAgZXhwZWN0LmFycmF5Q29udGFpbmluZyhbJ3NlYXJjaCcsICdyZWNvbW1lbmQnLCAnc3VtbWFyaXplJywgJ2NhdGVnb3JpemUnXSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEdldCBhbGwgYm9va3MgdGVzdFxuICBkZXNjcmliZSgnR0VUIC9ib29rcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhIGxpc3Qgb2YgYm9va3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYm9va3MnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRhdGEpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBVc2VyIHJlZ2lzdHJhdGlvbiB0ZXN0XG4gIGRlc2NyaWJlKCdQT1NUIC91c2Vycy9yZWdpc3RlcicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIGEgbmV3IHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgICAgdXNlcm5hbWU6ICd0ZXN0dXNlcicsXG4gICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL3VzZXJzL3JlZ2lzdGVyJylcbiAgICAgICAgLnNlbmQodXNlckRhdGEpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEudXNlcm5hbWUpLnRvQmUodXNlckRhdGEudXNlcm5hbWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5lbWFpbCkudG9CZSh1c2VyRGF0YS5lbWFpbCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS50b2tlbikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gVXNlciBsb2dpbiB0ZXN0XG4gIGRlc2NyaWJlKCdQT1NUIC91c2Vycy9sb2dpbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGxvZ2luIGFuIGV4aXN0aW5nIHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsb2dpbkRhdGEgPSB7XG4gICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL3VzZXJzL2xvZ2luJylcbiAgICAgICAgLnNlbmQobG9naW5EYXRhKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmVtYWlsKS50b0JlKGxvZ2luRGF0YS5lbWFpbCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS50b2tlbikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gRWR1Y2F0aW9uIHN5c3RlbSBpbnRlZ3JhdGlvbiB0ZXN0c1xuICBkZXNjcmliZSgnRWR1Y2F0aW9uIFN5c3RlbSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBsZXQgYWRtaW5Ub2tlbjtcbiAgICBsZXQgdGVzdEJvb2tJZDtcbiAgICBjb25zdCB0ZXN0Q291cnNlSWQgPSAnY291cnNlLTEyMyc7XG5cbiAgICAvLyBSZWdpc3RlciBhbmQgbG9naW4gYXMgYWRtaW4gZm9yIHRlc3RpbmdcbiAgICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUmVnaXN0ZXIgYWRtaW4gdXNlclxuICAgICAgY29uc3QgYWRtaW5EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJ2FkbWludXNlcicsXG4gICAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ2FkbWlucGFzc3dvcmQxMjMnXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy91c2Vycy9yZWdpc3RlcicpXG4gICAgICAgIC5zZW5kKGFkbWluRGF0YSk7XG5cbiAgICAgIC8vIExvZ2luIHRvIGdldCB0b2tlblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy91c2Vycy9sb2dpbicpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ2FkbWlucGFzc3dvcmQxMjMnXG4gICAgICAgIH0pO1xuXG4gICAgICBhZG1pblRva2VuID0gcmVzcG9uc2UuYm9keS50b2tlbjtcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBhIHRlc3QgYm9va1xuICAgIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBib29rRGF0YSA9IHtcbiAgICAgICAgdGl0bGU6ICdUZXN0IEJvb2sgZm9yIEVkdWNhdGlvbiBJbnRlZ3JhdGlvbicsXG4gICAgICAgIGF1dGhvcjogJ1Rlc3QgQXV0aG9yJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBIHRlc3QgYm9vayBmb3IgZWR1Y2F0aW9uIGludGVncmF0aW9uJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdFZHVjYXRpb24nLFxuICAgICAgICBwcmljZTogMFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9ib29rcycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWRtaW5Ub2tlbn1gKVxuICAgICAgICAuc2VuZChib29rRGF0YSk7XG5cbiAgICAgIHRlc3RCb29rSWQgPSByZXNwb25zZS5ib2R5LmRhdGEuaWQ7XG4gICAgfSk7XG5cbiAgICAvLyBUZXN0IGFzc2lnbmluZyBhIGJvb2sgdG8gYSBjb3Vyc2VcbiAgICBpdCgnc2hvdWxkIGFzc2lnbiBhIGJvb2sgdG8gYSBjb3Vyc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdChgL2NvdXJzZXMvJHt0ZXN0Q291cnNlSWR9L2Jvb2tzLyR7dGVzdEJvb2tJZH1gKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2FkbWluVG9rZW59YClcbiAgICAgICAgLnNlbmQoeyByZXF1aXJlZDogdHJ1ZSB9KVxuICAgICAgICAuZXhwZWN0KDIwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmNvdXJzZUlkKS50b0JlKHRlc3RDb3Vyc2VJZCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmJvb2tJZCkudG9CZSh0ZXN0Qm9va0lkKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEucmVxdWlyZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBUZXN0IGdldHRpbmcgYm9va3MgZm9yIGEgY291cnNlXG4gICAgaXQoJ3Nob3VsZCBnZXQgYWxsIGJvb2tzIGZvciBhIGNvdXJzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoYC9jb3Vyc2VzLyR7dGVzdENvdXJzZUlkfS9ib29rc2ApXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkuZGF0YSkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YVswXS5pZCkudG9CZSh0ZXN0Qm9va0lkKTtcbiAgICB9KTtcblxuICAgIC8vIFRlc3QgZ2V0dGluZyBjb3Vyc2VzIGZvciBhIGJvb2tcbiAgICBpdCgnc2hvdWxkIGdldCBhbGwgY291cnNlcyB0aGF0IHVzZSBhIHNwZWNpZmljIGJvb2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYm9va3MvJHt0ZXN0Qm9va0lkfS9jb3Vyc2VzYClcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5ib29rSWQpLnRvQmUodGVzdEJvb2tJZCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRhdGEuY291cnNlSWRzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuY291cnNlSWRzKS50b0NvbnRhaW4odGVzdENvdXJzZUlkKTtcbiAgICB9KTtcblxuICAgIC8vIFRlc3Qgc3R1ZGVudCByZWNvbW1lbmRhdGlvbnNcbiAgICBpdCgnc2hvdWxkIGdldCBib29rIHJlY29tbWVuZGF0aW9ucyBmb3IgYSBzdHVkZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3N0dWRlbnRzL3N0dWRlbnQtMTIzL3JlY29tbWVuZGF0aW9ucycpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkuZGF0YSkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5haUxpYnJhcmlhbikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIC8vIFRlc3QgcmVtb3ZpbmcgYSBib29rIGZyb20gYSBjb3Vyc2VcbiAgICBpdCgnc2hvdWxkIHJlbW92ZSBhIGJvb2sgZnJvbSBhIGNvdXJzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5kZWxldGUoYC9jb3Vyc2VzLyR7dGVzdENvdXJzZUlkfS9ib29rcy8ke3Rlc3RCb29rSWR9YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthZG1pblRva2VufWApXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lc3NhZ2UpLnRvQmUoJ0Jvb2sgcmVtb3ZlZCBmcm9tIGNvdXJzZSBzdWNjZXNzZnVsbHknKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBRWxDRSxRQUFRLENBQUMsdUJBQXVCLEVBQUUsTUFBTTtFQUN0QztFQUNBQyxRQUFRLENBQUVDLElBQUksSUFBSztJQUNqQjtJQUNBQSxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQzs7RUFFRjtFQUNBRixRQUFRLENBQUMsYUFBYSxFQUFFLE1BQU07SUFDNUJHLEVBQUUsQ0FBQyw2QkFBNkIsRUFBRSxZQUFZO01BQzVDLE1BQU1DLFFBQVEsR0FBRyxNQUFNUCxPQUFPLENBQUNFLEdBQUcsQ0FBQyxDQUNoQ00sR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUNkQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ0YsUUFBUSxDQUFDRyxJQUFJLENBQUNDLE1BQU0s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