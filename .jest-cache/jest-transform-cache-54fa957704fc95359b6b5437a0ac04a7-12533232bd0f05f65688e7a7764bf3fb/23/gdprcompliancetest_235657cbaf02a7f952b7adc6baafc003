804e03d31a0ecffa154cabc9c8f37753
"use strict";

/**
 * GDPR Compliance Integration Tests
 * Tests for data export, deletion, and consent management
 */

describe('GDPR Compliance', () => {
  const testUserId = 'test-user-gdpr-123';
  const apiBaseUrl = process.env.API_URL || 'http://localhost:3000';
  describe('Consent Management', () => {
    it('should allow user to grant consent', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/consent`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'x-user-id': testUserId
        },
        body: JSON.stringify({
          analytics: true,
          marketing: true,
          personalization: true
        })
      });
      expect(response.status).toBe(200);
      const data = await response.json();
      expect(data.success).toBe(true);
    });
    it('should retrieve consent status', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/consent`, {
        method: 'GET',
        headers: {
          'x-user-id': testUserId
        }
      });
      expect(response.status).toBe(200);
      const data = await response.json();
      expect(data).toHaveProperty('userId');
      expect(data).toHaveProperty('essential');
      expect(data).toHaveProperty('analytics');
      expect(data).toHaveProperty('marketing');
      expect(data).toHaveProperty('personalization');
    });
    it('should allow user to withdraw consent', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/consent`, {
        method: 'DELETE',
        headers: {
          'x-user-id': testUserId
        }
      });
      expect(response.status).toBe(200);
      const data = await response.json();
      expect(data.success).toBe(true);
    });
    it('should require authentication for consent endpoints', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/consent`, {
        method: 'GET'
      });
      expect(response.status).toBe(401);
    });
  });
  describe('Data Export (Right to Data Portability)', () => {
    it('should export user data in machine-readable format', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/data-export`, {
        method: 'GET',
        headers: {
          'x-user-id': testUserId
        }
      });
      expect(response.status).toBe(200);
      expect(response.headers.get('content-type')).toContain('application/json');
      expect(response.headers.get('content-disposition')).toContain('attachment');
      const data = await response.json();
      expect(data).toHaveProperty('user');
      expect(data).toHaveProperty('enrollments');
      expect(data).toHaveProperty('payments');
      expect(data).toHaveProperty('wallets');
    });
    it('should include all user data in export', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/data-export`, {
        method: 'GET',
        headers: {
          'x-user-id': testUserId
        }
      });
      const data = await response.json();

      // Verify user profile data
      expect(data.user).toHaveProperty('id');
      expect(data.user).toHaveProperty('email');
      expect(data.user).toHaveProperty('name');
      expect(data.user).toHaveProperty('role');

      // Verify related data
      expect(Array.isArray(data.enrollments)).toBe(true);
      expect(Array.isArray(data.payments)).toBe(true);
      expect(Array.isArray(data.wallets)).toBe(true);
      expect(Array.isArray(data.assessments)).toBe(true);
    });
    it('should require authentication for data export', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/data-export`, {
        method: 'GET'
      });
      expect(response.status).toBe(401);
    });
    it('should return downloadable file', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/data-export`, {
        method: 'GET',
        headers: {
          'x-user-id': testUserId
        }
      });
      const contentDisposition = response.headers.get('content-disposition');
      expect(contentDisposition).toContain('attachment');
      expect(contentDisposition).toContain('.json');
    });
  });
  describe('Data Deletion (Right to Erasure)', () => {
    it('should request account deletion', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/delete-account`, {
        method: 'POST',
        headers: {
          'x-user-id': testUserId
        }
      });
      expect(response.status).toBe(200);
      const data = await response.json();
      expect(data.success).toBe(true);
      expect(data.message).toContain('Confirmation email');
    });
    it('should require confirmation token for deletion', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/delete-account`, {
        method: 'DELETE',
        headers: {
          'x-user-id': testUserId,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({})
      });
      expect(response.status).toBe(400);
      const data = await response.json();
      expect(data.error).toContain('token');
    });
    it('should delete user data with valid confirmation', async () => {
      // This test assumes a valid confirmation token is provided
      const confirmationToken = 'valid-token-123';
      const response = await fetch(`${apiBaseUrl}/api/gdpr/delete-account`, {
        method: 'DELETE',
        headers: {
          'x-user-id': testUserId,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          confirmationToken
        })
      });
      expect(response.status).toBe(200);
      const data = await response.json();
      expect(data.success).toBe(true);
    });
    it('should require authentication for deletion', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/delete-account`, {
        method: 'POST'
      });
      expect(response.status).toBe(401);
    });
  });
  describe('Data Retention Policy', () => {
    it('should retrieve retention policies', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/retention-policy`, {
        method: 'GET'
      });
      expect(response.status).toBe(200);
      const data = await response.json();
      expect(data).toHaveProperty('policies');
      expect(Array.isArray(data.policies)).toBe(true);
    });
    it('should include retention periods', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/retention-policy`, {
        method: 'GET'
      });
      const data = await response.json();
      const policies = data.policies;
      policies.forEach(policy => {
        expect(policy).toHaveProperty('dataType');
        expect(policy).toHaveProperty('retentionDays');
        expect(policy).toHaveProperty('autoDelete');
      });
    });
    it('should show cleanup schedule', async () => {
      const response = await fetch(`${apiBaseUrl}/api/gdpr/retention-policy`, {
        method: 'GET'
      });
      const data = await response.json();
      expect(data).toHaveProperty('lastCleanup');
      expect(data).toHaveProperty('nextCleanup');
    });
  });
  describe('GDPR Compliance Verification', () => {
    it('should support all GDPR rights', async () => {
      // Right to Access
      const accessResponse = await fetch(`${apiBaseUrl}/api/gdpr/data-export`, {
        method: 'GET',
        headers: {
          'x-user-id': testUserId
        }
      });
      expect(accessResponse.status).toBe(200);

      // Right to Rectification (user can update profile)
      // This would be tested via user profile update endpoint

      // Right to Erasure
      const deleteResponse = await fetch(`${apiBaseUrl}/api/gdpr/delete-account`, {
        method: 'POST',
        headers: {
          'x-user-id': testUserId
        }
      });
      expect(deleteResponse.status).toBe(200);

      // Right to Data Portability
      const portabilityResponse = await fetch(`${apiBaseUrl}/api/gdpr/data-export`, {
        method: 'GET',
        headers: {
          'x-user-id': testUserId
        }
      });
      expect(portabilityResponse.status).toBe(200);

      // Right to Object (withdraw consent)
      const objectResponse = await fetch(`${apiBaseUrl}/api/gdpr/consent`, {
        method: 'DELETE',
        headers: {
          'x-user-id': testUserId
        }
      });
      expect(objectResponse.status).toBe(200);
    });
    it('should enforce 30-day response time for data requests', async () => {
      const requestTime = new Date();
      const response = await fetch(`${apiBaseUrl}/api/gdpr/data-export`, {
        method: 'GET',
        headers: {
          'x-user-id': testUserId
        }
      });
      const responseTime = new Date();
      const responseTimeMs = responseTime.getTime() - requestTime.getTime();

      // Response should be immediate (not 30 days)
      expect(responseTimeMs).toBeLessThan(5000); // 5 seconds
    });
    it('should maintain audit logs for GDPR requests', async () => {
      // Make a GDPR request
      await fetch(`${apiBaseUrl}/api/gdpr/data-export`, {
        method: 'GET',
        headers: {
          'x-user-id': testUserId
        }
      });

      // Verify audit log was created
      // This would require an admin endpoint to check audit logs
      // For now, we just verify the request succeeded
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsInRlc3RVc2VySWQiLCJhcGlCYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIkFQSV9VUkwiLCJpdCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbmFseXRpY3MiLCJtYXJrZXRpbmciLCJwZXJzb25hbGl6YXRpb24iLCJleHBlY3QiLCJzdGF0dXMiLCJ0b0JlIiwiZGF0YSIsImpzb24iLCJzdWNjZXNzIiwidG9IYXZlUHJvcGVydHkiLCJnZXQiLCJ0b0NvbnRhaW4iLCJ1c2VyIiwiQXJyYXkiLCJpc0FycmF5IiwiZW5yb2xsbWVudHMiLCJwYXltZW50cyIsIndhbGxldHMiLCJhc3Nlc3NtZW50cyIsImNvbnRlbnREaXNwb3NpdGlvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImNvbmZpcm1hdGlvblRva2VuIiwicG9saWNpZXMiLCJmb3JFYWNoIiwicG9saWN5IiwiYWNjZXNzUmVzcG9uc2UiLCJkZWxldGVSZXNwb25zZSIsInBvcnRhYmlsaXR5UmVzcG9uc2UiLCJvYmplY3RSZXNwb25zZSIsInJlcXVlc3RUaW1lIiwiRGF0ZSIsInJlc3BvbnNlVGltZSIsInJlc3BvbnNlVGltZU1zIiwiZ2V0VGltZSIsInRvQmVMZXNzVGhhbiJdLCJzb3VyY2VzIjpbImdkcHItY29tcGxpYW5jZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBHRFBSIENvbXBsaWFuY2UgSW50ZWdyYXRpb24gVGVzdHNcclxuICogVGVzdHMgZm9yIGRhdGEgZXhwb3J0LCBkZWxldGlvbiwgYW5kIGNvbnNlbnQgbWFuYWdlbWVudFxyXG4gKi9cclxuXHJcbmRlc2NyaWJlKCdHRFBSIENvbXBsaWFuY2UnLCAoKSA9PiB7XHJcbiAgY29uc3QgdGVzdFVzZXJJZCA9ICd0ZXN0LXVzZXItZ2Rwci0xMjMnO1xyXG4gIGNvbnN0IGFwaUJhc2VVcmwgPSBwcm9jZXNzLmVudi5BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xyXG5cclxuICBkZXNjcmliZSgnQ29uc2VudCBNYW5hZ2VtZW50JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyB1c2VyIHRvIGdyYW50IGNvbnNlbnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvY29uc2VudGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgJ3gtdXNlci1pZCc6IHRlc3RVc2VySWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGFuYWx5dGljczogdHJ1ZSxcclxuICAgICAgICAgIG1hcmtldGluZzogdHJ1ZSxcclxuICAgICAgICAgIHBlcnNvbmFsaXphdGlvbjogdHJ1ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBjb25zZW50IHN0YXR1cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9hcGkvZ2Rwci9jb25zZW50YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ3gtdXNlci1pZCc6IHRlc3RVc2VySWRcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3VzZXJJZCcpO1xyXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ2Vzc2VudGlhbCcpO1xyXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ2FuYWx5dGljcycpO1xyXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ21hcmtldGluZycpO1xyXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3BlcnNvbmFsaXphdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyB1c2VyIHRvIHdpdGhkcmF3IGNvbnNlbnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvY29uc2VudGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICd4LXVzZXItaWQnOiB0ZXN0VXNlcklkXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBhdXRoZW50aWNhdGlvbiBmb3IgY29uc2VudCBlbmRwb2ludHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvY29uc2VudGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEYXRhIEV4cG9ydCAoUmlnaHQgdG8gRGF0YSBQb3J0YWJpbGl0eSknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCB1c2VyIGRhdGEgaW4gbWFjaGluZS1yZWFkYWJsZSBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvZGF0YS1leHBvcnRgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAneC11c2VyLWlkJzogdGVzdFVzZXJJZFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpLnRvQ29udGFpbignYXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtZGlzcG9zaXRpb24nKSkudG9Db250YWluKCdhdHRhY2htZW50Jyk7XHJcblxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3VzZXInKTtcclxuICAgICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlbnJvbGxtZW50cycpO1xyXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3BheW1lbnRzJyk7XHJcbiAgICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnd2FsbGV0cycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGFsbCB1c2VyIGRhdGEgaW4gZXhwb3J0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2FwaUJhc2VVcmx9L2FwaS9nZHByL2RhdGEtZXhwb3J0YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ3gtdXNlci1pZCc6IHRlc3RVc2VySWRcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgIC8vIFZlcmlmeSB1c2VyIHByb2ZpbGUgZGF0YVxyXG4gICAgICBleHBlY3QoZGF0YS51c2VyKS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcclxuICAgICAgZXhwZWN0KGRhdGEudXNlcikudG9IYXZlUHJvcGVydHkoJ2VtYWlsJyk7XHJcbiAgICAgIGV4cGVjdChkYXRhLnVzZXIpLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XHJcbiAgICAgIGV4cGVjdChkYXRhLnVzZXIpLnRvSGF2ZVByb3BlcnR5KCdyb2xlJyk7XHJcblxyXG4gICAgICAvLyBWZXJpZnkgcmVsYXRlZCBkYXRhXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGRhdGEuZW5yb2xsbWVudHMpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShkYXRhLnBheW1lbnRzKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZGF0YS53YWxsZXRzKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZGF0YS5hc3Nlc3NtZW50cykpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlcXVpcmUgYXV0aGVudGljYXRpb24gZm9yIGRhdGEgZXhwb3J0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2FwaUJhc2VVcmx9L2FwaS9nZHByL2RhdGEtZXhwb3J0YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBkb3dubG9hZGFibGUgZmlsZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9hcGkvZ2Rwci9kYXRhLWV4cG9ydGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICd4LXVzZXItaWQnOiB0ZXN0VXNlcklkXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRlbnREaXNwb3NpdGlvbiA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LWRpc3Bvc2l0aW9uJyk7XHJcbiAgICAgIGV4cGVjdChjb250ZW50RGlzcG9zaXRpb24pLnRvQ29udGFpbignYXR0YWNobWVudCcpO1xyXG4gICAgICBleHBlY3QoY29udGVudERpc3Bvc2l0aW9uKS50b0NvbnRhaW4oJy5qc29uJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0RhdGEgRGVsZXRpb24gKFJpZ2h0IHRvIEVyYXN1cmUpJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXF1ZXN0IGFjY291bnQgZGVsZXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvZGVsZXRlLWFjY291bnRgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ3gtdXNlci1pZCc6IHRlc3RVc2VySWRcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoZGF0YS5tZXNzYWdlKS50b0NvbnRhaW4oJ0NvbmZpcm1hdGlvbiBlbWFpbCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXF1aXJlIGNvbmZpcm1hdGlvbiB0b2tlbiBmb3IgZGVsZXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvZGVsZXRlLWFjY291bnRgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAneC11c2VyLWlkJzogdGVzdFVzZXJJZCxcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IpLnRvQ29udGFpbigndG9rZW4nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGVsZXRlIHVzZXIgZGF0YSB3aXRoIHZhbGlkIGNvbmZpcm1hdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gVGhpcyB0ZXN0IGFzc3VtZXMgYSB2YWxpZCBjb25maXJtYXRpb24gdG9rZW4gaXMgcHJvdmlkZWRcclxuICAgICAgY29uc3QgY29uZmlybWF0aW9uVG9rZW4gPSAndmFsaWQtdG9rZW4tMTIzJztcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvZGVsZXRlLWFjY291bnRgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAneC11c2VyLWlkJzogdGVzdFVzZXJJZCxcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY29uZmlybWF0aW9uVG9rZW4gfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlcXVpcmUgYXV0aGVudGljYXRpb24gZm9yIGRlbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2FwaUJhc2VVcmx9L2FwaS9nZHByL2RlbGV0ZS1hY2NvdW50YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEYXRhIFJldGVudGlvbiBQb2xpY3knLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHJldGVudGlvbiBwb2xpY2llcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9hcGkvZ2Rwci9yZXRlbnRpb24tcG9saWN5YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgncG9saWNpZXMnKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZGF0YS5wb2xpY2llcykpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgcmV0ZW50aW9uIHBlcmlvZHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvcmV0ZW50aW9uLXBvbGljeWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgY29uc3QgcG9saWNpZXMgPSBkYXRhLnBvbGljaWVzO1xyXG5cclxuICAgICAgcG9saWNpZXMuZm9yRWFjaCgocG9saWN5OiBhbnkpID0+IHtcclxuICAgICAgICBleHBlY3QocG9saWN5KS50b0hhdmVQcm9wZXJ0eSgnZGF0YVR5cGUnKTtcclxuICAgICAgICBleHBlY3QocG9saWN5KS50b0hhdmVQcm9wZXJ0eSgncmV0ZW50aW9uRGF5cycpO1xyXG4gICAgICAgIGV4cGVjdChwb2xpY3kpLnRvSGF2ZVByb3BlcnR5KCdhdXRvRGVsZXRlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzaG93IGNsZWFudXAgc2NoZWR1bGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvcmV0ZW50aW9uLXBvbGljeWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdsYXN0Q2xlYW51cCcpO1xyXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ25leHRDbGVhbnVwJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0dEUFIgQ29tcGxpYW5jZSBWZXJpZmljYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgYWxsIEdEUFIgcmlnaHRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBSaWdodCB0byBBY2Nlc3NcclxuICAgICAgY29uc3QgYWNjZXNzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9hcGkvZ2Rwci9kYXRhLWV4cG9ydGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ3gtdXNlci1pZCc6IHRlc3RVc2VySWQgfVxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KGFjY2Vzc1Jlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG5cclxuICAgICAgLy8gUmlnaHQgdG8gUmVjdGlmaWNhdGlvbiAodXNlciBjYW4gdXBkYXRlIHByb2ZpbGUpXHJcbiAgICAgIC8vIFRoaXMgd291bGQgYmUgdGVzdGVkIHZpYSB1c2VyIHByb2ZpbGUgdXBkYXRlIGVuZHBvaW50XHJcblxyXG4gICAgICAvLyBSaWdodCB0byBFcmFzdXJlXHJcbiAgICAgIGNvbnN0IGRlbGV0ZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvZGVsZXRlLWFjY291bnRgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczogeyAneC11c2VyLWlkJzogdGVzdFVzZXJJZCB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3QoZGVsZXRlUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcblxyXG4gICAgICAvLyBSaWdodCB0byBEYXRhIFBvcnRhYmlsaXR5XHJcbiAgICAgIGNvbnN0IHBvcnRhYmlsaXR5UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9hcGkvZ2Rwci9kYXRhLWV4cG9ydGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ3gtdXNlci1pZCc6IHRlc3RVc2VySWQgfVxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHBvcnRhYmlsaXR5UmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcblxyXG4gICAgICAvLyBSaWdodCB0byBPYmplY3QgKHdpdGhkcmF3IGNvbnNlbnQpXHJcbiAgICAgIGNvbnN0IG9iamVjdFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vYXBpL2dkcHIvY29uc2VudGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ3gtdXNlci1pZCc6IHRlc3RVc2VySWQgfVxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KG9iamVjdFJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBlbmZvcmNlIDMwLWRheSByZXNwb25zZSB0aW1lIGZvciBkYXRhIHJlcXVlc3RzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0VGltZSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2FwaUJhc2VVcmx9L2FwaS9nZHByL2RhdGEtZXhwb3J0YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczogeyAneC11c2VyLWlkJzogdGVzdFVzZXJJZCB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2VUaW1lID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3QgcmVzcG9uc2VUaW1lTXMgPSByZXNwb25zZVRpbWUuZ2V0VGltZSgpIC0gcmVxdWVzdFRpbWUuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgLy8gUmVzcG9uc2Ugc2hvdWxkIGJlIGltbWVkaWF0ZSAobm90IDMwIGRheXMpXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZVRpbWVNcykudG9CZUxlc3NUaGFuKDUwMDApOyAvLyA1IHNlY29uZHNcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gYXVkaXQgbG9ncyBmb3IgR0RQUiByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gTWFrZSBhIEdEUFIgcmVxdWVzdFxyXG4gICAgICBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9hcGkvZ2Rwci9kYXRhLWV4cG9ydGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ3gtdXNlci1pZCc6IHRlc3RVc2VySWQgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFZlcmlmeSBhdWRpdCBsb2cgd2FzIGNyZWF0ZWRcclxuICAgICAgLy8gVGhpcyB3b3VsZCByZXF1aXJlIGFuIGFkbWluIGVuZHBvaW50IHRvIGNoZWNrIGF1ZGl0IGxvZ3NcclxuICAgICAgLy8gRm9yIG5vdywgd2UganVzdCB2ZXJpZnkgdGhlIHJlcXVlc3Qgc3VjY2VlZGVkXHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJc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