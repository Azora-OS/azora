{"version":3,"names":["_getJestObj","mock","PrismaClient","jest","fn","course","findUnique","assessment","_translation","require","_client","describe","mockPrisma","beforeEach","clearAllMocks","it","mockCourse","id","title","description","modules","content","assessments","questions","mockResolvedValue","translation","translationService","translateCourse","expect","toHaveProperty","rejects","toThrow","languages","getSupportedLanguages","Array","isArray","toBe","length","toBeGreaterThan","toContain","toBeGreaterThanOrEqual","uiStrings","getLocalizedUI","welcome","courses","mockAssessment","localized","localizeAssessment","toHaveLength"],"sources":["translation.service.test.ts"],"sourcesContent":["import { translationService } from '../translation.service';\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\njest.mock('@prisma/client', () => ({\r\n  PrismaClient: jest.fn(() => ({\r\n    course: {\r\n      findUnique: jest.fn(),\r\n    },\r\n    assessment: {\r\n      findUnique: jest.fn(),\r\n    },\r\n  })),\r\n}));\r\n\r\ndescribe('TranslationService', () => {\r\n  let mockPrisma: any;\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    mockPrisma = new PrismaClient();\r\n  });\r\n\r\n  describe('translateCourse', () => {\r\n    it('should translate course to target language', async () => {\r\n      const mockCourse = {\r\n        id: 'course-1',\r\n        title: 'Advanced TypeScript',\r\n        description: 'Learn advanced TypeScript concepts',\r\n        modules: [\r\n          {\r\n            id: 'module-1',\r\n            title: 'Generics',\r\n            content: 'Understanding generics in TypeScript',\r\n          },\r\n        ],\r\n        assessments: [\r\n          {\r\n            id: 'assess-1',\r\n            title: 'Quiz 1',\r\n            questions: ['What are generics?'],\r\n          },\r\n        ],\r\n      };\r\n\r\n      mockPrisma.course.findUnique.mockResolvedValue(mockCourse);\r\n\r\n      const translation = await translationService.translateCourse('course-1', 'es');\r\n\r\n      expect(translation).toHaveProperty('courseId', 'course-1');\r\n      expect(translation).toHaveProperty('language', 'es');\r\n      expect(translation).toHaveProperty('translationStatus', 'completed');\r\n    });\r\n\r\n    it('should throw error for unsupported language', async () => {\r\n      mockPrisma.course.findUnique.mockResolvedValue({\r\n        id: 'course-1',\r\n        title: 'Test Course',\r\n        modules: [],\r\n        assessments: [],\r\n      });\r\n\r\n      await expect(translationService.translateCourse('course-1', 'xx')).rejects.toThrow(\r\n        'not supported'\r\n      );\r\n    });\r\n\r\n    it('should throw error if course not found', async () => {\r\n      mockPrisma.course.findUnique.mockResolvedValue(null);\r\n\r\n      await expect(translationService.translateCourse('invalid-id', 'es')).rejects.toThrow(\r\n        'Course not found'\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('getSupportedLanguages', () => {\r\n    it('should return list of supported languages', () => {\r\n      const languages = translationService.getSupportedLanguages();\r\n\r\n      expect(Array.isArray(languages)).toBe(true);\r\n      expect(languages.length).toBeGreaterThan(0);\r\n      expect(languages).toContain('en');\r\n      expect(languages).toContain('es');\r\n      expect(languages).toContain('fr');\r\n    });\r\n\r\n    it('should include at least 10 languages', () => {\r\n      const languages = translationService.getSupportedLanguages();\r\n\r\n      expect(languages.length).toBeGreaterThanOrEqual(10);\r\n    });\r\n  });\r\n\r\n  describe('getLocalizedUI', () => {\r\n    it('should return localized UI strings for supported language', async () => {\r\n      const uiStrings = await translationService.getLocalizedUI('es');\r\n\r\n      expect(uiStrings).toHaveProperty('welcome');\r\n      expect(uiStrings).toHaveProperty('courses');\r\n      expect(uiStrings).toHaveProperty('enroll');\r\n    });\r\n\r\n    it('should throw error for unsupported language', async () => {\r\n      await expect(translationService.getLocalizedUI('xx')).rejects.toThrow('not supported');\r\n    });\r\n\r\n    it('should return English strings as fallback', async () => {\r\n      const uiStrings = await translationService.getLocalizedUI('en');\r\n\r\n      expect(uiStrings.welcome).toBe('Welcome');\r\n      expect(uiStrings.courses).toBe('Courses');\r\n    });\r\n\r\n    it('should return Spanish strings', async () => {\r\n      const uiStrings = await translationService.getLocalizedUI('es');\r\n\r\n      expect(uiStrings.welcome).toBe('Bienvenido');\r\n      expect(uiStrings.courses).toBe('Cursos');\r\n    });\r\n\r\n    it('should return French strings', async () => {\r\n      const uiStrings = await translationService.getLocalizedUI('fr');\r\n\r\n      expect(uiStrings.welcome).toBe('Bienvenue');\r\n      expect(uiStrings.courses).toBe('Cours');\r\n    });\r\n  });\r\n\r\n  describe('localizeAssessment', () => {\r\n    it('should localize assessment for target language', async () => {\r\n      const mockAssessment = {\r\n        id: 'assess-1',\r\n        title: 'Quiz 1',\r\n        questions: ['What are generics?', 'Explain interfaces'],\r\n      };\r\n\r\n      mockPrisma.assessment.findUnique.mockResolvedValue(mockAssessment);\r\n\r\n      const localized = await translationService.localizeAssessment('assess-1', 'es');\r\n\r\n      expect(localized).toHaveProperty('id', 'assess-1');\r\n      expect(localized).toHaveProperty('title');\r\n      expect(localized).toHaveProperty('questions');\r\n      expect(localized.questions).toHaveLength(2);\r\n    });\r\n\r\n    it('should throw error if assessment not found', async () => {\r\n      mockPrisma.assessment.findUnique.mockResolvedValue(null);\r\n\r\n      await expect(translationService.localizeAssessment('invalid-id', 'es')).rejects.toThrow(\r\n        'Assessment not found'\r\n      );\r\n    });\r\n\r\n    it('should throw error for unsupported language', async () => {\r\n      mockPrisma.assessment.findUnique.mockResolvedValue({\r\n        id: 'assess-1',\r\n        title: 'Quiz',\r\n        questions: [],\r\n      });\r\n\r\n      await expect(translationService.localizeAssessment('assess-1', 'xx')).rejects.toThrow(\r\n        'not supported'\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('Language support', () => {\r\n    it('should support Spanish', async () => {\r\n      const languages = translationService.getSupportedLanguages();\r\n      expect(languages).toContain('es');\r\n    });\r\n\r\n    it('should support French', async () => {\r\n      const languages = translationService.getSupportedLanguages();\r\n      expect(languages).toContain('fr');\r\n    });\r\n\r\n    it('should support German', async () => {\r\n      const languages = translationService.getSupportedLanguages();\r\n      expect(languages).toContain('de');\r\n    });\r\n\r\n    it('should support Chinese', async () => {\r\n      const languages = translationService.getSupportedLanguages();\r\n      expect(languages).toContain('zh');\r\n    });\r\n\r\n    it('should support Japanese', async () => {\r\n      const languages = translationService.getSupportedLanguages();\r\n      expect(languages).toContain('ja');\r\n    });\r\n\r\n    it('should support Arabic', async () => {\r\n      const languages = translationService.getSupportedLanguages();\r\n      expect(languages).toContain('ar');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}