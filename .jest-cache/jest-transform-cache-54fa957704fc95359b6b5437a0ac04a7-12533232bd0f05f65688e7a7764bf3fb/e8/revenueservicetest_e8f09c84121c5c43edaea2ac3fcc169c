e4f208a2fae6feadbeea457f5ecb6596
"use strict";

var _revenueService = require("../services/revenue.service.js");
var _errorHandler = require("../middleware/errorHandler.js");
describe('Revenue Service', () => {
  const businessId = '550e8400-e29b-41d4-a716-446655440001';
  const businessId2 = '550e8400-e29b-41d4-a716-446655440002';
  beforeEach(() => {
    // Clear any previous test data
    jest.clearAllMocks();
  });
  describe('recordTransaction', () => {
    it('should record a revenue transaction successfully', async () => {
      const transactionData = {
        amount: 1000.50,
        source: 'Direct Sales',
        currency: 'USD'
      };
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, transactionData);
      expect(transaction).toBeDefined();
      expect(transaction.id).toBeDefined();
      expect(transaction.businessId).toBe(businessId);
      expect(transaction.amount).toBe(1000.50);
      expect(transaction.source).toBe('Direct Sales');
      expect(transaction.currency).toBe('USD');
      expect(transaction.status).toBe('completed');
      expect(transaction.createdAt).toBeDefined();
    });
    it('should record transaction with default currency USD', async () => {
      const transactionData = {
        amount: 500,
        source: 'Online Payment'
      };
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, transactionData);
      expect(transaction.currency).toBe('USD');
    });
    it('should record transaction with provided receivedAt date', async () => {
      const receivedDate = new Date('2024-01-15');
      const transactionData = {
        amount: 750,
        source: 'Service Fee',
        receivedAt: receivedDate
      };
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, transactionData);
      expect(transaction.receivedAt).toEqual(receivedDate);
    });
    it('should automatically create allocation for recorded transaction', async () => {
      const transactionData = {
        amount: 1000,
        source: 'Direct Sales'
      };
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, transactionData);
      const allocation = await _revenueService.revenueService.getAllocation(transaction.id);
      expect(allocation).toBeDefined();
      expect(allocation?.businessOwnerAmount).toBe(900); // 90%
      expect(allocation?.citadelFundAmount).toBe(100); // 10%
    });
  });
  describe('getTransactions', () => {
    it('should retrieve transactions for a business', async () => {
      // Record multiple transactions
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales 1'
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 2000,
        source: 'Sales 2'
      });
      const result = await _revenueService.revenueService.getTransactions(businessId);
      expect(result.transactions).toHaveLength(2);
      expect(result.total).toBe(2);
      expect(result.page).toBe(1);
      expect(result.pageSize).toBe(10);
      expect(result.totalPages).toBe(1);
    });
    it('should support pagination', async () => {
      // Record 15 transactions
      for (let i = 0; i < 15; i++) {
        await _revenueService.revenueService.recordTransaction(businessId, {
          amount: 100 * (i + 1),
          source: `Sales ${i + 1}`
        });
      }
      const page1 = await _revenueService.revenueService.getTransactions(businessId, 1, 10);
      const page2 = await _revenueService.revenueService.getTransactions(businessId, 2, 10);
      expect(page1.transactions).toHaveLength(10);
      expect(page2.transactions).toHaveLength(5);
      expect(page1.totalPages).toBe(2);
    });
    it('should return empty array for business with no transactions', async () => {
      const result = await _revenueService.revenueService.getTransactions(businessId2);
      expect(result.transactions).toHaveLength(0);
      expect(result.total).toBe(0);
    });
    it('should only return transactions for specified business', async () => {
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales'
      });
      await _revenueService.revenueService.recordTransaction(businessId2, {
        amount: 2000,
        source: 'Sales'
      });
      const result1 = await _revenueService.revenueService.getTransactions(businessId);
      const result2 = await _revenueService.revenueService.getTransactions(businessId2);
      expect(result1.transactions).toHaveLength(1);
      expect(result2.transactions).toHaveLength(1);
      expect(result1.transactions[0].businessId).toBe(businessId);
      expect(result2.transactions[0].businessId).toBe(businessId2);
    });
  });
  describe('getTransactionById', () => {
    it('should retrieve a transaction by ID', async () => {
      const transactionData = {
        amount: 1500,
        source: 'Direct Sales'
      };
      const recorded = await _revenueService.revenueService.recordTransaction(businessId, transactionData);
      const retrieved = await _revenueService.revenueService.getTransactionById(recorded.id);
      expect(retrieved.id).toBe(recorded.id);
      expect(retrieved.amount).toBe(1500);
      expect(retrieved.source).toBe('Direct Sales');
    });
    it('should throw error for non-existent transaction', async () => {
      const fakeId = '550e8400-e29b-41d4-a716-446655440099';
      await expect(_revenueService.revenueService.getTransactionById(fakeId)).rejects.toThrow(_errorHandler.AppError);
    });
  });
  describe('getBreakdown', () => {
    it('should calculate revenue breakdown correctly', async () => {
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales 1'
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 2000,
        source: 'Sales 2'
      });
      const breakdown = await _revenueService.revenueService.getBreakdown(businessId);
      expect(breakdown.totalRevenue).toBe(3000);
      expect(breakdown.businessOwnerShare).toBe(2700); // 90%
      expect(breakdown.citadelFundShare).toBe(300); // 10%
      expect(breakdown.currency).toBe('USD');
    });
    it('should filter transactions by date range', async () => {
      const date1 = new Date('2024-01-01');
      const date2 = new Date('2024-02-01');
      const date3 = new Date('2024-03-01');
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales 1',
        receivedAt: date1
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 2000,
        source: 'Sales 2',
        receivedAt: date2
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 3000,
        source: 'Sales 3',
        receivedAt: date3
      });
      const breakdown = await _revenueService.revenueService.getBreakdown(businessId, new Date('2024-01-15'), new Date('2024-02-15'));
      expect(breakdown.totalRevenue).toBe(2000);
      expect(breakdown.businessOwnerShare).toBe(1800);
      expect(breakdown.citadelFundShare).toBe(200);
    });
    it('should return zero breakdown for business with no transactions', async () => {
      const breakdown = await _revenueService.revenueService.getBreakdown(businessId2);
      expect(breakdown.totalRevenue).toBe(0);
      expect(breakdown.businessOwnerShare).toBe(0);
      expect(breakdown.citadelFundShare).toBe(0);
    });
  });
  describe('getAllocation', () => {
    it('should retrieve allocation for a transaction', async () => {
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales'
      });
      const allocation = await _revenueService.revenueService.getAllocation(transaction.id);
      expect(allocation).toBeDefined();
      expect(allocation?.transactionId).toBe(transaction.id);
      expect(allocation?.businessOwnerAmount).toBe(900);
      expect(allocation?.citadelFundAmount).toBe(100);
    });
    it('should return null for non-existent allocation', async () => {
      const fakeId = '550e8400-e29b-41d4-a716-446655440099';
      const allocation = await _revenueService.revenueService.getAllocation(fakeId);
      expect(allocation).toBeNull();
    });
  });
  describe('getAllocations', () => {
    it('should retrieve all allocations for a business', async () => {
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales 1'
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 2000,
        source: 'Sales 2'
      });
      const allocations = await _revenueService.revenueService.getAllocations(businessId);
      expect(allocations).toHaveLength(2);
      expect(allocations[0].businessOwnerAmount).toBe(900);
      expect(allocations[1].businessOwnerAmount).toBe(1800);
    });
    it('should return empty array for business with no allocations', async () => {
      const allocations = await _revenueService.revenueService.getAllocations(businessId2);
      expect(allocations).toHaveLength(0);
    });
  });
  describe('getTotalAllocations', () => {
    it('should calculate total allocations for a business', async () => {
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales 1'
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 2000,
        source: 'Sales 2'
      });
      const totals = await _revenueService.revenueService.getTotalAllocations(businessId);
      expect(totals.totalBusinessOwnerAmount).toBe(2700); // (1000 + 2000) * 0.9
      expect(totals.totalCitadelFundAmount).toBe(300); // (1000 + 2000) * 0.1
      expect(totals.totalTransactions).toBe(2);
    });
    it('should return zero totals for business with no transactions', async () => {
      const totals = await _revenueService.revenueService.getTotalAllocations(businessId2);
      expect(totals.totalBusinessOwnerAmount).toBe(0);
      expect(totals.totalCitadelFundAmount).toBe(0);
      expect(totals.totalTransactions).toBe(0);
    });
  });
  describe('updateTransactionStatus', () => {
    it('should update transaction status to pending', async () => {
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales'
      });
      const updated = await _revenueService.revenueService.updateTransactionStatus(transaction.id, 'pending');
      expect(updated.status).toBe('pending');
    });
    it('should update transaction status to failed', async () => {
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales'
      });
      const updated = await _revenueService.revenueService.updateTransactionStatus(transaction.id, 'failed');
      expect(updated.status).toBe('failed');
    });
    it('should throw error for non-existent transaction', async () => {
      const fakeId = '550e8400-e29b-41d4-a716-446655440099';
      await expect(_revenueService.revenueService.updateTransactionStatus(fakeId, 'pending')).rejects.toThrow(_errorHandler.AppError);
    });
  });
  describe('getStatistics', () => {
    it('should calculate revenue statistics correctly', async () => {
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales 1'
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 2000,
        source: 'Sales 2'
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 500,
        source: 'Sales 3'
      });
      const stats = await _revenueService.revenueService.getStatistics(businessId);
      expect(stats.totalRevenue).toBe(3500);
      expect(stats.transactionCount).toBe(3);
      expect(stats.averageTransaction).toBeCloseTo(1166.67, 1);
      expect(stats.largestTransaction).toBe(2000);
      expect(stats.smallestTransaction).toBe(500);
      expect(stats.businessOwnerTotal).toBe(3150); // 3500 * 0.9
      expect(stats.citadelFundTotal).toBe(350); // 3500 * 0.1
    });
    it('should filter statistics by date range', async () => {
      const date1 = new Date('2024-01-01');
      const date2 = new Date('2024-02-01');
      const date3 = new Date('2024-03-01');
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales 1',
        receivedAt: date1
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 2000,
        source: 'Sales 2',
        receivedAt: date2
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 3000,
        source: 'Sales 3',
        receivedAt: date3
      });
      const stats = await _revenueService.revenueService.getStatistics(businessId, new Date('2024-01-15'), new Date('2024-02-15'));
      expect(stats.totalRevenue).toBe(2000);
      expect(stats.transactionCount).toBe(1);
    });
    it('should return zero statistics for business with no transactions', async () => {
      const stats = await _revenueService.revenueService.getStatistics(businessId2);
      expect(stats.totalRevenue).toBe(0);
      expect(stats.transactionCount).toBe(0);
      expect(stats.averageTransaction).toBe(0);
    });
  });
  describe('validateTransaction', () => {
    it('should validate correct transaction data', () => {
      const validData = {
        amount: 1000,
        source: 'Direct Sales',
        currency: 'USD'
      };
      expect(_revenueService.revenueService.validateTransaction(validData)).toBe(true);
    });
    it('should throw error for negative amount', () => {
      const invalidData = {
        amount: -100,
        source: 'Direct Sales'
      };
      expect(() => _revenueService.revenueService.validateTransaction(invalidData)).toThrow(_errorHandler.AppError);
    });
    it('should throw error for zero amount', () => {
      const invalidData = {
        amount: 0,
        source: 'Direct Sales'
      };
      expect(() => _revenueService.revenueService.validateTransaction(invalidData)).toThrow(_errorHandler.AppError);
    });
    it('should throw error for missing source', () => {
      const invalidData = {
        amount: 1000,
        source: ''
      };
      expect(() => _revenueService.revenueService.validateTransaction(invalidData)).toThrow(_errorHandler.AppError);
    });
    it('should throw error for invalid currency', () => {
      const invalidData = {
        amount: 1000,
        source: 'Direct Sales',
        currency: 'INVALID'
      };
      expect(() => _revenueService.revenueService.validateTransaction(invalidData)).toThrow(_errorHandler.AppError);
    });
    it('should accept valid currencies', () => {
      const validCurrencies = ['USD', 'EUR', 'GBP', 'CAD', 'AUD', 'JPY', 'CNY', 'INR'];
      validCurrencies.forEach(currency => {
        const data = {
          amount: 1000,
          source: 'Direct Sales',
          currency
        };
        expect(_revenueService.revenueService.validateTransaction(data)).toBe(true);
      });
    });
  });
  describe('getRevenueTrend', () => {
    it('should calculate revenue trend for last 30 days', async () => {
      const today = new Date();
      const yesterday = new Date(today.getTime() - 24 * 60 * 60 * 1000);
      const twoDaysAgo = new Date(today.getTime() - 2 * 24 * 60 * 60 * 1000);
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales',
        receivedAt: twoDaysAgo
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 2000,
        source: 'Sales',
        receivedAt: yesterday
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1500,
        source: 'Sales',
        receivedAt: today
      });
      const trend = await _revenueService.revenueService.getRevenueTrend(businessId, 30);
      expect(trend.length).toBeGreaterThan(0);
      expect(trend[trend.length - 1].revenue).toBe(1500);
      expect(trend[trend.length - 1].businessOwnerShare).toBe(1350);
      expect(trend[trend.length - 1].citadelFundShare).toBe(150);
    });
    it('should return empty trend for business with no transactions', async () => {
      const trend = await _revenueService.revenueService.getRevenueTrend(businessId2, 30);
      expect(trend).toHaveLength(0);
    });
    it('should group transactions by date', async () => {
      const date1 = new Date('2024-01-01');
      const date1Later = new Date('2024-01-01T12:00:00');
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales 1',
        receivedAt: date1
      });
      await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 500,
        source: 'Sales 2',
        receivedAt: date1Later
      });
      const trend = await _revenueService.revenueService.getRevenueTrend(businessId, 30);

      // Should have one entry for 2024-01-01 with combined revenue
      const jan1Entry = trend.find(t => t.date === '2024-01-01');
      expect(jan1Entry?.revenue).toBe(1500);
    });
  });
  describe('Transaction History Tracking', () => {
    it('should maintain transaction history with timestamps', async () => {
      const before = new Date();
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales'
      });
      const after = new Date();
      expect(transaction.createdAt.getTime()).toBeGreaterThanOrEqual(before.getTime());
      expect(transaction.createdAt.getTime()).toBeLessThanOrEqual(after.getTime());
    });
    it('should track allocation timestamps', async () => {
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        source: 'Sales'
      });
      const allocation = await _revenueService.revenueService.getAllocation(transaction.id);
      expect(allocation?.allocatedAt).toBeDefined();
      expect(allocation?.allocatedAt instanceof Date).toBe(true);
    });
  });
  describe('Revenue Allocation Accuracy', () => {
    it('should maintain 90/10 split across multiple transactions', async () => {
      const amounts = [100, 250, 1000, 5000];
      for (const amount of amounts) {
        await _revenueService.revenueService.recordTransaction(businessId, {
          amount,
          source: 'Sales'
        });
      }
      const totals = await _revenueService.revenueService.getTotalAllocations(businessId);
      const expectedTotal = amounts.reduce((a, b) => a + b, 0);
      expect(totals.totalBusinessOwnerAmount).toBe(expectedTotal * 0.9);
      expect(totals.totalCitadelFundAmount).toBe(expectedTotal * 0.1);
      expect(totals.totalBusinessOwnerAmount + totals.totalCitadelFundAmount).toBe(expectedTotal);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmV2ZW51ZVNlcnZpY2UiLCJyZXF1aXJlIiwiX2Vycm9ySGFuZGxlciIsImRlc2NyaWJlIiwiYnVzaW5lc3NJZCIsImJ1c2luZXNzSWQyIiwiYmVmb3JlRWFjaCIsImplc3QiLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJ0cmFuc2FjdGlvbkRhdGEiLCJhbW91bnQiLCJzb3VyY2UiLCJjdXJyZW5jeSIsInRyYW5zYWN0aW9uIiwicmV2ZW51ZVNlcnZpY2UiLCJyZWNvcmRUcmFuc2FjdGlvbiIsImV4cGVjdCIsInRvQmVEZWZpbmVkIiwiaWQiLCJ0b0JlIiwic3RhdHVzIiwiY3JlYXRlZEF0IiwicmVjZWl2ZWREYXRlIiwiRGF0ZSIsInJlY2VpdmVkQXQiLCJ0b0VxdWFsIiwiYWxsb2NhdGlvbiIsImdldEFsbG9jYXRpb24iLCJidXNpbmVzc093bmVyQW1vdW50IiwiY2l0YWRlbEZ1bmRBbW91bnQiLCJyZXN1bHQiLCJnZXRUcmFuc2FjdGlvbnMiLCJ0cmFuc2FjdGlvbnMiLCJ0b0hhdmVMZW5ndGgiLCJ0b3RhbCIsInBhZ2UiLCJwYWdlU2l6ZSIsInRvdGFsUGFnZXMiLCJpIiwicGFnZTEiLCJwYWdlMiIsInJlc3VsdDEiLCJyZXN1bHQyIiwicmVjb3JkZWQiLCJyZXRyaWV2ZWQiLCJnZXRUcmFuc2FjdGlvbkJ5SWQiLCJmYWtlSWQiLCJyZWplY3RzIiwidG9UaHJvdyIsIkFwcEVycm9yIiwiYnJlYWtkb3duIiwiZ2V0QnJlYWtkb3duIiwidG90YWxSZXZlbnVlIiwiYnVzaW5lc3NPd25lclNoYXJlIiwiY2l0YWRlbEZ1bmRTaGFyZSIsImRhdGUxIiwiZGF0ZTIiLCJkYXRlMyIsInRyYW5zYWN0aW9uSWQiLCJ0b0JlTnVsbCIsImFsbG9jYXRpb25zIiwiZ2V0QWxsb2NhdGlvbnMiLCJ0b3RhbHMiLCJnZXRUb3RhbEFsbG9jYXRpb25zIiwidG90YWxCdXNpbmVzc093bmVyQW1vdW50IiwidG90YWxDaXRhZGVsRnVuZEFtb3VudCIsInRvdGFsVHJhbnNhY3Rpb25zIiwidXBkYXRlZCIsInVwZGF0ZVRyYW5zYWN0aW9uU3RhdHVzIiwic3RhdHMiLCJnZXRTdGF0aXN0aWNzIiwidHJhbnNhY3Rpb25Db3VudCIsImF2ZXJhZ2VUcmFuc2FjdGlvbiIsInRvQmVDbG9zZVRvIiwibGFyZ2VzdFRyYW5zYWN0aW9uIiwic21hbGxlc3RUcmFuc2FjdGlvbiIsImJ1c2luZXNzT3duZXJUb3RhbCIsImNpdGFkZWxGdW5kVG90YWwiLCJ2YWxpZERhdGEiLCJ2YWxpZGF0ZVRyYW5zYWN0aW9uIiwiaW52YWxpZERhdGEiLCJ2YWxpZEN1cnJlbmNpZXMiLCJmb3JFYWNoIiwiZGF0YSIsInRvZGF5IiwieWVzdGVyZGF5IiwiZ2V0VGltZSIsInR3b0RheXNBZ28iLCJ0cmVuZCIsImdldFJldmVudWVUcmVuZCIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsInJldmVudWUiLCJkYXRlMUxhdGVyIiwiamFuMUVudHJ5IiwiZmluZCIsInQiLCJkYXRlIiwiYmVmb3JlIiwiYWZ0ZXIiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwidG9CZUxlc3NUaGFuT3JFcXVhbCIsImFsbG9jYXRlZEF0IiwiYW1vdW50cyIsImV4cGVjdGVkVG90YWwiLCJyZWR1Y2UiLCJhIiwiYiJdLCJzb3VyY2VzIjpbInJldmVudWUtc2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJldmVudWVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvcmV2ZW51ZS5zZXJ2aWNlLmpzJztcclxuaW1wb3J0IHsgUmV2ZW51ZVRyYW5zYWN0aW9uLCBSZXZlbnVlQWxsb2NhdGlvbiB9IGZyb20gJy4uL3R5cGVzL2luZGV4LmpzJztcclxuaW1wb3J0IHsgQXBwRXJyb3IgfSBmcm9tICcuLi9taWRkbGV3YXJlL2Vycm9ySGFuZGxlci5qcyc7XHJcblxyXG5kZXNjcmliZSgnUmV2ZW51ZSBTZXJ2aWNlJywgKCkgPT4ge1xyXG4gIGNvbnN0IGJ1c2luZXNzSWQgPSAnNTUwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAxJztcclxuICBjb25zdCBidXNpbmVzc0lkMiA9ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDInO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIC8vIENsZWFyIGFueSBwcmV2aW91cyB0ZXN0IGRhdGFcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncmVjb3JkVHJhbnNhY3Rpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJlY29yZCBhIHJldmVudWUgdHJhbnNhY3Rpb24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkRhdGEgPSB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLjUwLFxyXG4gICAgICAgIHNvdXJjZTogJ0RpcmVjdCBTYWxlcycsXHJcbiAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB0cmFuc2FjdGlvbkRhdGEpO1xyXG5cclxuICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodHJhbnNhY3Rpb24uaWQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdCh0cmFuc2FjdGlvbi5idXNpbmVzc0lkKS50b0JlKGJ1c2luZXNzSWQpO1xyXG4gICAgICBleHBlY3QodHJhbnNhY3Rpb24uYW1vdW50KS50b0JlKDEwMDAuNTApO1xyXG4gICAgICBleHBlY3QodHJhbnNhY3Rpb24uc291cmNlKS50b0JlKCdEaXJlY3QgU2FsZXMnKTtcclxuICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uLmN1cnJlbmN5KS50b0JlKCdVU0QnKTtcclxuICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uLnN0YXR1cykudG9CZSgnY29tcGxldGVkJyk7XHJcbiAgICAgIGV4cGVjdCh0cmFuc2FjdGlvbi5jcmVhdGVkQXQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlY29yZCB0cmFuc2FjdGlvbiB3aXRoIGRlZmF1bHQgY3VycmVuY3kgVVNEJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkRhdGEgPSB7XHJcbiAgICAgICAgYW1vdW50OiA1MDAsXHJcbiAgICAgICAgc291cmNlOiAnT25saW5lIFBheW1lbnQnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB0cmFuc2FjdGlvbkRhdGEpO1xyXG5cclxuICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uLmN1cnJlbmN5KS50b0JlKCdVU0QnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVjb3JkIHRyYW5zYWN0aW9uIHdpdGggcHJvdmlkZWQgcmVjZWl2ZWRBdCBkYXRlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZWNlaXZlZERhdGUgPSBuZXcgRGF0ZSgnMjAyNC0wMS0xNScpO1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkRhdGEgPSB7XHJcbiAgICAgICAgYW1vdW50OiA3NTAsXHJcbiAgICAgICAgc291cmNlOiAnU2VydmljZSBGZWUnLFxyXG4gICAgICAgIHJlY2VpdmVkQXQ6IHJlY2VpdmVkRGF0ZSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwgdHJhbnNhY3Rpb25EYXRhKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0cmFuc2FjdGlvbi5yZWNlaXZlZEF0KS50b0VxdWFsKHJlY2VpdmVkRGF0ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGF1dG9tYXRpY2FsbHkgY3JlYXRlIGFsbG9jYXRpb24gZm9yIHJlY29yZGVkIHRyYW5zYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkRhdGEgPSB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ0RpcmVjdCBTYWxlcycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHRyYW5zYWN0aW9uRGF0YSk7XHJcbiAgICAgIGNvbnN0IGFsbG9jYXRpb24gPSBhd2FpdCByZXZlbnVlU2VydmljZS5nZXRBbGxvY2F0aW9uKHRyYW5zYWN0aW9uLmlkKTtcclxuXHJcbiAgICAgIGV4cGVjdChhbGxvY2F0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoYWxsb2NhdGlvbj8uYnVzaW5lc3NPd25lckFtb3VudCkudG9CZSg5MDApOyAvLyA5MCVcclxuICAgICAgZXhwZWN0KGFsbG9jYXRpb24/LmNpdGFkZWxGdW5kQW1vdW50KS50b0JlKDEwMCk7IC8vIDEwJVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRUcmFuc2FjdGlvbnMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHRyYW5zYWN0aW9ucyBmb3IgYSBidXNpbmVzcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gUmVjb3JkIG11bHRpcGxlIHRyYW5zYWN0aW9uc1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzIDEnLFxyXG4gICAgICB9KTtcclxuICAgICAgYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogMjAwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAyJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXZlbnVlU2VydmljZS5nZXRUcmFuc2FjdGlvbnMoYnVzaW5lc3NJZCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnRyYW5zYWN0aW9ucykudG9IYXZlTGVuZ3RoKDIpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsKS50b0JlKDIpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnBhZ2UpLnRvQmUoMSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucGFnZVNpemUpLnRvQmUoMTApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsUGFnZXMpLnRvQmUoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgcGFnaW5hdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gUmVjb3JkIDE1IHRyYW5zYWN0aW9uc1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE1OyBpKyspIHtcclxuICAgICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgICBhbW91bnQ6IDEwMCAqIChpICsgMSksXHJcbiAgICAgICAgICBzb3VyY2U6IGBTYWxlcyAke2kgKyAxfWAsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHBhZ2UxID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0VHJhbnNhY3Rpb25zKGJ1c2luZXNzSWQsIDEsIDEwKTtcclxuICAgICAgY29uc3QgcGFnZTIgPSBhd2FpdCByZXZlbnVlU2VydmljZS5nZXRUcmFuc2FjdGlvbnMoYnVzaW5lc3NJZCwgMiwgMTApO1xyXG5cclxuICAgICAgZXhwZWN0KHBhZ2UxLnRyYW5zYWN0aW9ucykudG9IYXZlTGVuZ3RoKDEwKTtcclxuICAgICAgZXhwZWN0KHBhZ2UyLnRyYW5zYWN0aW9ucykudG9IYXZlTGVuZ3RoKDUpO1xyXG4gICAgICBleHBlY3QocGFnZTEudG90YWxQYWdlcykudG9CZSgyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IGZvciBidXNpbmVzcyB3aXRoIG5vIHRyYW5zYWN0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0VHJhbnNhY3Rpb25zKGJ1c2luZXNzSWQyKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQudHJhbnNhY3Rpb25zKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWwpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIG9ubHkgcmV0dXJuIHRyYW5zYWN0aW9ucyBmb3Igc3BlY2lmaWVkIGJ1c2luZXNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQyLCB7XHJcbiAgICAgICAgYW1vdW50OiAyMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQxID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0VHJhbnNhY3Rpb25zKGJ1c2luZXNzSWQpO1xyXG4gICAgICBjb25zdCByZXN1bHQyID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0VHJhbnNhY3Rpb25zKGJ1c2luZXNzSWQyKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQxLnRyYW5zYWN0aW9ucykudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Mi50cmFuc2FjdGlvbnMpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdDEudHJhbnNhY3Rpb25zWzBdLmJ1c2luZXNzSWQpLnRvQmUoYnVzaW5lc3NJZCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQyLnRyYW5zYWN0aW9uc1swXS5idXNpbmVzc0lkKS50b0JlKGJ1c2luZXNzSWQyKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0VHJhbnNhY3Rpb25CeUlkJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhIHRyYW5zYWN0aW9uIGJ5IElEJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkRhdGEgPSB7XHJcbiAgICAgICAgYW1vdW50OiAxNTAwLFxyXG4gICAgICAgIHNvdXJjZTogJ0RpcmVjdCBTYWxlcycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZWNvcmRlZCA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHRyYW5zYWN0aW9uRGF0YSk7XHJcbiAgICAgIGNvbnN0IHJldHJpZXZlZCA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLmdldFRyYW5zYWN0aW9uQnlJZChyZWNvcmRlZC5pZCk7XHJcblxyXG4gICAgICBleHBlY3QocmV0cmlldmVkLmlkKS50b0JlKHJlY29yZGVkLmlkKTtcclxuICAgICAgZXhwZWN0KHJldHJpZXZlZC5hbW91bnQpLnRvQmUoMTUwMCk7XHJcbiAgICAgIGV4cGVjdChyZXRyaWV2ZWQuc291cmNlKS50b0JlKCdEaXJlY3QgU2FsZXMnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIG5vbi1leGlzdGVudCB0cmFuc2FjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZmFrZUlkID0gJzU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDA5OSc7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QocmV2ZW51ZVNlcnZpY2UuZ2V0VHJhbnNhY3Rpb25CeUlkKGZha2VJZCkpLnJlamVjdHMudG9UaHJvdyhBcHBFcnJvcik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldEJyZWFrZG93bicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHJldmVudWUgYnJlYWtkb3duIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogMTAwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAxJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDIwMDAsXHJcbiAgICAgICAgc291cmNlOiAnU2FsZXMgMicsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgYnJlYWtkb3duID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0QnJlYWtkb3duKGJ1c2luZXNzSWQpO1xyXG5cclxuICAgICAgZXhwZWN0KGJyZWFrZG93bi50b3RhbFJldmVudWUpLnRvQmUoMzAwMCk7XHJcbiAgICAgIGV4cGVjdChicmVha2Rvd24uYnVzaW5lc3NPd25lclNoYXJlKS50b0JlKDI3MDApOyAvLyA5MCVcclxuICAgICAgZXhwZWN0KGJyZWFrZG93bi5jaXRhZGVsRnVuZFNoYXJlKS50b0JlKDMwMCk7IC8vIDEwJVxyXG4gICAgICBleHBlY3QoYnJlYWtkb3duLmN1cnJlbmN5KS50b0JlKCdVU0QnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZmlsdGVyIHRyYW5zYWN0aW9ucyBieSBkYXRlIHJhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRlMSA9IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyk7XHJcbiAgICAgIGNvbnN0IGRhdGUyID0gbmV3IERhdGUoJzIwMjQtMDItMDEnKTtcclxuICAgICAgY29uc3QgZGF0ZTMgPSBuZXcgRGF0ZSgnMjAyNC0wMy0wMScpO1xyXG5cclxuICAgICAgYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogMTAwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAxJyxcclxuICAgICAgICByZWNlaXZlZEF0OiBkYXRlMSxcclxuICAgICAgfSk7XHJcbiAgICAgIGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDIwMDAsXHJcbiAgICAgICAgc291cmNlOiAnU2FsZXMgMicsXHJcbiAgICAgICAgcmVjZWl2ZWRBdDogZGF0ZTIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAzMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzIDMnLFxyXG4gICAgICAgIHJlY2VpdmVkQXQ6IGRhdGUzLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGJyZWFrZG93biA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLmdldEJyZWFrZG93bihcclxuICAgICAgICBidXNpbmVzc0lkLFxyXG4gICAgICAgIG5ldyBEYXRlKCcyMDI0LTAxLTE1JyksXHJcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDItMTUnKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KGJyZWFrZG93bi50b3RhbFJldmVudWUpLnRvQmUoMjAwMCk7XHJcbiAgICAgIGV4cGVjdChicmVha2Rvd24uYnVzaW5lc3NPd25lclNoYXJlKS50b0JlKDE4MDApO1xyXG4gICAgICBleHBlY3QoYnJlYWtkb3duLmNpdGFkZWxGdW5kU2hhcmUpLnRvQmUoMjAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHplcm8gYnJlYWtkb3duIGZvciBidXNpbmVzcyB3aXRoIG5vIHRyYW5zYWN0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYnJlYWtkb3duID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0QnJlYWtkb3duKGJ1c2luZXNzSWQyKTtcclxuXHJcbiAgICAgIGV4cGVjdChicmVha2Rvd24udG90YWxSZXZlbnVlKS50b0JlKDApO1xyXG4gICAgICBleHBlY3QoYnJlYWtkb3duLmJ1c2luZXNzT3duZXJTaGFyZSkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KGJyZWFrZG93bi5jaXRhZGVsRnVuZFNoYXJlKS50b0JlKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRBbGxvY2F0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhbGxvY2F0aW9uIGZvciBhIHRyYW5zYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDEwMDAsXHJcbiAgICAgICAgc291cmNlOiAnU2FsZXMnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGFsbG9jYXRpb24gPSBhd2FpdCByZXZlbnVlU2VydmljZS5nZXRBbGxvY2F0aW9uKHRyYW5zYWN0aW9uLmlkKTtcclxuXHJcbiAgICAgIGV4cGVjdChhbGxvY2F0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoYWxsb2NhdGlvbj8udHJhbnNhY3Rpb25JZCkudG9CZSh0cmFuc2FjdGlvbi5pZCk7XHJcbiAgICAgIGV4cGVjdChhbGxvY2F0aW9uPy5idXNpbmVzc093bmVyQW1vdW50KS50b0JlKDkwMCk7XHJcbiAgICAgIGV4cGVjdChhbGxvY2F0aW9uPy5jaXRhZGVsRnVuZEFtb3VudCkudG9CZSgxMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBmb3Igbm9uLWV4aXN0ZW50IGFsbG9jYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZha2VJZCA9ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwOTknO1xyXG4gICAgICBjb25zdCBhbGxvY2F0aW9uID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0QWxsb2NhdGlvbihmYWtlSWQpO1xyXG5cclxuICAgICAgZXhwZWN0KGFsbG9jYXRpb24pLnRvQmVOdWxsKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldEFsbG9jYXRpb25zJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhbGwgYWxsb2NhdGlvbnMgZm9yIGEgYnVzaW5lc3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDEwMDAsXHJcbiAgICAgICAgc291cmNlOiAnU2FsZXMgMScsXHJcbiAgICAgIH0pO1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAyMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzIDInLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGFsbG9jYXRpb25zID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0QWxsb2NhdGlvbnMoYnVzaW5lc3NJZCk7XHJcblxyXG4gICAgICBleHBlY3QoYWxsb2NhdGlvbnMpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgZXhwZWN0KGFsbG9jYXRpb25zWzBdLmJ1c2luZXNzT3duZXJBbW91bnQpLnRvQmUoOTAwKTtcclxuICAgICAgZXhwZWN0KGFsbG9jYXRpb25zWzFdLmJ1c2luZXNzT3duZXJBbW91bnQpLnRvQmUoMTgwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3IgYnVzaW5lc3Mgd2l0aCBubyBhbGxvY2F0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYWxsb2NhdGlvbnMgPSBhd2FpdCByZXZlbnVlU2VydmljZS5nZXRBbGxvY2F0aW9ucyhidXNpbmVzc0lkMik7XHJcblxyXG4gICAgICBleHBlY3QoYWxsb2NhdGlvbnMpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0VG90YWxBbGxvY2F0aW9ucycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHRvdGFsIGFsbG9jYXRpb25zIGZvciBhIGJ1c2luZXNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzIDEnLFxyXG4gICAgICB9KTtcclxuICAgICAgYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogMjAwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAyJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0b3RhbHMgPSBhd2FpdCByZXZlbnVlU2VydmljZS5nZXRUb3RhbEFsbG9jYXRpb25zKGJ1c2luZXNzSWQpO1xyXG5cclxuICAgICAgZXhwZWN0KHRvdGFscy50b3RhbEJ1c2luZXNzT3duZXJBbW91bnQpLnRvQmUoMjcwMCk7IC8vICgxMDAwICsgMjAwMCkgKiAwLjlcclxuICAgICAgZXhwZWN0KHRvdGFscy50b3RhbENpdGFkZWxGdW5kQW1vdW50KS50b0JlKDMwMCk7IC8vICgxMDAwICsgMjAwMCkgKiAwLjFcclxuICAgICAgZXhwZWN0KHRvdGFscy50b3RhbFRyYW5zYWN0aW9ucykudG9CZSgyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHplcm8gdG90YWxzIGZvciBidXNpbmVzcyB3aXRoIG5vIHRyYW5zYWN0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdG90YWxzID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0VG90YWxBbGxvY2F0aW9ucyhidXNpbmVzc0lkMik7XHJcblxyXG4gICAgICBleHBlY3QodG90YWxzLnRvdGFsQnVzaW5lc3NPd25lckFtb3VudCkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KHRvdGFscy50b3RhbENpdGFkZWxGdW5kQW1vdW50KS50b0JlKDApO1xyXG4gICAgICBleHBlY3QodG90YWxzLnRvdGFsVHJhbnNhY3Rpb25zKS50b0JlKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCd1cGRhdGVUcmFuc2FjdGlvblN0YXR1cycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHRyYW5zYWN0aW9uIHN0YXR1cyB0byBwZW5kaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDEwMDAsXHJcbiAgICAgICAgc291cmNlOiAnU2FsZXMnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCByZXZlbnVlU2VydmljZS51cGRhdGVUcmFuc2FjdGlvblN0YXR1cyh0cmFuc2FjdGlvbi5pZCwgJ3BlbmRpbmcnKTtcclxuXHJcbiAgICAgIGV4cGVjdCh1cGRhdGVkLnN0YXR1cykudG9CZSgncGVuZGluZycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgdHJhbnNhY3Rpb24gc3RhdHVzIHRvIGZhaWxlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UudXBkYXRlVHJhbnNhY3Rpb25TdGF0dXModHJhbnNhY3Rpb24uaWQsICdmYWlsZWQnKTtcclxuXHJcbiAgICAgIGV4cGVjdCh1cGRhdGVkLnN0YXR1cykudG9CZSgnZmFpbGVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBub24tZXhpc3RlbnQgdHJhbnNhY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZha2VJZCA9ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwOTknO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIHJldmVudWVTZXJ2aWNlLnVwZGF0ZVRyYW5zYWN0aW9uU3RhdHVzKGZha2VJZCwgJ3BlbmRpbmcnKVxyXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhBcHBFcnJvcik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldFN0YXRpc3RpY3MnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSByZXZlbnVlIHN0YXRpc3RpY3MgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzIDEnLFxyXG4gICAgICB9KTtcclxuICAgICAgYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogMjAwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAyJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDUwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAzJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLmdldFN0YXRpc3RpY3MoYnVzaW5lc3NJZCk7XHJcblxyXG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxSZXZlbnVlKS50b0JlKDM1MDApO1xyXG4gICAgICBleHBlY3Qoc3RhdHMudHJhbnNhY3Rpb25Db3VudCkudG9CZSgzKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VUcmFuc2FjdGlvbikudG9CZUNsb3NlVG8oMTE2Ni42NywgMSk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5sYXJnZXN0VHJhbnNhY3Rpb24pLnRvQmUoMjAwMCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5zbWFsbGVzdFRyYW5zYWN0aW9uKS50b0JlKDUwMCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5idXNpbmVzc093bmVyVG90YWwpLnRvQmUoMzE1MCk7IC8vIDM1MDAgKiAwLjlcclxuICAgICAgZXhwZWN0KHN0YXRzLmNpdGFkZWxGdW5kVG90YWwpLnRvQmUoMzUwKTsgLy8gMzUwMCAqIDAuMVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgc3RhdGlzdGljcyBieSBkYXRlIHJhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRlMSA9IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyk7XHJcbiAgICAgIGNvbnN0IGRhdGUyID0gbmV3IERhdGUoJzIwMjQtMDItMDEnKTtcclxuICAgICAgY29uc3QgZGF0ZTMgPSBuZXcgRGF0ZSgnMjAyNC0wMy0wMScpO1xyXG5cclxuICAgICAgYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogMTAwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAxJyxcclxuICAgICAgICByZWNlaXZlZEF0OiBkYXRlMSxcclxuICAgICAgfSk7XHJcbiAgICAgIGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDIwMDAsXHJcbiAgICAgICAgc291cmNlOiAnU2FsZXMgMicsXHJcbiAgICAgICAgcmVjZWl2ZWRBdDogZGF0ZTIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAzMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzIDMnLFxyXG4gICAgICAgIHJlY2VpdmVkQXQ6IGRhdGUzLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0U3RhdGlzdGljcyhcclxuICAgICAgICBidXNpbmVzc0lkLFxyXG4gICAgICAgIG5ldyBEYXRlKCcyMDI0LTAxLTE1JyksXHJcbiAgICAgICAgbmV3IERhdGUoJzIwMjQtMDItMTUnKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsUmV2ZW51ZSkudG9CZSgyMDAwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnRyYW5zYWN0aW9uQ291bnQpLnRvQmUoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiB6ZXJvIHN0YXRpc3RpY3MgZm9yIGJ1c2luZXNzIHdpdGggbm8gdHJhbnNhY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLmdldFN0YXRpc3RpY3MoYnVzaW5lc3NJZDIpO1xyXG5cclxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsUmV2ZW51ZSkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnRyYW5zYWN0aW9uQ291bnQpLnRvQmUoMCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlVHJhbnNhY3Rpb24pLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlVHJhbnNhY3Rpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNvcnJlY3QgdHJhbnNhY3Rpb24gZGF0YScsICgpID0+IHtcclxuICAgICAgY29uc3QgdmFsaWREYXRhID0ge1xyXG4gICAgICAgIGFtb3VudDogMTAwMCxcclxuICAgICAgICBzb3VyY2U6ICdEaXJlY3QgU2FsZXMnLFxyXG4gICAgICAgIGN1cnJlbmN5OiAnVVNEJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXZlbnVlU2VydmljZS52YWxpZGF0ZVRyYW5zYWN0aW9uKHZhbGlkRGF0YSkpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBuZWdhdGl2ZSBhbW91bnQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0ge1xyXG4gICAgICAgIGFtb3VudDogLTEwMCxcclxuICAgICAgICBzb3VyY2U6ICdEaXJlY3QgU2FsZXMnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZXhwZWN0KCgpID0+IHJldmVudWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNhY3Rpb24oaW52YWxpZERhdGEpKS50b1Rocm93KEFwcEVycm9yKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIHplcm8gYW1vdW50JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHtcclxuICAgICAgICBhbW91bnQ6IDAsXHJcbiAgICAgICAgc291cmNlOiAnRGlyZWN0IFNhbGVzJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGV4cGVjdCgoKSA9PiByZXZlbnVlU2VydmljZS52YWxpZGF0ZVRyYW5zYWN0aW9uKGludmFsaWREYXRhKSkudG9UaHJvdyhBcHBFcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBtaXNzaW5nIHNvdXJjZScsICgpID0+IHtcclxuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBleHBlY3QoKCkgPT4gcmV2ZW51ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2FjdGlvbihpbnZhbGlkRGF0YSkpLnRvVGhyb3coQXBwRXJyb3IpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgaW52YWxpZCBjdXJyZW5jeScsICgpID0+IHtcclxuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ0RpcmVjdCBTYWxlcycsXHJcbiAgICAgICAgY3VycmVuY3k6ICdJTlZBTElEJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGV4cGVjdCgoKSA9PiByZXZlbnVlU2VydmljZS52YWxpZGF0ZVRyYW5zYWN0aW9uKGludmFsaWREYXRhKSkudG9UaHJvdyhBcHBFcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBjdXJyZW5jaWVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWxpZEN1cnJlbmNpZXMgPSBbJ1VTRCcsICdFVVInLCAnR0JQJywgJ0NBRCcsICdBVUQnLCAnSlBZJywgJ0NOWScsICdJTlInXTtcclxuXHJcbiAgICAgIHZhbGlkQ3VycmVuY2llcy5mb3JFYWNoKChjdXJyZW5jeSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICBhbW91bnQ6IDEwMDAsXHJcbiAgICAgICAgICBzb3VyY2U6ICdEaXJlY3QgU2FsZXMnLFxyXG4gICAgICAgICAgY3VycmVuY3ksXHJcbiAgICAgICAgfTtcclxuICAgICAgICBleHBlY3QocmV2ZW51ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2FjdGlvbihkYXRhKSkudG9CZSh0cnVlKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldFJldmVudWVUcmVuZCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHJldmVudWUgdHJlbmQgZm9yIGxhc3QgMzAgZGF5cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSh0b2RheS5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICAgICAgY29uc3QgdHdvRGF5c0FnbyA9IG5ldyBEYXRlKHRvZGF5LmdldFRpbWUoKSAtIDIgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuXHJcbiAgICAgIGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDEwMDAsXHJcbiAgICAgICAgc291cmNlOiAnU2FsZXMnLFxyXG4gICAgICAgIHJlY2VpdmVkQXQ6IHR3b0RheXNBZ28sXHJcbiAgICAgIH0pO1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAyMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzJyxcclxuICAgICAgICByZWNlaXZlZEF0OiB5ZXN0ZXJkYXksXHJcbiAgICAgIH0pO1xyXG4gICAgICBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAxNTAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzJyxcclxuICAgICAgICByZWNlaXZlZEF0OiB0b2RheSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB0cmVuZCA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLmdldFJldmVudWVUcmVuZChidXNpbmVzc0lkLCAzMCk7XHJcblxyXG4gICAgICBleHBlY3QodHJlbmQubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdCh0cmVuZFt0cmVuZC5sZW5ndGggLSAxXS5yZXZlbnVlKS50b0JlKDE1MDApO1xyXG4gICAgICBleHBlY3QodHJlbmRbdHJlbmQubGVuZ3RoIC0gMV0uYnVzaW5lc3NPd25lclNoYXJlKS50b0JlKDEzNTApO1xyXG4gICAgICBleHBlY3QodHJlbmRbdHJlbmQubGVuZ3RoIC0gMV0uY2l0YWRlbEZ1bmRTaGFyZSkudG9CZSgxNTApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgdHJlbmQgZm9yIGJ1c2luZXNzIHdpdGggbm8gdHJhbnNhY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmVuZCA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLmdldFJldmVudWVUcmVuZChidXNpbmVzc0lkMiwgMzApO1xyXG5cclxuICAgICAgZXhwZWN0KHRyZW5kKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGdyb3VwIHRyYW5zYWN0aW9ucyBieSBkYXRlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRlMSA9IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyk7XHJcbiAgICAgIGNvbnN0IGRhdGUxTGF0ZXIgPSBuZXcgRGF0ZSgnMjAyNC0wMS0wMVQxMjowMDowMCcpO1xyXG5cclxuICAgICAgYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogMTAwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAxJyxcclxuICAgICAgICByZWNlaXZlZEF0OiBkYXRlMSxcclxuICAgICAgfSk7XHJcbiAgICAgIGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDUwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcyAyJyxcclxuICAgICAgICByZWNlaXZlZEF0OiBkYXRlMUxhdGVyLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRyZW5kID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0UmV2ZW51ZVRyZW5kKGJ1c2luZXNzSWQsIDMwKTtcclxuXHJcbiAgICAgIC8vIFNob3VsZCBoYXZlIG9uZSBlbnRyeSBmb3IgMjAyNC0wMS0wMSB3aXRoIGNvbWJpbmVkIHJldmVudWVcclxuICAgICAgY29uc3QgamFuMUVudHJ5ID0gdHJlbmQuZmluZCgodCkgPT4gdC5kYXRlID09PSAnMjAyNC0wMS0wMScpO1xyXG4gICAgICBleHBlY3QoamFuMUVudHJ5Py5yZXZlbnVlKS50b0JlKDE1MDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdUcmFuc2FjdGlvbiBIaXN0b3J5IFRyYWNraW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiB0cmFuc2FjdGlvbiBoaXN0b3J5IHdpdGggdGltZXN0YW1wcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYmVmb3JlID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCByZXZlbnVlU2VydmljZS5yZWNvcmRUcmFuc2FjdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAwLFxyXG4gICAgICAgIHNvdXJjZTogJ1NhbGVzJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IGFmdGVyID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0cmFuc2FjdGlvbi5jcmVhdGVkQXQuZ2V0VGltZSgpKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKGJlZm9yZS5nZXRUaW1lKCkpO1xyXG4gICAgICBleHBlY3QodHJhbnNhY3Rpb24uY3JlYXRlZEF0LmdldFRpbWUoKSkudG9CZUxlc3NUaGFuT3JFcXVhbChhZnRlci5nZXRUaW1lKCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBhbGxvY2F0aW9uIHRpbWVzdGFtcHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogMTAwMCxcclxuICAgICAgICBzb3VyY2U6ICdTYWxlcycsXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBhbGxvY2F0aW9uID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0QWxsb2NhdGlvbih0cmFuc2FjdGlvbi5pZCk7XHJcblxyXG4gICAgICBleHBlY3QoYWxsb2NhdGlvbj8uYWxsb2NhdGVkQXQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChhbGxvY2F0aW9uPy5hbGxvY2F0ZWRBdCBpbnN0YW5jZW9mIERhdGUpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1JldmVudWUgQWxsb2NhdGlvbiBBY2N1cmFjeScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gOTAvMTAgc3BsaXQgYWNyb3NzIG11bHRpcGxlIHRyYW5zYWN0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYW1vdW50cyA9IFsxMDAsIDI1MCwgMTAwMCwgNTAwMF07XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGFtb3VudCBvZiBhbW91bnRzKSB7XHJcbiAgICAgICAgYXdhaXQgcmV2ZW51ZVNlcnZpY2UucmVjb3JkVHJhbnNhY3Rpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgICAgYW1vdW50LFxyXG4gICAgICAgICAgc291cmNlOiAnU2FsZXMnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0b3RhbHMgPSBhd2FpdCByZXZlbnVlU2VydmljZS5nZXRUb3RhbEFsbG9jYXRpb25zKGJ1c2luZXNzSWQpO1xyXG4gICAgICBjb25zdCBleHBlY3RlZFRvdGFsID0gYW1vdW50cy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0b3RhbHMudG90YWxCdXNpbmVzc093bmVyQW1vdW50KS50b0JlKGV4cGVjdGVkVG90YWwgKiAwLjkpO1xyXG4gICAgICBleHBlY3QodG90YWxzLnRvdGFsQ2l0YWRlbEZ1bmRBbW91bnQpLnRvQmUoZXhwZWN0ZWRUb3RhbCAqIDAuMSk7XHJcbiAgICAgIGV4cGVjdCh0b3RhbHMudG90YWxCdXNpbmVzc093bmVyQW1vdW50ICsgdG90YWxzLnRvdGFsQ2l0YWRlbEZ1bmRBbW91bnQpLnRvQmUoZXhwZWN0ZWRUb3RhbCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7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