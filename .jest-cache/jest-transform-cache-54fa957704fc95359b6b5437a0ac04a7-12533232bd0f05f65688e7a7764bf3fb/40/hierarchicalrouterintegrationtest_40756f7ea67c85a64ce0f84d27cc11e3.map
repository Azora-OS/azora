{"version":3,"names":["_hierarchicalRouter","require","_queryClassifier","_localLlmService","_rapSystem","_redisCacheManager","_routingMetricsTracker","_types","_client","describe","router","prisma","config","beforeEach","PrismaClient","localLLMEnabled","localLLMModel","localLLMQuantization","rapEnabled","knowledgeOceanUrl","internalSourceWeight","externalSourceWeight","externalLLMEnabled","externalLLMProvider","externalLLMModel","cacheEnabled","cacheTTL","cacheMaxSize","costTrackingEnabled","costThreshold","latencyThreshold","fallbackOnLatency","redisUrl","process","env","REDIS_URL","redisKeyPrefix","classifier","QueryClassifier","localLLM","LocalLLMService","rapSystem","RAPSystem","maxContextTokens","maxRetrievalResults","externalLLMApiKey","OPENAI_API_KEY","embeddingApiKey","vectorDbApiKey","PINECONE_API_KEY","cache","RedisCacheManager","metrics","RoutingMetricsTracker","HierarchicalRouter","afterEach","$disconnect","it","query","userId","result","route","expect","toBeDefined","content","responseTime","toBeGreaterThan","cost","toBeGreaterThanOrEqual","classification","classify","classifiedAs","routedTo","RoutingTier","LOCAL_LLM","RAP_SYSTEM","EXTERNAL_LLM","toContain","confidence","toBeLessThanOrEqual","result1","result2","toBe","i","stats","getCacheStats","hits","misses","size","queries","getMetrics","health","getSystemHealth","overallSuccessRate","averageResponseTime","totalRequests","cacheHitRate","bestTier","getBestPerformingTier","cheapestTier","getCheapestTier","fastestTier","getFastestTier","setLatencyThreshold","setCostThreshold","setFallbackStrategy","tier","condition","threshold","nextTier","clearCache","resetMetrics","longQuery","repeat","results","Promise","all","map","q","toHaveLength","forEach","routingTier","simpleQuery","complexQuery"],"sources":["hierarchical-router-integration.test.ts"],"sourcesContent":["/**\r\n * Hierarchical Router Integration Tests\r\n * Tests for complete hierarchical AI routing flows\r\n */\r\n\r\nimport { HierarchicalRouter } from '../../services/ai-routing/hierarchical-router';\r\nimport { QueryClassifier } from '../../services/ai-routing/query-classifier';\r\nimport { LocalLLMService } from '../../services/ai-routing/local-llm-service';\r\nimport { RAPSystem } from '../../services/ai-routing/rap-system';\r\nimport { RedisCacheManager } from '../../services/ai-routing/redis-cache-manager';\r\nimport { RoutingMetricsTracker } from '../../services/ai-routing/routing-metrics-tracker';\r\nimport { AIQuery, RoutingTier, AIRoutingConfig } from '../../services/ai-routing/types';\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\ndescribe('Hierarchical Router Integration', () => {\r\n  let router: HierarchicalRouter;\r\n  let prisma: PrismaClient;\r\n  let config: AIRoutingConfig;\r\n\r\n  beforeEach(() => {\r\n    prisma = new PrismaClient();\r\n\r\n    config = {\r\n      localLLMEnabled: true,\r\n      localLLMModel: 'llama',\r\n      localLLMQuantization: 'q4',\r\n      rapEnabled: true,\r\n      knowledgeOceanUrl: 'http://localhost:8000',\r\n      internalSourceWeight: 0.7,\r\n      externalSourceWeight: 0.3,\r\n      externalLLMEnabled: true,\r\n      externalLLMProvider: 'openai',\r\n      externalLLMModel: 'gpt-4',\r\n      cacheEnabled: true,\r\n      cacheTTL: 3600,\r\n      cacheMaxSize: 1000,\r\n      costTrackingEnabled: true,\r\n      costThreshold: 0.10,\r\n      latencyThreshold: 3000,\r\n      fallbackOnLatency: true,\r\n      redisUrl: process.env.REDIS_URL || 'redis://localhost:6379',\r\n      redisKeyPrefix: 'ai-routing:'\r\n    };\r\n\r\n    // Initialize services\r\n    const classifier = new QueryClassifier();\r\n    const localLLM = new LocalLLMService();\r\n    const rapSystem = new RAPSystem({\r\n      internalSourceWeight: config.internalSourceWeight,\r\n      externalSourceWeight: config.externalSourceWeight,\r\n      maxContextTokens: 2000,\r\n      maxRetrievalResults: 10,\r\n      externalLLMProvider: config.externalLLMProvider as 'openai' | 'anthropic',\r\n      externalLLMModel: config.externalLLMModel,\r\n      externalLLMApiKey: process.env.OPENAI_API_KEY || '',\r\n      embeddingApiKey: process.env.OPENAI_API_KEY || '',\r\n      vectorDbApiKey: process.env.PINECONE_API_KEY || ''\r\n    });\r\n    const cache = new RedisCacheManager(config.redisUrl, config.redisKeyPrefix);\r\n    const metrics = new RoutingMetricsTracker(prisma);\r\n\r\n    router = new HierarchicalRouter(config, prisma, classifier, localLLM, rapSystem, cache, metrics);\r\n  });\r\n\r\n  afterEach(async () => {\r\n    await prisma.$disconnect();\r\n  });\r\n\r\n  describe('Complete Query Routing Flow', () => {\r\n    it('should route simple query through Local LLM', async () => {\r\n      const query: AIQuery = {\r\n        query: 'What is the capital of France?',\r\n        userId: 'test-user-1'\r\n      };\r\n\r\n      const result = await router.route(query);\r\n\r\n      expect(result).toBeDefined();\r\n      expect(result.content).toBeDefined();\r\n      expect(result.responseTime).toBeGreaterThan(0);\r\n      expect(result.cost).toBeGreaterThanOrEqual(0);\r\n    });\r\n\r\n    it('should classify and route moderate query', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Analyze the impact of climate change on global agriculture',\r\n        userId: 'test-user-2'\r\n      };\r\n\r\n      const classification = await router.classify(query);\r\n\r\n      expect(classification).toBeDefined();\r\n      expect(classification.classifiedAs).toBeDefined();\r\n      expect(classification.routedTo).toBeDefined();\r\n      expect([RoutingTier.LOCAL_LLM, RoutingTier.RAP_SYSTEM, RoutingTier.EXTERNAL_LLM]).toContain(\r\n        classification.routedTo\r\n      );\r\n    });\r\n\r\n    it('should classify complex query correctly', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Develop a comprehensive multi-year strategic plan for digital transformation that considers organizational culture, technology infrastructure, market dynamics, competitive landscape, regulatory environment, and long-term business sustainability implications',\r\n        userId: 'test-user-3'\r\n      };\r\n\r\n      const classification = await router.classify(query);\r\n\r\n      expect(classification.classifiedAs).toBeDefined();\r\n      expect(classification.confidence).toBeGreaterThan(0);\r\n      expect(classification.confidence).toBeLessThanOrEqual(1);\r\n    });\r\n  });\r\n\r\n  describe('Caching Behavior', () => {\r\n    it('should cache responses and return cached results', async () => {\r\n      const query: AIQuery = {\r\n        query: 'What is Python?',\r\n        userId: 'test-user-4'\r\n      };\r\n\r\n      // First request - should not be cached\r\n      const result1 = await router.route(query);\r\n      expect(result1).toBeDefined();\r\n\r\n      // Second request - should be cached\r\n      const result2 = await router.route(query);\r\n      expect(result2).toBeDefined();\r\n\r\n      // Both should have same content\r\n      expect(result1.content).toBe(result2.content);\r\n    });\r\n\r\n    it('should track cache statistics', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Hello world',\r\n        userId: 'test-user-5'\r\n      };\r\n\r\n      // Make multiple requests\r\n      for (let i = 0; i < 3; i++) {\r\n        await router.route(query);\r\n      }\r\n\r\n      const stats = await router.getCacheStats();\r\n\r\n      expect(stats).toBeDefined();\r\n      expect(stats.hits).toBeGreaterThanOrEqual(0);\r\n      expect(stats.misses).toBeGreaterThanOrEqual(0);\r\n      expect(stats.size).toBeGreaterThanOrEqual(0);\r\n    });\r\n  });\r\n\r\n  describe('Metrics Tracking', () => {\r\n    it('should track routing metrics', async () => {\r\n      const queries: AIQuery[] = [\r\n        { query: 'What is AI?', userId: 'user-1' },\r\n        { query: 'Analyze market trends', userId: 'user-2' },\r\n        { query: 'Develop strategic plan', userId: 'user-3' }\r\n      ];\r\n\r\n      for (const query of queries) {\r\n        await router.route(query);\r\n      }\r\n\r\n      const metrics = await router.getMetrics();\r\n\r\n      expect(metrics).toBeDefined();\r\n      expect(metrics[RoutingTier.LOCAL_LLM]).toBeDefined();\r\n      expect(metrics[RoutingTier.RAP_SYSTEM]).toBeDefined();\r\n      expect(metrics[RoutingTier.EXTERNAL_LLM]).toBeDefined();\r\n    });\r\n\r\n    it('should provide system health status', async () => {\r\n      const query: AIQuery = { query: 'Test query', userId: 'user-1' };\r\n\r\n      await router.route(query);\r\n\r\n      const health = await router.getSystemHealth();\r\n\r\n      expect(health).toBeDefined();\r\n      expect(health.overallSuccessRate).toBeGreaterThanOrEqual(0);\r\n      expect(health.overallSuccessRate).toBeLessThanOrEqual(100);\r\n      expect(health.averageResponseTime).toBeGreaterThanOrEqual(0);\r\n      expect(health.totalRequests).toBeGreaterThanOrEqual(0);\r\n      expect(health.cacheHitRate).toBeGreaterThanOrEqual(0);\r\n    });\r\n\r\n    it('should identify best performing tier', async () => {\r\n      const queries: AIQuery[] = [\r\n        { query: 'What is AI?', userId: 'user-1' },\r\n        { query: 'What is ML?', userId: 'user-2' },\r\n        { query: 'What is DL?', userId: 'user-3' }\r\n      ];\r\n\r\n      for (const query of queries) {\r\n        await router.route(query);\r\n      }\r\n\r\n      const bestTier = await router.getBestPerformingTier();\r\n\r\n      expect(bestTier).toBeDefined();\r\n      expect([RoutingTier.LOCAL_LLM, RoutingTier.RAP_SYSTEM, RoutingTier.EXTERNAL_LLM]).toContain(\r\n        bestTier\r\n      );\r\n    });\r\n\r\n    it('should identify cheapest tier', async () => {\r\n      const cheapestTier = await router.getCheapestTier();\r\n\r\n      expect(cheapestTier).toBeDefined();\r\n      expect([RoutingTier.LOCAL_LLM, RoutingTier.RAP_SYSTEM, RoutingTier.EXTERNAL_LLM]).toContain(\r\n        cheapestTier\r\n      );\r\n    });\r\n\r\n    it('should identify fastest tier', async () => {\r\n      const fastestTier = await router.getFastestTier();\r\n\r\n      expect(fastestTier).toBeDefined();\r\n      expect([RoutingTier.LOCAL_LLM, RoutingTier.RAP_SYSTEM, RoutingTier.EXTERNAL_LLM]).toContain(\r\n        fastestTier\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('Configuration Management', () => {\r\n    it('should allow updating latency thresholds', () => {\r\n      router.setLatencyThreshold(RoutingTier.LOCAL_LLM, 300);\r\n      router.setLatencyThreshold(RoutingTier.RAP_SYSTEM, 1500);\r\n      router.setLatencyThreshold(RoutingTier.EXTERNAL_LLM, 4000);\r\n\r\n      // Verify by making a request\r\n      expect(router).toBeDefined();\r\n    });\r\n\r\n    it('should allow updating cost thresholds', () => {\r\n      router.setCostThreshold(RoutingTier.LOCAL_LLM, 0);\r\n      router.setCostThreshold(RoutingTier.RAP_SYSTEM, 0.05);\r\n      router.setCostThreshold(RoutingTier.EXTERNAL_LLM, 0.15);\r\n\r\n      expect(router).toBeDefined();\r\n    });\r\n\r\n    it('should allow updating fallback strategies', () => {\r\n      router.setFallbackStrategy(RoutingTier.LOCAL_LLM, {\r\n        tier: RoutingTier.LOCAL_LLM,\r\n        condition: 'failure',\r\n        threshold: 0,\r\n        nextTier: RoutingTier.RAP_SYSTEM\r\n      });\r\n\r\n      expect(router).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('Cache Management', () => {\r\n    it('should clear cache', async () => {\r\n      const query: AIQuery = { query: 'Test query', userId: 'user-1' };\r\n\r\n      // Make a request to populate cache\r\n      await router.route(query);\r\n\r\n      // Clear cache\r\n      await router.clearCache();\r\n\r\n      // Verify cache is cleared\r\n      const stats = await router.getCacheStats();\r\n      expect(stats.size).toBe(0);\r\n    });\r\n  });\r\n\r\n  describe('Metrics Reset', () => {\r\n    it('should reset all metrics', async () => {\r\n      const query: AIQuery = { query: 'Test query', userId: 'user-1' };\r\n\r\n      // Make requests to populate metrics\r\n      await router.route(query);\r\n\r\n      // Reset metrics\r\n      await router.resetMetrics();\r\n\r\n      // Verify metrics are reset\r\n      const metrics = await router.getMetrics();\r\n      expect(metrics[RoutingTier.LOCAL_LLM].totalRequests).toBe(0);\r\n      expect(metrics[RoutingTier.RAP_SYSTEM].totalRequests).toBe(0);\r\n      expect(metrics[RoutingTier.EXTERNAL_LLM].totalRequests).toBe(0);\r\n    });\r\n  });\r\n\r\n  describe('Error Handling', () => {\r\n    it('should handle invalid queries gracefully', async () => {\r\n      const query: AIQuery = { query: '', userId: 'user-1' };\r\n\r\n      // Should not throw, but handle gracefully\r\n      const result = await router.route(query);\r\n      expect(result).toBeDefined();\r\n    });\r\n\r\n    it('should handle very long queries', async () => {\r\n      const longQuery = 'word '.repeat(1000);\r\n      const query: AIQuery = { query: longQuery, userId: 'user-1' };\r\n\r\n      const result = await router.route(query);\r\n      expect(result).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('Multi-Query Routing', () => {\r\n    it('should handle multiple concurrent queries', async () => {\r\n      const queries: AIQuery[] = [\r\n        { query: 'What is AI?', userId: 'user-1' },\r\n        { query: 'Analyze trends', userId: 'user-2' },\r\n        { query: 'Develop strategy', userId: 'user-3' }\r\n      ];\r\n\r\n      const results = await Promise.all(queries.map(q => router.route(q)));\r\n\r\n      expect(results).toHaveLength(3);\r\n      results.forEach(result => {\r\n        expect(result).toBeDefined();\r\n        expect(result.content).toBeDefined();\r\n        expect(result.routingTier).toBeDefined();\r\n      });\r\n    });\r\n\r\n    it('should maintain separate metrics for different query types', async () => {\r\n      const simpleQuery: AIQuery = { query: 'What is AI?', userId: 'user-1' };\r\n      const complexQuery: AIQuery = {\r\n        query: 'Develop comprehensive strategic plan',\r\n        userId: 'user-2'\r\n      };\r\n\r\n      await router.route(simpleQuery);\r\n      await router.route(complexQuery);\r\n\r\n      const metrics = await router.getMetrics();\r\n\r\n      // At least one tier should have requests\r\n      const totalRequests =\r\n        metrics[RoutingTier.LOCAL_LLM].totalRequests +\r\n        metrics[RoutingTier.RAP_SYSTEM].totalRequests +\r\n        metrics[RoutingTier.EXTERNAL_LLM].totalRequests;\r\n\r\n      expect(totalRequests).toBeGreaterThanOrEqual(2);\r\n    });\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}