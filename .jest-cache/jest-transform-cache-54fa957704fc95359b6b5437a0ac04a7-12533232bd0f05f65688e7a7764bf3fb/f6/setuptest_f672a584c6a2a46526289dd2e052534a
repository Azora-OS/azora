2a067663b7f72cd7ff36d16f0c35ecf9
"use strict";

var _index = require("../index");
var _ubuntuValidator = require("../validators/ubuntu-validator");
var _validationRulesEngine = require("../validators/validation-rules-engine");
/**
 * Setup Test - Verifies service structure is correctly configured
 */

describe('Constitutional AI Service Setup', () => {
  describe('Service Metadata', () => {
    it('should have correct service information', () => {
      expect(_index.SERVICE_INFO.name).toBe('Constitutional AI Service');
      expect(_index.SERVICE_INFO.version).toBe('1.0.0');
      expect(_index.SERVICE_INFO.description).toContain('Ubuntu principles');
    });
    it('should pass health check', () => {
      const health = (0, _index.healthCheck)();
      expect(health.status).toBe('healthy');
      expect(health.timestamp).toBeDefined();
    });
  });
  describe('Ubuntu Validator', () => {
    it('should instantiate with default config', () => {
      const validator = new _ubuntuValidator.UbuntuValidator();
      expect(validator).toBeDefined();
      const config = validator.getConfig();
      expect(config.collectiveBenefitWeight).toBeDefined();
      expect(config.knowledgeSharingWeight).toBeDefined();
      expect(config.inclusiveDesignWeight).toBeDefined();
    });
    it('should validate weights sum to 1.0', () => {
      expect(() => {
        new _ubuntuValidator.UbuntuValidator({
          collectiveBenefitWeight: 0.5,
          knowledgeSharingWeight: 0.3,
          inclusiveDesignWeight: 0.1 // Sum = 0.9, should fail
        });
      }).toThrow('weights must sum to 1.0');
    });
  });
  describe('Validation Rules Engine', () => {
    it('should initialize with default rules', () => {
      const engine = new _validationRulesEngine.ValidationRulesEngine();
      const summary = engine.getRulesSummary();
      expect(summary.total).toBeGreaterThan(0);
      expect(summary.enabled).toBeGreaterThan(0);
      expect(summary.byPrinciple).toBeDefined();
    });
    it('should have rules for all Ubuntu principles', () => {
      const engine = new _validationRulesEngine.ValidationRulesEngine();
      const summary = engine.getRulesSummary();
      expect(summary.byPrinciple['collective-benefit']).toBeGreaterThan(0);
      expect(summary.byPrinciple['knowledge-sharing']).toBeGreaterThan(0);
      expect(summary.byPrinciple['inclusive-design']).toBeGreaterThan(0);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW5kZXgiLCJyZXF1aXJlIiwiX3VidW50dVZhbGlkYXRvciIsIl92YWxpZGF0aW9uUnVsZXNFbmdpbmUiLCJkZXNjcmliZSIsIml0IiwiZXhwZWN0IiwiU0VSVklDRV9JTkZPIiwibmFtZSIsInRvQmUiLCJ2ZXJzaW9uIiwiZGVzY3JpcHRpb24iLCJ0b0NvbnRhaW4iLCJoZWFsdGgiLCJoZWFsdGhDaGVjayIsInN0YXR1cyIsInRpbWVzdGFtcCIsInRvQmVEZWZpbmVkIiwidmFsaWRhdG9yIiwiVWJ1bnR1VmFsaWRhdG9yIiwiY29uZmlnIiwiZ2V0Q29uZmlnIiwiY29sbGVjdGl2ZUJlbmVmaXRXZWlnaHQiLCJrbm93bGVkZ2VTaGFyaW5nV2VpZ2h0IiwiaW5jbHVzaXZlRGVzaWduV2VpZ2h0IiwidG9UaHJvdyIsImVuZ2luZSIsIlZhbGlkYXRpb25SdWxlc0VuZ2luZSIsInN1bW1hcnkiLCJnZXRSdWxlc1N1bW1hcnkiLCJ0b3RhbCIsInRvQmVHcmVhdGVyVGhhbiIsImVuYWJsZWQiLCJieVByaW5jaXBsZSJdLCJzb3VyY2VzIjpbInNldHVwLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFNldHVwIFRlc3QgLSBWZXJpZmllcyBzZXJ2aWNlIHN0cnVjdHVyZSBpcyBjb3JyZWN0bHkgY29uZmlndXJlZFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNFUlZJQ0VfSU5GTywgaGVhbHRoQ2hlY2sgfSBmcm9tICcuLi9pbmRleCc7XHJcbmltcG9ydCB7IFVidW50dVZhbGlkYXRvciB9IGZyb20gJy4uL3ZhbGlkYXRvcnMvdWJ1bnR1LXZhbGlkYXRvcic7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25SdWxlc0VuZ2luZSB9IGZyb20gJy4uL3ZhbGlkYXRvcnMvdmFsaWRhdGlvbi1ydWxlcy1lbmdpbmUnO1xyXG5cclxuZGVzY3JpYmUoJ0NvbnN0aXR1dGlvbmFsIEFJIFNlcnZpY2UgU2V0dXAnLCAoKSA9PiB7XHJcbiAgZGVzY3JpYmUoJ1NlcnZpY2UgTWV0YWRhdGEnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgY29ycmVjdCBzZXJ2aWNlIGluZm9ybWF0aW9uJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoU0VSVklDRV9JTkZPLm5hbWUpLnRvQmUoJ0NvbnN0aXR1dGlvbmFsIEFJIFNlcnZpY2UnKTtcclxuICAgICAgZXhwZWN0KFNFUlZJQ0VfSU5GTy52ZXJzaW9uKS50b0JlKCcxLjAuMCcpO1xyXG4gICAgICBleHBlY3QoU0VSVklDRV9JTkZPLmRlc2NyaXB0aW9uKS50b0NvbnRhaW4oJ1VidW50dSBwcmluY2lwbGVzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHBhc3MgaGVhbHRoIGNoZWNrJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBoZWFsdGggPSBoZWFsdGhDaGVjaygpO1xyXG4gICAgICBleHBlY3QoaGVhbHRoLnN0YXR1cykudG9CZSgnaGVhbHRoeScpO1xyXG4gICAgICBleHBlY3QoaGVhbHRoLnRpbWVzdGFtcCkudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnVWJ1bnR1IFZhbGlkYXRvcicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaW5zdGFudGlhdGUgd2l0aCBkZWZhdWx0IGNvbmZpZycsICgpID0+IHtcclxuICAgICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IFVidW50dVZhbGlkYXRvcigpO1xyXG4gICAgICBleHBlY3QodmFsaWRhdG9yKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY29uZmlnID0gdmFsaWRhdG9yLmdldENvbmZpZygpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLmNvbGxlY3RpdmVCZW5lZml0V2VpZ2h0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLmtub3dsZWRnZVNoYXJpbmdXZWlnaHQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuaW5jbHVzaXZlRGVzaWduV2VpZ2h0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSB3ZWlnaHRzIHN1bSB0byAxLjAnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgbmV3IFVidW50dVZhbGlkYXRvcih7XHJcbiAgICAgICAgICBjb2xsZWN0aXZlQmVuZWZpdFdlaWdodDogMC41LFxyXG4gICAgICAgICAga25vd2xlZGdlU2hhcmluZ1dlaWdodDogMC4zLFxyXG4gICAgICAgICAgaW5jbHVzaXZlRGVzaWduV2VpZ2h0OiAwLjEgLy8gU3VtID0gMC45LCBzaG91bGQgZmFpbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KS50b1Rocm93KCd3ZWlnaHRzIG11c3Qgc3VtIHRvIDEuMCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdWYWxpZGF0aW9uIFJ1bGVzIEVuZ2luZScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgcnVsZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVuZ2luZSA9IG5ldyBWYWxpZGF0aW9uUnVsZXNFbmdpbmUoKTtcclxuICAgICAgY29uc3Qgc3VtbWFyeSA9IGVuZ2luZS5nZXRSdWxlc1N1bW1hcnkoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzdW1tYXJ5LnRvdGFsKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChzdW1tYXJ5LmVuYWJsZWQpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuYnlQcmluY2lwbGUpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgcnVsZXMgZm9yIGFsbCBVYnVudHUgcHJpbmNpcGxlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgZW5naW5lID0gbmV3IFZhbGlkYXRpb25SdWxlc0VuZ2luZSgpO1xyXG4gICAgICBjb25zdCBzdW1tYXJ5ID0gZW5naW5lLmdldFJ1bGVzU3VtbWFyeSgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuYnlQcmluY2lwbGVbJ2NvbGxlY3RpdmUtYmVuZWZpdCddKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChzdW1tYXJ5LmJ5UHJpbmNpcGxlWydrbm93bGVkZ2Utc2hhcmluZyddKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChzdW1tYXJ5LmJ5UHJpbmNpcGxlWydpbmNsdXNpdmUtZGVzaWduJ10pLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUlBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGdCQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxzQkFBQSxHQUFBRixPQUFBO0FBTkE7QUFDQTtBQUNBOztBQU1BRyxRQUFRLENBQUMsaUNBQWlDLEVBQUUsTUFBTTtFQUNoREEsUUFBUSxDQUFDLGtCQUFrQixFQUFFLE1BQU07SUFDakNDLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxNQUFNO01BQ2xEQyxNQUFNLENBQUNDLG1CQUFZLENBQUNDLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUMsMkJBQTJCLENBQUM7TUFDM0RILE1BQU0sQ0FBQ0MsbUJBQVksQ0FBQ0csT0FBTyxDQUFDLENBQUNELElBQUksQ0FBQyxPQUFPLENBQUM7TUFDMUNILE1BQU0sQ0FBQ0MsbUJBQVksQ0FBQ0ksV0FBVyxDQUFDLENBQUNDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQztJQUNqRSxDQUFDLENBQUM7SUFFRlAsRUFBRSxDQUFDLDBCQUEwQixFQUFFLE1BQU07TUFDbkMsTUFBTVEsTUFBTSxHQUFHLElBQUFDLGtCQUFXLEVBQUMsQ0FBQztNQUM1QlIsTUFBTSxDQUFDTyxNQUFNLENBQUNFLE1BQU0sQ0FBQyxDQUFDTixJQUFJ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