{"version":3,"names":["request","require","app","describe","afterAll","done","close","it","response","get","expect","status","toBe","body","toHaveProperty","Array","isArray","data","newModel","name","type","capabilities","post","send","invalidModel","createResponse","modelId","id","orchestrationRequest","taskId","models","inputData","test","invalidRequest"],"sources":["ai-orchestrator.test.js"],"sourcesContent":["const request = require('supertest');\r\nconst app = require('../index.js');\r\n\r\ndescribe('AI Orchestrator Service', () => {\r\n  // Close the server after all tests\r\n  afterAll((done) => {\r\n    app.close(done);\r\n  });\r\n\r\n  describe('GET /health', () => {\r\n    it('should return health status', async () => {\r\n      const response = await request(app).get('/health');\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('status', 'healthy');\r\n      expect(response.body).toHaveProperty('service', 'ai-orchestrator');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/models', () => {\r\n    it('should return all AI models', async () => {\r\n      const response = await request(app).get('/api/models');\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('success', true);\r\n      expect(response.body).toHaveProperty('data');\r\n      expect(Array.isArray(response.body.data)).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('POST /api/models', () => {\r\n    it('should register a new AI model', async () => {\r\n      const newModel = {\r\n        name: 'Test AI Model',\r\n        type: 'test',\r\n        capabilities: ['testing']\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/models')\r\n        .send(newModel);\r\n\r\n      expect(response.status).toBe(201);\r\n      expect(response.body).toHaveProperty('success', true);\r\n      expect(response.body).toHaveProperty('data');\r\n      expect(response.body.data).toHaveProperty('id');\r\n      expect(response.body.data).toHaveProperty('name', newModel.name);\r\n      expect(response.body.data).toHaveProperty('type', newModel.type);\r\n    });\r\n\r\n    it('should return error for missing name', async () => {\r\n      const invalidModel = {\r\n        type: 'test'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/models')\r\n        .send(invalidModel);\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body).toHaveProperty('error');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/models/:modelId', () => {\r\n    it('should return a specific AI model', async () => {\r\n      // First, create a model to fetch\r\n      const newModel = {\r\n        name: 'Fetch Test Model',\r\n        type: 'test'\r\n      };\r\n\r\n      const createResponse = await request(app)\r\n        .post('/api/models')\r\n        .send(newModel);\r\n\r\n      const modelId = createResponse.body.data.id;\r\n\r\n      // Now fetch the model\r\n      const response = await request(app).get(`/api/models/${modelId}`);\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('success', true);\r\n      expect(response.body).toHaveProperty('data');\r\n      expect(response.body.data).toHaveProperty('id', modelId);\r\n      expect(response.body.data).toHaveProperty('name', newModel.name);\r\n    });\r\n\r\n    it('should return 404 for non-existent model', async () => {\r\n      const response = await request(app).get('/api/models/non-existent-id');\r\n      expect(response.status).toBe(404);\r\n      expect(response.body).toHaveProperty('error');\r\n    });\r\n  });\r\n\r\n  describe('POST /api/orchestrate', () => {\r\n    it('should start AI task orchestration', async () => {\r\n      // First, create a model to use\r\n      const newModel = {\r\n        name: 'Orchestration Test Model',\r\n        type: 'test'\r\n      };\r\n\r\n      const createResponse = await request(app)\r\n        .post('/api/models')\r\n        .send(newModel);\r\n\r\n      const modelId = createResponse.body.data.id;\r\n\r\n      // Now test orchestration\r\n      const orchestrationRequest = {\r\n        taskId: 'test-task-123',\r\n        models: [modelId],\r\n        inputData: { test: 'data' }\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/orchestrate')\r\n        .send(orchestrationRequest);\r\n\r\n      expect(response.status).toBe(202);\r\n      expect(response.body).toHaveProperty('success', true);\r\n      expect(response.body).toHaveProperty('data');\r\n      expect(response.body.data).toHaveProperty('status', 'pending');\r\n    });\r\n\r\n    it('should return error for missing models', async () => {\r\n      const invalidRequest = {\r\n        taskId: 'test-task-123'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/orchestrate')\r\n        .send(invalidRequest);\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body).toHaveProperty('error');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/performance', () => {\r\n    it('should return performance metrics', async () => {\r\n      const response = await request(app).get('/api/performance');\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('success', true);\r\n      expect(response.body).toHaveProperty('data');\r\n      expect(Array.isArray(response.body.data)).toBe(true);\r\n    });\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}