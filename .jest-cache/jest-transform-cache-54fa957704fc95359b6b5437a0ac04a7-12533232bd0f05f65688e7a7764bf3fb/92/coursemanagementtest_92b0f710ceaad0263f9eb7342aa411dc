d6503be74ae58c537aca6df31a3cc0c5
"use strict";

var _factories = require("../../../tests/factories");
var _database = require("../../../tests/utils/database");
const prisma = (0, _database.getTestPrismaClient)();
describe('Education Service - Course Management', () => {
  afterEach(async () => {
    await (0, _database.cleanupTestDatabase)();
  });
  describe('Course Creation', () => {
    it('should create course with valid data', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      const course = await _factories.courseFactory.create({
        instructorId: instructor.id,
        title: 'Introduction to Python',
        description: 'Learn Python programming from scratch'
      });
      expect(course).toBeDefined();
      expect(course.title).toBe('Introduction to Python');
      expect(course.instructorId).toBe(instructor.id);
    });
    it('should validate required fields', () => {
      const requiredFields = ['title', 'description', 'instructorId'];
      requiredFields.forEach(field => {
        expect(field).toBeDefined();
      });
    });
    it('should set default values', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      const course = await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      expect(course.status).toBeDefined();
      expect(course.status).toBeDefined();
    });
  });
  describe('Course Update', () => {
    it('should update course title', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      const course = await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      const updatedCourse = await prisma.course.update({
        where: {
          id: course.id
        },
        data: {
          title: 'Updated Course Title'
        }
      });
      expect(updatedCourse.title).toBe('Updated Course Title');
    });
    it('should update course description', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      const course = await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      const updatedCourse = await prisma.course.update({
        where: {
          id: course.id
        },
        data: {
          description: 'Updated description'
        }
      });
      expect(updatedCourse.description).toBe('Updated description');
    });
    it('should update course price', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      const course = await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      const updatedCourse = await prisma.course.update({
        where: {
          id: course.id
        },
        data: {
          price: 4999
        }
      });
      expect(updatedCourse.price).toBe(4999);
    });
  });
  describe('Course Deletion', () => {
    it('should delete course', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      const course = await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      await prisma.course.delete({
        where: {
          id: course.id
        }
      });
      const deletedCourse = await prisma.course.findUnique({
        where: {
          id: course.id
        }
      });
      expect(deletedCourse).toBeNull();
    });
    it('should soft delete course', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      const course = await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      await prisma.course.update({
        where: {
          id: course.id
        },
        data: {
          status: 'ARCHIVED'
        }
      });
      const softDeleted = await prisma.course.findUnique({
        where: {
          id: course.id
        }
      });
      expect(softDeleted.status).toBe('ARCHIVED');
    });
  });
  describe('Course Listing', () => {
    it('should list all courses', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      const courses = await prisma.course.findMany();
      expect(courses.length).toBe(3);
    });
    it('should filter courses by instructor', async () => {
      const instructor1 = await _factories.userFactory.createInstructor();
      const instructor2 = await _factories.userFactory.createInstructor();
      await _factories.courseFactory.create({
        instructorId: instructor1.id
      });
      await _factories.courseFactory.create({
        instructorId: instructor1.id
      });
      await _factories.courseFactory.create({
        instructorId: instructor2.id
      });
      const instructor1Courses = await prisma.course.findMany({
        where: {
          instructorId: instructor1.id
        }
      });
      expect(instructor1Courses.length).toBe(2);
    });
    it('should filter published courses', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      await _factories.courseFactory.create({
        instructorId: instructor.id
      });
      const publishedCourses = await prisma.course.findMany({
        where: {
          status: 'PUBLISHED'
        }
      });
      expect(publishedCourses.length).toBe(2);
    });
    it('should search courses by title', async () => {
      const instructor = await _factories.userFactory.createInstructor();
      await _factories.courseFactory.create({
        instructorId: instructor.id,
        title: 'Python Programming'
      });
      await _factories.courseFactory.create({
        instructorId: instructor.id,
        title: 'JavaScript Basics'
      });
      const pythonCourses = await prisma.course.findMany({
        where: {
          title: {
            contains: 'Python'
          }
        }
      });
      expect(pythonCourses.length).toBe(1);
      expect(pythonCourses[0].title).toContain('Python');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZmFjdG9yaWVzIiwicmVxdWlyZSIsIl9kYXRhYmFzZSIsInByaXNtYSIsImdldFRlc3RQcmlzbWFDbGllbnQiLCJkZXNjcmliZSIsImFmdGVyRWFjaCIsImNsZWFudXBUZXN0RGF0YWJhc2UiLCJpdCIsImluc3RydWN0b3IiLCJ1c2VyRmFjdG9yeSIsImNyZWF0ZUluc3RydWN0b3IiLCJjb3Vyc2UiLCJjb3Vyc2VGYWN0b3J5IiwiY3JlYXRlIiwiaW5zdHJ1Y3RvcklkIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZXhwZWN0IiwidG9CZURlZmluZWQiLCJ0b0JlIiwicmVxdWlyZWRGaWVsZHMiLCJmb3JFYWNoIiwiZmllbGQiLCJzdGF0dXMiLCJ1cGRhdGVkQ291cnNlIiwidXBkYXRlIiwid2hlcmUiLCJkYXRhIiwicHJpY2UiLCJkZWxldGUiLCJkZWxldGVkQ291cnNlIiwiZmluZFVuaXF1ZSIsInRvQmVOdWxsIiwic29mdERlbGV0ZWQiLCJjb3Vyc2VzIiwiZmluZE1hbnkiLCJsZW5ndGgiLCJpbnN0cnVjdG9yMSIsImluc3RydWN0b3IyIiwiaW5zdHJ1Y3RvcjFDb3Vyc2VzIiwicHVibGlzaGVkQ291cnNlcyIsInB5dGhvbkNvdXJzZXMiLCJjb250YWlucyIsInRvQ29udGFpbiJdLCJzb3VyY2VzIjpbImNvdXJzZS1tYW5hZ2VtZW50LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlckZhY3RvcnksIGNvdXJzZUZhY3RvcnkgfSBmcm9tICcuLi8uLi8uLi90ZXN0cy9mYWN0b3JpZXMnO1xyXG5pbXBvcnQgeyBnZXRUZXN0UHJpc21hQ2xpZW50LCBjbGVhbnVwVGVzdERhdGFiYXNlIH0gZnJvbSAnLi4vLi4vLi4vdGVzdHMvdXRpbHMvZGF0YWJhc2UnO1xyXG5cclxuY29uc3QgcHJpc21hID0gZ2V0VGVzdFByaXNtYUNsaWVudCgpO1xyXG5cclxuZGVzY3JpYmUoJ0VkdWNhdGlvbiBTZXJ2aWNlIC0gQ291cnNlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XHJcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IGNsZWFudXBUZXN0RGF0YWJhc2UoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvdXJzZSBDcmVhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGNvdXJzZSB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluc3RydWN0b3IgPSBhd2FpdCB1c2VyRmFjdG9yeS5jcmVhdGVJbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgICBjb25zdCBjb3Vyc2UgPSBhd2FpdCBjb3Vyc2VGYWN0b3J5LmNyZWF0ZSh7XHJcbiAgICAgICAgaW5zdHJ1Y3RvcklkOiBpbnN0cnVjdG9yLmlkLFxyXG4gICAgICAgIHRpdGxlOiAnSW50cm9kdWN0aW9uIHRvIFB5dGhvbicsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBQeXRob24gcHJvZ3JhbW1pbmcgZnJvbSBzY3JhdGNoJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QoY291cnNlKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY291cnNlLnRpdGxlKS50b0JlKCdJbnRyb2R1Y3Rpb24gdG8gUHl0aG9uJyk7XHJcbiAgICAgIGV4cGVjdChjb3Vyc2UuaW5zdHJ1Y3RvcklkKS50b0JlKGluc3RydWN0b3IuaWQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSByZXF1aXJlZCBmaWVsZHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVpcmVkRmllbGRzID0gWyd0aXRsZScsICdkZXNjcmlwdGlvbicsICdpbnN0cnVjdG9ySWQnXTtcclxuXHJcbiAgICAgIHJlcXVpcmVkRmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xyXG4gICAgICAgIGV4cGVjdChmaWVsZCkudG9CZURlZmluZWQoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNldCBkZWZhdWx0IHZhbHVlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW5zdHJ1Y3RvciA9IGF3YWl0IHVzZXJGYWN0b3J5LmNyZWF0ZUluc3RydWN0b3IoKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvdXJzZSA9IGF3YWl0IGNvdXJzZUZhY3RvcnkuY3JlYXRlKHtcclxuICAgICAgICBpbnN0cnVjdG9ySWQ6IGluc3RydWN0b3IuaWQsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KGNvdXJzZS5zdGF0dXMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChjb3Vyc2Uuc3RhdHVzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDb3Vyc2UgVXBkYXRlJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgY291cnNlIHRpdGxlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnN0cnVjdG9yID0gYXdhaXQgdXNlckZhY3RvcnkuY3JlYXRlSW5zdHJ1Y3RvcigpO1xyXG4gICAgICBjb25zdCBjb3Vyc2UgPSBhd2FpdCBjb3Vyc2VGYWN0b3J5LmNyZWF0ZSh7IGluc3RydWN0b3JJZDogaW5zdHJ1Y3Rvci5pZCB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb3Vyc2UgPSBhd2FpdCBwcmlzbWEuY291cnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGNvdXJzZS5pZCB9LFxyXG4gICAgICAgIGRhdGE6IHsgdGl0bGU6ICdVcGRhdGVkIENvdXJzZSBUaXRsZScgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QodXBkYXRlZENvdXJzZS50aXRsZSkudG9CZSgnVXBkYXRlZCBDb3Vyc2UgVGl0bGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGNvdXJzZSBkZXNjcmlwdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW5zdHJ1Y3RvciA9IGF3YWl0IHVzZXJGYWN0b3J5LmNyZWF0ZUluc3RydWN0b3IoKTtcclxuICAgICAgY29uc3QgY291cnNlID0gYXdhaXQgY291cnNlRmFjdG9yeS5jcmVhdGUoeyBpbnN0cnVjdG9ySWQ6IGluc3RydWN0b3IuaWQgfSk7XHJcblxyXG4gICAgICBjb25zdCB1cGRhdGVkQ291cnNlID0gYXdhaXQgcHJpc21hLmNvdXJzZS51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiBjb3Vyc2UuaWQgfSxcclxuICAgICAgICBkYXRhOiB7IGRlc2NyaXB0aW9uOiAnVXBkYXRlZCBkZXNjcmlwdGlvbicgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QodXBkYXRlZENvdXJzZS5kZXNjcmlwdGlvbikudG9CZSgnVXBkYXRlZCBkZXNjcmlwdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgY291cnNlIHByaWNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnN0cnVjdG9yID0gYXdhaXQgdXNlckZhY3RvcnkuY3JlYXRlSW5zdHJ1Y3RvcigpO1xyXG4gICAgICBjb25zdCBjb3Vyc2UgPSBhd2FpdCBjb3Vyc2VGYWN0b3J5LmNyZWF0ZSh7IGluc3RydWN0b3JJZDogaW5zdHJ1Y3Rvci5pZCB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb3Vyc2UgPSBhd2FpdCBwcmlzbWEuY291cnNlLnVwZGF0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGNvdXJzZS5pZCB9LFxyXG4gICAgICAgIGRhdGE6IHsgcHJpY2U6IDQ5OTkgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QodXBkYXRlZENvdXJzZS5wcmljZSkudG9CZSg0OTk5KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ291cnNlIERlbGV0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBkZWxldGUgY291cnNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnN0cnVjdG9yID0gYXdhaXQgdXNlckZhY3RvcnkuY3JlYXRlSW5zdHJ1Y3RvcigpO1xyXG4gICAgICBjb25zdCBjb3Vyc2UgPSBhd2FpdCBjb3Vyc2VGYWN0b3J5LmNyZWF0ZSh7IGluc3RydWN0b3JJZDogaW5zdHJ1Y3Rvci5pZCB9KTtcclxuXHJcbiAgICAgIGF3YWl0IHByaXNtYS5jb3Vyc2UuZGVsZXRlKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogY291cnNlLmlkIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZGVsZXRlZENvdXJzZSA9IGF3YWl0IHByaXNtYS5jb3Vyc2UuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGNvdXJzZS5pZCB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChkZWxldGVkQ291cnNlKS50b0JlTnVsbCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzb2Z0IGRlbGV0ZSBjb3Vyc2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluc3RydWN0b3IgPSBhd2FpdCB1c2VyRmFjdG9yeS5jcmVhdGVJbnN0cnVjdG9yKCk7XHJcbiAgICAgIGNvbnN0IGNvdXJzZSA9IGF3YWl0IGNvdXJzZUZhY3RvcnkuY3JlYXRlKHsgaW5zdHJ1Y3RvcklkOiBpbnN0cnVjdG9yLmlkIH0pO1xyXG5cclxuICAgICAgYXdhaXQgcHJpc21hLmNvdXJzZS51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiBjb3Vyc2UuaWQgfSxcclxuICAgICAgICBkYXRhOiB7IHN0YXR1czogJ0FSQ0hJVkVEJyB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHNvZnREZWxldGVkID0gYXdhaXQgcHJpc21hLmNvdXJzZS5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogY291cnNlLmlkIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHNvZnREZWxldGVkIS5zdGF0dXMpLnRvQmUoJ0FSQ0hJVkVEJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvdXJzZSBMaXN0aW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsaXN0IGFsbCBjb3Vyc2VzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnN0cnVjdG9yID0gYXdhaXQgdXNlckZhY3RvcnkuY3JlYXRlSW5zdHJ1Y3RvcigpO1xyXG5cclxuICAgICAgYXdhaXQgY291cnNlRmFjdG9yeS5jcmVhdGUoeyBpbnN0cnVjdG9ySWQ6IGluc3RydWN0b3IuaWQgfSk7XHJcbiAgICAgIGF3YWl0IGNvdXJzZUZhY3RvcnkuY3JlYXRlKHsgaW5zdHJ1Y3RvcklkOiBpbnN0cnVjdG9yLmlkIH0pO1xyXG4gICAgICBhd2FpdCBjb3Vyc2VGYWN0b3J5LmNyZWF0ZSh7IGluc3RydWN0b3JJZDogaW5zdHJ1Y3Rvci5pZCB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGNvdXJzZXMgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRNYW55KCk7XHJcblxyXG4gICAgICBleHBlY3QoY291cnNlcy5sZW5ndGgpLnRvQmUoMyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGZpbHRlciBjb3Vyc2VzIGJ5IGluc3RydWN0b3InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluc3RydWN0b3IxID0gYXdhaXQgdXNlckZhY3RvcnkuY3JlYXRlSW5zdHJ1Y3RvcigpO1xyXG4gICAgICBjb25zdCBpbnN0cnVjdG9yMiA9IGF3YWl0IHVzZXJGYWN0b3J5LmNyZWF0ZUluc3RydWN0b3IoKTtcclxuXHJcbiAgICAgIGF3YWl0IGNvdXJzZUZhY3RvcnkuY3JlYXRlKHsgaW5zdHJ1Y3RvcklkOiBpbnN0cnVjdG9yMS5pZCB9KTtcclxuICAgICAgYXdhaXQgY291cnNlRmFjdG9yeS5jcmVhdGUoeyBpbnN0cnVjdG9ySWQ6IGluc3RydWN0b3IxLmlkIH0pO1xyXG4gICAgICBhd2FpdCBjb3Vyc2VGYWN0b3J5LmNyZWF0ZSh7IGluc3RydWN0b3JJZDogaW5zdHJ1Y3RvcjIuaWQgfSk7XHJcblxyXG4gICAgICBjb25zdCBpbnN0cnVjdG9yMUNvdXJzZXMgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBpbnN0cnVjdG9ySWQ6IGluc3RydWN0b3IxLmlkIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KGluc3RydWN0b3IxQ291cnNlcy5sZW5ndGgpLnRvQmUoMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGZpbHRlciBwdWJsaXNoZWQgY291cnNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW5zdHJ1Y3RvciA9IGF3YWl0IHVzZXJGYWN0b3J5LmNyZWF0ZUluc3RydWN0b3IoKTtcclxuXHJcbiAgICAgIGF3YWl0IGNvdXJzZUZhY3RvcnkuY3JlYXRlKHsgaW5zdHJ1Y3RvcklkOiBpbnN0cnVjdG9yLmlkIH0pO1xyXG4gICAgICBhd2FpdCBjb3Vyc2VGYWN0b3J5LmNyZWF0ZSh7IGluc3RydWN0b3JJZDogaW5zdHJ1Y3Rvci5pZCB9KTtcclxuICAgICAgYXdhaXQgY291cnNlRmFjdG9yeS5jcmVhdGUoeyBpbnN0cnVjdG9ySWQ6IGluc3RydWN0b3IuaWQgfSk7XHJcblxyXG4gICAgICBjb25zdCBwdWJsaXNoZWRDb3Vyc2VzID0gYXdhaXQgcHJpc21hLmNvdXJzZS5maW5kTWFueSh7XHJcbiAgICAgICAgd2hlcmU6IHsgc3RhdHVzOiAnUFVCTElTSEVEJyB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChwdWJsaXNoZWRDb3Vyc2VzLmxlbmd0aCkudG9CZSgyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VhcmNoIGNvdXJzZXMgYnkgdGl0bGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluc3RydWN0b3IgPSBhd2FpdCB1c2VyRmFjdG9yeS5jcmVhdGVJbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgICBhd2FpdCBjb3Vyc2VGYWN0b3J5LmNyZWF0ZSh7XHJcbiAgICAgICAgaW5zdHJ1Y3RvcklkOiBpbnN0cnVjdG9yLmlkLFxyXG4gICAgICAgIHRpdGxlOiAnUHl0aG9uIFByb2dyYW1taW5nJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGF3YWl0IGNvdXJzZUZhY3RvcnkuY3JlYXRlKHtcclxuICAgICAgICBpbnN0cnVjdG9ySWQ6IGluc3RydWN0b3IuaWQsXHJcbiAgICAgICAgdGl0bGU6ICdKYXZhU2NyaXB0IEJhc2ljcycsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcHl0aG9uQ291cnNlcyA9IGF3YWl0IHByaXNtYS5jb3Vyc2UuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgICBjb250YWluczogJ1B5dGhvbicsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHB5dGhvbkNvdXJzZXMubGVuZ3RoKS50b0JlKDEpO1xyXG4gICAgICBleHBlY3QocHl0aG9uQ291cnNlc1swXS50aXRsZSkudG9Db250YWluKCdQeXRob24nKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUQsT0FBQTtBQUVBLE1BQU1FLE1BQU0sR0FBRyxJQUFBQyw2QkFBbUIsRUFBQyxDQUFDO0FBRXBDQyxRQUFRLENBQUMsdUNBQXVDLEVBQUUsTUFBTTtFQUN0REMsU0FBUyxDQUFDLFlBQVk7SUFDcEIsTUFBTSxJQUFBQyw2QkFBbUIsRUFBQyxDQUFDO0VBQzdCLENBQUMsQ0FBQztFQUVGRixRQUFRLENBQUMs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