b6b066b82c11b7aa5ea1350db109f209
"use strict";

/**
 * Tests for Update Server
 */

const request = require('supertest');
const fs = require('fs');
const path = require('path');

// Mock the release directory
const MOCK_RELEASE_DIR = path.join(__dirname, '__mocks__', 'release');
describe('Update Server', () => {
  let app;
  let server;
  beforeAll(() => {
    // Create mock release structure
    const channels = ['alpha', 'beta', 'stable'];
    channels.forEach(channel => {
      const channelDir = path.join(MOCK_RELEASE_DIR, channel);
      if (!fs.existsSync(channelDir)) {
        fs.mkdirSync(channelDir, {
          recursive: true
        });
      }

      // Create mock version directory
      const versionDir = path.join(channelDir, '0.1.0');
      if (!fs.existsSync(versionDir)) {
        fs.mkdirSync(versionDir, {
          recursive: true
        });
      }

      // Create mock manifest
      const manifest = `version: 0.1.0
releaseDate: 2025-01-15T10:00:00.000Z
files:
  - url: https://updates.azora.com/${channel}/0.1.0/AzStudio-Setup-0.1.0.exe
    sha512: mock-hash
    size: 123456789
`;
      fs.writeFileSync(path.join(channelDir, 'latest.yml'), manifest);
      fs.writeFileSync(path.join(versionDir, 'latest.yml'), manifest);

      // Create mock installer
      fs.writeFileSync(path.join(versionDir, 'AzStudio-Setup-0.1.0.exe'), 'mock installer content');

      // Create mock release notes
      fs.writeFileSync(path.join(versionDir, 'RELEASE_NOTES.md'), '# Release 0.1.0\n\nInitial release');
    });

    // Create config and analytics directories
    ['config', 'analytics'].forEach(dir => {
      const dirPath = path.join(MOCK_RELEASE_DIR, dir);
      if (!fs.existsSync(dirPath)) {
        fs.mkdirSync(dirPath, {
          recursive: true
        });
      }
    });

    // Start server with mock directory
    process.env.RELEASE_DIR = MOCK_RELEASE_DIR;
    app = require('../update-server');
  });
  afterAll(done => {
    // Cleanup mock directory
    if (fs.existsSync(MOCK_RELEASE_DIR)) {
      fs.rmSync(MOCK_RELEASE_DIR, {
        recursive: true,
        force: true
      });
    }
    done();
  });
  describe('GET /health', () => {
    it('should return health status', async () => {
      const response = await request(app).get('/health');
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('status', 'ok');
      expect(response.body).toHaveProperty('timestamp');
      expect(response.body).toHaveProperty('channels');
      expect(response.body.channels).toEqual(['alpha', 'beta', 'stable']);
    });
  });
  describe('GET /latest', () => {
    it('should return latest manifest for stable channel', async () => {
      const response = await request(app).get('/latest').query({
        channel: 'stable'
      });
      expect(response.status).toBe(200);
      expect(response.type).toBe('text/yaml');
      expect(response.text).toContain('version: 0.1.0');
    });
    it('should return latest manifest for alpha channel', async () => {
      const response = await request(app).get('/latest').query({
        channel: 'alpha'
      });
      expect(response.status).toBe(200);
      expect(response.text).toContain('version: 0.1.0');
    });
    it('should return 404 for non-existent channel', async () => {
      const response = await request(app).get('/latest').query({
        channel: 'nonexistent'
      });
      expect(response.status).toBe(404);
    });
  });
  describe('GET /versions', () => {
    it('should list available versions', async () => {
      const response = await request(app).get('/versions').query({
        channel: 'stable'
      });
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('channel', 'stable');
      expect(response.body).toHaveProperty('versions');
      expect(Array.isArray(response.body.versions)).toBe(true);
      expect(response.body.versions).toContain('0.1.0');
    });
    it('should return empty array for channel with no versions', async () => {
      const response = await request(app).get('/versions').query({
        channel: 'nonexistent'
      });
      expect(response.status).toBe(200);
      expect(response.body.versions).toEqual([]);
    });
  });
  describe('GET /version/:version', () => {
    it('should return version info', async () => {
      const response = await request(app).get('/version/0.1.0').query({
        channel: 'stable'
      });
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('version', '0.1.0');
      expect(response.body).toHaveProperty('channel', 'stable');
      expect(response.body).toHaveProperty('files');
      expect(response.body).toHaveProperty('releaseNotes');
      expect(Array.isArray(response.body.files)).toBe(true);
    });
    it('should return 404 for non-existent version', async () => {
      const response = await request(app).get('/version/9.9.9').query({
        channel: 'stable'
      });
      expect(response.status).toBe(404);
    });
  });
  describe('POST /report/install', () => {
    it('should accept installation report', async () => {
      const response = await request(app).post('/report/install').send({
        channel: 'stable',
        version: '0.1.0',
        previousVersion: '0.0.9',
        clientId: 'test-client'
      });
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('success', true);
    });
    it('should reject invalid installation report', async () => {
      const response = await request(app).post('/report/install').send({
        channel: 'stable'
        // missing version
      });
      expect(response.status).toBe(400);
    });
  });
  describe('POST /report/rollback', () => {
    it('should accept rollback report', async () => {
      const response = await request(app).post('/report/rollback').send({
        channel: 'stable',
        fromVersion: '0.1.0',
        toVersion: '0.0.9',
        reason: 'Installation failed',
        clientId: 'test-client'
      });
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('success', true);
    });
    it('should reject invalid rollback report', async () => {
      const response = await request(app).post('/report/rollback').send({
        channel: 'stable'
        // missing versions
      });
      expect(response.status).toBe(400);
    });
  });
  describe('Staged Rollout', () => {
    describe('POST /admin/rollout/:channel', () => {
      it('should configure staged rollout', async () => {
        const response = await request(app).post('/admin/rollout/stable').send({
          version: '0.1.0',
          percentage: 50,
          startDate: new Date().toISOString()
        });
        expect(response.status).toBe(200);
        expect(response.body).toHaveProperty('success', true);
        expect(response.body.config).toHaveProperty('percentage', 50);
      });
      it('should reject invalid percentage', async () => {
        const response = await request(app).post('/admin/rollout/stable').send({
          version: '0.1.0',
          percentage: 150 // invalid
        });
        expect(response.status).toBe(400);
      });
      it('should reject invalid channel', async () => {
        const response = await request(app).post('/admin/rollout/invalid').send({
          version: '0.1.0',
          percentage: 50
        });
        expect(response.status).toBe(400);
      });
    });
    describe('GET /admin/rollout/:channel', () => {
      it('should return rollout configuration', async () => {
        const response = await request(app).get('/admin/rollout/stable');
        expect(response.status).toBe(200);
        expect(response.body).toHaveProperty('percentage');
      });
    });
  });
  describe('GET /admin/analytics', () => {
    it('should return analytics data', async () => {
      const response = await request(app).get('/admin/analytics').query({
        days: 7
      });
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('period');
      expect(response.body).toHaveProperty('data');
      expect(Array.isArray(response.body.data)).toBe(true);
    });
  });
  describe('Delta Updates', () => {
    it('should return 404 for non-existent delta', async () => {
      const response = await request(app).get('/delta/stable/0.0.9/0.1.0');
      expect(response.status).toBe(404);
      expect(response.body).toHaveProperty('fallback');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImZzIiwicGF0aCIsIk1PQ0tfUkVMRUFTRV9ESVIiLCJqb2luIiwiX19kaXJuYW1lIiwiZGVzY3JpYmUiLCJhcHAiLCJzZXJ2ZXIiLCJiZWZvcmVBbGwiLCJjaGFubmVscyIsImZvckVhY2giLCJjaGFubmVsIiwiY2hhbm5lbERpciIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJ2ZXJzaW9uRGlyIiwibWFuaWZlc3QiLCJ3cml0ZUZpbGVTeW5jIiwiZGlyIiwiZGlyUGF0aCIsInByb2Nlc3MiLCJlbnYiLCJSRUxFQVNFX0RJUiIsImFmdGVyQWxsIiwiZG9uZSIsInJtU3luYyIsImZvcmNlIiwiaXQiLCJyZXNwb25zZSIsImdldCIsImV4cGVjdCIsInN0YXR1cyIsInRvQmUiLCJib2R5IiwidG9IYXZlUHJvcGVydHkiLCJ0b0VxdWFsIiwicXVlcnkiLCJ0eXBlIiwidGV4dCIsInRvQ29udGFpbiIsIkFycmF5IiwiaXNBcnJheSIsInZlcnNpb25zIiwiZmlsZXMiLCJwb3N0Iiwic2VuZCIsInZlcnNpb24iLCJwcmV2aW91c1ZlcnNpb24iLCJjbGllbnRJZCIsImZyb21WZXJzaW9uIiwidG9WZXJzaW9uIiwicmVhc29uIiwicGVyY2VudGFnZSIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImNvbmZpZyIsImRheXMiLCJkYXRhIl0sInNvdXJjZXMiOlsidXBkYXRlLXNlcnZlci50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdHMgZm9yIFVwZGF0ZSBTZXJ2ZXJcbiAqL1xuXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG4vLyBNb2NrIHRoZSByZWxlYXNlIGRpcmVjdG9yeVxuY29uc3QgTU9DS19SRUxFQVNFX0RJUiA9IHBhdGguam9pbihfX2Rpcm5hbWUsICdfX21vY2tzX18nLCAncmVsZWFzZScpO1xuXG5kZXNjcmliZSgnVXBkYXRlIFNlcnZlcicsICgpID0+IHtcbiAgbGV0IGFwcDtcbiAgbGV0IHNlcnZlcjtcblxuICBiZWZvcmVBbGwoKCkgPT4ge1xuICAgIC8vIENyZWF0ZSBtb2NrIHJlbGVhc2Ugc3RydWN0dXJlXG4gICAgY29uc3QgY2hhbm5lbHMgPSBbJ2FscGhhJywgJ2JldGEnLCAnc3RhYmxlJ107XG4gICAgY2hhbm5lbHMuZm9yRWFjaChjaGFubmVsID0+IHtcbiAgICAgIGNvbnN0IGNoYW5uZWxEaXIgPSBwYXRoLmpvaW4oTU9DS19SRUxFQVNFX0RJUiwgY2hhbm5lbCk7XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoY2hhbm5lbERpcikpIHtcbiAgICAgICAgZnMubWtkaXJTeW5jKGNoYW5uZWxEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgbW9jayB2ZXJzaW9uIGRpcmVjdG9yeVxuICAgICAgY29uc3QgdmVyc2lvbkRpciA9IHBhdGguam9pbihjaGFubmVsRGlyLCAnMC4xLjAnKTtcbiAgICAgIGlmICghZnMuZXhpc3RzU3luYyh2ZXJzaW9uRGlyKSkge1xuICAgICAgICBmcy5ta2RpclN5bmModmVyc2lvbkRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBtb2NrIG1hbmlmZXN0XG4gICAgICBjb25zdCBtYW5pZmVzdCA9IGB2ZXJzaW9uOiAwLjEuMFxucmVsZWFzZURhdGU6IDIwMjUtMDEtMTVUMTA6MDA6MDAuMDAwWlxuZmlsZXM6XG4gIC0gdXJsOiBodHRwczovL3VwZGF0ZXMuYXpvcmEuY29tLyR7Y2hhbm5lbH0vMC4xLjAvQXpTdHVkaW8tU2V0dXAtMC4xLjAuZXhlXG4gICAgc2hhNTEyOiBtb2NrLWhhc2hcbiAgICBzaXplOiAxMjM0NTY3ODlcbmA7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbihjaGFubmVsRGlyLCAnbGF0ZXN0LnltbCcpLCBtYW5pZmVzdCk7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih2ZXJzaW9uRGlyLCAnbGF0ZXN0LnltbCcpLCBtYW5pZmVzdCk7XG5cbiAgICAgIC8vIENyZWF0ZSBtb2NrIGluc3RhbGxlclxuICAgICAgZnMud3JpdGVGaWxlU3luYyhcbiAgICAgICAgcGF0aC5qb2luKHZlcnNpb25EaXIsICdBelN0dWRpby1TZXR1cC0wLjEuMC5leGUnKSxcbiAgICAgICAgJ21vY2sgaW5zdGFsbGVyIGNvbnRlbnQnXG4gICAgICApO1xuXG4gICAgICAvLyBDcmVhdGUgbW9jayByZWxlYXNlIG5vdGVzXG4gICAgICBmcy53cml0ZUZpbGVTeW5jKFxuICAgICAgICBwYXRoLmpvaW4odmVyc2lvbkRpciwgJ1JFTEVBU0VfTk9URVMubWQnKSxcbiAgICAgICAgJyMgUmVsZWFzZSAwLjEuMFxcblxcbkluaXRpYWwgcmVsZWFzZSdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgY29uZmlnIGFuZCBhbmFseXRpY3MgZGlyZWN0b3JpZXNcbiAgICBbJ2NvbmZpZycsICdhbmFseXRpY3MnXS5mb3JFYWNoKGRpciA9PiB7XG4gICAgICBjb25zdCBkaXJQYXRoID0gcGF0aC5qb2luKE1PQ0tfUkVMRUFTRV9ESVIsIGRpcik7XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyUGF0aCkpIHtcbiAgICAgICAgZnMubWtkaXJTeW5jKGRpclBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU3RhcnQgc2VydmVyIHdpdGggbW9jayBkaXJlY3RvcnlcbiAgICBwcm9jZXNzLmVudi5SRUxFQVNFX0RJUiA9IE1PQ0tfUkVMRUFTRV9ESVI7XG4gICAgYXBwID0gcmVxdWlyZSgnLi4vdXBkYXRlLXNlcnZlcicpO1xuICB9KTtcblxuICBhZnRlckFsbCgoZG9uZSkgPT4ge1xuICAgIC8vIENsZWFudXAgbW9jayBkaXJlY3RvcnlcbiAgICBpZiAoZnMuZXhpc3RzU3luYyhNT0NLX1JFTEVBU0VfRElSKSkge1xuICAgICAgZnMucm1TeW5jKE1PQ0tfUkVMRUFTRV9ESVIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9oZWFsdGgnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gaGVhbHRoIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApLmdldCgnL2hlYWx0aCcpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycsICdvaycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCd0aW1lc3RhbXAnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnY2hhbm5lbHMnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNoYW5uZWxzKS50b0VxdWFsKFsnYWxwaGEnLCAnYmV0YScsICdzdGFibGUnXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2xhdGVzdCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBsYXRlc3QgbWFuaWZlc3QgZm9yIHN0YWJsZSBjaGFubmVsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2xhdGVzdCcpXG4gICAgICAgIC5xdWVyeSh7IGNoYW5uZWw6ICdzdGFibGUnIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UudHlwZSkudG9CZSgndGV4dC95YW1sJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UudGV4dCkudG9Db250YWluKCd2ZXJzaW9uOiAwLjEuMCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbGF0ZXN0IG1hbmlmZXN0IGZvciBhbHBoYSBjaGFubmVsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2xhdGVzdCcpXG4gICAgICAgIC5xdWVyeSh7IGNoYW5uZWw6ICdhbHBoYScgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ3ZlcnNpb246IDAuMS4wJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDQgZm9yIG5vbi1leGlzdGVudCBjaGFubmVsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2xhdGVzdCcpXG4gICAgICAgIC5xdWVyeSh7IGNoYW5uZWw6ICdub25leGlzdGVudCcgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDA0KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvdmVyc2lvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBsaXN0IGF2YWlsYWJsZSB2ZXJzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy92ZXJzaW9ucycpXG4gICAgICAgIC5xdWVyeSh7IGNoYW5uZWw6ICdzdGFibGUnIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2NoYW5uZWwnLCAnc3RhYmxlJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3ZlcnNpb25zJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LnZlcnNpb25zKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnZlcnNpb25zKS50b0NvbnRhaW4oJzAuMS4wJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3IgY2hhbm5lbCB3aXRoIG5vIHZlcnNpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3ZlcnNpb25zJylcbiAgICAgICAgLnF1ZXJ5KHsgY2hhbm5lbDogJ25vbmV4aXN0ZW50JyB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudmVyc2lvbnMpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC92ZXJzaW9uLzp2ZXJzaW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZlcnNpb24gaW5mbycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy92ZXJzaW9uLzAuMS4wJylcbiAgICAgICAgLnF1ZXJ5KHsgY2hhbm5lbDogJ3N0YWJsZScgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgndmVyc2lvbicsICcwLjEuMCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdjaGFubmVsJywgJ3N0YWJsZScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdmaWxlcycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdyZWxlYXNlTm90ZXMnKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkuZmlsZXMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDA0IGZvciBub24tZXhpc3RlbnQgdmVyc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy92ZXJzaW9uLzkuOS45JylcbiAgICAgICAgLnF1ZXJ5KHsgY2hhbm5lbDogJ3N0YWJsZScgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDA0KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL3JlcG9ydC9pbnN0YWxsJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWNjZXB0IGluc3RhbGxhdGlvbiByZXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL3JlcG9ydC9pbnN0YWxsJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGNoYW5uZWw6ICdzdGFibGUnLFxuICAgICAgICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgICAgICAgcHJldmlvdXNWZXJzaW9uOiAnMC4wLjknLFxuICAgICAgICAgIGNsaWVudElkOiAndGVzdC1jbGllbnQnXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3N1Y2Nlc3MnLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgaW5zdGFsbGF0aW9uIHJlcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvcmVwb3J0L2luc3RhbGwnKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgY2hhbm5lbDogJ3N0YWJsZSdcbiAgICAgICAgICAvLyBtaXNzaW5nIHZlcnNpb25cbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL3JlcG9ydC9yb2xsYmFjaycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCByb2xsYmFjayByZXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL3JlcG9ydC9yb2xsYmFjaycpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBjaGFubmVsOiAnc3RhYmxlJyxcbiAgICAgICAgICBmcm9tVmVyc2lvbjogJzAuMS4wJyxcbiAgICAgICAgICB0b1ZlcnNpb246ICcwLjAuOScsXG4gICAgICAgICAgcmVhc29uOiAnSW5zdGFsbGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgY2xpZW50SWQ6ICd0ZXN0LWNsaWVudCdcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnc3VjY2VzcycsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCByb2xsYmFjayByZXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL3JlcG9ydC9yb2xsYmFjaycpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBjaGFubmVsOiAnc3RhYmxlJ1xuICAgICAgICAgIC8vIG1pc3NpbmcgdmVyc2lvbnNcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N0YWdlZCBSb2xsb3V0JywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdQT1NUIC9hZG1pbi9yb2xsb3V0LzpjaGFubmVsJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBjb25maWd1cmUgc3RhZ2VkIHJvbGxvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgLnBvc3QoJy9hZG1pbi9yb2xsb3V0L3N0YWJsZScpXG4gICAgICAgICAgLnNlbmQoe1xuICAgICAgICAgICAgdmVyc2lvbjogJzAuMS4wJyxcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDUwLFxuICAgICAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzJywgdHJ1ZSk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmNvbmZpZykudG9IYXZlUHJvcGVydHkoJ3BlcmNlbnRhZ2UnLCA1MCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBwZXJjZW50YWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgIC5wb3N0KCcvYWRtaW4vcm9sbG91dC9zdGFibGUnKVxuICAgICAgICAgIC5zZW5kKHtcbiAgICAgICAgICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgICAgICAgICBwZXJjZW50YWdlOiAxNTAgLy8gaW52YWxpZFxuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgY2hhbm5lbCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAucG9zdCgnL2FkbWluL3JvbGxvdXQvaW52YWxpZCcpXG4gICAgICAgICAgLnNlbmQoe1xuICAgICAgICAgICAgdmVyc2lvbjogJzAuMS4wJyxcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDUwXG4gICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdHRVQgL2FkbWluL3JvbGxvdXQvOmNoYW5uZWwnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHJldHVybiByb2xsb3V0IGNvbmZpZ3VyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgLmdldCgnL2FkbWluL3JvbGxvdXQvc3RhYmxlJyk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgncGVyY2VudGFnZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2FkbWluL2FuYWx5dGljcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhbmFseXRpY3MgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hZG1pbi9hbmFseXRpY3MnKVxuICAgICAgICAucXVlcnkoeyBkYXlzOiA3IH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3BlcmlvZCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdkYXRhJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRhdGEpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGVsdGEgVXBkYXRlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDQgZm9yIG5vbi1leGlzdGVudCBkZWx0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9kZWx0YS9zdGFibGUvMC4wLjkvMC4xLjAnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDQpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdmYWxsYmFjaycpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsRUFBRSxH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