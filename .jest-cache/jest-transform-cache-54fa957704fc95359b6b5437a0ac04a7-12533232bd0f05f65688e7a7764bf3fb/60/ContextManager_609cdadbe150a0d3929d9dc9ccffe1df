881459a0230c25e7e5bc1b6fbabdbdcb
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ContextManager = void 0;
var fs = _interopRequireWildcard(require("fs"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
class ContextManager {
  MAX_CONTEXT_FILES = 10;
  MAX_FILE_SIZE = 50000; // 50KB per file

  async buildContext(files, projectGraph) {
    const contexts = [];
    for (const filePath of files) {
      try {
        const stats = await fs.promises.stat(filePath);

        // Skip files that are too large
        if (stats.size > this.MAX_FILE_SIZE) {
          console.log(`Skipping large file: ${filePath} (${stats.size} bytes)`);
          continue;
        }
        const content = await fs.promises.readFile(filePath, 'utf-8');
        const relevance = this.calculateRelevance(filePath, projectGraph);
        contexts.push({
          path: filePath,
          content,
          relevance
        });
      } catch (error) {
        console.error(`Failed to read file ${filePath}:`, error);
      }
    }

    // Sort by relevance and limit
    return contexts.sort((a, b) => b.relevance - a.relevance).slice(0, this.MAX_CONTEXT_FILES);
  }
  async selectRelevantFiles(targetFile, projectGraph) {
    if (!projectGraph) {
      return [targetFile];
    }
    const relevantFiles = new Set([targetFile]);

    // Add files that import the target file
    for (const [filePath, deps] of projectGraph.dependencies) {
      if (deps.some(dep => this.resolveImport(dep, filePath) === targetFile)) {
        relevantFiles.add(filePath);
      }
    }

    // Add files imported by the target file
    const targetDeps = projectGraph.dependencies.get(targetFile);
    if (targetDeps) {
      for (const dep of targetDeps) {
        const resolvedPath = this.resolveImport(dep, targetFile);
        if (resolvedPath && projectGraph.files.has(resolvedPath)) {
          relevantFiles.add(resolvedPath);
        }
      }
    }
    return Array.from(relevantFiles);
  }
  compressContext(contexts) {
    // Remove comments and extra whitespace to reduce token count
    return contexts.map(ctx => ({
      ...ctx,
      content: this.compressCode(ctx.content)
    }));
  }
  compressCode(code) {
    // Remove single-line comments
    code = code.replace(/\/\/.*$/gm, '');

    // Remove multi-line comments
    code = code.replace(/\/\*[\s\S]*?\*\//g, '');

    // Remove extra whitespace
    code = code.replace(/\n\s*\n/g, '\n');

    // Trim lines
    code = code.split('\n').map(line => line.trim()).join('\n');
    return code;
  }
  calculateRelevance(filePath, projectGraph) {
    let relevance = 1.0;

    // Boost relevance for certain file types
    if (filePath.endsWith('.ts') || filePath.endsWith('.tsx')) {
      relevance += 0.5;
    }

    // Boost relevance for files with many imports/exports
    if (projectGraph) {
      const fileNode = projectGraph.files.get(filePath);
      if (fileNode) {
        relevance += fileNode.imports.length * 0.1;
        relevance += fileNode.exports.length * 0.2;
        relevance += fileNode.symbols.length * 0.05;
      }
    }

    // Reduce relevance for test files
    if (filePath.includes('.test.') || filePath.includes('.spec.')) {
      relevance *= 0.5;
    }

    // Reduce relevance for config files
    if (filePath.includes('config') || filePath.includes('.config.')) {
      relevance *= 0.7;
    }
    return relevance;
  }
  resolveImport(importPath, fromFile) {
    // Handle relative imports
    if (importPath.startsWith('.')) {
      const fromDir = fromFile.substring(0, fromFile.lastIndexOf('/'));
      let resolved = `${fromDir}/${importPath}`;

      // Normalize path
      const parts = resolved.split('/');
      const normalized = [];
      for (const part of parts) {
        if (part === '..') {
          normalized.pop();
        } else if (part !== '.') {
          normalized.push(part);
        }
      }
      resolved = normalized.join('/');

      // Try common extensions
      const extensions = ['.ts', '.tsx', '.js', '.jsx', '/index.ts', '/index.tsx'];
      for (const ext of extensions) {
        const withExt = resolved + ext;
        try {
          if (fs.existsSync(withExt)) {
            return withExt;
          }
        } catch {
          // Ignore
        }
      }
    }
    return null;
  }
  estimateTokenCount(contexts) {
    let totalChars = 0;
    for (const ctx of contexts) {
      totalChars += ctx.content.length;
    }
    // Rough estimate: 1 token â‰ˆ 4 characters
    return Math.ceil(totalChars / 4);
  }
}
exports.ContextManager = ContextManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkNvbnRleHRNYW5hZ2VyIiwiTUFYX0NPTlRFWFRfRklMRVMiLCJNQVhfRklMRV9TSVpFIiwiYnVpbGRDb250ZXh0IiwiZmlsZXMiLCJwcm9qZWN0R3JhcGgiLCJjb250ZXh0cyIsImZpbGVQYXRoIiwic3RhdHMiLCJwcm9taXNlcyIsInN0YXQiLCJzaXplIiwiY29uc29sZSIsImxvZyIsImNvbnRlbnQiLCJyZWFkRmlsZSIsInJlbGV2YW5jZSIsImNhbGN1bGF0ZVJlbGV2YW5jZSIsInB1c2giLCJwYXRoIiwiZXJyb3IiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsInNlbGVjdFJlbGV2YW50RmlsZXMiLCJ0YXJnZXRGaWxlIiwicmVsZXZhbnRGaWxlcyIsIlNldCIsImRlcHMiLCJkZXBlbmRlbmNpZXMiLCJzb21lIiwiZGVwIiwicmVzb2x2ZUltcG9ydCIsImFkZCIsInRhcmdldERlcHMiLCJyZXNvbHZlZFBhdGgiLCJBcnJheSIsImZyb20iLCJjb21wcmVzc0NvbnRleHQiLCJtYXAiLCJjdHgiLCJjb21wcmVzc0NvZGUiLCJjb2RlIiwicmVwbGFjZSIsInNwbGl0IiwibGluZSIsInRyaW0iLCJqb2luIiwiZW5kc1dpdGgiLCJmaWxlTm9kZSIsImltcG9ydHMiLCJsZW5ndGgiLCJleHBvcnRzIiwic3ltYm9scyIsImluY2x1ZGVzIiwiaW1wb3J0UGF0aCIsImZyb21GaWxlIiwic3RhcnRzV2l0aCIsImZyb21EaXIiLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsInJlc29sdmVkIiwicGFydHMiLCJub3JtYWxpemVkIiwicGFydCIsInBvcCIsImV4dGVuc2lvbnMiLCJleHQiLCJ3aXRoRXh0IiwiZXhpc3RzU3luYyIsImVzdGltYXRlVG9rZW5Db3VudCIsInRvdGFsQ2hhcnMiLCJNYXRoIiwiY2VpbCJdLCJzb3VyY2VzIjpbIkNvbnRleHRNYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCB7IFByb2plY3RHcmFwaCB9IGZyb20gJy4vUHJvamVjdEluZGV4ZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVDb250ZXh0IHtcbiAgcGF0aDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHJlbGV2YW5jZTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgQ29udGV4dE1hbmFnZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IE1BWF9DT05URVhUX0ZJTEVTID0gMTA7XG4gIHByaXZhdGUgcmVhZG9ubHkgTUFYX0ZJTEVfU0laRSA9IDUwMDAwOyAvLyA1MEtCIHBlciBmaWxlXG5cbiAgYXN5bmMgYnVpbGRDb250ZXh0KFxuICAgIGZpbGVzOiBzdHJpbmdbXSxcbiAgICBwcm9qZWN0R3JhcGg6IFByb2plY3RHcmFwaCB8IG51bGxcbiAgKTogUHJvbWlzZTxGaWxlQ29udGV4dFtdPiB7XG4gICAgY29uc3QgY29udGV4dHM6IEZpbGVDb250ZXh0W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgZmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZnMucHJvbWlzZXMuc3RhdChmaWxlUGF0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTa2lwIGZpbGVzIHRoYXQgYXJlIHRvbyBsYXJnZVxuICAgICAgICBpZiAoc3RhdHMuc2l6ZSA+IHRoaXMuTUFYX0ZJTEVfU0laRSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBTa2lwcGluZyBsYXJnZSBmaWxlOiAke2ZpbGVQYXRofSAoJHtzdGF0cy5zaXplfSBieXRlcylgKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5wcm9taXNlcy5yZWFkRmlsZShmaWxlUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICAgIGNvbnN0IHJlbGV2YW5jZSA9IHRoaXMuY2FsY3VsYXRlUmVsZXZhbmNlKGZpbGVQYXRoLCBwcm9qZWN0R3JhcGgpO1xuXG4gICAgICAgIGNvbnRleHRzLnB1c2goe1xuICAgICAgICAgIHBhdGg6IGZpbGVQYXRoLFxuICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgcmVsZXZhbmNlLFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byByZWFkIGZpbGUgJHtmaWxlUGF0aH06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvcnQgYnkgcmVsZXZhbmNlIGFuZCBsaW1pdFxuICAgIHJldHVybiBjb250ZXh0c1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGIucmVsZXZhbmNlIC0gYS5yZWxldmFuY2UpXG4gICAgICAuc2xpY2UoMCwgdGhpcy5NQVhfQ09OVEVYVF9GSUxFUyk7XG4gIH1cblxuICBhc3luYyBzZWxlY3RSZWxldmFudEZpbGVzKFxuICAgIHRhcmdldEZpbGU6IHN0cmluZyxcbiAgICBwcm9qZWN0R3JhcGg6IFByb2plY3RHcmFwaCB8IG51bGxcbiAgKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGlmICghcHJvamVjdEdyYXBoKSB7XG4gICAgICByZXR1cm4gW3RhcmdldEZpbGVdO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbGV2YW50RmlsZXMgPSBuZXcgU2V0PHN0cmluZz4oW3RhcmdldEZpbGVdKTtcblxuICAgIC8vIEFkZCBmaWxlcyB0aGF0IGltcG9ydCB0aGUgdGFyZ2V0IGZpbGVcbiAgICBmb3IgKGNvbnN0IFtmaWxlUGF0aCwgZGVwc10gb2YgcHJvamVjdEdyYXBoLmRlcGVuZGVuY2llcykge1xuICAgICAgaWYgKGRlcHMuc29tZShkZXAgPT4gdGhpcy5yZXNvbHZlSW1wb3J0KGRlcCwgZmlsZVBhdGgpID09PSB0YXJnZXRGaWxlKSkge1xuICAgICAgICByZWxldmFudEZpbGVzLmFkZChmaWxlUGF0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGZpbGVzIGltcG9ydGVkIGJ5IHRoZSB0YXJnZXQgZmlsZVxuICAgIGNvbnN0IHRhcmdldERlcHMgPSBwcm9qZWN0R3JhcGguZGVwZW5kZW5jaWVzLmdldCh0YXJnZXRGaWxlKTtcbiAgICBpZiAodGFyZ2V0RGVwcykge1xuICAgICAgZm9yIChjb25zdCBkZXAgb2YgdGFyZ2V0RGVwcykge1xuICAgICAgICBjb25zdCByZXNvbHZlZFBhdGggPSB0aGlzLnJlc29sdmVJbXBvcnQoZGVwLCB0YXJnZXRGaWxlKTtcbiAgICAgICAgaWYgKHJlc29sdmVkUGF0aCAmJiBwcm9qZWN0R3JhcGguZmlsZXMuaGFzKHJlc29sdmVkUGF0aCkpIHtcbiAgICAgICAgICByZWxldmFudEZpbGVzLmFkZChyZXNvbHZlZFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20ocmVsZXZhbnRGaWxlcyk7XG4gIH1cblxuICBjb21wcmVzc0NvbnRleHQoY29udGV4dHM6IEZpbGVDb250ZXh0W10pOiBGaWxlQ29udGV4dFtdIHtcbiAgICAvLyBSZW1vdmUgY29tbWVudHMgYW5kIGV4dHJhIHdoaXRlc3BhY2UgdG8gcmVkdWNlIHRva2VuIGNvdW50XG4gICAgcmV0dXJuIGNvbnRleHRzLm1hcChjdHggPT4gKHtcbiAgICAgIC4uLmN0eCxcbiAgICAgIGNvbnRlbnQ6IHRoaXMuY29tcHJlc3NDb2RlKGN0eC5jb250ZW50KSxcbiAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIGNvbXByZXNzQ29kZShjb2RlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFJlbW92ZSBzaW5nbGUtbGluZSBjb21tZW50c1xuICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL1xcL1xcLy4qJC9nbSwgJycpO1xuICAgIFxuICAgIC8vIFJlbW92ZSBtdWx0aS1saW5lIGNvbW1lbnRzXG4gICAgY29kZSA9IGNvZGUucmVwbGFjZSgvXFwvXFwqW1xcc1xcU10qP1xcKlxcLy9nLCAnJyk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIGV4dHJhIHdoaXRlc3BhY2VcbiAgICBjb2RlID0gY29kZS5yZXBsYWNlKC9cXG5cXHMqXFxuL2csICdcXG4nKTtcbiAgICBcbiAgICAvLyBUcmltIGxpbmVzXG4gICAgY29kZSA9IGNvZGUuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbSgpKS5qb2luKCdcXG4nKTtcbiAgICBcbiAgICByZXR1cm4gY29kZTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlUmVsZXZhbmNlKGZpbGVQYXRoOiBzdHJpbmcsIHByb2plY3RHcmFwaDogUHJvamVjdEdyYXBoIHwgbnVsbCk6IG51bWJlciB7XG4gICAgbGV0IHJlbGV2YW5jZSA9IDEuMDtcblxuICAgIC8vIEJvb3N0IHJlbGV2YW5jZSBmb3IgY2VydGFpbiBmaWxlIHR5cGVzXG4gICAgaWYgKGZpbGVQYXRoLmVuZHNXaXRoKCcudHMnKSB8fCBmaWxlUGF0aC5lbmRzV2l0aCgnLnRzeCcpKSB7XG4gICAgICByZWxldmFuY2UgKz0gMC41O1xuICAgIH1cblxuICAgIC8vIEJvb3N0IHJlbGV2YW5jZSBmb3IgZmlsZXMgd2l0aCBtYW55IGltcG9ydHMvZXhwb3J0c1xuICAgIGlmIChwcm9qZWN0R3JhcGgpIHtcbiAgICAgIGNvbnN0IGZpbGVOb2RlID0gcHJvamVjdEdyYXBoLmZpbGVzLmdldChmaWxlUGF0aCk7XG4gICAgICBpZiAoZmlsZU5vZGUpIHtcbiAgICAgICAgcmVsZXZhbmNlICs9IGZpbGVOb2RlLmltcG9ydHMubGVuZ3RoICogMC4xO1xuICAgICAgICByZWxldmFuY2UgKz0gZmlsZU5vZGUuZXhwb3J0cy5sZW5ndGggKiAwLjI7XG4gICAgICAgIHJlbGV2YW5jZSArPSBmaWxlTm9kZS5zeW1ib2xzLmxlbmd0aCAqIDAuMDU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVkdWNlIHJlbGV2YW5jZSBmb3IgdGVzdCBmaWxlc1xuICAgIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnLnRlc3QuJykgfHwgZmlsZVBhdGguaW5jbHVkZXMoJy5zcGVjLicpKSB7XG4gICAgICByZWxldmFuY2UgKj0gMC41O1xuICAgIH1cblxuICAgIC8vIFJlZHVjZSByZWxldmFuY2UgZm9yIGNvbmZpZyBmaWxlc1xuICAgIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnY29uZmlnJykgfHwgZmlsZVBhdGguaW5jbHVkZXMoJy5jb25maWcuJykpIHtcbiAgICAgIHJlbGV2YW5jZSAqPSAwLjc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbGV2YW5jZTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzb2x2ZUltcG9ydChpbXBvcnRQYXRoOiBzdHJpbmcsIGZyb21GaWxlOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAvLyBIYW5kbGUgcmVsYXRpdmUgaW1wb3J0c1xuICAgIGlmIChpbXBvcnRQYXRoLnN0YXJ0c1dpdGgoJy4nKSkge1xuICAgICAgY29uc3QgZnJvbURpciA9IGZyb21GaWxlLnN1YnN0cmluZygwLCBmcm9tRmlsZS5sYXN0SW5kZXhPZignLycpKTtcbiAgICAgIGxldCByZXNvbHZlZCA9IGAke2Zyb21EaXJ9LyR7aW1wb3J0UGF0aH1gO1xuICAgICAgXG4gICAgICAvLyBOb3JtYWxpemUgcGF0aFxuICAgICAgY29uc3QgcGFydHMgPSByZXNvbHZlZC5zcGxpdCgnLycpO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgICBpZiAocGFydCA9PT0gJy4uJykge1xuICAgICAgICAgIG5vcm1hbGl6ZWQucG9wKCk7XG4gICAgICAgIH0gZWxzZSBpZiAocGFydCAhPT0gJy4nKSB7XG4gICAgICAgICAgbm9ybWFsaXplZC5wdXNoKHBhcnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXNvbHZlZCA9IG5vcm1hbGl6ZWQuam9pbignLycpO1xuICAgICAgXG4gICAgICAvLyBUcnkgY29tbW9uIGV4dGVuc2lvbnNcbiAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBbJy50cycsICcudHN4JywgJy5qcycsICcuanN4JywgJy9pbmRleC50cycsICcvaW5kZXgudHN4J107XG4gICAgICBmb3IgKGNvbnN0IGV4dCBvZiBleHRlbnNpb25zKSB7XG4gICAgICAgIGNvbnN0IHdpdGhFeHQgPSByZXNvbHZlZCArIGV4dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyh3aXRoRXh0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHdpdGhFeHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZXN0aW1hdGVUb2tlbkNvdW50KGNvbnRleHRzOiBGaWxlQ29udGV4dFtdKTogbnVtYmVyIHtcbiAgICBsZXQgdG90YWxDaGFycyA9IDA7XG4gICAgZm9yIChjb25zdCBjdHggb2YgY29udGV4dHMpIHtcbiAgICAgIHRvdGFsQ2hhcnMgKz0gY3R4LmNvbnRlbnQubGVuZ3RoO1xuICAgIH1cbiAgICAvLyBSb3VnaCBlc3RpbWF0ZTogMSB0b2tlbiDiiYggNCBjaGFyYWN0ZXJzXG4gICAgcmV0dXJuIE1hdGguY2VpbCh0b3RhbENoYXJzIC8gNCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsRUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQXlCLFNBQUFELHdCQUFBRSxDQUFBLEVBQUFDLENBQUEsNkJBQUFDLE9B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