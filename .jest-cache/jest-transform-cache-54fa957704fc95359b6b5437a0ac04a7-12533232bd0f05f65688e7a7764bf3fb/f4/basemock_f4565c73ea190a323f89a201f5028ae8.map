{"version":3,"names":["BaseMock","calls","Map","responses","trackCall","method","args","has","set","get","push","getCalls","getCallCount","length","wasCalled","wasCalledWith","some","call","JSON","stringify","setResponse","response","getResponse","defaultResponse","reset","clear","verifyCallCount","expectedCount","actualCount","Error","verifyWasCalled","verifyWasNotCalled","count","exports","MockServiceRegistry","mocks","register","name","mock","resetAll","forEach","mockRegistry"],"sources":["base.mock.ts"],"sourcesContent":["/**\r\n * Base class for mock services\r\n */\r\nexport abstract class BaseMock {\r\n  protected calls: Map<string, any[]> = new Map();\r\n  protected responses: Map<string, any> = new Map();\r\n\r\n  /**\r\n   * Track a method call\r\n   */\r\n  protected trackCall(method: string, args: any[]): void {\r\n    if (!this.calls.has(method)) {\r\n      this.calls.set(method, []);\r\n    }\r\n    this.calls.get(method)!.push(args);\r\n  }\r\n\r\n  /**\r\n   * Get all calls for a method\r\n   */\r\n  getCalls(method: string): any[][] {\r\n    return this.calls.get(method) || [];\r\n  }\r\n\r\n  /**\r\n   * Get call count for a method\r\n   */\r\n  getCallCount(method: string): number {\r\n    return this.getCalls(method).length;\r\n  }\r\n\r\n  /**\r\n   * Check if method was called\r\n   */\r\n  wasCalled(method: string): boolean {\r\n    return this.getCallCount(method) > 0;\r\n  }\r\n\r\n  /**\r\n   * Check if method was called with specific arguments\r\n   */\r\n  wasCalledWith(method: string, ...args: any[]): boolean {\r\n    const calls = this.getCalls(method);\r\n    return calls.some(call => \r\n      JSON.stringify(call) === JSON.stringify(args)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Set response for a method\r\n   */\r\n  setResponse(method: string, response: any): void {\r\n    this.responses.set(method, response);\r\n  }\r\n\r\n  /**\r\n   * Get response for a method\r\n   */\r\n  protected getResponse(method: string, defaultResponse?: any): any {\r\n    return this.responses.get(method) ?? defaultResponse;\r\n  }\r\n\r\n  /**\r\n   * Reset all calls and responses\r\n   */\r\n  reset(): void {\r\n    this.calls.clear();\r\n    this.responses.clear();\r\n  }\r\n\r\n  /**\r\n   * Verify method was called exactly n times\r\n   */\r\n  verifyCallCount(method: string, expectedCount: number): void {\r\n    const actualCount = this.getCallCount(method);\r\n    if (actualCount !== expectedCount) {\r\n      throw new Error(\r\n        `Expected ${method} to be called ${expectedCount} times, but was called ${actualCount} times`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Verify method was called at least once\r\n   */\r\n  verifyWasCalled(method: string): void {\r\n    if (!this.wasCalled(method)) {\r\n      throw new Error(`Expected ${method} to be called at least once`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Verify method was never called\r\n   */\r\n  verifyWasNotCalled(method: string): void {\r\n    if (this.wasCalled(method)) {\r\n      const count = this.getCallCount(method);\r\n      throw new Error(`Expected ${method} to not be called, but was called ${count} times`);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Mock service registry for managing all mocks\r\n */\r\nexport class MockServiceRegistry {\r\n  private mocks: Map<string, BaseMock> = new Map();\r\n\r\n  /**\r\n   * Register a mock service\r\n   */\r\n  register(name: string, mock: BaseMock): void {\r\n    this.mocks.set(name, mock);\r\n  }\r\n\r\n  /**\r\n   * Get a mock service\r\n   */\r\n  get<T extends BaseMock>(name: string): T | undefined {\r\n    return this.mocks.get(name) as T;\r\n  }\r\n\r\n  /**\r\n   * Reset all registered mocks\r\n   */\r\n  resetAll(): void {\r\n    this.mocks.forEach(mock => mock.reset());\r\n  }\r\n\r\n  /**\r\n   * Clear all registered mocks\r\n   */\r\n  clear(): void {\r\n    this.mocks.clear();\r\n  }\r\n}\r\n\r\n// Global mock registry\r\nexport const mockRegistry = new MockServiceRegistry();\r\n"],"mappings":"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","ignoreList":[]}