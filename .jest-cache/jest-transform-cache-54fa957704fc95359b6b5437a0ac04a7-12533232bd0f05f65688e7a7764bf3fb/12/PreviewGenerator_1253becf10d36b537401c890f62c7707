63c5dc7ed46327ab034a85f0db66a676
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PreviewGenerator = void 0;
var fs = _interopRequireWildcard(require("fs"));
var path = _interopRequireWildcard(require("path"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * PreviewGenerator captures before/after screenshots of components
 * when design filters are applied
 */
class PreviewGenerator {
  defaultViewports = [{
    name: 'desktop',
    width: 1920,
    height: 1080
  }, {
    name: 'tablet',
    width: 768,
    height: 1024
  }, {
    name: 'mobile',
    width: 375,
    height: 667
  }];
  constructor(projectRoot) {
    this.projectRoot = projectRoot;
    this.previewDir = path.join(projectRoot, '.azstudio', 'previews');
    this.ensurePreviewDirectory();
  }

  /**
   * Ensure preview directory exists
   */
  ensurePreviewDirectory() {
    if (!fs.existsSync(this.previewDir)) {
      fs.mkdirSync(this.previewDir, {
        recursive: true
      });
    }
  }

  /**
   * Generate before/after preview for design filter application
   */
  async generateFilterPreview(filter, components, options = {}) {
    const {
      maxComponents = 10,
      viewports = this.defaultViewports,
      outputDir = this.previewDir,
      includeMetadata = true
    } = options;
    console.log(`Generating preview for filter: ${filter.name}`);
    console.log(`Components to preview: ${Math.min(components.length, maxComponents)}`);

    // Create filter-specific directory
    const filterDir = path.join(outputDir, this.sanitizeFileName(filter.name));
    if (!fs.existsSync(filterDir)) {
      fs.mkdirSync(filterDir, {
        recursive: true
      });
    }
    const previews = [];
    const componentsToPreview = components.slice(0, maxComponents);
    for (const component of componentsToPreview) {
      try {
        const preview = await this.generateComponentPreview(component, filter, filterDir, viewports);
        previews.push(preview);
      } catch (error) {
        console.warn(`Failed to generate preview for ${component.componentName}:`, error);
      }
    }
    const comparison = {
      filterName: filter.name,
      componentsAffected: components.length,
      previews,
      timestamp: new Date(),
      approved: false
    };

    // Save comparison metadata
    if (includeMetadata) {
      await this.saveComparisonMetadata(comparison, filterDir);
    }

    // Generate HTML comparison view
    await this.generateComparisonHTML(comparison, filterDir);
    console.log(`Preview generated at: ${filterDir}`);
    return comparison;
  }

  /**
   * Generate preview for a single component
   */
  async generateComponentPreview(component, filter, outputDir, viewports) {
    const componentDir = path.join(outputDir, this.sanitizeFileName(component.componentName));
    if (!fs.existsSync(componentDir)) {
      fs.mkdirSync(componentDir, {
        recursive: true
      });
    }

    // Capture before screenshot
    const beforeScreenshot = await this.captureComponentScreenshot(component, 'before', componentDir, viewports[0] // Use desktop viewport by default
    );

    // Simulate after state (in real implementation, this would apply the filter temporarily)
    const afterScreenshot = await this.captureComponentScreenshot(component, 'after', componentDir, viewports[0]);

    // Extract changes from component
    const changes = this.extractChanges(component, filter);
    return {
      componentPath: component.filePath,
      componentName: component.componentName,
      before: beforeScreenshot,
      after: afterScreenshot,
      changes
    };
  }

  /**
   * Capture screenshot of a component
   * Note: This is a placeholder implementation. In production, this would:
   * 1. Start a dev server or use existing one
   * 2. Use Playwright/Puppeteer to render the component
   * 3. Capture actual screenshots
   */
  async captureComponentScreenshot(component, stage, outputDir, viewport) {
    const timestamp = new Date();
    const fileName = `${stage}-${viewport.name}-${timestamp.getTime()}.png`;
    const imagePath = path.join(outputDir, fileName);

    // Placeholder: Create a metadata file instead of actual screenshot
    // In production, this would use Playwright to capture real screenshots
    const placeholderData = {
      component: component.componentName,
      stage,
      viewport: viewport.name,
      timestamp: timestamp.toISOString(),
      note: 'Placeholder - actual screenshot would be captured here'
    };

    // Write placeholder metadata
    const metadataPath = imagePath.replace('.png', '.json');
    await fs.promises.writeFile(metadataPath, JSON.stringify(placeholderData, null, 2), 'utf-8');

    // Create a simple placeholder image file (empty file for now)
    await fs.promises.writeFile(imagePath, '', 'utf-8');
    return {
      componentPath: component.filePath,
      componentName: component.componentName,
      imagePath,
      timestamp,
      metadata: {
        width: viewport.width,
        height: viewport.height,
        viewport: viewport.name
      }
    };
  }

  /**
   * Extract changes that will be applied to component
   */
  extractChanges(component, filter) {
    const changes = [];

    // Check class transformations
    if (filter.classTransforms) {
      for (const className of component.classNames) {
        for (const [oldClass, newClass] of Object.entries(filter.classTransforms)) {
          if (className.includes(oldClass)) {
            changes.push(`Class: ${oldClass} → ${newClass}`);
          }
        }
      }
    }

    // Check token updates
    if (filter.tokens && filter.tokens.colors) {
      changes.push('Colors: Updated to new palette');
    }
    if (filter.tokens && filter.tokens.borderRadius) {
      changes.push('Border Radius: Updated to new scale');
    }
    if (filter.tokens && filter.tokens.shadows) {
      changes.push('Shadows: Updated to new elevation');
    }

    // Check inline styles
    if (component.hasInlineStyles) {
      changes.push(`Inline Styles: ${component.inlineStyles.length} styles to convert`);
    }

    // Check CSS modules
    if (component.hasCSSModule) {
      changes.push('CSS Module: Will be updated with new tokens');
    }
    return changes;
  }

  /**
   * Save comparison metadata to JSON file
   */
  async saveComparisonMetadata(comparison, outputDir) {
    const metadataPath = path.join(outputDir, 'comparison-metadata.json');
    const metadata = {
      filterName: comparison.filterName,
      componentsAffected: comparison.componentsAffected,
      previewsGenerated: comparison.previews.length,
      timestamp: comparison.timestamp.toISOString(),
      approved: comparison.approved,
      previews: comparison.previews.map(p => ({
        componentName: p.componentName,
        componentPath: p.componentPath,
        changes: p.changes,
        beforeImage: path.relative(outputDir, p.before.imagePath),
        afterImage: path.relative(outputDir, p.after.imagePath)
      }))
    };
    await fs.promises.writeFile(metadataPath, JSON.stringify(metadata, null, 2), 'utf-8');
  }

  /**
   * Generate HTML comparison view
   */
  async generateComparisonHTML(comparison, outputDir) {
    const htmlPath = path.join(outputDir, 'comparison.html');
    const html = this.buildComparisonHTML(comparison, outputDir);
    await fs.promises.writeFile(htmlPath, html, 'utf-8');
  }

  /**
   * Build HTML for comparison view
   */
  buildComparisonHTML(comparison, baseDir) {
    const previewsHTML = comparison.previews.map(preview => {
      const beforePath = path.relative(baseDir, preview.before.imagePath);
      const afterPath = path.relative(baseDir, preview.after.imagePath);
      const changesHTML = preview.changes.map(change => `<li>${this.escapeHtml(change)}</li>`).join('');
      return `
          <div class="component-preview">
            <h3>${this.escapeHtml(preview.componentName)}</h3>
            <p class="component-path">${this.escapeHtml(preview.componentPath)}</p>
            
            <div class="comparison-container">
              <div class="screenshot-container">
                <h4>Before</h4>
                <div class="screenshot-placeholder">
                  <p>Screenshot: ${beforePath}</p>
                  <p class="note">Actual screenshot would be displayed here</p>
                </div>
              </div>
              
              <div class="screenshot-container">
                <h4>After</h4>
                <div class="screenshot-placeholder">
                  <p>Screenshot: ${afterPath}</p>
                  <p class="note">Actual screenshot would be displayed here</p>
                </div>
              </div>
            </div>
            
            <div class="changes">
              <h4>Changes Applied</h4>
              <ul>${changesHTML}</ul>
            </div>
          </div>
        `;
    }).join('');
    return `
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Design Filter Preview: ${this.escapeHtml(comparison.filterName)}</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      padding: 2rem;
      color: #333;
    }
    
    .header {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      margin-bottom: 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .header h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: #1a1a1a;
    }
    
    .header .meta {
      color: #666;
      font-size: 0.9rem;
    }
    
    .actions {
      margin-top: 1rem;
      display: flex;
      gap: 1rem;
    }
    
    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .btn-approve {
      background: #22c55e;
      color: white;
    }
    
    .btn-approve:hover {
      background: #16a34a;
    }
    
    .btn-reject {
      background: #ef4444;
      color: white;
    }
    
    .btn-reject:hover {
      background: #dc2626;
    }
    
    .component-preview {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      margin-bottom: 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .component-preview h3 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      color: #1a1a1a;
    }
    
    .component-path {
      color: #666;
      font-size: 0.85rem;
      margin-bottom: 1.5rem;
      font-family: monospace;
    }
    
    .comparison-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 1.5rem;
    }
    
    .screenshot-container h4 {
      font-size: 1rem;
      margin-bottom: 0.75rem;
      color: #555;
    }
    
    .screenshot-placeholder {
      background: #f9f9f9;
      border: 2px dashed #ddd;
      border-radius: 6px;
      padding: 3rem 2rem;
      text-align: center;
      color: #999;
    }
    
    .screenshot-placeholder .note {
      margin-top: 0.5rem;
      font-size: 0.85rem;
      font-style: italic;
    }
    
    .changes {
      border-top: 1px solid #eee;
      padding-top: 1.5rem;
    }
    
    .changes h4 {
      font-size: 1rem;
      margin-bottom: 0.75rem;
      color: #555;
    }
    
    .changes ul {
      list-style: none;
      padding-left: 0;
    }
    
    .changes li {
      padding: 0.5rem 0;
      padding-left: 1.5rem;
      position: relative;
    }
    
    .changes li:before {
      content: '→';
      position: absolute;
      left: 0;
      color: #3b82f6;
      font-weight: bold;
    }
    
    @media (max-width: 768px) {
      .comparison-container {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Design Filter Preview: ${this.escapeHtml(comparison.filterName)}</h1>
    <div class="meta">
      <p>Generated: ${comparison.timestamp.toLocaleString()}</p>
      <p>Components Affected: ${comparison.componentsAffected}</p>
      <p>Previews Generated: ${comparison.previews.length}</p>
    </div>
    <div class="actions">
      <button class="btn btn-approve" onclick="approveChanges()">
        ✓ Approve Changes
      </button>
      <button class="btn btn-reject" onclick="rejectChanges()">
        ✗ Reject Changes
      </button>
    </div>
  </div>
  
  ${previewsHTML}
  
  <script>
    function approveChanges() {
      if (confirm('Approve and apply all design filter changes?')) {
        alert('Changes approved! The design filter will be applied.');
        // In production, this would trigger IPC to apply changes
      }
    }
    
    function rejectChanges() {
      if (confirm('Reject all design filter changes?')) {
        alert('Changes rejected. No modifications will be made.');
        // In production, this would trigger IPC to cancel
      }
    }
  </script>
</body>
</html>
    `.trim();
  }

  /**
   * Escape HTML special characters
   */
  escapeHtml(text) {
    const map = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#039;'
    };
    return text.replace(/[&<>"']/g, m => map[m]);
  }

  /**
   * Sanitize file name
   */
  sanitizeFileName(name) {
    return name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
  }

  /**
   * Load existing comparison
   */
  async loadComparison(filterName) {
    const filterDir = path.join(this.previewDir, this.sanitizeFileName(filterName));
    const metadataPath = path.join(filterDir, 'comparison-metadata.json');
    if (!fs.existsSync(metadataPath)) {
      return null;
    }
    try {
      const content = await fs.promises.readFile(metadataPath, 'utf-8');
      const metadata = JSON.parse(content);
      return {
        filterName: metadata.filterName,
        componentsAffected: metadata.componentsAffected,
        previews: [],
        // Would need to reconstruct from metadata
        timestamp: new Date(metadata.timestamp),
        approved: metadata.approved
      };
    } catch (error) {
      console.error('Failed to load comparison:', error);
      return null;
    }
  }

  /**
   * Approve comparison and mark for application
   */
  async approveComparison(filterName) {
    const comparison = await this.loadComparison(filterName);
    if (!comparison) {
      return false;
    }
    comparison.approved = true;
    const filterDir = path.join(this.previewDir, this.sanitizeFileName(filterName));
    await this.saveComparisonMetadata(comparison, filterDir);
    return true;
  }

  /**
   * Reject comparison and clean up
   */
  async rejectComparison(filterName) {
    const filterDir = path.join(this.previewDir, this.sanitizeFileName(filterName));
    if (!fs.existsSync(filterDir)) {
      return false;
    }

    // Mark as rejected in metadata
    const comparison = await this.loadComparison(filterName);
    if (comparison) {
      comparison.approved = false;
      await this.saveComparisonMetadata(comparison, filterDir);
    }
    return true;
  }

  /**
   * Clean up old previews
   */
  async cleanupOldPreviews(daysOld = 7) {
    const cutoffDate = new Date();
    cutoffDate.setDate(cutoffDate.getDate() - daysOld);
    let cleaned = 0;
    const entries = await fs.promises.readdir(this.previewDir, {
      withFileTypes: true
    });
    for (const entry of entries) {
      if (entry.isDirectory()) {
        const dirPath = path.join(this.previewDir, entry.name);
        const metadataPath = path.join(dirPath, 'comparison-metadata.json');
        if (fs.existsSync(metadataPath)) {
          try {
            const content = await fs.promises.readFile(metadataPath, 'utf-8');
            const metadata = JSON.parse(content);
            const timestamp = new Date(metadata.timestamp);
            if (timestamp < cutoffDate) {
              await fs.promises.rm(dirPath, {
                recursive: true,
                force: true
              });
              cleaned++;
            }
          } catch (error) {
            console.warn(`Failed to process ${dirPath}:`, error);
          }
        }
      }
    }
    return cleaned;
  }

  /**
   * Get all available previews
   */
  async listPreviews() {
    const previews = [];
    if (!fs.existsSync(this.previewDir)) {
      return previews;
    }
    const entries = await fs.promises.readdir(this.previewDir, {
      withFileTypes: true
    });
    for (const entry of entries) {
      if (entry.isDirectory()) {
        const comparison = await this.loadComparison(entry.name);
        if (comparison) {
          previews.push({
            filterName: comparison.filterName,
            timestamp: comparison.timestamp,
            approved: comparison.approved
          });
        }
      }
    }
    return previews.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());
  }
}
exports.PreviewGenerator = PreviewGenerator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsInBhdGgiLCJlIiwidCIsIldlYWtNYXAiLCJyIiwibiIsIl9fZXNNb2R1bGUiLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJkZWZhdWx0IiwiaGFzIiwiZ2V0Iiwic2V0IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJQcmV2aWV3R2VuZXJhdG9yIiwiZGVmYXVsdFZpZXdwb3J0cyIsIm5hbWUiLCJ3aWR0aCIsImhlaWdodCIsImNvbnN0cnVjdG9yIiwicHJvamVjdFJvb3QiLCJwcmV2aWV3RGlyIiwiam9pbiIsImVuc3VyZVByZXZpZXdEaXJlY3RvcnkiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiZ2VuZXJhdGVGaWx0ZXJQcmV2aWV3IiwiZmlsdGVyIiwiY29tcG9uZW50cyIsIm9wdGlvbnMiLCJtYXhDb21wb25lbnRzIiwidmlld3BvcnRzIiwib3V0cHV0RGlyIiwiaW5jbHVkZU1ldGFkYXRhIiwiY29uc29sZSIsImxvZyIsIk1hdGgiLCJtaW4iLCJsZW5ndGgiLCJmaWx0ZXJEaXIiLCJzYW5pdGl6ZUZpbGVOYW1lIiwicHJldmlld3MiLCJjb21wb25lbnRzVG9QcmV2aWV3Iiwic2xpY2UiLCJjb21wb25lbnQiLCJwcmV2aWV3IiwiZ2VuZXJhdGVDb21wb25lbnRQcmV2aWV3IiwicHVzaCIsImVycm9yIiwid2FybiIsImNvbXBvbmVudE5hbWUiLCJjb21wYXJpc29uIiwiZmlsdGVyTmFtZSIsImNvbXBvbmVudHNBZmZlY3RlZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJhcHByb3ZlZCIsInNhdmVDb21wYXJpc29uTWV0YWRhdGEiLCJnZW5lcmF0ZUNvbXBhcmlzb25IVE1MIiwiY29tcG9uZW50RGlyIiwiYmVmb3JlU2NyZWVuc2hvdCIsImNhcHR1cmVDb21wb25lbnRTY3JlZW5zaG90IiwiYWZ0ZXJTY3JlZW5zaG90IiwiY2hhbmdlcyIsImV4dHJhY3RDaGFuZ2VzIiwiY29tcG9uZW50UGF0aCIsImZpbGVQYXRoIiwiYmVmb3JlIiwiYWZ0ZXIiLCJzdGFnZSIsInZpZXdwb3J0IiwiZmlsZU5hbWUiLCJnZXRUaW1lIiwiaW1hZ2VQYXRoIiwicGxhY2Vob2xkZXJEYXRhIiwidG9JU09TdHJpbmciLCJub3RlIiwibWV0YWRhdGFQYXRoIiwicmVwbGFjZSIsInByb21pc2VzIiwid3JpdGVGaWxlIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1ldGFkYXRhIiwiY2xhc3NUcmFuc2Zvcm1zIiwiY2xhc3NOYW1lIiwiY2xhc3NOYW1lcyIsIm9sZENsYXNzIiwibmV3Q2xhc3MiLCJlbnRyaWVzIiwiaW5jbHVkZXMiLCJ0b2tlbnMiLCJjb2xvcnMiLCJib3JkZXJSYWRpdXMiLCJzaGFkb3dzIiwiaGFzSW5saW5lU3R5bGVzIiwiaW5saW5lU3R5bGVzIiwiaGFzQ1NTTW9kdWxlIiwicHJldmlld3NHZW5lcmF0ZWQiLCJtYXAiLCJwIiwiYmVmb3JlSW1hZ2UiLCJyZWxhdGl2ZSIsImFmdGVySW1hZ2UiLCJodG1sUGF0aCIsImh0bWwiLCJidWlsZENvbXBhcmlzb25IVE1MIiwiYmFzZURpciIsInByZXZpZXdzSFRNTCIsImJlZm9yZVBhdGgiLCJhZnRlclBhdGgiLCJjaGFuZ2VzSFRNTCIsImNoYW5nZSIsImVzY2FwZUh0bWwiLCJ0b0xvY2FsZVN0cmluZyIsInRyaW0iLCJ0ZXh0IiwibSIsInRvTG93ZXJDYXNlIiwibG9hZENvbXBhcmlzb24iLCJjb250ZW50IiwicmVhZEZpbGUiLCJwYXJzZSIsImFwcHJvdmVDb21wYXJpc29uIiwicmVqZWN0Q29tcGFyaXNvbiIsImNsZWFudXBPbGRQcmV2aWV3cyIsImRheXNPbGQiLCJjdXRvZmZEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJjbGVhbmVkIiwicmVhZGRpciIsIndpdGhGaWxlVHlwZXMiLCJlbnRyeSIsImlzRGlyZWN0b3J5IiwiZGlyUGF0aCIsInJtIiwiZm9yY2UiLCJsaXN0UHJldmlld3MiLCJzb3J0IiwiYSIsImIiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiUHJldmlld0dlbmVyYXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgRGVzaWduRmlsdGVyIH0gZnJvbSAnLi9EZXNpZ25GaWx0ZXJFbmdpbmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50U3R5bGVJbmZvIH0gZnJvbSAnLi9Db21wb25lbnRTdHlsZVJlZmFjdG9yJztcblxuZXhwb3J0IGludGVyZmFjZSBTY3JlZW5zaG90IHtcbiAgY29tcG9uZW50UGF0aDogc3RyaW5nO1xuICBjb21wb25lbnROYW1lOiBzdHJpbmc7XG4gIGltYWdlUGF0aDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIG1ldGFkYXRhOiB7XG4gICAgd2lkdGg6IG51bWJlcjtcbiAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICB2aWV3cG9ydDogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFByZXZpZXcge1xuICBjb21wb25lbnRQYXRoOiBzdHJpbmc7XG4gIGNvbXBvbmVudE5hbWU6IHN0cmluZztcbiAgYmVmb3JlOiBTY3JlZW5zaG90O1xuICBhZnRlcjogU2NyZWVuc2hvdDtcbiAgY2hhbmdlczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJldmlld0NvbXBhcmlzb24ge1xuICBmaWx0ZXJOYW1lOiBzdHJpbmc7XG4gIGNvbXBvbmVudHNBZmZlY3RlZDogbnVtYmVyO1xuICBwcmV2aWV3czogQ29tcG9uZW50UHJldmlld1tdO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIGFwcHJvdmVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByZXZpZXdPcHRpb25zIHtcbiAgbWF4Q29tcG9uZW50cz86IG51bWJlcjtcbiAgdmlld3BvcnRzPzogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH0+O1xuICBvdXRwdXREaXI/OiBzdHJpbmc7XG4gIGluY2x1ZGVNZXRhZGF0YT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogUHJldmlld0dlbmVyYXRvciBjYXB0dXJlcyBiZWZvcmUvYWZ0ZXIgc2NyZWVuc2hvdHMgb2YgY29tcG9uZW50c1xuICogd2hlbiBkZXNpZ24gZmlsdGVycyBhcmUgYXBwbGllZFxuICovXG5leHBvcnQgY2xhc3MgUHJldmlld0dlbmVyYXRvciB7XG4gIHByaXZhdGUgcHJvamVjdFJvb3Q6IHN0cmluZztcbiAgcHJpdmF0ZSBwcmV2aWV3RGlyOiBzdHJpbmc7XG4gIHByaXZhdGUgZGVmYXVsdFZpZXdwb3J0cyA9IFtcbiAgICB7IG5hbWU6ICdkZXNrdG9wJywgd2lkdGg6IDE5MjAsIGhlaWdodDogMTA4MCB9LFxuICAgIHsgbmFtZTogJ3RhYmxldCcsIHdpZHRoOiA3NjgsIGhlaWdodDogMTAyNCB9LFxuICAgIHsgbmFtZTogJ21vYmlsZScsIHdpZHRoOiAzNzUsIGhlaWdodDogNjY3IH0sXG4gIF07XG5cbiAgY29uc3RydWN0b3IocHJvamVjdFJvb3Q6IHN0cmluZykge1xuICAgIHRoaXMucHJvamVjdFJvb3QgPSBwcm9qZWN0Um9vdDtcbiAgICB0aGlzLnByZXZpZXdEaXIgPSBwYXRoLmpvaW4ocHJvamVjdFJvb3QsICcuYXpzdHVkaW8nLCAncHJldmlld3MnKTtcbiAgICB0aGlzLmVuc3VyZVByZXZpZXdEaXJlY3RvcnkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgcHJldmlldyBkaXJlY3RvcnkgZXhpc3RzXG4gICAqL1xuICBwcml2YXRlIGVuc3VyZVByZXZpZXdEaXJlY3RvcnkoKTogdm9pZCB7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHRoaXMucHJldmlld0RpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyh0aGlzLnByZXZpZXdEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBiZWZvcmUvYWZ0ZXIgcHJldmlldyBmb3IgZGVzaWduIGZpbHRlciBhcHBsaWNhdGlvblxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVGaWx0ZXJQcmV2aWV3KFxuICAgIGZpbHRlcjogRGVzaWduRmlsdGVyLFxuICAgIGNvbXBvbmVudHM6IENvbXBvbmVudFN0eWxlSW5mb1tdLFxuICAgIG9wdGlvbnM6IFByZXZpZXdPcHRpb25zID0ge31cbiAgKTogUHJvbWlzZTxQcmV2aWV3Q29tcGFyaXNvbj4ge1xuICAgIGNvbnN0IHtcbiAgICAgIG1heENvbXBvbmVudHMgPSAxMCxcbiAgICAgIHZpZXdwb3J0cyA9IHRoaXMuZGVmYXVsdFZpZXdwb3J0cyxcbiAgICAgIG91dHB1dERpciA9IHRoaXMucHJldmlld0RpcixcbiAgICAgIGluY2x1ZGVNZXRhZGF0YSA9IHRydWUsXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zb2xlLmxvZyhgR2VuZXJhdGluZyBwcmV2aWV3IGZvciBmaWx0ZXI6ICR7ZmlsdGVyLm5hbWV9YCk7XG4gICAgY29uc29sZS5sb2coYENvbXBvbmVudHMgdG8gcHJldmlldzogJHtNYXRoLm1pbihjb21wb25lbnRzLmxlbmd0aCwgbWF4Q29tcG9uZW50cyl9YCk7XG5cbiAgICAvLyBDcmVhdGUgZmlsdGVyLXNwZWNpZmljIGRpcmVjdG9yeVxuICAgIGNvbnN0IGZpbHRlckRpciA9IHBhdGguam9pbihvdXRwdXREaXIsIHRoaXMuc2FuaXRpemVGaWxlTmFtZShmaWx0ZXIubmFtZSkpO1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhmaWx0ZXJEaXIpKSB7XG4gICAgICBmcy5ta2RpclN5bmMoZmlsdGVyRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBwcmV2aWV3czogQ29tcG9uZW50UHJldmlld1tdID0gW107XG4gICAgY29uc3QgY29tcG9uZW50c1RvUHJldmlldyA9IGNvbXBvbmVudHMuc2xpY2UoMCwgbWF4Q29tcG9uZW50cyk7XG5cbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBjb21wb25lbnRzVG9QcmV2aWV3KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwcmV2aWV3ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUNvbXBvbmVudFByZXZpZXcoXG4gICAgICAgICAgY29tcG9uZW50LFxuICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICBmaWx0ZXJEaXIsXG4gICAgICAgICAgdmlld3BvcnRzXG4gICAgICAgICk7XG4gICAgICAgIHByZXZpZXdzLnB1c2gocHJldmlldyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBnZW5lcmF0ZSBwcmV2aWV3IGZvciAke2NvbXBvbmVudC5jb21wb25lbnROYW1lfTpgLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY29tcGFyaXNvbjogUHJldmlld0NvbXBhcmlzb24gPSB7XG4gICAgICBmaWx0ZXJOYW1lOiBmaWx0ZXIubmFtZSxcbiAgICAgIGNvbXBvbmVudHNBZmZlY3RlZDogY29tcG9uZW50cy5sZW5ndGgsXG4gICAgICBwcmV2aWV3cyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICB9O1xuXG4gICAgLy8gU2F2ZSBjb21wYXJpc29uIG1ldGFkYXRhXG4gICAgaWYgKGluY2x1ZGVNZXRhZGF0YSkge1xuICAgICAgYXdhaXQgdGhpcy5zYXZlQ29tcGFyaXNvbk1ldGFkYXRhKGNvbXBhcmlzb24sIGZpbHRlckRpcik7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgSFRNTCBjb21wYXJpc29uIHZpZXdcbiAgICBhd2FpdCB0aGlzLmdlbmVyYXRlQ29tcGFyaXNvbkhUTUwoY29tcGFyaXNvbiwgZmlsdGVyRGlyKTtcblxuICAgIGNvbnNvbGUubG9nKGBQcmV2aWV3IGdlbmVyYXRlZCBhdDogJHtmaWx0ZXJEaXJ9YCk7XG4gICAgcmV0dXJuIGNvbXBhcmlzb247XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcHJldmlldyBmb3IgYSBzaW5nbGUgY29tcG9uZW50XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlQ29tcG9uZW50UHJldmlldyhcbiAgICBjb21wb25lbnQ6IENvbXBvbmVudFN0eWxlSW5mbyxcbiAgICBmaWx0ZXI6IERlc2lnbkZpbHRlcixcbiAgICBvdXRwdXREaXI6IHN0cmluZyxcbiAgICB2aWV3cG9ydHM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9PlxuICApOiBQcm9taXNlPENvbXBvbmVudFByZXZpZXc+IHtcbiAgICBjb25zdCBjb21wb25lbnREaXIgPSBwYXRoLmpvaW4oXG4gICAgICBvdXRwdXREaXIsXG4gICAgICB0aGlzLnNhbml0aXplRmlsZU5hbWUoY29tcG9uZW50LmNvbXBvbmVudE5hbWUpXG4gICAgKTtcbiAgICBcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoY29tcG9uZW50RGlyKSkge1xuICAgICAgZnMubWtkaXJTeW5jKGNvbXBvbmVudERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2FwdHVyZSBiZWZvcmUgc2NyZWVuc2hvdFxuICAgIGNvbnN0IGJlZm9yZVNjcmVlbnNob3QgPSBhd2FpdCB0aGlzLmNhcHR1cmVDb21wb25lbnRTY3JlZW5zaG90KFxuICAgICAgY29tcG9uZW50LFxuICAgICAgJ2JlZm9yZScsXG4gICAgICBjb21wb25lbnREaXIsXG4gICAgICB2aWV3cG9ydHNbMF0gLy8gVXNlIGRlc2t0b3Agdmlld3BvcnQgYnkgZGVmYXVsdFxuICAgICk7XG5cbiAgICAvLyBTaW11bGF0ZSBhZnRlciBzdGF0ZSAoaW4gcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBhcHBseSB0aGUgZmlsdGVyIHRlbXBvcmFyaWx5KVxuICAgIGNvbnN0IGFmdGVyU2NyZWVuc2hvdCA9IGF3YWl0IHRoaXMuY2FwdHVyZUNvbXBvbmVudFNjcmVlbnNob3QoXG4gICAgICBjb21wb25lbnQsXG4gICAgICAnYWZ0ZXInLFxuICAgICAgY29tcG9uZW50RGlyLFxuICAgICAgdmlld3BvcnRzWzBdXG4gICAgKTtcblxuICAgIC8vIEV4dHJhY3QgY2hhbmdlcyBmcm9tIGNvbXBvbmVudFxuICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLmV4dHJhY3RDaGFuZ2VzKGNvbXBvbmVudCwgZmlsdGVyKTtcblxuICAgIHJldHVybiB7XG4gICAgICBjb21wb25lbnRQYXRoOiBjb21wb25lbnQuZmlsZVBhdGgsXG4gICAgICBjb21wb25lbnROYW1lOiBjb21wb25lbnQuY29tcG9uZW50TmFtZSxcbiAgICAgIGJlZm9yZTogYmVmb3JlU2NyZWVuc2hvdCxcbiAgICAgIGFmdGVyOiBhZnRlclNjcmVlbnNob3QsXG4gICAgICBjaGFuZ2VzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2FwdHVyZSBzY3JlZW5zaG90IG9mIGEgY29tcG9uZW50XG4gICAqIE5vdGU6IFRoaXMgaXMgYSBwbGFjZWhvbGRlciBpbXBsZW1lbnRhdGlvbi4gSW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZDpcbiAgICogMS4gU3RhcnQgYSBkZXYgc2VydmVyIG9yIHVzZSBleGlzdGluZyBvbmVcbiAgICogMi4gVXNlIFBsYXl3cmlnaHQvUHVwcGV0ZWVyIHRvIHJlbmRlciB0aGUgY29tcG9uZW50XG4gICAqIDMuIENhcHR1cmUgYWN0dWFsIHNjcmVlbnNob3RzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNhcHR1cmVDb21wb25lbnRTY3JlZW5zaG90KFxuICAgIGNvbXBvbmVudDogQ29tcG9uZW50U3R5bGVJbmZvLFxuICAgIHN0YWdlOiAnYmVmb3JlJyB8ICdhZnRlcicsXG4gICAgb3V0cHV0RGlyOiBzdHJpbmcsXG4gICAgdmlld3BvcnQ6IHsgbmFtZTogc3RyaW5nOyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9XG4gICk6IFByb21pc2U8U2NyZWVuc2hvdD4ge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZmlsZU5hbWUgPSBgJHtzdGFnZX0tJHt2aWV3cG9ydC5uYW1lfS0ke3RpbWVzdGFtcC5nZXRUaW1lKCl9LnBuZ2A7XG4gICAgY29uc3QgaW1hZ2VQYXRoID0gcGF0aC5qb2luKG91dHB1dERpciwgZmlsZU5hbWUpO1xuXG4gICAgLy8gUGxhY2Vob2xkZXI6IENyZWF0ZSBhIG1ldGFkYXRhIGZpbGUgaW5zdGVhZCBvZiBhY3R1YWwgc2NyZWVuc2hvdFxuICAgIC8vIEluIHByb2R1Y3Rpb24sIHRoaXMgd291bGQgdXNlIFBsYXl3cmlnaHQgdG8gY2FwdHVyZSByZWFsIHNjcmVlbnNob3RzXG4gICAgY29uc3QgcGxhY2Vob2xkZXJEYXRhID0ge1xuICAgICAgY29tcG9uZW50OiBjb21wb25lbnQuY29tcG9uZW50TmFtZSxcbiAgICAgIHN0YWdlLFxuICAgICAgdmlld3BvcnQ6IHZpZXdwb3J0Lm5hbWUsXG4gICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcC50b0lTT1N0cmluZygpLFxuICAgICAgbm90ZTogJ1BsYWNlaG9sZGVyIC0gYWN0dWFsIHNjcmVlbnNob3Qgd291bGQgYmUgY2FwdHVyZWQgaGVyZScsXG4gICAgfTtcblxuICAgIC8vIFdyaXRlIHBsYWNlaG9sZGVyIG1ldGFkYXRhXG4gICAgY29uc3QgbWV0YWRhdGFQYXRoID0gaW1hZ2VQYXRoLnJlcGxhY2UoJy5wbmcnLCAnLmpzb24nKTtcbiAgICBhd2FpdCBmcy5wcm9taXNlcy53cml0ZUZpbGUoXG4gICAgICBtZXRhZGF0YVBhdGgsXG4gICAgICBKU09OLnN0cmluZ2lmeShwbGFjZWhvbGRlckRhdGEsIG51bGwsIDIpLFxuICAgICAgJ3V0Zi04J1xuICAgICk7XG5cbiAgICAvLyBDcmVhdGUgYSBzaW1wbGUgcGxhY2Vob2xkZXIgaW1hZ2UgZmlsZSAoZW1wdHkgZmlsZSBmb3Igbm93KVxuICAgIGF3YWl0IGZzLnByb21pc2VzLndyaXRlRmlsZShpbWFnZVBhdGgsICcnLCAndXRmLTgnKTtcblxuICAgIHJldHVybiB7XG4gICAgICBjb21wb25lbnRQYXRoOiBjb21wb25lbnQuZmlsZVBhdGgsXG4gICAgICBjb21wb25lbnROYW1lOiBjb21wb25lbnQuY29tcG9uZW50TmFtZSxcbiAgICAgIGltYWdlUGF0aCxcbiAgICAgIHRpbWVzdGFtcCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHdpZHRoOiB2aWV3cG9ydC53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiB2aWV3cG9ydC5oZWlnaHQsXG4gICAgICAgIHZpZXdwb3J0OiB2aWV3cG9ydC5uYW1lLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgY2hhbmdlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byBjb21wb25lbnRcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdENoYW5nZXMoXG4gICAgY29tcG9uZW50OiBDb21wb25lbnRTdHlsZUluZm8sXG4gICAgZmlsdGVyOiBEZXNpZ25GaWx0ZXJcbiAgKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGNoYW5nZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBDaGVjayBjbGFzcyB0cmFuc2Zvcm1hdGlvbnNcbiAgICBpZiAoZmlsdGVyLmNsYXNzVHJhbnNmb3Jtcykge1xuICAgICAgZm9yIChjb25zdCBjbGFzc05hbWUgb2YgY29tcG9uZW50LmNsYXNzTmFtZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBbb2xkQ2xhc3MsIG5ld0NsYXNzXSBvZiBPYmplY3QuZW50cmllcyhmaWx0ZXIuY2xhc3NUcmFuc2Zvcm1zKSkge1xuICAgICAgICAgIGlmIChjbGFzc05hbWUuaW5jbHVkZXMob2xkQ2xhc3MpKSB7XG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goYENsYXNzOiAke29sZENsYXNzfSDihpIgJHtuZXdDbGFzc31gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayB0b2tlbiB1cGRhdGVzXG4gICAgaWYgKGZpbHRlci50b2tlbnMgJiYgZmlsdGVyLnRva2Vucy5jb2xvcnMpIHtcbiAgICAgIGNoYW5nZXMucHVzaCgnQ29sb3JzOiBVcGRhdGVkIHRvIG5ldyBwYWxldHRlJyk7XG4gICAgfVxuXG4gICAgaWYgKGZpbHRlci50b2tlbnMgJiYgZmlsdGVyLnRva2Vucy5ib3JkZXJSYWRpdXMpIHtcbiAgICAgIGNoYW5nZXMucHVzaCgnQm9yZGVyIFJhZGl1czogVXBkYXRlZCB0byBuZXcgc2NhbGUnKTtcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVyLnRva2VucyAmJiBmaWx0ZXIudG9rZW5zLnNoYWRvd3MpIHtcbiAgICAgIGNoYW5nZXMucHVzaCgnU2hhZG93czogVXBkYXRlZCB0byBuZXcgZWxldmF0aW9uJyk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaW5saW5lIHN0eWxlc1xuICAgIGlmIChjb21wb25lbnQuaGFzSW5saW5lU3R5bGVzKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goYElubGluZSBTdHlsZXM6ICR7Y29tcG9uZW50LmlubGluZVN0eWxlcy5sZW5ndGh9IHN0eWxlcyB0byBjb252ZXJ0YCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgQ1NTIG1vZHVsZXNcbiAgICBpZiAoY29tcG9uZW50Lmhhc0NTU01vZHVsZSkge1xuICAgICAgY2hhbmdlcy5wdXNoKCdDU1MgTW9kdWxlOiBXaWxsIGJlIHVwZGF0ZWQgd2l0aCBuZXcgdG9rZW5zJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSBjb21wYXJpc29uIG1ldGFkYXRhIHRvIEpTT04gZmlsZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQ29tcGFyaXNvbk1ldGFkYXRhKFxuICAgIGNvbXBhcmlzb246IFByZXZpZXdDb21wYXJpc29uLFxuICAgIG91dHB1dERpcjogc3RyaW5nXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG1ldGFkYXRhUGF0aCA9IHBhdGguam9pbihvdXRwdXREaXIsICdjb21wYXJpc29uLW1ldGFkYXRhLmpzb24nKTtcbiAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgIGZpbHRlck5hbWU6IGNvbXBhcmlzb24uZmlsdGVyTmFtZSxcbiAgICAgIGNvbXBvbmVudHNBZmZlY3RlZDogY29tcGFyaXNvbi5jb21wb25lbnRzQWZmZWN0ZWQsXG4gICAgICBwcmV2aWV3c0dlbmVyYXRlZDogY29tcGFyaXNvbi5wcmV2aWV3cy5sZW5ndGgsXG4gICAgICB0aW1lc3RhbXA6IGNvbXBhcmlzb24udGltZXN0YW1wLnRvSVNPU3RyaW5nKCksXG4gICAgICBhcHByb3ZlZDogY29tcGFyaXNvbi5hcHByb3ZlZCxcbiAgICAgIHByZXZpZXdzOiBjb21wYXJpc29uLnByZXZpZXdzLm1hcChwID0+ICh7XG4gICAgICAgIGNvbXBvbmVudE5hbWU6IHAuY29tcG9uZW50TmFtZSxcbiAgICAgICAgY29tcG9uZW50UGF0aDogcC5jb21wb25lbnRQYXRoLFxuICAgICAgICBjaGFuZ2VzOiBwLmNoYW5nZXMsXG4gICAgICAgIGJlZm9yZUltYWdlOiBwYXRoLnJlbGF0aXZlKG91dHB1dERpciwgcC5iZWZvcmUuaW1hZ2VQYXRoKSxcbiAgICAgICAgYWZ0ZXJJbWFnZTogcGF0aC5yZWxhdGl2ZShvdXRwdXREaXIsIHAuYWZ0ZXIuaW1hZ2VQYXRoKSxcbiAgICAgIH0pKSxcbiAgICB9O1xuXG4gICAgYXdhaXQgZnMucHJvbWlzZXMud3JpdGVGaWxlKFxuICAgICAgbWV0YWRhdGFQYXRoLFxuICAgICAgSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEsIG51bGwsIDIpLFxuICAgICAgJ3V0Zi04J1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgSFRNTCBjb21wYXJpc29uIHZpZXdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVDb21wYXJpc29uSFRNTChcbiAgICBjb21wYXJpc29uOiBQcmV2aWV3Q29tcGFyaXNvbixcbiAgICBvdXRwdXREaXI6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBodG1sUGF0aCA9IHBhdGguam9pbihvdXRwdXREaXIsICdjb21wYXJpc29uLmh0bWwnKTtcbiAgICBjb25zdCBodG1sID0gdGhpcy5idWlsZENvbXBhcmlzb25IVE1MKGNvbXBhcmlzb24sIG91dHB1dERpcik7XG4gICAgYXdhaXQgZnMucHJvbWlzZXMud3JpdGVGaWxlKGh0bWxQYXRoLCBodG1sLCAndXRmLTgnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBIVE1MIGZvciBjb21wYXJpc29uIHZpZXdcbiAgICovXG4gIHByaXZhdGUgYnVpbGRDb21wYXJpc29uSFRNTChcbiAgICBjb21wYXJpc29uOiBQcmV2aWV3Q29tcGFyaXNvbixcbiAgICBiYXNlRGlyOiBzdHJpbmdcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBwcmV2aWV3c0hUTUwgPSBjb21wYXJpc29uLnByZXZpZXdzXG4gICAgICAubWFwKHByZXZpZXcgPT4ge1xuICAgICAgICBjb25zdCBiZWZvcmVQYXRoID0gcGF0aC5yZWxhdGl2ZShiYXNlRGlyLCBwcmV2aWV3LmJlZm9yZS5pbWFnZVBhdGgpO1xuICAgICAgICBjb25zdCBhZnRlclBhdGggPSBwYXRoLnJlbGF0aXZlKGJhc2VEaXIsIHByZXZpZXcuYWZ0ZXIuaW1hZ2VQYXRoKTtcbiAgICAgICAgY29uc3QgY2hhbmdlc0hUTUwgPSBwcmV2aWV3LmNoYW5nZXNcbiAgICAgICAgICAubWFwKGNoYW5nZSA9PiBgPGxpPiR7dGhpcy5lc2NhcGVIdG1sKGNoYW5nZSl9PC9saT5gKVxuICAgICAgICAgIC5qb2luKCcnKTtcblxuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wb25lbnQtcHJldmlld1wiPlxuICAgICAgICAgICAgPGgzPiR7dGhpcy5lc2NhcGVIdG1sKHByZXZpZXcuY29tcG9uZW50TmFtZSl9PC9oMz5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiY29tcG9uZW50LXBhdGhcIj4ke3RoaXMuZXNjYXBlSHRtbChwcmV2aWV3LmNvbXBvbmVudFBhdGgpfTwvcD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbXBhcmlzb24tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzY3JlZW5zaG90LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxoND5CZWZvcmU8L2g0PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzY3JlZW5zaG90LXBsYWNlaG9sZGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cD5TY3JlZW5zaG90OiAke2JlZm9yZVBhdGh9PC9wPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJub3RlXCI+QWN0dWFsIHNjcmVlbnNob3Qgd291bGQgYmUgZGlzcGxheWVkIGhlcmU8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNjcmVlbnNob3QtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGg0PkFmdGVyPC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2NyZWVuc2hvdC1wbGFjZWhvbGRlclwiPlxuICAgICAgICAgICAgICAgICAgPHA+U2NyZWVuc2hvdDogJHthZnRlclBhdGh9PC9wPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJub3RlXCI+QWN0dWFsIHNjcmVlbnNob3Qgd291bGQgYmUgZGlzcGxheWVkIGhlcmU8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGFuZ2VzXCI+XG4gICAgICAgICAgICAgIDxoND5DaGFuZ2VzIEFwcGxpZWQ8L2g0PlxuICAgICAgICAgICAgICA8dWw+JHtjaGFuZ2VzSFRNTH08L3VsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICB9KVxuICAgICAgLmpvaW4oJycpO1xuXG4gICAgcmV0dXJuIGBcbjwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cImVuXCI+XG48aGVhZD5cbiAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+XG4gIDx0aXRsZT5EZXNpZ24gRmlsdGVyIFByZXZpZXc6ICR7dGhpcy5lc2NhcGVIdG1sKGNvbXBhcmlzb24uZmlsdGVyTmFtZSl9PC90aXRsZT5cbiAgPHN0eWxlPlxuICAgICoge1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgcGFkZGluZzogMDtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgfVxuICAgIFxuICAgIGJvZHkge1xuICAgICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBzYW5zLXNlcmlmO1xuICAgICAgYmFja2dyb3VuZDogI2Y1ZjVmNTtcbiAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICBjb2xvcjogIzMzMztcbiAgICB9XG4gICAgXG4gICAgLmhlYWRlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICBtYXJnaW4tYm90dG9tOiAycmVtO1xuICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICB9XG4gICAgXG4gICAgLmhlYWRlciBoMSB7XG4gICAgICBmb250LXNpemU6IDJyZW07XG4gICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICBjb2xvcjogIzFhMWExYTtcbiAgICB9XG4gICAgXG4gICAgLmhlYWRlciAubWV0YSB7XG4gICAgICBjb2xvcjogIzY2NjtcbiAgICAgIGZvbnQtc2l6ZTogMC45cmVtO1xuICAgIH1cbiAgICBcbiAgICAuYWN0aW9ucyB7XG4gICAgICBtYXJnaW4tdG9wOiAxcmVtO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGdhcDogMXJlbTtcbiAgICB9XG4gICAgXG4gICAgLmJ0biB7XG4gICAgICBwYWRkaW5nOiAwLjc1cmVtIDEuNXJlbTtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICB9XG4gICAgXG4gICAgLmJ0bi1hcHByb3ZlIHtcbiAgICAgIGJhY2tncm91bmQ6ICMyMmM1NWU7XG4gICAgICBjb2xvcjogd2hpdGU7XG4gICAgfVxuICAgIFxuICAgIC5idG4tYXBwcm92ZTpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiAjMTZhMzRhO1xuICAgIH1cbiAgICBcbiAgICAuYnRuLXJlamVjdCB7XG4gICAgICBiYWNrZ3JvdW5kOiAjZWY0NDQ0O1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cbiAgICBcbiAgICAuYnRuLXJlamVjdDpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiAjZGMyNjI2O1xuICAgIH1cbiAgICBcbiAgICAuY29tcG9uZW50LXByZXZpZXcge1xuICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICBwYWRkaW5nOiAycmVtO1xuICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgbWFyZ2luLWJvdHRvbTogMnJlbTtcbiAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAgfVxuICAgIFxuICAgIC5jb21wb25lbnQtcHJldmlldyBoMyB7XG4gICAgICBmb250LXNpemU6IDEuNXJlbTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgICAgIGNvbG9yOiAjMWExYTFhO1xuICAgIH1cbiAgICBcbiAgICAuY29tcG9uZW50LXBhdGgge1xuICAgICAgY29sb3I6ICM2NjY7XG4gICAgICBmb250LXNpemU6IDAuODVyZW07XG4gICAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XG4gICAgICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xuICAgIH1cbiAgICBcbiAgICAuY29tcGFyaXNvbi1jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgIGdhcDogMnJlbTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcbiAgICB9XG4gICAgXG4gICAgLnNjcmVlbnNob3QtY29udGFpbmVyIGg0IHtcbiAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDAuNzVyZW07XG4gICAgICBjb2xvcjogIzU1NTtcbiAgICB9XG4gICAgXG4gICAgLnNjcmVlbnNob3QtcGxhY2Vob2xkZXIge1xuICAgICAgYmFja2dyb3VuZDogI2Y5ZjlmOTtcbiAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCAjZGRkO1xuICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgcGFkZGluZzogM3JlbSAycmVtO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgY29sb3I6ICM5OTk7XG4gICAgfVxuICAgIFxuICAgIC5zY3JlZW5zaG90LXBsYWNlaG9sZGVyIC5ub3RlIHtcbiAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcbiAgICAgIGZvbnQtc2l6ZTogMC44NXJlbTtcbiAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICB9XG4gICAgXG4gICAgLmNoYW5nZXMge1xuICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7XG4gICAgICBwYWRkaW5nLXRvcDogMS41cmVtO1xuICAgIH1cbiAgICBcbiAgICAuY2hhbmdlcyBoNCB7XG4gICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICBtYXJnaW4tYm90dG9tOiAwLjc1cmVtO1xuICAgICAgY29sb3I6ICM1NTU7XG4gICAgfVxuICAgIFxuICAgIC5jaGFuZ2VzIHVsIHtcbiAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgICBwYWRkaW5nLWxlZnQ6IDA7XG4gICAgfVxuICAgIFxuICAgIC5jaGFuZ2VzIGxpIHtcbiAgICAgIHBhZGRpbmc6IDAuNXJlbSAwO1xuICAgICAgcGFkZGluZy1sZWZ0OiAxLjVyZW07XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuICAgIFxuICAgIC5jaGFuZ2VzIGxpOmJlZm9yZSB7XG4gICAgICBjb250ZW50OiAn4oaSJztcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICBjb2xvcjogIzNiODJmNjtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIH1cbiAgICBcbiAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgIC5jb21wYXJpc29uLWNvbnRhaW5lciB7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgICAgfVxuICAgIH1cbiAgPC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgPGgxPkRlc2lnbiBGaWx0ZXIgUHJldmlldzogJHt0aGlzLmVzY2FwZUh0bWwoY29tcGFyaXNvbi5maWx0ZXJOYW1lKX08L2gxPlxuICAgIDxkaXYgY2xhc3M9XCJtZXRhXCI+XG4gICAgICA8cD5HZW5lcmF0ZWQ6ICR7Y29tcGFyaXNvbi50aW1lc3RhbXAudG9Mb2NhbGVTdHJpbmcoKX08L3A+XG4gICAgICA8cD5Db21wb25lbnRzIEFmZmVjdGVkOiAke2NvbXBhcmlzb24uY29tcG9uZW50c0FmZmVjdGVkfTwvcD5cbiAgICAgIDxwPlByZXZpZXdzIEdlbmVyYXRlZDogJHtjb21wYXJpc29uLnByZXZpZXdzLmxlbmd0aH08L3A+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImFjdGlvbnNcIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLWFwcHJvdmVcIiBvbmNsaWNrPVwiYXBwcm92ZUNoYW5nZXMoKVwiPlxuICAgICAgICDinJMgQXBwcm92ZSBDaGFuZ2VzXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXJlamVjdFwiIG9uY2xpY2s9XCJyZWplY3RDaGFuZ2VzKClcIj5cbiAgICAgICAg4pyXIFJlamVjdCBDaGFuZ2VzXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIFxuICAke3ByZXZpZXdzSFRNTH1cbiAgXG4gIDxzY3JpcHQ+XG4gICAgZnVuY3Rpb24gYXBwcm92ZUNoYW5nZXMoKSB7XG4gICAgICBpZiAoY29uZmlybSgnQXBwcm92ZSBhbmQgYXBwbHkgYWxsIGRlc2lnbiBmaWx0ZXIgY2hhbmdlcz8nKSkge1xuICAgICAgICBhbGVydCgnQ2hhbmdlcyBhcHByb3ZlZCEgVGhlIGRlc2lnbiBmaWx0ZXIgd2lsbCBiZSBhcHBsaWVkLicpO1xuICAgICAgICAvLyBJbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIHRyaWdnZXIgSVBDIHRvIGFwcGx5IGNoYW5nZXNcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcmVqZWN0Q2hhbmdlcygpIHtcbiAgICAgIGlmIChjb25maXJtKCdSZWplY3QgYWxsIGRlc2lnbiBmaWx0ZXIgY2hhbmdlcz8nKSkge1xuICAgICAgICBhbGVydCgnQ2hhbmdlcyByZWplY3RlZC4gTm8gbW9kaWZpY2F0aW9ucyB3aWxsIGJlIG1hZGUuJyk7XG4gICAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHRoaXMgd291bGQgdHJpZ2dlciBJUEMgdG8gY2FuY2VsXG4gICAgICB9XG4gICAgfVxuICA8L3NjcmlwdD5cbjwvYm9keT5cbjwvaHRtbD5cbiAgICBgLnRyaW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFc2NhcGUgSFRNTCBzcGVjaWFsIGNoYXJhY3RlcnNcbiAgICovXG4gIHByaXZhdGUgZXNjYXBlSHRtbCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICcmJzogJyZhbXA7JyxcbiAgICAgICc8JzogJyZsdDsnLFxuICAgICAgJz4nOiAnJmd0OycsXG4gICAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICAgIFwiJ1wiOiAnJiMwMzk7JyxcbiAgICB9O1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1smPD5cIiddL2csIG0gPT4gbWFwW21dKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6ZSBmaWxlIG5hbWVcbiAgICovXG4gIHByaXZhdGUgc2FuaXRpemVGaWxlTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBuYW1lXG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnJlcGxhY2UoL1teYS16MC05XSsvZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL14tfC0kL2csICcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIGV4aXN0aW5nIGNvbXBhcmlzb25cbiAgICovXG4gIGFzeW5jIGxvYWRDb21wYXJpc29uKGZpbHRlck5hbWU6IHN0cmluZyk6IFByb21pc2U8UHJldmlld0NvbXBhcmlzb24gfCBudWxsPiB7XG4gICAgY29uc3QgZmlsdGVyRGlyID0gcGF0aC5qb2luKHRoaXMucHJldmlld0RpciwgdGhpcy5zYW5pdGl6ZUZpbGVOYW1lKGZpbHRlck5hbWUpKTtcbiAgICBjb25zdCBtZXRhZGF0YVBhdGggPSBwYXRoLmpvaW4oZmlsdGVyRGlyLCAnY29tcGFyaXNvbi1tZXRhZGF0YS5qc29uJyk7XG5cbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMobWV0YWRhdGFQYXRoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5wcm9taXNlcy5yZWFkRmlsZShtZXRhZGF0YVBhdGgsICd1dGYtOCcpO1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBmaWx0ZXJOYW1lOiBtZXRhZGF0YS5maWx0ZXJOYW1lLFxuICAgICAgICBjb21wb25lbnRzQWZmZWN0ZWQ6IG1ldGFkYXRhLmNvbXBvbmVudHNBZmZlY3RlZCxcbiAgICAgICAgcHJldmlld3M6IFtdLCAvLyBXb3VsZCBuZWVkIHRvIHJlY29uc3RydWN0IGZyb20gbWV0YWRhdGFcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShtZXRhZGF0YS50aW1lc3RhbXApLFxuICAgICAgICBhcHByb3ZlZDogbWV0YWRhdGEuYXBwcm92ZWQsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjb21wYXJpc29uOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHByb3ZlIGNvbXBhcmlzb24gYW5kIG1hcmsgZm9yIGFwcGxpY2F0aW9uXG4gICAqL1xuICBhc3luYyBhcHByb3ZlQ29tcGFyaXNvbihmaWx0ZXJOYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBjb21wYXJpc29uID0gYXdhaXQgdGhpcy5sb2FkQ29tcGFyaXNvbihmaWx0ZXJOYW1lKTtcbiAgICBpZiAoIWNvbXBhcmlzb24pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb21wYXJpc29uLmFwcHJvdmVkID0gdHJ1ZTtcbiAgICBcbiAgICBjb25zdCBmaWx0ZXJEaXIgPSBwYXRoLmpvaW4odGhpcy5wcmV2aWV3RGlyLCB0aGlzLnNhbml0aXplRmlsZU5hbWUoZmlsdGVyTmFtZSkpO1xuICAgIGF3YWl0IHRoaXMuc2F2ZUNvbXBhcmlzb25NZXRhZGF0YShjb21wYXJpc29uLCBmaWx0ZXJEaXIpO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlamVjdCBjb21wYXJpc29uIGFuZCBjbGVhbiB1cFxuICAgKi9cbiAgYXN5bmMgcmVqZWN0Q29tcGFyaXNvbihmaWx0ZXJOYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBmaWx0ZXJEaXIgPSBwYXRoLmpvaW4odGhpcy5wcmV2aWV3RGlyLCB0aGlzLnNhbml0aXplRmlsZU5hbWUoZmlsdGVyTmFtZSkpO1xuICAgIFxuICAgIGlmICghZnMuZXhpc3RzU3luYyhmaWx0ZXJEaXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gTWFyayBhcyByZWplY3RlZCBpbiBtZXRhZGF0YVxuICAgIGNvbnN0IGNvbXBhcmlzb24gPSBhd2FpdCB0aGlzLmxvYWRDb21wYXJpc29uKGZpbHRlck5hbWUpO1xuICAgIGlmIChjb21wYXJpc29uKSB7XG4gICAgICBjb21wYXJpc29uLmFwcHJvdmVkID0gZmFsc2U7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVDb21wYXJpc29uTWV0YWRhdGEoY29tcGFyaXNvbiwgZmlsdGVyRGlyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCBvbGQgcHJldmlld3NcbiAgICovXG4gIGFzeW5jIGNsZWFudXBPbGRQcmV2aWV3cyhkYXlzT2xkOiBudW1iZXIgPSA3KTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBjb25zdCBjdXRvZmZEYXRlID0gbmV3IERhdGUoKTtcbiAgICBjdXRvZmZEYXRlLnNldERhdGUoY3V0b2ZmRGF0ZS5nZXREYXRlKCkgLSBkYXlzT2xkKTtcblxuICAgIGxldCBjbGVhbmVkID0gMDtcbiAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZGRpcih0aGlzLnByZXZpZXdEaXIsIHsgd2l0aEZpbGVUeXBlczogdHJ1ZSB9KTtcblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKGVudHJ5LmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgY29uc3QgZGlyUGF0aCA9IHBhdGguam9pbih0aGlzLnByZXZpZXdEaXIsIGVudHJ5Lm5hbWUpO1xuICAgICAgICBjb25zdCBtZXRhZGF0YVBhdGggPSBwYXRoLmpvaW4oZGlyUGF0aCwgJ2NvbXBhcmlzb24tbWV0YWRhdGEuanNvbicpO1xuXG4gICAgICAgIGlmIChmcy5leGlzdHNTeW5jKG1ldGFkYXRhUGF0aCkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnByb21pc2VzLnJlYWRGaWxlKG1ldGFkYXRhUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShtZXRhZGF0YS50aW1lc3RhbXApO1xuXG4gICAgICAgICAgICBpZiAodGltZXN0YW1wIDwgY3V0b2ZmRGF0ZSkge1xuICAgICAgICAgICAgICBhd2FpdCBmcy5wcm9taXNlcy5ybShkaXJQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgIGNsZWFuZWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gcHJvY2VzcyAke2RpclBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2xlYW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGF2YWlsYWJsZSBwcmV2aWV3c1xuICAgKi9cbiAgYXN5bmMgbGlzdFByZXZpZXdzKCk6IFByb21pc2U8QXJyYXk8eyBmaWx0ZXJOYW1lOiBzdHJpbmc7IHRpbWVzdGFtcDogRGF0ZTsgYXBwcm92ZWQ6IGJvb2xlYW4gfT4+IHtcbiAgICBjb25zdCBwcmV2aWV3czogQXJyYXk8eyBmaWx0ZXJOYW1lOiBzdHJpbmc7IHRpbWVzdGFtcDogRGF0ZTsgYXBwcm92ZWQ6IGJvb2xlYW4gfT4gPSBbXTtcbiAgICBcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmModGhpcy5wcmV2aWV3RGlyKSkge1xuICAgICAgcmV0dXJuIHByZXZpZXdzO1xuICAgIH1cblxuICAgIGNvbnN0IGVudHJpZXMgPSBhd2FpdCBmcy5wcm9taXNlcy5yZWFkZGlyKHRoaXMucHJldmlld0RpciwgeyB3aXRoRmlsZVR5cGVzOiB0cnVlIH0pO1xuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoZW50cnkuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICBjb25zdCBjb21wYXJpc29uID0gYXdhaXQgdGhpcy5sb2FkQ29tcGFyaXNvbihlbnRyeS5uYW1lKTtcbiAgICAgICAgaWYgKGNvbXBhcmlzb24pIHtcbiAgICAgICAgICBwcmV2aWV3cy5wdXNoKHtcbiAgICAgICAgICAgIGZpbHRlck5hbWU6IGNvbXBhcmlzb24uZmlsdGVyTmFtZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogY29tcGFyaXNvbi50aW1lc3RhbXAsXG4gICAgICAgICAgICBhcHByb3ZlZDogY29tcGFyaXNvbi5hcHByb3ZlZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcmV2aWV3cy5zb3J0KChhLCBiKSA9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