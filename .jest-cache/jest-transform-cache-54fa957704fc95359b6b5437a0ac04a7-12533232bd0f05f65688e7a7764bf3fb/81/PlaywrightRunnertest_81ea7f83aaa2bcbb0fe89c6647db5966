c9003bb4ee37933890b2d08ded9c9dde
"use strict";

var _PlaywrightRunner = require("../PlaywrightRunner");
var path = _interopRequireWildcard(require("path"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
describe('PlaywrightRunner', () => {
  let runner;
  const testProjectRoot = path.join(__dirname, '..', '..', '..', '..');
  beforeEach(() => {
    runner = new _PlaywrightRunner.PlaywrightRunner(testProjectRoot);
  });
  describe('generateTestScenarios', () => {
    it('should generate test scenarios from user journeys', () => {
      const userJourneys = [['Open app', 'Create project', 'Verify structure'], ['Open app', 'Edit code', 'Save file']];
      const scenarios = runner.generateTestScenarios(userJourneys);
      expect(scenarios).toHaveLength(2);
      expect(scenarios[0].name).toBe('user-journey-1');
      expect(scenarios[0].priority).toBe('critical');
      expect(scenarios[0].userJourney).toEqual(userJourneys[0]);
      expect(scenarios[1].priority).toBe('high');
    });
    it('should handle empty user journeys', () => {
      const scenarios = runner.generateTestScenarios([]);
      expect(scenarios).toHaveLength(0);
    });
  });
  describe('generateTestFile', () => {
    it('should generate test file content', async () => {
      const scenario = {
        name: 'test-scenario',
        description: 'Test scenario description',
        userJourney: ['Step 1', 'Step 2', 'Step 3'],
        priority: 'high'
      };
      const testFilePath = await runner.generateTestFile(scenario);
      expect(testFilePath).toContain('test-scenario.spec.ts');
      expect(testFilePath).toContain('tests/e2e');
    });
  });
  describe('parseTestResults', () => {
    it('should parse successful test results', async () => {
      // This would require mocking execAsync
      // For now, we test the structure
      expect(runner).toBeDefined();
    });
  });
  describe('getTestArtifacts', () => {
    it('should return empty artifacts when no tests run', async () => {
      const artifacts = await runner.getTestArtifacts('non-existent-test');
      expect(artifacts.screenshots).toEqual([]);
      expect(artifacts.videos).toEqual([]);
      expect(artifacts.traces).toEqual([]);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfUGxheXdyaWdodFJ1bm5lciIsInJlcXVpcmUiLCJwYXRoIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJlIiwidCIsIldlYWtNYXAiLCJyIiwibiIsIl9fZXNNb2R1bGUiLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJkZWZhdWx0IiwiaGFzIiwiZ2V0Iiwic2V0IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJkZXNjcmliZSIsInJ1bm5lciIsInRlc3RQcm9qZWN0Um9vdCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJiZWZvcmVFYWNoIiwiUGxheXdyaWdodFJ1bm5lciIsIml0IiwidXNlckpvdXJuZXlzIiwic2NlbmFyaW9zIiwiZ2VuZXJhdGVUZXN0U2NlbmFyaW9zIiwiZXhwZWN0IiwidG9IYXZlTGVuZ3RoIiwibmFtZSIsInRvQmUiLCJwcmlvcml0eSIsInVzZXJKb3VybmV5IiwidG9FcXVhbCIsInNjZW5hcmlvIiwiZGVzY3JpcHRpb24iLCJ0ZXN0RmlsZVBhdGgiLCJnZW5lcmF0ZVRlc3RGaWxlIiwidG9Db250YWluIiwidG9CZURlZmluZWQiLCJhcnRpZmFjdHMiLCJnZXRUZXN0QXJ0aWZhY3RzIiwic2NyZWVuc2hvdHMiLCJ2aWRlb3MiLCJ0cmFjZXMiXSwic291cmNlcyI6WyJQbGF5d3JpZ2h0UnVubmVyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxheXdyaWdodFJ1bm5lciwgRTJFVGVzdFNjZW5hcmlvIH0gZnJvbSAnLi4vUGxheXdyaWdodFJ1bm5lcic7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5kZXNjcmliZSgnUGxheXdyaWdodFJ1bm5lcicsICgpID0+IHtcbiAgbGV0IHJ1bm5lcjogUGxheXdyaWdodFJ1bm5lcjtcbiAgY29uc3QgdGVzdFByb2plY3RSb290ID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJy4uJywgJy4uJywgJy4uJyk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgcnVubmVyID0gbmV3IFBsYXl3cmlnaHRSdW5uZXIodGVzdFByb2plY3RSb290KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dlbmVyYXRlVGVzdFNjZW5hcmlvcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHRlc3Qgc2NlbmFyaW9zIGZyb20gdXNlciBqb3VybmV5cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJKb3VybmV5cyA9IFtcbiAgICAgICAgWydPcGVuIGFwcCcsICdDcmVhdGUgcHJvamVjdCcsICdWZXJpZnkgc3RydWN0dXJlJ10sXG4gICAgICAgIFsnT3BlbiBhcHAnLCAnRWRpdCBjb2RlJywgJ1NhdmUgZmlsZSddLFxuICAgICAgXTtcblxuICAgICAgY29uc3Qgc2NlbmFyaW9zID0gcnVubmVyLmdlbmVyYXRlVGVzdFNjZW5hcmlvcyh1c2VySm91cm5leXMpO1xuXG4gICAgICBleHBlY3Qoc2NlbmFyaW9zKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3Qoc2NlbmFyaW9zWzBdLm5hbWUpLnRvQmUoJ3VzZXItam91cm5leS0xJyk7XG4gICAgICBleHBlY3Qoc2NlbmFyaW9zWzBdLnByaW9yaXR5KS50b0JlKCdjcml0aWNhbCcpO1xuICAgICAgZXhwZWN0KHNjZW5hcmlvc1swXS51c2VySm91cm5leSkudG9FcXVhbCh1c2VySm91cm5leXNbMF0pO1xuICAgICAgZXhwZWN0KHNjZW5hcmlvc1sxXS5wcmlvcml0eSkudG9CZSgnaGlnaCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgdXNlciBqb3VybmV5cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNjZW5hcmlvcyA9IHJ1bm5lci5nZW5lcmF0ZVRlc3RTY2VuYXJpb3MoW10pO1xuICAgICAgZXhwZWN0KHNjZW5hcmlvcykudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGVUZXN0RmlsZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHRlc3QgZmlsZSBjb250ZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NlbmFyaW86IEUyRVRlc3RTY2VuYXJpbyA9IHtcbiAgICAgICAgbmFtZTogJ3Rlc3Qtc2NlbmFyaW8nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3Qgc2NlbmFyaW8gZGVzY3JpcHRpb24nLFxuICAgICAgICB1c2VySm91cm5leTogWydTdGVwIDEnLCAnU3RlcCAyJywgJ1N0ZXAgMyddLFxuICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdGVzdEZpbGVQYXRoID0gYXdhaXQgcnVubmVyLmdlbmVyYXRlVGVzdEZpbGUoc2NlbmFyaW8pO1xuXG4gICAgICBleHBlY3QodGVzdEZpbGVQYXRoKS50b0NvbnRhaW4oJ3Rlc3Qtc2NlbmFyaW8uc3BlYy50cycpO1xuICAgICAgZXhwZWN0KHRlc3RGaWxlUGF0aCkudG9Db250YWluKCd0ZXN0cy9lMmUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3BhcnNlVGVzdFJlc3VsdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwYXJzZSBzdWNjZXNzZnVsIHRlc3QgcmVzdWx0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRoaXMgd291bGQgcmVxdWlyZSBtb2NraW5nIGV4ZWNBc3luY1xuICAgICAgLy8gRm9yIG5vdywgd2UgdGVzdCB0aGUgc3RydWN0dXJlXG4gICAgICBleHBlY3QocnVubmVyKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0VGVzdEFydGlmYWN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnRpZmFjdHMgd2hlbiBubyB0ZXN0cyBydW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBydW5uZXIuZ2V0VGVzdEFydGlmYWN0cygnbm9uLWV4aXN0ZW50LXRlc3QnKTtcblxuICAgICAgZXhwZWN0KGFydGlmYWN0cy5zY3JlZW5zaG90cykudG9FcXVhbChbXSk7XG4gICAgICBleHBlY3QoYXJ0aWZhY3RzLnZpZGVvcykudG9FcXVhbChbXSk7XG4gICAgICBleHBlY3QoYXJ0aWZhY3RzLnRyYWNlcykudG9FcXVhbChbXSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsaUJBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLElBQUEsR0FBQUMsdUJBQUEsQ0FBQUYsT0FBQTtBQUE2QixTQUFBRSx3QkFBQUMsQ0FBQSxFQUFBQyxDQUFBLDZCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQUgsdUJBQUEsWUFBQUEsQ0FBQUMsQ0FBQSxFQUFBQyxDQUFBLFNBQUFBLENBQUEsSUFBQUQsQ0FBQSxJQUFBQSxDQUFBLENBQUFLLFVBQUEsU0FBQUwsQ0FBQSxNQUFBTSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSxLQUFBQyxTQUFBLFFBQUFDLE9BQUEsRUFBQVYsQ0FBQSxpQkFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxTQUFBUSxDQUFBLE1BQUFGLENBQUEsR0FBQUwsQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUEsUUFBQUcsQ0FBQSxDQUFBSyxHQUFBLENBQUFYLENBQUEsVUFBQU0sQ0FBQSxDQUFBTSxHQUFBLENBQUFaLENBQUEsR0FBQU0sQ0FBQSxDQUFBTyxHQUFBLENBQUFiLENBQUEsRUFBQVEsQ0FBQSxnQkFBQVAsQ0FBQSxJQUFBRCxDQUFBLGdCQUFBQyxDQUFBLE9BQUFhLGNBQUEsQ0FBQUMsSUFBQSxDQUFBZixDQUFBLEVBQUFDLENBQUEsT0FBQU0sQ0FBQSxJQUFBRCxDQUFBLEdBQUFVLE1BQUEsQ0FBQUMsY0FBQSxLQUFBRCxNQUFBLENBQUFFLHdCQUFBLENBQUFsQixDQUFBLEVBQUFDLENBQUEsT0FBQU0sQ0FBQSxDQUFBSyxHQUFBLElBQUFMLENBQUEsQ0FBQU0sR0FBQSxJQUFBUCxDQUFBLENBQUFFLENBQUEsRUFBQVAsQ0FBQSxFQUFBTSxDQUFBLElBQUFDLENBQUEsQ0FBQVAsQ0FBQSxJQUFBRCxDQUFBLENBQUFDLENBQUEsV0FBQU8sQ0FBQSxLQUFBUixDQUFBLEVBQUFDLENBQUE7QUFFN0JrQixRQUFRLENBQUMsa0JBQWtCLEVBQUUsTUFBTTtFQUNqQyxJQUFJQyxNQUF3QjtFQUM1QixNQUFNQyxlQUFlLEdBQUd2QixJQUFJLENBQUN3QixJQUFJLENBQUNDLFNBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7RUFFcEVDLFVBQVUsQ0FBQyxNQUFNO0lBQ2ZKLE1BQU0sR0FBRyxJQUFJSyxrQ0FBZ0IsQ0FBQ0osZUFBZSxDQUFDO0VBQ2hELENBQUMsQ0FBQztFQUVGRixRQUFRLENBQUMsdUJBQXVCLEVBQUUsTUFBTTtJQUN0Q08sRUFBRSxDQUFDLG1EQUFtRCxFQUFFLE1BQU07TUFDNUQsTUFBTUMsWUFBWSxHQUFHLENBQ25CLENBQUMsVUFBVSxFQUFFLGdCQUFnQixFQUFFLGtCQUFrQixDQUFDLEVBQ2xELENBQUMsVUFBVSxFQUFFLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FDdkM7TUFFRCxNQUFNQyxTQUFTLEdBQUdSLE1BQU0sQ0FBQ1MscUJBQXFCLENBQUNGLFlBQVksQ0FBQztNQUU1REcsTUFBTSxDQUFDRixTQUFTLENBQUMsQ0FBQ0csWUFBWSxDQUFDLENBQUMsQ0FBQztNQUNqQ0QsTUFBTSxDQUFDRixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNJLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7TUFDaERILE1BQU0sQ0FBQ0YsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDTSxRQUFRLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQztNQUM5Q0gsTUFBTSxDQUFDRixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNPLFdBQVcsQ0FBQyxDQUFDQyxPQUFPLENBQUNULFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUN6REcsTUFBTSxDQUFDRixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNNLFFBQVEsQ0FBQyxDQUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQzVDLENBQUMsQ0FBQztJQUVGUCxFQUFFLENBQUMsbUNBQW1DLEVBQUUsTUFBTTtNQUM1QyxNQUFNRSxTQUFTLEdBQUdSLE1BQU0sQ0FBQ1MscUJBQXFCLENBQUMsRUFBRSxDQUFDO01BQ2xEQyxNQUFNLENBQUNGLFNBQVMsQ0FBQyxDQUFDRyxZQUFZLENBQUMsQ0FBQyxDQUFDO0lBQ25DLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGWixRQUFRLENBQUMsa0JBQWtCLEVBQUUsTUFBTTtJQUNqQ08sRUFBRSxDQUFDLG1DQUFtQyxFQUFFLFlBQVk7TUFDbEQsTUFBTVcsUUFBeUIsR0FBRztRQUNoQ0wsSUFBSSxFQUFFLGVBQWU7UUFDckJNLFdBQVcsRUFBRSwyQkFBMkI7UUFDeENILFdBQVcsRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDO1FBQzNDRCxRQUFRLEVBQUU7TUFDWixDQUFDO01BRUQsTUFBTUssWUFBWSxHQUFHLE1BQU1uQixNQUFNLENBQUNvQixnQkFBZ0IsQ0FBQ0gsUUFBUSxDQUFDO01BRTVEUCxNQUFNLENBQUNTLFlBQVksQ0FBQyxDQUFDRSxTQUFTLENBQUMsdUJBQXVCLENBQUM7TUFDdkRYLE1BQU0sQ0FBQ1MsWUFBWSxDQUFDLENBQUNFLFNBQVMsQ0FBQyxXQUFXLENBQUM7SUFDN0MsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZ0QixRQUFRLENBQUMsa0JBQWtCLEVBQUUsTUFBTTtJQUNqQ08sRUFBRSxDQUFDLHNDQUFzQyxFQUFFLFlBQVk7TUFDckQ7TUFDQTtNQUNBSSxNQUFNLENBQUNWLE1BQU0sQ0FBQyxDQUFDc0IsV0FBVyxDQUFDLENBQUM7SUFDOUIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZ2QixRQUFRLENBQUMsa0JBQWtCLEVBQUUsTUFBTTtJQUNqQ08sRUFBRSxDQUFDLGlEQUFpRCxFQUFFLFlBQVk7TUFDaEUsTUFBTWlCLFNBQVMsR0FBRyxNQUFNdkIsTUFBTSxDQUFDd0IsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUM7TUFFcEVkLE1BQU0sQ0FBQ2EsU0FBUyxDQUFDRSxXQUFXLENBQUMsQ0FBQ1QsT0FBTyxDQUFDLEVBQUUsQ0FBQztNQUN6Q04sTUFBTSxDQUFDYSxTQUFTLENBQUNHLE1BQU0sQ0FBQyxDQUFDVixPQUFPLENBQUMsRUFBRSxDQUFDO01BQ3BDTixNQUFNLENBQUNhLFNBQVMsQ0FBQ0ksTUFBTSxDQUFDLENBQUNYLE9BQU8sQ0FBQyxFQUFFLENBQUM7SUFDdEMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119