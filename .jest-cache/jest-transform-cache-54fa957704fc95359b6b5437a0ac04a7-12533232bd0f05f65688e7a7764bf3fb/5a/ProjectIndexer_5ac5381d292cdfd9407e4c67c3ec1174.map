{"version":3,"names":["fs","_interopRequireWildcard","require","path","_parser","_traverse","_interopRequireDefault","t","_glob","e","__esModule","default","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ProjectIndexer","projectGraph","indexingInProgress","indexProject","rootPath","Error","console","log","files","Map","dependencies","patterns","ignorePatterns","pattern","matchedFiles","glob","cwd","ignore","absolute","filePath","fileNode","parseFile","imports","length","error","lastIndexed","Date","now","size","ext","extname","toLowerCase","stats","promises","stat","content","readFile","hash","hashString","type","getFileType","exports","symbols","lastModified","mtimeMs","includes","ast","parse","sourceType","plugins","traverse","ImportDeclaration","nodePath","source","node","value","push","ExportNamedDeclaration","declaration","isFunctionDeclaration","name","id","line","loc","start","column","isClassDeclaration","isVariableDeclaration","declarations","forEach","decl","isIdentifier","isTSInterfaceDeclaration","isTSTypeAliasDeclaration","ExportDefaultDeclaration","FunctionDeclaration","find","s","ClassDeclaration","TSInterfaceDeclaration","TSTypeAliasDeclaration","updateIndex","changedFiles","exists","access","then","catch","delete","findSymbol","results","symbol","file","findReferences","symbolName","references","some","getImportGraph","getProjectGraph","str","char","charCodeAt","toString"],"sources":["ProjectIndexer.ts"],"sourcesContent":["import * as fs from 'fs';\nimport * as path from 'path';\nimport { parse } from '@babel/parser';\nimport traverse from '@babel/traverse';\nimport * as t from '@babel/types';\nimport { glob } from 'glob';\n\nexport interface FileNode {\n  path: string;\n  type: 'typescript' | 'javascript' | 'css' | 'json' | 'other';\n  imports: string[];\n  exports: string[];\n  symbols: Symbol[];\n  lastModified: number;\n  hash: string;\n}\n\nexport interface Symbol {\n  name: string;\n  type: 'function' | 'class' | 'variable' | 'interface' | 'type';\n  line: number;\n  column: number;\n}\n\nexport interface ProjectGraph {\n  rootPath: string;\n  files: Map<string, FileNode>;\n  dependencies: Map<string, string[]>;\n  lastIndexed: number;\n}\n\nexport class ProjectIndexer {\n  private projectGraph: ProjectGraph | null = null;\n  private indexingInProgress = false;\n\n  async indexProject(rootPath: string): Promise<ProjectGraph> {\n    if (this.indexingInProgress) {\n      throw new Error('Indexing already in progress');\n    }\n\n    this.indexingInProgress = true;\n    console.log(`Starting project indexing: ${rootPath}`);\n\n    try {\n      const files = new Map<string, FileNode>();\n      const dependencies = new Map<string, string[]>();\n\n      // Find all relevant files\n      const patterns = [\n        '**/*.ts',\n        '**/*.tsx',\n        '**/*.js',\n        '**/*.jsx',\n        '**/*.json',\n        '**/*.css',\n      ];\n\n      const ignorePatterns = [\n        '**/node_modules/**',\n        '**/dist/**',\n        '**/build/**',\n        '**/.git/**',\n        '**/coverage/**',\n      ];\n\n      for (const pattern of patterns) {\n        const matchedFiles = await glob(pattern, {\n          cwd: rootPath,\n          ignore: ignorePatterns,\n          absolute: true,\n        });\n\n        for (const filePath of matchedFiles) {\n          try {\n            const fileNode = await this.parseFile(filePath);\n            if (fileNode) {\n              files.set(filePath, fileNode);\n              \n              // Build dependency graph\n              if (fileNode.imports.length > 0) {\n                dependencies.set(filePath, fileNode.imports);\n              }\n            }\n          } catch (error) {\n            console.error(`Failed to parse file ${filePath}:`, error);\n          }\n        }\n      }\n\n      this.projectGraph = {\n        rootPath,\n        files,\n        dependencies,\n        lastIndexed: Date.now(),\n      };\n\n      console.log(`Indexing complete: ${files.size} files indexed`);\n      return this.projectGraph;\n    } finally {\n      this.indexingInProgress = false;\n    }\n  }\n\n  async parseFile(filePath: string): Promise<FileNode | null> {\n    const ext = path.extname(filePath).toLowerCase();\n    const stats = await fs.promises.stat(filePath);\n    const content = await fs.promises.readFile(filePath, 'utf-8');\n    const hash = this.hashString(content);\n\n    const fileNode: FileNode = {\n      path: filePath,\n      type: this.getFileType(ext),\n      imports: [],\n      exports: [],\n      symbols: [],\n      lastModified: stats.mtimeMs,\n      hash,\n    };\n\n    // Parse TypeScript/JavaScript files\n    if (['.ts', '.tsx', '.js', '.jsx'].includes(ext)) {\n      try {\n        const ast = parse(content, {\n          sourceType: 'module',\n          plugins: [\n            'typescript',\n            'jsx',\n            'decorators-legacy',\n            'classProperties',\n            'objectRestSpread',\n            'optionalChaining',\n            'nullishCoalescingOperator',\n          ],\n        });\n\n        traverse(ast, {\n          ImportDeclaration: (nodePath) => {\n            const source = nodePath.node.source.value;\n            fileNode.imports.push(source);\n          },\n\n          ExportNamedDeclaration: (nodePath) => {\n            if (nodePath.node.declaration) {\n              if (t.isFunctionDeclaration(nodePath.node.declaration)) {\n                const name = nodePath.node.declaration.id?.name;\n                if (name) {\n                  fileNode.exports.push(name);\n                  fileNode.symbols.push({\n                    name,\n                    type: 'function',\n                    line: nodePath.node.loc?.start.line || 0,\n                    column: nodePath.node.loc?.start.column || 0,\n                  });\n                }\n              } else if (t.isClassDeclaration(nodePath.node.declaration)) {\n                const name = nodePath.node.declaration.id?.name;\n                if (name) {\n                  fileNode.exports.push(name);\n                  fileNode.symbols.push({\n                    name,\n                    type: 'class',\n                    line: nodePath.node.loc?.start.line || 0,\n                    column: nodePath.node.loc?.start.column || 0,\n                  });\n                }\n              } else if (t.isVariableDeclaration(nodePath.node.declaration)) {\n                nodePath.node.declaration.declarations.forEach((decl) => {\n                  if (t.isIdentifier(decl.id)) {\n                    fileNode.exports.push(decl.id.name);\n                    fileNode.symbols.push({\n                      name: decl.id.name,\n                      type: 'variable',\n                      line: nodePath.node.loc?.start.line || 0,\n                      column: nodePath.node.loc?.start.column || 0,\n                    });\n                  }\n                });\n              } else if (t.isTSInterfaceDeclaration(nodePath.node.declaration)) {\n                const name = nodePath.node.declaration.id.name;\n                fileNode.exports.push(name);\n                fileNode.symbols.push({\n                  name,\n                  type: 'interface',\n                  line: nodePath.node.loc?.start.line || 0,\n                  column: nodePath.node.loc?.start.column || 0,\n                });\n              } else if (t.isTSTypeAliasDeclaration(nodePath.node.declaration)) {\n                const name = nodePath.node.declaration.id.name;\n                fileNode.exports.push(name);\n                fileNode.symbols.push({\n                  name,\n                  type: 'type',\n                  line: nodePath.node.loc?.start.line || 0,\n                  column: nodePath.node.loc?.start.column || 0,\n                });\n              }\n            }\n          },\n\n          ExportDefaultDeclaration: (nodePath) => {\n            fileNode.exports.push('default');\n          },\n\n          FunctionDeclaration: (nodePath) => {\n            const name = nodePath.node.id?.name;\n            if (name && !fileNode.symbols.find(s => s.name === name)) {\n              fileNode.symbols.push({\n                name,\n                type: 'function',\n                line: nodePath.node.loc?.start.line || 0,\n                column: nodePath.node.loc?.start.column || 0,\n              });\n            }\n          },\n\n          ClassDeclaration: (nodePath) => {\n            const name = nodePath.node.id?.name;\n            if (name && !fileNode.symbols.find(s => s.name === name)) {\n              fileNode.symbols.push({\n                name,\n                type: 'class',\n                line: nodePath.node.loc?.start.line || 0,\n                column: nodePath.node.loc?.start.column || 0,\n              });\n            }\n          },\n\n          TSInterfaceDeclaration: (nodePath) => {\n            const name = nodePath.node.id.name;\n            if (!fileNode.symbols.find(s => s.name === name)) {\n              fileNode.symbols.push({\n                name,\n                type: 'interface',\n                line: nodePath.node.loc?.start.line || 0,\n                column: nodePath.node.loc?.start.column || 0,\n              });\n            }\n          },\n\n          TSTypeAliasDeclaration: (nodePath) => {\n            const name = nodePath.node.id.name;\n            if (!fileNode.symbols.find(s => s.name === name)) {\n              fileNode.symbols.push({\n                name,\n                type: 'type',\n                line: nodePath.node.loc?.start.line || 0,\n                column: nodePath.node.loc?.start.column || 0,\n              });\n            }\n          },\n        });\n      } catch (error) {\n        console.error(`Failed to parse AST for ${filePath}:`, error);\n      }\n    }\n\n    return fileNode;\n  }\n\n  async updateIndex(changedFiles: string[]): Promise<void> {\n    if (!this.projectGraph) {\n      throw new Error('Project not indexed yet');\n    }\n\n    console.log(`Updating index for ${changedFiles.length} files`);\n\n    for (const filePath of changedFiles) {\n      try {\n        const exists = await fs.promises.access(filePath).then(() => true).catch(() => false);\n        \n        if (exists) {\n          const fileNode = await this.parseFile(filePath);\n          if (fileNode) {\n            this.projectGraph.files.set(filePath, fileNode);\n            \n            // Update dependencies\n            if (fileNode.imports.length > 0) {\n              this.projectGraph.dependencies.set(filePath, fileNode.imports);\n            } else {\n              this.projectGraph.dependencies.delete(filePath);\n            }\n          }\n        } else {\n          // File was deleted\n          this.projectGraph.files.delete(filePath);\n          this.projectGraph.dependencies.delete(filePath);\n        }\n      } catch (error) {\n        console.error(`Failed to update file ${filePath}:`, error);\n      }\n    }\n\n    this.projectGraph.lastIndexed = Date.now();\n  }\n\n  findSymbol(name: string): Array<{ file: string; symbol: Symbol }> {\n    if (!this.projectGraph) {\n      return [];\n    }\n\n    const results: Array<{ file: string; symbol: Symbol }> = [];\n\n    for (const [filePath, fileNode] of this.projectGraph.files) {\n      const symbol = fileNode.symbols.find(s => s.name === name);\n      if (symbol) {\n        results.push({ file: filePath, symbol });\n      }\n    }\n\n    return results;\n  }\n\n  findReferences(symbolName: string): string[] {\n    if (!this.projectGraph) {\n      return [];\n    }\n\n    const references: string[] = [];\n\n    for (const [filePath, fileNode] of this.projectGraph.files) {\n      // Check if file imports or uses the symbol\n      if (fileNode.symbols.some(s => s.name === symbolName)) {\n        references.push(filePath);\n      }\n    }\n\n    return references;\n  }\n\n  getImportGraph(): Map<string, string[]> {\n    return this.projectGraph?.dependencies || new Map();\n  }\n\n  getProjectGraph(): ProjectGraph | null {\n    return this.projectGraph;\n  }\n\n  private getFileType(ext: string): FileNode['type'] {\n    switch (ext) {\n      case '.ts':\n      case '.tsx':\n        return 'typescript';\n      case '.js':\n      case '.jsx':\n        return 'javascript';\n      case '.css':\n      case '.scss':\n        return 'css';\n      case '.json':\n        return 'json';\n      default:\n        return 'other';\n    }\n  }\n\n  private hashString(str: string): string {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash.toString(36);\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,EAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAF,uBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AACA,IAAAG,SAAA,GAAAC,sBAAA,CAAAJ,OAAA;AACA,IAAAK,CAAA,GAAAN,uBAAA,CAAAC,OAAA;AACA,IAAAM,KAAA,GAAAN,OAAA;AAA4B,SAAAI,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAR,wBAAAQ,CAAA,EAAAF,CAAA,6BAAAK,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAX,uBAAA,YAAAA,CAAAQ,CAAA,EAAAF,CAAA,SAAAA,CAAA,IAAAE,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAP,OAAA,EAAAF,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAR,CAAA,GAAAO,CAAA,GAAAD,CAAA,QAAAE,CAAA,CAAAI,GAAA,CAAAV,CAAA,UAAAM,CAAA,CAAAK,GAAA,CAAAX,CAAA,GAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,EAAAQ,CAAA,gBAAAV,CAAA,IAAAE,CAAA,gBAAAF,CAAA,OAAAe,cAAA,CAAAC,IAAA,CAAAd,CAAA,EAAAF,CAAA,OAAAS,CAAA,IAAAD,CAAA,GAAAS,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAjB,CAAA,EAAAF,CAAA,OAAAS,CAAA,CAAAI,GAAA,IAAAJ,CAAA,CAAAK,GAAA,IAAAN,CAAA,CAAAE,CAAA,EAAAV,CAAA,EAAAS,CAAA,IAAAC,CAAA,CAAAV,CAAA,IAAAE,CAAA,CAAAF,CAAA,WAAAU,CAAA,KAAAR,CAAA,EAAAF,CAAA;AA0BrB,MAAMoB,cAAc,CAAC;EAClBC,YAAY,GAAwB,IAAI;EACxCC,kBAAkB,GAAG,KAAK;EAElC,MAAMC,YAAYA,CAACC,QAAgB,EAAyB;IAC1D,IAAI,IAAI,CAACF,kBAAkB,EAAE;MAC3B,MAAM,IAAIG,KAAK,CAAC,8BAA8B,CAAC;IACjD;IAEA,IAAI,CAACH,kBAAkB,GAAG,IAAI;IAC9BI,OAAO,CAACC,GAAG,CAAC,8BAA8BH,QAAQ,EAAE,CAAC;IAErD,IAAI;MACF,MAAMI,KAAK,GAAG,IAAIC,GAAG,CAAmB,CAAC;MACzC,MAAMC,YAAY,GAAG,IAAID,GAAG,CAAmB,CAAC;;MAEhD;MACA,MAAME,QAAQ,GAAG,CACf,SAAS,EACT,UAAU,EACV,SAAS,EACT,UAAU,EACV,WAAW,EACX,UAAU,CACX;MAED,MAAMC,cAAc,GAAG,CACrB,oBAAoB,EACpB,YAAY,EACZ,aAAa,EACb,YAAY,EACZ,gBAAgB,CACjB;MAED,KAAK,MAAMC,OAAO,IAAIF,QAAQ,EAAE;QAC9B,MAAMG,YAAY,GAAG,MAAM,IAAAC,UAAI,EAACF,OAAO,EAAE;UACvCG,GAAG,EAAEZ,QAAQ;UACba,MAAM,EAAEL,cAAc;UACtBM,QAAQ,EAAE;QACZ,CAAC,CAAC;QAEF,KAAK,MAAMC,QAAQ,IAAIL,YAAY,EAAE;UACnC,IAAI;YACF,MAAMM,QAAQ,GAAG,MAAM,IAAI,CAACC,SAAS,CAACF,QAAQ,CAAC;YAC/C,IAAIC,QAAQ,EAAE;cACZZ,KAAK,CAACd,GAAG,CAACyB,QAAQ,EAAEC,QAAQ,CAAC;;cAE7B;cACA,IAAIA,QAAQ,CAACE,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;gBAC/Bb,YAAY,CAAChB,GAAG,CAACyB,QAAQ,EAAEC,QAAQ,CAACE,OAAO,CAAC;cAC9C;YACF;UACF,CAAC,CAAC,OAAOE,KAAK,EAAE;YACdlB,OAAO,CAACkB,KAAK,CAAC,wBAAwBL,QAAQ,GAAG,EAAEK,KAAK,CAAC;UAC3D;QACF;MACF;MAEA,IAAI,CAACvB,YAAY,GAAG;QAClBG,QAAQ;QACRI,KAAK;QACLE,YAAY;QACZe,WAAW,EAAEC,IAAI,CAACC,GAAG,CAAC;MACxB,CAAC;MAEDrB,OAAO,CAACC,GAAG,CAAC,sBAAsBC,KAAK,CAACoB,IAAI,gBAAgB,CAAC;MAC7D,OAAO,IAAI,CAAC3B,YAAY;IAC1B,CAAC,SAAS;MACR,IAAI,CAACC,kBAAkB,GAAG,KAAK;IACjC;EACF;EAEA,MAAMmB,SAASA,CAACF,QAAgB,EAA4B;IAC1D,MAAMU,GAAG,GAAGrD,IAAI,CAACsD,OAAO,CAACX,QAAQ,CAAC,CAACY,WAAW,CAAC,CAAC;IAChD,MAAMC,KAAK,GAAG,MAAM3D,EAAE,CAAC4D,QAAQ,CAACC,IAAI,CAACf,QAAQ,CAAC;IAC9C,MAAMgB,OAAO,GAAG,MAAM9D,EAAE,CAAC4D,QAAQ,CAACG,QAAQ,CAACjB,QAAQ,EAAE,OAAO,CAAC;IAC7D,MAAMkB,IAAI,GAAG,IAAI,CAACC,UAAU,CAACH,OAAO,CAAC;IAErC,MAAMf,QAAkB,GAAG;MACzB5C,IAAI,EAAE2C,QAAQ;MACdoB,IAAI,EAAE,IAAI,CAACC,WAAW,CAACX,GAAG,CAAC;MAC3BP,OAAO,EAAE,EAAE;MACXmB,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE,EAAE;MACXC,YAAY,EAAEX,KAAK,CAACY,OAAO;MAC3BP;IACF,CAAC;;IAED;IACA,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,CAAC,CAACQ,QAAQ,CAAChB,GAAG,CAAC,EAAE;MAChD,IAAI;QACF,MAAMiB,GAAG,GAAG,IAAAC,aAAK,EAACZ,OAAO,EAAE;UACzBa,UAAU,EAAE,QAAQ;UACpBC,OAAO,EAAE,CACP,YAAY,EACZ,KAAK,EACL,mBAAmB,EACnB,iBAAiB,EACjB,kBAAkB,EAClB,kBAAkB,EAClB,2BAA2B;QAE/B,CAAC,CAAC;QAEF,IAAAC,iBAAQ,EAACJ,GAAG,EAAE;UACZK,iBAAiB,EAAGC,QAAQ,IAAK;YAC/B,MAAMC,MAAM,GAAGD,QAAQ,CAACE,IAAI,CAACD,MAAM,CAACE,KAAK;YACzCnC,QAAQ,CAACE,OAAO,CAACkC,IAAI,CAACH,MAAM,CAAC;UAC/B,CAAC;UAEDI,sBAAsB,EAAGL,QAAQ,IAAK;YACpC,IAAIA,QAAQ,CAACE,IAAI,CAACI,WAAW,EAAE;cAC7B,IAAI9E,CAAC,CAAC+E,qBAAqB,CAACP,QAAQ,CAACE,IAAI,CAACI,WAAW,CAAC,EAAE;gBACtD,MAAME,IAAI,GAAGR,QAAQ,CAACE,IAAI,CAACI,WAAW,CAACG,EAAE,EAAED,IAAI;gBAC/C,IAAIA,IAAI,EAAE;kBACRxC,QAAQ,CAACqB,OAAO,CAACe,IAAI,CAACI,IAAI,CAAC;kBAC3BxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;oBACpBI,IAAI;oBACJrB,IAAI,EAAE,UAAU;oBAChBuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;oBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;kBAC7C,CAAC,CAAC;gBACJ;cACF,CAAC,MAAM,IAAIrF,CAAC,CAACsF,kBAAkB,CAACd,QAAQ,CAACE,IAAI,CAACI,WAAW,CAAC,EAAE;gBAC1D,MAAME,IAAI,GAAGR,QAAQ,CAACE,IAAI,CAACI,WAAW,CAACG,EAAE,EAAED,IAAI;gBAC/C,IAAIA,IAAI,EAAE;kBACRxC,QAAQ,CAACqB,OAAO,CAACe,IAAI,CAACI,IAAI,CAAC;kBAC3BxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;oBACpBI,IAAI;oBACJrB,IAAI,EAAE,OAAO;oBACbuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;oBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;kBAC7C,CAAC,CAAC;gBACJ;cACF,CAAC,MAAM,IAAIrF,CAAC,CAACuF,qBAAqB,CAACf,QAAQ,CAACE,IAAI,CAACI,WAAW,CAAC,EAAE;gBAC7DN,QAAQ,CAACE,IAAI,CAACI,WAAW,CAACU,YAAY,CAACC,OAAO,CAAEC,IAAI,IAAK;kBACvD,IAAI1F,CAAC,CAAC2F,YAAY,CAACD,IAAI,CAACT,EAAE,CAAC,EAAE;oBAC3BzC,QAAQ,CAACqB,OAAO,CAACe,IAAI,CAACc,IAAI,CAACT,EAAE,CAACD,IAAI,CAAC;oBACnCxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;sBACpBI,IAAI,EAAEU,IAAI,CAACT,EAAE,CAACD,IAAI;sBAClBrB,IAAI,EAAE,UAAU;sBAChBuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;sBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;oBAC7C,CAAC,CAAC;kBACJ;gBACF,CAAC,CAAC;cACJ,CAAC,MAAM,IAAIrF,CAAC,CAAC4F,wBAAwB,CAACpB,QAAQ,CAACE,IAAI,CAACI,WAAW,CAAC,EAAE;gBAChE,MAAME,IAAI,GAAGR,QAAQ,CAACE,IAAI,CAACI,WAAW,CAACG,EAAE,CAACD,IAAI;gBAC9CxC,QAAQ,CAACqB,OAAO,CAACe,IAAI,CAACI,IAAI,CAAC;gBAC3BxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;kBACpBI,IAAI;kBACJrB,IAAI,EAAE,WAAW;kBACjBuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;kBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;gBAC7C,CAAC,CAAC;cACJ,CAAC,MAAM,IAAIrF,CAAC,CAAC6F,wBAAwB,CAACrB,QAAQ,CAACE,IAAI,CAACI,WAAW,CAAC,EAAE;gBAChE,MAAME,IAAI,GAAGR,QAAQ,CAACE,IAAI,CAACI,WAAW,CAACG,EAAE,CAACD,IAAI;gBAC9CxC,QAAQ,CAACqB,OAAO,CAACe,IAAI,CAACI,IAAI,CAAC;gBAC3BxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;kBACpBI,IAAI;kBACJrB,IAAI,EAAE,MAAM;kBACZuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;kBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;gBAC7C,CAAC,CAAC;cACJ;YACF;UACF,CAAC;UAEDS,wBAAwB,EAAGtB,QAAQ,IAAK;YACtChC,QAAQ,CAACqB,OAAO,CAACe,IAAI,CAAC,SAAS,CAAC;UAClC,CAAC;UAEDmB,mBAAmB,EAAGvB,QAAQ,IAAK;YACjC,MAAMQ,IAAI,GAAGR,QAAQ,CAACE,IAAI,CAACO,EAAE,EAAED,IAAI;YACnC,IAAIA,IAAI,IAAI,CAACxC,QAAQ,CAACsB,OAAO,CAACkC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjB,IAAI,KAAKA,IAAI,CAAC,EAAE;cACxDxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;gBACpBI,IAAI;gBACJrB,IAAI,EAAE,UAAU;gBAChBuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;gBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;cAC7C,CAAC,CAAC;YACJ;UACF,CAAC;UAEDa,gBAAgB,EAAG1B,QAAQ,IAAK;YAC9B,MAAMQ,IAAI,GAAGR,QAAQ,CAACE,IAAI,CAACO,EAAE,EAAED,IAAI;YACnC,IAAIA,IAAI,IAAI,CAACxC,QAAQ,CAACsB,OAAO,CAACkC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjB,IAAI,KAAKA,IAAI,CAAC,EAAE;cACxDxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;gBACpBI,IAAI;gBACJrB,IAAI,EAAE,OAAO;gBACbuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;gBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;cAC7C,CAAC,CAAC;YACJ;UACF,CAAC;UAEDc,sBAAsB,EAAG3B,QAAQ,IAAK;YACpC,MAAMQ,IAAI,GAAGR,QAAQ,CAACE,IAAI,CAACO,EAAE,CAACD,IAAI;YAClC,IAAI,CAACxC,QAAQ,CAACsB,OAAO,CAACkC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjB,IAAI,KAAKA,IAAI,CAAC,EAAE;cAChDxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;gBACpBI,IAAI;gBACJrB,IAAI,EAAE,WAAW;gBACjBuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;gBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;cAC7C,CAAC,CAAC;YACJ;UACF,CAAC;UAEDe,sBAAsB,EAAG5B,QAAQ,IAAK;YACpC,MAAMQ,IAAI,GAAGR,QAAQ,CAACE,IAAI,CAACO,EAAE,CAACD,IAAI;YAClC,IAAI,CAACxC,QAAQ,CAACsB,OAAO,CAACkC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjB,IAAI,KAAKA,IAAI,CAAC,EAAE;cAChDxC,QAAQ,CAACsB,OAAO,CAACc,IAAI,CAAC;gBACpBI,IAAI;gBACJrB,IAAI,EAAE,MAAM;gBACZuB,IAAI,EAAEV,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACF,IAAI,IAAI,CAAC;gBACxCG,MAAM,EAAEb,QAAQ,CAACE,IAAI,CAACS,GAAG,EAAEC,KAAK,CAACC,MAAM,IAAI;cAC7C,CAAC,CAAC;YACJ;UACF;QACF,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOzC,KAAK,EAAE;QACdlB,OAAO,CAACkB,KAAK,CAAC,2BAA2BL,QAAQ,GAAG,EAAEK,KAAK,CAAC;MAC9D;IACF;IAEA,OAAOJ,QAAQ;EACjB;EAEA,MAAM6D,WAAWA,CAACC,YAAsB,EAAiB;IACvD,IAAI,CAAC,IAAI,CAACjF,YAAY,EAAE;MACtB,MAAM,IAAII,KAAK,CAAC,yBAAyB,CAAC;IAC5C;IAEAC,OAAO,CAACC,GAAG,CAAC,sBAAsB2E,YAAY,CAAC3D,MAAM,QAAQ,CAAC;IAE9D,KAAK,MAAMJ,QAAQ,IAAI+D,YAAY,EAAE;MACnC,IAAI;QACF,MAAMC,MAAM,GAAG,MAAM9G,EAAE,CAAC4D,QAAQ,CAACmD,MAAM,CAACjE,QAAQ,CAAC,CAACkE,IAAI,CAAC,MAAM,IAAI,CAAC,CAACC,KAAK,CAAC,MAAM,KAAK,CAAC;QAErF,IAAIH,MAAM,EAAE;UACV,MAAM/D,QAAQ,GAAG,MAAM,IAAI,CAACC,SAAS,CAACF,QAAQ,CAAC;UAC/C,IAAIC,QAAQ,EAAE;YACZ,IAAI,CAACnB,YAAY,CAACO,KAAK,CAACd,GAAG,CAACyB,QAAQ,EAAEC,QAAQ,CAAC;;YAE/C;YACA,IAAIA,QAAQ,CAACE,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;cAC/B,IAAI,CAACtB,YAAY,CAACS,YAAY,CAAChB,GAAG,CAACyB,QAAQ,EAAEC,QAAQ,CAACE,OAAO,CAAC;YAChE,CAAC,MAAM;cACL,IAAI,CAACrB,YAAY,CAACS,YAAY,CAAC6E,MAAM,CAACpE,QAAQ,CAAC;YACjD;UACF;QACF,CAAC,MAAM;UACL;UACA,IAAI,CAAClB,YAAY,CAACO,KAAK,CAAC+E,MAAM,CAACpE,QAAQ,CAAC;UACxC,IAAI,CAAClB,YAAY,CAACS,YAAY,CAAC6E,MAAM,CAACpE,QAAQ,CAAC;QACjD;MACF,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdlB,OAAO,CAACkB,KAAK,CAAC,yBAAyBL,QAAQ,GAAG,EAAEK,KAAK,CAAC;MAC5D;IACF;IAEA,IAAI,CAACvB,YAAY,CAACwB,WAAW,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;EAC5C;EAEA6D,UAAUA,CAAC5B,IAAY,EAA2C;IAChE,IAAI,CAAC,IAAI,CAAC3D,YAAY,EAAE;MACtB,OAAO,EAAE;IACX;IAEA,MAAMwF,OAAgD,GAAG,EAAE;IAE3D,KAAK,MAAM,CAACtE,QAAQ,EAAEC,QAAQ,CAAC,IAAI,IAAI,CAACnB,YAAY,CAACO,KAAK,EAAE;MAC1D,MAAMkF,MAAM,GAAGtE,QAAQ,CAACsB,OAAO,CAACkC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjB,IAAI,KAAKA,IAAI,CAAC;MAC1D,IAAI8B,MAAM,EAAE;QACVD,OAAO,CAACjC,IAAI,CAAC;UAAEmC,IAAI,EAAExE,QAAQ;UAAEuE;QAAO,CAAC,CAAC;MAC1C;IACF;IAEA,OAAOD,OAAO;EAChB;EAEAG,cAAcA,CAACC,UAAkB,EAAY;IAC3C,IAAI,CAAC,IAAI,CAAC5F,YAAY,EAAE;MACtB,OAAO,EAAE;IACX;IAEA,MAAM6F,UAAoB,GAAG,EAAE;IAE/B,KAAK,MAAM,CAAC3E,QAAQ,EAAEC,QAAQ,CAAC,IAAI,IAAI,CAACnB,YAAY,CAACO,KAAK,EAAE;MAC1D;MACA,IAAIY,QAAQ,CAACsB,OAAO,CAACqD,IAAI,CAAClB,CAAC,IAAIA,CAAC,CAACjB,IAAI,KAAKiC,UAAU,CAAC,EAAE;QACrDC,UAAU,CAACtC,IAAI,CAACrC,QAAQ,CAAC;MAC3B;IACF;IAEA,OAAO2E,UAAU;EACnB;EAEAE,cAAcA,CAAA,EAA0B;IACtC,OAAO,IAAI,CAAC/F,YAAY,EAAES,YAAY,IAAI,IAAID,GAAG,CAAC,CAAC;EACrD;EAEAwF,eAAeA,CAAA,EAAwB;IACrC,OAAO,IAAI,CAAChG,YAAY;EAC1B;EAEQuC,WAAWA,CAACX,GAAW,EAAoB;IACjD,QAAQA,GAAG;MACT,KAAK,KAAK;MACV,KAAK,MAAM;QACT,OAAO,YAAY;MACrB,KAAK,KAAK;MACV,KAAK,MAAM;QACT,OAAO,YAAY;MACrB,KAAK,MAAM;MACX,KAAK,OAAO;QACV,OAAO,KAAK;MACd,KAAK,OAAO;QACV,OAAO,MAAM;MACf;QACE,OAAO,OAAO;IAClB;EACF;EAEQS,UAAUA,CAAC4D,GAAW,EAAU;IACtC,IAAI7D,IAAI,GAAG,CAAC;IACZ,KAAK,IAAIhD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6G,GAAG,CAAC3E,MAAM,EAAElC,CAAC,EAAE,EAAE;MACnC,MAAM8G,IAAI,GAAGD,GAAG,CAACE,UAAU,CAAC/G,CAAC,CAAC;MAC9BgD,IAAI,GAAI,CAACA,IAAI,IAAI,CAAC,IAAIA,IAAI,GAAI8D,IAAI;MAClC9D,IAAI,GAAGA,IAAI,GAAGA,IAAI,CAAC,CAAC;IACtB;IACA,OAAOA,IAAI,CAACgE,QAAQ,CAAC,EAAE,CAAC;EAC1B;AACF;AAAC5D,OAAA,CAAAzC,cAAA,GAAAA,cAAA","ignoreList":[]}