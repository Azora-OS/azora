{"version":3,"names":["request","require","app","describe","it","response","get","expect","status","toBe","body","service","set","success","data","toBeDefined","count","transactionData","amount","currency","description","accountId","post","send","error","transactionId","id"],"sources":["azora-ledger.test.js"],"sourcesContent":["const request = require('supertest');\nconst app = require('../server.js');\n\ndescribe('Azora Ledger Service', () => {\n  describe('GET /health', () => {\n    it('should return health status', async () => {\n      const response = await request(app).get('/health');\n      expect(response.status).toBe(200);\n      expect(response.body.status).toBe('OK');\n      expect(response.body.service).toBe('azora-ledger');\n    });\n  });\n\n  describe('GET /api/transactions', () => {\n    it('should return a list of transactions', async () => {\n      const response = await request(app)\n        .get('/api/transactions')\n        .set('Accept', 'application/json');\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data).toBeDefined();\n      expect(response.body.count).toBeDefined();\n    });\n  });\n\n  describe('POST /api/transactions', () => {\n    it('should create a new transaction', async () => {\n      const transactionData = {\n        amount: 100,\n        currency: 'USD',\n        description: 'Test transaction',\n        accountId: 'account_123'\n      };\n\n      const response = await request(app)\n        .post('/api/transactions')\n        .send(transactionData)\n        .set('Accept', 'application/json');\n\n      expect(response.status).toBe(201);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data).toBeDefined();\n      expect(response.body.data.amount).toBe(transactionData.amount);\n    });\n\n    it('should return error when required fields are missing', async () => {\n      const transactionData = {\n        description: 'Test transaction'\n      };\n\n      const response = await request(app)\n        .post('/api/transactions')\n        .send(transactionData)\n        .set('Accept', 'application/json');\n\n      expect(response.status).toBe(400);\n      expect(response.body.error).toBe('Amount and currency are required');\n    });\n  });\n\n  describe('GET /api/transactions/:transactionId', () => {\n    it('should return a specific transaction', async () => {\n      const transactionId = 'transaction_123';\n\n      const response = await request(app)\n        .get(`/api/transactions/${transactionId}`)\n        .set('Accept', 'application/json');\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data).toBeDefined();\n      expect(response.body.data.id).toBe(transactionId);\n    });\n  });\n\n  describe('404 handling', () => {\n    it('should return 404 for unknown routes', async () => {\n      const response = await request(app).get('/non-existent-route');\n      expect(response.status).toBe(404);\n      expect(response.body.error).toBe('Route not found');\n    });\n  });\n});"],"mappings":"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","ignoreList":[]}