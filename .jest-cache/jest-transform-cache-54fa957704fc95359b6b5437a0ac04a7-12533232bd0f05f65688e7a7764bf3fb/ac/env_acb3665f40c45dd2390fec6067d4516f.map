{"version":3,"names":["_dotenv","require","_path","loadTestEnv","envPath","resolve","process","cwd","result","config","path","error","console","warn","env","NODE_ENV","validateTestEnv","required","missing","key","push","length","Error","join","getTestEnv","fallback","value","isTestEnv","getTestDatabaseUrl","getTestRedisUrl","isDebugEnabled","DEBUG_TESTS"],"sources":["env.ts"],"sourcesContent":["import { config } from 'dotenv';\r\nimport { resolve } from 'path';\r\n\r\n/**\r\n * Load test environment variables\r\n */\r\nexport function loadTestEnv(): void {\r\n  // Load .env.test file\r\n  const envPath = resolve(process.cwd(), '.env.test');\r\n  const result = config({ path: envPath });\r\n  \r\n  if (result.error) {\r\n    console.warn('Warning: .env.test file not found, using default test values');\r\n  }\r\n  \r\n  // Ensure NODE_ENV is set to test\r\n  process.env.NODE_ENV = 'test';\r\n  \r\n  // Validate required environment variables\r\n  validateTestEnv();\r\n}\r\n\r\n/**\r\n * Validate required test environment variables\r\n */\r\nfunction validateTestEnv(): void {\r\n  const required = [\r\n    'DATABASE_URL',\r\n    'REDIS_URL',\r\n    'JWT_SECRET',\r\n  ];\r\n  \r\n  const missing: string[] = [];\r\n  \r\n  for (const key of required) {\r\n    if (!process.env[key]) {\r\n      missing.push(key);\r\n    }\r\n  }\r\n  \r\n  if (missing.length > 0) {\r\n    throw new Error(\r\n      `Missing required test environment variables: ${missing.join(', ')}\\n` +\r\n      'Please create a .env.test file with the required variables.'\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Get test environment variable with fallback\r\n */\r\nexport function getTestEnv(key: string, fallback?: string): string {\r\n  const value = process.env[key];\r\n  \r\n  if (!value && !fallback) {\r\n    throw new Error(`Environment variable ${key} is not set and no fallback provided`);\r\n  }\r\n  \r\n  return value || fallback!;\r\n}\r\n\r\n/**\r\n * Check if running in test environment\r\n */\r\nexport function isTestEnv(): boolean {\r\n  return process.env.NODE_ENV === 'test';\r\n}\r\n\r\n/**\r\n * Get database URL for tests\r\n */\r\nexport function getTestDatabaseUrl(): string {\r\n  return getTestEnv('DATABASE_URL', 'postgresql://postgres:test@localhost:5432/azora_test');\r\n}\r\n\r\n/**\r\n * Get Redis URL for tests\r\n */\r\nexport function getTestRedisUrl(): string {\r\n  return getTestEnv('REDIS_URL', 'redis://localhost:6379');\r\n}\r\n\r\n/**\r\n * Check if debug mode is enabled for tests\r\n */\r\nexport function isDebugEnabled(): boolean {\r\n  return process.env.DEBUG_TESTS === 'true';\r\n}\r\n"],"mappings":";;;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAEA;AACA;AACA;AACO,SAASE,WAAWA,CAAA,EAAS;EAClC;EACA,MAAMC,OAAO,GAAG,IAAAC,aAAO,EAACC,OAAO,CAACC,GAAG,CAAC,CAAC,EAAE,WAAW,CAAC;EACnD,MAAMC,MAAM,GAAG,IAAAC,cAAM,EAAC;IAAEC,IAAI,EAAEN;EAAQ,CAAC,CAAC;EAExC,IAAII,MAAM,CAACG,KAAK,EAAE;IAChBC,OAAO,CAACC,IAAI,CAAC,8DAA8D,CAAC;EAC9E;;EAEA;EACAP,OAAO,CAACQ,GAAG,CAACC,QAAQ,GAAG,MAAM;;EAE7B;EACAC,eAAe,CAAC,CAAC;AACnB;;AAEA;AACA;AACA;AACA,SAASA,eAAeA,CAAA,EAAS;EAC/B,MAAMC,QAAQ,GAAG,CACf,cAAc,EACd,WAAW,EACX,YAAY,CACb;EAED,MAAMC,OAAiB,GAAG,EAAE;EAE5B,KAAK,MAAMC,GAAG,IAAIF,QAAQ,EAAE;IAC1B,IAAI,CAACX,OAAO,CAACQ,GAAG,CAACK,GAAG,CAAC,EAAE;MACrBD,OAAO,CAACE,IAAI,CAACD,GAAG,CAAC;IACnB;EACF;EAEA,IAAID,OAAO,CAACG,MAAM,GAAG,CAAC,EAAE;IACtB,MAAM,IAAIC,KAAK,CACb,gDAAgDJ,OAAO,CAACK,IAAI,CAAC,IAAI,CAAC,IAAI,GACtE,6DACF,CAAC;EACH;AACF;;AAEA;AACA;AACA;AACO,SAASC,UAAUA,CAACL,GAAW,EAAEM,QAAiB,EAAU;EACjE,MAAMC,KAAK,GAAGpB,OAAO,CAACQ,GAAG,CAACK,GAAG,CAAC;EAE9B,IAAI,CAACO,KAAK,IAAI,CAACD,QAAQ,EAAE;IACvB,MAAM,IAAIH,KAAK,CAAC,wBAAwBH,GAAG,sCAAsC,CAAC;EACpF;EAEA,OAAOO,KAAK,IAAID,QAAS;AAC3B;;AAEA;AACA;AACA;AACO,SAASE,SAASA,CAAA,EAAY;EACnC,OAAOrB,OAAO,CAACQ,GAAG,CAACC,QAAQ,KAAK,MAAM;AACxC;;AAEA;AACA;AACA;AACO,SAASa,kBAAkBA,CAAA,EAAW;EAC3C,OAAOJ,UAAU,CAAC,cAAc,EAAE,sDAAsD,CAAC;AAC3F;;AAEA;AACA;AACA;AACO,SAASK,eAAeA,CAAA,EAAW;EACxC,OAAOL,UAAU,CAAC,WAAW,EAAE,wBAAwB,CAAC;AAC1D;;AAEA;AACA;AACA;AACO,SAASM,cAAcA,CAAA,EAAY;EACxC,OAAOxB,OAAO,CAACQ,GAAG,CAACiB,WAAW,KAAK,MAAM;AAC3C","ignoreList":[]}