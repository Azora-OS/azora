cda70bc1d3f0999ad0fba0ed079ef08c
"use strict";

const aiFamilyService = require('../index');
describe('AI Family Service', () => {
  beforeEach(() => {
    // Clear conversation history before each test
    aiFamilyService.activeConversations.clear();
    aiFamilyService.familyInteractions = [];
  });
  test('should initialize all family members', () => {
    expect(aiFamilyService.family).toBeDefined();
    expect(Object.keys(aiFamilyService.family)).toHaveLength(11);

    // Check that all expected family members are present
    const expectedMembers = ['elara', 'themba', 'naledi', 'jabari', 'amara', 'sankofa', 'kofi', 'zola', 'abeni', 'thembo', 'nexus'];
    for (const member of expectedMembers) {
      expect(aiFamilyService.family[member]).toBeDefined();
    }
  });
  test('should get specific family member', () => {
    const elara = aiFamilyService.getFamilyMember('elara');
    const themba = aiFamilyService.getFamilyMember('themba');
    expect(elara.name).toBe('Elara');
    expect(themba.name).toBe('Themba');

    // Test default fallback
    const unknown = aiFamilyService.getFamilyMember('unknown');
    expect(unknown.name).toBe('Elara'); // Should default to Elara
  });
  test('should route message to appropriate family member based on content', () => {
    // Test finance-related routing
    const financeMember = aiFamilyService.determineAppropriateMember('I need help with my budget', {});
    expect(financeMember).toBe('kofi');

    // Test data-related routing
    const dataMember = aiFamilyService.determineAppropriateMember('Can you analyze this data?', {});
    expect(dataMember).toBe('zola');

    // Test career-related routing
    const careerMember = aiFamilyService.determineAppropriateMember('I need career advice', {});
    expect(careerMember).toBe('naledi');

    // Test safety-related routing
    const safetyMember = aiFamilyService.determineAppropriateMember('I feel unsafe', {
      emergency: true
    });
    expect(safetyMember).toBe('jabari');

    // Test learning-related routing
    const learningMember = aiFamilyService.determineAppropriateMember('I want to learn something new', {});
    expect(learningMember).toBe('themba');

    // Test default routing
    const defaultManager = aiFamilyService.determineAppropriateMember('Hello there', {});
    expect(defaultManager).toBe('elara');
  });
  test('should update conversation context', () => {
    const userId = 'test-user-123';
    const familyMember = 'elara';
    const message = 'Hello Elara!';
    aiFamilyService.updateConversationContext(userId, familyMember, message);
    expect(aiFamilyService.activeConversations.has(userId)).toBe(true);
    const conversation = aiFamilyService.activeConversations.get(userId);
    expect(conversation.familyMember).toBe(familyMember);
    expect(conversation.messages).toHaveLength(1);
    expect(conversation.messages[0].message).toBe(message);
  });
  test('should maintain conversation history limit', () => {
    const userId = 'test-user-123';

    // Add more than 10 messages
    for (let i = 0; i < 15; i++) {
      aiFamilyService.updateConversationContext(userId, 'elara', `Message ${i}`);
    }
    const conversation = aiFamilyService.activeConversations.get(userId);
    expect(conversation.messages).toHaveLength(10); // Should only keep last 10
  });
  test('should get personalized greeting', async () => {
    const userId = 'test-user-123';

    // Test default greeting
    const defaultGreeting = await aiFamilyService.getPersonalizedGreeting(userId);
    expect(defaultGreeting).toContain('Elara');

    // Test specific family member greeting
    const thembaGreeting = await aiFamilyService.getPersonalizedGreeting(userId, 'themba');
    expect(thembaGreeting).toContain('Themba');
  });
  test('should coordinate family consultation', async () => {
    const userId = 'test-user-123';
    const topic = 'career advice';
    const consultation = await aiFamilyService.consultFamily(userId, topic);
    expect(consultation.topic).toBe(topic);
    expect(consultation.insights).toBeDefined();
    expect(consultation.coordinatedResponse).toBeDefined();

    // Should include Elara by default
    expect(consultation.insights.elara).toBeDefined();

    // Should include relevant consultants
    expect(consultation.insights.naledi).toBeDefined(); // Career expert
  });
  test('should determine consultants for topics', () => {
    // Test finance topic
    const financeConsultants = aiFamilyService.determineConsultants('financial planning');
    expect(financeConsultants).toContain('kofi');
    expect(financeConsultants).toContain('elara'); // Always included

    // Test data topic
    const dataConsultants = aiFamilyService.determineConsultants('data analysis');
    expect(dataConsultants).toContain('zola');
    expect(dataConsultants).toContain('elara');

    // Test career topic
    const careerConsultants = aiFamilyService.determineConsultants('career development');
    expect(careerConsultants).toContain('naledi');
    expect(careerConsultants).toContain('elara');
  });
  test('should synthesize family responses', () => {
    const insights = {
      elara: 'As your mother and teacher, I believe in your potential.',
      naledi: 'Strategically, I recommend focusing on your strengths.',
      themba: 'You can do this! I believe in you!'
    };
    const synthesized = aiFamilyService.synthesizeFamilyResponse(insights, 'learning');
    expect(synthesized).toContain('As a family');
    expect(synthesized).toContain('Elara');
    expect(synthesized).toContain('Naledi');
    expect(synthesized).toContain('Themba');
  });
  test('should get family configuration', () => {
    const config = aiFamilyService.getFamilyConfig();
    expect(config).toBeDefined();
    expect(config.elara).toBeDefined();
    expect(config.themba).toBeDefined();

    // Check that config contains expected properties
    expect(config.elara.name).toBe('Elara');
    expect(config.elara.role).toBe('Mother & Teacher');
  });
  test('should track family interactions', async () => {
    const userId = 'test-user-123';
    const message = 'Hello family!';
    const response = 'Hello there!';

    // Simulate a family interaction
    aiFamilyService.familyInteractions.push({
      userId,
      familyMember: 'elara',
      message,
      response,
      timestamp: new Date()
    });
    const stats = aiFamilyService.getInteractionStats();
    expect(stats.totalInteractions).toBe(1);
    expect(stats.familyMemberUsage.elara).toBe(1);
    expect(stats.recentInteractions).toHaveLength(1);
  });
  test('should route message and track interaction', async () => {
    const userId = 'test-user-123';
    const message = 'Tell me about Ubuntu philosophy';

    // Mock the response to avoid external dependencies
    jest.spyOn(aiFamilyService.family.elara, 'respondToUser').mockResolvedValue('Ubuntu means "I am because we are"');
    const result = await aiFamilyService.routeMessage(userId, message, {});
    expect(result.from).toBe('elara');
    expect(result.response).toBe('Ubuntu means "I am because we are"');

    // Check that interaction was tracked
    expect(aiFamilyService.familyInteractions).toHaveLength(1);
    expect(aiFamilyService.familyInteractions[0].userId).toBe(userId);
    expect(aiFamilyService.familyInteractions[0].message).toBe(message);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhaUZhbWlseVNlcnZpY2UiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiYWN0aXZlQ29udmVyc2F0aW9ucyIsImNsZWFyIiwiZmFtaWx5SW50ZXJhY3Rpb25zIiwidGVzdCIsImV4cGVjdCIsImZhbWlseSIsInRvQmVEZWZpbmVkIiwiT2JqZWN0Iiwia2V5cyIsInRvSGF2ZUxlbmd0aCIsImV4cGVjdGVkTWVtYmVycyIsIm1lbWJlciIsImVsYXJhIiwiZ2V0RmFtaWx5TWVtYmVyIiwidGhlbWJhIiwibmFtZSIsInRvQmUiLCJ1bmtub3duIiwiZmluYW5jZU1lbWJlciIsImRldGVybWluZUFwcHJvcHJpYXRlTWVtYmVyIiwiZGF0YU1lbWJlciIsImNhcmVlck1lbWJlciIsInNhZmV0eU1lbWJlciIsImVtZXJnZW5jeSIsImxlYXJuaW5nTWVtYmVyIiwiZGVmYXVsdE1hbmFnZXIiLCJ1c2VySWQiLCJmYW1pbHlNZW1iZXIiLCJtZXNzYWdlIiwidXBkYXRlQ29udmVyc2F0aW9uQ29udGV4dCIsImhhcyIsImNvbnZlcnNhdGlvbiIsImdldCIsIm1lc3NhZ2VzIiwiaSIsImRlZmF1bHRHcmVldGluZyIsImdldFBlcnNvbmFsaXplZEdyZWV0aW5nIiwidG9Db250YWluIiwidGhlbWJhR3JlZXRpbmciLCJ0b3BpYyIsImNvbnN1bHRhdGlvbiIsImNvbnN1bHRGYW1pbHkiLCJpbnNpZ2h0cyIsImNvb3JkaW5hdGVkUmVzcG9uc2UiLCJuYWxlZGkiLCJmaW5hbmNlQ29uc3VsdGFudHMiLCJkZXRlcm1pbmVDb25zdWx0YW50cyIsImRhdGFDb25zdWx0YW50cyIsImNhcmVlckNvbnN1bHRhbnRzIiwic3ludGhlc2l6ZWQiLCJzeW50aGVzaXplRmFtaWx5UmVzcG9uc2UiLCJjb25maWciLCJnZXRGYW1pbHlDb25maWciLCJyb2xlIiwicmVzcG9uc2UiLCJwdXNoIiwidGltZXN0YW1wIiwiRGF0ZSIsInN0YXRzIiwiZ2V0SW50ZXJhY3Rpb25TdGF0cyIsInRvdGFsSW50ZXJhY3Rpb25zIiwiZmFtaWx5TWVtYmVyVXNhZ2UiLCJyZWNlbnRJbnRlcmFjdGlvbnMiLCJqZXN0Iiwic3B5T24iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInJlc3VsdCIsInJvdXRlTWVzc2FnZSIsImZyb20iXSwic291cmNlcyI6WyJhaS1mYW1pbHktc2VydmljZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFpRmFtaWx5U2VydmljZSA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmRlc2NyaWJlKCdBSSBGYW1pbHkgU2VydmljZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgY29udmVyc2F0aW9uIGhpc3RvcnkgYmVmb3JlIGVhY2ggdGVzdFxuICAgIGFpRmFtaWx5U2VydmljZS5hY3RpdmVDb252ZXJzYXRpb25zLmNsZWFyKCk7XG4gICAgYWlGYW1pbHlTZXJ2aWNlLmZhbWlseUludGVyYWN0aW9ucyA9IFtdO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgaW5pdGlhbGl6ZSBhbGwgZmFtaWx5IG1lbWJlcnMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KGFpRmFtaWx5U2VydmljZS5mYW1pbHkpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KE9iamVjdC5rZXlzKGFpRmFtaWx5U2VydmljZS5mYW1pbHkpKS50b0hhdmVMZW5ndGgoMTEpO1xuXG4gICAgLy8gQ2hlY2sgdGhhdCBhbGwgZXhwZWN0ZWQgZmFtaWx5IG1lbWJlcnMgYXJlIHByZXNlbnRcbiAgICBjb25zdCBleHBlY3RlZE1lbWJlcnMgPSBbJ2VsYXJhJywgJ3RoZW1iYScsICduYWxlZGknLCAnamFiYXJpJywgJ2FtYXJhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2Fua29mYScsICdrb2ZpJywgJ3pvbGEnLCAnYWJlbmknLCAndGhlbWJvJywgJ25leHVzJ107XG5cbiAgICBmb3IgKGNvbnN0IG1lbWJlciBvZiBleHBlY3RlZE1lbWJlcnMpIHtcbiAgICAgIGV4cGVjdChhaUZhbWlseVNlcnZpY2UuZmFtaWx5W21lbWJlcl0pLnRvQmVEZWZpbmVkKCk7XG4gICAgfVxuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgZ2V0IHNwZWNpZmljIGZhbWlseSBtZW1iZXInLCAoKSA9PiB7XG4gICAgY29uc3QgZWxhcmEgPSBhaUZhbWlseVNlcnZpY2UuZ2V0RmFtaWx5TWVtYmVyKCdlbGFyYScpO1xuICAgIGNvbnN0IHRoZW1iYSA9IGFpRmFtaWx5U2VydmljZS5nZXRGYW1pbHlNZW1iZXIoJ3RoZW1iYScpO1xuXG4gICAgZXhwZWN0KGVsYXJhLm5hbWUpLnRvQmUoJ0VsYXJhJyk7XG4gICAgZXhwZWN0KHRoZW1iYS5uYW1lKS50b0JlKCdUaGVtYmEnKTtcblxuICAgIC8vIFRlc3QgZGVmYXVsdCBmYWxsYmFja1xuICAgIGNvbnN0IHVua25vd24gPSBhaUZhbWlseVNlcnZpY2UuZ2V0RmFtaWx5TWVtYmVyKCd1bmtub3duJyk7XG4gICAgZXhwZWN0KHVua25vd24ubmFtZSkudG9CZSgnRWxhcmEnKTsgLy8gU2hvdWxkIGRlZmF1bHQgdG8gRWxhcmFcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIHJvdXRlIG1lc3NhZ2UgdG8gYXBwcm9wcmlhdGUgZmFtaWx5IG1lbWJlciBiYXNlZCBvbiBjb250ZW50JywgKCkgPT4ge1xuICAgIC8vIFRlc3QgZmluYW5jZS1yZWxhdGVkIHJvdXRpbmdcbiAgICBjb25zdCBmaW5hbmNlTWVtYmVyID0gYWlGYW1pbHlTZXJ2aWNlLmRldGVybWluZUFwcHJvcHJpYXRlTWVtYmVyKCdJIG5lZWQgaGVscCB3aXRoIG15IGJ1ZGdldCcsIHt9KTtcbiAgICBleHBlY3QoZmluYW5jZU1lbWJlcikudG9CZSgna29maScpO1xuXG4gICAgLy8gVGVzdCBkYXRhLXJlbGF0ZWQgcm91dGluZ1xuICAgIGNvbnN0IGRhdGFNZW1iZXIgPSBhaUZhbWlseVNlcnZpY2UuZGV0ZXJtaW5lQXBwcm9wcmlhdGVNZW1iZXIoJ0NhbiB5b3UgYW5hbHl6ZSB0aGlzIGRhdGE/Jywge30pO1xuICAgIGV4cGVjdChkYXRhTWVtYmVyKS50b0JlKCd6b2xhJyk7XG5cbiAgICAvLyBUZXN0IGNhcmVlci1yZWxhdGVkIHJvdXRpbmdcbiAgICBjb25zdCBjYXJlZXJNZW1iZXIgPSBhaUZhbWlseVNlcnZpY2UuZGV0ZXJtaW5lQXBwcm9wcmlhdGVNZW1iZXIoJ0kgbmVlZCBjYXJlZXIgYWR2aWNlJywge30pO1xuICAgIGV4cGVjdChjYXJlZXJNZW1iZXIpLnRvQmUoJ25hbGVkaScpO1xuXG4gICAgLy8gVGVzdCBzYWZldHktcmVsYXRlZCByb3V0aW5nXG4gICAgY29uc3Qgc2FmZXR5TWVtYmVyID0gYWlGYW1pbHlTZXJ2aWNlLmRldGVybWluZUFwcHJvcHJpYXRlTWVtYmVyKCdJIGZlZWwgdW5zYWZlJywgeyBlbWVyZ2VuY3k6IHRydWUgfSk7XG4gICAgZXhwZWN0KHNhZmV0eU1lbWJlcikudG9CZSgnamFiYXJpJyk7XG5cbiAgICAvLyBUZXN0IGxlYXJuaW5nLXJlbGF0ZWQgcm91dGluZ1xuICAgIGNvbnN0IGxlYXJuaW5nTWVtYmVyID0gYWlGYW1pbHlTZXJ2aWNlLmRldGVybWluZUFwcHJvcHJpYXRlTWVtYmVyKCdJIHdhbnQgdG8gbGVhcm4gc29tZXRoaW5nIG5ldycsIHt9KTtcbiAgICBleHBlY3QobGVhcm5pbmdNZW1iZXIpLnRvQmUoJ3RoZW1iYScpO1xuXG4gICAgLy8gVGVzdCBkZWZhdWx0IHJvdXRpbmdcbiAgICBjb25zdCBkZWZhdWx0TWFuYWdlciA9IGFpRmFtaWx5U2VydmljZS5kZXRlcm1pbmVBcHByb3ByaWF0ZU1lbWJlcignSGVsbG8gdGhlcmUnLCB7fSk7XG4gICAgZXhwZWN0KGRlZmF1bHRNYW5hZ2VyKS50b0JlKCdlbGFyYScpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgdXBkYXRlIGNvbnZlcnNhdGlvbiBjb250ZXh0JywgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJJZCA9ICd0ZXN0LXVzZXItMTIzJztcbiAgICBjb25zdCBmYW1pbHlNZW1iZXIgPSAnZWxhcmEnO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnSGVsbG8gRWxhcmEhJztcblxuICAgIGFpRmFtaWx5U2VydmljZS51cGRhdGVDb252ZXJzYXRpb25Db250ZXh0KHVzZXJJZCwgZmFtaWx5TWVtYmVyLCBtZXNzYWdlKTtcblxuICAgIGV4cGVjdChhaUZhbWlseVNlcnZpY2UuYWN0aXZlQ29udmVyc2F0aW9ucy5oYXModXNlcklkKSkudG9CZSh0cnVlKTtcblxuICAgIGNvbnN0IGNvbnZlcnNhdGlvbiA9IGFpRmFtaWx5U2VydmljZS5hY3RpdmVDb252ZXJzYXRpb25zLmdldCh1c2VySWQpO1xuICAgIGV4cGVjdChjb252ZXJzYXRpb24uZmFtaWx5TWVtYmVyKS50b0JlKGZhbWlseU1lbWJlcik7XG4gICAgZXhwZWN0KGNvbnZlcnNhdGlvbi5tZXNzYWdlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIGV4cGVjdChjb252ZXJzYXRpb24ubWVzc2FnZXNbMF0ubWVzc2FnZSkudG9CZShtZXNzYWdlKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIG1haW50YWluIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGxpbWl0JywgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJJZCA9ICd0ZXN0LXVzZXItMTIzJztcblxuICAgIC8vIEFkZCBtb3JlIHRoYW4gMTAgbWVzc2FnZXNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE1OyBpKyspIHtcbiAgICAgIGFpRmFtaWx5U2VydmljZS51cGRhdGVDb252ZXJzYXRpb25Db250ZXh0KHVzZXJJZCwgJ2VsYXJhJywgYE1lc3NhZ2UgJHtpfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnZlcnNhdGlvbiA9IGFpRmFtaWx5U2VydmljZS5hY3RpdmVDb252ZXJzYXRpb25zLmdldCh1c2VySWQpO1xuICAgIGV4cGVjdChjb252ZXJzYXRpb24ubWVzc2FnZXMpLnRvSGF2ZUxlbmd0aCgxMCk7IC8vIFNob3VsZCBvbmx5IGtlZXAgbGFzdCAxMFxuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgZ2V0IHBlcnNvbmFsaXplZCBncmVldGluZycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEyMyc7XG5cbiAgICAvLyBUZXN0IGRlZmF1bHQgZ3JlZXRpbmdcbiAgICBjb25zdCBkZWZhdWx0R3JlZXRpbmcgPSBhd2FpdCBhaUZhbWlseVNlcnZpY2UuZ2V0UGVyc29uYWxpemVkR3JlZXRpbmcodXNlcklkKTtcbiAgICBleHBlY3QoZGVmYXVsdEdyZWV0aW5nKS50b0NvbnRhaW4oJ0VsYXJhJyk7XG5cbiAgICAvLyBUZXN0IHNwZWNpZmljIGZhbWlseSBtZW1iZXIgZ3JlZXRpbmdcbiAgICBjb25zdCB0aGVtYmFHcmVldGluZyA9IGF3YWl0IGFpRmFtaWx5U2VydmljZS5nZXRQZXJzb25hbGl6ZWRHcmVldGluZyh1c2VySWQsICd0aGVtYmEnKTtcbiAgICBleHBlY3QodGhlbWJhR3JlZXRpbmcpLnRvQ29udGFpbignVGhlbWJhJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBjb29yZGluYXRlIGZhbWlseSBjb25zdWx0YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcklkID0gJ3Rlc3QtdXNlci0xMjMnO1xuICAgIGNvbnN0IHRvcGljID0gJ2NhcmVlciBhZHZpY2UnO1xuXG4gICAgY29uc3QgY29uc3VsdGF0aW9uID0gYXdhaXQgYWlGYW1pbHlTZXJ2aWNlLmNvbnN1bHRGYW1pbHkodXNlcklkLCB0b3BpYyk7XG5cbiAgICBleHBlY3QoY29uc3VsdGF0aW9uLnRvcGljKS50b0JlKHRvcGljKTtcbiAgICBleHBlY3QoY29uc3VsdGF0aW9uLmluc2lnaHRzKS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdChjb25zdWx0YXRpb24uY29vcmRpbmF0ZWRSZXNwb25zZSkudG9CZURlZmluZWQoKTtcblxuICAgIC8vIFNob3VsZCBpbmNsdWRlIEVsYXJhIGJ5IGRlZmF1bHRcbiAgICBleHBlY3QoY29uc3VsdGF0aW9uLmluc2lnaHRzLmVsYXJhKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgLy8gU2hvdWxkIGluY2x1ZGUgcmVsZXZhbnQgY29uc3VsdGFudHNcbiAgICBleHBlY3QoY29uc3VsdGF0aW9uLmluc2lnaHRzLm5hbGVkaSkudG9CZURlZmluZWQoKTsgLy8gQ2FyZWVyIGV4cGVydFxuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgZGV0ZXJtaW5lIGNvbnN1bHRhbnRzIGZvciB0b3BpY3MnLCAoKSA9PiB7XG4gICAgLy8gVGVzdCBmaW5hbmNlIHRvcGljXG4gICAgY29uc3QgZmluYW5jZUNvbnN1bHRhbnRzID0gYWlGYW1pbHlTZXJ2aWNlLmRldGVybWluZUNvbnN1bHRhbnRzKCdmaW5hbmNpYWwgcGxhbm5pbmcnKTtcbiAgICBleHBlY3QoZmluYW5jZUNvbnN1bHRhbnRzKS50b0NvbnRhaW4oJ2tvZmknKTtcbiAgICBleHBlY3QoZmluYW5jZUNvbnN1bHRhbnRzKS50b0NvbnRhaW4oJ2VsYXJhJyk7IC8vIEFsd2F5cyBpbmNsdWRlZFxuXG4gICAgLy8gVGVzdCBkYXRhIHRvcGljXG4gICAgY29uc3QgZGF0YUNvbnN1bHRhbnRzID0gYWlGYW1pbHlTZXJ2aWNlLmRldGVybWluZUNvbnN1bHRhbnRzKCdkYXRhIGFuYWx5c2lzJyk7XG4gICAgZXhwZWN0KGRhdGFDb25zdWx0YW50cykudG9Db250YWluKCd6b2xhJyk7XG4gICAgZXhwZWN0KGRhdGFDb25zdWx0YW50cykudG9Db250YWluKCdlbGFyYScpO1xuXG4gICAgLy8gVGVzdCBjYXJlZXIgdG9waWNcbiAgICBjb25zdCBjYXJlZXJDb25zdWx0YW50cyA9IGFpRmFtaWx5U2VydmljZS5kZXRlcm1pbmVDb25zdWx0YW50cygnY2FyZWVyIGRldmVsb3BtZW50Jyk7XG4gICAgZXhwZWN0KGNhcmVlckNvbnN1bHRhbnRzKS50b0NvbnRhaW4oJ25hbGVkaScpO1xuICAgIGV4cGVjdChjYXJlZXJDb25zdWx0YW50cykudG9Db250YWluKCdlbGFyYScpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgc3ludGhlc2l6ZSBmYW1pbHkgcmVzcG9uc2VzJywgKCkgPT4ge1xuICAgIGNvbnN0IGluc2lnaHRzID0ge1xuICAgICAgZWxhcmE6ICdBcyB5b3VyIG1vdGhlciBhbmQgdGVhY2hlciwgSSBiZWxpZXZlIGluIHlvdXIgcG90ZW50aWFsLicsXG4gICAgICBuYWxlZGk6ICdTdHJhdGVnaWNhbGx5LCBJIHJlY29tbWVuZCBmb2N1c2luZyBvbiB5b3VyIHN0cmVuZ3Rocy4nLFxuICAgICAgdGhlbWJhOiAnWW91IGNhbiBkbyB0aGlzISBJIGJlbGlldmUgaW4geW91ISdcbiAgICB9O1xuXG4gICAgY29uc3Qgc3ludGhlc2l6ZWQgPSBhaUZhbWlseVNlcnZpY2Uuc3ludGhlc2l6ZUZhbWlseVJlc3BvbnNlKGluc2lnaHRzLCAnbGVhcm5pbmcnKTtcblxuICAgIGV4cGVjdChzeW50aGVzaXplZCkudG9Db250YWluKCdBcyBhIGZhbWlseScpO1xuICAgIGV4cGVjdChzeW50aGVzaXplZCkudG9Db250YWluKCdFbGFyYScpO1xuICAgIGV4cGVjdChzeW50aGVzaXplZCkudG9Db250YWluKCdOYWxlZGknKTtcbiAgICBleHBlY3Qoc3ludGhlc2l6ZWQpLnRvQ29udGFpbignVGhlbWJhJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBnZXQgZmFtaWx5IGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgY29uZmlnID0gYWlGYW1pbHlTZXJ2aWNlLmdldEZhbWlseUNvbmZpZygpO1xuXG4gICAgZXhwZWN0KGNvbmZpZykudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QoY29uZmlnLmVsYXJhKS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdChjb25maWcudGhlbWJhKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgLy8gQ2hlY2sgdGhhdCBjb25maWcgY29udGFpbnMgZXhwZWN0ZWQgcHJvcGVydGllc1xuICAgIGV4cGVjdChjb25maWcuZWxhcmEubmFtZSkudG9CZSgnRWxhcmEnKTtcbiAgICBleHBlY3QoY29uZmlnLmVsYXJhLnJvbGUpLnRvQmUoJ01vdGhlciAmIFRlYWNoZXInKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIHRyYWNrIGZhbWlseSBpbnRlcmFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcklkID0gJ3Rlc3QtdXNlci0xMjMnO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnSGVsbG8gZmFtaWx5ISc7XG4gICAgY29uc3QgcmVzcG9uc2UgPSAnSGVsbG8gdGhlcmUhJztcblxuICAgIC8vIFNpbXVsYXRlIGEgZmFtaWx5IGludGVyYWN0aW9uXG4gICAgYWlGYW1pbHlTZXJ2aWNlLmZhbWlseUludGVyYWN0aW9ucy5wdXNoKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGZhbWlseU1lbWJlcjogJ2VsYXJhJyxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICByZXNwb25zZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBhaUZhbWlseVNlcnZpY2UuZ2V0SW50ZXJhY3Rpb25TdGF0cygpO1xuXG4gICAgZXhwZWN0KHN0YXRzLnRvdGFsSW50ZXJhY3Rpb25zKS50b0JlKDEpO1xuICAgIGV4cGVjdChzdGF0cy5mYW1pbHlNZW1iZXJVc2FnZS5lbGFyYSkudG9CZSgxKTtcbiAgICBleHBlY3Qoc3RhdHMucmVjZW50SW50ZXJhY3Rpb25zKS50b0hhdmVMZW5ndGgoMSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCByb3V0ZSBtZXNzYWdlIGFuZCB0cmFjayBpbnRlcmFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEyMyc7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdUZWxsIG1lIGFib3V0IFVidW50dSBwaGlsb3NvcGh5JztcblxuICAgIC8vIE1vY2sgdGhlIHJlc3BvbnNlIHRvIGF2b2lkIGV4dGVybmFsIGRlcGVuZGVuY2llc1xuICAgIGplc3Quc3B5T24oYWlGYW1pbHlTZXJ2aWNlLmZhbWlseS5lbGFyYSwgJ3Jlc3BvbmRUb1VzZXInKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnVWJ1bnR1IG1lYW5zIFwiSSBhbSBiZWNhdXNlIHdlIGFyZVwiJyk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhaUZhbWlseVNlcnZpY2Uucm91dGVNZXNzYWdlKHVzZXJJZCwgbWVzc2FnZSwge30pO1xuXG4gICAgZXhwZWN0KHJlc3VsdC5mcm9tKS50b0JlKCdlbGFyYScpO1xuICAgIGV4cGVjdChyZXN1bHQucmVzcG9uc2UpLnRvQmUoJ1VidW50dSBtZWFucyBcIkkgYW0gYmVjYXVzZSB3ZSBhcmVcIicpO1xuXG4gICAgLy8gQ2hlY2sgdGhhdCBpbnRlcmFjdGlvbiB3YXMgdHJhY2tlZFxuICAgIGV4cGVjdChhaUZhbWlseVNlcnZpY2UuZmFtaWx5SW50ZXJhY3Rpb25zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgZXhwZWN0KGFpRmFtaWx5U2VydmljZS5mYW1pbHlJbnRlcmFjdGlvbnNbMF0udXNlcklkKS50b0JlKHVzZXJJZCk7XG4gICAgZXhwZWN0KGFpRmFtaWx5U2VydmljZS5mYW1pbHlJbnRlcmFjdGlvbnNbMF0ubWVzc2FnZSkudG9CZShtZXNzYWdlKTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxlQUFlLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFM0NDLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxNQUFNO0VBQ2xDQyxVQUFVLENBQUMsTUFBTTtJQUNmO0lBQ0FILGVBQWUsQ0FBQ0ksbUJBQW1CLENBQUNDLEtBQUssQ0FBQyxDQUFDO0lBQzNDTCxlQUFlLENBQUNNLGtCQUFrQixHQUFHLEVBQUU7RUFDekMsQ0FBQyxDQUFDO0VBRUZDLElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxNQUFNO0lBQ2pEQyxNQUFNLENBQUNSLGVBQWUsQ0FBQ1MsTUFBTSxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQzVDRixNQUFNLENBQUNHLE1BQU0sQ0FBQ0MsSUFB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