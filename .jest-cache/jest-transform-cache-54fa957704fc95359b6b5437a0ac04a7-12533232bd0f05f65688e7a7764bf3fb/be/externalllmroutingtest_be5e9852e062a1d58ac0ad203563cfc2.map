{"version":3,"names":["_getJestObj","mock","OpenAI","jest","fn","mockImplementation","chat","completions","create","mockResolvedValue","choices","message","content","usage","prompt_tokens","completion_tokens","models","list","data","id","_externalLlmService","require","_types","describe","externalLLMService","beforeEach","ExternalLLMService","provider","model","apiKey","maxTokens","temperature","topP","cacheTTL","afterEach","clearAllMocks","it","complexQuery","query","userId","context","marketSize","targetRegion","response","processQuery","expect","toBeDefined","routingTier","toBe","RoutingTier","EXTERNAL_LLM","toContain","cost","toBeGreaterThan","metadata","inputTokens","outputTokens","novelQuery","cached","creativeQuery","initialTracking","getCostTracking","initialCost","totalCost","tracking","totalRequests","response1","tracking1","cost1","response2","tracking2","cost2","queries","q","today","Date","toISOString","split","dailyCost","getCostByDate","gpt4Cost","getCostByModel","query1","query2","stats","getCacheStats","size","entries","isValid","validateApiKey","getAvailableModels","Array","isArray","length","originalConfig","getConfig","updateConfig","updatedConfig","mockClient","client","mockRejectedValue","Error","rejects","toThrow","responseTime","toBeGreaterThanOrEqual","totalTokens","toBeCloseTo","responses","push","toHaveLength","forEach","response1a","response2a","response1b","response2b","totalInputTokens","totalOutputTokens","fill","map","_","i","averageCostPerRequest","costByModel","resetCostTracking"],"sources":["external-llm-routing.test.ts"],"sourcesContent":["/**\r\n * External LLM Routing Integration Tests\r\n * Tests for Route C integration with hierarchical router\r\n */\r\n\r\nimport { ExternalLLMService } from '../../services/ai-routing/external-llm-service';\r\nimport { AIQuery, RoutingTier } from '../../services/ai-routing/types';\r\n\r\n// Mock OpenAI client\r\njest.mock('openai', () => {\r\n  return {\r\n    OpenAI: jest.fn().mockImplementation(() => ({\r\n      chat: {\r\n        completions: {\r\n          create: jest.fn().mockResolvedValue({\r\n            choices: [\r\n              {\r\n                message: {\r\n                  content: 'Complex analysis response from GPT-4'\r\n                }\r\n              }\r\n            ],\r\n            usage: {\r\n              prompt_tokens: 200,\r\n              completion_tokens: 150\r\n            }\r\n          })\r\n        }\r\n      },\r\n      models: {\r\n        list: jest.fn().mockResolvedValue({\r\n          data: [\r\n            { id: 'gpt-4' },\r\n            { id: 'gpt-3.5-turbo' }\r\n          ]\r\n        })\r\n      }\r\n    }))\r\n  };\r\n});\r\n\r\ndescribe('External LLM Routing Integration', () => {\r\n  let externalLLMService: ExternalLLMService;\r\n\r\n  beforeEach(() => {\r\n    externalLLMService = new ExternalLLMService({\r\n      provider: 'openai',\r\n      model: 'gpt-4',\r\n      apiKey: 'test-api-key',\r\n      maxTokens: 2000,\r\n      temperature: 0.7,\r\n      topP: 0.9,\r\n      cacheTTL: 3600\r\n    });\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('Route C: Complex Query Processing', () => {\r\n    it('should process complex strategic query', async () => {\r\n      const complexQuery: AIQuery = {\r\n        query: 'Develop a comprehensive strategy for scaling an education platform in emerging markets',\r\n        userId: 'user-123',\r\n        context: {\r\n          marketSize: 'large',\r\n          targetRegion: 'Africa'\r\n        }\r\n      };\r\n\r\n      const response = await externalLLMService.processQuery(complexQuery);\r\n\r\n      expect(response).toBeDefined();\r\n      expect(response.routingTier).toBe(RoutingTier.EXTERNAL_LLM);\r\n      expect(response.content).toContain('Complex analysis response');\r\n      expect(response.cost).toBeGreaterThan(0);\r\n      expect(response.metadata?.inputTokens).toBe(200);\r\n      expect(response.metadata?.outputTokens).toBe(150);\r\n    });\r\n\r\n    it('should process novel problem-solving query', async () => {\r\n      const novelQuery: AIQuery = {\r\n        query: 'How can we design an AI system that respects Ubuntu philosophy while maximizing economic efficiency?'\r\n      };\r\n\r\n      const response = await externalLLMService.processQuery(novelQuery);\r\n\r\n      expect(response).toBeDefined();\r\n      expect(response.routingTier).toBe(RoutingTier.EXTERNAL_LLM);\r\n      expect(response.content).toBeDefined();\r\n      expect(response.cached).toBe(false);\r\n    });\r\n\r\n    it('should process creative task query', async () => {\r\n      const creativeQuery: AIQuery = {\r\n        query: 'Create an innovative curriculum framework that combines technical skills with Ubuntu philosophy principles'\r\n      };\r\n\r\n      const response = await externalLLMService.processQuery(creativeQuery);\r\n\r\n      expect(response).toBeDefined();\r\n      expect(response.routingTier).toBe(RoutingTier.EXTERNAL_LLM);\r\n      expect(response.content).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('Cost Optimization', () => {\r\n    it('should track cost for complex queries', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Complex strategic analysis query'\r\n      };\r\n\r\n      const initialTracking = externalLLMService.getCostTracking();\r\n      const initialCost = initialTracking.totalCost;\r\n\r\n      await externalLLMService.processQuery(query);\r\n\r\n      const tracking = externalLLMService.getCostTracking();\r\n      expect(tracking.totalCost).toBeGreaterThan(initialCost);\r\n      expect(tracking.totalRequests).toBe(1);\r\n    });\r\n\r\n    it('should minimize cost through caching', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Expensive query that should be cached'\r\n      };\r\n\r\n      // First call - incurs cost\r\n      const response1 = await externalLLMService.processQuery(query);\r\n      const tracking1 = externalLLMService.getCostTracking();\r\n      const cost1 = tracking1.totalCost;\r\n\r\n      // Second call - uses cache, no additional cost\r\n      const response2 = await externalLLMService.processQuery(query);\r\n      const tracking2 = externalLLMService.getCostTracking();\r\n      const cost2 = tracking2.totalCost;\r\n\r\n      expect(response1.cached).toBe(false);\r\n      expect(response2.cached).toBe(true);\r\n      expect(cost2).toBe(cost1); // No additional cost\r\n    });\r\n\r\n    it('should track cost by date for billing', async () => {\r\n      const queries = [\r\n        { query: 'Query 1' },\r\n        { query: 'Query 2' },\r\n        { query: 'Query 3' }\r\n      ];\r\n\r\n      for (const q of queries) {\r\n        await externalLLMService.processQuery(q);\r\n      }\r\n\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const dailyCost = externalLLMService.getCostByDate(today);\r\n\r\n      expect(dailyCost).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should track cost by model for multi-model scenarios', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Test query'\r\n      };\r\n\r\n      await externalLLMService.processQuery(query);\r\n\r\n      const gpt4Cost = externalLLMService.getCostByModel('gpt-4');\r\n      expect(gpt4Cost).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  describe('Response Caching Strategy', () => {\r\n    it('should cache identical queries', async () => {\r\n      const query: AIQuery = {\r\n        query: 'What is the capital of France?'\r\n      };\r\n\r\n      const response1 = await externalLLMService.processQuery(query);\r\n      const response2 = await externalLLMService.processQuery(query);\r\n\r\n      expect(response1.cached).toBe(false);\r\n      expect(response2.cached).toBe(true);\r\n      expect(response1.content).toBe(response2.content);\r\n    });\r\n\r\n    it('should not cache different queries', async () => {\r\n      const query1: AIQuery = {\r\n        query: 'What is the capital of France?'\r\n      };\r\n\r\n      const query2: AIQuery = {\r\n        query: 'What is the capital of Germany?'\r\n      };\r\n\r\n      const response1 = await externalLLMService.processQuery(query1);\r\n      const response2 = await externalLLMService.processQuery(query2);\r\n\r\n      expect(response1.cached).toBe(false);\r\n      expect(response2.cached).toBe(false);\r\n    });\r\n\r\n    it('should provide cache statistics', async () => {\r\n      const queries = [\r\n        { query: 'Query 1' },\r\n        { query: 'Query 2' },\r\n        { query: 'Query 1' } // Duplicate\r\n      ];\r\n\r\n      for (const q of queries) {\r\n        await externalLLMService.processQuery(q);\r\n      }\r\n\r\n      const stats = externalLLMService.getCacheStats();\r\n      expect(stats.size).toBe(2); // Two unique queries\r\n      expect(stats.entries).toBe(2);\r\n    });\r\n  });\r\n\r\n  describe('API Management', () => {\r\n    it('should validate API key', async () => {\r\n      const isValid = await externalLLMService.validateApiKey();\r\n      expect(isValid).toBe(true);\r\n    });\r\n\r\n    it('should list available models', async () => {\r\n      const models = await externalLLMService.getAvailableModels();\r\n\r\n      expect(Array.isArray(models)).toBe(true);\r\n      expect(models.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should update configuration dynamically', () => {\r\n      const originalConfig = externalLLMService.getConfig();\r\n      expect(originalConfig.maxTokens).toBe(2000);\r\n\r\n      externalLLMService.updateConfig({\r\n        maxTokens: 4000,\r\n        temperature: 0.5\r\n      });\r\n\r\n      const updatedConfig = externalLLMService.getConfig();\r\n      expect(updatedConfig.maxTokens).toBe(4000);\r\n      expect(updatedConfig.temperature).toBe(0.5);\r\n    });\r\n  });\r\n\r\n  describe('Error Handling and Resilience', () => {\r\n    it('should handle API errors gracefully', async () => {\r\n      const mockClient = (externalLLMService as any).client;\r\n      mockClient.chat.completions.create = jest.fn().mockRejectedValue(\r\n        new Error('API Error: Rate limit exceeded')\r\n      );\r\n\r\n      const query: AIQuery = {\r\n        query: 'Test query'\r\n      };\r\n\r\n      await expect(externalLLMService.processQuery(query)).rejects.toThrow(\r\n        'External LLM processing failed'\r\n      );\r\n    });\r\n\r\n    it('should handle timeout errors', async () => {\r\n      const mockClient = (externalLLMService as any).client;\r\n      mockClient.chat.completions.create = jest.fn().mockRejectedValue(\r\n        new Error('Request timeout')\r\n      );\r\n\r\n      const query: AIQuery = {\r\n        query: 'Test query'\r\n      };\r\n\r\n      await expect(externalLLMService.processQuery(query)).rejects.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('Performance Metrics', () => {\r\n    it('should track response time', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Performance test query'\r\n      };\r\n\r\n      const response = await externalLLMService.processQuery(query);\r\n\r\n      expect(response.responseTime).toBeGreaterThanOrEqual(0);\r\n      expect(typeof response.responseTime).toBe('number');\r\n    });\r\n\r\n    it('should track token usage', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Token tracking test'\r\n      };\r\n\r\n      const response = await externalLLMService.processQuery(query);\r\n\r\n      expect(response.metadata?.inputTokens).toBe(200);\r\n      expect(response.metadata?.outputTokens).toBe(150);\r\n      expect(response.metadata?.totalTokens).toBe(350);\r\n    });\r\n\r\n    it('should calculate accurate costs', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Cost calculation test'\r\n      };\r\n\r\n      const response = await externalLLMService.processQuery(query);\r\n\r\n      // GPT-4: $0.03 per 1K input, $0.06 per 1K output\r\n      // 200 input tokens: 0.2 * 0.03 = $0.006\r\n      // 150 output tokens: 0.15 * 0.06 = $0.009\r\n      // Total: ~$0.015\r\n      expect(response.cost).toBeCloseTo(0.015, 3);\r\n    });\r\n  });\r\n\r\n  describe('Multi-Query Scenarios', () => {\r\n    it('should handle multiple sequential queries', async () => {\r\n      const queries = [\r\n        { query: 'First query' },\r\n        { query: 'Second query' },\r\n        { query: 'Third query' }\r\n      ];\r\n\r\n      const responses = [];\r\n      for (const q of queries) {\r\n        const response = await externalLLMService.processQuery(q);\r\n        responses.push(response);\r\n      }\r\n\r\n      expect(responses).toHaveLength(3);\r\n      responses.forEach(response => {\r\n        expect(response.routingTier).toBe(RoutingTier.EXTERNAL_LLM);\r\n        expect(response.content).toBeDefined();\r\n      });\r\n    });\r\n\r\n    it('should handle mixed cached and non-cached queries', async () => {\r\n      const query1 = { query: 'Unique query 1' };\r\n      const query2 = { query: 'Unique query 2' };\r\n\r\n      // First batch\r\n      const response1a = await externalLLMService.processQuery(query1);\r\n      const response2a = await externalLLMService.processQuery(query2);\r\n\r\n      // Second batch (should use cache)\r\n      const response1b = await externalLLMService.processQuery(query1);\r\n      const response2b = await externalLLMService.processQuery(query2);\r\n\r\n      expect(response1a.cached).toBe(false);\r\n      expect(response2a.cached).toBe(false);\r\n      expect(response1b.cached).toBe(true);\r\n      expect(response2b.cached).toBe(true);\r\n    });\r\n\r\n    it('should accumulate cost tracking across queries', async () => {\r\n      const queries = [\r\n        { query: 'Query 1' },\r\n        { query: 'Query 2' },\r\n        { query: 'Query 3' }\r\n      ];\r\n\r\n      for (const q of queries) {\r\n        await externalLLMService.processQuery(q);\r\n      }\r\n\r\n      const tracking = externalLLMService.getCostTracking();\r\n      expect(tracking.totalRequests).toBe(3);\r\n      expect(tracking.totalCost).toBeGreaterThan(0);\r\n      expect(tracking.totalInputTokens).toBe(600); // 200 * 3\r\n      expect(tracking.totalOutputTokens).toBe(450); // 150 * 3\r\n    });\r\n  });\r\n\r\n  describe('Cost Threshold Management', () => {\r\n    it('should track spending for budget management', async () => {\r\n      const queries = Array(5).fill(null).map((_, i) => ({\r\n        query: `Query ${i + 1}`\r\n      }));\r\n\r\n      for (const q of queries) {\r\n        await externalLLMService.processQuery(q);\r\n      }\r\n\r\n      const tracking = externalLLMService.getCostTracking();\r\n      expect(tracking.totalCost).toBeGreaterThan(0);\r\n      expect(tracking.averageCostPerRequest).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should provide cost breakdown by model', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Cost breakdown test'\r\n      };\r\n\r\n      await externalLLMService.processQuery(query);\r\n\r\n      const tracking = externalLLMService.getCostTracking();\r\n      expect(tracking.costByModel['gpt-4']).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should reset cost tracking for new billing period', async () => {\r\n      const query: AIQuery = {\r\n        query: 'Test query'\r\n      };\r\n\r\n      await externalLLMService.processQuery(query);\r\n\r\n      let tracking = externalLLMService.getCostTracking();\r\n      expect(tracking.totalCost).toBeGreaterThan(0);\r\n\r\n      externalLLMService.resetCostTracking();\r\n\r\n      tracking = externalLLMService.getCostTracking();\r\n      expect(tracking.totalCost).toBe(0);\r\n      expect(tracking.totalRequests).toBe(0);\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}