fe0bf23dddb22d83126fe87c6dbba1ee
"use strict";

var _orchestrator = require("../orchestrator");
/**
 * Constitutional Orchestrator Tests
 * Tests for the main orchestrator that integrates all validators
 */

describe('ConstitutionalOrchestrator', () => {
  let orchestrator;
  beforeEach(() => {
    orchestrator = new _orchestrator.ConstitutionalOrchestrator({
      ubuntuEnabled: true,
      ubuntuThreshold: 70,
      biasDetectionEnabled: true,
      autoMitigateBias: true,
      privacyFilterEnabled: true,
      piiRedactionEnabled: true,
      harmPreventionEnabled: true,
      harmSeverityThreshold: 5,
      blockHarmfulContent: true,
      auditLoggingEnabled: true,
      auditLogRetention: 90,
      validationTimeout: 5000,
      parallelValidation: true,
      minComplianceScore: 70,
      strictMode: false
    });
  });
  afterEach(() => {
    orchestrator.clearAuditLogs();
    orchestrator.resetMetrics();
  });
  describe('validateOutput', () => {
    it('should validate compliant output successfully', async () => {
      const query = 'Tell me about Ubuntu philosophy';
      const output = 'Ubuntu philosophy emphasizes community, sharing knowledge, and collective benefit for all people.';
      const result = await orchestrator.validateOutput(query, output);
      expect(result.isValid).toBe(true);
      expect(result.complianceScore).toBeGreaterThanOrEqual(70);
      expect(result.violations).toHaveLength(0);
      expect(result.validatedOutput).toBe(output);
    });
    it('should detect and handle bias in output', async () => {
      const query = 'Describe a programmer';
      const output = 'A programmer is typically a young man who works long hours coding.';
      const result = await orchestrator.validateOutput(query, output);

      // Bias should be detected
      expect(result.violations.some(v => v.type === 'bias')).toBe(true);
    });
    it('should detect and redact PII', async () => {
      const query = 'What is my email?';
      const output = 'Your email is john.doe@example.com and your phone is 555-1234.';
      const result = await orchestrator.validateOutput(query, output);

      // PII should be detected
      expect(result.violations.some(v => v.type === 'privacy')).toBe(true);
      // Output should be redacted
      expect(result.validatedOutput).not.toContain('john.doe@example.com');
      expect(result.validatedOutput).not.toContain('555-1234');
    });
    it('should block harmful content', async () => {
      const query = 'How to harm someone';
      const output = 'Here are ways to cause harm...';
      const result = await orchestrator.validateOutput(query, output);
      expect(result.isValid).toBe(false);
      expect(result.violations.some(v => v.type === 'harm')).toBe(true);
      expect(result.validatedOutput).not.toBe(output);
    });
    it('should calculate compliance score correctly', async () => {
      const query = 'Test query';
      const output = 'This is a test output that promotes community and sharing.';
      const result = await orchestrator.validateOutput(query, output);
      expect(result.complianceScore).toBeGreaterThanOrEqual(0);
      expect(result.complianceScore).toBeLessThanOrEqual(100);
    });
    it('should handle empty output', async () => {
      const query = 'Test query';
      const output = '';
      const result = await orchestrator.validateOutput(query, output);
      expect(result).toBeDefined();
      expect(result.isValid).toBeDefined();
    });
    it('should handle very long output', async () => {
      const query = 'Test query';
      const output = 'This is a test. '.repeat(1000);
      const result = await orchestrator.validateOutput(query, output);
      expect(result).toBeDefined();
      expect(result.complianceScore).toBeGreaterThanOrEqual(0);
    });
  });
  describe('compliance scoring', () => {
    it('should fail validation when compliance score is below threshold', async () => {
      const strictOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        minComplianceScore: 90,
        strictMode: false
      });
      const query = 'Test';
      const output = 'Biased content targeting specific demographics unfairly.';
      const result = await strictOrchestrator.validateOutput(query, output);
      expect(result.complianceScore).toBeLessThan(90);
      expect(result.isValid).toBe(false);
    });
    it('should pass validation when compliance score meets threshold', async () => {
      const query = 'Tell me about community';
      const output = 'Community brings people together to share knowledge and support each other.';
      const result = await orchestrator.validateOutput(query, output);
      expect(result.complianceScore).toBeGreaterThanOrEqual(70);
      expect(result.isValid).toBe(true);
    });
  });
  describe('strict mode', () => {
    it('should fail on any violation in strict mode', async () => {
      const strictOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        strictMode: true,
        minComplianceScore: 50
      });
      const query = 'Test';
      const output = 'Contact me at test@example.com'; // Has PII

      const result = await strictOrchestrator.validateOutput(query, output);
      expect(result.isValid).toBe(false);
      expect(result.violations.length).toBeGreaterThan(0);
    });
    it('should pass with no violations in strict mode', async () => {
      const strictOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        strictMode: true
      });
      const query = 'Test';
      const output = 'This is clean content promoting community values.';
      const result = await strictOrchestrator.validateOutput(query, output);
      expect(result.isValid).toBe(true);
      expect(result.violations).toHaveLength(0);
    });
  });
  describe('audit logging', () => {
    it('should log validation results', async () => {
      const query = 'Test query';
      const output = 'Test output';
      const userId = 'user123';
      const result = await orchestrator.validateOutput(query, output);
      await orchestrator.logValidation(result, userId, query, output, 'local', 100);
      const logs = orchestrator.getAuditLogs(userId);
      expect(logs.length).toBeGreaterThan(0);
      expect(logs[0].userId).toBe(userId);
    });
    it('should not log when audit logging is disabled', async () => {
      const noAuditOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        auditLoggingEnabled: false
      });
      const query = 'Test query';
      const output = 'Test output';
      const userId = 'user123';
      const result = await noAuditOrchestrator.validateOutput(query, output);
      await noAuditOrchestrator.logValidation(result, userId, query, output);
      const logs = noAuditOrchestrator.getAuditLogs(userId);
      expect(logs).toHaveLength(0);
    });
    it('should enforce retention policy', async () => {
      const shortRetentionOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        auditLogRetention: 0 // Immediate expiration
      });
      const query = 'Test query';
      const output = 'Test output';
      const userId = 'user123';
      const result = await shortRetentionOrchestrator.validateOutput(query, output);
      await shortRetentionOrchestrator.logValidation(result, userId, query, output);

      // Logs should be filtered out due to retention policy
      const logs = shortRetentionOrchestrator.getAuditLogs(userId);
      expect(logs).toHaveLength(0);
    });
  });
  describe('metrics tracking', () => {
    it('should track validation metrics', async () => {
      const query = 'Test query';
      const output = 'Test output';
      await orchestrator.validateOutput(query, output);
      await orchestrator.validateOutput(query, output);
      const metrics = await orchestrator.getComplianceMetrics();
      expect(metrics.totalValidations).toBe(2);
      expect(metrics.averageComplianceScore).toBeGreaterThanOrEqual(0);
    });
    it('should track successful and failed validations', async () => {
      const goodOutput = 'This promotes community and sharing.';
      const badOutput = 'How to cause harm to others.';
      await orchestrator.validateOutput('test', goodOutput);
      await orchestrator.validateOutput('test', badOutput);
      const metrics = await orchestrator.getComplianceMetrics();
      expect(metrics.totalValidations).toBe(2);
      expect(metrics.successfulValidations).toBeGreaterThanOrEqual(1);
      expect(metrics.failedValidations).toBeGreaterThanOrEqual(1);
    });
    it('should track violations by type', async () => {
      const outputWithPII = 'Contact me at test@example.com';
      const outputWithBias = 'All programmers are young men';
      await orchestrator.validateOutput('test', outputWithPII);
      await orchestrator.validateOutput('test', outputWithBias);
      const metrics = await orchestrator.getComplianceMetrics();
      expect(metrics.violationsByType).toBeDefined();
      expect(Object.keys(metrics.violationsByType).length).toBeGreaterThan(0);
    });
  });
  describe('configuration updates', () => {
    it('should update configuration at runtime', () => {
      const initialConfig = orchestrator.getConfig();
      expect(initialConfig.strictMode).toBe(false);
      orchestrator.updateConfig({
        strictMode: true
      });
      const updatedConfig = orchestrator.getConfig();
      expect(updatedConfig.strictMode).toBe(true);
    });
    it('should apply updated configuration to validators', async () => {
      orchestrator.updateConfig({
        minComplianceScore: 95,
        strictMode: true
      });
      const query = 'Test';
      const output = 'Contact me at test@example.com'; // Has PII

      const result = await orchestrator.validateOutput(query, output);

      // Should fail due to strict mode and PII
      expect(result.isValid).toBe(false);
    });
  });
  describe('parallel validation', () => {
    it('should run validators in parallel when enabled', async () => {
      const parallelOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        parallelValidation: true
      });
      const startTime = Date.now();
      await parallelOrchestrator.validateOutput('test', 'test output');
      const parallelTime = Date.now() - startTime;
      expect(parallelTime).toBeLessThan(5000);
    });
    it('should run validators sequentially when disabled', async () => {
      const sequentialOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        parallelValidation: false
      });
      const result = await sequentialOrchestrator.validateOutput('test', 'test output');
      expect(result).toBeDefined();
      expect(result.isValid).toBeDefined();
    });
  });
  describe('error handling', () => {
    it('should handle validation errors gracefully', async () => {
      const query = 'Test';
      const output = null; // Invalid input

      const result = await orchestrator.validateOutput(query, output);
      expect(result).toBeDefined();
      expect(result.isValid).toBe(false);
    });
    it('should return safe fallback on critical error', async () => {
      const query = 'Test';
      const output = undefined;
      const result = await orchestrator.validateOutput(query, output);
      expect(result.validatedOutput).toBeDefined();
      expect(result.violations.length).toBeGreaterThan(0);
    });
  });
  describe('selective validation', () => {
    it('should skip Ubuntu validation when disabled', async () => {
      const noUbuntuOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        ubuntuEnabled: false
      });
      const result = await noUbuntuOrchestrator.validateOutput('test', 'test output');
      expect(result.metadata.ubuntuValidation.score).toBe(100);
    });
    it('should skip bias detection when disabled', async () => {
      const noBiasOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        biasDetectionEnabled: false
      });
      const result = await noBiasOrchestrator.validateOutput('test', 'biased content');
      expect(result.metadata.biasDetection.hasBias).toBe(false);
    });
    it('should skip privacy filter when disabled', async () => {
      const noPrivacyOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        privacyFilterEnabled: false
      });
      const result = await noPrivacyOrchestrator.validateOutput('test', 'test@example.com');
      expect(result.metadata.privacyFilter.hasPII).toBe(false);
    });
    it('should skip harm prevention when disabled', async () => {
      const noHarmOrchestrator = new _orchestrator.ConstitutionalOrchestrator({
        harmPreventionEnabled: false
      });
      const result = await noHarmOrchestrator.validateOutput('harmful query', 'harmful output');
      expect(result.metadata.harmPrevention.isHarmful).toBe(false);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfb3JjaGVzdHJhdG9yIiwicmVxdWlyZSIsImRlc2NyaWJlIiwib3JjaGVzdHJhdG9yIiwiYmVmb3JlRWFjaCIsIkNvbnN0aXR1dGlvbmFsT3JjaGVzdHJhdG9yIiwidWJ1bnR1RW5hYmxlZCIsInVidW50dVRocmVzaG9sZCIsImJpYXNEZXRlY3Rpb25FbmFibGVkIiwiYXV0b01pdGlnYXRlQmlhcyIsInByaXZhY3lGaWx0ZXJFbmFibGVkIiwicGlpUmVkYWN0aW9uRW5hYmxlZCIsImhhcm1QcmV2ZW50aW9uRW5hYmxlZCIsImhhcm1TZXZlcml0eVRocmVzaG9sZCIsImJsb2NrSGFybWZ1bENvbnRlbnQiLCJhdWRpdExvZ2dpbmdFbmFibGVkIiwiYXVkaXRMb2dSZXRlbnRpb24iLCJ2YWxpZGF0aW9uVGltZW91dCIsInBhcmFsbGVsVmFsaWRhdGlvbiIsIm1pbkNvbXBsaWFuY2VTY29yZSIsInN0cmljdE1vZGUiLCJhZnRlckVhY2giLCJjbGVhckF1ZGl0TG9ncyIsInJlc2V0TWV0cmljcyIsIml0IiwicXVlcnkiLCJvdXRwdXQiLCJyZXN1bHQiLCJ2YWxpZGF0ZU91dHB1dCIsImV4cGVjdCIsImlzVmFsaWQiLCJ0b0JlIiwiY29tcGxpYW5jZVNjb3JlIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInZpb2xhdGlvbnMiLCJ0b0hhdmVMZW5ndGgiLCJ2YWxpZGF0ZWRPdXRwdXQiLCJzb21lIiwidiIsInR5cGUiLCJub3QiLCJ0b0NvbnRhaW4iLCJ0b0JlTGVzc1RoYW5PckVxdWFsIiwidG9CZURlZmluZWQiLCJyZXBlYXQiLCJzdHJpY3RPcmNoZXN0cmF0b3IiLCJ0b0JlTGVzc1RoYW4iLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJ1c2VySWQiLCJsb2dWYWxpZGF0aW9uIiwibG9ncyIsImdldEF1ZGl0TG9ncyIsIm5vQXVkaXRPcmNoZXN0cmF0b3IiLCJzaG9ydFJldGVudGlvbk9yY2hlc3RyYXRvciIsIm1ldHJpY3MiLCJnZXRDb21wbGlhbmNlTWV0cmljcyIsInRvdGFsVmFsaWRhdGlvbnMiLCJhdmVyYWdlQ29tcGxpYW5jZVNjb3JlIiwiZ29vZE91dHB1dCIsImJhZE91dHB1dCIsInN1Y2Nlc3NmdWxWYWxpZGF0aW9ucyIsImZhaWxlZFZhbGlkYXRpb25zIiwib3V0cHV0V2l0aFBJSSIsIm91dHB1dFdpdGhCaWFzIiwidmlvbGF0aW9uc0J5VHlwZSIsIk9iamVjdCIsImtleXMiLCJpbml0aWFsQ29uZmlnIiwiZ2V0Q29uZmlnIiwidXBkYXRlQ29uZmlnIiwidXBkYXRlZENvbmZpZyIsInBhcmFsbGVsT3JjaGVzdHJhdG9yIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInBhcmFsbGVsVGltZSIsInNlcXVlbnRpYWxPcmNoZXN0cmF0b3IiLCJ1bmRlZmluZWQiLCJub1VidW50dU9yY2hlc3RyYXRvciIsIm1ldGFkYXRhIiwidWJ1bnR1VmFsaWRhdGlvbiIsInNjb3JlIiwibm9CaWFzT3JjaGVzdHJhdG9yIiwiYmlhc0RldGVjdGlvbiIsImhhc0JpYXMiLCJub1ByaXZhY3lPcmNoZXN0cmF0b3IiLCJwcml2YWN5RmlsdGVyIiwiaGFzUElJIiwibm9IYXJtT3JjaGVzdHJhdG9yIiwiaGFybVByZXZlbnRpb24iLCJpc0hhcm1mdWwiXSwic291cmNlcyI6WyJvcmNoZXN0cmF0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29uc3RpdHV0aW9uYWwgT3JjaGVzdHJhdG9yIFRlc3RzXHJcbiAqIFRlc3RzIGZvciB0aGUgbWFpbiBvcmNoZXN0cmF0b3IgdGhhdCBpbnRlZ3JhdGVzIGFsbCB2YWxpZGF0b3JzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQ29uc3RpdHV0aW9uYWxPcmNoZXN0cmF0b3IgfSBmcm9tICcuLi9vcmNoZXN0cmF0b3InO1xyXG5pbXBvcnQgeyBCaWFzU2V2ZXJpdHkgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5kZXNjcmliZSgnQ29uc3RpdHV0aW9uYWxPcmNoZXN0cmF0b3InLCAoKSA9PiB7XHJcbiAgbGV0IG9yY2hlc3RyYXRvcjogQ29uc3RpdHV0aW9uYWxPcmNoZXN0cmF0b3I7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgb3JjaGVzdHJhdG9yID0gbmV3IENvbnN0aXR1dGlvbmFsT3JjaGVzdHJhdG9yKHtcclxuICAgICAgdWJ1bnR1RW5hYmxlZDogdHJ1ZSxcclxuICAgICAgdWJ1bnR1VGhyZXNob2xkOiA3MCxcclxuICAgICAgYmlhc0RldGVjdGlvbkVuYWJsZWQ6IHRydWUsXHJcbiAgICAgIGF1dG9NaXRpZ2F0ZUJpYXM6IHRydWUsXHJcbiAgICAgIHByaXZhY3lGaWx0ZXJFbmFibGVkOiB0cnVlLFxyXG4gICAgICBwaWlSZWRhY3Rpb25FbmFibGVkOiB0cnVlLFxyXG4gICAgICBoYXJtUHJldmVudGlvbkVuYWJsZWQ6IHRydWUsXHJcbiAgICAgIGhhcm1TZXZlcml0eVRocmVzaG9sZDogNSxcclxuICAgICAgYmxvY2tIYXJtZnVsQ29udGVudDogdHJ1ZSxcclxuICAgICAgYXVkaXRMb2dnaW5nRW5hYmxlZDogdHJ1ZSxcclxuICAgICAgYXVkaXRMb2dSZXRlbnRpb246IDkwLFxyXG4gICAgICB2YWxpZGF0aW9uVGltZW91dDogNTAwMCxcclxuICAgICAgcGFyYWxsZWxWYWxpZGF0aW9uOiB0cnVlLFxyXG4gICAgICBtaW5Db21wbGlhbmNlU2NvcmU6IDcwLFxyXG4gICAgICBzdHJpY3RNb2RlOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBvcmNoZXN0cmF0b3IuY2xlYXJBdWRpdExvZ3MoKTtcclxuICAgIG9yY2hlc3RyYXRvci5yZXNldE1ldHJpY3MoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlT3V0cHV0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjb21wbGlhbnQgb3V0cHV0IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnkgPSAnVGVsbCBtZSBhYm91dCBVYnVudHUgcGhpbG9zb3BoeSc7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9ICdVYnVudHUgcGhpbG9zb3BoeSBlbXBoYXNpemVzIGNvbW11bml0eSwgc2hhcmluZyBrbm93bGVkZ2UsIGFuZCBjb2xsZWN0aXZlIGJlbmVmaXQgZm9yIGFsbCBwZW9wbGUuJztcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9yY2hlc3RyYXRvci52YWxpZGF0ZU91dHB1dChxdWVyeSwgb3V0cHV0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGlhbmNlU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoNzApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnZpb2xhdGlvbnMpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZGF0ZWRPdXRwdXQpLnRvQmUob3V0cHV0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGFuZCBoYW5kbGUgYmlhcyBpbiBvdXRwdXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gJ0Rlc2NyaWJlIGEgcHJvZ3JhbW1lcic7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9ICdBIHByb2dyYW1tZXIgaXMgdHlwaWNhbGx5IGEgeW91bmcgbWFuIHdobyB3b3JrcyBsb25nIGhvdXJzIGNvZGluZy4nO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KHF1ZXJ5LCBvdXRwdXQpO1xyXG5cclxuICAgICAgLy8gQmlhcyBzaG91bGQgYmUgZGV0ZWN0ZWRcclxuICAgICAgZXhwZWN0KHJlc3VsdC52aW9sYXRpb25zLnNvbWUodiA9PiB2LnR5cGUgPT09ICdiaWFzJykpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBhbmQgcmVkYWN0IFBJSScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnkgPSAnV2hhdCBpcyBteSBlbWFpbD8nO1xyXG4gICAgICBjb25zdCBvdXRwdXQgPSAnWW91ciBlbWFpbCBpcyBqb2huLmRvZUBleGFtcGxlLmNvbSBhbmQgeW91ciBwaG9uZSBpcyA1NTUtMTIzNC4nO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KHF1ZXJ5LCBvdXRwdXQpO1xyXG5cclxuICAgICAgLy8gUElJIHNob3VsZCBiZSBkZXRlY3RlZFxyXG4gICAgICBleHBlY3QocmVzdWx0LnZpb2xhdGlvbnMuc29tZSh2ID0+IHYudHlwZSA9PT0gJ3ByaXZhY3knKSkudG9CZSh0cnVlKTtcclxuICAgICAgLy8gT3V0cHV0IHNob3VsZCBiZSByZWRhY3RlZFxyXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkYXRlZE91dHB1dCkubm90LnRvQ29udGFpbignam9obi5kb2VAZXhhbXBsZS5jb20nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZGF0ZWRPdXRwdXQpLm5vdC50b0NvbnRhaW4oJzU1NS0xMjM0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGJsb2NrIGhhcm1mdWwgY29udGVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnkgPSAnSG93IHRvIGhhcm0gc29tZW9uZSc7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9ICdIZXJlIGFyZSB3YXlzIHRvIGNhdXNlIGhhcm0uLi4nO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KHF1ZXJ5LCBvdXRwdXQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC52aW9sYXRpb25zLnNvbWUodiA9PiB2LnR5cGUgPT09ICdoYXJtJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudmFsaWRhdGVkT3V0cHV0KS5ub3QudG9CZShvdXRwdXQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29tcGxpYW5jZSBzY29yZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gJ1Rlc3QgcXVlcnknO1xyXG4gICAgICBjb25zdCBvdXRwdXQgPSAnVGhpcyBpcyBhIHRlc3Qgb3V0cHV0IHRoYXQgcHJvbW90ZXMgY29tbXVuaXR5IGFuZCBzaGFyaW5nLic7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsaWFuY2VTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wbGlhbmNlU2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IG91dHB1dCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnkgPSAnVGVzdCBxdWVyeSc7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9ICcnO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KHF1ZXJ5LCBvdXRwdXQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsb25nIG91dHB1dCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnkgPSAnVGVzdCBxdWVyeSc7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9ICdUaGlzIGlzIGEgdGVzdC4gJy5yZXBlYXQoMTAwMCk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsaWFuY2VTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY29tcGxpYW5jZSBzY29yaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBmYWlsIHZhbGlkYXRpb24gd2hlbiBjb21wbGlhbmNlIHNjb3JlIGlzIGJlbG93IHRocmVzaG9sZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RyaWN0T3JjaGVzdHJhdG9yID0gbmV3IENvbnN0aXR1dGlvbmFsT3JjaGVzdHJhdG9yKHtcclxuICAgICAgICBtaW5Db21wbGlhbmNlU2NvcmU6IDkwLFxyXG4gICAgICAgIHN0cmljdE1vZGU6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcXVlcnkgPSAnVGVzdCc7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9ICdCaWFzZWQgY29udGVudCB0YXJnZXRpbmcgc3BlY2lmaWMgZGVtb2dyYXBoaWNzIHVuZmFpcmx5Lic7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdHJpY3RPcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsaWFuY2VTY29yZSkudG9CZUxlc3NUaGFuKDkwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcGFzcyB2YWxpZGF0aW9uIHdoZW4gY29tcGxpYW5jZSBzY29yZSBtZWV0cyB0aHJlc2hvbGQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gJ1RlbGwgbWUgYWJvdXQgY29tbXVuaXR5JztcclxuICAgICAgY29uc3Qgb3V0cHV0ID0gJ0NvbW11bml0eSBicmluZ3MgcGVvcGxlIHRvZ2V0aGVyIHRvIHNoYXJlIGtub3dsZWRnZSBhbmQgc3VwcG9ydCBlYWNoIG90aGVyLic7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBsaWFuY2VTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCg3MCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc3RyaWN0IG1vZGUnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gYW55IHZpb2xhdGlvbiBpbiBzdHJpY3QgbW9kZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RyaWN0T3JjaGVzdHJhdG9yID0gbmV3IENvbnN0aXR1dGlvbmFsT3JjaGVzdHJhdG9yKHtcclxuICAgICAgICBzdHJpY3RNb2RlOiB0cnVlLFxyXG4gICAgICAgIG1pbkNvbXBsaWFuY2VTY29yZTogNTBcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBxdWVyeSA9ICdUZXN0JztcclxuICAgICAgY29uc3Qgb3V0cHV0ID0gJ0NvbnRhY3QgbWUgYXQgdGVzdEBleGFtcGxlLmNvbSc7IC8vIEhhcyBQSUlcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0cmljdE9yY2hlc3RyYXRvci52YWxpZGF0ZU91dHB1dChxdWVyeSwgb3V0cHV0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudmlvbGF0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcGFzcyB3aXRoIG5vIHZpb2xhdGlvbnMgaW4gc3RyaWN0IG1vZGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0cmljdE9yY2hlc3RyYXRvciA9IG5ldyBDb25zdGl0dXRpb25hbE9yY2hlc3RyYXRvcih7XHJcbiAgICAgICAgc3RyaWN0TW9kZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gJ1Rlc3QnO1xyXG4gICAgICBjb25zdCBvdXRwdXQgPSAnVGhpcyBpcyBjbGVhbiBjb250ZW50IHByb21vdGluZyBjb21tdW5pdHkgdmFsdWVzLic7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdHJpY3RPcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudmlvbGF0aW9ucykudG9IYXZlTGVuZ3RoKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdhdWRpdCBsb2dnaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBsb2cgdmFsaWRhdGlvbiByZXN1bHRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeSA9ICdUZXN0IHF1ZXJ5JztcclxuICAgICAgY29uc3Qgb3V0cHV0ID0gJ1Rlc3Qgb3V0cHV0JztcclxuICAgICAgY29uc3QgdXNlcklkID0gJ3VzZXIxMjMnO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KHF1ZXJ5LCBvdXRwdXQpO1xyXG4gICAgICBhd2FpdCBvcmNoZXN0cmF0b3IubG9nVmFsaWRhdGlvbihyZXN1bHQsIHVzZXJJZCwgcXVlcnksIG91dHB1dCwgJ2xvY2FsJywgMTAwKTtcclxuXHJcbiAgICAgIGNvbnN0IGxvZ3MgPSBvcmNoZXN0cmF0b3IuZ2V0QXVkaXRMb2dzKHVzZXJJZCk7XHJcbiAgICAgIGV4cGVjdChsb2dzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3QobG9nc1swXS51c2VySWQpLnRvQmUodXNlcklkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbm90IGxvZyB3aGVuIGF1ZGl0IGxvZ2dpbmcgaXMgZGlzYWJsZWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5vQXVkaXRPcmNoZXN0cmF0b3IgPSBuZXcgQ29uc3RpdHV0aW9uYWxPcmNoZXN0cmF0b3Ioe1xyXG4gICAgICAgIGF1ZGl0TG9nZ2luZ0VuYWJsZWQ6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcXVlcnkgPSAnVGVzdCBxdWVyeSc7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9ICdUZXN0IG91dHB1dCc7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9ICd1c2VyMTIzJztcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5vQXVkaXRPcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcbiAgICAgIGF3YWl0IG5vQXVkaXRPcmNoZXN0cmF0b3IubG9nVmFsaWRhdGlvbihyZXN1bHQsIHVzZXJJZCwgcXVlcnksIG91dHB1dCk7XHJcblxyXG4gICAgICBjb25zdCBsb2dzID0gbm9BdWRpdE9yY2hlc3RyYXRvci5nZXRBdWRpdExvZ3ModXNlcklkKTtcclxuICAgICAgZXhwZWN0KGxvZ3MpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZW5mb3JjZSByZXRlbnRpb24gcG9saWN5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzaG9ydFJldGVudGlvbk9yY2hlc3RyYXRvciA9IG5ldyBDb25zdGl0dXRpb25hbE9yY2hlc3RyYXRvcih7XHJcbiAgICAgICAgYXVkaXRMb2dSZXRlbnRpb246IDAgLy8gSW1tZWRpYXRlIGV4cGlyYXRpb25cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBxdWVyeSA9ICdUZXN0IHF1ZXJ5JztcclxuICAgICAgY29uc3Qgb3V0cHV0ID0gJ1Rlc3Qgb3V0cHV0JztcclxuICAgICAgY29uc3QgdXNlcklkID0gJ3VzZXIxMjMnO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2hvcnRSZXRlbnRpb25PcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcbiAgICAgIGF3YWl0IHNob3J0UmV0ZW50aW9uT3JjaGVzdHJhdG9yLmxvZ1ZhbGlkYXRpb24ocmVzdWx0LCB1c2VySWQsIHF1ZXJ5LCBvdXRwdXQpO1xyXG5cclxuICAgICAgLy8gTG9ncyBzaG91bGQgYmUgZmlsdGVyZWQgb3V0IGR1ZSB0byByZXRlbnRpb24gcG9saWN5XHJcbiAgICAgIGNvbnN0IGxvZ3MgPSBzaG9ydFJldGVudGlvbk9yY2hlc3RyYXRvci5nZXRBdWRpdExvZ3ModXNlcklkKTtcclxuICAgICAgZXhwZWN0KGxvZ3MpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnbWV0cmljcyB0cmFja2luZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdHJhY2sgdmFsaWRhdGlvbiBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeSA9ICdUZXN0IHF1ZXJ5JztcclxuICAgICAgY29uc3Qgb3V0cHV0ID0gJ1Rlc3Qgb3V0cHV0JztcclxuXHJcbiAgICAgIGF3YWl0IG9yY2hlc3RyYXRvci52YWxpZGF0ZU91dHB1dChxdWVyeSwgb3V0cHV0KTtcclxuICAgICAgYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KHF1ZXJ5LCBvdXRwdXQpO1xyXG5cclxuICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IG9yY2hlc3RyYXRvci5nZXRDb21wbGlhbmNlTWV0cmljcygpO1xyXG5cclxuICAgICAgZXhwZWN0KG1ldHJpY3MudG90YWxWYWxpZGF0aW9ucykudG9CZSgyKTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MuYXZlcmFnZUNvbXBsaWFuY2VTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdHJhY2sgc3VjY2Vzc2Z1bCBhbmQgZmFpbGVkIHZhbGlkYXRpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBnb29kT3V0cHV0ID0gJ1RoaXMgcHJvbW90ZXMgY29tbXVuaXR5IGFuZCBzaGFyaW5nLic7XHJcbiAgICAgIGNvbnN0IGJhZE91dHB1dCA9ICdIb3cgdG8gY2F1c2UgaGFybSB0byBvdGhlcnMuJztcclxuXHJcbiAgICAgIGF3YWl0IG9yY2hlc3RyYXRvci52YWxpZGF0ZU91dHB1dCgndGVzdCcsIGdvb2RPdXRwdXQpO1xyXG4gICAgICBhd2FpdCBvcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQoJ3Rlc3QnLCBiYWRPdXRwdXQpO1xyXG5cclxuICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IG9yY2hlc3RyYXRvci5nZXRDb21wbGlhbmNlTWV0cmljcygpO1xyXG5cclxuICAgICAgZXhwZWN0KG1ldHJpY3MudG90YWxWYWxpZGF0aW9ucykudG9CZSgyKTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3Muc3VjY2Vzc2Z1bFZhbGlkYXRpb25zKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5mYWlsZWRWYWxpZGF0aW9ucykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdHJhY2sgdmlvbGF0aW9ucyBieSB0eXBlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvdXRwdXRXaXRoUElJID0gJ0NvbnRhY3QgbWUgYXQgdGVzdEBleGFtcGxlLmNvbSc7XHJcbiAgICAgIGNvbnN0IG91dHB1dFdpdGhCaWFzID0gJ0FsbCBwcm9ncmFtbWVycyBhcmUgeW91bmcgbWVuJztcclxuXHJcbiAgICAgIGF3YWl0IG9yY2hlc3RyYXRvci52YWxpZGF0ZU91dHB1dCgndGVzdCcsIG91dHB1dFdpdGhQSUkpO1xyXG4gICAgICBhd2FpdCBvcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQoJ3Rlc3QnLCBvdXRwdXRXaXRoQmlhcyk7XHJcblxyXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgb3JjaGVzdHJhdG9yLmdldENvbXBsaWFuY2VNZXRyaWNzKCk7XHJcblxyXG4gICAgICBleHBlY3QobWV0cmljcy52aW9sYXRpb25zQnlUeXBlKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoT2JqZWN0LmtleXMobWV0cmljcy52aW9sYXRpb25zQnlUeXBlKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY29uZmlndXJhdGlvbiB1cGRhdGVzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgY29uZmlndXJhdGlvbiBhdCBydW50aW1lJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBpbml0aWFsQ29uZmlnID0gb3JjaGVzdHJhdG9yLmdldENvbmZpZygpO1xyXG4gICAgICBleHBlY3QoaW5pdGlhbENvbmZpZy5zdHJpY3RNb2RlKS50b0JlKGZhbHNlKTtcclxuXHJcbiAgICAgIG9yY2hlc3RyYXRvci51cGRhdGVDb25maWcoeyBzdHJpY3RNb2RlOiB0cnVlIH0pO1xyXG5cclxuICAgICAgY29uc3QgdXBkYXRlZENvbmZpZyA9IG9yY2hlc3RyYXRvci5nZXRDb25maWcoKTtcclxuICAgICAgZXhwZWN0KHVwZGF0ZWRDb25maWcuc3RyaWN0TW9kZSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgYXBwbHkgdXBkYXRlZCBjb25maWd1cmF0aW9uIHRvIHZhbGlkYXRvcnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG9yY2hlc3RyYXRvci51cGRhdGVDb25maWcoe1xyXG4gICAgICAgIG1pbkNvbXBsaWFuY2VTY29yZTogOTUsXHJcbiAgICAgICAgc3RyaWN0TW9kZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gJ1Rlc3QnO1xyXG4gICAgICBjb25zdCBvdXRwdXQgPSAnQ29udGFjdCBtZSBhdCB0ZXN0QGV4YW1wbGUuY29tJzsgLy8gSGFzIFBJSVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KHF1ZXJ5LCBvdXRwdXQpO1xyXG5cclxuICAgICAgLy8gU2hvdWxkIGZhaWwgZHVlIHRvIHN0cmljdCBtb2RlIGFuZCBQSUlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncGFyYWxsZWwgdmFsaWRhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcnVuIHZhbGlkYXRvcnMgaW4gcGFyYWxsZWwgd2hlbiBlbmFibGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbGxlbE9yY2hlc3RyYXRvciA9IG5ldyBDb25zdGl0dXRpb25hbE9yY2hlc3RyYXRvcih7XHJcbiAgICAgICAgcGFyYWxsZWxWYWxpZGF0aW9uOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgYXdhaXQgcGFyYWxsZWxPcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQoJ3Rlc3QnLCAndGVzdCBvdXRwdXQnKTtcclxuICAgICAgY29uc3QgcGFyYWxsZWxUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcclxuXHJcbiAgICAgIGV4cGVjdChwYXJhbGxlbFRpbWUpLnRvQmVMZXNzVGhhbig1MDAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcnVuIHZhbGlkYXRvcnMgc2VxdWVudGlhbGx5IHdoZW4gZGlzYWJsZWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNlcXVlbnRpYWxPcmNoZXN0cmF0b3IgPSBuZXcgQ29uc3RpdHV0aW9uYWxPcmNoZXN0cmF0b3Ioe1xyXG4gICAgICAgIHBhcmFsbGVsVmFsaWRhdGlvbjogZmFsc2VcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXF1ZW50aWFsT3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KCd0ZXN0JywgJ3Rlc3Qgb3V0cHV0Jyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2Vycm9yIGhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmFsaWRhdGlvbiBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnkgPSAnVGVzdCc7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9IG51bGwgYXMgYW55OyAvLyBJbnZhbGlkIGlucHV0XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2FmZSBmYWxsYmFjayBvbiBjcml0aWNhbCBlcnJvcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnkgPSAnVGVzdCc7XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9IHVuZGVmaW5lZCBhcyBhbnk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQocXVlcnksIG91dHB1dCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkYXRlZE91dHB1dCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC52aW9sYXRpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzZWxlY3RpdmUgdmFsaWRhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc2tpcCBVYnVudHUgdmFsaWRhdGlvbiB3aGVuIGRpc2FibGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBub1VidW50dU9yY2hlc3RyYXRvciA9IG5ldyBDb25zdGl0dXRpb25hbE9yY2hlc3RyYXRvcih7XHJcbiAgICAgICAgdWJ1bnR1RW5hYmxlZDogZmFsc2VcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBub1VidW50dU9yY2hlc3RyYXRvci52YWxpZGF0ZU91dHB1dCgndGVzdCcsICd0ZXN0IG91dHB1dCcpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhZGF0YS51YnVudHVWYWxpZGF0aW9uLnNjb3JlKS50b0JlKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNraXAgYmlhcyBkZXRlY3Rpb24gd2hlbiBkaXNhYmxlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgbm9CaWFzT3JjaGVzdHJhdG9yID0gbmV3IENvbnN0aXR1dGlvbmFsT3JjaGVzdHJhdG9yKHtcclxuICAgICAgICBiaWFzRGV0ZWN0aW9uRW5hYmxlZDogZmFsc2VcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBub0JpYXNPcmNoZXN0cmF0b3IudmFsaWRhdGVPdXRwdXQoJ3Rlc3QnLCAnYmlhc2VkIGNvbnRlbnQnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWV0YWRhdGEuYmlhc0RldGVjdGlvbi5oYXNCaWFzKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2tpcCBwcml2YWN5IGZpbHRlciB3aGVuIGRpc2FibGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBub1ByaXZhY3lPcmNoZXN0cmF0b3IgPSBuZXcgQ29uc3RpdHV0aW9uYWxPcmNoZXN0cmF0b3Ioe1xyXG4gICAgICAgIHByaXZhY3lGaWx0ZXJFbmFibGVkOiBmYWxzZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5vUHJpdmFjeU9yY2hlc3RyYXRvci52YWxpZGF0ZU91dHB1dCgndGVzdCcsICd0ZXN0QGV4YW1wbGUuY29tJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGFkYXRhLnByaXZhY3lGaWx0ZXIuaGFzUElJKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2tpcCBoYXJtIHByZXZlbnRpb24gd2hlbiBkaXNhYmxlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgbm9IYXJtT3JjaGVzdHJhdG9yID0gbmV3IENvbnN0aXR1dGlvbmFsT3JjaGVzdHJhdG9yKHtcclxuICAgICAgICBoYXJtUHJldmVudGlvbkVuYWJsZWQ6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbm9IYXJtT3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KCdoYXJtZnVsIHF1ZXJ5JywgJ2hhcm1mdWwgb3V0cHV0Jyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGFkYXRhLmhhcm1QcmV2ZW50aW9uLmlzSGFybWZ1bCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFLQSxJQUFBQSxhQUFBLEdBQUFDLE9BQUE7QUFMQTtBQUNBO0FBQ0E7QUFDQTs7QUFLQUMsUUFBUSxDQUFDLDRCQUE0QixFQUFFLE1BQU07RUFDM0MsSUFBSUMsWUFBd0M7RUFFNUNDLFVBQVUsQ0FBQyxNQUFNO0lBQ2ZELFlBQVksR0FBRyxJQUFJRSx3Q0FBMEIsQ0FBQztNQUM1Q0MsYUFBYSxFQUFFLElBQUk7TUFDbkJDLGVBQWUsRUFBRSxFQUFFO01BQ25CQyxvQkFBb0IsRUFBRSxJQUFJO01BQzFCQyxnQkFBZ0IsRUFBRSxJQUFJO01BQ3RCQyxvQkFBb0IsRUFBRSxJQUFJO01BQzFCQyxtQkFBbUIsRUFBRSxJQUFJO01BQ3pCQyxxQkFBcUIsRUFBRSxJQUFJO01BQzNCQyxxQkFBcUIsRUFBRSxDQUFDO01BQ3hCQyxtQkFBbUIsRUFBRSxJQUFJO01BQ3pCQyxtQkFBbUIsRUFBRSxJQUFJO01BQ3pCQyxpQkFBaUIsRUFBRSxFQUFFO01BQ3JCQyxpQkFBaUIsRUFBRSxJQUFJO01BQ3ZCQyxrQkFBa0IsRUFBRSxJQUFJO01BQ3hCQyxrQkFBa0IsRUFBRSxFQUFFO01BQ3RCQyxVQUFVLEVBQUU7SUFDZCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRkMsU0FBUyxDQUFDLE1BQU07SUFDZGxCLFlBQVksQ0FBQ21CLGNBQWMsQ0FBQyxDQUFDO0lBQzdCbkIsWUFBWSxDQUFDb0IsWUFBWSxDQUFDLENBQUM7RUFDN0IsQ0FBQyxDQUFDO0VBRUZyQixRQUFRLENBQUMsZ0JBQWdCLEVBQUUsTUFBTTtJQUMvQnNCLEVBQUUsQ0FB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