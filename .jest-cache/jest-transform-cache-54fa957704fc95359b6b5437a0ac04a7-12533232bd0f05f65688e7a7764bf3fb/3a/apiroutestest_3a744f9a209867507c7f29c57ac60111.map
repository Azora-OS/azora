{"version":3,"names":["request","require","app","describe","test","response","get","expect","status","toBe","body","message","endpoints","toBeDefined","service","post","send","userId","error","personality","from","toContain","query","greeting","topic","insights","coordinatedResponse","elara","themba","totalInteractions","familyMemberUsage","recentInteractions"],"sources":["api-routes.test.js"],"sourcesContent":["const request = require('supertest');\nconst app = require('../server');\n\ndescribe('AI Family Service API Routes', () => {\n  describe('GET /', () => {\n    test('should return API documentation', async () => {\n      const response = await request(app).get('/');\n\n      expect(response.status).toBe(200);\n      expect(response.body.message).toBe('Welcome to the Azora AI Family Service API');\n      expect(response.body.endpoints).toBeDefined();\n    });\n  });\n\n  describe('GET /api/health', () => {\n    test('should return health status', async () => {\n      const response = await request(app).get('/api/health');\n\n      expect(response.status).toBe(200);\n      expect(response.body.status).toBe('OK');\n      expect(response.body.service).toBe('AI Family Service');\n    });\n  });\n\n  describe('POST /api/chat/chat', () => {\n    test('should return 400 if message is missing', async () => {\n      const response = await request(app)\n        .post('/api/chat/chat')\n        .send({ userId: 'test-user' });\n\n      expect(response.status).toBe(400);\n      expect(response.body.error).toBe('Message is required');\n    });\n\n    test('should return response from specified personality', async () => {\n      const response = await request(app)\n        .post('/api/chat/chat')\n        .send({\n          userId: 'test-user',\n          personality: 'themba',\n          message: 'Hi Themba!'\n        });\n\n      expect(response.status).toBe(200);\n      expect(response.body.from).toBe('themba');\n      expect(response.body.response).toBeDefined();\n    });\n  });\n\n  describe('POST /api/chat/auto-chat', () => {\n    test('should return 400 if message is missing', async () => {\n      const response = await request(app)\n        .post('/api/chat/auto-chat')\n        .send({ userId: 'test-user' });\n\n      expect(response.status).toBe(400);\n      expect(response.body.error).toBe('Message is required');\n    });\n\n    test('should automatically route to appropriate personality', async () => {\n      const response = await request(app)\n        .post('/api/chat/auto-chat')\n        .send({\n          userId: 'test-user',\n          message: 'I need help with my finances'\n        });\n\n      expect(response.status).toBe(200);\n      // Should route to Kofi for finance-related queries\n      expect(['kofi', 'elara']).toContain(response.body.from);\n      expect(response.body.response).toBeDefined();\n    });\n  });\n\n  describe('GET /api/chat/greeting', () => {\n    test('should return personalized greeting', async () => {\n      const response = await request(app)\n        .get('/api/chat/greeting')\n        .query({ userId: 'test-user', personality: 'elara' });\n\n      expect(response.status).toBe(200);\n      expect(response.body.greeting).toBeDefined();\n      expect(response.body.greeting).toContain('Elara');\n    });\n  });\n\n  describe('POST /api/chat/consult-family', () => {\n    test('should return 400 if topic is missing', async () => {\n      const response = await request(app)\n        .post('/api/chat/consult-family')\n        .send({ userId: 'test-user' });\n\n      expect(response.status).toBe(400);\n      expect(response.body.error).toBe('Topic is required');\n    });\n\n    test('should return family consultation', async () => {\n      const response = await request(app)\n        .post('/api/chat/consult-family')\n        .send({\n          userId: 'test-user',\n          topic: 'career advice'\n        });\n\n      expect(response.status).toBe(200);\n      expect(response.body.topic).toBe('career advice');\n      expect(response.body.insights).toBeDefined();\n      expect(response.body.coordinatedResponse).toBeDefined();\n    });\n  });\n\n  describe('GET /api/chat/family-config', () => {\n    test('should return family configuration', async () => {\n      const response = await request(app).get('/api/chat/family-config');\n\n      expect(response.status).toBe(200);\n      expect(response.body.elara).toBeDefined();\n      expect(response.body.themba).toBeDefined();\n    });\n  });\n\n  describe('GET /api/chat/interaction-stats', () => {\n    test('should return interaction statistics', async () => {\n      const response = await request(app).get('/api/chat/interaction-stats');\n\n      expect(response.status).toBe(200);\n      expect(response.body.totalInteractions).toBeDefined();\n      expect(response.body.familyMemberUsage).toBeDefined();\n      expect(response.body.recentInteractions).toBeDefined();\n    });\n  });\n\n  describe('404 Handler', () => {\n    test('should return 404 for unknown endpoints', async () => {\n      const response = await request(app).get('/api/unknown-endpoint');\n\n      expect(response.status).toBe(404);\n      expect(response.body.error).toBe('Endpoint not found');\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}