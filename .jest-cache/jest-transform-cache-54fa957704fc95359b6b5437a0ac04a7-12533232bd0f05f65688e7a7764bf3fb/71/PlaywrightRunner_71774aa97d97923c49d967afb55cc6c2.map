{"version":3,"names":["_child_process","require","_util","path","_interopRequireWildcard","fs","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","execAsync","promisify","exec","PlaywrightRunner","constructor","projectRoot","previewServerUrl","configure","cwd","timeout","error","Error","message","startPreviewServer","response","fetch","ok","console","log","stopPreviewServer","previewServerProcess","kill","undefined","generateTestScenarios","userJourneys","map","journey","index","name","description","join","userJourney","priority","generateTestFile","scenario","testFilePath","testContent","generateTestContent","writeFile","steps","step","runTests","scenarios","length","stdout","env","process","PLAYWRIGHT_BASE_URL","parseTestResults","passed","failed","total","duration","results","runTestFile","testFile","basename","output","jsonMatch","match","JSON","parse","suites","testResults","totalDuration","extractTests","suite","specs","spec","test","tests","result","isPassed","status","push","title","screenshots","attachments","filter","a","contentType","includes","video","find","trace","subSuite","reportPath","passedMatch","failedMatch","parseInt","captureScreenshot","page","screenshotPath","Date","now","mkdir","dirname","recursive","screenshot","fullPage","getTestArtifacts","testName","resultsDir","files","readdir","endsWith","videos","traces","generateReport","exports"],"sources":["PlaywrightRunner.ts"],"sourcesContent":["import { exec } from 'child_process';\nimport { promisify } from 'util';\nimport * as path from 'path';\nimport * as fs from 'fs/promises';\n\nconst execAsync = promisify(exec);\n\nexport interface E2ETestScenario {\n  name: string;\n  description: string;\n  userJourney: string[];\n  priority: 'critical' | 'high' | 'medium' | 'low';\n}\n\nexport interface E2ETestResult {\n  scenario: string;\n  passed: boolean;\n  duration: number;\n  error?: string;\n  screenshots?: string[];\n  video?: string;\n  trace?: string;\n}\n\nexport interface E2EResults {\n  passed: number;\n  failed: number;\n  total: number;\n  duration: number;\n  results: E2ETestResult[];\n  reportPath?: string;\n}\n\nexport class PlaywrightRunner {\n  private projectRoot: string;\n  private previewServerUrl: string;\n  private previewServerProcess?: any;\n\n  constructor(projectRoot: string, previewServerUrl: string = 'http://localhost:3000') {\n    this.projectRoot = projectRoot;\n    this.previewServerUrl = previewServerUrl;\n  }\n\n  /**\n   * Configure Playwright with browsers\n   */\n  async configure(): Promise<void> {\n    try {\n      // Install Playwright browsers if not already installed\n      await execAsync('npx playwright install', {\n        cwd: this.projectRoot,\n        timeout: 300000, // 5 minutes for browser installation\n      });\n    } catch (error: any) {\n      throw new Error(`Failed to configure Playwright: ${error.message}`);\n    }\n  }\n\n  /**\n   * Start local preview server for testing\n   */\n  async startPreviewServer(): Promise<void> {\n    // Check if server is already running\n    try {\n      const response = await fetch(this.previewServerUrl);\n      if (response.ok) {\n        console.log('Preview server already running');\n        return;\n      }\n    } catch {\n      // Server not running, start it\n    }\n\n    // Start the preview server (implementation depends on project setup)\n    // This is a placeholder - actual implementation would start the dev server\n    console.log(`Starting preview server at ${this.previewServerUrl}`);\n  }\n\n  /**\n   * Stop the preview server\n   */\n  async stopPreviewServer(): Promise<void> {\n    if (this.previewServerProcess) {\n      this.previewServerProcess.kill();\n      this.previewServerProcess = undefined;\n    }\n  }\n\n  /**\n   * Generate E2E test scenarios from user journeys\n   */\n  generateTestScenarios(userJourneys: string[][]): E2ETestScenario[] {\n    return userJourneys.map((journey, index) => ({\n      name: `user-journey-${index + 1}`,\n      description: journey.join(' â†’ '),\n      userJourney: journey,\n      priority: index === 0 ? 'critical' : 'high',\n    }));\n  }\n\n  /**\n   * Generate Playwright test file from scenario\n   */\n  async generateTestFile(scenario: E2ETestScenario): Promise<string> {\n    const testFilePath = path.join(\n      this.projectRoot,\n      'tests',\n      'e2e',\n      `${scenario.name}.spec.ts`\n    );\n\n    const testContent = this.generateTestContent(scenario);\n    await fs.writeFile(testFilePath, testContent, 'utf-8');\n\n    return testFilePath;\n  }\n\n  /**\n   * Generate test content from scenario\n   */\n  private generateTestContent(scenario: E2ETestScenario): string {\n    const steps = scenario.userJourney.map((step, index) => {\n      return `  // Step ${index + 1}: ${step}\n  await page.waitForLoadState('networkidle');\n  await page.screenshot({ path: \\`screenshots/\\${testInfo.title}-step-${index + 1}.png\\` });`;\n    }).join('\\n\\n');\n\n    return `import { test, expect } from '@playwright/test';\n\n/**\n * E2E Test: ${scenario.name}\n * Description: ${scenario.description}\n * Priority: ${scenario.priority}\n * \n * User Journey:\n${scenario.userJourney.map((step, i) => ` * ${i + 1}. ${step}`).join('\\n')}\n */\n\ntest.describe('${scenario.name}', () => {\n  test('should complete user journey successfully', async ({ page }, testInfo) => {\n    // Navigate to application\n    await page.goto('/');\n    \n${steps}\n    \n    // Verify final state\n    await expect(page).toHaveTitle(/AzStudio/);\n  });\n  \n  test('should handle errors gracefully', async ({ page }) => {\n    // Test error scenarios\n    await page.goto('/');\n    \n    // Add error handling tests based on the journey\n    await expect(page.locator('body')).toBeVisible();\n  });\n});\n`;\n  }\n\n  /**\n   * Run E2E tests against local preview server\n   */\n  async runTests(scenarios?: E2ETestScenario[]): Promise<E2EResults> {\n    try {\n      // Generate test files if scenarios provided\n      if (scenarios && scenarios.length > 0) {\n        for (const scenario of scenarios) {\n          await this.generateTestFile(scenario);\n        }\n      }\n\n      // Run Playwright tests\n      const { stdout } = await execAsync('npx playwright test --reporter=json', {\n        cwd: this.projectRoot,\n        timeout: 600000, // 10 minutes\n        env: {\n          ...process.env,\n          PLAYWRIGHT_BASE_URL: this.previewServerUrl,\n        },\n      });\n\n      return this.parseTestResults(stdout);\n    } catch (error: any) {\n      // Parse results even on failure\n      if (error.stdout) {\n        return this.parseTestResults(error.stdout);\n      }\n\n      return {\n        passed: 0,\n        failed: 1,\n        total: 1,\n        duration: 0,\n        results: [{\n          scenario: 'Test execution',\n          passed: false,\n          duration: 0,\n          error: error.message,\n        }],\n      };\n    }\n  }\n\n  /**\n   * Run specific test file\n   */\n  async runTestFile(testFile: string): Promise<E2EResults> {\n    try {\n      const { stdout } = await execAsync(`npx playwright test ${testFile} --reporter=json`, {\n        cwd: this.projectRoot,\n        timeout: 300000,\n      });\n\n      return this.parseTestResults(stdout);\n    } catch (error: any) {\n      if (error.stdout) {\n        return this.parseTestResults(error.stdout);\n      }\n\n      return {\n        passed: 0,\n        failed: 1,\n        total: 1,\n        duration: 0,\n        results: [{\n          scenario: path.basename(testFile),\n          passed: false,\n          duration: 0,\n          error: error.message,\n        }],\n      };\n    }\n  }\n\n  /**\n   * Parse Playwright JSON output\n   */\n  private parseTestResults(output: string): E2EResults {\n    try {\n      const jsonMatch = output.match(/\\{[\\s\\S]*\\}/);\n      if (!jsonMatch) {\n        throw new Error('No JSON output found');\n      }\n\n      const results = JSON.parse(jsonMatch[0]);\n      const suites = results.suites || [];\n      \n      const testResults: E2ETestResult[] = [];\n      let passed = 0;\n      let failed = 0;\n      let totalDuration = 0;\n\n      const extractTests = (suite: any) => {\n        if (suite.specs) {\n          for (const spec of suite.specs) {\n            for (const test of spec.tests || []) {\n              const result = test.results?.[0];\n              const isPassed = result?.status === 'passed';\n              \n              if (isPassed) passed++;\n              else failed++;\n\n              totalDuration += result?.duration || 0;\n\n              testResults.push({\n                scenario: spec.title || 'Unknown',\n                passed: isPassed,\n                duration: result?.duration || 0,\n                error: result?.error?.message,\n                screenshots: result?.attachments\n                  ?.filter((a: any) => a.contentType?.includes('image'))\n                  .map((a: any) => a.path),\n                video: result?.attachments\n                  ?.find((a: any) => a.contentType?.includes('video'))?.path,\n                trace: result?.attachments\n                  ?.find((a: any) => a.name === 'trace')?.path,\n              });\n            }\n          }\n        }\n\n        if (suite.suites) {\n          for (const subSuite of suite.suites) {\n            extractTests(subSuite);\n          }\n        }\n      };\n\n      for (const suite of suites) {\n        extractTests(suite);\n      }\n\n      return {\n        passed,\n        failed,\n        total: passed + failed,\n        duration: totalDuration,\n        results: testResults,\n        reportPath: path.join(this.projectRoot, 'test-results', 'html', 'index.html'),\n      };\n    } catch (error: any) {\n      // Fallback parsing for non-JSON output\n      const passedMatch = output.match(/(\\d+) passed/);\n      const failedMatch = output.match(/(\\d+) failed/);\n\n      return {\n        passed: passedMatch ? parseInt(passedMatch[1]) : 0,\n        failed: failedMatch ? parseInt(failedMatch[1]) : 0,\n        total: 0,\n        duration: 0,\n        results: [],\n      };\n    }\n  }\n\n  /**\n   * Capture screenshots on failure\n   */\n  async captureScreenshot(page: any, name: string): Promise<string> {\n    const screenshotPath = path.join(\n      this.projectRoot,\n      'test-results',\n      'screenshots',\n      `${name}-${Date.now()}.png`\n    );\n\n    await fs.mkdir(path.dirname(screenshotPath), { recursive: true });\n    await page.screenshot({ path: screenshotPath, fullPage: true });\n\n    return screenshotPath;\n  }\n\n  /**\n   * Get test artifacts (screenshots, videos, traces)\n   */\n  async getTestArtifacts(testName: string): Promise<{\n    screenshots: string[];\n    videos: string[];\n    traces: string[];\n  }> {\n    const resultsDir = path.join(this.projectRoot, 'test-results');\n    \n    try {\n      const files = await fs.readdir(resultsDir, { recursive: true });\n      \n      return {\n        screenshots: files.filter(f => f.includes(testName) && f.endsWith('.png')),\n        videos: files.filter(f => f.includes(testName) && f.endsWith('.webm')),\n        traces: files.filter(f => f.includes(testName) && f.endsWith('.zip')),\n      };\n    } catch {\n      return { screenshots: [], videos: [], traces: [] };\n    }\n  }\n\n  /**\n   * Generate HTML report\n   */\n  async generateReport(): Promise<string> {\n    try {\n      await execAsync('npx playwright show-report', {\n        cwd: this.projectRoot,\n      });\n\n      return path.join(this.projectRoot, 'test-results', 'html', 'index.html');\n    } catch (error: any) {\n      throw new Error(`Failed to generate report: ${error.message}`);\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}