755ffeab056f47734619cc042004ecd5
"use strict";

var _globals = require("@jest/globals");
var _serviceOrchestrator = require("../integration/service-orchestrator.js");
var _businessService = require("../services/business.service.js");
var _revenueService = require("../services/revenue.service.js");
var _paymentService = require("../services/payment.service.js");
var _fundService = require("../services/fund.service.js");
var _legalService = require("../services/legal.service.js");
(0, _globals.describe)('E2E Workflows', () => {
  let businessId;
  let userId = 'test-user-123';
  let transactionId;
  let paymentId;
  (0, _globals.describe)('Complete Business Creation Flow', () => {
    (0, _globals.it)('should create business with legal documents', async () => {
      const result = await _serviceOrchestrator.serviceOrchestrator.createBusinessWithLegalSetup(userId, {
        businessName: 'Test Business',
        businessType: 'e-commerce',
        templateId: 'template-1'
      });
      (0, _globals.expect)(result.business).toBeDefined();
      (0, _globals.expect)(result.business.businessName).toBe('Test Business');
      (0, _globals.expect)(result.legalDocuments).toBeDefined();
      (0, _globals.expect)(result.legalDocuments.length).toBeGreaterThan(0);
      (0, _globals.expect)(result.guidance).toBeDefined();
      businessId = result.business.id;
    });
    (0, _globals.it)('should have correct ownership split', async () => {
      const business = await _businessService.businessService.getBusinessById(businessId);
      (0, _globals.expect)(business.userOwnership).toBe(90);
      (0, _globals.expect)(business.citadelFundShare).toBe(10);
    });
  });
  (0, _globals.describe)('Revenue Processing Flow', () => {
    (0, _globals.it)('should record revenue transaction', async () => {
      const transaction = await _revenueService.revenueService.recordTransaction(businessId, {
        amount: 1000,
        currency: 'USD',
        source: 'online_sales'
      });
      (0, _globals.expect)(transaction).toBeDefined();
      (0, _globals.expect)(transaction.amount).toBe(1000);
      (0, _globals.expect)(transaction.status).toBe('completed');
      transactionId = transaction.id;
    });
    (0, _globals.it)('should calculate correct allocation (90/10 split)', async () => {
      const breakdown = await _revenueService.revenueService.getBreakdown(businessId);
      (0, _globals.expect)(breakdown.totalRevenue).toBe(1000);
      (0, _globals.expect)(breakdown.businessOwnerShare).toBe(900);
      (0, _globals.expect)(breakdown.citadelFundShare).toBe(100);
    });
    (0, _globals.it)('should process revenue with automatic allocation', async () => {
      const result = await _serviceOrchestrator.serviceOrchestrator.processRevenueWithAllocation(businessId, {
        amount: 500,
        currency: 'USD',
        source: 'subscription'
      });
      (0, _globals.expect)(result.transaction).toBeDefined();
      (0, _globals.expect)(result.allocation).toBeDefined();
      (0, _globals.expect)(result.allocation.businessOwnerAmount).toBe(450);
      (0, _globals.expect)(result.allocation.citadelFundAmount).toBe(50);
      (0, _globals.expect)(result.ownerPayment).toBeDefined();
      paymentId = result.ownerPayment.id;
    });
  });
  (0, _globals.describe)('Payment Processing Flow', () => {
    (0, _globals.it)('should create payment', async () => {
      const payment = await _paymentService.paymentService.createPayment(businessId, userId, {
        amount: 450,
        type: 'revenue',
        paymentMethod: 'stripe'
      });
      (0, _globals.expect)(payment).toBeDefined();
      (0, _globals.expect)(payment.amount).toBe(450);
      (0, _globals.expect)(payment.status).toBe('pending');
    });
    (0, _globals.it)('should confirm payment', async () => {
      const payment = await _paymentService.paymentService.confirmPayment(paymentId, userId);
      (0, _globals.expect)(payment).toBeDefined();
      (0, _globals.expect)(payment.status).toBe('completed');
      (0, _globals.expect)(payment.completedAt).toBeDefined();
    });
    (0, _globals.it)('should track payment history', async () => {
      const history = await _paymentService.paymentService.getPaymentHistory(businessId);
      (0, _globals.expect)(history).toBeDefined();
      (0, _globals.expect)(history.totalCount).toBeGreaterThan(0);
      (0, _globals.expect)(history.totalAmount).toBeGreaterThan(0);
      (0, _globals.expect)(history.statusBreakdown.completed).toBeGreaterThan(0);
    });
  });
  (0, _globals.describe)('Citadel Fund Allocation Flow', () => {
    (0, _globals.it)('should record fund contribution', async () => {
      const fundBefore = await _fundService.fundService.getFundBalance();
      const initialBalance = fundBefore.balance;

      // Process revenue which contributes to fund
      await _serviceOrchestrator.serviceOrchestrator.processRevenueWithAllocation(businessId, {
        amount: 200,
        currency: 'USD',
        source: 'test_source'
      });
      const fundAfter = await _fundService.fundService.getFundBalance();
      (0, _globals.expect)(fundAfter.balance).toBeGreaterThan(initialBalance);
      (0, _globals.expect)(fundAfter.totalContributions).toBeGreaterThan(0);
    });
    (0, _globals.it)('should track fund statistics', async () => {
      const fund = await _fundService.fundService.getFundBalance();
      (0, _globals.expect)(fund).toBeDefined();
      (0, _globals.expect)(fund.balance).toBeGreaterThanOrEqual(0);
      (0, _globals.expect)(fund.totalContributions).toBeGreaterThanOrEqual(0);
      (0, _globals.expect)(fund.totalDistributions).toBeGreaterThanOrEqual(0);
    });
  });
  (0, _globals.describe)('Document Signing Flow', () => {
    (0, _globals.it)('should sign business documents', async () => {
      const documents = await _legalService.legalService.getBusinessDocuments(businessId);
      const docIds = documents.slice(0, 1).map(d => d.id);
      const signedDocs = await _serviceOrchestrator.serviceOrchestrator.signBusinessDocuments(businessId, userId, docIds, {
        signatureHash: 'test-hash-123',
        ipAddress: '127.0.0.1',
        userAgent: 'test-agent'
      });
      (0, _globals.expect)(signedDocs).toBeDefined();
      (0, _globals.expect)(signedDocs.length).toBeGreaterThan(0);
      (0, _globals.expect)(signedDocs[0].status).toBe('signed');
    });
  });
  (0, _globals.describe)('Dashboard Data Aggregation', () => {
    (0, _globals.it)('should aggregate complete dashboard data', async () => {
      const dashboardData = await _serviceOrchestrator.serviceOrchestrator.getBusinessDashboardData(businessId);
      (0, _globals.expect)(dashboardData).toBeDefined();
      (0, _globals.expect)(dashboardData.business).toBeDefined();
      (0, _globals.expect)(dashboardData.revenue).toBeDefined();
      (0, _globals.expect)(dashboardData.payments).toBeDefined();
      (0, _globals.expect)(dashboardData.fund).toBeDefined();
      (0, _globals.expect)(dashboardData.mentorship).toBeDefined();
    });
    (0, _globals.it)('should have consistent revenue and payment data', async () => {
      const dashboardData = await _serviceOrchestrator.serviceOrchestrator.getBusinessDashboardData(businessId);
      (0, _globals.expect)(dashboardData.revenue.totalRevenue).toBeGreaterThan(0);
      (0, _globals.expect)(dashboardData.payments.totalAmount).toBeGreaterThan(0);
      (0, _globals.expect)(dashboardData.payments.totalCount).toBeGreaterThan(0);
    });
  });
  (0, _globals.describe)('Revenue Statistics', () => {
    (0, _globals.it)('should calculate correct statistics', async () => {
      const stats = await _revenueService.revenueService.getStatistics(businessId);
      (0, _globals.expect)(stats).toBeDefined();
      (0, _globals.expect)(stats.totalRevenue).toBeGreaterThan(0);
      (0, _globals.expect)(stats.transactionCount).toBeGreaterThan(0);
      (0, _globals.expect)(stats.averageTransaction).toBeGreaterThan(0);
      (0, _globals.expect)(stats.businessOwnerTotal).toBe(stats.totalRevenue * 0.9);
      (0, _globals.expect)(stats.citadelFundTotal).toBe(stats.totalRevenue * 0.1);
    });
    (0, _globals.it)('should track revenue trend', async () => {
      const trend = await _revenueService.revenueService.getRevenueTrend(businessId, 30);
      (0, _globals.expect)(trend).toBeDefined();
      (0, _globals.expect)(Array.isArray(trend)).toBe(true);
      if (trend.length > 0) {
        (0, _globals.expect)(trend[0].revenue).toBeGreaterThan(0);
        (0, _globals.expect)(trend[0].businessOwnerShare).toBe(trend[0].revenue * 0.9);
        (0, _globals.expect)(trend[0].citadelFundShare).toBe(trend[0].revenue * 0.1);
      }
    });
  });
  (0, _globals.describe)('Payment Status Tracking', () => {
    (0, _globals.it)('should track payment status changes', async () => {
      const payment = await _paymentService.paymentService.createPayment(businessId, userId, {
        amount: 100,
        type: 'revenue',
        paymentMethod: 'stripe'
      });
      (0, _globals.expect)(payment.status).toBe('pending');
      const confirmedPayment = await _paymentService.paymentService.confirmPayment(payment.id, userId);
      (0, _globals.expect)(confirmedPayment.status).toBe('completed');
    });
    (0, _globals.it)('should handle payment retry', async () => {
      const payment = await _paymentService.paymentService.createPayment(businessId, userId, {
        amount: 50,
        type: 'revenue',
        paymentMethod: 'stripe'
      });

      // Simulate failure
      await _paymentService.paymentService.updatePaymentStatus(payment.id, 'failed');

      // Retry
      const retriedPayment = await _paymentService.paymentService.retryPayment(payment.id, userId);
      (0, _globals.expect)(retriedPayment.status).toBe('pending');
    });
  });
  (0, _globals.describe)('Data Consistency', () => {
    (0, _globals.it)('should maintain data consistency across services', async () => {
      const business = await _businessService.businessService.getBusinessById(businessId);
      const revenue = await _revenueService.revenueService.getStatistics(businessId);
      const payments = await _paymentService.paymentService.getPaymentHistory(businessId);

      // Revenue should match payment totals
      (0, _globals.expect)(revenue.totalRevenue).toBeGreaterThanOrEqual(payments.totalAmount);

      // Ownership should be consistent
      (0, _globals.expect)(business.userOwnership).toBe(90);
      (0, _globals.expect)(business.citadelFundShare).toBe(10);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfc2VydmljZU9yY2hlc3RyYXRvciIsIl9idXNpbmVzc1NlcnZpY2UiLCJfcmV2ZW51ZVNlcnZpY2UiLCJfcGF5bWVudFNlcnZpY2UiLCJfZnVuZFNlcnZpY2UiLCJfbGVnYWxTZXJ2aWNlIiwiZGVzY3JpYmUiLCJidXNpbmVzc0lkIiwidXNlcklkIiwidHJhbnNhY3Rpb25JZCIsInBheW1lbnRJZCIsIml0IiwicmVzdWx0Iiwic2VydmljZU9yY2hlc3RyYXRvciIsImNyZWF0ZUJ1c2luZXNzV2l0aExlZ2FsU2V0dXAiLCJidXNpbmVzc05hbWUiLCJidXNpbmVzc1R5cGUiLCJ0ZW1wbGF0ZUlkIiwiZXhwZWN0IiwiYnVzaW5lc3MiLCJ0b0JlRGVmaW5lZCIsInRvQmUiLCJsZWdhbERvY3VtZW50cyIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImd1aWRhbmNlIiwiaWQiLCJidXNpbmVzc1NlcnZpY2UiLCJnZXRCdXNpbmVzc0J5SWQiLCJ1c2VyT3duZXJzaGlwIiwiY2l0YWRlbEZ1bmRTaGFyZSIsInRyYW5zYWN0aW9uIiwicmV2ZW51ZVNlcnZpY2UiLCJyZWNvcmRUcmFuc2FjdGlvbiIsImFtb3VudCIsImN1cnJlbmN5Iiwic291cmNlIiwic3RhdHVzIiwiYnJlYWtkb3duIiwiZ2V0QnJlYWtkb3duIiwidG90YWxSZXZlbnVlIiwiYnVzaW5lc3NPd25lclNoYXJlIiwicHJvY2Vzc1JldmVudWVXaXRoQWxsb2NhdGlvbiIsImFsbG9jYXRpb24iLCJidXNpbmVzc093bmVyQW1vdW50IiwiY2l0YWRlbEZ1bmRBbW91bnQiLCJvd25lclBheW1lbnQiLCJwYXltZW50IiwicGF5bWVudFNlcnZpY2UiLCJjcmVhdGVQYXltZW50IiwidHlwZSIsInBheW1lbnRNZXRob2QiLCJjb25maXJtUGF5bWVudCIsImNvbXBsZXRlZEF0IiwiaGlzdG9yeSIsImdldFBheW1lbnRIaXN0b3J5IiwidG90YWxDb3VudCIsInRvdGFsQW1vdW50Iiwic3RhdHVzQnJlYWtkb3duIiwiY29tcGxldGVkIiwiZnVuZEJlZm9yZSIsImZ1bmRTZXJ2aWNlIiwiZ2V0RnVuZEJhbGFuY2UiLCJpbml0aWFsQmFsYW5jZSIsImJhbGFuY2UiLCJmdW5kQWZ0ZXIiLCJ0b3RhbENvbnRyaWJ1dGlvbnMiLCJmdW5kIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInRvdGFsRGlzdHJpYnV0aW9ucyIsImRvY3VtZW50cyIsImxlZ2FsU2VydmljZSIsImdldEJ1c2luZXNzRG9jdW1lbnRzIiwiZG9jSWRzIiwic2xpY2UiLCJtYXAiLCJkIiwic2lnbmVkRG9jcyIsInNpZ25CdXNpbmVzc0RvY3VtZW50cyIsInNpZ25hdHVyZUhhc2giLCJpcEFkZHJlc3MiLCJ1c2VyQWdlbnQiLCJkYXNoYm9hcmREYXRhIiwiZ2V0QnVzaW5lc3NEYXNoYm9hcmREYXRhIiwicmV2ZW51ZSIsInBheW1lbnRzIiwibWVudG9yc2hpcCIsInN0YXRzIiwiZ2V0U3RhdGlzdGljcyIsInRyYW5zYWN0aW9uQ291bnQiLCJhdmVyYWdlVHJhbnNhY3Rpb24iLCJidXNpbmVzc093bmVyVG90YWwiLCJjaXRhZGVsRnVuZFRvdGFsIiwidHJlbmQiLCJnZXRSZXZlbnVlVHJlbmQiLCJBcnJheSIsImlzQXJyYXkiLCJjb25maXJtZWRQYXltZW50IiwidXBkYXRlUGF5bWVudFN0YXR1cyIsInJldHJpZWRQYXltZW50IiwicmV0cnlQYXltZW50Il0sInNvdXJjZXMiOlsiZTJlLXdvcmtmbG93cy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVBbGwsIGFmdGVyQWxsIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XHJcbmltcG9ydCB7IHNlcnZpY2VPcmNoZXN0cmF0b3IgfSBmcm9tICcuLi9pbnRlZ3JhdGlvbi9zZXJ2aWNlLW9yY2hlc3RyYXRvci5qcyc7XHJcbmltcG9ydCB7IGJ1c2luZXNzU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2J1c2luZXNzLnNlcnZpY2UuanMnO1xyXG5pbXBvcnQgeyByZXZlbnVlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3JldmVudWUuc2VydmljZS5qcyc7XHJcbmltcG9ydCB7IHBheW1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvcGF5bWVudC5zZXJ2aWNlLmpzJztcclxuaW1wb3J0IHsgZnVuZFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9mdW5kLnNlcnZpY2UuanMnO1xyXG5pbXBvcnQgeyBsZWdhbFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9sZWdhbC5zZXJ2aWNlLmpzJztcclxuXHJcbmRlc2NyaWJlKCdFMkUgV29ya2Zsb3dzJywgKCkgPT4ge1xyXG4gIGxldCBidXNpbmVzc0lkOiBzdHJpbmc7XHJcbiAgbGV0IHVzZXJJZCA9ICd0ZXN0LXVzZXItMTIzJztcclxuICBsZXQgdHJhbnNhY3Rpb25JZDogc3RyaW5nO1xyXG4gIGxldCBwYXltZW50SWQ6IHN0cmluZztcclxuXHJcbiAgZGVzY3JpYmUoJ0NvbXBsZXRlIEJ1c2luZXNzIENyZWF0aW9uIEZsb3cnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBidXNpbmVzcyB3aXRoIGxlZ2FsIGRvY3VtZW50cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZU9yY2hlc3RyYXRvci5jcmVhdGVCdXNpbmVzc1dpdGhMZWdhbFNldHVwKHVzZXJJZCwge1xyXG4gICAgICAgIGJ1c2luZXNzTmFtZTogJ1Rlc3QgQnVzaW5lc3MnLFxyXG4gICAgICAgIGJ1c2luZXNzVHlwZTogJ2UtY29tbWVyY2UnLFxyXG4gICAgICAgIHRlbXBsYXRlSWQ6ICd0ZW1wbGF0ZS0xJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmJ1c2luZXNzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmJ1c2luZXNzLmJ1c2luZXNzTmFtZSkudG9CZSgnVGVzdCBCdXNpbmVzcycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmxlZ2FsRG9jdW1lbnRzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmxlZ2FsRG9jdW1lbnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lmd1aWRhbmNlKS50b0JlRGVmaW5lZCgpO1xyXG5cclxuICAgICAgYnVzaW5lc3NJZCA9IHJlc3VsdC5idXNpbmVzcy5pZDtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBjb3JyZWN0IG93bmVyc2hpcCBzcGxpdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYnVzaW5lc3MgPSBhd2FpdCBidXNpbmVzc1NlcnZpY2UuZ2V0QnVzaW5lc3NCeUlkKGJ1c2luZXNzSWQpO1xyXG4gICAgICBleHBlY3QoYnVzaW5lc3MudXNlck93bmVyc2hpcCkudG9CZSg5MCk7XHJcbiAgICAgIGV4cGVjdChidXNpbmVzcy5jaXRhZGVsRnVuZFNoYXJlKS50b0JlKDEwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUmV2ZW51ZSBQcm9jZXNzaW5nIEZsb3cnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJlY29yZCByZXZlbnVlIHRyYW5zYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHtcclxuICAgICAgICBhbW91bnQ6IDEwMDAsXHJcbiAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxyXG4gICAgICAgIHNvdXJjZTogJ29ubGluZV9zYWxlcycsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodHJhbnNhY3Rpb24uYW1vdW50KS50b0JlKDEwMDApO1xyXG4gICAgICBleHBlY3QodHJhbnNhY3Rpb24uc3RhdHVzKS50b0JlKCdjb21wbGV0ZWQnKTtcclxuXHJcbiAgICAgIHRyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbi5pZDtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGNvcnJlY3QgYWxsb2NhdGlvbiAoOTAvMTAgc3BsaXQpJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBicmVha2Rvd24gPSBhd2FpdCByZXZlbnVlU2VydmljZS5nZXRCcmVha2Rvd24oYnVzaW5lc3NJZCk7XHJcblxyXG4gICAgICBleHBlY3QoYnJlYWtkb3duLnRvdGFsUmV2ZW51ZSkudG9CZSgxMDAwKTtcclxuICAgICAgZXhwZWN0KGJyZWFrZG93bi5idXNpbmVzc093bmVyU2hhcmUpLnRvQmUoOTAwKTtcclxuICAgICAgZXhwZWN0KGJyZWFrZG93bi5jaXRhZGVsRnVuZFNoYXJlKS50b0JlKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgcmV2ZW51ZSB3aXRoIGF1dG9tYXRpYyBhbGxvY2F0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlT3JjaGVzdHJhdG9yLnByb2Nlc3NSZXZlbnVlV2l0aEFsbG9jYXRpb24oYnVzaW5lc3NJZCwge1xyXG4gICAgICAgIGFtb3VudDogNTAwLFxyXG4gICAgICAgIGN1cnJlbmN5OiAnVVNEJyxcclxuICAgICAgICBzb3VyY2U6ICdzdWJzY3JpcHRpb24nLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQudHJhbnNhY3Rpb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYWxsb2NhdGlvbikudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5hbGxvY2F0aW9uLmJ1c2luZXNzT3duZXJBbW91bnQpLnRvQmUoNDUwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5hbGxvY2F0aW9uLmNpdGFkZWxGdW5kQW1vdW50KS50b0JlKDUwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5vd25lclBheW1lbnQpLnRvQmVEZWZpbmVkKCk7XHJcblxyXG4gICAgICBwYXltZW50SWQgPSByZXN1bHQub3duZXJQYXltZW50LmlkO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQYXltZW50IFByb2Nlc3NpbmcgRmxvdycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY3JlYXRlIHBheW1lbnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBheW1lbnQgPSBhd2FpdCBwYXltZW50U2VydmljZS5jcmVhdGVQYXltZW50KGJ1c2luZXNzSWQsIHVzZXJJZCwge1xyXG4gICAgICAgIGFtb3VudDogNDUwLFxyXG4gICAgICAgIHR5cGU6ICdyZXZlbnVlJyxcclxuICAgICAgICBwYXltZW50TWV0aG9kOiAnc3RyaXBlJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocGF5bWVudCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHBheW1lbnQuYW1vdW50KS50b0JlKDQ1MCk7XHJcbiAgICAgIGV4cGVjdChwYXltZW50LnN0YXR1cykudG9CZSgncGVuZGluZycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjb25maXJtIHBheW1lbnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBheW1lbnQgPSBhd2FpdCBwYXltZW50U2VydmljZS5jb25maXJtUGF5bWVudChwYXltZW50SWQsIHVzZXJJZCk7XHJcblxyXG4gICAgICBleHBlY3QocGF5bWVudCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHBheW1lbnQuc3RhdHVzKS50b0JlKCdjb21wbGV0ZWQnKTtcclxuICAgICAgZXhwZWN0KHBheW1lbnQuY29tcGxldGVkQXQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIHBheW1lbnQgaGlzdG9yeScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHBheW1lbnRTZXJ2aWNlLmdldFBheW1lbnRIaXN0b3J5KGJ1c2luZXNzSWQpO1xyXG5cclxuICAgICAgZXhwZWN0KGhpc3RvcnkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChoaXN0b3J5LnRvdGFsQ291bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KGhpc3RvcnkudG90YWxBbW91bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KGhpc3Rvcnkuc3RhdHVzQnJlYWtkb3duLmNvbXBsZXRlZCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDaXRhZGVsIEZ1bmQgQWxsb2NhdGlvbiBGbG93JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZWNvcmQgZnVuZCBjb250cmlidXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZ1bmRCZWZvcmUgPSBhd2FpdCBmdW5kU2VydmljZS5nZXRGdW5kQmFsYW5jZSgpO1xyXG4gICAgICBjb25zdCBpbml0aWFsQmFsYW5jZSA9IGZ1bmRCZWZvcmUuYmFsYW5jZTtcclxuXHJcbiAgICAgIC8vIFByb2Nlc3MgcmV2ZW51ZSB3aGljaCBjb250cmlidXRlcyB0byBmdW5kXHJcbiAgICAgIGF3YWl0IHNlcnZpY2VPcmNoZXN0cmF0b3IucHJvY2Vzc1JldmVudWVXaXRoQWxsb2NhdGlvbihidXNpbmVzc0lkLCB7XHJcbiAgICAgICAgYW1vdW50OiAyMDAsXHJcbiAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxyXG4gICAgICAgIHNvdXJjZTogJ3Rlc3Rfc291cmNlJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBmdW5kQWZ0ZXIgPSBhd2FpdCBmdW5kU2VydmljZS5nZXRGdW5kQmFsYW5jZSgpO1xyXG4gICAgICBleHBlY3QoZnVuZEFmdGVyLmJhbGFuY2UpLnRvQmVHcmVhdGVyVGhhbihpbml0aWFsQmFsYW5jZSk7XHJcbiAgICAgIGV4cGVjdChmdW5kQWZ0ZXIudG90YWxDb250cmlidXRpb25zKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIGZ1bmQgc3RhdGlzdGljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZnVuZCA9IGF3YWl0IGZ1bmRTZXJ2aWNlLmdldEZ1bmRCYWxhbmNlKCk7XHJcblxyXG4gICAgICBleHBlY3QoZnVuZCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGZ1bmQuYmFsYW5jZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KGZ1bmQudG90YWxDb250cmlidXRpb25zKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3QoZnVuZC50b3RhbERpc3RyaWJ1dGlvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0RvY3VtZW50IFNpZ25pbmcgRmxvdycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc2lnbiBidXNpbmVzcyBkb2N1bWVudHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZXRCdXNpbmVzc0RvY3VtZW50cyhidXNpbmVzc0lkKTtcclxuICAgICAgY29uc3QgZG9jSWRzID0gZG9jdW1lbnRzLnNsaWNlKDAsIDEpLm1hcCgoZCkgPT4gZC5pZCk7XHJcblxyXG4gICAgICBjb25zdCBzaWduZWREb2NzID0gYXdhaXQgc2VydmljZU9yY2hlc3RyYXRvci5zaWduQnVzaW5lc3NEb2N1bWVudHMoXHJcbiAgICAgICAgYnVzaW5lc3NJZCxcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgZG9jSWRzLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHNpZ25hdHVyZUhhc2g6ICd0ZXN0LWhhc2gtMTIzJyxcclxuICAgICAgICAgIGlwQWRkcmVzczogJzEyNy4wLjAuMScsXHJcbiAgICAgICAgICB1c2VyQWdlbnQ6ICd0ZXN0LWFnZW50JyxcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3Qoc2lnbmVkRG9jcykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHNpZ25lZERvY3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChzaWduZWREb2NzWzBdLnN0YXR1cykudG9CZSgnc2lnbmVkJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Rhc2hib2FyZCBEYXRhIEFnZ3JlZ2F0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBhZ2dyZWdhdGUgY29tcGxldGUgZGFzaGJvYXJkIGRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhc2hib2FyZERhdGEgPSBhd2FpdCBzZXJ2aWNlT3JjaGVzdHJhdG9yLmdldEJ1c2luZXNzRGFzaGJvYXJkRGF0YShidXNpbmVzc0lkKTtcclxuXHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoZGFzaGJvYXJkRGF0YS5idXNpbmVzcykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGRhc2hib2FyZERhdGEucmV2ZW51ZSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGRhc2hib2FyZERhdGEucGF5bWVudHMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLmZ1bmQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLm1lbnRvcnNoaXApLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgY29uc2lzdGVudCByZXZlbnVlIGFuZCBwYXltZW50IGRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhc2hib2FyZERhdGEgPSBhd2FpdCBzZXJ2aWNlT3JjaGVzdHJhdG9yLmdldEJ1c2luZXNzRGFzaGJvYXJkRGF0YShidXNpbmVzc0lkKTtcclxuXHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLnJldmVudWUudG90YWxSZXZlbnVlKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLnBheW1lbnRzLnRvdGFsQW1vdW50KS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChkYXNoYm9hcmREYXRhLnBheW1lbnRzLnRvdGFsQ291bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUmV2ZW51ZSBTdGF0aXN0aWNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29ycmVjdCBzdGF0aXN0aWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLmdldFN0YXRpc3RpY3MoYnVzaW5lc3NJZCk7XHJcblxyXG4gICAgICBleHBlY3Qoc3RhdHMpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFJldmVudWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnRyYW5zYWN0aW9uQ291bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VUcmFuc2FjdGlvbikudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3Qoc3RhdHMuYnVzaW5lc3NPd25lclRvdGFsKS50b0JlKHN0YXRzLnRvdGFsUmV2ZW51ZSAqIDAuOSk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5jaXRhZGVsRnVuZFRvdGFsKS50b0JlKHN0YXRzLnRvdGFsUmV2ZW51ZSAqIDAuMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIHJldmVudWUgdHJlbmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRyZW5kID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0UmV2ZW51ZVRyZW5kKGJ1c2luZXNzSWQsIDMwKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0cmVuZCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkodHJlbmQpKS50b0JlKHRydWUpO1xyXG4gICAgICBpZiAodHJlbmQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGV4cGVjdCh0cmVuZFswXS5yZXZlbnVlKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgICAgZXhwZWN0KHRyZW5kWzBdLmJ1c2luZXNzT3duZXJTaGFyZSkudG9CZSh0cmVuZFswXS5yZXZlbnVlICogMC45KTtcclxuICAgICAgICBleHBlY3QodHJlbmRbMF0uY2l0YWRlbEZ1bmRTaGFyZSkudG9CZSh0cmVuZFswXS5yZXZlbnVlICogMC4xKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQYXltZW50IFN0YXR1cyBUcmFja2luZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdHJhY2sgcGF5bWVudCBzdGF0dXMgY2hhbmdlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGF5bWVudCA9IGF3YWl0IHBheW1lbnRTZXJ2aWNlLmNyZWF0ZVBheW1lbnQoYnVzaW5lc3NJZCwgdXNlcklkLCB7XHJcbiAgICAgICAgYW1vdW50OiAxMDAsXHJcbiAgICAgICAgdHlwZTogJ3JldmVudWUnLFxyXG4gICAgICAgIHBheW1lbnRNZXRob2Q6ICdzdHJpcGUnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChwYXltZW50LnN0YXR1cykudG9CZSgncGVuZGluZycpO1xyXG5cclxuICAgICAgY29uc3QgY29uZmlybWVkUGF5bWVudCA9IGF3YWl0IHBheW1lbnRTZXJ2aWNlLmNvbmZpcm1QYXltZW50KHBheW1lbnQuaWQsIHVzZXJJZCk7XHJcbiAgICAgIGV4cGVjdChjb25maXJtZWRQYXltZW50LnN0YXR1cykudG9CZSgnY29tcGxldGVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwYXltZW50IHJldHJ5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXltZW50ID0gYXdhaXQgcGF5bWVudFNlcnZpY2UuY3JlYXRlUGF5bWVudChidXNpbmVzc0lkLCB1c2VySWQsIHtcclxuICAgICAgICBhbW91bnQ6IDUwLFxyXG4gICAgICAgIHR5cGU6ICdyZXZlbnVlJyxcclxuICAgICAgICBwYXltZW50TWV0aG9kOiAnc3RyaXBlJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBTaW11bGF0ZSBmYWlsdXJlXHJcbiAgICAgIGF3YWl0IHBheW1lbnRTZXJ2aWNlLnVwZGF0ZVBheW1lbnRTdGF0dXMocGF5bWVudC5pZCwgJ2ZhaWxlZCcpO1xyXG5cclxuICAgICAgLy8gUmV0cnlcclxuICAgICAgY29uc3QgcmV0cmllZFBheW1lbnQgPSBhd2FpdCBwYXltZW50U2VydmljZS5yZXRyeVBheW1lbnQocGF5bWVudC5pZCwgdXNlcklkKTtcclxuICAgICAgZXhwZWN0KHJldHJpZWRQYXltZW50LnN0YXR1cykudG9CZSgncGVuZGluZycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEYXRhIENvbnNpc3RlbmN5JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBkYXRhIGNvbnNpc3RlbmN5IGFjcm9zcyBzZXJ2aWNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYnVzaW5lc3MgPSBhd2FpdCBidXNpbmVzc1NlcnZpY2UuZ2V0QnVzaW5lc3NCeUlkKGJ1c2luZXNzSWQpO1xyXG4gICAgICBjb25zdCByZXZlbnVlID0gYXdhaXQgcmV2ZW51ZVNlcnZpY2UuZ2V0U3RhdGlzdGljcyhidXNpbmVzc0lkKTtcclxuICAgICAgY29uc3QgcGF5bWVudHMgPSBhd2FpdCBwYXltZW50U2VydmljZS5nZXRQYXltZW50SGlzdG9yeShidXNpbmVzc0lkKTtcclxuXHJcbiAgICAgIC8vIFJldmVudWUgc2hvdWxkIG1hdGNoIHBheW1lbnQgdG90YWxzXHJcbiAgICAgIGV4cGVjdChyZXZlbnVlLnRvdGFsUmV2ZW51ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChwYXltZW50cy50b3RhbEFtb3VudCk7XHJcblxyXG4gICAgICAvLyBPd25lcnNoaXAgc2hvdWxkIGJlIGNvbnNpc3RlbnRcclxuICAgICAgZXhwZWN0KGJ1c2luZXNzLnVzZXJPd25lcnNoaXApLnRvQmUoOTApO1xyXG4gICAgICBleHBlY3QoYnVzaW5lc3MuY2l0YWRlbEZ1bmRTaGFyZSkudG9CZSgxMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxvQkFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsZ0JBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLGVBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLFlBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLGFBQUEsR0FBQU4sT0FBQTtBQUVBLElBQUFPLGlCQUFRLEVBQUMsZUFBZSxFQUFFLE1BQU07RUFDOUIsSUFBSUMsVUFBa0I7RUFDdEIsSUFBSUMsTUFBTSxHQUFHLGVBQWU7RUFDNUIsSUFBSUMsYUFBcUI7RUFDekIsSUFBSUMsU0FBaUI7RUFFckIsSUFBQUosaUJBQVEsRUFBQyxpQ0FBaUMsRUFBRSxNQUFNO0lBQ2hELElBQUFLLFdBQUUsRUFBQyw2Q0FBNkMsRUFBRSxZQUFZO01BQzVELE1BQU1DLE1BQU0sR0FBRyxNQUFNQyx3Q0FBbUIsQ0FBQ0MsNEJBQTRCLENBQUNOLE1BQU0sRUFBRTtRQUM1RU8sWUFBWSxFQUFFLGVBQWU7UUFDN0JDLFlBQVksRUFBRSxZQUFZO1FBQzFCQyxVQUFVLEVBQUU7TUFDZCxDQUFDLENBQUM7TUFFRixJQUFBQyxlQUFNLEVBQUNOLE1BQU0sQ0FBQ08sUUFBUSxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO01BQ3JDLElBQUFGLGVBQU0sRUFBQ04sTUFBTSxDQUFDTyxRQUFRLENBQUNKLFlBQVksQ0FBQyxDQUFDTSxJQUFJLENBQUMsZUFBZSxDQUFDO01BQzFELElBQUFILGVBQU0sRUFBQ04sTUFBTSxDQUFDVSxjQUFjLENBQUMsQ0FBQ0YsV0FBVyxDQUFDLENBQUM7TUFDM0MsSUFBQUYsZUFBTSxFQUFDTixNQUFNLENBQUNVLGNBQWMsQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLGVBQWUsQ0FBQyxDQUFDLENBQUM7TUFDdkQsSUFBQU4sZUFBTSxFQUFDTixNQUFNLENBQUNhLFFBQVEsQ0FBQyxDQUFDTCxXQUFXLENBQUMsQ0FBQztNQUVyQ2IsVUFBVSxHQUFHSyxNQUFNLENBQUNPLFFBQVEsQ0FBQ08sRUFBRTtJQUNqQyxDQUFDLENBQUM7SUFFRixJQUFBZixXQUFFLEVBQUMscUNBQXFDLEVBQUUsWUFBWTtNQUNwRCxNQUFNUSxRQUFRLEdBQUcsTUFBTVEsZ0NBQWUsQ0FBQ0MsZUFBZSxDQUFDckIsVUFBVSxDQUFDO01BQ2xFLElBQUFXLGVBQU0sRUFBQ0MsUUFBUSxDQUFDVSxhQUFhLENBQUMsQ0FBQ1IsSUFBSSxDQUFDLEVBQUUsQ0FBQztNQUN2QyxJQUFBSCxlQUFNLEVBQUNDLFFBQVEsQ0FBQ1csZ0JBQWdCLENBQUMsQ0FBQ1QsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUM1QyxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRixJQUFBZixpQkFBUSxFQUFDLHlCQUF5QixFQUFFLE1BQU07SUFDeEMsSUFBQUssV0FBRSxFQUFDLG1DQUFtQyxFQUFFLFlBQVk7TUFDbEQsTUFBTW9CLFdBQVcsR0FBRyxNQUFNQyw4QkFBYyxDQUFDQyxpQkFBaUIsQ0FBQzFCLFVBQVUsRUFBRTtRQUNyRTJCLE1BQU0sRUFBRSxJQUFJO1FBQ1pDLFFBQVEsRUFBRSxLQUFLO1FBQ2ZDLE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQztNQUVGLElBQUFsQixlQUFNLEVBQUNhLFdBQVcsQ0FBQyxDQUFDWCxXQUFXLENBQUMsQ0FBQztNQUNqQyxJQUFBRixlQUFNLEVBQUNhLFdBQVcsQ0FBQ0csTUFBTSxDQUFDLENBQUNiLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDckMsSUFBQUgsZUFBTSxFQUFDYSxXQUFXLENBQUNNLE1BQU0sQ0FBQyxDQUFDaEIsSUFBSSxDQUFDLFdBQVcsQ0FBQztNQUU1Q1osYUFBYSxHQUFHc0IsV0FBVyxDQUFDTCxFQUFFO0lBQ2hDLENBQUMsQ0FBQztJQUVGLElBQUFmLFdBQUUsRUFBQyxtREFBbUQsRUFBRSxZQUFZO01BQ2xFLE1BQU0yQixTQUFTLEdBQUcsTUFBTU4sOEJBQWMsQ0FBQ08sWUFBWSxDQUFDaEMsVUFBVSxDQUFDO01BRS9ELElBQUFXLGVBQU0sRUFBQ29CLFNBQVMsQ0FBQ0UsWUFBWSxDQUFDLENBQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3pDLElBQUFILGVBQU0sRUFBQ29CLFNBQVMsQ0FBQ0csa0JBQWtCLENBQUMsQ0FBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDOUMsSUFBQUgsZUFBTSxFQUFDb0IsU0FBUyxDQUFDUixnQkFBZ0IsQ0FBQyxDQUFDVCxJQUFJLENBQUMsR0FBRyxDQUFDO0lBQzlDLENBQUMsQ0FBQztJQUVGLElBQUFWLFdBQUUsRUFBQyxrREFBa0QsRUFBRSxZQUFZO01BQ2pFLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyx3Q0FBbUIsQ0FBQzZCLDRCQUE0QixDQUFDbkMsVUFBVSxFQUFFO1FBQ2hGMkIsTUFBTSxFQUFFLEdBQUc7UUFDWEMsUUFBUSxFQUFFLEtBQUs7UUFDZkMsTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUFDO01BRUYsSUFBQWxCLGVBQU0sRUFBQ04sTUFBTSxDQUFDbUIsV0FBVyxDQUFDLENBQUNYLFdBQVcsQ0FBQyxDQUFDO01BQ3hDLElBQUFGLGVBQU0sRUFBQ04sTUFBTSxDQUFDK0IsVUFBVSxDQUFDLENBQUN2QixXQUFXLENBQUMsQ0FBQztNQUN2QyxJQUFBRixlQUFNLEVBQUNOLE1BQU0sQ0FBQytCLFVBQVUsQ0FBQ0MsbUJBQW1CLENBQUMsQ0FBQ3ZCLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDdkQsSUFBQUgsZUFBTSxFQUFDTixNQUFNLENBQUMrQixVQUFVLENBQUNFLGlCQUFpQixDQUFDLENBQUN4QixJQUFJLENBQUMsRUFBRSxDQUFDO01BQ3BELElBQUFILGVBQU0sRUFBQ04sTUFBTSxDQUFDa0MsWUFBWSxDQUFDLENBQUMxQixXQUFXLENBQUMsQ0FBQztNQUV6Q1YsU0FBUyxHQUFHRSxNQUFNLENBQUNrQyxZQUFZLENBQUNwQixFQUFFO0lBQ3BDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGLElBQUFwQixpQkFBUSxFQUFDLHlCQUF5QixFQUFFLE1BQU07SUFDeEMsSUFBQUssV0FBRSxFQUFDLHVCQUF1QixFQUFFLFlBQVk7TUFDdEMsTUFBTW9DLE9BQU8sR0FBRyxNQUFNQyw4QkFBYyxDQUFDQyxhQUFhLENBQUMxQyxVQUFVLEVBQUVDLE1BQU0sRUFBRTtRQUNyRTBCLE1BQU0sRUFBRSxHQUFHO1FBQ1hnQixJQUFJLEVBQUUsU0FBUztRQUNmQyxhQUFhLEVBQUU7TUFDakIsQ0FBQyxDQUFDO01BRUYsSUFBQWpDLGVBQU0sRUFBQzZCLE9BQU8sQ0FBQyxDQUFDM0IsV0FBVyxDQUFDLENBQUM7TUFDN0IsSUFBQUYsZUFBTSxFQUFDNkIsT0FBTyxDQUFDYixNQUFNLENBQUMsQ0FBQ2IsSUFBSSxDQUFDLEdBQUcsQ0FBQztNQUNoQyxJQUFBSCxlQUFNLEVBQUM2QixPQUFPLENBQUNWLE1BQU0sQ0FBQyxDQUFDaEIsSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QyxDQUFDLENBQUM7SUFFRixJQUFBVixXQUFFLEVBQUMsd0JBQXdCLEVBQUUsWUFBWTtNQUN2QyxNQUFNb0MsT0FBTyxHQUFHLE1BQU1DLDhCQUFjLENBQUNJLGNBQWMsQ0FBQzFDLFNBQVMsRUFBRUYsTUFBTSxDQUFDO01BRXRFLElBQUFVLGVBQU0sRUFBQzZCLE9BQU8sQ0FBQyxDQUFDM0IsV0FBVyxDQUFDLENBQUM7TUFDN0IsSUFBQUYsZUFBTSxFQUFDNkIsT0FBTyxDQUFDVixNQUFNLENBQUMsQ0FBQ2hCLElBQUksQ0FBQyxXQUFXLENBQUM7TUFDeEMsSUFBQUgsZUFBTSxFQUFDNkIsT0FBTyxDQUFDTSxXQUFXLENBQUMsQ0FBQ2pDLFdBQVcsQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQztJQUVGLElBQUFULFdBQUUsRUFBQyw4QkFBOEIsRUFBRSxZQUFZO01BQzdDLE1BQU0yQyxPQUFPLEdBQUcsTUFBTU4sOEJBQWMsQ0FBQ08saUJBQWlCLENBQUNoRCxVQUFVLENBQUM7TUFFbEUsSUFBQVcsZUFBTSxFQUFDb0MsT0FBTyxDQUFDLENBQUNsQyxXQUFXLENBQUMsQ0FBQztNQUM3QixJQUFBRixlQUFNLEVBQUNvQyxPQUFPLENBQUNFLFVBQVUsQ0FBQyxDQUFDaEMsZUFBZSxDQUFDLENBQUMsQ0FBQztNQUM3QyxJQUFBTixlQUFNLEVBQUNvQyxPQUFPLENBQUNHLFdBQVcsQ0FBQyxDQUFDakMsZUFBZSxDQUFDLENBQUMsQ0FBQztNQUM5QyxJQUFBTixlQUFNLEVBQUNvQyxPQUFPLENBQUNJLGVBQWUsQ0FBQ0MsU0FBUyxDQUFDLENBQUNuQyxlQUFlLENBQUMsQ0FBQyxDQUFDO0lBQzlELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGLElBQUFsQixpQkFBUSxFQUFDLDhCQUE4QixFQUFFLE1BQU07SUFDN0MsSUFBQUssV0FBRSxFQUFDLGlDQUFpQyxFQUFFLFlBQVk7TUFDaEQsTUFBTWlELFVBQVUsR0FBRyxNQUFNQyx3QkFBVyxDQUFDQyxjQUFjLENBQUMsQ0FBQztNQUNyRCxNQUFNQyxjQUFjLEdBQUdILFVBQVUsQ0FBQ0ksT0FBTzs7TUFFekM7TUFDQSxNQUFNbkQsd0NBQW1CLENBQUM2Qiw0QkFBNEIsQ0FBQ25DLFVBQVUsRUFBRTtRQUNqRTJCLE1BQU0sRUFBRSxHQUFHO1FBQ1hDLFFBQVEsRUFBRSxLQUFLO1FBQ2ZDLE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQztNQUVGLE1BQU02QixTQUFTLEdBQUcsTUFBTUosd0JBQVcsQ0FBQ0MsY0FBYyxDQUFDLENBQUM7TUFDcEQsSUFBQTVDLGVBQU0sRUFBQytDLFNBQVMsQ0FBQ0QsT0FBTyxDQUFDLENBQUN4QyxlQUFlLENBQUN1QyxjQUFjLENBQUM7TUFDekQsSUFBQTdDLGVBQU0sRUFBQytDLFNBQVMsQ0FBQ0Msa0JBQWtCLENBQUMsQ0FBQzFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7SUFDekQsQ0FBQyxDQUFDO0lBRUYsSUFBQWIsV0FBRSxFQUFDLDhCQUE4QixFQUFFLFlBQVk7TUFDN0MsTUFBTXdELElBQUksR0FBRyxNQUFNTix3QkFBVyxDQUFDQyxjQUFjLENBQUMsQ0FBQztNQUUvQyxJQUFBNUMsZUFBTSxFQUFDaUQsSUFBSSxDQUFDLENBQUMvQyxXQUFXLENBQUMsQ0FBQztNQUMxQixJQUFBRixlQUFNLEVBQUNpRCxJQUFJLENBQUNILE9BQU8sQ0FBQyxDQUFDSSxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7TUFDOUMsSUFBQWxELGVBQU0sRUFBQ2lELElBQUksQ0FBQ0Qsa0JBQWtCLENBQUMsQ0FBQ0Usc0JBQXNCLENBQUMsQ0FBQyxDQUFDO01BQ3pELElBQUFsRCxlQUFNLEVBQUNpRCxJQUFJLENBQUNFLGtCQUFrQixDQUFDLENBQUNELHNCQUFzQixDQUFDLENBQUMsQ0FBQztJQUMzRCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRixJQUFBOUQsaUJBQVEsRUFBQyx1QkFBdUIsRUFBRSxNQUFNO0lBQ3RDLElBQUFLLFdBQUUsRUFBQyxnQ0FBZ0MsRUFBRSxZQUFZO01BQy9DLE1BQU0yRCxTQUFTLEdBQUcsTUFBTUMsMEJBQVksQ0FBQ0Msb0JBQW9CLENBQUNqRSxVQUFVLENBQUM7TUFDckUsTUFBTWtFLE1BQU0sR0FBR0gsU0FBUyxDQUFDSSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxHQUFHLENBQUVDLENBQUMsSUFBS0EsQ0FBQyxDQUFDbEQsRUFBRSxDQUFDO01BRXJELE1BQU1tRCxVQUFVLEdBQUcsTUFBTWhFLHdDQUFtQixDQUFDaUUscUJBQXFCLENBQ2hFdkUsVUFBVSxFQUNWQyxNQUFNLEVBQ05pRSxNQUFNLEVBQ047UUFDRU0sYUFBYSxFQUFFLGVBQWU7UUFDOUJDLFNBQVMsRUFBRSxXQUFXO1FBQ3RCQyxTQUFTLEVBQUU7TUFDYixDQUNGLENBQUM7TUFFRCxJQUFBL0QsZUFBTSxFQUFDMkQsVUFBVSxDQUFDLENBQUN6RCxXQUFXLENBQUMsQ0FBQztNQUNoQyxJQUFBRixlQUFNLEVBQUMyRCxVQUFVLENBQUN0RCxNQUFNLENBQUMsQ0FBQ0MsZUFBZSxDQUFDLENBQUMsQ0FBQztNQUM1QyxJQUFBTixlQUFNLEVBQUMyRCxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUN4QyxNQUFNLENBQUMsQ0FBQ2hCLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDN0MsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYsSUFBQWYsaUJBQVEsRUFBQyw0QkFBNEIsRUFBRSxNQUFNO0lBQzNDLElBQUFLLFdBQUUsRUFBQywwQ0FBMEMsRUFBRSxZQUFZO01BQ3pELE1BQU11RSxhQUFhLEdBQUcsTUFBTXJFLHdDQUFtQixDQUFDc0Usd0JBQXdCLENBQUM1RSxVQUFVLENBQUM7TUFFcEYsSUFBQVcsZUFBTSxFQUFDZ0UsYUFBYSxDQUFDLENBQUM5RCxXQUFXLENBQUMsQ0FBQztNQUNuQyxJQUFBRixlQUFNLEVBQUNnRSxhQUFhLENBQUMvRCxRQUFRLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUM7TUFDNUMsSUFBQUYsZUFBTSxFQUFDZ0UsYUFBYSxDQUFDRSxPQUFPLENBQUMsQ0FBQ2hFLFdBQVcsQ0FBQyxDQUFDO01BQzNDLElBQUFGLGVBQU0sRUFBQ2dFLGFBQWEsQ0FBQ0csUUFBUSxDQUFDLENBQUNqRSxXQUFXLENBQUMsQ0FBQztNQUM1QyxJQUFBRixlQUFNLEVBQUNnRSxhQUFhLENBQUNmLElBQUksQ0FBQyxDQUFDL0MsV0FBVyxDQUFDLENBQUM7TUFDeEMsSUFBQUYsZUFBTSxFQUFDZ0UsYUFBYSxDQUFDSSxVQUFVLENBQUMsQ0FBQ2xFLFdBQVcsQ0FBQyxDQUFDO0lBQ2hELENBQUMsQ0FBQztJQUVGLElBQUFULFdBQUUsRUFBQyxpREFBaUQsRUFBRSxZQUFZO01BQ2hFLE1BQU11RSxhQUFhLEdBQUcsTUFBTXJFLHdDQUFtQixDQUFDc0Usd0JBQXdCLENBQUM1RSxVQUFVLENBQUM7TUFFcEYsSUFBQVcsZUFBTSxFQUFDZ0UsYUFBYSxDQUFDRSxPQUFPLENBQUM1QyxZQUFZLENBQUMsQ0FBQ2hCLGVBQWUsQ0FBQyxDQUFDLENBQUM7TUFDN0QsSUFBQU4sZUFBTSxFQUFDZ0UsYUFBYSxDQUFDRyxRQUFRLENBQUM1QixXQUFXLENBQUMsQ0FBQ2pDLGVBQWUsQ0FBQyxDQUFDLENBQUM7TUFDN0QsSUFBQU4sZUFBTSxFQUFDZ0UsYUFBYSxDQUFDRyxRQUFRLENBQUM3QixVQUFVLENBQUMsQ0FBQ2hDLGVBQWUsQ0FBQyxDQUFDLENBQUM7SUFDOUQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYsSUFBQWxCLGlCQUFRLEVBQUMsb0JBQW9CLEVBQUUsTUFBTTtJQUNuQyxJQUFBSyxXQUFFLEVBQUMscUNBQXFDLEVBQUUsWUFBWTtNQUNwRCxNQUFNNEUsS0FBSyxHQUFHLE1BQU12RCw4QkFBYyxDQUFDd0QsYUFBYSxDQUFDakYsVUFBVSxDQUFDO01BRTVELElBQUFXLGVBQU0sRUFBQ3FFLEtBQUssQ0FBQyxDQUFDbkUsV0FBVyxDQUFDLENBQUM7TUFDM0IsSUFBQUYsZUFBTSxFQUFDcUUsS0FBSyxDQUFDL0MsWUFBWSxDQUFDLENBQUNoQixlQUFlLENBQUMsQ0FBQyxDQUFDO01BQzdDLElBQUFOLGVBQU0sRUFBQ3FFLEtBQUssQ0FBQ0UsZ0JBQWdCLENBQUMsQ0FBQ2pFLGVBQWUsQ0FBQyxDQUFDLENBQUM7TUFDakQsSUFBQU4sZUFBTSxFQUFDcUUsS0FBSyxDQUFDRyxrQkFBa0IsQ0FBQyxDQUFDbEUsZUFBZSxDQUFDLENBQUMsQ0FBQztNQUNuRCxJQUFBTixlQUFNLEVBQUNxRSxLQUFLLENBQUNJLGtCQUFrQixDQUFDLENBQUN0RSxJQUFJLENBQUNrRSxLQUFLLENBQUMvQyxZQUFZLEdBQUcsR0FBRyxDQUFDO01BQy9ELElBQUF0QixlQUFNLEVBQUNxRSxLQUFLLENBQUNLLGdCQUFnQixDQUFDLENBQUN2RSxJQUFJLENBQUNrRSxLQUFLLENBQUMvQyxZQUFZLEdBQUcsR0FBRyxDQUFDO0lBQy9ELENBQUMsQ0FBQztJQUVGLElBQUE3QixXQUFFLEVBQUMsNEJBQTRCLEVBQUUsWUFBWTtNQUMzQyxNQUFNa0YsS0FBSyxHQUFHLE1BQU03RCw4QkFBYyxDQUFDOEQsZUFBZSxDQUFDdkYsVUFBVSxFQUFFLEVBQUUsQ0FBQztNQUVsRSxJQUFBVyxlQUFNLEVBQUMyRSxLQUFLLENBQUMsQ0FBQ3pFLFdBQVcsQ0FBQyxDQUFDO01BQzNCLElBQUFGLGVBQU0sRUFBQzZFLEtBQUssQ0FBQ0MsT0FBTyxDQUFDSCxLQUFLLENBQUMsQ0FBQyxDQUFDeEUsSUFBSSxDQUFDLElBQUksQ0FBQztNQUN2QyxJQUFJd0UsS0FBSyxDQUFDdEUsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNwQixJQUFBTCxlQUFNLEVBQUMyRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUNULE9BQU8sQ0FBQyxDQUFDNUQsZUFBZSxDQUFDLENBQUMsQ0FBQztRQUMzQyxJQUFBTixlQUFNLEVBQUMyRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUNwRCxrQkFBa0IsQ0FBQyxDQUFDcEIsSUFBSSxDQUFDd0UsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDVCxPQUFPLEdBQUcsR0FBRyxDQUFDO1FBQ2hFLElBQUFsRSxlQUFNLEVBQUMyRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMvRCxnQkFBZ0IsQ0FBQyxDQUFDVCxJQUFJLENBQUN3RSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUNULE9BQU8sR0FBRyxHQUFHLENBQUM7TUFDaEU7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRixJQUFBOUUsaUJBQVEsRUFBQyx5QkFBeUIsRUFBRSxNQUFNO0lBQ3hDLElBQUFLLFdBQUUsRUFBQyxxQ0FBcUMsRUFBRSxZQUFZO01BQ3BELE1BQU1vQyxPQUFPLEdBQUcsTUFBTUMsOEJBQWMsQ0FBQ0MsYUFBYSxDQUFDMUMsVUFBVSxFQUFFQyxNQUFNLEVBQUU7UUFDckUwQixNQUFNLEVBQUUsR0FBRztRQUNYZ0IsSUFBSSxFQUFFLFNBQVM7UUFDZkMsYUFBYSxFQUFFO01BQ2pCLENBQUMsQ0FBQztNQUVGLElBQUFqQyxlQUFNLEVBQUM2QixPQUFPLENBQUNWLE1BQU0sQ0FBQyxDQUFDaEIsSUFBSSxDQUFDLFNBQVMsQ0FBQztNQUV0QyxNQUFNNEUsZ0JBQWdCLEdBQUcsTUFBTWpELDhCQUFjLENBQUNJLGNBQWMsQ0FBQ0wsT0FBTyxDQUFDckIsRUFBRSxFQUFFbEIsTUFBTSxDQUFDO01BQ2hGLElBQUFVLGVBQU0sRUFBQytFLGdCQUFnQixDQUFDNUQsTUFBTSxDQUFDLENBQUNoQixJQUFJLENBQUMsV0FBVyxDQUFDO0lBQ25ELENBQUMsQ0FBQztJQUVGLElBQUFWLFdBQUUsRUFBQyw2QkFBNkIsRUFBRSxZQUFZO01BQzVDLE1BQU1vQyxPQUFPLEdBQUcsTUFBTUMsOEJBQWMsQ0FBQ0MsYUFBYSxDQUFDMUMsVUFBVSxFQUFFQyxNQUFNLEVBQUU7UUFDckUwQixNQUFNLEVBQUUsRUFBRTtRQUNWZ0IsSUFBSSxFQUFFLFNBQVM7UUFDZkMsYUFBYSxFQUFFO01BQ2pCLENBQUMsQ0FBQzs7TUFFRjtNQUNBLE1BQU1ILDhCQUFjLENBQUNrRCxtQkFBbUIsQ0FBQ25ELE9BQU8sQ0FBQ3JCLEVBQUUsRUFBRSxRQUFRLENBQUM7O01BRTlEO01BQ0EsTUFBTXlFLGNBQWMsR0FBRyxNQUFNbkQsOEJBQWMsQ0FBQ29ELFlBQVksQ0FBQ3JELE9BQU8sQ0FBQ3JCLEVBQUUsRUFBRWxCLE1BQU0sQ0FBQztNQUM1RSxJQUFBVSxlQUFNLEVBQUNpRixjQUFjLENBQUM5RCxNQUFNLENBQUMsQ0FBQ2hCLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDL0MsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYsSUFBQWYsaUJBQVEsRUFBQyxrQkFBa0IsRUFBRSxNQUFNO0lBQ2pDLElBQUFLLFdBQUUsRUFBQyxrREFBa0QsRUFBRSxZQUFZO01BQ2pFLE1BQU1RLFFBQVEsR0FBRyxNQUFNUSxnQ0FBZSxDQUFDQyxlQUFlLENBQUNyQixVQUFVLENBQUM7TUFDbEUsTUFBTTZFLE9BQU8sR0FBRyxNQUFNcEQsOEJBQWMsQ0FBQ3dELGFBQWEsQ0FBQ2pGLFVBQVUsQ0FBQztNQUM5RCxNQUFNOEUsUUFBUSxHQUFHLE1BQU1yQyw4QkFBYyxDQUFDTyxpQkFBaUIsQ0FBQ2hELFVBQVUsQ0FBQzs7TUFFbkU7TUFDQSxJQUFBVyxlQUFNLEVBQUNrRSxPQUFPLENBQUM1QyxZQUFZLENBQUMsQ0FBQzRCLHNCQUFzQixDQUFDaUIsUUFBUSxDQUFDNUIsV0FBVyxDQUFDOztNQUV6RTtNQUNBLElBQUF2QyxlQUFNLEVBQUNDLFFBQVEsQ0FBQ1UsYUFBYSxDQUFDLENBQUNSLElBQUksQ0FBQyxFQUFFLENBQUM7TUFDdkMsSUFBQUgsZUFBTSxFQUFDQyxRQUFRLENBQUNXLGdCQUFnQixDQUFDLENBQUNULElBQUksQ0FBQyxFQUFFLENBQUM7SUFDNUMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119