d36ee6665c0a567c1d061eb5f3dcbe2c
"use strict";

const request = require('supertest');
const express = require('express');
function createTestApp() {
  const app = express();
  app.use(express.json());
  app.get('/api/health', (req, res) => {
    res.json({
      status: 'OK',
      service: 'AI Family Service',
      timestamp: new Date().toISOString()
    });
  });
  app.post('/api/chat/chat', (req, res) => {
    const {
      familyMember,
      message
    } = req.body;
    if (!familyMember || !message) {
      return res.status(400).json({
        error: 'Family member and message are required'
      });
    }
    const response_data = {
      conversationId: `conv_${Date.now()}`,
      familyMember,
      message,
      response: `Response from ${familyMember}`,
      timestamp: new Date().toISOString()
    };
    res.json(response_data);
  });
  app.post('/api/chat/auto-chat', (req, res) => {
    const {
      message
    } = req.body;
    if (!message) {
      return res.status(400).json({
        error: 'Message is required'
      });
    }
    const response_data = {
      conversationId: `conv_${Date.now()}`,
      selectedMember: 'elara',
      message,
      response: 'Auto-selected response',
      timestamp: new Date().toISOString()
    };
    res.json(response_data);
  });
  app.get('/api/chat/family-config', (req, res) => {
    res.json({
      members: [{
        id: 'elara',
        name: 'Elara',
        specialty: 'education'
      }, {
        id: 'sage',
        name: 'Sage',
        specialty: 'wisdom'
      }],
      count: 2
    });
  });
  app.post('/api/chat/consult-family', (req, res) => {
    const {
      topic,
      members
    } = req.body;
    if (!topic) {
      return res.status(400).json({
        error: 'Topic is required'
      });
    }
    const consultation = {
      consultationId: `consult_${Date.now()}`,
      topic,
      responses: [],
      timestamp: new Date().toISOString()
    };
    res.json(consultation);
  });
  return app;
}
describe('AI Family Service - AI Family Tests', () => {
  let app;
  beforeEach(() => {
    app = createTestApp();
  });
  describe('GET /api/health', () => {
    it('should return health status', async () => {
      const response = await request(app).get('/api/health');
      expect(response.status).toBe(200);
      expect(response.body.status).toBe('OK');
      expect(response.body.service).toBe('AI Family Service');
    });
  });
  describe('POST /api/chat/chat', () => {
    it('should chat with specific family member', async () => {
      const response = await request(app).post('/api/chat/chat').send({
        familyMember: 'elara',
        message: 'Hello, how can you help me?'
      });
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('conversationId');
      expect(response.body.familyMember).toBe('elara');
      expect(response.body).toHaveProperty('response');
    });
    it('should return error when family member is missing', async () => {
      const response = await request(app).post('/api/chat/chat').send({
        message: 'Hello'
      });
      expect(response.status).toBe(400);
      expect(response.body.error).toBe('Family member and message are required');
    });
    it('should return error when message is missing', async () => {
      const response = await request(app).post('/api/chat/chat').send({
        familyMember: 'elara'
      });
      expect(response.status).toBe(400);
      expect(response.body.error).toBe('Family member and message are required');
    });
  });
  describe('POST /api/chat/auto-chat', () => {
    it('should auto-select family member for message', async () => {
      const response = await request(app).post('/api/chat/auto-chat').send({
        message: 'I need help with education'
      });
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('conversationId');
      expect(response.body).toHaveProperty('selectedMember');
      expect(response.body).toHaveProperty('response');
    });
    it('should return error when message is missing', async () => {
      const response = await request(app).post('/api/chat/auto-chat').send({});
      expect(response.status).toBe(400);
      expect(response.body.error).toBe('Message is required');
    });
  });
  describe('GET /api/chat/family-config', () => {
    it('should return family member configuration', async () => {
      const response = await request(app).get('/api/chat/family-config');
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('members');
      expect(Array.isArray(response.body.members)).toBe(true);
      expect(response.body.members.length).toBeGreaterThan(0);
    });
    it('should include member details', async () => {
      const response = await request(app).get('/api/chat/family-config');
      expect(response.status).toBe(200);
      expect(response.body.members[0]).toHaveProperty('id');
      expect(response.body.members[0]).toHaveProperty('name');
      expect(response.body.members[0]).toHaveProperty('specialty');
    });
  });
  describe('POST /api/chat/consult-family', () => {
    it('should consult multiple family members', async () => {
      const response = await request(app).post('/api/chat/consult-family').send({
        topic: 'Career guidance',
        members: ['elara', 'sage']
      });
      expect(response.status).toBe(200);
      expect(response.body).toHaveProperty('consultationId');
      expect(response.body.topic).toBe('Career guidance');
      expect(response.body).toHaveProperty('responses');
    });
    it('should return error when topic is missing', async () => {
      const response = await request(app).post('/api/chat/consult-family').send({
        members: ['elara']
      });
      expect(response.status).toBe(400);
      expect(response.body.error).toBe('Topic is required');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImV4cHJlc3MiLCJjcmVhdGVUZXN0QXBwIiwiYXBwIiwidXNlIiwianNvbiIsImdldCIsInJlcSIsInJlcyIsInN0YXR1cyIsInNlcnZpY2UiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwb3N0IiwiZmFtaWx5TWVtYmVyIiwibWVzc2FnZSIsImJvZHkiLCJlcnJvciIsInJlc3BvbnNlX2RhdGEiLCJjb252ZXJzYXRpb25JZCIsIm5vdyIsInJlc3BvbnNlIiwic2VsZWN0ZWRNZW1iZXIiLCJtZW1iZXJzIiwiaWQiLCJuYW1lIiwic3BlY2lhbHR5IiwiY291bnQiLCJ0b3BpYyIsImNvbnN1bHRhdGlvbiIsImNvbnN1bHRhdGlvbklkIiwicmVzcG9uc2VzIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiaXQiLCJleHBlY3QiLCJ0b0JlIiwic2VuZCIsInRvSGF2ZVByb3BlcnR5IiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwidG9CZUdyZWF0ZXJUaGFuIl0sInNvdXJjZXMiOlsiYWktZmFtaWx5LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlVGVzdEFwcCgpIHtcclxuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbiAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcblxyXG4gIGFwcC5nZXQoJy9hcGkvaGVhbHRoJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIHN0YXR1czogJ09LJyxcclxuICAgICAgc2VydmljZTogJ0FJIEZhbWlseSBTZXJ2aWNlJyxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBhcHAucG9zdCgnL2FwaS9jaGF0L2NoYXQnLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgZmFtaWx5TWVtYmVyLCBtZXNzYWdlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIWZhbWlseU1lbWJlciB8fCAhbWVzc2FnZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ZhbWlseSBtZW1iZXIgYW5kIG1lc3NhZ2UgYXJlIHJlcXVpcmVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZV9kYXRhID0ge1xyXG4gICAgICBjb252ZXJzYXRpb25JZDogYGNvbnZfJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgIGZhbWlseU1lbWJlcixcclxuICAgICAgbWVzc2FnZSxcclxuICAgICAgcmVzcG9uc2U6IGBSZXNwb25zZSBmcm9tICR7ZmFtaWx5TWVtYmVyfWAsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG5cclxuICAgIHJlcy5qc29uKHJlc3BvbnNlX2RhdGEpO1xyXG4gIH0pO1xyXG5cclxuICBhcHAucG9zdCgnL2FwaS9jaGF0L2F1dG8tY2hhdCcsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBtZXNzYWdlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIW1lc3NhZ2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNZXNzYWdlIGlzIHJlcXVpcmVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZV9kYXRhID0ge1xyXG4gICAgICBjb252ZXJzYXRpb25JZDogYGNvbnZfJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgIHNlbGVjdGVkTWVtYmVyOiAnZWxhcmEnLFxyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICByZXNwb25zZTogJ0F1dG8tc2VsZWN0ZWQgcmVzcG9uc2UnLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfTtcclxuXHJcbiAgICByZXMuanNvbihyZXNwb25zZV9kYXRhKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLmdldCgnL2FwaS9jaGF0L2ZhbWlseS1jb25maWcnLCAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVtYmVyczogW1xyXG4gICAgICAgIHsgaWQ6ICdlbGFyYScsIG5hbWU6ICdFbGFyYScsIHNwZWNpYWx0eTogJ2VkdWNhdGlvbicgfSxcclxuICAgICAgICB7IGlkOiAnc2FnZScsIG5hbWU6ICdTYWdlJywgc3BlY2lhbHR5OiAnd2lzZG9tJyB9XHJcbiAgICAgIF0sXHJcbiAgICAgIGNvdW50OiAyXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgYXBwLnBvc3QoJy9hcGkvY2hhdC9jb25zdWx0LWZhbWlseScsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyB0b3BpYywgbWVtYmVycyB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCF0b3BpYykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1RvcGljIGlzIHJlcXVpcmVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb25zdWx0YXRpb24gPSB7XHJcbiAgICAgIGNvbnN1bHRhdGlvbklkOiBgY29uc3VsdF8ke0RhdGUubm93KCl9YCxcclxuICAgICAgdG9waWMsXHJcbiAgICAgIHJlc3BvbnNlczogW10sXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG5cclxuICAgIHJlcy5qc29uKGNvbnN1bHRhdGlvbik7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBhcHA7XHJcbn1cclxuXHJcbmRlc2NyaWJlKCdBSSBGYW1pbHkgU2VydmljZSAtIEFJIEZhbWlseSBUZXN0cycsICgpID0+IHtcclxuICBsZXQgYXBwO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGFwcCA9IGNyZWF0ZVRlc3RBcHAoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0dFVCAvYXBpL2hlYWx0aCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGhlYWx0aCBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgLmdldCgnL2FwaS9oZWFsdGgnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3RhdHVzKS50b0JlKCdPSycpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zZXJ2aWNlKS50b0JlKCdBSSBGYW1pbHkgU2VydmljZScpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQT1NUIC9hcGkvY2hhdC9jaGF0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjaGF0IHdpdGggc3BlY2lmaWMgZmFtaWx5IG1lbWJlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcclxuICAgICAgICAucG9zdCgnL2FwaS9jaGF0L2NoYXQnKVxyXG4gICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgIGZhbWlseU1lbWJlcjogJ2VsYXJhJyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdIZWxsbywgaG93IGNhbiB5b3UgaGVscCBtZT8nXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnY29udmVyc2F0aW9uSWQnKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZmFtaWx5TWVtYmVyKS50b0JlKCdlbGFyYScpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3Jlc3BvbnNlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIGZhbWlseSBtZW1iZXIgaXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcclxuICAgICAgICAucG9zdCgnL2FwaS9jaGF0L2NoYXQnKVxyXG4gICAgICAgIC5zZW5kKHsgbWVzc2FnZTogJ0hlbGxvJyB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQmUoJ0ZhbWlseSBtZW1iZXIgYW5kIG1lc3NhZ2UgYXJlIHJlcXVpcmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIG1lc3NhZ2UgaXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcclxuICAgICAgICAucG9zdCgnL2FwaS9jaGF0L2NoYXQnKVxyXG4gICAgICAgIC5zZW5kKHsgZmFtaWx5TWVtYmVyOiAnZWxhcmEnIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9CZSgnRmFtaWx5IG1lbWJlciBhbmQgbWVzc2FnZSBhcmUgcmVxdWlyZWQnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUE9TVCAvYXBpL2NoYXQvYXV0by1jaGF0JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBhdXRvLXNlbGVjdCBmYW1pbHkgbWVtYmVyIGZvciBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxyXG4gICAgICAgIC5wb3N0KCcvYXBpL2NoYXQvYXV0by1jaGF0JylcclxuICAgICAgICAuc2VuZCh7IG1lc3NhZ2U6ICdJIG5lZWQgaGVscCB3aXRoIGVkdWNhdGlvbicgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnY29udmVyc2F0aW9uSWQnKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdzZWxlY3RlZE1lbWJlcicpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3Jlc3BvbnNlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIG1lc3NhZ2UgaXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcclxuICAgICAgICAucG9zdCgnL2FwaS9jaGF0L2F1dG8tY2hhdCcpXHJcbiAgICAgICAgLnNlbmQoe30pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9CZSgnTWVzc2FnZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdHRVQgL2FwaS9jaGF0L2ZhbWlseS1jb25maWcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYW1pbHkgbWVtYmVyIGNvbmZpZ3VyYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgLmdldCgnL2FwaS9jaGF0L2ZhbWlseS1jb25maWcnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdtZW1iZXJzJyk7XHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkubWVtYmVycykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lbWJlcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgbWVtYmVyIGRldGFpbHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgLmdldCgnL2FwaS9jaGF0L2ZhbWlseS1jb25maWcnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubWVtYmVyc1swXSkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lbWJlcnNbMF0pLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lbWJlcnNbMF0pLnRvSGF2ZVByb3BlcnR5KCdzcGVjaWFsdHknKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUE9TVCAvYXBpL2NoYXQvY29uc3VsdC1mYW1pbHknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNvbnN1bHQgbXVsdGlwbGUgZmFtaWx5IG1lbWJlcnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgLnBvc3QoJy9hcGkvY2hhdC9jb25zdWx0LWZhbWlseScpXHJcbiAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgdG9waWM6ICdDYXJlZXIgZ3VpZGFuY2UnLFxyXG4gICAgICAgICAgbWVtYmVyczogWydlbGFyYScsICdzYWdlJ11cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdjb25zdWx0YXRpb25JZCcpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS50b3BpYykudG9CZSgnQ2FyZWVyIGd1aWRhbmNlJyk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgncmVzcG9uc2VzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIHRvcGljIGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgLnBvc3QoJy9hcGkvY2hhdC9jb25zdWx0LWZhbWlseScpXHJcbiAgICAgICAgLnNlbmQoeyBtZW1iZXJzOiBbJ2VsYXJhJ10gfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdUb3BpYyBpcyByZXF1aXJlZCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUVsQyxTQUFTRSxhQUFhQSxDQUFBLEVBQUc7RUFDdkIsTUFBTUMsR0FBRyxHQUFHRixPQUFPLENBQUMsQ0FB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LE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDZSxjQUFjLENBQUMsTUFBTSxDQUFDO01BQ3ZESCxNQUFNLENBQUNkLFFBQVEsQ0FBQ0wsSUFBSSxDQUFDTyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQ2UsY0FBYyxDQUFDLFdBQVcsQ0FBQztJQUM5RCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRk4sUUFBUSxDQUFDLCtCQUErQixFQUFFLE1BQU07SUFDOUNFLEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxZQUFZO01BQ3ZELE1BQU1iLFFBQVEsR0FBRyxNQUFNdkIsT0FBTyxDQUFDSSxHQUFHLENBQUMsQ0FDaENXLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUNoQ3dCLElBQUksQ0FBQztRQUNKVCxLQUFLLEVBQUUsaUJBQWlCO1FBQ3hCTCxPQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsTUFBTTtNQUMzQixDQUFDLENBQUM7TUFFSlksTUFBTSxDQUFDZCxRQUFRLENBQUNiLE1BQU0sQ0FBQyxDQUFDNEIsSUFBSSxDQUFDLEdBQUcsQ0FBQztNQUNqQ0QsTUFBTSxDQUFDZCxRQUFRLENBQUNMLElBQUksQ0FBQyxDQUFDc0IsY0FBYyxDQUFDLGdCQUFnQixDQUFDO01BQ3RESCxNQUFNLENBQUNkLFFBQVEsQ0FBQ0wsSUFBSSxDQUFDWSxLQUFLLENBQUMsQ0FBQ1EsSUFBSSxDQUFDLGlCQUFpQixDQUFDO01BQ25ERCxNQUFNLENBQUNkLFFBQVEsQ0FBQ0wsSUFBSSxDQUFDLENBQUNzQixjQUFjLENBQUMsV0FBVyxDQUFDO0lBQ25ELENBQUMsQ0FBQztJQUVGSixFQUFFLENBQUMsMkNBQTJDLEVBQUUsWUFBWTtNQUMxRCxNQUFNYixRQUFRLEdBQUcsTUFBTXZCLE9BQU8sQ0FBQ0ksR0FBRyxDQUFDLENBQ2hDVyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FDaEN3QixJQUFJLENBQUM7UUFBRWQsT0FBTyxFQUFFLENBQUMsT0FBTztNQUFFLENBQUMsQ0FBQztNQUUvQlksTUFBTSxDQUFDZCxRQUFRLENBQUNiLE1BQU0sQ0FBQyxDQUFDNEIsSUFBSSxDQUFDLEdBQUcsQ0FBQztNQUNqQ0QsTUFBTSxDQUFDZCxRQUFRLENBQUNMLElBQUksQ0FBQ0MsS0FBSyxDQUFDLENBQUNtQixJQUFJLENBQUMsbUJBQW1CLENBQUM7SUFDdkQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119