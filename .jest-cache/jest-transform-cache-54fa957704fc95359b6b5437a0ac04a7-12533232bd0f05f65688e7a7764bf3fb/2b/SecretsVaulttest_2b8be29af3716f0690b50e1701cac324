f58a0317e1968a91560b5e07bd7a7c36
"use strict";

// Mock electron app

// Mock fs/promises
_getJestObj().mock('electron', () => ({
  app: {
    getPath: jest.fn(name => {
      if (name === 'userData') {
        return '/mock/user/data';
      }
      return '/mock/path';
    })
  }
}));
_getJestObj().mock('fs/promises');
var _SecretsVault = require("../SecretsVault");
var fs = _interopRequireWildcard(require("fs/promises"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('SecretsVault', () => {
  let vault;
  const mockProjectPath = '/mock/project';
  beforeEach(() => {
    jest.clearAllMocks();
    vault = new _SecretsVault.SecretsVault(mockProjectPath);

    // Mock fs operations
    fs.readFile.mockImplementation(filePath => {
      if (filePath.includes('.master-key')) {
        // Return a mock 32-byte key
        return Promise.resolve(Buffer.from('a'.repeat(64), 'hex'));
      }
      if (filePath.includes('secrets-vault.json')) {
        return Promise.resolve(JSON.stringify({
          version: '1.0.0',
          secrets: {}
        }));
      }
      throw new Error('File not found');
    });
    fs.writeFile.mockResolvedValue(undefined);
    fs.access.mockResolvedValue(undefined);
    fs.mkdir.mockResolvedValue(undefined);
  });
  describe('initialization', () => {
    it('should initialize vault successfully', async () => {
      await vault.initialize();
      expect(fs.readFile).toHaveBeenCalled();
      expect(fs.access).toHaveBeenCalled();
    });
    it('should generate master key if not exists', async () => {
      fs.readFile.mockImplementation(filePath => {
        if (filePath.includes('.master-key')) {
          throw new Error('File not found');
        }
        return Promise.resolve(JSON.stringify({
          version: '1.0.0',
          secrets: {}
        }));
      });
      await vault.initialize();
      expect(fs.writeFile).toHaveBeenCalledWith(expect.stringContaining('.master-key'), expect.any(Buffer), expect.objectContaining({
        mode: 0o600
      }));
    });
    it('should create vault files if they do not exist', async () => {
      fs.access.mockRejectedValue(new Error('File not found'));
      await vault.initialize();
      expect(fs.mkdir).toHaveBeenCalled();
      expect(fs.writeFile).toHaveBeenCalledWith(expect.stringContaining('secrets-vault.json'), expect.any(String), expect.objectContaining({
        mode: 0o600
      }));
    });
  });
  describe('setSecret', () => {
    beforeEach(async () => {
      await vault.initialize();
    });
    it('should store a secret in global scope', async () => {
      await vault.setSecret('API_KEY', 'secret-value-123', 'global');
      expect(fs.writeFile).toHaveBeenCalledWith(expect.stringContaining('secrets-vault.json'), expect.stringContaining('API_KEY'), expect.objectContaining({
        mode: 0o600
      }));
    });
    it('should store a secret in project scope', async () => {
      await vault.setSecret('DB_PASSWORD', 'db-secret-456', 'project');
      expect(fs.writeFile).toHaveBeenCalledWith(expect.stringContaining('.azstudio'), expect.any(String), expect.objectContaining({
        mode: 0o600
      }));
    });
    it('should throw error if vault not initialized', async () => {
      const uninitializedVault = new _SecretsVault.SecretsVault();
      await expect(uninitializedVault.setSecret('KEY', 'value')).rejects.toThrow('Vault not initialized');
    });
    it('should throw error for project scope without project path', async () => {
      const globalVault = new _SecretsVault.SecretsVault();
      await globalVault.initialize();
      await expect(globalVault.setSecret('KEY', 'value', 'project')).rejects.toThrow('Project vault not available');
    });
    it('should log the write operation', async () => {
      await vault.setSecret('TEST_KEY', 'test-value', 'global');
      const auditLog = vault.getAuditLog();
      expect(auditLog).toHaveLength(1);
      expect(auditLog[0]).toMatchObject({
        operation: 'write',
        key: 'TEST_KEY',
        scope: 'global'
      });
    });
  });
  describe('getSecret', () => {
    beforeEach(async () => {
      await vault.initialize();
    });
    it('should retrieve a stored secret', async () => {
      // First store a secret
      await vault.setSecret('API_KEY', 'secret-value-123', 'global');

      // Mock reading the stored secret
      fs.readFile.mockImplementation(filePath => {
        if (filePath.includes('secrets-vault.json')) {
          // Get the encrypted data from the last writeFile call
          const lastWrite = fs.writeFile.mock.calls.find(call => call[0].includes('secrets-vault.json'));
          return Promise.resolve(lastWrite[1]);
        }
        return Promise.resolve(Buffer.from('a'.repeat(64), 'hex'));
      });
      const value = await vault.getSecret('API_KEY', 'global');
      expect(value).toBe('secret-value-123');
    });
    it('should return null for non-existent secret', async () => {
      const value = await vault.getSecret('NON_EXISTENT', 'global');
      expect(value).toBeNull();
    });
    it('should log the read operation', async () => {
      await vault.setSecret('TEST_KEY', 'test-value', 'global');

      // Mock reading
      fs.readFile.mockImplementation(filePath => {
        if (filePath.includes('secrets-vault.json')) {
          const lastWrite = fs.writeFile.mock.calls.find(call => call[0].includes('secrets-vault.json'));
          return Promise.resolve(lastWrite[1]);
        }
        return Promise.resolve(Buffer.from('a'.repeat(64), 'hex'));
      });
      await vault.getSecret('TEST_KEY', 'global');
      const auditLog = vault.getAuditLog();
      expect(auditLog.some(log => log.operation === 'read')).toBe(true);
    });
  });
  describe('deleteSecret', () => {
    beforeEach(async () => {
      await vault.initialize();
    });
    it('should delete an existing secret', async () => {
      await vault.setSecret('TO_DELETE', 'value', 'global');

      // Mock reading the vault with the secret
      fs.readFile.mockImplementation(filePath => {
        if (filePath.includes('secrets-vault.json')) {
          const lastWrite = fs.writeFile.mock.calls.find(call => call[0].includes('secrets-vault.json'));
          return Promise.resolve(lastWrite[1]);
        }
        return Promise.resolve(Buffer.from('a'.repeat(64), 'hex'));
      });
      const result = await vault.deleteSecret('TO_DELETE', 'global');
      expect(result).toBe(true);
    });
    it('should return false for non-existent secret', async () => {
      const result = await vault.deleteSecret('NON_EXISTENT', 'global');
      expect(result).toBe(false);
    });
    it('should log the delete operation', async () => {
      await vault.setSecret('TO_DELETE', 'value', 'global');
      fs.readFile.mockImplementation(filePath => {
        if (filePath.includes('secrets-vault.json')) {
          const lastWrite = fs.writeFile.mock.calls.find(call => call[0].includes('secrets-vault.json'));
          return Promise.resolve(lastWrite[1]);
        }
        return Promise.resolve(Buffer.from('a'.repeat(64), 'hex'));
      });
      await vault.deleteSecret('TO_DELETE', 'global');
      const auditLog = vault.getAuditLog();
      expect(auditLog.some(log => log.operation === 'delete')).toBe(true);
    });
  });
  describe('listSecrets', () => {
    beforeEach(async () => {
      await vault.initialize();
    });
    it('should list all secret keys in global scope', async () => {
      await vault.setSecret('KEY1', 'value1', 'global');
      await vault.setSecret('KEY2', 'value2', 'global');
      fs.readFile.mockImplementation(filePath => {
        if (filePath.includes('secrets-vault.json') && !filePath.includes('.azstudio')) {
          const lastWrite = fs.writeFile.mock.calls.filter(call => call[0].includes('secrets-vault.json') && !call[0].includes('.azstudio')).pop();
          return Promise.resolve(lastWrite[1]);
        }
        return Promise.resolve(Buffer.from('a'.repeat(64), 'hex'));
      });
      const keys = await vault.listSecrets('global');
      expect(keys).toContain('KEY1');
      expect(keys).toContain('KEY2');
    });
    it('should return empty array for project scope without project path', async () => {
      const globalVault = new _SecretsVault.SecretsVault();
      await globalVault.initialize();
      const keys = await globalVault.listSecrets('project');
      expect(keys).toEqual([]);
    });
  });
  describe('encryption/decryption', () => {
    beforeEach(async () => {
      await vault.initialize();
    });
    it('should encrypt and decrypt data correctly', async () => {
      const originalData = 'sensitive-information-123';
      const encrypted = vault.encrypt(originalData);
      expect(encrypted).toHaveProperty('iv');
      expect(encrypted).toHaveProperty('encryptedData');
      expect(encrypted).toHaveProperty('authTag');
      expect(encrypted.encryptedData).not.toBe(originalData);
      const decrypted = vault.decrypt(encrypted);
      expect(decrypted).toBe(originalData);
    });
    it('should produce different ciphertext for same plaintext', async () => {
      const data = 'test-data';
      const encrypted1 = vault.encrypt(data);
      const encrypted2 = vault.encrypt(data);
      expect(encrypted1.encryptedData).not.toBe(encrypted2.encryptedData);
      expect(encrypted1.iv).not.toBe(encrypted2.iv);
    });
    it('should fail decryption with tampered data', async () => {
      const encrypted = vault.encrypt('test-data');

      // Tamper with encrypted data
      encrypted.encryptedData = encrypted.encryptedData.replace('a', 'b');
      expect(() => vault.decrypt(encrypted)).toThrow();
    });
  });
  describe('audit log', () => {
    beforeEach(async () => {
      await vault.initialize();
    });
    it('should track all operations in audit log', async () => {
      await vault.setSecret('KEY1', 'value1', 'global');
      fs.readFile.mockImplementation(filePath => {
        if (filePath.includes('secrets-vault.json')) {
          const lastWrite = fs.writeFile.mock.calls.find(call => call[0].includes('secrets-vault.json'));
          return Promise.resolve(lastWrite[1]);
        }
        return Promise.resolve(Buffer.from('a'.repeat(64), 'hex'));
      });
      await vault.getSecret('KEY1', 'global');
      await vault.deleteSecret('KEY1', 'global');
      const auditLog = vault.getAuditLog();
      expect(auditLog.length).toBeGreaterThanOrEqual(3);
      expect(auditLog.map(log => log.operation)).toContain('write');
      expect(auditLog.map(log => log.operation)).toContain('read');
      expect(auditLog.map(log => log.operation)).toContain('delete');
    });
    it('should clear audit log', async () => {
      await vault.setSecret('KEY1', 'value1', 'global');
      expect(vault.getAuditLog().length).toBeGreaterThan(0);
      vault.clearAuditLog();
      expect(vault.getAuditLog()).toEqual([]);
    });
    it('should include timestamp in audit entries', async () => {
      const before = new Date();
      await vault.setSecret('KEY1', 'value1', 'global');
      const after = new Date();
      const auditLog = vault.getAuditLog();
      const entry = auditLog[0];
      expect(entry.timestamp).toBeInstanceOf(Date);
      expect(entry.timestamp.getTime()).toBeGreaterThanOrEqual(before.getTime());
      expect(entry.timestamp.getTime()).toBeLessThanOrEqual(after.getTime());
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJhcHAiLCJnZXRQYXRoIiwiamVzdCIsImZuIiwibmFtZSIsIl9TZWNyZXRzVmF1bHQiLCJyZXF1aXJlIiwiZnMiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImRlc2NyaWJlIiwidmF1bHQiLCJtb2NrUHJvamVjdFBhdGgiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIlNlY3JldHNWYXVsdCIsInJlYWRGaWxlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiZmlsZVBhdGgiLCJpbmNsdWRlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwiQnVmZmVyIiwiZnJvbSIsInJlcGVhdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2ZXJzaW9uIiwic2VjcmV0cyIsIkVycm9yIiwid3JpdGVGaWxlIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ1bmRlZmluZWQiLCJhY2Nlc3MiLCJta2RpciIsIml0IiwiaW5pdGlhbGl6ZSIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInN0cmluZ0NvbnRhaW5pbmciLCJhbnkiLCJvYmplY3RDb250YWluaW5nIiwibW9kZSIsIm1vY2tSZWplY3RlZFZhbHVlIiwiU3RyaW5nIiwic2V0U2VjcmV0IiwidW5pbml0aWFsaXplZFZhdWx0IiwicmVqZWN0cyIsInRvVGhyb3ciLCJnbG9iYWxWYXVsdCIsImF1ZGl0TG9nIiwiZ2V0QXVkaXRMb2ciLCJ0b0hhdmVMZW5ndGgiLCJ0b01hdGNoT2JqZWN0Iiwib3BlcmF0aW9uIiwia2V5Iiwic2NvcGUiLCJsYXN0V3JpdGUiLCJjYWxscyIsImZpbmQiLCJ2YWx1ZSIsImdldFNlY3JldCIsInRvQmUiLCJ0b0JlTnVsbCIsInNvbWUiLCJsb2ciLCJyZXN1bHQiLCJkZWxldGVTZWNyZXQiLCJmaWx0ZXIiLCJwb3AiLCJrZXlzIiwibGlzdFNlY3JldHMiLCJ0b0NvbnRhaW4iLCJ0b0VxdWFsIiwib3JpZ2luYWxEYXRhIiwiZW5jcnlwdGVkIiwiZW5jcnlwdCIsInRvSGF2ZVByb3BlcnR5IiwiZW5jcnlwdGVkRGF0YSIsIm5vdCIsImRlY3J5cHRlZCIsImRlY3J5cHQiLCJkYXRhIiwiZW5jcnlwdGVkMSIsImVuY3J5cHRlZDIiLCJpdiIsInJlcGxhY2UiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwibWFwIiwidG9CZUdyZWF0ZXJUaGFuIiwiY2xlYXJBdWRpdExvZyIsImJlZm9yZSIsIkRhdGUiLCJhZnRlciIsImVudHJ5IiwidGltZXN0YW1wIiwidG9CZUluc3RhbmNlT2YiLCJnZXRUaW1lIiwidG9CZUxlc3NUaGFuT3JFcXVhbCJdLCJzb3VyY2VzIjpbIlNlY3JldHNWYXVsdC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlY3JldHNWYXVsdCB9IGZyb20gJy4uL1NlY3JldHNWYXVsdCc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcy9wcm9taXNlcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgYXBwIH0gZnJvbSAnZWxlY3Ryb24nO1xuXG4vLyBNb2NrIGVsZWN0cm9uIGFwcFxuamVzdC5tb2NrKCdlbGVjdHJvbicsICgpID0+ICh7XG4gIGFwcDoge1xuICAgIGdldFBhdGg6IGplc3QuZm4oKG5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKG5hbWUgPT09ICd1c2VyRGF0YScpIHtcbiAgICAgICAgcmV0dXJuICcvbW9jay91c2VyL2RhdGEnO1xuICAgICAgfVxuICAgICAgcmV0dXJuICcvbW9jay9wYXRoJztcbiAgICB9KSxcbiAgfSxcbn0pKTtcblxuLy8gTW9jayBmcy9wcm9taXNlc1xuamVzdC5tb2NrKCdmcy9wcm9taXNlcycpO1xuXG5kZXNjcmliZSgnU2VjcmV0c1ZhdWx0JywgKCkgPT4ge1xuICBsZXQgdmF1bHQ6IFNlY3JldHNWYXVsdDtcbiAgY29uc3QgbW9ja1Byb2plY3RQYXRoID0gJy9tb2NrL3Byb2plY3QnO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIHZhdWx0ID0gbmV3IFNlY3JldHNWYXVsdChtb2NrUHJvamVjdFBhdGgpO1xuICAgIFxuICAgIC8vIE1vY2sgZnMgb3BlcmF0aW9uc1xuICAgIChmcy5yZWFkRmlsZSBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoZmlsZVBhdGg6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCcubWFzdGVyLWtleScpKSB7XG4gICAgICAgIC8vIFJldHVybiBhIG1vY2sgMzItYnl0ZSBrZXlcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShCdWZmZXIuZnJvbSgnYScucmVwZWF0KDY0KSwgJ2hleCcpKTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnc2VjcmV0cy12YXVsdC5qc29uJykpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICBzZWNyZXRzOiB7fSxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIG5vdCBmb3VuZCcpO1xuICAgIH0pO1xuXG4gICAgKGZzLndyaXRlRmlsZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgKGZzLmFjY2VzcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgKGZzLm1rZGlyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2luaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB2YXVsdCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB2YXVsdC5pbml0aWFsaXplKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChmcy5yZWFkRmlsZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KGZzLmFjY2VzcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBtYXN0ZXIga2V5IGlmIG5vdCBleGlzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZnMucmVhZEZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKGZpbGVQYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCcubWFzdGVyLWtleScpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAnMS4wLjAnLCBzZWNyZXRzOiB7fSB9KSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgdmF1bHQuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICBleHBlY3QoZnMud3JpdGVGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJy5tYXN0ZXIta2V5JyksXG4gICAgICAgIGV4cGVjdC5hbnkoQnVmZmVyKSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBtb2RlOiAwbzYwMCB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIHZhdWx0IGZpbGVzIGlmIHRoZXkgZG8gbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGZzLmFjY2VzcyBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRmlsZSBub3QgZm91bmQnKSk7XG5cbiAgICAgIGF3YWl0IHZhdWx0LmluaXRpYWxpemUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZzLm1rZGlyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoZnMud3JpdGVGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ3NlY3JldHMtdmF1bHQuanNvbicpLFxuICAgICAgICBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgbW9kZTogMG82MDAgfSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZXRTZWNyZXQnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB2YXVsdC5pbml0aWFsaXplKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN0b3JlIGEgc2VjcmV0IGluIGdsb2JhbCBzY29wZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHZhdWx0LnNldFNlY3JldCgnQVBJX0tFWScsICdzZWNyZXQtdmFsdWUtMTIzJywgJ2dsb2JhbCcpO1xuICAgICAgXG4gICAgICBleHBlY3QoZnMud3JpdGVGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ3NlY3JldHMtdmF1bHQuanNvbicpLFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnQVBJX0tFWScpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IG1vZGU6IDBvNjAwIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdG9yZSBhIHNlY3JldCBpbiBwcm9qZWN0IHNjb3BlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdmF1bHQuc2V0U2VjcmV0KCdEQl9QQVNTV09SRCcsICdkYi1zZWNyZXQtNDU2JywgJ3Byb2plY3QnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZzLndyaXRlRmlsZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCcuYXpzdHVkaW8nKSxcbiAgICAgICAgZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IG1vZGU6IDBvNjAwIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBpZiB2YXVsdCBub3QgaW5pdGlhbGl6ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1bmluaXRpYWxpemVkVmF1bHQgPSBuZXcgU2VjcmV0c1ZhdWx0KCk7XG4gICAgICBcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgdW5pbml0aWFsaXplZFZhdWx0LnNldFNlY3JldCgnS0VZJywgJ3ZhbHVlJylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdWYXVsdCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIHByb2plY3Qgc2NvcGUgd2l0aG91dCBwcm9qZWN0IHBhdGgnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBnbG9iYWxWYXVsdCA9IG5ldyBTZWNyZXRzVmF1bHQoKTtcbiAgICAgIGF3YWl0IGdsb2JhbFZhdWx0LmluaXRpYWxpemUoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBnbG9iYWxWYXVsdC5zZXRTZWNyZXQoJ0tFWScsICd2YWx1ZScsICdwcm9qZWN0JylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdQcm9qZWN0IHZhdWx0IG5vdCBhdmFpbGFibGUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9nIHRoZSB3cml0ZSBvcGVyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB2YXVsdC5zZXRTZWNyZXQoJ1RFU1RfS0VZJywgJ3Rlc3QtdmFsdWUnLCAnZ2xvYmFsJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGF1ZGl0TG9nID0gdmF1bHQuZ2V0QXVkaXRMb2coKTtcbiAgICAgIGV4cGVjdChhdWRpdExvZykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGF1ZGl0TG9nWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgb3BlcmF0aW9uOiAnd3JpdGUnLFxuICAgICAgICBrZXk6ICdURVNUX0tFWScsXG4gICAgICAgIHNjb3BlOiAnZ2xvYmFsJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0U2VjcmV0JywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdmF1bHQuaW5pdGlhbGl6ZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhIHN0b3JlZCBzZWNyZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBGaXJzdCBzdG9yZSBhIHNlY3JldFxuICAgICAgYXdhaXQgdmF1bHQuc2V0U2VjcmV0KCdBUElfS0VZJywgJ3NlY3JldC12YWx1ZS0xMjMnLCAnZ2xvYmFsJyk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgcmVhZGluZyB0aGUgc3RvcmVkIHNlY3JldFxuICAgICAgKGZzLnJlYWRGaWxlIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKChmaWxlUGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnc2VjcmV0cy12YXVsdC5qc29uJykpIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIGVuY3J5cHRlZCBkYXRhIGZyb20gdGhlIGxhc3Qgd3JpdGVGaWxlIGNhbGxcbiAgICAgICAgICBjb25zdCBsYXN0V3JpdGUgPSAoZnMud3JpdGVGaWxlIGFzIGplc3QuTW9jaykubW9jay5jYWxscy5maW5kKFxuICAgICAgICAgICAgY2FsbCA9PiBjYWxsWzBdLmluY2x1ZGVzKCdzZWNyZXRzLXZhdWx0Lmpzb24nKVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShsYXN0V3JpdGVbMV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoQnVmZmVyLmZyb20oJ2EnLnJlcGVhdCg2NCksICdoZXgnKSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCB2YXVsdC5nZXRTZWNyZXQoJ0FQSV9LRVknLCAnZ2xvYmFsJyk7XG4gICAgICBleHBlY3QodmFsdWUpLnRvQmUoJ3NlY3JldC12YWx1ZS0xMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgZm9yIG5vbi1leGlzdGVudCBzZWNyZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHZhdWx0LmdldFNlY3JldCgnTk9OX0VYSVNURU5UJywgJ2dsb2JhbCcpO1xuICAgICAgZXhwZWN0KHZhbHVlKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgdGhlIHJlYWQgb3BlcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdmF1bHQuc2V0U2VjcmV0KCdURVNUX0tFWScsICd0ZXN0LXZhbHVlJywgJ2dsb2JhbCcpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIHJlYWRpbmdcbiAgICAgIChmcy5yZWFkRmlsZSBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoZmlsZVBhdGg6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoZmlsZVBhdGguaW5jbHVkZXMoJ3NlY3JldHMtdmF1bHQuanNvbicpKSB7XG4gICAgICAgICAgY29uc3QgbGFzdFdyaXRlID0gKGZzLndyaXRlRmlsZSBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgICAgIGNhbGwgPT4gY2FsbFswXS5pbmNsdWRlcygnc2VjcmV0cy12YXVsdC5qc29uJylcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobGFzdFdyaXRlWzFdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEJ1ZmZlci5mcm9tKCdhJy5yZXBlYXQoNjQpLCAnaGV4JykpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IHZhdWx0LmdldFNlY3JldCgnVEVTVF9LRVknLCAnZ2xvYmFsJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGF1ZGl0TG9nID0gdmF1bHQuZ2V0QXVkaXRMb2coKTtcbiAgICAgIGV4cGVjdChhdWRpdExvZy5zb21lKGxvZyA9PiBsb2cub3BlcmF0aW9uID09PSAncmVhZCcpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGVsZXRlU2VjcmV0JywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdmF1bHQuaW5pdGlhbGl6ZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZWxldGUgYW4gZXhpc3Rpbmcgc2VjcmV0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdmF1bHQuc2V0U2VjcmV0KCdUT19ERUxFVEUnLCAndmFsdWUnLCAnZ2xvYmFsJyk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgcmVhZGluZyB0aGUgdmF1bHQgd2l0aCB0aGUgc2VjcmV0XG4gICAgICAoZnMucmVhZEZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKGZpbGVQYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCdzZWNyZXRzLXZhdWx0Lmpzb24nKSkge1xuICAgICAgICAgIGNvbnN0IGxhc3RXcml0ZSA9IChmcy53cml0ZUZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJ3NlY3JldHMtdmF1bHQuanNvbicpXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGxhc3RXcml0ZVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShCdWZmZXIuZnJvbSgnYScucmVwZWF0KDY0KSwgJ2hleCcpKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2YXVsdC5kZWxldGVTZWNyZXQoJ1RPX0RFTEVURScsICdnbG9iYWwnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBmb3Igbm9uLWV4aXN0ZW50IHNlY3JldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZhdWx0LmRlbGV0ZVNlY3JldCgnTk9OX0VYSVNURU5UJywgJ2dsb2JhbCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyB0aGUgZGVsZXRlIG9wZXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHZhdWx0LnNldFNlY3JldCgnVE9fREVMRVRFJywgJ3ZhbHVlJywgJ2dsb2JhbCcpO1xuICAgICAgXG4gICAgICAoZnMucmVhZEZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKGZpbGVQYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCdzZWNyZXRzLXZhdWx0Lmpzb24nKSkge1xuICAgICAgICAgIGNvbnN0IGxhc3RXcml0ZSA9IChmcy53cml0ZUZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJ3NlY3JldHMtdmF1bHQuanNvbicpXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGxhc3RXcml0ZVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShCdWZmZXIuZnJvbSgnYScucmVwZWF0KDY0KSwgJ2hleCcpKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBhd2FpdCB2YXVsdC5kZWxldGVTZWNyZXQoJ1RPX0RFTEVURScsICdnbG9iYWwnKTtcbiAgICAgIFxuICAgICAgY29uc3QgYXVkaXRMb2cgPSB2YXVsdC5nZXRBdWRpdExvZygpO1xuICAgICAgZXhwZWN0KGF1ZGl0TG9nLnNvbWUobG9nID0+IGxvZy5vcGVyYXRpb24gPT09ICdkZWxldGUnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xpc3RTZWNyZXRzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdmF1bHQuaW5pdGlhbGl6ZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsaXN0IGFsbCBzZWNyZXQga2V5cyBpbiBnbG9iYWwgc2NvcGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB2YXVsdC5zZXRTZWNyZXQoJ0tFWTEnLCAndmFsdWUxJywgJ2dsb2JhbCcpO1xuICAgICAgYXdhaXQgdmF1bHQuc2V0U2VjcmV0KCdLRVkyJywgJ3ZhbHVlMicsICdnbG9iYWwnKTtcbiAgICAgIFxuICAgICAgKGZzLnJlYWRGaWxlIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKChmaWxlUGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnc2VjcmV0cy12YXVsdC5qc29uJykgJiYgIWZpbGVQYXRoLmluY2x1ZGVzKCcuYXpzdHVkaW8nKSkge1xuICAgICAgICAgIGNvbnN0IGxhc3RXcml0ZSA9IChmcy53cml0ZUZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzXG4gICAgICAgICAgICAuZmlsdGVyKGNhbGwgPT4gY2FsbFswXS5pbmNsdWRlcygnc2VjcmV0cy12YXVsdC5qc29uJykgJiYgIWNhbGxbMF0uaW5jbHVkZXMoJy5henN0dWRpbycpKVxuICAgICAgICAgICAgLnBvcCgpO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobGFzdFdyaXRlWzFdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEJ1ZmZlci5mcm9tKCdhJy5yZXBlYXQoNjQpLCAnaGV4JykpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGtleXMgPSBhd2FpdCB2YXVsdC5saXN0U2VjcmV0cygnZ2xvYmFsJyk7XG4gICAgICBleHBlY3Qoa2V5cykudG9Db250YWluKCdLRVkxJyk7XG4gICAgICBleHBlY3Qoa2V5cykudG9Db250YWluKCdLRVkyJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3IgcHJvamVjdCBzY29wZSB3aXRob3V0IHByb2plY3QgcGF0aCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGdsb2JhbFZhdWx0ID0gbmV3IFNlY3JldHNWYXVsdCgpO1xuICAgICAgYXdhaXQgZ2xvYmFsVmF1bHQuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICBjb25zdCBrZXlzID0gYXdhaXQgZ2xvYmFsVmF1bHQubGlzdFNlY3JldHMoJ3Byb2plY3QnKTtcbiAgICAgIGV4cGVjdChrZXlzKS50b0VxdWFsKFtdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2VuY3J5cHRpb24vZGVjcnlwdGlvbicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHZhdWx0LmluaXRpYWxpemUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW5jcnlwdCBhbmQgZGVjcnlwdCBkYXRhIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsRGF0YSA9ICdzZW5zaXRpdmUtaW5mb3JtYXRpb24tMTIzJztcbiAgICAgIFxuICAgICAgY29uc3QgZW5jcnlwdGVkID0gdmF1bHQuZW5jcnlwdChvcmlnaW5hbERhdGEpO1xuICAgICAgZXhwZWN0KGVuY3J5cHRlZCkudG9IYXZlUHJvcGVydHkoJ2l2Jyk7XG4gICAgICBleHBlY3QoZW5jcnlwdGVkKS50b0hhdmVQcm9wZXJ0eSgnZW5jcnlwdGVkRGF0YScpO1xuICAgICAgZXhwZWN0KGVuY3J5cHRlZCkudG9IYXZlUHJvcGVydHkoJ2F1dGhUYWcnKTtcbiAgICAgIGV4cGVjdChlbmNyeXB0ZWQuZW5jcnlwdGVkRGF0YSkubm90LnRvQmUob3JpZ2luYWxEYXRhKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGVjcnlwdGVkID0gdmF1bHQuZGVjcnlwdChlbmNyeXB0ZWQpO1xuICAgICAgZXhwZWN0KGRlY3J5cHRlZCkudG9CZShvcmlnaW5hbERhdGEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm9kdWNlIGRpZmZlcmVudCBjaXBoZXJ0ZXh0IGZvciBzYW1lIHBsYWludGV4dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSAndGVzdC1kYXRhJztcbiAgICAgIFxuICAgICAgY29uc3QgZW5jcnlwdGVkMSA9IHZhdWx0LmVuY3J5cHQoZGF0YSk7XG4gICAgICBjb25zdCBlbmNyeXB0ZWQyID0gdmF1bHQuZW5jcnlwdChkYXRhKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGVuY3J5cHRlZDEuZW5jcnlwdGVkRGF0YSkubm90LnRvQmUoZW5jcnlwdGVkMi5lbmNyeXB0ZWREYXRhKTtcbiAgICAgIGV4cGVjdChlbmNyeXB0ZWQxLml2KS5ub3QudG9CZShlbmNyeXB0ZWQyLml2KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmFpbCBkZWNyeXB0aW9uIHdpdGggdGFtcGVyZWQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVuY3J5cHRlZCA9IHZhdWx0LmVuY3J5cHQoJ3Rlc3QtZGF0YScpO1xuICAgICAgXG4gICAgICAvLyBUYW1wZXIgd2l0aCBlbmNyeXB0ZWQgZGF0YVxuICAgICAgZW5jcnlwdGVkLmVuY3J5cHRlZERhdGEgPSBlbmNyeXB0ZWQuZW5jcnlwdGVkRGF0YS5yZXBsYWNlKCdhJywgJ2InKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KCgpID0+IHZhdWx0LmRlY3J5cHQoZW5jcnlwdGVkKSkudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYXVkaXQgbG9nJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdmF1bHQuaW5pdGlhbGl6ZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBhbGwgb3BlcmF0aW9ucyBpbiBhdWRpdCBsb2cnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB2YXVsdC5zZXRTZWNyZXQoJ0tFWTEnLCAndmFsdWUxJywgJ2dsb2JhbCcpO1xuICAgICAgXG4gICAgICAoZnMucmVhZEZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKGZpbGVQYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCdzZWNyZXRzLXZhdWx0Lmpzb24nKSkge1xuICAgICAgICAgIGNvbnN0IGxhc3RXcml0ZSA9IChmcy53cml0ZUZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJ3NlY3JldHMtdmF1bHQuanNvbicpXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGxhc3RXcml0ZVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShCdWZmZXIuZnJvbSgnYScucmVwZWF0KDY0KSwgJ2hleCcpKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBhd2FpdCB2YXVsdC5nZXRTZWNyZXQoJ0tFWTEnLCAnZ2xvYmFsJyk7XG4gICAgICBhd2FpdCB2YXVsdC5kZWxldGVTZWNyZXQoJ0tFWTEnLCAnZ2xvYmFsJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGF1ZGl0TG9nID0gdmF1bHQuZ2V0QXVkaXRMb2coKTtcbiAgICAgIGV4cGVjdChhdWRpdExvZy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMyk7XG4gICAgICBleHBlY3QoYXVkaXRMb2cubWFwKGxvZyA9PiBsb2cub3BlcmF0aW9uKSkudG9Db250YWluKCd3cml0ZScpO1xuICAgICAgZXhwZWN0KGF1ZGl0TG9nLm1hcChsb2cgPT4gbG9nLm9wZXJhdGlvbikpLnRvQ29udGFpbigncmVhZCcpO1xuICAgICAgZXhwZWN0KGF1ZGl0TG9nLm1hcChsb2cgPT4gbG9nLm9wZXJhdGlvbikpLnRvQ29udGFpbignZGVsZXRlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsZWFyIGF1ZGl0IGxvZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHZhdWx0LnNldFNlY3JldCgnS0VZMScsICd2YWx1ZTEnLCAnZ2xvYmFsJyk7XG4gICAgICBleHBlY3QodmF1bHQuZ2V0QXVkaXRMb2coKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgdmF1bHQuY2xlYXJBdWRpdExvZygpO1xuICAgICAgZXhwZWN0KHZhdWx0LmdldEF1ZGl0TG9nKCkpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHRpbWVzdGFtcCBpbiBhdWRpdCBlbnRyaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYmVmb3JlID0gbmV3IERhdGUoKTtcbiAgICAgIGF3YWl0IHZhdWx0LnNldFNlY3JldCgnS0VZMScsICd2YWx1ZTEnLCAnZ2xvYmFsJyk7XG4gICAgICBjb25zdCBhZnRlciA9IG5ldyBEYXRlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGF1ZGl0TG9nID0gdmF1bHQuZ2V0QXVkaXRMb2coKTtcbiAgICAgIGNvbnN0IGVudHJ5ID0gYXVkaXRMb2dbMF07XG4gICAgICBcbiAgICAgIGV4cGVjdChlbnRyeS50aW1lc3RhbXApLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KGVudHJ5LnRpbWVzdGFtcC5nZXRUaW1lKCkpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoYmVmb3JlLmdldFRpbWUoKSk7XG4gICAgICBleHBlY3QoZW50cnkudGltZXN0YW1wLmdldFRpbWUoKSkudG9CZUxlc3NUaGFuT3JFcXVhbChhZnRlci5nZXRUaW1lKCkpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUtBOztBQVlBO0FBWEFBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPO0VBQzNCQyxHQUFHLEVBQUU7SUFDSEMsT0FBTyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBRUMsSUFBWSxJQUFLO01BQ2pDLElBQUlBLElBQUksS0FBSyxVQUFVLEVBQUU7UUFDdkIsT0FBTyxpQkFBaUI7TUFDMUI7TUFDQSxPQUFPLFlBQVk7SUFDckIsQ0FBQztFQUNIO0FBQ0YsQ0FBQyxDQUFDLENBQUM7QUFHSE4sV0FBQSxHQUFLQyxJQUFJLENBQUMsYUFBYSxDQUFDO0FBbEJ4QixJQUFBTSxhQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxFQUFBLEdBQUFDLHVCQUFBLENBQUFGLE9BQUE7QUFBa0MsU0FBQUUsd0JBQUFDLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFILHVCQUFBLFlBQUFBLENBQUFDLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEsSUFBQUEsQ0FBQSxDQUFBSyxVQUFBLFNBQUFMLENBQUEsTUFBQU0sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBQyxPQUFBLEVBQUFWLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVEsQ0FBQSxNQUFBRixDQUFBLEdBQUFMLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFHLENBQUEsQ0FBQUssR0FBQSxDQUFBWCxDQUFBLFVBQUFNLENBQUEsQ0FBQU0sR0FBQSxDQUFBWixDQUFBLEdBQUFNLENBQUEsQ0FBQU8sR0FBQSxDQUFBYixDQUFBLEVBQUFRLENBQUEsZ0JBQUFQLENBQUEsSUFBQUQsQ0FBQSxnQkFBQUMsQ0FBQSxPQUFBYSxjQUFBLENBQUFDLElBQUEsQ0FBQWYsQ0FBQSxFQUFBQyxDQUFBLE9BQUFNLENBQUEsSUFBQUQsQ0FBQSxHQUFBVSxNQUFBLENBQUFDLGNBQUEsS0FBQUQsTUFBQSxDQUFBRSx3QkFBQSxDQUFBbEIsQ0FBQSxFQUFBQyxDQUFBLE9BQUFNLENBQUEsQ0FBQUssR0FBQSxJQUFBTCxDQUFBLENBQUFNLEdBQUEsSUFBQVAsQ0FBQSxDQUFBRSxDQUFBLEVBQUFQLENBQUEsRUFBQU0sQ0FBQSxJQUFBQyxDQUFBLENBQUFQLENBQUEsSUFBQUQsQ0FBQSxDQUFBQyxDQUFBLFdBQUFPLENBQUEsS0FBQVIsQ0FBQSxFQUFBQyxDQUFBO0FBQUEsU0FBQVosWUFBQTtFQUFBO0lBQUFJO0VBQUEsSUFBQUksT0FBQTtFQUFBUixXQUFBLEdBQUFBLENBQUEsS0FBQUksSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQW1CbEMwQixRQUFRLENBQUMsY0FBYyxFQUFFLE1BQU07RUFDN0IsSUFBSUMsS0FBbUI7RUFDdkIsTUFBTUMsZUFBZSxHQUFHLGVBQWU7RUFFdkNDLFVBQVUsQ0FBQyxNQUFNO0lBQ2Y3QixJQUFJLENBQUM4QixhQUFhLENBQUMsQ0FBQztJQUNwQkgsS0FBSyxHQUFHLElBQUlJLDBCQUFZLENBQUNILGVBQWUsQ0FBQzs7SUFFekM7SUFDQ3ZCLEVBQUUsQ0FBQzJCLFFBQVEsQ0FBZUMsa0JBQWtCLENBQUVDLFFBQWdCLElBQUs7TUFDbEUsSUFBSUEsUUFBUSxDQUFDQyxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUU7UUFDcEM7UUFDQSxPQUFPQyxPQUFPLENBQUNDLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7TUFDNUQ7TUFDQSxJQUFJTixRQUFRLENBQUNDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1FBQzNDLE9BQU9DLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDSSxJQUFJLENBQUNDLFNBQVMsQ0FBQztVQUNwQ0MsT0FBTyxFQUFFLE9BQU87VUFDaEJDLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQyxDQUFDLENBQUM7TUFDTDtNQUNBLE1BQU0sSUFBSUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDO0lBQ25DLENBQUMsQ0FBQztJQUVEeEMsRUFBRSxDQUFDeUMsU0FBUyxDQUFlQyxpQkFBaUIsQ0FBQ0MsU0FBUyxDQUFDO0lBQ3ZEM0MsRUFBRSxDQUFDNEMsTUFBTSxDQUFlRixpQkFBaUIsQ0FBQ0MsU0FBUyxDQUFDO0lBQ3BEM0MsRUFBRSxDQUFDNkMsS0FBSyxDQUFlSCxpQkFBaUIsQ0FBQ0MsU0FBUyxDQUFDO0VBQ3RELENBQUMsQ0FBQztFQUVGdEIsUUFBUSxDQUFDLGdCQUFnQixFQUFFLE1BQU07SUFDL0J5QixFQUFFLENBQUMsc0NBQXNDLEVBQUUsWUFBWTtNQUNyRCxNQUFNeEIsS0FBSyxDQUFDeUIsVUFBVSxDQUFDLENBQUM7TUFFeEJDLE1BQU0sQ0FBQ2hELEVBQUUsQ0FBQzJCLFFBQVEsQ0FBQyxDQUFDc0IsZ0JBQWdCLENBQUMsQ0FBQztNQUN0Q0QsTUFBTSxDQUFDaEQsRUFBRSxDQUFDNEMsTUFBTSxDQUFDLENBQUNLLGdCQUFnQixDQUFDLENBQUM7SUFDdEMsQ0FBQyxDQUFDO0lBRUZILEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxZQUFZO01BQ3hEOUMsRUFBRSxDQUFDMkIsUUFBUSxDQUFlQyxrQkFBa0IsQ0FBRUMsUUFBZ0IsSUFBSztRQUNsRSxJQUFJQSxRQUFRLENBQUNDLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRTtVQUNwQyxNQUFNLElBQUlVLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQztRQUNuQztRQUNBLE9BQU9ULE9BQU8sQ0FBQ0MsT0FBTyxDQUFDSSxJQUFJLENBQUNDLFNBQVMsQ0FBQztVQUFFQyxPQUFPLEVBQUUsT0FBTztVQUFFQyxPQUFPLEVBQUUsQ0FBQztRQUFFLENBQUMsQ0FBQyxDQUFDO01BQzNFLENBQUMsQ0FBQztNQUVGLE1BQU1qQixLQUFLLENBQUN5QixVQUFVLENBQUMsQ0FBQztNQUV4QkMsTUFBTSxDQUFDaEQsRUFBRSxDQUFDeUMsU0FBUyxDQUFDLENBQUNTLG9CQUFvQixDQUN2Q0YsTUFBTSxDQUFDRyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsRUFDdENILE1BQU0sQ0FBQ0ksR0FBRyxDQUFDbkIsTUFBTSxDQUFDLEVBQ2xCZSxNQUFNLENBQUNLLGdCQUFnQixDQUFDO1FBQUVDLElBQUksRUFBRTtNQUFNLENBQUMsQ0FDekMsQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGUixFQUFFLENBQUMsZ0RBQWdELEVBQUUsWUFBWTtNQUM5RDlDLEVBQUUsQ0FBQzRDLE1BQU0sQ0FBZVcsaUJBQWlCLENBQUMsSUFBSWYsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7TUFFdkUsTUFBTWxCLEtBQUssQ0FBQ3lCLFVBQVUsQ0FBQyxDQUFDO01BRXhCQyxNQUFNLENBQUNoRCxFQUFFLENBQUM2QyxLQUFLLENBQUMsQ0FBQ0ksZ0JBQWdCLENBQUMsQ0FBQztNQUNuQ0QsTUFBTSxDQUFDaEQsRUFBRSxDQUFDeUMsU0FBUyxDQUFDLENBQUNTLG9CQUFvQixDQUN2Q0YsTUFBTSxDQUFDRyxnQkFBZ0IsQ0FBQyxvQkFBb0IsQ0FBQyxFQUM3Q0gsTUFBTSxDQUFDSSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxFQUNsQlIsTUFBTSxDQUFDSyxnQkFBZ0IsQ0FBQztRQUFFQyxJQUFJLEVBQUU7TUFBTSxDQUFDLENBQ3pDLENBQUM7SUFDSCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRmpDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsTUFBTTtJQUMxQkcsVUFBVSxDQUFDLFlBQVk7TUFDckIsTUFBTUYsS0FBSyxDQUFDeUIsVUFBVSxDQUFDLENBQUM7SUFDMUIsQ0FBQyxDQUFDO0lBRUZELEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxZQUFZO01BQ3RELE1BQU14QixLQUFLLENBQUNtQyxTQUFTLENBQUMsU0FBUyxFQUFFLGtCQUFrQixFQUFFLFFBQVEsQ0FBQztNQUU5RFQsTUFBTSxDQUFDaEQsRUFBRSxDQUFDeUMsU0FBUyxDQUFDLENBQUNTLG9CQUFvQixDQUN2Q0YsTUFBTSxDQUFDRyxnQkFBZ0IsQ0FBQyxvQkFBb0IsQ0FBQyxFQUM3Q0gsTUFBTSxDQUFDRyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsRUFDbENILE1BQU0sQ0FBQ0ssZ0JBQWdCLENBQUM7UUFBRUMsSUFBSSxFQUFFO01BQU0sQ0FBQyxDQUN6QyxDQUFDO0lBQ0gsQ0FBQyxDQUFDO0lBRUZSLEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxZQUFZO01BQ3ZELE1BQU14QixLQUFLLENBQUNtQyxTQUFTLENBQUMsYUFBYSxFQUFFLGVBQWUsRUFBRSxTQUFTLENBQUM7TUFFaEVULE1BQU0sQ0FBQ2hELEVBQUUsQ0FBQ3lDLFNBQVMsQ0FBQyxDQUFDUyxvQkFBb0IsQ0FDdkNGLE1BQU0sQ0FBQ0csZ0JBQWdCLENBQUMsV0FBVyxDQUFDLEVBQ3BDSCxNQUFNLENBQUNJLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEVBQ2xCUixNQUFNLENBQUNLLGdCQUFnQixDQUFDO1FBQUVDLElBQUksRUFBRTtNQUFNLENBQUMsQ0FDekMsQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGUixFQUFFLENBQUMsNkNBQTZDLEVBQUUsWUFBWTtNQUM1RCxNQUFNWSxrQkFBa0IsR0FBRyxJQUFJaEMsMEJBQVksQ0FBQyxDQUFDO01BRTdDLE1BQU1zQixNQUFNLENBQ1ZVLGtCQUFrQixDQUFDRCxTQUFTLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FDN0MsQ0FBQyxDQUFDRSxPQUFPLENBQUNDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztJQUM1QyxDQUFDLENBQUM7SUFFRmQsRUFBRSxDQUFDLDJEQUEyRCxFQUFFLFlBQVk7TUFDMUUsTUFBTWUsV0FBVyxHQUFHLElBQUluQywwQkFBWSxDQUFDLENBQUM7TUFDdEMsTUFBTW1DLFdBQVcsQ0FBQ2QsVUFBVSxDQUFDLENBQUM7TUFFOUIsTUFBTUMsTUFBTSxDQUNWYSxXQUFXLENBQUNKLFNBQVMsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FDakQsQ0FBQyxDQUFDRSxPQUFPLENBQUNDLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztJQUNsRCxDQUFDLENBQUM7SUFFRmQsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLFlBQVk7TUFDL0MsTUFBTXhCLEtBQUssQ0FBQ21DLFNBQVMsQ0FBQyxVQUFVLEVBQUUsWUFBWSxFQUFFLFFBQVEsQ0FBQztNQUV6RCxNQUFNSyxRQUFRLEdBQUd4QyxLQUFLLENBQUN5QyxXQUFXLENBQUMsQ0FBQztNQUNwQ2YsTUFBTSxDQUFDYyxRQUFRLENBQUMsQ0FBQ0UsWUFBWSxDQUFDLENBQUMsQ0FBQztNQUNoQ2hCLE1BQU0sQ0FBQ2MsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUNHLGFBQWEsQ0FBQztRQUNoQ0MsU0FBUyxFQUFFLE9BQU87UUFDbEJDLEdBQUcsRUFBRSxVQUFVO1FBQ2ZDLEtBQUssRUFBRTtNQUNULENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGL0MsUUFBUSxDQUFDLFdBQVcsRUFBRSxNQUFNO0lBQzFCRyxVQUFVLENBQUMsWUFBWTtNQUNyQixNQUFNRixLQUFLLENBQUN5QixVQUFVLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUM7SUFFRkQsRUFBRSxDQUFDLGlDQUFpQyxFQUFFLFlBQVk7TUFDaEQ7TUFDQSxNQUFNeEIsS0FBSyxDQUFDbUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxrQkFBa0IsRUFBRSxRQUFRLENBQUM7O01BRTlEO01BQ0N6RCxFQUFFLENBQUMyQixRQUFRLENBQWVDLGtCQUFrQixDQUFFQyxRQUFnQixJQUFLO1FBQ2xFLElBQUlBLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDLG9CQUFvQixDQUFDLEVBQUU7VUFDM0M7VUFDQSxNQUFNdUMsU0FBUyxHQUFJckUsRUFBRSxDQUFDeUMsU0FBUyxDQUFlakQsSUFBSSxDQUFDOEUsS0FBSyxDQUFDQyxJQUFJLENBQzNEdEQsSUFBSSxJQUFJQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNhLFFBQVEsQ0FBQyxvQkFBb0IsQ0FDL0MsQ0FBQztVQUNELE9BQU9DLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDcUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RDO1FBQ0EsT0FBT3RDLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUNDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztNQUM1RCxDQUFDLENBQUM7TUFFRixNQUFNcUMsS0FBSyxHQUFHLE1BQU1sRCxLQUFLLENBQUNtRCxTQUFTLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQztNQUN4RHpCLE1BQU0sQ0FBQ3dCLEtBQUssQ0FBQyxDQUFDRSxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDeEMsQ0FBQyxDQUFDO0lBRUY1QixFQUFFLENBQUMsNENBQTRDLEVBQUUsWUFBWTtNQUMzRCxNQUFNMEIsS0FBSyxHQUFHLE1BQU1sRCxLQUFLLENBQUNtRCxTQUFTLENBQUMsY0FBYyxFQUFFLFFBQVEsQ0FBQztNQUM3RHpCLE1BQU0sQ0FBQ3dCLEtBQUssQ0FBQyxDQUFDRyxRQUFRLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUM7SUFFRjdCLEVBQUUsQ0FBQywrQkFBK0IsRUFBRSxZQUFZO01BQzlDLE1BQU14QixLQUFLLENBQUNtQyxTQUFTLENBQUMsVUFBVSxFQUFFLFlBQVksRUFBRSxRQUFRLENBQUM7O01BRXpEO01BQ0N6RCxFQUFFLENBQUMyQixRQUFRLENBQWVDLGtCQUFrQixDQUFFQyxRQUFnQixJQUFLO1FBQ2xFLElBQUlBLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDLG9CQUFvQixDQUFDLEVBQUU7VUFDM0MsTUFBTXVDLFNBQVMsR0FBSXJFLEVBQUUsQ0FBQ3lDLFNBQVMsQ0FBZWpELElBQUksQ0FBQzhFLEtBQUssQ0FBQ0MsSUFBSSxDQUMzRHRELElBQUksSUFBSUEsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDYSxRQUFRLENBQUMsb0JBQW9CLENBQy9DLENBQUM7VUFDRCxPQUFPQyxPQUFPLENBQUNDLE9BQU8sQ0FBQ3FDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QztRQUNBLE9BQU90QyxPQUFPLENBQUNDLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7TUFDNUQsQ0FBQyxDQUFDO01BRUYsTUFBTWIsS0FBSyxDQUFDbUQsU0FBUyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUM7TUFFM0MsTUFBTVgsUUFBUSxHQUFHeEMsS0FBSyxDQUFDeUMsV0FBVyxDQUFDLENBQUM7TUFDcENmLE1BQU0sQ0FBQ2MsUUFBUSxDQUFDYyxJQUFJLENBQUNDLEdBQUcsSUFBSUEsR0FBRyxDQUFDWCxTQUFTLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQ1EsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNuRSxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnJELFFBQVEsQ0FBQyxjQUFjLEVBQUUsTUFBTTtJQUM3QkcsVUFBVSxDQUFDLFlBQVk7TUFDckIsTUFBTUYsS0FBSyxDQUFDeUIsVUFBVSxDQUFDLENBQUM7SUFDMUIsQ0FBQyxDQUFDO0lBRUZELEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxZQUFZO01BQ2pELE1BQU14QixLQUFLLENBQUNtQyxTQUFTLENBQUMsV0FBVyxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUM7O01BRXJEO01BQ0N6RCxFQUFFLENBQUMyQixRQUFRLENBQWVDLGtCQUFrQixDQUFFQyxRQUFnQixJQUFLO1FBQ2xFLElBQUlBLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDLG9CQUFvQixDQUFDLEVBQUU7VUFDM0MsTUFBTXVDLFNBQVMsR0FBSXJFLEVBQUUsQ0FBQ3lDLFNBQVMsQ0FBZWpELElBQUksQ0FBQzhFLEtBQUssQ0FBQ0MsSUFBSSxDQUMzRHRELElBQUksSUFBSUEsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDYSxRQUFRLENBQUMsb0JBQW9CLENBQy9DLENBQUM7VUFDRCxPQUFPQyxPQUFPLENBQUNDLE9BQU8sQ0FBQ3FDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QztRQUNBLE9BQU90QyxPQUFPLENBQUNDLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7TUFDNUQsQ0FBQyxDQUFDO01BRUYsTUFBTTJDLE1BQU0sR0FBRyxNQUFNeEQsS0FBSyxDQUFDeUQsWUFBWSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUM7TUFDOUQvQixNQUFNLENBQUM4QixNQUFNLENBQUMsQ0FBQ0osSUFBSSxDQUFDLElBQUksQ0FBQztJQUMzQixDQUFDLENBQUM7SUFFRjVCLEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxZQUFZO01BQzVELE1BQU1nQyxNQUFNLEdBQUcsTUFBTXhELEtBQUssQ0FBQ3lELFlBQVksQ0FBQyxjQUFjLEVBQUUsUUFBUSxDQUFDO01BQ2pFL0IsTUFBTSxDQUFDOEIsTUFBTSxDQUFDLENBQUNKLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDNUIsQ0FBQyxDQUFDO0lBRUY1QixFQUFFLENBQUMsaUNBQWlDLEVBQUUsWUFBWTtNQUNoRCxNQUFNeEIsS0FBSyxDQUFDbUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDO01BRXBEekQsRUFBRSxDQUFDMkIsUUFBUSxDQUFlQyxrQkFBa0IsQ0FBRUMsUUFBZ0IsSUFBSztRQUNsRSxJQUFJQSxRQUFRLENBQUNDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1VBQzNDLE1BQU11QyxTQUFTLEdBQUlyRSxFQUFFLENBQUN5QyxTQUFTLENBQWVqRCxJQUFJLENBQUM4RSxLQUFLLENBQUNDLElBQUksQ0FDM0R0RCxJQUFJLElBQUlBLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ2EsUUFBUSxDQUFDLG9CQUFvQixDQUMvQyxDQUFDO1VBQ0QsT0FBT0MsT0FBTyxDQUFDQyxPQUFPLENBQUNxQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEM7UUFDQSxPQUFPdEMsT0FBTyxDQUFDQyxPQUFPLENBQUNDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO01BQzVELENBQUMsQ0FBQztNQUVGLE1BQU1iLEtBQUssQ0FBQ3lELFlBQVksQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDO01BRS9DLE1BQU1qQixRQUFRLEdBQUd4QyxLQUFLLENBQUN5QyxXQUFXLENBQUMsQ0FBQztNQUNwQ2YsTUFBTSxDQUFDYyxRQUFRLENBQUNjLElBQUksQ0FBQ0MsR0FBRyxJQUFJQSxHQUFHLENBQUNYLFNBQVMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDUSxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3JFLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGckQsUUFBUSxDQUFDLGFBQWEsRUFBRSxNQUFNO0lBQzVCRyxVQUFVLENBQUMsWUFBWTtNQUNyQixNQUFNRixLQUFLLENBQUN5QixVQUFVLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUM7SUFFRkQsRUFBRSxDQUFDLDZDQUE2QyxFQUFFLFlBQVk7TUFDNUQsTUFBTXhCLEtBQUssQ0FBQ21DLFNBQVMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQztNQUNqRCxNQUFNbkMsS0FBSyxDQUFDbUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDO01BRWhEekQsRUFBRSxDQUFDMkIsUUFBUSxDQUFlQyxrQkFBa0IsQ0FBRUMsUUFBZ0IsSUFBSztRQUNsRSxJQUFJQSxRQUFRLENBQUNDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUNELFFBQVEsQ0FBQ0MsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1VBQzlFLE1BQU11QyxTQUFTLEdBQUlyRSxFQUFFLENBQUN5QyxTQUFTLENBQWVqRCxJQUFJLENBQUM4RSxLQUFLLENBQ3JEVSxNQUFNLENBQUMvRCxJQUFJLElBQUlBLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ2EsUUFBUSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQ2IsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDYSxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FDeEZtRCxHQUFHLENBQUMsQ0FBQztVQUNSLE9BQU9sRCxPQUFPLENBQUNDLE9BQU8sQ0FBQ3FDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QztRQUNBLE9BQU90QyxPQUFPLENBQUNDLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7TUFDNUQsQ0FBQyxDQUFDO01BRUYsTUFBTStDLElBQUksR0FBRyxNQUFNNUQsS0FBSyxDQUFDNkQsV0FBVyxDQUFDLFFBQVEsQ0FBQztNQUM5Q25DLE1BQU0sQ0FBQ2tDLElBQUksQ0FBQyxDQUFDRSxTQUFTLENBQUMsTUFBTSxDQUFDO01BQzlCcEMsTUFBTSxDQUFDa0MsSUFBSSxDQUFDLENBQUNFLFNBQVMsQ0FBQyxNQUFNLENBQUM7SUFDaEMsQ0FBQyxDQUFDO0lBRUZ0QyxFQUFFLENBQUMsa0VBQWtFLEVBQUUsWUFBWTtNQUNqRixNQUFNZSxXQUFXLEdBQUcsSUFBSW5DLDBCQUFZLENBQUMsQ0FBQztNQUN0QyxNQUFNbUMsV0FBVyxDQUFDZCxVQUFVLENBQUMsQ0FBQztNQUU5QixNQUFNbUMsSUFBSSxHQUFHLE1BQU1yQixXQUFXLENBQUNzQixXQUFXLENBQUMsU0FBUyxDQUFDO01BQ3JEbkMsTUFBTSxDQUFDa0MsSUFBSSxDQUFDLENBQUNHLE9BQU8sQ0FBQyxFQUFFLENBQUM7SUFDMUIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZoRSxRQUFRLENBQUMsdUJBQXVCLEVBQUUsTUFBTTtJQUN0Q0csVUFBVSxDQUFDLFlBQVk7TUFDckIsTUFBTUYsS0FBSyxDQUFDeUIsVUFBVSxDQUFDLENBQUM7SUFDMUIsQ0FBQyxDQUFDO0lBRUZELEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxZQUFZO01BQzFELE1BQU13QyxZQUFZLEdBQUcsMkJBQTJCO01BRWhELE1BQU1DLFNBQVMsR0FBR2pFLEtBQUssQ0FBQ2tFLE9BQU8sQ0FBQ0YsWUFBWSxDQUFDO01BQzdDdEMsTUFBTSxDQUFDdUMsU0FBUyxDQUFDLENBQUNFLGNBQWMsQ0FBQyxJQUFJLENBQUM7TUFDdEN6QyxNQUFNLENBQUN1QyxTQUFTLENBQUMsQ0FBQ0UsY0FBYyxDQUFDLGVBQWUsQ0FBQztNQUNqRHpDLE1BQU0sQ0FBQ3VDLFNBQVMsQ0FBQyxDQUFDRSxjQUFjLENBQUMsU0FBUyxDQUFDO01BQzNDekMsTUFBTSxDQUFDdUMsU0FBUyxDQUFDRyxhQUFhLENBQUMsQ0FBQ0MsR0FBRyxDQUFDakIsSUFBSSxDQUFDWSxZQUFZLENBQUM7TUFFdEQsTUFBTU0sU0FBUyxHQUFHdEUsS0FBSyxDQUFDdUUsT0FBTyxDQUFDTixTQUFTLENBQUM7TUFDMUN2QyxNQUFNLENBQUM0QyxTQUFTLENBQUMsQ0FBQ2xCLElBQUksQ0FBQ1ksWUFBWSxDQUFDO0lBQ3RDLENBQUMsQ0FBQztJQUVGeEMsRUFBRSxDQUFDLHdEQUF3RCxFQUFFLFlBQVk7TUFDdkUsTUFBTWdELElBQUksR0FBRyxXQUFXO01BRXhCLE1BQU1DLFVBQVUsR0FBR3pFLEtBQUssQ0FBQ2tFLE9BQU8sQ0FBQ00sSUFBSSxDQUFDO01BQ3RDLE1BQU1FLFVBQVUsR0FBRzFFLEtBQUssQ0FBQ2tFLE9BQU8sQ0FBQ00sSUFBSSxDQUFDO01BRXRDOUMsTUFBTSxDQUFDK0MsVUFBVSxDQUFDTCxhQUFhLENBQUMsQ0FBQ0MsR0FBRyxDQUFDakIsSUFBSSxDQUFDc0IsVUFBVSxDQUFDTixhQUFhLENBQUM7TUFDbkUxQyxNQUFNLENBQUMrQyxVQUFVLENBQUNFLEVBQUUsQ0FBQyxDQUFDTixHQUFHLENBQUNqQixJQUFJLENBQUNzQixVQUFVLENBQUNDLEVBQUUsQ0FBQztJQUMvQyxDQUFDLENBQUM7SUFFRm5ELEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxZQUFZO01BQzFELE1BQU15QyxTQUFTLEdBQUdqRSxLQUFLLENBQUNrRSxPQUFPLENBQUMsV0FBVyxDQUFDOztNQUU1QztNQUNBRCxTQUFTLENBQUNHLGFBQWEsR0FBR0gsU0FBUyxDQUFDRyxhQUFhLENBQUNRLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO01BRW5FbEQsTUFBTSxDQUFDLE1BQU0xQixLQUFLLENBQUN1RSxPQUFPLENBQUNOLFNBQVMsQ0FBQyxDQUFDLENBQUMzQixPQUFPLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnZDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsTUFBTTtJQUMxQkcsVUFBVSxDQUFDLFlBQVk7TUFDckIsTUFBTUYsS0FBSyxDQUFDeUIsVUFBVSxDQUFDLENBQUM7SUFDMUIsQ0FBQyxDQUFDO0lBRUZELEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxZQUFZO01BQ3pELE1BQU14QixLQUFLLENBQUNtQyxTQUFTLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUM7TUFFaER6RCxFQUFFLENBQUMyQixRQUFRLENBQWVDLGtCQUFrQixDQUFFQyxRQUFnQixJQUFLO1FBQ2xFLElBQUlBLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDLG9CQUFvQixDQUFDLEVBQUU7VUFDM0MsTUFBTXVDLFNBQVMsR0FBSXJFLEVBQUUsQ0FBQ3lDLFNBQVMsQ0FBZWpELElBQUksQ0FBQzhFLEtBQUssQ0FBQ0MsSUFBSSxDQUMzRHRELElBQUksSUFBSUEsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDYSxRQUFRLENBQUMsb0JBQW9CLENBQy9DLENBQUM7VUFDRCxPQUFPQyxPQUFPLENBQUNDLE9BQU8sQ0FBQ3FDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QztRQUNBLE9BQU90QyxPQUFPLENBQUNDLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7TUFDNUQsQ0FBQyxDQUFDO01BRUYsTUFBTWIsS0FBSyxDQUFDbUQsU0FBUyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUM7TUFDdkMsTUFBTW5ELEtBQUssQ0FBQ3lELFlBQVksQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDO01BRTFDLE1BQU1qQixRQUFRLEdBQUd4QyxLQUFLLENBQUN5QyxXQUFXLENBQUMsQ0FBQztNQUNwQ2YsTUFBTSxDQUFDYyxRQUFRLENBQUNxQyxNQUFNLENBQUMsQ0FBQ0Msc0JBQXNCLENBQUMsQ0FBQyxDQUFDO01BQ2pEcEQsTUFBTSxDQUFDYyxRQUFRLENBQUN1QyxHQUFHLENBQUN4QixHQUFHLElBQUlBLEdBQUcsQ0FBQ1gsU0FBUyxDQUFDLENBQUMsQ0FBQ2tCLFNBQVMsQ0FBQyxPQUFPLENBQUM7TUFDN0RwQyxNQUFNLENBQUNjLFFBQVEsQ0FBQ3VDLEdBQUcsQ0FBQ3hCLEdBQUcsSUFBSUEsR0FBRyxDQUFDWCxTQUFTLENBQUMsQ0FBQyxDQUFDa0IsU0FBUyxDQUFDLE1BQU0sQ0FBQztNQUM1RHBDLE1BQU0sQ0FBQ2MsUUFBUSxDQUFDdUMsR0FBRyxDQUFDeEIsR0FBRyxJQUFJQSxHQUFHLENBQUNYLFNBQVMsQ0FBQyxDQUFDLENBQUNrQixTQUFTLENBQUMsUUFBUSxDQUFDO0lBQ2hFLENBQUMsQ0FBQztJQUVGdEMsRUFBRSxDQUFDLHdCQUF3QixFQUFFLFlBQVk7TUFDdkMsTUFBTXhCLEtBQUssQ0FBQ21DLFNBQVMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQztNQUNqRFQsTUFBTSxDQUFDMUIsS0FBSyxDQUFDeUMsV0FBVyxDQUFDLENBQUMsQ0FBQ29DLE1BQU0sQ0FBQyxDQUFDRyxlQUFlLENBQUMsQ0FBQyxDQUFDO01BRXJEaEYsS0FBSyxDQUFDaUYsYUFBYSxDQUFDLENBQUM7TUFDckJ2RCxNQUFNLENBQUMxQixLQUFLLENBQUN5QyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUNzQixPQUFPLENBQUMsRUFBRSxDQUFDO0lBQ3pDLENBQUMsQ0FBQztJQUVGdkMsRUFBRSxDQUFDLDJDQUEyQyxFQUFFLFlBQVk7TUFDMUQsTUFBTTBELE1BQU0sR0FBRyxJQUFJQyxJQUFJLENBQUMsQ0FBQztNQUN6QixNQUFNbkYsS0FBSyxDQUFDbUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDO01BQ2pELE1BQU1pRCxLQUFLLEdBQUcsSUFBSUQsSUFBSSxDQUFDLENBQUM7TUFFeEIsTUFBTTNDLFFBQVEsR0FBR3hDLEtBQUssQ0FBQ3lDLFdBQVcsQ0FBQyxDQUFDO01BQ3BDLE1BQU00QyxLQUFLLEdBQUc3QyxRQUFRLENBQUMsQ0FBQyxDQUFDO01BRXpCZCxNQUFNLENBQUMyRCxLQUFLLENBQUNDLFNBQVMsQ0FBQyxDQUFDQyxjQUFjLENBQUNKLElBQUksQ0FBQztNQUM1Q3pELE1BQU0sQ0FBQzJELEtBQUssQ0FBQ0MsU0FBUyxDQUFDRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNWLHNCQUFzQixDQUFDSSxNQUFNLENBQUNNLE9BQU8sQ0FBQyxDQUFDLENBQUM7TUFDMUU5RCxNQUFNLENBQUMyRCxLQUFLLENBQUNDLFNBQVMsQ0FBQ0UsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxtQkFBbUIsQ0FBQ0wsS0FBSyxDQUFDSSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==