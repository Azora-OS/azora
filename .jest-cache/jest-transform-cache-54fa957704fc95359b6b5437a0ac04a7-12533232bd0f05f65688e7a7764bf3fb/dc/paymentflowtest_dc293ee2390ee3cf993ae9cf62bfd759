e29b4f6c6b14ec34a094af6d1aaa67b1
"use strict";

const {
  apiClient
} = require('../../packages/api-client');
describe('Payment Flow Integration', () => {
  let userId, token;
  beforeAll(async () => {
    const auth = await apiClient.auth.login('test@azora.world', 'password');
    userId = auth.user.id;
    token = auth.accessToken;
    apiClient.setToken(token);
  });
  test('should create payment intent', async () => {
    const payment = await apiClient.payments.createPayment(50.00, 'usd', userId);
    expect(payment.clientSecret).toBeDefined();
    expect(payment.id).toBeDefined();
  });
  test('should fetch wallet balance', async () => {
    const wallet = await apiClient.wallet.getBalance();
    expect(wallet.balance).toBeGreaterThanOrEqual(0);
  });
  test('should fetch transaction history', async () => {
    const transactions = await apiClient.wallet.getTransactions();
    expect(Array.isArray(transactions)).toBe(true);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcGlDbGllbnQiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJ1c2VySWQiLCJ0b2tlbiIsImJlZm9yZUFsbCIsImF1dGgiLCJsb2dpbiIsInVzZXIiLCJpZCIsImFjY2Vzc1Rva2VuIiwic2V0VG9rZW4iLCJ0ZXN0IiwicGF5bWVudCIsInBheW1lbnRzIiwiY3JlYXRlUGF5bWVudCIsImV4cGVjdCIsImNsaWVudFNlY3JldCIsInRvQmVEZWZpbmVkIiwid2FsbGV0IiwiZ2V0QmFsYW5jZSIsImJhbGFuY2UiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwidHJhbnNhY3Rpb25zIiwiZ2V0VHJhbnNhY3Rpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwidG9CZSJdLCJzb3VyY2VzIjpbInBheW1lbnQtZmxvdy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgYXBpQ2xpZW50IH0gPSByZXF1aXJlKCcuLi8uLi9wYWNrYWdlcy9hcGktY2xpZW50Jyk7XG5cbmRlc2NyaWJlKCdQYXltZW50IEZsb3cgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gIGxldCB1c2VySWQsIHRva2VuO1xuXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgYXV0aCA9IGF3YWl0IGFwaUNsaWVudC5hdXRoLmxvZ2luKCd0ZXN0QGF6b3JhLndvcmxkJywgJ3Bhc3N3b3JkJyk7XG4gICAgdXNlcklkID0gYXV0aC51c2VyLmlkO1xuICAgIHRva2VuID0gYXV0aC5hY2Nlc3NUb2tlbjtcbiAgICBhcGlDbGllbnQuc2V0VG9rZW4odG9rZW4pO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgY3JlYXRlIHBheW1lbnQgaW50ZW50JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHBheW1lbnQgPSBhd2FpdCBhcGlDbGllbnQucGF5bWVudHMuY3JlYXRlUGF5bWVudCg1MC4wMCwgJ3VzZCcsIHVzZXJJZCk7XG4gICAgZXhwZWN0KHBheW1lbnQuY2xpZW50U2VjcmV0KS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdChwYXltZW50LmlkKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgZmV0Y2ggd2FsbGV0IGJhbGFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgd2FsbGV0ID0gYXdhaXQgYXBpQ2xpZW50LndhbGxldC5nZXRCYWxhbmNlKCk7XG4gICAgZXhwZWN0KHdhbGxldC5iYWxhbmNlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgZmV0Y2ggdHJhbnNhY3Rpb24gaGlzdG9yeScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCBhcGlDbGllbnQud2FsbGV0LmdldFRyYW5zYWN0aW9ucygpO1xuICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHRyYW5zYWN0aW9ucykpLnRvQmUodHJ1ZSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTTtFQUFFQTtBQUFVLENBQUMsR0FBR0MsT0FBTyxDQUFDLDJCQUEyQixDQUFDO0FBRTFEQyxRQUFRLENBQUMsMEJBQTBCLEVBQUUsTUFBTTtFQUN6QyxJQUFJQyxNQUFNLEVBQUVDLEtBQUs7RUFFakJDLFNBQVMsQ0FBQyxZQUFZO0lBQ3BCLE1BQU1DLElBQUksR0FBRyxNQUFNTixTQUFTLENBQUNNLElBQUksQ0FBQ0MsS0FBSyxDQUFDLGtCQUFrQixFQUFFLFVBQVUsQ0FBQztJQUN2RUosTUFBTSxHQUFHRyxJQUFJLENBQUNFLElBQUksQ0FBQ0MsRUFBRTtJQUNyQkwsS0FBSyxHQUFHRSxJQUFJLENBQUNJLFdBQVc7SUFDeEJWLFNBQVMsQ0FBQ1csUUFBUSxDQUFDUCxLQUFLLENBQUM7RUFDM0IsQ0FBQyxDQUFDO0VBRUZRLElBQUksQ0FBQyw4QkFBOEIsRUFBRSxZQUFZO0lBQy9DLE1BQU1DLE9BQU8sR0FBRyxNQUFNYixTQUFTLENBQUNjLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUVaLE1BQU0sQ0FBQztJQUM1RWEsTUFBTSxDQUFDSCxPQUFPLENBQUNJLFlBQVksQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBQztJQUMxQ0YsTUFBTSxDQUFDSCxPQUFPLENBQUNKLEVBQUUsQ0FBQyxDQUFDUyxXQUFXLENBQUMsQ0FBQztFQUNsQyxDQUFDLENBQUM7RUFFRk4sSUFBSSxDQUFDLDZCQUE2QixFQUFFLFlBQVk7SUFDOUMsTUFBTU8sTUFBTSxHQUFHLE1BQU1uQixTQUFTLENBQUNtQixNQUFNLENBQUNDLFVBQVUsQ0FBQyxDQUFDO0lBQ2xESixNQUFNLENBQUNHLE1BQU0sQ0FBQ0UsT0FBTyxDQUFDLENBQUNDLHNCQUFzQixDQUFDLENBQUMsQ0FBQztFQUNsRCxDQUFDLENBQUM7RUFFRlYsSUFBSSxDQUFDLGtDQUFrQyxFQUFFLFlBQVk7SUFDbkQsTUFBTVcsWUFBWSxHQUFHLE1BQU12QixTQUFTLENBQUNtQixNQUFNLENBQUNLLGVBQWUsQ0FBQyxDQUFDO0lBQzdEUixNQUFNLENBQUNTLEtBQUssQ0FBQ0MsT0FBTyxDQUFDSCxZQUFZLENBQUMsQ0FBQyxDQUFDSSxJQUFJLENBQUMsSUFBSSxDQUFDO0VBQ2hELENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==