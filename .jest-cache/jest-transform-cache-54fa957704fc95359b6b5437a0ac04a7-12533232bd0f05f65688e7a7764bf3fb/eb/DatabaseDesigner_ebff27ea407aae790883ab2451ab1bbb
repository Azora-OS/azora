ec3705ae17d716f4c1906b57518b7f33
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DatabaseDesigner = void 0;
var path = _interopRequireWildcard(require("path"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
class DatabaseDesigner {
  generateSchema(schema, outputDir) {
    const schemaPath = path.join(outputDir, 'prisma', 'schema.prisma');
    return [{
      path: schemaPath,
      type: 'create',
      content: this.generatePrismaSchema(schema)
    }];
  }
  generateMigration(schema, migrationName, outputDir) {
    const timestamp = new Date().toISOString().replace(/[-:]/g, '').split('.')[0];
    const migrationDir = path.join(outputDir, 'prisma', 'migrations', `${timestamp}_${migrationName}`);
    const migrationPath = path.join(migrationDir, 'migration.sql');
    return [{
      path: migrationPath,
      type: 'create',
      content: this.generateMigrationSQL(schema)
    }];
  }
  generatePrismaSchema(schema) {
    let output = `generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

`;

    // Build relation map for easier lookup (both source and target)
    const relationMap = new Map();
    for (const relation of schema.relations) {
      // Add to source model
      if (!relationMap.has(relation.sourceModel)) {
        relationMap.set(relation.sourceModel, []);
      }
      relationMap.get(relation.sourceModel).push(relation);

      // Add to target model (for reverse relation)
      if (!relationMap.has(relation.targetModel)) {
        relationMap.set(relation.targetModel, []);
      }
      relationMap.get(relation.targetModel).push(relation);
    }

    // Generate models
    for (const model of schema.models) {
      output += `model ${model.name} {\n`;

      // Add fields
      for (const field of model.fields) {
        const required = field.required ? '' : '?';
        const unique = field.unique ? ' @unique' : '';
        const defaultValue = field.default ? ` @default(${field.default})` : '';
        const primaryKey = field.isPrimaryKey ? ' @id' : '';
        output += `  ${field.name.padEnd(12)} ${field.type}${required}${primaryKey}${defaultValue}${unique}\n`;
      }

      // Add relations
      const modelRelations = relationMap.get(model.name) || [];
      const processedRelations = new Set();
      for (const relation of modelRelations) {
        // Avoid duplicates
        if (!processedRelations.has(relation.id)) {
          output += this.generateRelationField(relation, model.name);
          processedRelations.add(relation.id);
        }
      }
      output += `}\n\n`;
    }
    return output;
  }
  generateRelationField(relation, currentModel) {
    const isSource = relation.sourceModel === currentModel;
    const relatedModel = isSource ? relation.targetModel : relation.sourceModel;
    const fieldName = isSource ? relation.sourceField || relatedModel.toLowerCase() : relation.targetField || relation.sourceModel.toLowerCase();
    let output = '';
    if (relation.type === '1:1') {
      if (isSource) {
        output += `  ${fieldName.padEnd(12)} ${relatedModel}? @relation(fields: [${fieldName}Id], references: [id])\n`;
        output += `  ${(fieldName + 'Id').padEnd(12)} String?\n`;
      }
    } else if (relation.type === '1:N') {
      if (isSource) {
        // Source side: array of related models
        output += `  ${fieldName.padEnd(12)} ${relatedModel}[]\n`;
      } else {
        // Target side: single related model with foreign key
        output += `  ${fieldName.padEnd(12)} ${relatedModel}? @relation(fields: [${fieldName}Id], references: [id]${relation.onDelete ? `, onDelete: ${relation.onDelete}` : ''})\n`;
        output += `  ${(fieldName + 'Id').padEnd(12)} String?\n`;
      }
    } else if (relation.type === 'N:M') {
      output += `  ${fieldName.padEnd(12)} ${relatedModel}[]\n`;
    }
    return output;
  }
  generateMigrationSQL(schema) {
    let sql = '-- CreateTable\n';
    for (const model of schema.models) {
      sql += `CREATE TABLE "${model.name}" (\n`;
      const columns = [];
      for (const field of model.fields) {
        const sqlType = this.getSQLType(field.type);
        const notNull = field.required ? ' NOT NULL' : '';
        const unique = field.unique ? ' UNIQUE' : '';
        const primaryKey = field.isPrimaryKey ? ' PRIMARY KEY' : '';
        const defaultValue = field.default ? ` DEFAULT ${this.getSQLDefault(field.default, field.type)}` : '';
        columns.push(`    "${field.name}" ${sqlType}${notNull}${primaryKey}${defaultValue}${unique}`);
      }
      sql += columns.join(',\n');
      sql += '\n);\n\n';
    }

    // Add foreign key constraints
    for (const relation of schema.relations) {
      if (relation.type === '1:1' || relation.type === '1:N') {
        const sourceField = relation.sourceField || relation.targetModel.toLowerCase();
        sql += `-- AddForeignKey\n`;
        sql += `ALTER TABLE "${relation.sourceModel}" ADD CONSTRAINT "${relation.sourceModel}_${sourceField}Id_fkey" `;
        sql += `FOREIGN KEY ("${sourceField}Id") REFERENCES "${relation.targetModel}"("id")`;
        if (relation.onDelete) {
          sql += ` ON DELETE ${relation.onDelete.toUpperCase()}`;
        }
        sql += ';\n\n';
      }
    }
    return sql;
  }
  getSQLType(prismaType) {
    const typeMap = {
      String: 'TEXT',
      Int: 'INTEGER',
      Boolean: 'BOOLEAN',
      DateTime: 'TIMESTAMP(3)',
      Float: 'DOUBLE PRECISION',
      Json: 'JSONB'
    };
    return typeMap[prismaType] || 'TEXT';
  }
  getSQLDefault(defaultValue, type) {
    if (defaultValue === 'now()' || defaultValue === 'cuid()' || defaultValue === 'uuid()') {
      return defaultValue.toUpperCase() + '()';
    }
    if (type === 'String') {
      return `'${defaultValue}'`;
    }
    return defaultValue;
  }
  previewMigration(schema) {
    return this.generateMigrationSQL(schema);
  }
}
exports.DatabaseDesigner = DatabaseDesigner;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXRoIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiRGF0YWJhc2VEZXNpZ25lciIsImdlbmVyYXRlU2NoZW1hIiwic2NoZW1hIiwib3V0cHV0RGlyIiwic2NoZW1hUGF0aCIsImpvaW4iLCJ0eXBlIiwiY29udGVudCIsImdlbmVyYXRlUHJpc21hU2NoZW1hIiwiZ2VuZXJhdGVNaWdyYXRpb24iLCJtaWdyYXRpb25OYW1lIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicmVwbGFjZSIsInNwbGl0IiwibWlncmF0aW9uRGlyIiwibWlncmF0aW9uUGF0aCIsImdlbmVyYXRlTWlncmF0aW9uU1FMIiwib3V0cHV0IiwicmVsYXRpb25NYXAiLCJNYXAiLCJyZWxhdGlvbiIsInJlbGF0aW9ucyIsInNvdXJjZU1vZGVsIiwicHVzaCIsInRhcmdldE1vZGVsIiwibW9kZWwiLCJtb2RlbHMiLCJuYW1lIiwiZmllbGQiLCJmaWVsZHMiLCJyZXF1aXJlZCIsInVuaXF1ZSIsImRlZmF1bHRWYWx1ZSIsInByaW1hcnlLZXkiLCJpc1ByaW1hcnlLZXkiLCJwYWRFbmQiLCJtb2RlbFJlbGF0aW9ucyIsInByb2Nlc3NlZFJlbGF0aW9ucyIsIlNldCIsImlkIiwiZ2VuZXJhdGVSZWxhdGlvbkZpZWxkIiwiYWRkIiwiY3VycmVudE1vZGVsIiwiaXNTb3VyY2UiLCJyZWxhdGVkTW9kZWwiLCJmaWVsZE5hbWUiLCJzb3VyY2VGaWVsZCIsInRvTG93ZXJDYXNlIiwidGFyZ2V0RmllbGQiLCJvbkRlbGV0ZSIsInNxbCIsImNvbHVtbnMiLCJzcWxUeXBlIiwiZ2V0U1FMVHlwZSIsIm5vdE51bGwiLCJnZXRTUUxEZWZhdWx0IiwidG9VcHBlckNhc2UiLCJwcmlzbWFUeXBlIiwidHlwZU1hcCIsIlN0cmluZyIsIkludCIsIkJvb2xlYW4iLCJEYXRlVGltZSIsIkZsb2F0IiwiSnNvbiIsInByZXZpZXdNaWdyYXRpb24iLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiRGF0YWJhc2VEZXNpZ25lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGaWxlQ2hhbmdlIH0gZnJvbSAnLi9DaGFuZ2VzZXRNYW5hZ2VyJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGF0YWJhc2VNb2RlbCB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZmllbGRzOiBNb2RlbEZpZWxkW107XG4gIHJlbGF0aW9ucz86IE1vZGVsUmVsYXRpb25bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbEZpZWxkIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiAnU3RyaW5nJyB8ICdJbnQnIHwgJ0Jvb2xlYW4nIHwgJ0RhdGVUaW1lJyB8ICdGbG9hdCcgfCAnSnNvbic7XG4gIHJlcXVpcmVkOiBib29sZWFuO1xuICB1bmlxdWU/OiBib29sZWFuO1xuICBkZWZhdWx0Pzogc3RyaW5nO1xuICBpc1ByaW1hcnlLZXk/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsUmVsYXRpb24ge1xuICBpZDogc3RyaW5nO1xuICBzb3VyY2VNb2RlbDogc3RyaW5nO1xuICB0YXJnZXRNb2RlbDogc3RyaW5nO1xuICB0eXBlOiAnMToxJyB8ICcxOk4nIHwgJ046TSc7XG4gIHNvdXJjZUZpZWxkPzogc3RyaW5nO1xuICB0YXJnZXRGaWVsZD86IHN0cmluZztcbiAgb25EZWxldGU/OiAnQ2FzY2FkZScgfCAnU2V0TnVsbCcgfCAnUmVzdHJpY3QnIHwgJ05vQWN0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZVNjaGVtYSB7XG4gIG1vZGVsczogRGF0YWJhc2VNb2RlbFtdO1xuICByZWxhdGlvbnM6IE1vZGVsUmVsYXRpb25bXTtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlRGVzaWduZXIge1xuICBnZW5lcmF0ZVNjaGVtYShzY2hlbWE6IERhdGFiYXNlU2NoZW1hLCBvdXRwdXREaXI6IHN0cmluZyk6IEZpbGVDaGFuZ2VbXSB7XG4gICAgY29uc3Qgc2NoZW1hUGF0aCA9IHBhdGguam9pbihvdXRwdXREaXIsICdwcmlzbWEnLCAnc2NoZW1hLnByaXNtYScpO1xuXG4gICAgcmV0dXJuIFt7XG4gICAgICBwYXRoOiBzY2hlbWFQYXRoLFxuICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICBjb250ZW50OiB0aGlzLmdlbmVyYXRlUHJpc21hU2NoZW1hKHNjaGVtYSksXG4gICAgfV07XG4gIH1cblxuICBnZW5lcmF0ZU1pZ3JhdGlvbihzY2hlbWE6IERhdGFiYXNlU2NoZW1hLCBtaWdyYXRpb25OYW1lOiBzdHJpbmcsIG91dHB1dERpcjogc3RyaW5nKTogRmlsZUNoYW5nZVtdIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWy06XS9nLCAnJykuc3BsaXQoJy4nKVswXTtcbiAgICBjb25zdCBtaWdyYXRpb25EaXIgPSBwYXRoLmpvaW4ob3V0cHV0RGlyLCAncHJpc21hJywgJ21pZ3JhdGlvbnMnLCBgJHt0aW1lc3RhbXB9XyR7bWlncmF0aW9uTmFtZX1gKTtcbiAgICBjb25zdCBtaWdyYXRpb25QYXRoID0gcGF0aC5qb2luKG1pZ3JhdGlvbkRpciwgJ21pZ3JhdGlvbi5zcWwnKTtcblxuICAgIHJldHVybiBbe1xuICAgICAgcGF0aDogbWlncmF0aW9uUGF0aCxcbiAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgY29udGVudDogdGhpcy5nZW5lcmF0ZU1pZ3JhdGlvblNRTChzY2hlbWEpLFxuICAgIH1dO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVByaXNtYVNjaGVtYShzY2hlbWE6IERhdGFiYXNlU2NoZW1hKTogc3RyaW5nIHtcbiAgICBsZXQgb3V0cHV0ID0gYGdlbmVyYXRvciBjbGllbnQge1xuICBwcm92aWRlciA9IFwicHJpc21hLWNsaWVudC1qc1wiXG59XG5cbmRhdGFzb3VyY2UgZGIge1xuICBwcm92aWRlciA9IFwicG9zdGdyZXNxbFwiXG4gIHVybCAgICAgID0gZW52KFwiREFUQUJBU0VfVVJMXCIpXG59XG5cbmA7XG5cbiAgICAvLyBCdWlsZCByZWxhdGlvbiBtYXAgZm9yIGVhc2llciBsb29rdXAgKGJvdGggc291cmNlIGFuZCB0YXJnZXQpXG4gICAgY29uc3QgcmVsYXRpb25NYXAgPSBuZXcgTWFwPHN0cmluZywgTW9kZWxSZWxhdGlvbltdPigpO1xuICAgIGZvciAoY29uc3QgcmVsYXRpb24gb2Ygc2NoZW1hLnJlbGF0aW9ucykge1xuICAgICAgLy8gQWRkIHRvIHNvdXJjZSBtb2RlbFxuICAgICAgaWYgKCFyZWxhdGlvbk1hcC5oYXMocmVsYXRpb24uc291cmNlTW9kZWwpKSB7XG4gICAgICAgIHJlbGF0aW9uTWFwLnNldChyZWxhdGlvbi5zb3VyY2VNb2RlbCwgW10pO1xuICAgICAgfVxuICAgICAgcmVsYXRpb25NYXAuZ2V0KHJlbGF0aW9uLnNvdXJjZU1vZGVsKSEucHVzaChyZWxhdGlvbik7XG4gICAgICBcbiAgICAgIC8vIEFkZCB0byB0YXJnZXQgbW9kZWwgKGZvciByZXZlcnNlIHJlbGF0aW9uKVxuICAgICAgaWYgKCFyZWxhdGlvbk1hcC5oYXMocmVsYXRpb24udGFyZ2V0TW9kZWwpKSB7XG4gICAgICAgIHJlbGF0aW9uTWFwLnNldChyZWxhdGlvbi50YXJnZXRNb2RlbCwgW10pO1xuICAgICAgfVxuICAgICAgcmVsYXRpb25NYXAuZ2V0KHJlbGF0aW9uLnRhcmdldE1vZGVsKSEucHVzaChyZWxhdGlvbik7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgbW9kZWxzXG4gICAgZm9yIChjb25zdCBtb2RlbCBvZiBzY2hlbWEubW9kZWxzKSB7XG4gICAgICBvdXRwdXQgKz0gYG1vZGVsICR7bW9kZWwubmFtZX0ge1xcbmA7XG5cbiAgICAgIC8vIEFkZCBmaWVsZHNcbiAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgbW9kZWwuZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHJlcXVpcmVkID0gZmllbGQucmVxdWlyZWQgPyAnJyA6ICc/JztcbiAgICAgICAgY29uc3QgdW5pcXVlID0gZmllbGQudW5pcXVlID8gJyBAdW5pcXVlJyA6ICcnO1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBmaWVsZC5kZWZhdWx0ID8gYCBAZGVmYXVsdCgke2ZpZWxkLmRlZmF1bHR9KWAgOiAnJztcbiAgICAgICAgY29uc3QgcHJpbWFyeUtleSA9IGZpZWxkLmlzUHJpbWFyeUtleSA/ICcgQGlkJyA6ICcnO1xuICAgICAgICBcbiAgICAgICAgb3V0cHV0ICs9IGAgICR7ZmllbGQubmFtZS5wYWRFbmQoMTIpfSAke2ZpZWxkLnR5cGV9JHtyZXF1aXJlZH0ke3ByaW1hcnlLZXl9JHtkZWZhdWx0VmFsdWV9JHt1bmlxdWV9XFxuYDtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHJlbGF0aW9uc1xuICAgICAgY29uc3QgbW9kZWxSZWxhdGlvbnMgPSByZWxhdGlvbk1hcC5nZXQobW9kZWwubmFtZSkgfHwgW107XG4gICAgICBjb25zdCBwcm9jZXNzZWRSZWxhdGlvbnMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCByZWxhdGlvbiBvZiBtb2RlbFJlbGF0aW9ucykge1xuICAgICAgICAvLyBBdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgIGlmICghcHJvY2Vzc2VkUmVsYXRpb25zLmhhcyhyZWxhdGlvbi5pZCkpIHtcbiAgICAgICAgICBvdXRwdXQgKz0gdGhpcy5nZW5lcmF0ZVJlbGF0aW9uRmllbGQocmVsYXRpb24sIG1vZGVsLm5hbWUpO1xuICAgICAgICAgIHByb2Nlc3NlZFJlbGF0aW9ucy5hZGQocmVsYXRpb24uaWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG91dHB1dCArPSBgfVxcblxcbmA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWxhdGlvbkZpZWxkKHJlbGF0aW9uOiBNb2RlbFJlbGF0aW9uLCBjdXJyZW50TW9kZWw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaXNTb3VyY2UgPSByZWxhdGlvbi5zb3VyY2VNb2RlbCA9PT0gY3VycmVudE1vZGVsO1xuICAgIGNvbnN0IHJlbGF0ZWRNb2RlbCA9IGlzU291cmNlID8gcmVsYXRpb24udGFyZ2V0TW9kZWwgOiByZWxhdGlvbi5zb3VyY2VNb2RlbDtcbiAgICBjb25zdCBmaWVsZE5hbWUgPSBpc1NvdXJjZSBcbiAgICAgID8gKHJlbGF0aW9uLnNvdXJjZUZpZWxkIHx8IHJlbGF0ZWRNb2RlbC50b0xvd2VyQ2FzZSgpKVxuICAgICAgOiAocmVsYXRpb24udGFyZ2V0RmllbGQgfHwgcmVsYXRpb24uc291cmNlTW9kZWwudG9Mb3dlckNhc2UoKSk7XG5cbiAgICBsZXQgb3V0cHV0ID0gJyc7XG5cbiAgICBpZiAocmVsYXRpb24udHlwZSA9PT0gJzE6MScpIHtcbiAgICAgIGlmIChpc1NvdXJjZSkge1xuICAgICAgICBvdXRwdXQgKz0gYCAgJHtmaWVsZE5hbWUucGFkRW5kKDEyKX0gJHtyZWxhdGVkTW9kZWx9PyBAcmVsYXRpb24oZmllbGRzOiBbJHtmaWVsZE5hbWV9SWRdLCByZWZlcmVuY2VzOiBbaWRdKVxcbmA7XG4gICAgICAgIG91dHB1dCArPSBgICAkeyhmaWVsZE5hbWUgKyAnSWQnKS5wYWRFbmQoMTIpfSBTdHJpbmc/XFxuYDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlbGF0aW9uLnR5cGUgPT09ICcxOk4nKSB7XG4gICAgICBpZiAoaXNTb3VyY2UpIHtcbiAgICAgICAgLy8gU291cmNlIHNpZGU6IGFycmF5IG9mIHJlbGF0ZWQgbW9kZWxzXG4gICAgICAgIG91dHB1dCArPSBgICAke2ZpZWxkTmFtZS5wYWRFbmQoMTIpfSAke3JlbGF0ZWRNb2RlbH1bXVxcbmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUYXJnZXQgc2lkZTogc2luZ2xlIHJlbGF0ZWQgbW9kZWwgd2l0aCBmb3JlaWduIGtleVxuICAgICAgICBvdXRwdXQgKz0gYCAgJHtmaWVsZE5hbWUucGFkRW5kKDEyKX0gJHtyZWxhdGVkTW9kZWx9PyBAcmVsYXRpb24oZmllbGRzOiBbJHtmaWVsZE5hbWV9SWRdLCByZWZlcmVuY2VzOiBbaWRdJHtyZWxhdGlvbi5vbkRlbGV0ZSA/IGAsIG9uRGVsZXRlOiAke3JlbGF0aW9uLm9uRGVsZXRlfWAgOiAnJ30pXFxuYDtcbiAgICAgICAgb3V0cHV0ICs9IGAgICR7KGZpZWxkTmFtZSArICdJZCcpLnBhZEVuZCgxMil9IFN0cmluZz9cXG5gO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVsYXRpb24udHlwZSA9PT0gJ046TScpIHtcbiAgICAgIG91dHB1dCArPSBgICAke2ZpZWxkTmFtZS5wYWRFbmQoMTIpfSAke3JlbGF0ZWRNb2RlbH1bXVxcbmA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVNaWdyYXRpb25TUUwoc2NoZW1hOiBEYXRhYmFzZVNjaGVtYSk6IHN0cmluZyB7XG4gICAgbGV0IHNxbCA9ICctLSBDcmVhdGVUYWJsZVxcbic7XG5cbiAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHNjaGVtYS5tb2RlbHMpIHtcbiAgICAgIHNxbCArPSBgQ1JFQVRFIFRBQkxFIFwiJHttb2RlbC5uYW1lfVwiIChcXG5gO1xuXG4gICAgICBjb25zdCBjb2x1bW5zOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBtb2RlbC5maWVsZHMpIHtcbiAgICAgICAgY29uc3Qgc3FsVHlwZSA9IHRoaXMuZ2V0U1FMVHlwZShmaWVsZC50eXBlKTtcbiAgICAgICAgY29uc3Qgbm90TnVsbCA9IGZpZWxkLnJlcXVpcmVkID8gJyBOT1QgTlVMTCcgOiAnJztcbiAgICAgICAgY29uc3QgdW5pcXVlID0gZmllbGQudW5pcXVlID8gJyBVTklRVUUnIDogJyc7XG4gICAgICAgIGNvbnN0IHByaW1hcnlLZXkgPSBmaWVsZC5pc1ByaW1hcnlLZXkgPyAnIFBSSU1BUlkgS0VZJyA6ICcnO1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBmaWVsZC5kZWZhdWx0ID8gYCBERUZBVUxUICR7dGhpcy5nZXRTUUxEZWZhdWx0KGZpZWxkLmRlZmF1bHQsIGZpZWxkLnR5cGUpfWAgOiAnJztcbiAgICAgICAgXG4gICAgICAgIGNvbHVtbnMucHVzaChgICAgIFwiJHtmaWVsZC5uYW1lfVwiICR7c3FsVHlwZX0ke25vdE51bGx9JHtwcmltYXJ5S2V5fSR7ZGVmYXVsdFZhbHVlfSR7dW5pcXVlfWApO1xuICAgICAgfVxuXG4gICAgICBzcWwgKz0gY29sdW1ucy5qb2luKCcsXFxuJyk7XG4gICAgICBzcWwgKz0gJ1xcbik7XFxuXFxuJztcbiAgICB9XG5cbiAgICAvLyBBZGQgZm9yZWlnbiBrZXkgY29uc3RyYWludHNcbiAgICBmb3IgKGNvbnN0IHJlbGF0aW9uIG9mIHNjaGVtYS5yZWxhdGlvbnMpIHtcbiAgICAgIGlmIChyZWxhdGlvbi50eXBlID09PSAnMToxJyB8fCByZWxhdGlvbi50eXBlID09PSAnMTpOJykge1xuICAgICAgICBjb25zdCBzb3VyY2VGaWVsZCA9IHJlbGF0aW9uLnNvdXJjZUZpZWxkIHx8IHJlbGF0aW9uLnRhcmdldE1vZGVsLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHNxbCArPSBgLS0gQWRkRm9yZWlnbktleVxcbmA7XG4gICAgICAgIHNxbCArPSBgQUxURVIgVEFCTEUgXCIke3JlbGF0aW9uLnNvdXJjZU1vZGVsfVwiIEFERCBDT05TVFJBSU5UIFwiJHtyZWxhdGlvbi5zb3VyY2VNb2RlbH1fJHtzb3VyY2VGaWVsZH1JZF9ma2V5XCIgYDtcbiAgICAgICAgc3FsICs9IGBGT1JFSUdOIEtFWSAoXCIke3NvdXJjZUZpZWxkfUlkXCIpIFJFRkVSRU5DRVMgXCIke3JlbGF0aW9uLnRhcmdldE1vZGVsfVwiKFwiaWRcIilgO1xuICAgICAgICBpZiAocmVsYXRpb24ub25EZWxldGUpIHtcbiAgICAgICAgICBzcWwgKz0gYCBPTiBERUxFVEUgJHtyZWxhdGlvbi5vbkRlbGV0ZS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgICAgIH1cbiAgICAgICAgc3FsICs9ICc7XFxuXFxuJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3FsO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTUUxUeXBlKHByaXNtYVR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgdHlwZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIFN0cmluZzogJ1RFWFQnLFxuICAgICAgSW50OiAnSU5URUdFUicsXG4gICAgICBCb29sZWFuOiAnQk9PTEVBTicsXG4gICAgICBEYXRlVGltZTogJ1RJTUVTVEFNUCgzKScsXG4gICAgICBGbG9hdDogJ0RPVUJMRSBQUkVDSVNJT04nLFxuICAgICAgSnNvbjogJ0pTT05CJyxcbiAgICB9O1xuICAgIHJldHVybiB0eXBlTWFwW3ByaXNtYVR5cGVdIHx8ICdURVhUJztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U1FMRGVmYXVsdChkZWZhdWx0VmFsdWU6IHN0cmluZywgdHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoZGVmYXVsdFZhbHVlID09PSAnbm93KCknIHx8IGRlZmF1bHRWYWx1ZSA9PT0gJ2N1aWQoKScgfHwgZGVmYXVsdFZhbHVlID09PSAndXVpZCgpJykge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZS50b1VwcGVyQ2FzZSgpICsgJygpJztcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdTdHJpbmcnKSB7XG4gICAgICByZXR1cm4gYCcke2RlZmF1bHRWYWx1ZX0nYDtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIHByZXZpZXdNaWdyYXRpb24oc2NoZW1hOiBEYXRhYmFzZVNjaGVtYSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVNaWdyYXRpb25TUUwoc2NoZW1hKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxJQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFBNkIsU0FBQUQsd0JBQUFFLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFKLHVCQUFBLFlBQUFBLENBQUFFLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEsSUFBQUEsQ0FBQSxDQUFBSyxVQUFBLFNBQUFMLENBQUEsTUFBQU0sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBQyxPQUFBLEVBQUFWLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVEsQ0FBQSxNQUFBRixDQUFBLEdBQUFMLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFHLENBQUEsQ0FBQUssR0FBQSxDQUFBWCxDQUFBLFVBQUFNLENBQUEsQ0FBQU0sR0FBQSxDQUFBWixDQUFBLEdBQUFNLENBQUEsQ0FBQU8sR0FBQSxDQUFBYixDQUFBLEVBQUFRLENBQUEsZ0JBQUFQLENBQUEsSUFBQUQsQ0FBQSxnQkFBQUMsQ0FBQSxPQUFBYSxjQUFBLENBQUFDLElBQUEsQ0FBQWYsQ0FBQSxFQUFBQyxDQUFBLE9BQUFNLENBQUEsSUFBQUQsQ0FBQSxHQUFBVSxNQUFBLENBQUFDLGNBQUEsS0FBQUQsTUFBQSxDQUFBRSx3QkFBQSxDQUFBbEIsQ0FBQSxFQUFBQyxDQUFBLE9BQUFNLENBQUEsQ0FBQUssR0FBQSxJQUFBTCxDQUFBLENBQUFNLEdBQUEsSUFBQVAsQ0FBQSxDQUFBRSxDQUFB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