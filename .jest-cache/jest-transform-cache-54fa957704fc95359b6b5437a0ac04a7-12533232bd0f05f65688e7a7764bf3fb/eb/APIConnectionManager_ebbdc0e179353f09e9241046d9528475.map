{"version":3,"names":["path","_interopRequireWildcard","require","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","APIConnectionManager","generateReactQueryHook","options","outputDir","changes","hookPath","join","toKebabCase","hookName","push","type","content","generateHookContent","endpoint","connection","operation","generateQueryHook","generateMutationHook","_connection","functionName","toCamelCase","queryKey","generateQueryKey","fetchFunction","generateFetchFunction","generateTypeDefinitions","generateHookParameters","getResponseType","toPascalCase","generateFetchParams","hasOptimistic","optimisticUpdate","getRequestType","generateOptimisticUpdate","getResourceName","onSuccess","onError","id","hasRequestBody","includes","method","params","generatePathParams","interpolatePath","requiresAuth","types","requestSchema","schemaToTypeFields","responseSchema","schema","entries","map","key","value","inferTypeFromSchema","optional","items","typeMap","string","number","boolean","date","any","resourceName","pathParams","extractPathParams","length","match","matches","m","substring","p","replace","generateConnectedComponent","componentId","componentPath","generateComponentWithHook","componentName","isQuery","str","_","c","toUpperCase","pascal","charAt","toLowerCase","slice","exports"],"sources":["APIConnectionManager.ts"],"sourcesContent":["import { FileChange } from './ChangesetManager';\nimport * as path from 'path';\n\nexport interface APIEndpoint {\n  id: string;\n  method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';\n  path: string;\n  requestSchema?: Record<string, any>;\n  responseSchema?: Record<string, any>;\n  requiresAuth?: boolean;\n}\n\nexport interface APIConnection {\n  componentId: string;\n  endpointId: string;\n  operation: 'query' | 'mutation';\n  onSuccess?: string; // Callback function name\n  onError?: string; // Error handler function name\n  optimisticUpdate?: boolean;\n}\n\nexport interface ReactQueryHookOptions {\n  hookName: string;\n  endpoint: APIEndpoint;\n  connection: APIConnection;\n  includeOptimisticUpdates?: boolean;\n}\n\nexport class APIConnectionManager {\n  /**\n   * Generate React Query hooks for API connections\n   */\n  generateReactQueryHook(options: ReactQueryHookOptions, outputDir: string): FileChange[] {\n    const changes: FileChange[] = [];\n    const hookPath = path.join(outputDir, 'hooks', `${this.toKebabCase(options.hookName)}.ts`);\n    \n    changes.push({\n      path: hookPath,\n      type: 'create',\n      content: this.generateHookContent(options),\n    });\n\n    return changes;\n  }\n\n  /**\n   * Generate hook content based on operation type\n   */\n  private generateHookContent(options: ReactQueryHookOptions): string {\n    const { hookName, endpoint, connection } = options;\n    \n    if (connection.operation === 'query') {\n      return this.generateQueryHook(hookName, endpoint, connection);\n    } else {\n      return this.generateMutationHook(hookName, endpoint, connection);\n    }\n  }\n\n  /**\n   * Generate a React Query useQuery hook\n   */\n  private generateQueryHook(hookName: string, endpoint: APIEndpoint, _connection: APIConnection): string {\n    const functionName = this.toCamelCase(hookName);\n    const queryKey = this.generateQueryKey(endpoint);\n    const fetchFunction = this.generateFetchFunction(endpoint);\n    \n    return `import { useQuery, UseQueryOptions } from '@tanstack/react-query';\n\n${this.generateTypeDefinitions(endpoint)}\n\n${fetchFunction}\n\nexport function ${functionName}(\n  ${this.generateHookParameters(endpoint)},\n  options?: Omit<UseQueryOptions<${this.getResponseType(endpoint)}, Error>, 'queryKey' | 'queryFn'>\n) {\n  return useQuery({\n    queryKey: ${queryKey},\n    queryFn: () => fetch${this.toPascalCase(hookName)}(${this.generateFetchParams(endpoint)}),\n    ...options,\n  });\n}\n\n// Usage example:\n// const { data, isLoading, error, refetch } = ${functionName}();\n`;\n  }\n\n  /**\n   * Generate a React Query useMutation hook\n   */\n  private generateMutationHook(hookName: string, endpoint: APIEndpoint, connection: APIConnection): string {\n    const functionName = this.toCamelCase(hookName);\n    const fetchFunction = this.generateFetchFunction(endpoint);\n    const hasOptimistic = connection.optimisticUpdate;\n    \n    return `import { useMutation, useQueryClient, UseMutationOptions } from '@tanstack/react-query';\n\n${this.generateTypeDefinitions(endpoint)}\n\n${fetchFunction}\n\nexport function ${functionName}(\n  options?: UseMutationOptions<${this.getResponseType(endpoint)}, Error, ${this.getRequestType(endpoint)}>\n) {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: fetch${this.toPascalCase(hookName)},\n    ${hasOptimistic ? this.generateOptimisticUpdate(endpoint) : ''}\n    onSuccess: (data) => {\n      // Invalidate and refetch related queries\n      queryClient.invalidateQueries({ queryKey: ['${this.getResourceName(endpoint)}'] });\n      ${connection.onSuccess ? `options?.onSuccess?.(data);` : ''}\n    },\n    onError: (error) => {\n      console.error('Mutation error:', error);\n      ${connection.onError ? `options?.onError?.(error);` : ''}\n    },\n    ...options,\n  });\n}\n\n// Usage example:\n// const mutation = ${functionName}();\n// mutation.mutate(${this.getRequestType(endpoint) !== 'void' ? '{ /* data */ }' : ''});\n`;\n  }\n\n  /**\n   * Generate fetch function for API endpoint\n   */\n  private generateFetchFunction(endpoint: APIEndpoint): string {\n    const functionName = `fetch${this.toPascalCase(endpoint.id)}`;\n    const hasRequestBody = ['POST', 'PUT', 'PATCH'].includes(endpoint.method);\n    const params = hasRequestBody ? `data: ${this.getRequestType(endpoint)}` : this.generatePathParams(endpoint);\n    \n    return `async function ${functionName}(${params}): Promise<${this.getResponseType(endpoint)}> {\n  const response = await fetch(\\`\\${process.env.NEXT_PUBLIC_API_URL || ''}${this.interpolatePath(endpoint.path)}\\`, {\n    method: '${endpoint.method}',\n    headers: {\n      'Content-Type': 'application/json',\n      ${endpoint.requiresAuth ? `'Authorization': \\`Bearer \\${localStorage.getItem('token')}\\`,` : ''}\n    },\n    ${hasRequestBody ? 'body: JSON.stringify(data),' : ''}\n  });\n\n  if (!response.ok) {\n    throw new Error(\\`API error: \\${response.status} \\${response.statusText}\\`);\n  }\n\n  return response.json();\n}\n`;\n  }\n\n  /**\n   * Generate TypeScript type definitions from schemas\n   */\n  private generateTypeDefinitions(endpoint: APIEndpoint): string {\n    const types: string[] = [];\n    \n    if (endpoint.requestSchema) {\n      types.push(`export interface ${this.toPascalCase(endpoint.id)}Request {\n  ${this.schemaToTypeFields(endpoint.requestSchema)}\n}`);\n    }\n    \n    if (endpoint.responseSchema) {\n      types.push(`export interface ${this.toPascalCase(endpoint.id)}Response {\n  ${this.schemaToTypeFields(endpoint.responseSchema)}\n}`);\n    }\n    \n    return types.join('\\n\\n');\n  }\n\n  /**\n   * Convert schema object to TypeScript interface fields\n   */\n  private schemaToTypeFields(schema: Record<string, any>): string {\n    return Object.entries(schema)\n      .map(([key, value]) => {\n        const type = this.inferTypeFromSchema(value);\n        const optional = value.optional ? '?' : '';\n        return `  ${key}${optional}: ${type};`;\n      })\n      .join('\\n');\n  }\n\n  /**\n   * Infer TypeScript type from schema definition\n   */\n  private inferTypeFromSchema(value: any): string {\n    if (typeof value === 'string') {\n      return value; // Already a type string\n    }\n    \n    if (value.type === 'array') {\n      return `${this.inferTypeFromSchema(value.items)}[]`;\n    }\n    \n    if (value.type === 'object') {\n      return 'Record<string, any>'; // Simplified for now\n    }\n    \n    const typeMap: Record<string, string> = {\n      string: 'string',\n      number: 'number',\n      boolean: 'boolean',\n      date: 'Date',\n      any: 'any',\n    };\n    \n    return typeMap[value.type] || 'any';\n  }\n\n  /**\n   * Generate query key for React Query\n   */\n  private generateQueryKey(endpoint: APIEndpoint): string {\n    const resourceName = this.getResourceName(endpoint);\n    const pathParams = this.extractPathParams(endpoint.path);\n    \n    if (pathParams.length > 0) {\n      return `['${resourceName}', ${pathParams.join(', ')}]`;\n    }\n    \n    return `['${resourceName}']`;\n  }\n\n  /**\n   * Extract resource name from endpoint path\n   */\n  private getResourceName(endpoint: APIEndpoint): string {\n    // Extract first non-api path segment as resource name\n    const match = endpoint.path.match(/^\\/(?:api\\/)?([^\\/]+)/);\n    return match ? match[1] : 'resource';\n  }\n\n  /**\n   * Extract path parameters from endpoint path\n   */\n  private extractPathParams(path: string): string[] {\n    const matches = path.match(/:(\\w+)/g);\n    return matches ? matches.map(m => m.substring(1)) : [];\n  }\n\n  /**\n   * Generate path parameters for function signature\n   */\n  private generatePathParams(endpoint: APIEndpoint): string {\n    const params = this.extractPathParams(endpoint.path);\n    return params.map(p => `${p}: string | number`).join(', ');\n  }\n\n  /**\n   * Interpolate path parameters in endpoint path\n   */\n  private interpolatePath(path: string): string {\n    return path.replace(/:(\\w+)/g, '${$1}');\n  }\n\n  /**\n   * Generate fetch function parameters\n   */\n  private generateFetchParams(endpoint: APIEndpoint): string {\n    const params = this.extractPathParams(endpoint.path);\n    return params.join(', ');\n  }\n\n  /**\n   * Generate hook parameters\n   */\n  private generateHookParameters(endpoint: APIEndpoint): string {\n    const params = this.extractPathParams(endpoint.path);\n    if (params.length === 0) return '';\n    return params.map(p => `${p}: string | number`).join(', ');\n  }\n\n  /**\n   * Get request type name\n   */\n  private getRequestType(endpoint: APIEndpoint): string {\n    if (!endpoint.requestSchema) return 'void';\n    return `${this.toPascalCase(endpoint.id)}Request`;\n  }\n\n  /**\n   * Get response type name\n   */\n  private getResponseType(endpoint: APIEndpoint): string {\n    if (!endpoint.responseSchema) return 'any';\n    return `${this.toPascalCase(endpoint.id)}Response`;\n  }\n\n  /**\n   * Generate optimistic update logic\n   */\n  private generateOptimisticUpdate(endpoint: APIEndpoint): string {\n    const resourceName = this.getResourceName(endpoint);\n    \n    return `onMutate: async (newData) => {\n      // Cancel outgoing refetches\n      await queryClient.cancelQueries({ queryKey: ['${resourceName}'] });\n\n      // Snapshot previous value\n      const previousData = queryClient.getQueryData(['${resourceName}']);\n\n      // Optimistically update\n      queryClient.setQueryData(['${resourceName}'], (old: any) => {\n        // Implement optimistic update logic based on your data structure\n        return newData;\n      });\n\n      // Return context with snapshot\n      return { previousData };\n    },\n    onError: (err, newData, context) => {\n      // Rollback on error\n      if (context?.previousData) {\n        queryClient.setQueryData(['${resourceName}'], context.previousData);\n      }\n    },`;\n  }\n\n  /**\n   * Generate component with API connection\n   */\n  generateConnectedComponent(\n    componentId: string,\n    endpoint: APIEndpoint,\n    connection: APIConnection,\n    outputDir: string\n  ): FileChange[] {\n    const changes: FileChange[] = [];\n    const componentPath = path.join(outputDir, 'components', `${this.toKebabCase(componentId)}.tsx`);\n    const hookName = `use${this.toPascalCase(endpoint.id)}`;\n    \n    // Generate the hook first\n    changes.push(...this.generateReactQueryHook({\n      hookName,\n      endpoint,\n      connection,\n    }, outputDir));\n    \n    // Generate component that uses the hook\n    changes.push({\n      path: componentPath,\n      type: 'create',\n      content: this.generateComponentWithHook(componentId, hookName, connection),\n    });\n    \n    return changes;\n  }\n\n  /**\n   * Generate component code that uses the API hook\n   */\n  private generateComponentWithHook(componentId: string, hookName: string, connection: APIConnection): string {\n    const componentName = this.toPascalCase(componentId);\n    const isQuery = connection.operation === 'query';\n    \n    if (isQuery) {\n      return `'use client';\n\nimport React from 'react';\nimport { ${this.toCamelCase(hookName)} } from '@/hooks/${this.toKebabCase(hookName)}';\n\nexport default function ${componentName}() {\n  const { data, isLoading, error, refetch } = ${this.toCamelCase(hookName)}();\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n        <p className=\"text-red-800\">Error: {error.message}</p>\n        <button \n          onClick={() => refetch()}\n          className=\"mt-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4\">\n      {/* Render your data here */}\n      <pre className=\"bg-gray-100 p-4 rounded-md overflow-auto\">\n        {JSON.stringify(data, null, 2)}\n      </pre>\n    </div>\n  );\n}\n`;\n    } else {\n      return `'use client';\n\nimport React from 'react';\nimport { ${this.toCamelCase(hookName)} } from '@/hooks/${this.toKebabCase(hookName)}';\n\nexport default function ${componentName}() {\n  const mutation = ${this.toCamelCase(hookName)}();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    // Collect form data and call mutation\n    mutation.mutate({\n      // Add your data here\n    });\n  };\n\n  return (\n    <div className=\"p-4\">\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* Add your form fields here */}\n        \n        <button \n          type=\"submit\"\n          disabled={mutation.isPending}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\"\n        >\n          {mutation.isPending ? 'Submitting...' : 'Submit'}\n        </button>\n\n        {mutation.isError && (\n          <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n            <p className=\"text-red-800\">Error: {mutation.error.message}</p>\n          </div>\n        )}\n\n        {mutation.isSuccess && (\n          <div className=\"bg-green-50 border border-green-200 rounded-md p-4\">\n            <p className=\"text-green-800\">Success!</p>\n          </div>\n        )}\n      </form>\n    </div>\n  );\n}\n`;\n    }\n  }\n\n  /**\n   * Convert string to PascalCase\n   */\n  private toPascalCase(str: string): string {\n    return str.replace(/[-_\\s:]+(.)?/g, (_, c) => c ? c.toUpperCase() : '')\n      .replace(/^[a-z]/, c => c.toUpperCase());\n  }\n\n  /**\n   * Convert string to camelCase\n   */\n  private toCamelCase(str: string): string {\n    const pascal = this.toPascalCase(str);\n    return pascal.charAt(0).toLowerCase() + pascal.slice(1);\n  }\n\n  /**\n   * Convert string to kebab-case\n   */\n  private toKebabCase(str: string): string {\n    return str\n      .replace(/([a-z])([A-Z])/g, '$1-$2')\n      .replace(/[\\s_:]+/g, '-')\n      .toLowerCase();\n  }\n}\n"],"mappings":"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","ignoreList":[]}