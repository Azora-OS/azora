{"version":3,"names":["_supertest","_interopRequireDefault","require","_client","e","__esModule","default","BASE_URL","process","env","API_URL","prisma","PrismaClient","describe","premiumStudentId","freeStudentId","premiumCourseId","freeCourseId","beforeAll","premiumCourseResponse","request","post","send","title","description","tier","instructorId","language","body","data","id","freeCourseResponse","premiumResponse","email","name","freeResponse","afterAll","$disconnect","it","response","courseId","expect","status","toBe","success","error","toContain","premiumEnrollmentId","enrollmentResponse","studentId","question","toHaveProperty","response1","response2","get","Array","isArray","length","toBeGreaterThan","query","topic","resources","internalCount","filter","r","source","externalCount","total","internalRatio","externalRatio","toBeGreaterThanOrEqual","toBeLessThanOrEqual","detailedAnalytics","tutoringUsage","resourcesAccessed","learningPath","i","courseResponse","successCount","failCount","features","price","monthlyResponse","monthlyPrice","annualPrice","toBeLessThan","supportTier","downgradeStudentId","studentResponse","put","premiumEnrollments","courses","c"],"sources":["student-premium.e2e.test.ts"],"sourcesContent":["/**\r\n * End-to-End Premium Student Features Tests\r\n * Tests premium tier features and access control\r\n */\r\n\r\nimport request from 'supertest';\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst BASE_URL = process.env.API_URL || 'http://localhost:3020';\r\nconst prisma = new PrismaClient();\r\n\r\ndescribe('E2E: Premium Student Features', () => {\r\n  let premiumStudentId: string;\r\n  let freeStudentId: string;\r\n  let premiumCourseId: string;\r\n  let freeCourseId: string;\r\n\r\n  beforeAll(async () => {\r\n    // Create premium course\r\n    const premiumCourseResponse = await request(BASE_URL)\r\n      .post('/api/v1/courses')\r\n      .send({\r\n        title: 'Premium Course',\r\n        description: 'Premium course for testing',\r\n        tier: 'premium',\r\n        instructorId: 'test-instructor',\r\n        language: 'en',\r\n      });\r\n\r\n    premiumCourseId = premiumCourseResponse.body.data.id;\r\n\r\n    // Create free course\r\n    const freeCourseResponse = await request(BASE_URL)\r\n      .post('/api/v1/courses')\r\n      .send({\r\n        title: 'Free Course',\r\n        description: 'Free course for testing',\r\n        tier: 'free',\r\n        instructorId: 'test-instructor',\r\n        language: 'en',\r\n      });\r\n\r\n    freeCourseId = freeCourseResponse.body.data.id;\r\n\r\n    // Create premium student\r\n    const premiumResponse = await request(BASE_URL)\r\n      .post('/api/v1/enrollments')\r\n      .send({\r\n        email: 'premium@example.com',\r\n        name: 'Premium Student',\r\n        tier: 'premium',\r\n      });\r\n\r\n    premiumStudentId = premiumResponse.body.data.id;\r\n\r\n    // Create free student\r\n    const freeResponse = await request(BASE_URL)\r\n      .post('/api/v1/enrollments')\r\n      .send({\r\n        email: 'free@example.com',\r\n        name: 'Free Student',\r\n        tier: 'free',\r\n      });\r\n\r\n    freeStudentId = freeResponse.body.data.id;\r\n  });\r\n\r\n  afterAll(async () => {\r\n    await prisma.$disconnect();\r\n  });\r\n\r\n  describe('Premium Course Access', () => {\r\n    it('should allow premium student to enroll in premium course', async () => {\r\n      const response = await request(BASE_URL)\r\n        .post(`/api/v1/enrollments/${premiumStudentId}/courses`)\r\n        .send({\r\n          courseId: premiumCourseId,\r\n        });\r\n\r\n      expect(response.status).toBe(201);\r\n      expect(response.body.success).toBe(true);\r\n    });\r\n\r\n    it('should prevent free student from enrolling in premium course', async () => {\r\n      const response = await request(BASE_URL)\r\n        .post(`/api/v1/enrollments/${freeStudentId}/courses`)\r\n        .send({\r\n          courseId: premiumCourseId,\r\n        });\r\n\r\n      expect(response.status).toBe(403);\r\n      expect(response.body.error).toContain('tier');\r\n    });\r\n\r\n    it('should allow free student to enroll in free course', async () => {\r\n      const response = await request(BASE_URL)\r\n        .post(`/api/v1/enrollments/${freeStudentId}/courses`)\r\n        .send({\r\n          courseId: freeCourseId,\r\n        });\r\n\r\n      expect(response.status).toBe(201);\r\n    });\r\n\r\n    it('should allow premium student to enroll in free course', async () => {\r\n      const response = await request(BASE_URL)\r\n        .post(`/api/v1/enrollments/${premiumStudentId}/courses`)\r\n        .send({\r\n          courseId: freeCourseId,\r\n        });\r\n\r\n      expect(response.status).toBe(201);\r\n    });\r\n  });\r\n\r\n  describe('Tutoring Feature', () => {\r\n    let premiumEnrollmentId: string;\r\n\r\n    beforeAll(async () => {\r\n      const enrollmentResponse = await request(BASE_URL)\r\n        .post(`/api/v1/enrollments/${premiumStudentId}/courses`)\r\n        .send({\r\n          courseId: premiumCourseId,\r\n        });\r\n\r\n      premiumEnrollmentId = enrollmentResponse.body.data.id;\r\n    });\r\n\r\n    it('should allow premium student to ask tutoring questions', async () => {\r\n      const response = await request(BASE_URL)\r\n        .post(`/api/v1/tutoring/ask`)\r\n        .send({\r\n          studentId: premiumStudentId,\r\n          courseId: premiumCourseId,\r\n          question: 'What is the main concept?',\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toHaveProperty('response');\r\n      expect(response.body.data).toHaveProperty('timestamp');\r\n    });\r\n\r\n    it('should prevent free student from accessing tutoring', async () => {\r\n      const response = await request(BASE_URL)\r\n        .post(`/api/v1/tutoring/ask`)\r\n        .send({\r\n          studentId: freeStudentId,\r\n          courseId: freeCourseId,\r\n          question: 'What is the main concept?',\r\n        });\r\n\r\n      expect(response.status).toBe(403);\r\n      expect(response.body.error).toContain('premium');\r\n    });\r\n\r\n    it('should cache tutoring responses', async () => {\r\n      const response1 = await request(BASE_URL)\r\n        .post(`/api/v1/tutoring/ask`)\r\n        .send({\r\n          studentId: premiumStudentId,\r\n          courseId: premiumCourseId,\r\n          question: 'What is caching?',\r\n        });\r\n\r\n      const response2 = await request(BASE_URL)\r\n        .post(`/api/v1/tutoring/ask`)\r\n        .send({\r\n          studentId: premiumStudentId,\r\n          courseId: premiumCourseId,\r\n          question: 'What is caching?',\r\n        });\r\n\r\n      expect(response1.body.data.response).toBe(response2.body.data.response);\r\n    });\r\n\r\n    it('should track tutoring history', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/tutoring/history/${premiumStudentId}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(Array.isArray(response.body.data)).toBe(true);\r\n      expect(response.body.data.length).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  describe('Premium Resources', () => {\r\n    it('should provide premium resources to premium students', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/context/retrieve`)\r\n        .query({\r\n          courseId: premiumCourseId,\r\n          topic: 'main-concept',\r\n          tier: 'premium',\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toHaveProperty('resources');\r\n      expect(response.body.data.resources.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should enforce 70/30 resource ratio for premium', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/context/retrieve`)\r\n        .query({\r\n          courseId: premiumCourseId,\r\n          topic: 'main-concept',\r\n          tier: 'premium',\r\n        });\r\n\r\n      const resources = response.body.data.resources;\r\n      const internalCount = resources.filter((r: any) => r.source === 'internal').length;\r\n      const externalCount = resources.filter((r: any) => r.source === 'external').length;\r\n      const total = internalCount + externalCount;\r\n\r\n      const internalRatio = (internalCount / total) * 100;\r\n      const externalRatio = (externalCount / total) * 100;\r\n\r\n      expect(internalRatio).toBeGreaterThanOrEqual(70);\r\n      expect(externalRatio).toBeLessThanOrEqual(30);\r\n    });\r\n\r\n    it('should prevent free students from accessing premium resources', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/context/retrieve`)\r\n        .query({\r\n          courseId: freeCourseId,\r\n          topic: 'main-concept',\r\n          tier: 'premium',\r\n        });\r\n\r\n      expect(response.status).toBe(403);\r\n    });\r\n  });\r\n\r\n  describe('Advanced Analytics', () => {\r\n    it('should provide detailed analytics for premium students', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/analytics/outcomes/${premiumStudentId}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.success).toBe(true);\r\n      expect(response.body.data).toHaveProperty('detailedAnalytics');\r\n      expect(response.body.data.detailedAnalytics).toBe(true);\r\n    });\r\n\r\n    it('should provide basic analytics for free students', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/analytics/outcomes/${freeStudentId}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.data).toHaveProperty('detailedAnalytics');\r\n      expect(response.body.data.detailedAnalytics).toBe(false);\r\n    });\r\n\r\n    it('should track tutoring usage in analytics', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/analytics/outcomes/${premiumStudentId}`);\r\n\r\n      expect(response.body.data).toHaveProperty('tutoringUsage');\r\n      expect(response.body.data.tutoringUsage).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should track resource access in analytics', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/analytics/outcomes/${premiumStudentId}`);\r\n\r\n      expect(response.body.data).toHaveProperty('resourcesAccessed');\r\n      expect(response.body.data.resourcesAccessed).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should provide learning path recommendations', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/analytics/outcomes/${premiumStudentId}`);\r\n\r\n      expect(response.body.data).toHaveProperty('learningPath');\r\n      expect(Array.isArray(response.body.data.learningPath)).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('Premium Enrollment Limits', () => {\r\n    it('should allow unlimited course enrollments for premium', async () => {\r\n      // Create multiple courses\r\n      for (let i = 0; i < 5; i++) {\r\n        const courseResponse = await request(BASE_URL)\r\n          .post('/api/v1/courses')\r\n          .send({\r\n            title: `Premium Course ${i}`,\r\n            description: 'Test',\r\n            tier: 'premium',\r\n            instructorId: 'test-instructor',\r\n          });\r\n\r\n        const response = await request(BASE_URL)\r\n          .post(`/api/v1/enrollments/${premiumStudentId}/courses`)\r\n          .send({\r\n            courseId: courseResponse.body.data.id,\r\n          });\r\n\r\n        expect(response.status).toBe(201);\r\n      }\r\n    });\r\n\r\n    it('should enforce free tier course limit', async () => {\r\n      // Create multiple courses\r\n      let successCount = 0;\r\n      let failCount = 0;\r\n\r\n      for (let i = 0; i < 5; i++) {\r\n        const courseResponse = await request(BASE_URL)\r\n          .post('/api/v1/courses')\r\n          .send({\r\n            title: `Free Course ${i}`,\r\n            description: 'Test',\r\n            tier: 'free',\r\n            instructorId: 'test-instructor',\r\n          });\r\n\r\n        const response = await request(BASE_URL)\r\n          .post(`/api/v1/enrollments/${freeStudentId}/courses`)\r\n          .send({\r\n            courseId: courseResponse.body.data.id,\r\n          });\r\n\r\n        if (response.status === 201) {\r\n          successCount++;\r\n        } else {\r\n          failCount++;\r\n        }\r\n      }\r\n\r\n      expect(successCount).toBeLessThanOrEqual(3); // Free limit\r\n      expect(failCount).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  describe('Premium Feature Pricing', () => {\r\n    it('should show premium tier pricing', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/pricing/tiers/premium`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.data).toHaveProperty('price');\r\n      expect(response.body.data).toHaveProperty('features');\r\n      expect(response.body.data.features).toContain('tutoring');\r\n      expect(response.body.data.features).toContain('premium_resources');\r\n    });\r\n\r\n    it('should show pro tier pricing', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/pricing/tiers/pro`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.data).toHaveProperty('price');\r\n      expect(response.body.data.price).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should calculate annual discount', async () => {\r\n      const monthlyResponse = await request(BASE_URL)\r\n        .get(`/api/v1/pricing/tiers/premium`);\r\n\r\n      const monthlyPrice = monthlyResponse.body.data.price;\r\n      const annualPrice = monthlyPrice * 12 * 0.9; // 10% annual discount\r\n\r\n      expect(annualPrice).toBeLessThan(monthlyPrice * 12);\r\n    });\r\n  });\r\n\r\n  describe('Premium Support', () => {\r\n    it('should provide priority support for premium students', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/enrollments/${premiumStudentId}`);\r\n\r\n      expect(response.body.data).toHaveProperty('supportTier');\r\n      expect(response.body.data.supportTier).toBe('priority');\r\n    });\r\n\r\n    it('should provide standard support for free students', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/enrollments/${freeStudentId}`);\r\n\r\n      expect(response.body.data).toHaveProperty('supportTier');\r\n      expect(response.body.data.supportTier).toBe('standard');\r\n    });\r\n  });\r\n\r\n  describe('Premium Downgrade', () => {\r\n    let downgradeStudentId: string;\r\n\r\n    beforeAll(async () => {\r\n      const studentResponse = await request(BASE_URL)\r\n        .post('/api/v1/enrollments')\r\n        .send({\r\n          email: 'downgrade@example.com',\r\n          name: 'Downgrade Test',\r\n          tier: 'premium',\r\n        });\r\n\r\n      downgradeStudentId = studentResponse.body.data.id;\r\n    });\r\n\r\n    it('should allow premium student to downgrade to free', async () => {\r\n      const response = await request(BASE_URL)\r\n        .put(`/api/v1/enrollments/${downgradeStudentId}`)\r\n        .send({\r\n          tier: 'free',\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.data.tier).toBe('free');\r\n    });\r\n\r\n    it('should revoke premium features after downgrade', async () => {\r\n      const response = await request(BASE_URL)\r\n        .post(`/api/v1/tutoring/ask`)\r\n        .send({\r\n          studentId: downgradeStudentId,\r\n          courseId: premiumCourseId,\r\n          question: 'Test question',\r\n        });\r\n\r\n      expect(response.status).toBe(403);\r\n    });\r\n\r\n    it('should unenroll from premium courses after downgrade', async () => {\r\n      const response = await request(BASE_URL)\r\n        .get(`/api/v1/enrollments/${downgradeStudentId}`);\r\n\r\n      const premiumEnrollments = response.body.data.courses.filter(\r\n        (c: any) => c.tier === 'premium'\r\n      );\r\n\r\n      expect(premiumEnrollments.length).toBe(0);\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}