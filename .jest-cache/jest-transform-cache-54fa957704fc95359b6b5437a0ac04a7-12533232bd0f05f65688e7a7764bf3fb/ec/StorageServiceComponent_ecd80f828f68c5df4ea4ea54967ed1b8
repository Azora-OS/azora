51a5507e803e130e99abdd3c27f1b653
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.StorageServiceComponent = void 0;
var path = _interopRequireWildcard(require("path"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
class StorageServiceComponent {
  /**
   * Generate complete storage service with S3/R2 integration
   */
  generateStorageService(config, outputDir) {
    const changes = [];
    const serviceName = 'storage-service';
    const serviceDir = path.join(outputDir, 'services', serviceName);

    // Main service file
    changes.push({
      path: path.join(serviceDir, 'src', 'index.ts'),
      type: 'create',
      content: this.generateIndexFile(config)
    });

    // Controllers
    changes.push({
      path: path.join(serviceDir, 'src', 'controllers', 'storage.controller.ts'),
      type: 'create',
      content: this.generateStorageController(config)
    });

    // Services
    changes.push({
      path: path.join(serviceDir, 'src', 'services', 'storage.service.ts'),
      type: 'create',
      content: this.generateStorageServiceFile(config)
    });
    changes.push({
      path: path.join(serviceDir, 'src', 'services', 'provider.service.ts'),
      type: 'create',
      content: this.generateProviderService(config)
    });
    if (config.enableImageOptimization) {
      changes.push({
        path: path.join(serviceDir, 'src', 'services', 'image.service.ts'),
        type: 'create',
        content: this.generateImageService()
      });
    }

    // Repository
    changes.push({
      path: path.join(serviceDir, 'src', 'repositories', 'file.repository.ts'),
      type: 'create',
      content: this.generateFileRepository()
    });

    // Middleware
    changes.push({
      path: path.join(serviceDir, 'src', 'middleware', 'upload.middleware.ts'),
      type: 'create',
      content: this.generateUploadMiddleware(config)
    });

    // Types
    changes.push({
      path: path.join(serviceDir, 'src', 'types', 'index.ts'),
      type: 'create',
      content: this.generateTypes(config)
    });

    // Validation schemas
    changes.push({
      path: path.join(serviceDir, 'src', 'validation', 'storage.schemas.ts'),
      type: 'create',
      content: this.generateValidationSchemas()
    });

    // Prisma schema
    changes.push({
      path: path.join(serviceDir, 'prisma', 'schema.prisma'),
      type: 'create',
      content: this.generatePrismaSchema()
    });

    // Configuration files
    changes.push({
      path: path.join(serviceDir, 'package.json'),
      type: 'create',
      content: this.generatePackageJson(config)
    });
    changes.push({
      path: path.join(serviceDir, '.env.example'),
      type: 'create',
      content: this.generateEnvExample(config)
    });
    changes.push({
      path: path.join(serviceDir, 'README.md'),
      type: 'create',
      content: this.generateReadme(config)
    });
    return changes;
  }
  generateIndexFile(config) {
    const port = config.port || 3004;
    return `import express, { Application } from 'express';
import cors from 'cors';
import helmet from 'helmet';
import { StorageController } from './controllers/storage.controller';
import { errorHandler } from './middleware/error-handler';

const app: Application = express();
const PORT = process.env.PORT || ${port};

// Middleware
app.use(helmet());
app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Health check
app.get('/health', (req, res) => {
  res.json({ status: 'healthy', service: 'storage-service' });
});

// Routes
const storageController = new StorageController();
app.use('/api/storage', storageController.router);

// Error handling
app.use(errorHandler);

// Start server
app.listen(PORT, () => {
  console.log(\`Storage service running on port \${PORT}\`);
});

export default app;
`;
  }
  generateStorageController(config) {
    return `import { Router, Request, Response, NextFunction } from 'express';
import { StorageService } from '../services/storage.service';
import { uploadMiddleware } from '../middleware/upload.middleware';
import { authMiddleware } from '../middleware/auth.middleware';

export class StorageController {
  public router: Router;
  private storageService: StorageService;

  constructor() {
    this.router = Router();
    this.storageService = new StorageService();
    this.initializeRoutes();
  }

  private initializeRoutes(): void {
    // Upload file
    this.router.post(
      '/upload',
      authMiddleware,
      uploadMiddleware.single('file'),
      this.uploadFile.bind(this)
    );
    
    // Upload multiple files
    this.router.post(
      '/upload-multiple',
      authMiddleware,
      uploadMiddleware.array('files', 10),
      this.uploadMultiple.bind(this)
    );
    
    // Get file
    this.router.get('/:id', this.getFile.bind(this));
    
    // Download file
    this.router.get('/:id/download', this.downloadFile.bind(this));
${config.enableSignedUrls ? `
    // Get signed URL
    this.router.get('/:id/signed-url', authMiddleware, this.getSignedUrl.bind(this));
` : ''}
    // Delete file
    this.router.delete('/:id', authMiddleware, this.deleteFile.bind(this));
    
    // List user files
    this.router.get('/', authMiddleware, this.listFiles.bind(this));
  }

  private async uploadFile(req: Request, res: Response, next: NextFunction): Promise<void> {
    try {
      if (!req.file) {
        res.status(400).json({ success: false, error: 'No file provided' });
        return;
      }

      const file = await this.storageService.uploadFile(
        req.file,
        req.user!.userId
      );

      res.json({ success: true, data: file });
    } catch (error) {
      next(error);
    }
  }

  private async uploadMultiple(req: Request, res: Response, next: NextFunction): Promise<void> {
    try {
      if (!req.files || !Array.isArray(req.files)) {
        res.status(400).json({ success: false, error: 'No files provided' });
        return;
      }

      const files = await this.storageService.uploadMultiple(
        req.files,
        req.user!.userId
      );

      res.json({ success: true, data: files });
    } catch (error) {
      next(error);
    }
  }

  private async getFile(req: Request, res: Response, next: NextFunction): Promise<void> {
    try {
      const file = await this.storageService.getFile(req.params.id);
      res.json({ success: true, data: file });
    } catch (error) {
      next(error);
    }
  }

  private async downloadFile(req: Request, res: Response, next: NextFunction): Promise<void> {
    try {
      const { url, file } = await this.storageService.getDownloadUrl(req.params.id);
      res.redirect(url);
    } catch (error) {
      next(error);
    }
  }
${config.enableSignedUrls ? `
  private async getSignedUrl(req: Request, res: Response, next: NextFunction): Promise<void> {
    try {
      const url = await this.storageService.getSignedUrl(req.params.id, req.user!.userId);
      res.json({ success: true, data: { url } });
    } catch (error) {
      next(error);
    }
  }
` : ''}
  private async deleteFile(req: Request, res: Response, next: NextFunction): Promise<void> {
    try {
      await this.storageService.deleteFile(req.params.id, req.user!.userId);
      res.json({ success: true, message: 'File deleted' });
    } catch (error) {
      next(error);
    }
  }

  private async listFiles(req: Request, res: Response, next: NextFunction): Promise<void> {
    try {
      const files = await this.storageService.listUserFiles(req.user!.userId);
      res.json({ success: true, data: files });
    } catch (error) {
      next(error);
    }
  }
}
`;
  }
  generateStorageServiceFile(config) {
    return `import { ProviderService } from './provider.service';
${config.enableImageOptimization ? "import { ImageService } from './image.service';" : ''}
import { FileRepository } from '../repositories/file.repository';
import { AppError } from '../middleware/error-handler';
import { File, UploadedFile } from '../types';
import * as crypto from 'crypto';

export class StorageService {
  private providerService: ProviderService;
${config.enableImageOptimization ? '  private imageService: ImageService;' : ''}
  private fileRepository: FileRepository;

  constructor() {
    this.providerService = new ProviderService();
${config.enableImageOptimization ? '    this.imageService = new ImageService();' : ''}
    this.fileRepository = new FileRepository();
  }

  async uploadFile(file: Express.Multer.File, userId: string): Promise<File> {
    const fileKey = this.generateFileKey(file.originalname);
${config.enableImageOptimization ? `
    // Optimize image if applicable
    let buffer = file.buffer;
    if (this.isImage(file.mimetype)) {
      buffer = await this.imageService.optimize(buffer, file.mimetype);
    }
` : '    const buffer = file.buffer;'}
    // Upload to storage provider
    const url = await this.providerService.upload(fileKey, buffer, file.mimetype);

    // Save metadata to database
    const savedFile = await this.fileRepository.create({
      userId,
      key: fileKey,
      originalName: file.originalname,
      mimeType: file.mimetype,
      size: file.size,
      url,
    });

    return savedFile;
  }

  async uploadMultiple(files: Express.Multer.File[], userId: string): Promise<File[]> {
    const uploadPromises = files.map(file => this.uploadFile(file, userId));
    return Promise.all(uploadPromises);
  }

  async getFile(id: string): Promise<File> {
    const file = await this.fileRepository.findById(id);
    if (!file) {
      throw new AppError(404, 'File not found');
    }
    return file;
  }

  async getDownloadUrl(id: string): Promise<{ url: string; file: File }> {
    const file = await this.getFile(id);
    const url = await this.providerService.getPublicUrl(file.key);
    return { url, file };
  }
${config.enableSignedUrls ? `
  async getSignedUrl(id: string, userId: string): Promise<string> {
    const file = await this.getFile(id);
    
    if (file.userId !== userId) {
      throw new AppError(403, 'Access denied');
    }

    return this.providerService.getSignedUrl(file.key, 3600); // 1 hour expiry
  }
` : ''}
  async deleteFile(id: string, userId: string): Promise<void> {
    const file = await this.getFile(id);
    
    if (file.userId !== userId) {
      throw new AppError(403, 'Access denied');
    }

    await this.providerService.delete(file.key);
    await this.fileRepository.delete(id);
  }

  async listUserFiles(userId: string): Promise<File[]> {
    return this.fileRepository.findByUserId(userId);
  }

  private generateFileKey(originalName: string): string {
    const timestamp = Date.now();
    const random = crypto.randomBytes(8).toString('hex');
    const ext = originalName.split('.').pop();
    return \`uploads/\${timestamp}-\${random}.\${ext}\`;
  }
${config.enableImageOptimization ? `
  private isImage(mimeType: string): boolean {
    return mimeType.startsWith('image/');
  }
` : ''}
}
`;
  }
  generateProviderService(config) {
    const provider = config.provider || 's3';
    return `${provider === 's3' || provider === 'r2' ? "import { S3Client, PutObjectCommand, DeleteObjectCommand, GetObjectCommand } from '@aws-sdk/client-s3';\nimport { getSignedUrl } from '@aws-sdk/s3-request-presigner';" : ''}
${provider === 'local' ? "import * as fs from 'fs/promises';\nimport * as path from 'path';" : ''}

export class ProviderService {
${provider === 's3' || provider === 'r2' ? `  private s3Client: S3Client;
  private bucket: string;

  constructor() {
    this.s3Client = new S3Client({
      region: process.env.${provider === 'r2' ? 'R2_REGION' : 'AWS_REGION'} || 'auto',
      endpoint: process.env.${provider === 'r2' ? 'R2_ENDPOINT' : 'S3_ENDPOINT'},
      credentials: {
        accessKeyId: process.env.${provider === 'r2' ? 'R2_ACCESS_KEY_ID' : 'AWS_ACCESS_KEY_ID'}!,
        secretAccessKey: process.env.${provider === 'r2' ? 'R2_SECRET_ACCESS_KEY' : 'AWS_SECRET_ACCESS_KEY'}!,
      },
    });
    this.bucket = process.env.${provider === 'r2' ? 'R2_BUCKET' : 'S3_BUCKET'}!;
  }

  async upload(key: string, buffer: Buffer, contentType: string): Promise<string> {
    const command = new PutObjectCommand({
      Bucket: this.bucket,
      Key: key,
      Body: buffer,
      ContentType: contentType,
    });

    await this.s3Client.send(command);
    return this.getPublicUrl(key);
  }

  async delete(key: string): Promise<void> {
    const command = new DeleteObjectCommand({
      Bucket: this.bucket,
      Key: key,
    });

    await this.s3Client.send(command);
  }

  async getPublicUrl(key: string): Promise<string> {
    const endpoint = process.env.${provider === 'r2' ? 'R2_PUBLIC_URL' : 'S3_PUBLIC_URL'};
    return \`\${endpoint}/\${key}\`;
  }

  async getSignedUrl(key: string, expiresIn: number = 3600): Promise<string> {
    const command = new GetObjectCommand({
      Bucket: this.bucket,
      Key: key,
    });

    return getSignedUrl(this.s3Client, command, { expiresIn });
  }` : ''}${provider === 'local' ? `  private uploadDir: string;

  constructor() {
    this.uploadDir = process.env.UPLOAD_DIR || path.join(process.cwd(), 'uploads');
  }

  async upload(key: string, buffer: Buffer, contentType: string): Promise<string> {
    const filePath = path.join(this.uploadDir, key);
    const dir = path.dirname(filePath);

    // Ensure directory exists
    await fs.mkdir(dir, { recursive: true });

    // Write file
    await fs.writeFile(filePath, buffer);

    return this.getPublicUrl(key);
  }

  async delete(key: string): Promise<void> {
    const filePath = path.join(this.uploadDir, key);
    await fs.unlink(filePath);
  }

  async getPublicUrl(key: string): Promise<string> {
    const baseUrl = process.env.BASE_URL || 'http://localhost:${config.port || 3004}';
    return \`\${baseUrl}/files/\${key}\`;
  }

  async getSignedUrl(key: string, expiresIn: number = 3600): Promise<string> {
    // For local storage, just return the public URL
    return this.getPublicUrl(key);
  }` : ''}
}
`;
  }
  generateImageService() {
    return `import sharp from 'sharp';

export class ImageService {
  async optimize(buffer: Buffer, mimeType: string): Promise<Buffer> {
    const image = sharp(buffer);
    const metadata = await image.metadata();

    // Resize if too large
    if (metadata.width && metadata.width > 2000) {
      image.resize(2000, null, { withoutEnlargement: true });
    }

    // Convert to appropriate format and optimize
    if (mimeType === 'image/png') {
      return image.png({ quality: 80, compressionLevel: 9 }).toBuffer();
    } else if (mimeType === 'image/jpeg' || mimeType === 'image/jpg') {
      return image.jpeg({ quality: 80, progressive: true }).toBuffer();
    } else if (mimeType === 'image/webp') {
      return image.webp({ quality: 80 }).toBuffer();
    }

    return buffer;
  }

  async generateThumbnail(buffer: Buffer, width: number = 200): Promise<Buffer> {
    return sharp(buffer)
      .resize(width, null, { withoutEnlargement: true })
      .jpeg({ quality: 70 })
      .toBuffer();
  }
}
`;
  }
  generateFileRepository() {
    return `import { PrismaClient } from '@prisma/client';
import { File, CreateFileInput } from '../types';

const prisma = new PrismaClient();

export class FileRepository {
  async create(data: CreateFileInput): Promise<File> {
    return prisma.file.create({ data });
  }

  async findById(id: string): Promise<File | null> {
    return prisma.file.findUnique({ where: { id } });
  }

  async findByUserId(userId: string): Promise<File[]> {
    return prisma.file.findMany({
      where: { userId },
      orderBy: { createdAt: 'desc' },
    });
  }

  async delete(id: string): Promise<void> {
    await prisma.file.delete({ where: { id } });
  }
}
`;
  }
  generateUploadMiddleware(config) {
    const maxSize = (config.maxFileSize || 10) * 1024 * 1024; // Convert MB to bytes

    return `import multer from 'multer';
import { AppError } from './error-handler';

const storage = multer.memoryStorage();

const fileFilter = (req: any, file: Express.Multer.File, cb: multer.FileFilterCallback) => {
  // Add file type validation here if needed
  cb(null, true);
};

export const uploadMiddleware = multer({
  storage,
  fileFilter,
  limits: {
    fileSize: ${maxSize}, // ${config.maxFileSize || 10}MB
  },
});
`;
  }
  generateTypes(config) {
    return `export interface File {
  id: string;
  userId: string;
  key: string;
  originalName: string;
  mimeType: string;
  size: number;
  url: string;
  createdAt: Date;
  updatedAt: Date;
}

export interface CreateFileInput {
  userId: string;
  key: string;
  originalName: string;
  mimeType: string;
  size: number;
  url: string;
}

export interface UploadedFile {
  id: string;
  url: string;
  originalName: string;
  size: number;
  mimeType: string;
}
`;
  }
  generateValidationSchemas() {
    return `import { z } from 'zod';

export const StorageSchemas = {
  upload: z.object({
    file: z.any(),
  }),
};
`;
  }
  generatePrismaSchema() {
    return `generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model File {
  id           String   @id @default(cuid())
  userId       String
  key          String   @unique
  originalName String
  mimeType     String
  size         Int
  url          String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  
  @@index([userId])
  @@index([createdAt])
  @@map("files")
}
`;
  }
  generatePackageJson(config) {
    const provider = config.provider || 's3';
    const dependencies = {
      express: '^4.18.2',
      cors: '^2.8.5',
      helmet: '^7.1.0',
      zod: '^3.22.4',
      '@prisma/client': '^5.7.1',
      multer: '^1.4.5-lts.1'
    };
    if (provider === 's3' || provider === 'r2') {
      dependencies['@aws-sdk/client-s3'] = '^3.470.0';
      dependencies['@aws-sdk/s3-request-presigner'] = '^3.470.0';
    }
    if (config.enableImageOptimization) {
      dependencies['sharp'] = '^0.33.1';
    }
    return JSON.stringify({
      name: 'storage-service',
      version: '1.0.0',
      description: 'File Storage Service',
      main: 'dist/index.js',
      scripts: {
        dev: 'ts-node-dev --respawn --transpile-only src/index.ts',
        build: 'tsc',
        start: 'node dist/index.js',
        test: 'jest',
        'test:watch': 'jest --watch',
        'prisma:generate': 'prisma generate',
        'prisma:migrate': 'prisma migrate dev'
      },
      dependencies,
      devDependencies: {
        '@types/express': '^4.17.21',
        '@types/cors': '^2.8.17',
        '@types/node': '^20.10.5',
        '@types/multer': '^1.4.11',
        typescript: '^5.3.3',
        'ts-node-dev': '^2.0.0',
        jest: '^29.7.0',
        '@types/jest': '^29.5.11',
        'ts-jest': '^29.1.1',
        prisma: '^5.7.1'
      }
    }, null, 2);
  }
  generateEnvExample(config) {
    const provider = config.provider || 's3';
    let env = `PORT=${config.port || 3004}\nNODE_ENV=development\n\nDATABASE_URL=postgresql://user:password@localhost:5432/storage_db\n`;
    if (provider === 's3') {
      env += '\nAWS_REGION=us-east-1\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nS3_BUCKET=your-bucket-name\nS3_PUBLIC_URL=https://your-bucket.s3.amazonaws.com\n';
    } else if (provider === 'r2') {
      env += '\nR2_REGION=auto\nR2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com\nR2_ACCESS_KEY_ID=your_access_key\nR2_SECRET_ACCESS_KEY=your_secret_key\nR2_BUCKET=your-bucket-name\nR2_PUBLIC_URL=https://your-domain.com\n';
    } else if (provider === 'local') {
      env += '\nUPLOAD_DIR=./uploads\nBASE_URL=http://localhost:3004\n';
    }
    return env;
  }
  generateReadme(config) {
    const provider = config.provider || 's3';
    return `# Storage Service

File storage service with ${provider.toUpperCase()} integration${config.enableImageOptimization ? ' and image optimization' : ''}.

## Features

- File upload and download
- ${provider.toUpperCase()} storage integration
${config.enableSignedUrls ? '- Signed URL generation\n' : ''}${config.enableImageOptimization ? '- Automatic image optimization\n' : ''}- File metadata tracking
- Multi-file upload support

## Installation

\`\`\`bash
npm install
\`\`\`

## Database Setup

\`\`\`bash
npx prisma migrate dev
npx prisma generate
\`\`\`

## Configuration

Copy \`.env.example\` to \`.env\` and configure your ${provider.toUpperCase()} credentials.

## Development

\`\`\`bash
npm run dev
\`\`\`

## Production

\`\`\`bash
npm run build
npm start
\`\`\`

## API Endpoints

- \`POST /api/storage/upload\` - Upload single file
- \`POST /api/storage/upload-multiple\` - Upload multiple files
- \`GET /api/storage/:id\` - Get file metadata
- \`GET /api/storage/:id/download\` - Download file
${config.enableSignedUrls ? '- `GET /api/storage/:id/signed-url` - Get signed URL\n' : ''}- \`DELETE /api/storage/:id\` - Delete file
- \`GET /api/storage\` - List user files

## Testing

\`\`\`bash
npm test
\`\`\`
${config.enableImageOptimization ? `
## Image Optimization

Images are automatically optimized on upload:
- Resized to max 2000px width
- Compressed with quality 80
- Converted to appropriate format
` : ''}
`;
  }
}
exports.StorageServiceComponent = StorageServiceComponent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXRoIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiU3RvcmFnZVNlcnZpY2VDb21wb25lbnQiLCJnZW5lcmF0ZVN0b3JhZ2VTZXJ2aWNlIiwiY29uZmlnIiwib3V0cHV0RGlyIiwiY2hhbmdlcyIsInNlcnZpY2VOYW1lIiwic2VydmljZURpciIsImpvaW4iLCJwdXNoIiwidHlwZSIsImNvbnRlbnQiLCJnZW5lcmF0ZUluZGV4RmlsZSIsImdlbmVyYXRlU3RvcmFnZUNvbnRyb2xsZXIiLCJnZW5lcmF0ZVN0b3JhZ2VTZXJ2aWNlRmlsZSIsImdlbmVyYXRlUHJvdmlkZXJTZXJ2aWNlIiwiZW5hYmxlSW1hZ2VPcHRpbWl6YXRpb24iLCJnZW5lcmF0ZUltYWdlU2VydmljZSIsImdlbmVyYXRlRmlsZVJlcG9zaXRvcnkiLCJnZW5lcmF0ZVVwbG9hZE1pZGRsZXdhcmUiLCJnZW5lcmF0ZVR5cGVzIiwiZ2VuZXJhdGVWYWxpZGF0aW9uU2NoZW1hcyIsImdlbmVyYXRlUHJpc21hU2NoZW1hIiwiZ2VuZXJhdGVQYWNrYWdlSnNvbiIsImdlbmVyYXRlRW52RXhhbXBsZSIsImdlbmVyYXRlUmVhZG1lIiwicG9ydCIsImVuYWJsZVNpZ25lZFVybHMiLCJwcm92aWRlciIsIm1heFNpemUiLCJtYXhGaWxlU2l6ZSIsImRlcGVuZGVuY2llcyIsImV4cHJlc3MiLCJjb3JzIiwiaGVsbWV0Iiwiem9kIiwibXVsdGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJ2ZXJzaW9uIiwiZGVzY3JpcHRpb24iLCJtYWluIiwic2NyaXB0cyIsImRldiIsImJ1aWxkIiwic3RhcnQiLCJ0ZXN0IiwiZGV2RGVwZW5kZW5jaWVzIiwidHlwZXNjcmlwdCIsImplc3QiLCJwcmlzbWEiLCJlbnYiLCJ0b1VwcGVyQ2FzZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJTdG9yYWdlU2VydmljZUNvbXBvbmVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgRmlsZUNoYW5nZSB9IGZyb20gJy4uL0NoYW5nZXNldE1hbmFnZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JhZ2VTZXJ2aWNlQ29uZmlnIHtcbiAgbmFtZTogc3RyaW5nO1xuICBwb3J0PzogbnVtYmVyO1xuICBwcm92aWRlcj86ICdzMycgfCAncjInIHwgJ2xvY2FsJztcbiAgZW5hYmxlSW1hZ2VPcHRpbWl6YXRpb24/OiBib29sZWFuO1xuICBlbmFibGVTaWduZWRVcmxzPzogYm9vbGVhbjtcbiAgbWF4RmlsZVNpemU/OiBudW1iZXI7IC8vIGluIE1CXG59XG5cbmV4cG9ydCBjbGFzcyBTdG9yYWdlU2VydmljZUNvbXBvbmVudCB7XG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb21wbGV0ZSBzdG9yYWdlIHNlcnZpY2Ugd2l0aCBTMy9SMiBpbnRlZ3JhdGlvblxuICAgKi9cbiAgZ2VuZXJhdGVTdG9yYWdlU2VydmljZShjb25maWc6IFN0b3JhZ2VTZXJ2aWNlQ29uZmlnLCBvdXRwdXREaXI6IHN0cmluZyk6IEZpbGVDaGFuZ2VbXSB7XG4gICAgY29uc3QgY2hhbmdlczogRmlsZUNoYW5nZVtdID0gW107XG4gICAgY29uc3Qgc2VydmljZU5hbWUgPSAnc3RvcmFnZS1zZXJ2aWNlJztcbiAgICBjb25zdCBzZXJ2aWNlRGlyID0gcGF0aC5qb2luKG91dHB1dERpciwgJ3NlcnZpY2VzJywgc2VydmljZU5hbWUpO1xuXG4gICAgLy8gTWFpbiBzZXJ2aWNlIGZpbGVcbiAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgcGF0aDogcGF0aC5qb2luKHNlcnZpY2VEaXIsICdzcmMnLCAnaW5kZXgudHMnKSxcbiAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgY29udGVudDogdGhpcy5nZW5lcmF0ZUluZGV4RmlsZShjb25maWcpLFxuICAgIH0pO1xuXG4gICAgLy8gQ29udHJvbGxlcnNcbiAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgcGF0aDogcGF0aC5qb2luKHNlcnZpY2VEaXIsICdzcmMnLCAnY29udHJvbGxlcnMnLCAnc3RvcmFnZS5jb250cm9sbGVyLnRzJyksXG4gICAgICB0eXBlOiAnY3JlYXRlJyxcbiAgICAgIGNvbnRlbnQ6IHRoaXMuZ2VuZXJhdGVTdG9yYWdlQ29udHJvbGxlcihjb25maWcpLFxuICAgIH0pO1xuXG4gICAgLy8gU2VydmljZXNcbiAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgcGF0aDogcGF0aC5qb2luKHNlcnZpY2VEaXIsICdzcmMnLCAnc2VydmljZXMnLCAnc3RvcmFnZS5zZXJ2aWNlLnRzJyksXG4gICAgICB0eXBlOiAnY3JlYXRlJyxcbiAgICAgIGNvbnRlbnQ6IHRoaXMuZ2VuZXJhdGVTdG9yYWdlU2VydmljZUZpbGUoY29uZmlnKSxcbiAgICB9KTtcblxuICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICBwYXRoOiBwYXRoLmpvaW4oc2VydmljZURpciwgJ3NyYycsICdzZXJ2aWNlcycsICdwcm92aWRlci5zZXJ2aWNlLnRzJyksXG4gICAgICB0eXBlOiAnY3JlYXRlJyxcbiAgICAgIGNvbnRlbnQ6IHRoaXMuZ2VuZXJhdGVQcm92aWRlclNlcnZpY2UoY29uZmlnKSxcbiAgICB9KTtcblxuICAgIGlmIChjb25maWcuZW5hYmxlSW1hZ2VPcHRpbWl6YXRpb24pIHtcbiAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgIHBhdGg6IHBhdGguam9pbihzZXJ2aWNlRGlyLCAnc3JjJywgJ3NlcnZpY2VzJywgJ2ltYWdlLnNlcnZpY2UudHMnKSxcbiAgICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICAgIGNvbnRlbnQ6IHRoaXMuZ2VuZXJhdGVJbWFnZVNlcnZpY2UoKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJlcG9zaXRvcnlcbiAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgcGF0aDogcGF0aC5qb2luKHNlcnZpY2VEaXIsICdzcmMnLCAncmVwb3NpdG9yaWVzJywgJ2ZpbGUucmVwb3NpdG9yeS50cycpLFxuICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICBjb250ZW50OiB0aGlzLmdlbmVyYXRlRmlsZVJlcG9zaXRvcnkoKSxcbiAgICB9KTtcblxuICAgIC8vIE1pZGRsZXdhcmVcbiAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgcGF0aDogcGF0aC5qb2luKHNlcnZpY2VEaXIsICdzcmMnLCAnbWlkZGxld2FyZScsICd1cGxvYWQubWlkZGxld2FyZS50cycpLFxuICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICBjb250ZW50OiB0aGlzLmdlbmVyYXRlVXBsb2FkTWlkZGxld2FyZShjb25maWcpLFxuICAgIH0pO1xuXG4gICAgLy8gVHlwZXNcbiAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgcGF0aDogcGF0aC5qb2luKHNlcnZpY2VEaXIsICdzcmMnLCAndHlwZXMnLCAnaW5kZXgudHMnKSxcbiAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgY29udGVudDogdGhpcy5nZW5lcmF0ZVR5cGVzKGNvbmZpZyksXG4gICAgfSk7XG5cbiAgICAvLyBWYWxpZGF0aW9uIHNjaGVtYXNcbiAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgcGF0aDogcGF0aC5qb2luKHNlcnZpY2VEaXIsICdzcmMnLCAndmFsaWRhdGlvbicsICdzdG9yYWdlLnNjaGVtYXMudHMnKSxcbiAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgY29udGVudDogdGhpcy5nZW5lcmF0ZVZhbGlkYXRpb25TY2hlbWFzKCksXG4gICAgfSk7XG5cbiAgICAvLyBQcmlzbWEgc2NoZW1hXG4gICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgIHBhdGg6IHBhdGguam9pbihzZXJ2aWNlRGlyLCAncHJpc21hJywgJ3NjaGVtYS5wcmlzbWEnKSxcbiAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgY29udGVudDogdGhpcy5nZW5lcmF0ZVByaXNtYVNjaGVtYSgpLFxuICAgIH0pO1xuXG4gICAgLy8gQ29uZmlndXJhdGlvbiBmaWxlc1xuICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICBwYXRoOiBwYXRoLmpvaW4oc2VydmljZURpciwgJ3BhY2thZ2UuanNvbicpLFxuICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICBjb250ZW50OiB0aGlzLmdlbmVyYXRlUGFja2FnZUpzb24oY29uZmlnKSxcbiAgICB9KTtcblxuICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICBwYXRoOiBwYXRoLmpvaW4oc2VydmljZURpciwgJy5lbnYuZXhhbXBsZScpLFxuICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICBjb250ZW50OiB0aGlzLmdlbmVyYXRlRW52RXhhbXBsZShjb25maWcpLFxuICAgIH0pO1xuXG4gICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgIHBhdGg6IHBhdGguam9pbihzZXJ2aWNlRGlyLCAnUkVBRE1FLm1kJyksXG4gICAgICB0eXBlOiAnY3JlYXRlJyxcbiAgICAgIGNvbnRlbnQ6IHRoaXMuZ2VuZXJhdGVSZWFkbWUoY29uZmlnKSxcbiAgICB9KTtcblxuICAgIHJldHVybiBjaGFuZ2VzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUluZGV4RmlsZShjb25maWc6IFN0b3JhZ2VTZXJ2aWNlQ29uZmlnKTogc3RyaW5nIHtcbiAgICBjb25zdCBwb3J0ID0gY29uZmlnLnBvcnQgfHwgMzAwNDtcbiAgICByZXR1cm4gYGltcG9ydCBleHByZXNzLCB7IEFwcGxpY2F0aW9uIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBoZWxtZXQgZnJvbSAnaGVsbWV0JztcbmltcG9ydCB7IFN0b3JhZ2VDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVycy9zdG9yYWdlLmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgZXJyb3JIYW5kbGVyIH0gZnJvbSAnLi9taWRkbGV3YXJlL2Vycm9yLWhhbmRsZXInO1xuXG5jb25zdCBhcHA6IEFwcGxpY2F0aW9uID0gZXhwcmVzcygpO1xuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgJHtwb3J0fTtcblxuLy8gTWlkZGxld2FyZVxuYXBwLnVzZShoZWxtZXQoKSk7XG5hcHAudXNlKGNvcnMoKSk7XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xuXG4vLyBIZWFsdGggY2hlY2tcbmFwcC5nZXQoJy9oZWFsdGgnLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oeyBzdGF0dXM6ICdoZWFsdGh5Jywgc2VydmljZTogJ3N0b3JhZ2Utc2VydmljZScgfSk7XG59KTtcblxuLy8gUm91dGVzXG5jb25zdCBzdG9yYWdlQ29udHJvbGxlciA9IG5ldyBTdG9yYWdlQ29udHJvbGxlcigpO1xuYXBwLnVzZSgnL2FwaS9zdG9yYWdlJywgc3RvcmFnZUNvbnRyb2xsZXIucm91dGVyKTtcblxuLy8gRXJyb3IgaGFuZGxpbmdcbmFwcC51c2UoZXJyb3JIYW5kbGVyKTtcblxuLy8gU3RhcnQgc2VydmVyXG5hcHAubGlzdGVuKFBPUlQsICgpID0+IHtcbiAgY29uc29sZS5sb2coXFxgU3RvcmFnZSBzZXJ2aWNlIHJ1bm5pbmcgb24gcG9ydCBcXCR7UE9SVH1cXGApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDtcbmA7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlU3RvcmFnZUNvbnRyb2xsZXIoY29uZmlnOiBTdG9yYWdlU2VydmljZUNvbmZpZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBpbXBvcnQgeyBSb3V0ZXIsIFJlcXVlc3QsIFJlc3BvbnNlLCBOZXh0RnVuY3Rpb24gfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvc3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IHVwbG9hZE1pZGRsZXdhcmUgfSBmcm9tICcuLi9taWRkbGV3YXJlL3VwbG9hZC5taWRkbGV3YXJlJztcbmltcG9ydCB7IGF1dGhNaWRkbGV3YXJlIH0gZnJvbSAnLi4vbWlkZGxld2FyZS9hdXRoLm1pZGRsZXdhcmUnO1xuXG5leHBvcnQgY2xhc3MgU3RvcmFnZUNvbnRyb2xsZXIge1xuICBwdWJsaWMgcm91dGVyOiBSb3V0ZXI7XG4gIHByaXZhdGUgc3RvcmFnZVNlcnZpY2U6IFN0b3JhZ2VTZXJ2aWNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucm91dGVyID0gUm91dGVyKCk7XG4gICAgdGhpcy5zdG9yYWdlU2VydmljZSA9IG5ldyBTdG9yYWdlU2VydmljZSgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVJvdXRlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplUm91dGVzKCk6IHZvaWQge1xuICAgIC8vIFVwbG9hZCBmaWxlXG4gICAgdGhpcy5yb3V0ZXIucG9zdChcbiAgICAgICcvdXBsb2FkJyxcbiAgICAgIGF1dGhNaWRkbGV3YXJlLFxuICAgICAgdXBsb2FkTWlkZGxld2FyZS5zaW5nbGUoJ2ZpbGUnKSxcbiAgICAgIHRoaXMudXBsb2FkRmlsZS5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICBcbiAgICAvLyBVcGxvYWQgbXVsdGlwbGUgZmlsZXNcbiAgICB0aGlzLnJvdXRlci5wb3N0KFxuICAgICAgJy91cGxvYWQtbXVsdGlwbGUnLFxuICAgICAgYXV0aE1pZGRsZXdhcmUsXG4gICAgICB1cGxvYWRNaWRkbGV3YXJlLmFycmF5KCdmaWxlcycsIDEwKSxcbiAgICAgIHRoaXMudXBsb2FkTXVsdGlwbGUuYmluZCh0aGlzKVxuICAgICk7XG4gICAgXG4gICAgLy8gR2V0IGZpbGVcbiAgICB0aGlzLnJvdXRlci5nZXQoJy86aWQnLCB0aGlzLmdldEZpbGUuYmluZCh0aGlzKSk7XG4gICAgXG4gICAgLy8gRG93bmxvYWQgZmlsZVxuICAgIHRoaXMucm91dGVyLmdldCgnLzppZC9kb3dubG9hZCcsIHRoaXMuZG93bmxvYWRGaWxlLmJpbmQodGhpcykpO1xuJHtjb25maWcuZW5hYmxlU2lnbmVkVXJscyA/IGBcbiAgICAvLyBHZXQgc2lnbmVkIFVSTFxuICAgIHRoaXMucm91dGVyLmdldCgnLzppZC9zaWduZWQtdXJsJywgYXV0aE1pZGRsZXdhcmUsIHRoaXMuZ2V0U2lnbmVkVXJsLmJpbmQodGhpcykpO1xuYCA6ICcnfVxuICAgIC8vIERlbGV0ZSBmaWxlXG4gICAgdGhpcy5yb3V0ZXIuZGVsZXRlKCcvOmlkJywgYXV0aE1pZGRsZXdhcmUsIHRoaXMuZGVsZXRlRmlsZS5iaW5kKHRoaXMpKTtcbiAgICBcbiAgICAvLyBMaXN0IHVzZXIgZmlsZXNcbiAgICB0aGlzLnJvdXRlci5nZXQoJy8nLCBhdXRoTWlkZGxld2FyZSwgdGhpcy5saXN0RmlsZXMuYmluZCh0aGlzKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwbG9hZEZpbGUocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFyZXEuZmlsZSkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIGZpbGUgcHJvdmlkZWQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLnN0b3JhZ2VTZXJ2aWNlLnVwbG9hZEZpbGUoXG4gICAgICAgIHJlcS5maWxlLFxuICAgICAgICByZXEudXNlciEudXNlcklkXG4gICAgICApO1xuXG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGZpbGUgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdXBsb2FkTXVsdGlwbGUocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFyZXEuZmlsZXMgfHwgIUFycmF5LmlzQXJyYXkocmVxLmZpbGVzKSkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIGZpbGVzIHByb3ZpZGVkJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHRoaXMuc3RvcmFnZVNlcnZpY2UudXBsb2FkTXVsdGlwbGUoXG4gICAgICAgIHJlcS5maWxlcyxcbiAgICAgICAgcmVxLnVzZXIhLnVzZXJJZFxuICAgICAgKTtcblxuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBmaWxlcyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRGaWxlKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLnN0b3JhZ2VTZXJ2aWNlLmdldEZpbGUocmVxLnBhcmFtcy5pZCk7XG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGZpbGUgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZG93bmxvYWRGaWxlKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdXJsLCBmaWxlIH0gPSBhd2FpdCB0aGlzLnN0b3JhZ2VTZXJ2aWNlLmdldERvd25sb2FkVXJsKHJlcS5wYXJhbXMuaWQpO1xuICAgICAgcmVzLnJlZGlyZWN0KHVybCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfVxuJHtjb25maWcuZW5hYmxlU2lnbmVkVXJscyA/IGBcbiAgcHJpdmF0ZSBhc3luYyBnZXRTaWduZWRVcmwocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gYXdhaXQgdGhpcy5zdG9yYWdlU2VydmljZS5nZXRTaWduZWRVcmwocmVxLnBhcmFtcy5pZCwgcmVxLnVzZXIhLnVzZXJJZCk7XG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgdXJsIH0gfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbiAgfVxuYCA6ICcnfVxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUZpbGUocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlU2VydmljZS5kZWxldGVGaWxlKHJlcS5wYXJhbXMuaWQsIHJlcS51c2VyIS51c2VySWQpO1xuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnRmlsZSBkZWxldGVkJyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsaXN0RmlsZXMocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCB0aGlzLnN0b3JhZ2VTZXJ2aWNlLmxpc3RVc2VyRmlsZXMocmVxLnVzZXIhLnVzZXJJZCk7XG4gICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGZpbGVzIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG4gIH1cbn1cbmA7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlU3RvcmFnZVNlcnZpY2VGaWxlKGNvbmZpZzogU3RvcmFnZVNlcnZpY2VDb25maWcpOiBzdHJpbmcge1xuICAgIHJldHVybiBgaW1wb3J0IHsgUHJvdmlkZXJTZXJ2aWNlIH0gZnJvbSAnLi9wcm92aWRlci5zZXJ2aWNlJztcbiR7Y29uZmlnLmVuYWJsZUltYWdlT3B0aW1pemF0aW9uID8gXCJpbXBvcnQgeyBJbWFnZVNlcnZpY2UgfSBmcm9tICcuL2ltYWdlLnNlcnZpY2UnO1wiIDogJyd9XG5pbXBvcnQgeyBGaWxlUmVwb3NpdG9yeSB9IGZyb20gJy4uL3JlcG9zaXRvcmllcy9maWxlLnJlcG9zaXRvcnknO1xuaW1wb3J0IHsgQXBwRXJyb3IgfSBmcm9tICcuLi9taWRkbGV3YXJlL2Vycm9yLWhhbmRsZXInO1xuaW1wb3J0IHsgRmlsZSwgVXBsb2FkZWRGaWxlIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0ICogYXMgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5cbmV4cG9ydCBjbGFzcyBTdG9yYWdlU2VydmljZSB7XG4gIHByaXZhdGUgcHJvdmlkZXJTZXJ2aWNlOiBQcm92aWRlclNlcnZpY2U7XG4ke2NvbmZpZy5lbmFibGVJbWFnZU9wdGltaXphdGlvbiA/ICcgIHByaXZhdGUgaW1hZ2VTZXJ2aWNlOiBJbWFnZVNlcnZpY2U7JyA6ICcnfVxuICBwcml2YXRlIGZpbGVSZXBvc2l0b3J5OiBGaWxlUmVwb3NpdG9yeTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnByb3ZpZGVyU2VydmljZSA9IG5ldyBQcm92aWRlclNlcnZpY2UoKTtcbiR7Y29uZmlnLmVuYWJsZUltYWdlT3B0aW1pemF0aW9uID8gJyAgICB0aGlzLmltYWdlU2VydmljZSA9IG5ldyBJbWFnZVNlcnZpY2UoKTsnIDogJyd9XG4gICAgdGhpcy5maWxlUmVwb3NpdG9yeSA9IG5ldyBGaWxlUmVwb3NpdG9yeSgpO1xuICB9XG5cbiAgYXN5bmMgdXBsb2FkRmlsZShmaWxlOiBFeHByZXNzLk11bHRlci5GaWxlLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RmlsZT4ge1xuICAgIGNvbnN0IGZpbGVLZXkgPSB0aGlzLmdlbmVyYXRlRmlsZUtleShmaWxlLm9yaWdpbmFsbmFtZSk7XG4ke2NvbmZpZy5lbmFibGVJbWFnZU9wdGltaXphdGlvbiA/IGBcbiAgICAvLyBPcHRpbWl6ZSBpbWFnZSBpZiBhcHBsaWNhYmxlXG4gICAgbGV0IGJ1ZmZlciA9IGZpbGUuYnVmZmVyO1xuICAgIGlmICh0aGlzLmlzSW1hZ2UoZmlsZS5taW1ldHlwZSkpIHtcbiAgICAgIGJ1ZmZlciA9IGF3YWl0IHRoaXMuaW1hZ2VTZXJ2aWNlLm9wdGltaXplKGJ1ZmZlciwgZmlsZS5taW1ldHlwZSk7XG4gICAgfVxuYCA6ICcgICAgY29uc3QgYnVmZmVyID0gZmlsZS5idWZmZXI7J31cbiAgICAvLyBVcGxvYWQgdG8gc3RvcmFnZSBwcm92aWRlclxuICAgIGNvbnN0IHVybCA9IGF3YWl0IHRoaXMucHJvdmlkZXJTZXJ2aWNlLnVwbG9hZChmaWxlS2V5LCBidWZmZXIsIGZpbGUubWltZXR5cGUpO1xuXG4gICAgLy8gU2F2ZSBtZXRhZGF0YSB0byBkYXRhYmFzZVxuICAgIGNvbnN0IHNhdmVkRmlsZSA9IGF3YWl0IHRoaXMuZmlsZVJlcG9zaXRvcnkuY3JlYXRlKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGtleTogZmlsZUtleSxcbiAgICAgIG9yaWdpbmFsTmFtZTogZmlsZS5vcmlnaW5hbG5hbWUsXG4gICAgICBtaW1lVHlwZTogZmlsZS5taW1ldHlwZSxcbiAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgIHVybCxcbiAgICB9KTtcblxuICAgIHJldHVybiBzYXZlZEZpbGU7XG4gIH1cblxuICBhc3luYyB1cGxvYWRNdWx0aXBsZShmaWxlczogRXhwcmVzcy5NdWx0ZXIuRmlsZVtdLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RmlsZVtdPiB7XG4gICAgY29uc3QgdXBsb2FkUHJvbWlzZXMgPSBmaWxlcy5tYXAoZmlsZSA9PiB0aGlzLnVwbG9hZEZpbGUoZmlsZSwgdXNlcklkKSk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHVwbG9hZFByb21pc2VzKTtcbiAgfVxuXG4gIGFzeW5jIGdldEZpbGUoaWQ6IHN0cmluZyk6IFByb21pc2U8RmlsZT4ge1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmZpbGVSZXBvc2l0b3J5LmZpbmRCeUlkKGlkKTtcbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgIHRocm93IG5ldyBBcHBFcnJvcig0MDQsICdGaWxlIG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gZmlsZTtcbiAgfVxuXG4gIGFzeW5jIGdldERvd25sb2FkVXJsKGlkOiBzdHJpbmcpOiBQcm9taXNlPHsgdXJsOiBzdHJpbmc7IGZpbGU6IEZpbGUgfT4ge1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmdldEZpbGUoaWQpO1xuICAgIGNvbnN0IHVybCA9IGF3YWl0IHRoaXMucHJvdmlkZXJTZXJ2aWNlLmdldFB1YmxpY1VybChmaWxlLmtleSk7XG4gICAgcmV0dXJuIHsgdXJsLCBmaWxlIH07XG4gIH1cbiR7Y29uZmlnLmVuYWJsZVNpZ25lZFVybHMgPyBgXG4gIGFzeW5jIGdldFNpZ25lZFVybChpZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuZ2V0RmlsZShpZCk7XG4gICAgXG4gICAgaWYgKGZpbGUudXNlcklkICE9PSB1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBBcHBFcnJvcig0MDMsICdBY2Nlc3MgZGVuaWVkJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvdmlkZXJTZXJ2aWNlLmdldFNpZ25lZFVybChmaWxlLmtleSwgMzYwMCk7IC8vIDEgaG91ciBleHBpcnlcbiAgfVxuYCA6ICcnfVxuICBhc3luYyBkZWxldGVGaWxlKGlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuZ2V0RmlsZShpZCk7XG4gICAgXG4gICAgaWYgKGZpbGUudXNlcklkICE9PSB1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBBcHBFcnJvcig0MDMsICdBY2Nlc3MgZGVuaWVkJyk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wcm92aWRlclNlcnZpY2UuZGVsZXRlKGZpbGUua2V5KTtcbiAgICBhd2FpdCB0aGlzLmZpbGVSZXBvc2l0b3J5LmRlbGV0ZShpZCk7XG4gIH1cblxuICBhc3luYyBsaXN0VXNlckZpbGVzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxGaWxlW10+IHtcbiAgICByZXR1cm4gdGhpcy5maWxlUmVwb3NpdG9yeS5maW5kQnlVc2VySWQodXNlcklkKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVGaWxlS2V5KG9yaWdpbmFsTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHJhbmRvbSA9IGNyeXB0by5yYW5kb21CeXRlcyg4KS50b1N0cmluZygnaGV4Jyk7XG4gICAgY29uc3QgZXh0ID0gb3JpZ2luYWxOYW1lLnNwbGl0KCcuJykucG9wKCk7XG4gICAgcmV0dXJuIFxcYHVwbG9hZHMvXFwke3RpbWVzdGFtcH0tXFwke3JhbmRvbX0uXFwke2V4dH1cXGA7XG4gIH1cbiR7Y29uZmlnLmVuYWJsZUltYWdlT3B0aW1pemF0aW9uID8gYFxuICBwcml2YXRlIGlzSW1hZ2UobWltZVR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBtaW1lVHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKTtcbiAgfVxuYCA6ICcnfVxufVxuYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVQcm92aWRlclNlcnZpY2UoY29uZmlnOiBTdG9yYWdlU2VydmljZUNvbmZpZyk6IHN0cmluZyB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBjb25maWcucHJvdmlkZXIgfHwgJ3MzJztcbiAgICBcbiAgICByZXR1cm4gYCR7cHJvdmlkZXIgPT09ICdzMycgfHwgcHJvdmlkZXIgPT09ICdyMicgPyBcImltcG9ydCB7IFMzQ2xpZW50LCBQdXRPYmplY3RDb21tYW5kLCBEZWxldGVPYmplY3RDb21tYW5kLCBHZXRPYmplY3RDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LXMzJztcXG5pbXBvcnQgeyBnZXRTaWduZWRVcmwgfSBmcm9tICdAYXdzLXNkay9zMy1yZXF1ZXN0LXByZXNpZ25lcic7XCIgOiAnJ31cbiR7cHJvdmlkZXIgPT09ICdsb2NhbCcgPyBcImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzL3Byb21pc2VzJztcXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1wiIDogJyd9XG5cbmV4cG9ydCBjbGFzcyBQcm92aWRlclNlcnZpY2Uge1xuJHtwcm92aWRlciA9PT0gJ3MzJyB8fCBwcm92aWRlciA9PT0gJ3IyJyA/IGAgIHByaXZhdGUgczNDbGllbnQ6IFMzQ2xpZW50O1xuICBwcml2YXRlIGJ1Y2tldDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuczNDbGllbnQgPSBuZXcgUzNDbGllbnQoe1xuICAgICAgcmVnaW9uOiBwcm9jZXNzLmVudi4ke3Byb3ZpZGVyID09PSAncjInID8gJ1IyX1JFR0lPTicgOiAnQVdTX1JFR0lPTid9IHx8ICdhdXRvJyxcbiAgICAgIGVuZHBvaW50OiBwcm9jZXNzLmVudi4ke3Byb3ZpZGVyID09PSAncjInID8gJ1IyX0VORFBPSU5UJyA6ICdTM19FTkRQT0lOVCd9LFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LiR7cHJvdmlkZXIgPT09ICdyMicgPyAnUjJfQUNDRVNTX0tFWV9JRCcgOiAnQVdTX0FDQ0VTU19LRVlfSUQnfSEsXG4gICAgICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuJHtwcm92aWRlciA9PT0gJ3IyJyA/ICdSMl9TRUNSRVRfQUNDRVNTX0tFWScgOiAnQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZJ30hLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICB0aGlzLmJ1Y2tldCA9IHByb2Nlc3MuZW52LiR7cHJvdmlkZXIgPT09ICdyMicgPyAnUjJfQlVDS0VUJyA6ICdTM19CVUNLRVQnfSE7XG4gIH1cblxuICBhc3luYyB1cGxvYWQoa2V5OiBzdHJpbmcsIGJ1ZmZlcjogQnVmZmVyLCBjb250ZW50VHlwZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IFB1dE9iamVjdENvbW1hbmQoe1xuICAgICAgQnVja2V0OiB0aGlzLmJ1Y2tldCxcbiAgICAgIEtleToga2V5LFxuICAgICAgQm9keTogYnVmZmVyLFxuICAgICAgQ29udGVudFR5cGU6IGNvbnRlbnRUeXBlLFxuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5zM0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgIHJldHVybiB0aGlzLmdldFB1YmxpY1VybChrZXkpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBEZWxldGVPYmplY3RDb21tYW5kKHtcbiAgICAgIEJ1Y2tldDogdGhpcy5idWNrZXQsXG4gICAgICBLZXk6IGtleSxcbiAgICB9KTtcblxuICAgIGF3YWl0IHRoaXMuczNDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgfVxuXG4gIGFzeW5jIGdldFB1YmxpY1VybChrZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgZW5kcG9pbnQgPSBwcm9jZXNzLmVudi4ke3Byb3ZpZGVyID09PSAncjInID8gJ1IyX1BVQkxJQ19VUkwnIDogJ1MzX1BVQkxJQ19VUkwnfTtcbiAgICByZXR1cm4gXFxgXFwke2VuZHBvaW50fS9cXCR7a2V5fVxcYDtcbiAgfVxuXG4gIGFzeW5jIGdldFNpZ25lZFVybChrZXk6IHN0cmluZywgZXhwaXJlc0luOiBudW1iZXIgPSAzNjAwKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IEdldE9iamVjdENvbW1hbmQoe1xuICAgICAgQnVja2V0OiB0aGlzLmJ1Y2tldCxcbiAgICAgIEtleToga2V5LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGdldFNpZ25lZFVybCh0aGlzLnMzQ2xpZW50LCBjb21tYW5kLCB7IGV4cGlyZXNJbiB9KTtcbiAgfWAgOiAnJ30ke3Byb3ZpZGVyID09PSAnbG9jYWwnID8gYCAgcHJpdmF0ZSB1cGxvYWREaXI6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnVwbG9hZERpciA9IHByb2Nlc3MuZW52LlVQTE9BRF9ESVIgfHwgcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICd1cGxvYWRzJyk7XG4gIH1cblxuICBhc3luYyB1cGxvYWQoa2V5OiBzdHJpbmcsIGJ1ZmZlcjogQnVmZmVyLCBjb250ZW50VHlwZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0aGlzLnVwbG9hZERpciwga2V5KTtcbiAgICBjb25zdCBkaXIgPSBwYXRoLmRpcm5hbWUoZmlsZVBhdGgpO1xuXG4gICAgLy8gRW5zdXJlIGRpcmVjdG9yeSBleGlzdHNcbiAgICBhd2FpdCBmcy5ta2RpcihkaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuXG4gICAgLy8gV3JpdGUgZmlsZVxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShmaWxlUGF0aCwgYnVmZmVyKTtcblxuICAgIHJldHVybiB0aGlzLmdldFB1YmxpY1VybChrZXkpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy51cGxvYWREaXIsIGtleSk7XG4gICAgYXdhaXQgZnMudW5saW5rKGZpbGVQYXRoKTtcbiAgfVxuXG4gIGFzeW5jIGdldFB1YmxpY1VybChrZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgYmFzZVVybCA9IHByb2Nlc3MuZW52LkJBU0VfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OiR7Y29uZmlnLnBvcnQgfHwgMzAwNH0nO1xuICAgIHJldHVybiBcXGBcXCR7YmFzZVVybH0vZmlsZXMvXFwke2tleX1cXGA7XG4gIH1cblxuICBhc3luYyBnZXRTaWduZWRVcmwoa2V5OiBzdHJpbmcsIGV4cGlyZXNJbjogbnVtYmVyID0gMzYwMCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLy8gRm9yIGxvY2FsIHN0b3JhZ2UsIGp1c3QgcmV0dXJuIHRoZSBwdWJsaWMgVVJMXG4gICAgcmV0dXJuIHRoaXMuZ2V0UHVibGljVXJsKGtleSk7XG4gIH1gIDogJyd9XG59XG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUltYWdlU2VydmljZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgaW1wb3J0IHNoYXJwIGZyb20gJ3NoYXJwJztcblxuZXhwb3J0IGNsYXNzIEltYWdlU2VydmljZSB7XG4gIGFzeW5jIG9wdGltaXplKGJ1ZmZlcjogQnVmZmVyLCBtaW1lVHlwZTogc3RyaW5nKTogUHJvbWlzZTxCdWZmZXI+IHtcbiAgICBjb25zdCBpbWFnZSA9IHNoYXJwKGJ1ZmZlcik7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBpbWFnZS5tZXRhZGF0YSgpO1xuXG4gICAgLy8gUmVzaXplIGlmIHRvbyBsYXJnZVxuICAgIGlmIChtZXRhZGF0YS53aWR0aCAmJiBtZXRhZGF0YS53aWR0aCA+IDIwMDApIHtcbiAgICAgIGltYWdlLnJlc2l6ZSgyMDAwLCBudWxsLCB7IHdpdGhvdXRFbmxhcmdlbWVudDogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHRvIGFwcHJvcHJpYXRlIGZvcm1hdCBhbmQgb3B0aW1pemVcbiAgICBpZiAobWltZVR5cGUgPT09ICdpbWFnZS9wbmcnKSB7XG4gICAgICByZXR1cm4gaW1hZ2UucG5nKHsgcXVhbGl0eTogODAsIGNvbXByZXNzaW9uTGV2ZWw6IDkgfSkudG9CdWZmZXIoKTtcbiAgICB9IGVsc2UgaWYgKG1pbWVUeXBlID09PSAnaW1hZ2UvanBlZycgfHwgbWltZVR5cGUgPT09ICdpbWFnZS9qcGcnKSB7XG4gICAgICByZXR1cm4gaW1hZ2UuanBlZyh7IHF1YWxpdHk6IDgwLCBwcm9ncmVzc2l2ZTogdHJ1ZSB9KS50b0J1ZmZlcigpO1xuICAgIH0gZWxzZSBpZiAobWltZVR5cGUgPT09ICdpbWFnZS93ZWJwJykge1xuICAgICAgcmV0dXJuIGltYWdlLndlYnAoeyBxdWFsaXR5OiA4MCB9KS50b0J1ZmZlcigpO1xuICAgIH1cblxuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZVRodW1ibmFpbChidWZmZXI6IEJ1ZmZlciwgd2lkdGg6IG51bWJlciA9IDIwMCk6IFByb21pc2U8QnVmZmVyPiB7XG4gICAgcmV0dXJuIHNoYXJwKGJ1ZmZlcilcbiAgICAgIC5yZXNpemUod2lkdGgsIG51bGwsIHsgd2l0aG91dEVubGFyZ2VtZW50OiB0cnVlIH0pXG4gICAgICAuanBlZyh7IHF1YWxpdHk6IDcwIH0pXG4gICAgICAudG9CdWZmZXIoKTtcbiAgfVxufVxuYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVGaWxlUmVwb3NpdG9yeSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuaW1wb3J0IHsgRmlsZSwgQ3JlYXRlRmlsZUlucHV0IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmV4cG9ydCBjbGFzcyBGaWxlUmVwb3NpdG9yeSB7XG4gIGFzeW5jIGNyZWF0ZShkYXRhOiBDcmVhdGVGaWxlSW5wdXQpOiBQcm9taXNlPEZpbGU+IHtcbiAgICByZXR1cm4gcHJpc21hLmZpbGUuY3JlYXRlKHsgZGF0YSB9KTtcbiAgfVxuXG4gIGFzeW5jIGZpbmRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPEZpbGUgfCBudWxsPiB7XG4gICAgcmV0dXJuIHByaXNtYS5maWxlLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICB9XG5cbiAgYXN5bmMgZmluZEJ5VXNlcklkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxGaWxlW10+IHtcbiAgICByZXR1cm4gcHJpc21hLmZpbGUuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHByaXNtYS5maWxlLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSk7XG4gIH1cbn1cbmA7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlVXBsb2FkTWlkZGxld2FyZShjb25maWc6IFN0b3JhZ2VTZXJ2aWNlQ29uZmlnKTogc3RyaW5nIHtcbiAgICBjb25zdCBtYXhTaXplID0gKGNvbmZpZy5tYXhGaWxlU2l6ZSB8fCAxMCkgKiAxMDI0ICogMTAyNDsgLy8gQ29udmVydCBNQiB0byBieXRlc1xuICAgIFxuICAgIHJldHVybiBgaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xuaW1wb3J0IHsgQXBwRXJyb3IgfSBmcm9tICcuL2Vycm9yLWhhbmRsZXInO1xuXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLm1lbW9yeVN0b3JhZ2UoKTtcblxuY29uc3QgZmlsZUZpbHRlciA9IChyZXE6IGFueSwgZmlsZTogRXhwcmVzcy5NdWx0ZXIuRmlsZSwgY2I6IG11bHRlci5GaWxlRmlsdGVyQ2FsbGJhY2spID0+IHtcbiAgLy8gQWRkIGZpbGUgdHlwZSB2YWxpZGF0aW9uIGhlcmUgaWYgbmVlZGVkXG4gIGNiKG51bGwsIHRydWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IHVwbG9hZE1pZGRsZXdhcmUgPSBtdWx0ZXIoe1xuICBzdG9yYWdlLFxuICBmaWxlRmlsdGVyLFxuICBsaW1pdHM6IHtcbiAgICBmaWxlU2l6ZTogJHttYXhTaXplfSwgLy8gJHtjb25maWcubWF4RmlsZVNpemUgfHwgMTB9TUJcbiAgfSxcbn0pO1xuYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVUeXBlcyhjb25maWc6IFN0b3JhZ2VTZXJ2aWNlQ29uZmlnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGV4cG9ydCBpbnRlcmZhY2UgRmlsZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBrZXk6IHN0cmluZztcbiAgb3JpZ2luYWxOYW1lOiBzdHJpbmc7XG4gIG1pbWVUeXBlOiBzdHJpbmc7XG4gIHNpemU6IG51bWJlcjtcbiAgdXJsOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUZpbGVJbnB1dCB7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBrZXk6IHN0cmluZztcbiAgb3JpZ2luYWxOYW1lOiBzdHJpbmc7XG4gIG1pbWVUeXBlOiBzdHJpbmc7XG4gIHNpemU6IG51bWJlcjtcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkZWRGaWxlIHtcbiAgaWQ6IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG4gIG9yaWdpbmFsTmFtZTogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIG1pbWVUeXBlOiBzdHJpbmc7XG59XG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVZhbGlkYXRpb25TY2hlbWFzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuZXhwb3J0IGNvbnN0IFN0b3JhZ2VTY2hlbWFzID0ge1xuICB1cGxvYWQ6IHoub2JqZWN0KHtcbiAgICBmaWxlOiB6LmFueSgpLFxuICB9KSxcbn07XG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVByaXNtYVNjaGVtYSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgZ2VuZXJhdG9yIGNsaWVudCB7XG4gIHByb3ZpZGVyID0gXCJwcmlzbWEtY2xpZW50LWpzXCJcbn1cblxuZGF0YXNvdXJjZSBkYiB7XG4gIHByb3ZpZGVyID0gXCJwb3N0Z3Jlc3FsXCJcbiAgdXJsICAgICAgPSBlbnYoXCJEQVRBQkFTRV9VUkxcIilcbn1cblxubW9kZWwgRmlsZSB7XG4gIGlkICAgICAgICAgICBTdHJpbmcgICBAaWQgQGRlZmF1bHQoY3VpZCgpKVxuICB1c2VySWQgICAgICAgU3RyaW5nXG4gIGtleSAgICAgICAgICBTdHJpbmcgICBAdW5pcXVlXG4gIG9yaWdpbmFsTmFtZSBTdHJpbmdcbiAgbWltZVR5cGUgICAgIFN0cmluZ1xuICBzaXplICAgICAgICAgSW50XG4gIHVybCAgICAgICAgICBTdHJpbmdcbiAgY3JlYXRlZEF0ICAgIERhdGVUaW1lIEBkZWZhdWx0KG5vdygpKVxuICB1cGRhdGVkQXQgICAgRGF0ZVRpbWUgQHVwZGF0ZWRBdFxuICBcbiAgQEBpbmRleChbdXNlcklkXSlcbiAgQEBpbmRleChbY3JlYXRlZEF0XSlcbiAgQEBtYXAoXCJmaWxlc1wiKVxufVxuYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVQYWNrYWdlSnNvbihjb25maWc6IFN0b3JhZ2VTZXJ2aWNlQ29uZmlnKTogc3RyaW5nIHtcbiAgICBjb25zdCBwcm92aWRlciA9IGNvbmZpZy5wcm92aWRlciB8fCAnczMnO1xuICAgIGNvbnN0IGRlcGVuZGVuY2llczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIGV4cHJlc3M6ICdeNC4xOC4yJyxcbiAgICAgIGNvcnM6ICdeMi44LjUnLFxuICAgICAgaGVsbWV0OiAnXjcuMS4wJyxcbiAgICAgIHpvZDogJ14zLjIyLjQnLFxuICAgICAgJ0BwcmlzbWEvY2xpZW50JzogJ141LjcuMScsXG4gICAgICBtdWx0ZXI6ICdeMS40LjUtbHRzLjEnLFxuICAgIH07XG5cbiAgICBpZiAocHJvdmlkZXIgPT09ICdzMycgfHwgcHJvdmlkZXIgPT09ICdyMicpIHtcbiAgICAgIGRlcGVuZGVuY2llc1snQGF3cy1zZGsvY2xpZW50LXMzJ10gPSAnXjMuNDcwLjAnO1xuICAgICAgZGVwZW5kZW5jaWVzWydAYXdzLXNkay9zMy1yZXF1ZXN0LXByZXNpZ25lciddID0gJ14zLjQ3MC4wJztcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmVuYWJsZUltYWdlT3B0aW1pemF0aW9uKSB7XG4gICAgICBkZXBlbmRlbmNpZXNbJ3NoYXJwJ10gPSAnXjAuMzMuMSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIG5hbWU6ICdzdG9yYWdlLXNlcnZpY2UnLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRmlsZSBTdG9yYWdlIFNlcnZpY2UnLFxuICAgICAgbWFpbjogJ2Rpc3QvaW5kZXguanMnLFxuICAgICAgc2NyaXB0czoge1xuICAgICAgICBkZXY6ICd0cy1ub2RlLWRldiAtLXJlc3Bhd24gLS10cmFuc3BpbGUtb25seSBzcmMvaW5kZXgudHMnLFxuICAgICAgICBidWlsZDogJ3RzYycsXG4gICAgICAgIHN0YXJ0OiAnbm9kZSBkaXN0L2luZGV4LmpzJyxcbiAgICAgICAgdGVzdDogJ2plc3QnLFxuICAgICAgICAndGVzdDp3YXRjaCc6ICdqZXN0IC0td2F0Y2gnLFxuICAgICAgICAncHJpc21hOmdlbmVyYXRlJzogJ3ByaXNtYSBnZW5lcmF0ZScsXG4gICAgICAgICdwcmlzbWE6bWlncmF0ZSc6ICdwcmlzbWEgbWlncmF0ZSBkZXYnLFxuICAgICAgfSxcbiAgICAgIGRlcGVuZGVuY2llcyxcbiAgICAgIGRldkRlcGVuZGVuY2llczoge1xuICAgICAgICAnQHR5cGVzL2V4cHJlc3MnOiAnXjQuMTcuMjEnLFxuICAgICAgICAnQHR5cGVzL2NvcnMnOiAnXjIuOC4xNycsXG4gICAgICAgICdAdHlwZXMvbm9kZSc6ICdeMjAuMTAuNScsXG4gICAgICAgICdAdHlwZXMvbXVsdGVyJzogJ14xLjQuMTEnLFxuICAgICAgICB0eXBlc2NyaXB0OiAnXjUuMy4zJyxcbiAgICAgICAgJ3RzLW5vZGUtZGV2JzogJ14yLjAuMCcsXG4gICAgICAgIGplc3Q6ICdeMjkuNy4wJyxcbiAgICAgICAgJ0B0eXBlcy9qZXN0JzogJ14yOS41LjExJyxcbiAgICAgICAgJ3RzLWplc3QnOiAnXjI5LjEuMScsXG4gICAgICAgIHByaXNtYTogJ141LjcuMScsXG4gICAgICB9LFxuICAgIH0sIG51bGwsIDIpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUVudkV4YW1wbGUoY29uZmlnOiBTdG9yYWdlU2VydmljZUNvbmZpZyk6IHN0cmluZyB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBjb25maWcucHJvdmlkZXIgfHwgJ3MzJztcbiAgICBsZXQgZW52ID0gYFBPUlQ9JHtjb25maWcucG9ydCB8fCAzMDA0fVxcbk5PREVfRU5WPWRldmVsb3BtZW50XFxuXFxuREFUQUJBU0VfVVJMPXBvc3RncmVzcWw6Ly91c2VyOnBhc3N3b3JkQGxvY2FsaG9zdDo1NDMyL3N0b3JhZ2VfZGJcXG5gO1xuXG4gICAgaWYgKHByb3ZpZGVyID09PSAnczMnKSB7XG4gICAgICBlbnYgKz0gJ1xcbkFXU19SRUdJT049dXMtZWFzdC0xXFxuQVdTX0FDQ0VTU19LRVlfSUQ9eW91cl9hY2Nlc3Nfa2V5XFxuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZPXlvdXJfc2VjcmV0X2tleVxcblMzX0JVQ0tFVD15b3VyLWJ1Y2tldC1uYW1lXFxuUzNfUFVCTElDX1VSTD1odHRwczovL3lvdXItYnVja2V0LnMzLmFtYXpvbmF3cy5jb21cXG4nO1xuICAgIH0gZWxzZSBpZiAocHJvdmlkZXIgPT09ICdyMicpIHtcbiAgICAgIGVudiArPSAnXFxuUjJfUkVHSU9OPWF1dG9cXG5SMl9FTkRQT0lOVD1odHRwczovL3lvdXItYWNjb3VudC1pZC5yMi5jbG91ZGZsYXJlc3RvcmFnZS5jb21cXG5SMl9BQ0NFU1NfS0VZX0lEPXlvdXJfYWNjZXNzX2tleVxcblIyX1NFQ1JFVF9BQ0NFU1NfS0VZPXlvdXJfc2VjcmV0X2tleVxcblIyX0JVQ0tFVD15b3VyLWJ1Y2tldC1uYW1lXFxuUjJfUFVCTElDX1VSTD1odHRwczovL3lvdXItZG9tYWluLmNvbVxcbic7XG4gICAgfSBlbHNlIGlmIChwcm92aWRlciA9PT0gJ2xvY2FsJykge1xuICAgICAgZW52ICs9ICdcXG5VUExPQURfRElSPS4vdXBsb2Fkc1xcbkJBU0VfVVJMPWh0dHA6Ly9sb2NhbGhvc3Q6MzAwNFxcbic7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudjtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWFkbWUoY29uZmlnOiBTdG9yYWdlU2VydmljZUNvbmZpZyk6IHN0cmluZyB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBjb25maWcucHJvdmlkZXIgfHwgJ3MzJztcbiAgICByZXR1cm4gYCMgU3RvcmFnZSBTZXJ2aWNlXG5cbkZpbGUgc3RvcmFnZSBzZXJ2aWNlIHdpdGggJHtwcm92aWRlci50b1VwcGVyQ2FzZSgpfSBpbnRlZ3JhdGlvbiR7Y29uZmlnLmVuYWJsZUltYWdlT3B0aW1pemF0aW9uID8gJyBhbmQgaW1hZ2Ugb3B0aW1pemF0aW9uJyA6ICcnfS5cblxuIyMgRmVhdHVyZXNcblxuLSBGaWxlIHVwbG9hZCBhbmQgZG93bmxvYWRcbi0gJHtwcm92aWRlci50b1VwcGVyQ2FzZSgpfSBzdG9yYWdlIGludGVncmF0aW9uXG4ke2NvbmZpZy5lbmFibGVTaWduZWRVcmxzID8gJy0gU2lnbmVkIFVSTCBnZW5lcmF0aW9uXFxuJyA6ICcnfSR7Y29uZmlnLmVuYWJsZUltYWdlT3B0aW1pemF0aW9uID8gJy0gQXV0b21hdGljIGltYWdlIG9wdGltaXphdGlvblxcbicgOiAnJ30tIEZpbGUgbWV0YWRhdGEgdHJhY2tpbmdcbi0gTXVsdGktZmlsZSB1cGxvYWQgc3VwcG9ydFxuXG4jIyBJbnN0YWxsYXRpb25cblxuXFxgXFxgXFxgYmFzaFxubnBtIGluc3RhbGxcblxcYFxcYFxcYFxuXG4jIyBEYXRhYmFzZSBTZXR1cFxuXG5cXGBcXGBcXGBiYXNoXG5ucHggcHJpc21hIG1pZ3JhdGUgZGV2XG5ucHggcHJpc21hIGdlbmVyYXRlXG5cXGBcXGBcXGBcblxuIyMgQ29uZmlndXJhdGlvblxuXG5Db3B5IFxcYC5lbnYuZXhhbXBsZVxcYCB0byBcXGAuZW52XFxgIGFuZCBjb25maWd1cmUgeW91ciAke3Byb3ZpZGVyLnRvVXBwZXJDYXNlKCl9IGNyZWRlbnRpYWxzLlxuXG4jIyBEZXZlbG9wbWVudFxuXG5cXGBcXGBcXGBiYXNoXG5ucG0gcnVuIGRldlxuXFxgXFxgXFxgXG5cbiMjIFByb2R1Y3Rpb25cblxuXFxgXFxgXFxgYmFzaFxubnBtIHJ1biBidWlsZFxubnBtIHN0YXJ0XG5cXGBcXGBcXGBcblxuIyMgQVBJIEVuZHBvaW50c1xuXG4tIFxcYFBPU1QgL2FwaS9zdG9yYWdlL3VwbG9hZFxcYCAtIFVwbG9hZCBzaW5nbGUgZmlsZVxuLSBcXGBQT1NUIC9hcGkvc3RvcmFnZS91cGxvYWQtbXVsdGlwbGVcXGAgLSBVcGxvYWQgbXVsdGlwbGUgZmlsZXNcbi0gXFxgR0VUIC9hcGkvc3RvcmFnZS86aWRcXGAgLSBHZXQgZmlsZSBtZXRhZGF0YVxuLSBcXGBHRVQgL2FwaS9zdG9yYWdlLzppZC9kb3dubG9hZFxcYCAtIERvd25sb2FkIGZpbGVcbiR7Y29uZmlnLmVuYWJsZVNpZ25lZFVybHMgPyAnLSBgR0VUIC9hcGkvc3RvcmFnZS86aWQvc2lnbmVkLXVybGAgLSBHZXQgc2lnbmVkIFVSTFxcbicgOiAnJ30tIFxcYERFTEVURSAvYXBpL3N0b3JhZ2UvOmlkXFxgIC0gRGVsZXRlIGZpbGVcbi0gXFxgR0VUIC9hcGkvc3RvcmFnZVxcYCAtIExpc3QgdXNlciBmaWxlc1xuXG4jIyBUZXN0aW5nXG5cblxcYFxcYFxcYGJhc2hcbm5wbSB0ZXN0XG5cXGBcXGBcXGBcbiR7Y29uZmlnLmVuYWJsZUltYWdlT3B0aW1pemF0aW9uID8gYFxuIyMgSW1hZ2UgT3B0aW1pemF0aW9uXG5cbkltYWdlcyBhcmUgYXV0b21hdGljYWxseSBvcHRpbWl6ZWQgb24gdXBsb2FkOlxuLSBSZXNpemVkIHRvIG1heCAyMDAwcHggd2lkdGhcbi0gQ29tcHJlc3NlZCB3aXRoIHF1YWxpdHkgODBcbi0gQ29udmVydGVkIHRvIGFwcHJvcHJpYXRlIGZvcm1hdFxuYCA6ICcnfVxuYDtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFBNkIsU0FBQUQsd0JBQUFFLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFKLHVCQUFBLFlBQUFBLENBQUFFLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEsSUFBQUEsQ0FBQSxDQUFBSyxVQUFBLFNBQUFMLENBQUEsTUFBQU0sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBQyxPQUFBLEVBQUFWLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVEsQ0FBQSxNQUFBRixDQUFBLEdBQUFMLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFHLENBQUEsQ0FBQUssR0FBQSxDQUFBWCxDQUFBLFVBQUFNLENBQUEsQ0FBQU0sR0FBQSxDQUFBWixDQUFBLEdB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