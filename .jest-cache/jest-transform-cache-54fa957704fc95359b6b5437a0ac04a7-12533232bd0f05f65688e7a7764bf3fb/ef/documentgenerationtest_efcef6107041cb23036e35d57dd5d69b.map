{"version":3,"names":["_documentGenerationService","require","_legalService","describe","mockBusinessId","mockUserId","templateId","beforeAll","templates","legalService","getTemplates","id","it","documentData","data","businessName","businessType","ownerName","date","additionalTerms","document","documentGenerationService","generateDocument","expect","toBeDefined","businessId","toBe","status","content","toContain","rejects","toThrow","pdfBuffer","generatePDF","Buffer","isBuffer","length","toBeGreaterThan","batchData","businessActivity","location","fiscalYear","managementStructure","decisionMaking","amendmentProcedures","documents","generateBatchDocuments","updatedContent","updated","updateGeneratedDocument","updatedAt","getTime","toBeGreaterThanOrEqual","text","exportAsText","json","exportAsJSON","history","getGenerationHistory","Array","isArray","toHaveProperty","versions","getDocumentVersions","originalContent","restored","restoreDocumentVersion","storePDF","retrieved","retrievePDF","result","validateDocumentData","valid","errors","warnings","stats","getGenerationStats","totalGenerated","byStatus","byTemplate","styling","fontSize","fontFamily","headerText","footerText","generateStyledDocument"],"sources":["document-generation.test.ts"],"sourcesContent":["import { documentGenerationService } from '../services/document-generation.service.js';\r\nimport { legalService } from '../services/legal.service.js';\r\n\r\ndescribe('DocumentGenerationService', () => {\r\n  const mockBusinessId = 'test-business-123';\r\n  const mockUserId = 'test-user-123';\r\n  let templateId: string;\r\n\r\n  beforeAll(async () => {\r\n    // Get a template to use for testing\r\n    const templates = await legalService.getTemplates();\r\n    templateId = templates[0].id;\r\n  });\r\n\r\n  describe('generateDocument', () => {\r\n    it('should generate a document from template with data population', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Test Business',\r\n          businessType: 'e-commerce',\r\n          ownerName: 'John Doe',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Standard terms apply',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      expect(document).toBeDefined();\r\n      expect(document.id).toBeDefined();\r\n      expect(document.businessId).toBe(mockBusinessId);\r\n      expect(document.templateId).toBe(templateId);\r\n      expect(document.status).toBe('draft');\r\n      expect(document.content).toContain('Test Business');\r\n      expect(document.content).toContain('John Doe');\r\n    });\r\n\r\n    it('should throw error when required fields are missing', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Test Business',\r\n          // Missing other required fields\r\n        },\r\n      };\r\n\r\n      await expect(\r\n        documentGenerationService.generateDocument(mockBusinessId, documentData, mockUserId)\r\n      ).rejects.toThrow();\r\n    });\r\n\r\n    it('should throw error when template does not exist', async () => {\r\n      const documentData = {\r\n        templateId: 'non-existent-template',\r\n        data: {\r\n          businessName: 'Test Business',\r\n        },\r\n      };\r\n\r\n      await expect(\r\n        documentGenerationService.generateDocument(mockBusinessId, documentData, mockUserId)\r\n      ).rejects.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('generatePDF', () => {\r\n    it('should generate PDF from document content', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'PDF Test Business',\r\n          businessType: 'tutoring',\r\n          ownerName: 'Jane Doe',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'PDF test terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      const pdfBuffer = await documentGenerationService.generatePDF(document.id, mockUserId);\r\n\r\n      expect(pdfBuffer).toBeDefined();\r\n      expect(Buffer.isBuffer(pdfBuffer)).toBe(true);\r\n      expect(pdfBuffer.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should throw error when document does not exist', async () => {\r\n      await expect(\r\n        documentGenerationService.generatePDF('non-existent-doc', mockUserId)\r\n      ).rejects.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('generateBatchDocuments', () => {\r\n    it('should generate multiple documents in batch', async () => {\r\n      const templates = await legalService.getTemplates();\r\n      const batchData = [\r\n        {\r\n          templateId: templates[0].id,\r\n          data: {\r\n            businessName: 'Batch Business 1',\r\n            businessType: 'ride-sharing',\r\n            ownerName: 'Owner 1',\r\n            date: '2024-01-01',\r\n            additionalTerms: 'Terms 1',\r\n          },\r\n        },\r\n        {\r\n          templateId: templates[1].id,\r\n          data: {\r\n            businessName: 'Batch Business 2',\r\n            businessActivity: 'Operations',\r\n            location: 'New York',\r\n            fiscalYear: '2024',\r\n            managementStructure: 'Solo',\r\n            decisionMaking: 'Owner decides',\r\n            amendmentProcedures: 'Written notice',\r\n          },\r\n        },\r\n      ];\r\n\r\n      const documents = await documentGenerationService.generateBatchDocuments(\r\n        mockBusinessId,\r\n        batchData,\r\n        mockUserId\r\n      );\r\n\r\n      expect(documents).toBeDefined();\r\n      expect(documents.length).toBeGreaterThan(0);\r\n      expect(documents[0].content).toContain('Batch Business 1');\r\n    });\r\n  });\r\n\r\n  describe('updateGeneratedDocument', () => {\r\n    it('should update document content', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Update Test Business',\r\n          businessType: 'gig-platform',\r\n          ownerName: 'Update Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Update terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      const updatedContent = document.content + '\\n\\nUpdated content added.';\r\n      const updated = await documentGenerationService.updateGeneratedDocument(\r\n        document.id,\r\n        mockUserId,\r\n        {\r\n          content: updatedContent,\r\n        }\r\n      );\r\n\r\n      expect(updated.content).toContain('Updated content added');\r\n      expect(updated.updatedAt.getTime()).toBeGreaterThanOrEqual(document.updatedAt.getTime());\r\n    });\r\n\r\n    it('should update document status', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Status Test Business',\r\n          businessType: 'e-commerce',\r\n          ownerName: 'Status Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Status terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      const updated = await documentGenerationService.updateGeneratedDocument(\r\n        document.id,\r\n        mockUserId,\r\n        {\r\n          status: 'signed',\r\n        }\r\n      );\r\n\r\n      expect(updated.status).toBe('signed');\r\n    });\r\n  });\r\n\r\n  describe('exportAsText', () => {\r\n    it('should export document as text', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Export Test Business',\r\n          businessType: 'tutoring',\r\n          ownerName: 'Export Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Export terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      const text = await documentGenerationService.exportAsText(document.id, mockUserId);\r\n\r\n      expect(typeof text).toBe('string');\r\n      expect(text).toContain('Export Test Business');\r\n    });\r\n  });\r\n\r\n  describe('exportAsJSON', () => {\r\n    it('should export document as JSON', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'JSON Export Business',\r\n          businessType: 'ride-sharing',\r\n          ownerName: 'JSON Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'JSON terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      const json = await documentGenerationService.exportAsJSON(document.id, mockUserId);\r\n\r\n      expect(json).toBeDefined();\r\n      expect(json.id).toBe(document.id);\r\n      expect(json.businessId).toBe(mockBusinessId);\r\n      expect(json.status).toBe('draft');\r\n      expect(json.content).toContain('JSON Export Business');\r\n    });\r\n  });\r\n\r\n  describe('getGenerationHistory', () => {\r\n    it('should retrieve generation history for a business', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'History Test Business',\r\n          businessType: 'e-commerce',\r\n          ownerName: 'History Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'History terms',\r\n        },\r\n      };\r\n\r\n      await documentGenerationService.generateDocument(mockBusinessId, documentData, mockUserId);\r\n\r\n      const history = await documentGenerationService.getGenerationHistory(mockBusinessId);\r\n\r\n      expect(Array.isArray(history)).toBe(true);\r\n      expect(history.length).toBeGreaterThan(0);\r\n      expect(history[0]).toHaveProperty('documentId');\r\n      expect(history[0]).toHaveProperty('templateId');\r\n      expect(history[0]).toHaveProperty('generatedAt');\r\n      expect(history[0]).toHaveProperty('status');\r\n    });\r\n  });\r\n\r\n  describe('getDocumentVersions', () => {\r\n    it('should retrieve version history for a document', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Version Test Business',\r\n          businessType: 'gig-platform',\r\n          ownerName: 'Version Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Version terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      // Update document to create a new version\r\n      await documentGenerationService.updateGeneratedDocument(document.id, mockUserId, {\r\n        content: document.content + '\\n\\nVersion 2 content',\r\n      });\r\n\r\n      const versions = await documentGenerationService.getDocumentVersions(\r\n        document.id,\r\n        mockUserId\r\n      );\r\n\r\n      expect(Array.isArray(versions)).toBe(true);\r\n      expect(versions.length).toBeGreaterThanOrEqual(1);\r\n      expect(versions[0]).toHaveProperty('version');\r\n      expect(versions[0]).toHaveProperty('content');\r\n      expect(versions[0]).toHaveProperty('status');\r\n      expect(versions[0]).toHaveProperty('updatedAt');\r\n    });\r\n  });\r\n\r\n  describe('restoreDocumentVersion', () => {\r\n    it('should restore document to previous version', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Restore Test Business',\r\n          businessType: 'tutoring',\r\n          ownerName: 'Restore Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Restore terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      const originalContent = document.content;\r\n\r\n      // Update document\r\n      await documentGenerationService.updateGeneratedDocument(document.id, mockUserId, {\r\n        content: originalContent + '\\n\\nModified content',\r\n      });\r\n\r\n      // Restore to version 1\r\n      const restored = await documentGenerationService.restoreDocumentVersion(\r\n        document.id,\r\n        mockUserId,\r\n        1\r\n      );\r\n\r\n      expect(restored.content).toBe(originalContent);\r\n    });\r\n\r\n    it('should throw error for invalid version number', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Invalid Version Business',\r\n          businessType: 'e-commerce',\r\n          ownerName: 'Invalid Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Invalid terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      await expect(\r\n        documentGenerationService.restoreDocumentVersion(document.id, mockUserId, 999)\r\n      ).rejects.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('storePDF and retrievePDF', () => {\r\n    it('should store and retrieve PDF', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'PDF Storage Business',\r\n          businessType: 'ride-sharing',\r\n          ownerName: 'PDF Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'PDF storage terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      const pdfBuffer = await documentGenerationService.generatePDF(document.id, mockUserId);\r\n      await documentGenerationService.storePDF(document.id, pdfBuffer);\r\n\r\n      const retrieved = await documentGenerationService.retrievePDF(document.id, mockUserId);\r\n\r\n      expect(Buffer.isBuffer(retrieved)).toBe(true);\r\n      expect(retrieved.length).toBe(pdfBuffer.length);\r\n    });\r\n\r\n    it('should throw error when retrieving non-existent PDF', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'No PDF Business',\r\n          businessType: 'tutoring',\r\n          ownerName: 'No PDF Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'No PDF terms',\r\n        },\r\n      };\r\n\r\n      const document = await documentGenerationService.generateDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        mockUserId\r\n      );\r\n\r\n      // Don't store PDF, just try to retrieve\r\n      await expect(\r\n        documentGenerationService.retrievePDF(document.id, mockUserId)\r\n      ).rejects.toThrow();\r\n    });\r\n  });\r\n\r\n  describe('validateDocumentData', () => {\r\n    it('should validate document data successfully', async () => {\r\n      const data = {\r\n        businessName: 'Valid Business',\r\n        businessType: 'e-commerce',\r\n        ownerName: 'Valid Owner',\r\n        date: '2024-01-01',\r\n        additionalTerms: 'Valid terms',\r\n      };\r\n\r\n      const result = await documentGenerationService.validateDocumentData(templateId, data);\r\n\r\n      expect(result.valid).toBe(true);\r\n      expect(result.errors.length).toBe(0);\r\n    });\r\n\r\n    it('should detect missing required fields', async () => {\r\n      const data = {\r\n        businessName: 'Incomplete Business',\r\n        // Missing other required fields\r\n      };\r\n\r\n      const result = await documentGenerationService.validateDocumentData(templateId, data);\r\n\r\n      expect(result.valid).toBe(false);\r\n      expect(result.errors.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should detect empty field values', async () => {\r\n      const data = {\r\n        businessName: '',\r\n        businessType: 'e-commerce',\r\n        ownerName: 'Owner',\r\n        date: '2024-01-01',\r\n        additionalTerms: 'Terms',\r\n      };\r\n\r\n      const result = await documentGenerationService.validateDocumentData(templateId, data);\r\n\r\n      expect(result.warnings.length).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  describe('getGenerationStats', () => {\r\n    it('should retrieve generation statistics', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Stats Test Business',\r\n          businessType: 'gig-platform',\r\n          ownerName: 'Stats Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Stats terms',\r\n        },\r\n      };\r\n\r\n      await documentGenerationService.generateDocument(mockBusinessId, documentData, mockUserId);\r\n\r\n      const stats = await documentGenerationService.getGenerationStats(mockBusinessId);\r\n\r\n      expect(stats).toBeDefined();\r\n      expect(stats.totalGenerated).toBeGreaterThan(0);\r\n      expect(stats.byStatus).toBeDefined();\r\n      expect(stats.byTemplate).toBeDefined();\r\n      expect(stats.byStatus['draft']).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  describe('generateStyledDocument', () => {\r\n    it('should generate document with custom styling', async () => {\r\n      const documentData = {\r\n        templateId,\r\n        data: {\r\n          businessName: 'Styled Business',\r\n          businessType: 'e-commerce',\r\n          ownerName: 'Styled Owner',\r\n          date: '2024-01-01',\r\n          additionalTerms: 'Styled terms',\r\n        },\r\n      };\r\n\r\n      const styling = {\r\n        fontSize: 12,\r\n        fontFamily: 'Arial',\r\n        headerText: 'OFFICIAL DOCUMENT',\r\n        footerText: 'Page 1 of 1',\r\n      };\r\n\r\n      const document = await documentGenerationService.generateStyledDocument(\r\n        mockBusinessId,\r\n        documentData,\r\n        styling\r\n      );\r\n\r\n      expect(document).toBeDefined();\r\n      expect(document.content).toContain('OFFICIAL DOCUMENT');\r\n      expect(document.content).toContain('Page 1 of 1');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}