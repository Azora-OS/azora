3c191bb4add7374840dc655882575283
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.NetworkSandbox = void 0;
var https = _interopRequireWildcard(require("https"));
var http = _interopRequireWildcard(require("http"));
var _url = require("url");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * Network request options
 */

/**
 * Network response
 */

/**
 * Network request metadata
 */

/**
 * NetworkSandbox provides a secure layer for all network requests made by AzStudio.
 * It enforces domain allowlisting, monitors network activity, and logs all requests
 * for audit purposes.
 * 
 * Features:
 * - Domain allowlist enforcement
 * - Permission prompts for unknown domains
 * - Request/response logging
 * - Network activity monitoring
 * - Rate limiting per domain
 * - Request timeout enforcement
 */
class NetworkSandbox {
  static DEFAULT_TIMEOUT = 30000; // 30 seconds
  static MAX_REQUESTS_PER_MINUTE = 60;
  requestCounts = new Map();
  activeRequests = new Map();
  constructor(permissionManager, auditLogger) {
    this.permissionManager = permissionManager;
    this.auditLogger = auditLogger;
  }

  /**
   * Make a network request with sandboxing
   */
  async request(url, options = {}) {
    const startTime = Date.now();
    const parsedUrl = new _url.URL(url);
    const domain = parsedUrl.hostname;
    const method = options.method || 'GET';

    // Check if domain is allowed
    const allowed = await this.permissionManager.isNetworkAllowed(domain);
    if (!allowed) {
      await this.auditLogger.logNetworkRequest(url, method, {
        success: false,
        errorMessage: 'Domain not allowed'
      });
      throw new Error(`Network request to ${domain} is not allowed`);
    }

    // Check rate limiting
    if (!this.checkRateLimit(domain)) {
      await this.auditLogger.logNetworkRequest(url, method, {
        success: false,
        errorMessage: 'Rate limit exceeded'
      });
      throw new Error(`Rate limit exceeded for ${domain}`);
    }

    // Track active request
    const requestId = `${Date.now()}-${Math.random()}`;
    this.activeRequests.set(requestId, {
      url,
      method,
      timestamp: new Date()
    });
    try {
      // Make the request
      const response = await this.makeRequest(url, options);
      const duration = Date.now() - startTime;

      // Update request metadata
      const metadata = this.activeRequests.get(requestId);
      if (metadata) {
        metadata.duration = duration;
        metadata.statusCode = response.statusCode;
      }

      // Log successful request
      await this.auditLogger.logNetworkRequest(url, method, {
        duration,
        statusCode: response.statusCode,
        success: true
      });
      return response;
    } catch (error) {
      const duration = Date.now() - startTime;
      const errorMessage = error.message;

      // Update request metadata
      const metadata = this.activeRequests.get(requestId);
      if (metadata) {
        metadata.duration = duration;
        metadata.error = errorMessage;
      }

      // Log failed request
      await this.auditLogger.logNetworkRequest(url, method, {
        duration,
        success: false,
        errorMessage
      });
      throw error;
    } finally {
      // Remove from active requests
      this.activeRequests.delete(requestId);
    }
  }

  /**
   * Make a GET request
   */
  async get(url, options = {}) {
    return this.request(url, {
      ...options,
      method: 'GET'
    });
  }

  /**
   * Make a POST request
   */
  async post(url, body, options = {}) {
    return this.request(url, {
      ...options,
      method: 'POST',
      body
    });
  }

  /**
   * Make a PUT request
   */
  async put(url, body, options = {}) {
    return this.request(url, {
      ...options,
      method: 'PUT',
      body
    });
  }

  /**
   * Make a DELETE request
   */
  async delete(url, options = {}) {
    return this.request(url, {
      ...options,
      method: 'DELETE'
    });
  }

  /**
   * Get active network requests
   */
  getActiveRequests() {
    return Array.from(this.activeRequests.values());
  }

  /**
   * Get network activity statistics
   */
  getStatistics() {
    const requestsByDomain = {};
    for (const metadata of this.activeRequests.values()) {
      try {
        const domain = new _url.URL(metadata.url).hostname;
        requestsByDomain[domain] = (requestsByDomain[domain] || 0) + 1;
      } catch {
        // Invalid URL, skip
      }
    }
    return {
      activeRequests: this.activeRequests.size,
      requestsByDomain
    };
  }

  /**
   * Block a domain
   */
  async blockDomain(domain, reason) {
    await this.permissionManager.addToNetworkAllowlist(domain, false, reason);
    await this.auditLogger.log('network:request', 'Domain blocked', domain, {
      severity: 'warning',
      details: {
        reason
      }
    });
  }

  /**
   * Unblock a domain
   */
  async unblockDomain(domain, reason) {
    await this.permissionManager.addToNetworkAllowlist(domain, true, reason);
    await this.auditLogger.log('network:request', 'Domain unblocked', domain, {
      severity: 'info',
      details: {
        reason
      }
    });
  }

  /**
   * Check rate limit for domain
   */
  checkRateLimit(domain) {
    const now = Date.now();
    const entry = this.requestCounts.get(domain);
    if (!entry || now >= entry.resetTime) {
      // Reset counter
      this.requestCounts.set(domain, {
        count: 1,
        resetTime: now + 60000 // Reset after 1 minute
      });
      return true;
    }
    if (entry.count >= NetworkSandbox.MAX_REQUESTS_PER_MINUTE) {
      return false;
    }
    entry.count++;
    return true;
  }

  /**
   * Make the actual HTTP/HTTPS request
   */
  makeRequest(url, options) {
    return new Promise((resolve, reject) => {
      const parsedUrl = new _url.URL(url);
      const isHttps = parsedUrl.protocol === 'https:';
      const client = isHttps ? https : http;
      const requestOptions = {
        hostname: parsedUrl.hostname,
        port: parsedUrl.port || (isHttps ? 443 : 80),
        path: parsedUrl.pathname + parsedUrl.search,
        method: options.method || 'GET',
        headers: options.headers || {},
        timeout: options.timeout || NetworkSandbox.DEFAULT_TIMEOUT
      };
      const startTime = Date.now();
      const req = client.request(requestOptions, res => {
        let body = '';
        res.on('data', chunk => {
          body += chunk.toString();
        });
        res.on('end', () => {
          const duration = Date.now() - startTime;
          resolve({
            statusCode: res.statusCode || 0,
            headers: res.headers,
            body,
            duration
          });
        });
      });
      req.on('error', error => {
        reject(error);
      });
      req.on('timeout', () => {
        req.destroy();
        reject(new Error('Request timeout'));
      });
      if (options.body) {
        req.write(options.body);
      }
      req.end();
    });
  }
}
exports.NetworkSandbox = NetworkSandbox;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsImh0dHAiLCJfdXJsIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiTmV0d29ya1NhbmRib3giLCJERUZBVUxUX1RJTUVPVVQiLCJNQVhfUkVRVUVTVFNfUEVSX01JTlVURSIsInJlcXVlc3RDb3VudHMiLCJNYXAiLCJhY3RpdmVSZXF1ZXN0cyIsImNvbnN0cnVjdG9yIiwicGVybWlzc2lvbk1hbmFnZXIiLCJhdWRpdExvZ2dlciIsInJlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInBhcnNlZFVybCIsIlVSTCIsImRvbWFpbiIsImhvc3RuYW1lIiwibWV0aG9kIiwiYWxsb3dlZCIsImlzTmV0d29ya0FsbG93ZWQiLCJsb2dOZXR3b3JrUmVxdWVzdCIsInN1Y2Nlc3MiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsImNoZWNrUmF0ZUxpbWl0IiwicmVxdWVzdElkIiwiTWF0aCIsInJhbmRvbSIsInRpbWVzdGFtcCIsInJlc3BvbnNlIiwibWFrZVJlcXVlc3QiLCJkdXJhdGlvbiIsIm1ldGFkYXRhIiwic3RhdHVzQ29kZSIsImVycm9yIiwibWVzc2FnZSIsImRlbGV0ZSIsInBvc3QiLCJib2R5IiwicHV0IiwiZ2V0QWN0aXZlUmVxdWVzdHMiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJnZXRTdGF0aXN0aWNzIiwicmVxdWVzdHNCeURvbWFpbiIsInNpemUiLCJibG9ja0RvbWFpbiIsInJlYXNvbiIsImFkZFRvTmV0d29ya0FsbG93bGlzdCIsImxvZyIsInNldmVyaXR5IiwiZGV0YWlscyIsInVuYmxvY2tEb21haW4iLCJlbnRyeSIsInJlc2V0VGltZSIsImNvdW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpc0h0dHBzIiwicHJvdG9jb2wiLCJjbGllbnQiLCJyZXF1ZXN0T3B0aW9ucyIsInBvcnQiLCJwYXRoIiwicGF0aG5hbWUiLCJzZWFyY2giLCJoZWFkZXJzIiwidGltZW91dCIsInJlcSIsInJlcyIsIm9uIiwiY2h1bmsiLCJ0b1N0cmluZyIsImRlc3Ryb3kiLCJ3cml0ZSIsImVuZCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJOZXR3b3JrU2FuZGJveC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQZXJtaXNzaW9uTWFuYWdlciB9IGZyb20gJy4vUGVybWlzc2lvbk1hbmFnZXInO1xuaW1wb3J0IHsgQXVkaXRMb2dnZXIgfSBmcm9tICcuL0F1ZGl0TG9nZ2VyJztcbmltcG9ydCAqIGFzIGh0dHBzIGZyb20gJ2h0dHBzJztcbmltcG9ydCAqIGFzIGh0dHAgZnJvbSAnaHR0cCc7XG5pbXBvcnQgeyBVUkwgfSBmcm9tICd1cmwnO1xuXG4vKipcbiAqIE5ldHdvcmsgcmVxdWVzdCBvcHRpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTmV0d29ya1JlcXVlc3RPcHRpb25zIHtcbiAgbWV0aG9kPzogc3RyaW5nO1xuICBoZWFkZXJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgYm9keT86IHN0cmluZztcbiAgdGltZW91dD86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBOZXR3b3JrIHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTmV0d29ya1Jlc3BvbnNlIHtcbiAgc3RhdHVzQ29kZTogbnVtYmVyO1xuICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZD47XG4gIGJvZHk6IHN0cmluZztcbiAgZHVyYXRpb246IG51bWJlcjtcbn1cblxuLyoqXG4gKiBOZXR3b3JrIHJlcXVlc3QgbWV0YWRhdGFcbiAqL1xuaW50ZXJmYWNlIFJlcXVlc3RNZXRhZGF0YSB7XG4gIHVybDogc3RyaW5nO1xuICBtZXRob2Q6IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgc3RhdHVzQ29kZT86IG51bWJlcjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogTmV0d29ya1NhbmRib3ggcHJvdmlkZXMgYSBzZWN1cmUgbGF5ZXIgZm9yIGFsbCBuZXR3b3JrIHJlcXVlc3RzIG1hZGUgYnkgQXpTdHVkaW8uXG4gKiBJdCBlbmZvcmNlcyBkb21haW4gYWxsb3dsaXN0aW5nLCBtb25pdG9ycyBuZXR3b3JrIGFjdGl2aXR5LCBhbmQgbG9ncyBhbGwgcmVxdWVzdHNcbiAqIGZvciBhdWRpdCBwdXJwb3Nlcy5cbiAqIFxuICogRmVhdHVyZXM6XG4gKiAtIERvbWFpbiBhbGxvd2xpc3QgZW5mb3JjZW1lbnRcbiAqIC0gUGVybWlzc2lvbiBwcm9tcHRzIGZvciB1bmtub3duIGRvbWFpbnNcbiAqIC0gUmVxdWVzdC9yZXNwb25zZSBsb2dnaW5nXG4gKiAtIE5ldHdvcmsgYWN0aXZpdHkgbW9uaXRvcmluZ1xuICogLSBSYXRlIGxpbWl0aW5nIHBlciBkb21haW5cbiAqIC0gUmVxdWVzdCB0aW1lb3V0IGVuZm9yY2VtZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBOZXR3b3JrU2FuZGJveCB7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfVElNRU9VVCA9IDMwMDAwOyAvLyAzMCBzZWNvbmRzXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IE1BWF9SRVFVRVNUU19QRVJfTUlOVVRFID0gNjA7XG5cbiAgcHJpdmF0ZSBwZXJtaXNzaW9uTWFuYWdlcjogUGVybWlzc2lvbk1hbmFnZXI7XG4gIHByaXZhdGUgYXVkaXRMb2dnZXI6IEF1ZGl0TG9nZ2VyO1xuICBwcml2YXRlIHJlcXVlc3RDb3VudHM6IE1hcDxzdHJpbmcsIHsgY291bnQ6IG51bWJlcjsgcmVzZXRUaW1lOiBudW1iZXIgfT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYWN0aXZlUmVxdWVzdHM6IE1hcDxzdHJpbmcsIFJlcXVlc3RNZXRhZGF0YT4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IocGVybWlzc2lvbk1hbmFnZXI6IFBlcm1pc3Npb25NYW5hZ2VyLCBhdWRpdExvZ2dlcjogQXVkaXRMb2dnZXIpIHtcbiAgICB0aGlzLnBlcm1pc3Npb25NYW5hZ2VyID0gcGVybWlzc2lvbk1hbmFnZXI7XG4gICAgdGhpcy5hdWRpdExvZ2dlciA9IGF1ZGl0TG9nZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBuZXR3b3JrIHJlcXVlc3Qgd2l0aCBzYW5kYm94aW5nXG4gICAqL1xuICBhc3luYyByZXF1ZXN0KHVybDogc3RyaW5nLCBvcHRpb25zOiBOZXR3b3JrUmVxdWVzdE9wdGlvbnMgPSB7fSk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XG4gICAgY29uc3QgZG9tYWluID0gcGFyc2VkVXJsLmhvc3RuYW1lO1xuICAgIGNvbnN0IG1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnO1xuXG4gICAgLy8gQ2hlY2sgaWYgZG9tYWluIGlzIGFsbG93ZWRcbiAgICBjb25zdCBhbGxvd2VkID0gYXdhaXQgdGhpcy5wZXJtaXNzaW9uTWFuYWdlci5pc05ldHdvcmtBbGxvd2VkKGRvbWFpbik7XG4gICAgaWYgKCFhbGxvd2VkKSB7XG4gICAgICBhd2FpdCB0aGlzLmF1ZGl0TG9nZ2VyLmxvZ05ldHdvcmtSZXF1ZXN0KHVybCwgbWV0aG9kLCB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvck1lc3NhZ2U6ICdEb21haW4gbm90IGFsbG93ZWQnLFxuICAgICAgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5ldHdvcmsgcmVxdWVzdCB0byAke2RvbWFpbn0gaXMgbm90IGFsbG93ZWRgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayByYXRlIGxpbWl0aW5nXG4gICAgaWYgKCF0aGlzLmNoZWNrUmF0ZUxpbWl0KGRvbWFpbikpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXVkaXRMb2dnZXIubG9nTmV0d29ya1JlcXVlc3QodXJsLCBtZXRob2QsIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yTWVzc2FnZTogJ1JhdGUgbGltaXQgZXhjZWVkZWQnLFxuICAgICAgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFJhdGUgbGltaXQgZXhjZWVkZWQgZm9yICR7ZG9tYWlufWApO1xuICAgIH1cblxuICAgIC8vIFRyYWNrIGFjdGl2ZSByZXF1ZXN0XG4gICAgY29uc3QgcmVxdWVzdElkID0gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWA7XG4gICAgdGhpcy5hY3RpdmVSZXF1ZXN0cy5zZXQocmVxdWVzdElkLCB7XG4gICAgICB1cmwsXG4gICAgICBtZXRob2QsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfSk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gTWFrZSB0aGUgcmVxdWVzdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KHVybCwgb3B0aW9ucyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgICAgLy8gVXBkYXRlIHJlcXVlc3QgbWV0YWRhdGFcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hY3RpdmVSZXF1ZXN0cy5nZXQocmVxdWVzdElkKTtcbiAgICAgIGlmIChtZXRhZGF0YSkge1xuICAgICAgICBtZXRhZGF0YS5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICBtZXRhZGF0YS5zdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzQ29kZTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9nIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgYXdhaXQgdGhpcy5hdWRpdExvZ2dlci5sb2dOZXR3b3JrUmVxdWVzdCh1cmwsIG1ldGhvZCwge1xuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzQ29kZSxcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IChlcnJvciBhcyBFcnJvcikubWVzc2FnZTtcblxuICAgICAgLy8gVXBkYXRlIHJlcXVlc3QgbWV0YWRhdGFcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hY3RpdmVSZXF1ZXN0cy5nZXQocmVxdWVzdElkKTtcbiAgICAgIGlmIChtZXRhZGF0YSkge1xuICAgICAgICBtZXRhZGF0YS5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICBtZXRhZGF0YS5lcnJvciA9IGVycm9yTWVzc2FnZTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9nIGZhaWxlZCByZXF1ZXN0XG4gICAgICBhd2FpdCB0aGlzLmF1ZGl0TG9nZ2VyLmxvZ05ldHdvcmtSZXF1ZXN0KHVybCwgbWV0aG9kLCB7XG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3JNZXNzYWdlLFxuICAgICAgfSk7XG5cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBSZW1vdmUgZnJvbSBhY3RpdmUgcmVxdWVzdHNcbiAgICAgIHRoaXMuYWN0aXZlUmVxdWVzdHMuZGVsZXRlKHJlcXVlc3RJZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBHRVQgcmVxdWVzdFxuICAgKi9cbiAgYXN5bmMgZ2V0KHVybDogc3RyaW5nLCBvcHRpb25zOiBPbWl0PE5ldHdvcmtSZXF1ZXN0T3B0aW9ucywgJ21ldGhvZCc+ID0ge30pOiBQcm9taXNlPE5ldHdvcmtSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXJsLCB7IC4uLm9wdGlvbnMsIG1ldGhvZDogJ0dFVCcgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFrZSBhIFBPU1QgcmVxdWVzdFxuICAgKi9cbiAgYXN5bmMgcG9zdCh1cmw6IHN0cmluZywgYm9keTogc3RyaW5nLCBvcHRpb25zOiBPbWl0PE5ldHdvcmtSZXF1ZXN0T3B0aW9ucywgJ21ldGhvZCcgfCAnYm9keSc+ID0ge30pOiBQcm9taXNlPE5ldHdvcmtSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXJsLCB7IC4uLm9wdGlvbnMsIG1ldGhvZDogJ1BPU1QnLCBib2R5IH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBQVVQgcmVxdWVzdFxuICAgKi9cbiAgYXN5bmMgcHV0KHVybDogc3RyaW5nLCBib2R5OiBzdHJpbmcsIG9wdGlvbnM6IE9taXQ8TmV0d29ya1JlcXVlc3RPcHRpb25zLCAnbWV0aG9kJyB8ICdib2R5Jz4gPSB7fSk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIHsgLi4ub3B0aW9ucywgbWV0aG9kOiAnUFVUJywgYm9keSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIGEgREVMRVRFIHJlcXVlc3RcbiAgICovXG4gIGFzeW5jIGRlbGV0ZSh1cmw6IHN0cmluZywgb3B0aW9uczogT21pdDxOZXR3b3JrUmVxdWVzdE9wdGlvbnMsICdtZXRob2QnPiA9IHt9KTogUHJvbWlzZTxOZXR3b3JrUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCwgeyAuLi5vcHRpb25zLCBtZXRob2Q6ICdERUxFVEUnIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhY3RpdmUgbmV0d29yayByZXF1ZXN0c1xuICAgKi9cbiAgZ2V0QWN0aXZlUmVxdWVzdHMoKTogUmVxdWVzdE1ldGFkYXRhW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYWN0aXZlUmVxdWVzdHMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBuZXR3b3JrIGFjdGl2aXR5IHN0YXRpc3RpY3NcbiAgICovXG4gIGdldFN0YXRpc3RpY3MoKToge1xuICAgIGFjdGl2ZVJlcXVlc3RzOiBudW1iZXI7XG4gICAgcmVxdWVzdHNCeURvbWFpbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgfSB7XG4gICAgY29uc3QgcmVxdWVzdHNCeURvbWFpbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBtZXRhZGF0YSBvZiB0aGlzLmFjdGl2ZVJlcXVlc3RzLnZhbHVlcygpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkb21haW4gPSBuZXcgVVJMKG1ldGFkYXRhLnVybCkuaG9zdG5hbWU7XG4gICAgICAgIHJlcXVlc3RzQnlEb21haW5bZG9tYWluXSA9IChyZXF1ZXN0c0J5RG9tYWluW2RvbWFpbl0gfHwgMCkgKyAxO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIEludmFsaWQgVVJMLCBza2lwXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZVJlcXVlc3RzOiB0aGlzLmFjdGl2ZVJlcXVlc3RzLnNpemUsXG4gICAgICByZXF1ZXN0c0J5RG9tYWluLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQmxvY2sgYSBkb21haW5cbiAgICovXG4gIGFzeW5jIGJsb2NrRG9tYWluKGRvbWFpbjogc3RyaW5nLCByZWFzb24/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnBlcm1pc3Npb25NYW5hZ2VyLmFkZFRvTmV0d29ya0FsbG93bGlzdChkb21haW4sIGZhbHNlLCByZWFzb24pO1xuICAgIGF3YWl0IHRoaXMuYXVkaXRMb2dnZXIubG9nKCduZXR3b3JrOnJlcXVlc3QnLCAnRG9tYWluIGJsb2NrZWQnLCBkb21haW4sIHtcbiAgICAgIHNldmVyaXR5OiAnd2FybmluZycsXG4gICAgICBkZXRhaWxzOiB7IHJlYXNvbiB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuYmxvY2sgYSBkb21haW5cbiAgICovXG4gIGFzeW5jIHVuYmxvY2tEb21haW4oZG9tYWluOiBzdHJpbmcsIHJlYXNvbj86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMucGVybWlzc2lvbk1hbmFnZXIuYWRkVG9OZXR3b3JrQWxsb3dsaXN0KGRvbWFpbiwgdHJ1ZSwgcmVhc29uKTtcbiAgICBhd2FpdCB0aGlzLmF1ZGl0TG9nZ2VyLmxvZygnbmV0d29yazpyZXF1ZXN0JywgJ0RvbWFpbiB1bmJsb2NrZWQnLCBkb21haW4sIHtcbiAgICAgIHNldmVyaXR5OiAnaW5mbycsXG4gICAgICBkZXRhaWxzOiB7IHJlYXNvbiB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHJhdGUgbGltaXQgZm9yIGRvbWFpblxuICAgKi9cbiAgcHJpdmF0ZSBjaGVja1JhdGVMaW1pdChkb21haW46IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgZW50cnkgPSB0aGlzLnJlcXVlc3RDb3VudHMuZ2V0KGRvbWFpbik7XG5cbiAgICBpZiAoIWVudHJ5IHx8IG5vdyA+PSBlbnRyeS5yZXNldFRpbWUpIHtcbiAgICAgIC8vIFJlc2V0IGNvdW50ZXJcbiAgICAgIHRoaXMucmVxdWVzdENvdW50cy5zZXQoZG9tYWluLCB7XG4gICAgICAgIGNvdW50OiAxLFxuICAgICAgICByZXNldFRpbWU6IG5vdyArIDYwMDAwLCAvLyBSZXNldCBhZnRlciAxIG1pbnV0ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZW50cnkuY291bnQgPj0gTmV0d29ya1NhbmRib3guTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBlbnRyeS5jb3VudCsrO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhlIGFjdHVhbCBIVFRQL0hUVFBTIHJlcXVlc3RcbiAgICovXG4gIHByaXZhdGUgbWFrZVJlcXVlc3QodXJsOiBzdHJpbmcsIG9wdGlvbnM6IE5ldHdvcmtSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8TmV0d29ya1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcbiAgICAgIGNvbnN0IGlzSHR0cHMgPSBwYXJzZWRVcmwucHJvdG9jb2wgPT09ICdodHRwczonO1xuICAgICAgY29uc3QgY2xpZW50ID0gaXNIdHRwcyA/IGh0dHBzIDogaHR0cDtcblxuICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgIGhvc3RuYW1lOiBwYXJzZWRVcmwuaG9zdG5hbWUsXG4gICAgICAgIHBvcnQ6IHBhcnNlZFVybC5wb3J0IHx8IChpc0h0dHBzID8gNDQzIDogODApLFxuICAgICAgICBwYXRoOiBwYXJzZWRVcmwucGF0aG5hbWUgKyBwYXJzZWRVcmwuc2VhcmNoLFxuICAgICAgICBtZXRob2Q6IG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMgfHwge30sXG4gICAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCB8fCBOZXR3b3JrU2FuZGJveC5ERUZBVUxUX1RJTUVPVVQsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBjb25zdCByZXEgPSBjbGllbnQucmVxdWVzdChyZXF1ZXN0T3B0aW9ucywgKHJlcykgPT4ge1xuICAgICAgICBsZXQgYm9keSA9ICcnO1xuXG4gICAgICAgIHJlcy5vbignZGF0YScsIChjaHVuaykgPT4ge1xuICAgICAgICAgIGJvZHkgKz0gY2h1bmsudG9TdHJpbmcoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgICAgIFxuICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVzLnN0YXR1c0NvZGUgfHwgMCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHJlcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXEub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcblxuICAgICAgcmVxLm9uKCd0aW1lb3V0JywgKCkgPT4ge1xuICAgICAgICByZXEuZGVzdHJveSgpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdSZXF1ZXN0IHRpbWVvdXQnKSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKG9wdGlvbnMuYm9keSkge1xuICAgICAgICByZXEud3JpdGUob3B0aW9ucy5ib2R5KTtcbiAgICAgIH1cblxuICAgICAgcmVxLmVuZCgpO1xuICAgIH0pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBLElBQUFBLEtBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLElBQUEsR0FBQUYsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLElBQUEsR0FBQUYsT0FBQTtBQUEwQixTQUFBRCx3QkFBQUksQ0FBQSxFQUFBQyxDQUFBLDZCQUFBQyxPQUFB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