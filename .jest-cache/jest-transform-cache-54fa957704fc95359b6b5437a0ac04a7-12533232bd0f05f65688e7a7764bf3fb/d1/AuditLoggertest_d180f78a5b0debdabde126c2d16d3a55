849479b796e780a22e4ea141067a26f6
"use strict";

// Mock electron

// Mock fs/promises
_getJestObj().mock('electron', () => ({
  app: {
    getPath: jest.fn(name => {
      if (name === 'userData') {
        return '/mock/user/data';
      }
      return '/mock/path';
    })
  }
}));
_getJestObj().mock('fs/promises');
var _AuditLogger = require("../AuditLogger");
var fs = _interopRequireWildcard(require("fs/promises"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('AuditLogger', () => {
  let auditLogger;
  const mockProjectPath = '/mock/project';
  beforeEach(() => {
    jest.clearAllMocks();
    auditLogger = new _AuditLogger.AuditLogger(mockProjectPath);

    // Mock fs operations
    fs.mkdir.mockResolvedValue(undefined);
    fs.stat.mockResolvedValue({
      size: 1000,
      mtime: new Date()
    });
    fs.appendFile.mockResolvedValue(undefined);
    fs.readdir.mockResolvedValue([]);
    fs.readFile.mockResolvedValue('');
    fs.writeFile.mockResolvedValue(undefined);
    fs.unlink.mockResolvedValue(undefined);
  });
  afterEach(async () => {
    await auditLogger.shutdown();
  });
  describe('initialization', () => {
    it('should initialize successfully', async () => {
      await auditLogger.initialize();
      expect(fs.mkdir).toHaveBeenCalled();
    });
    it('should create log directory if it does not exist', async () => {
      await auditLogger.initialize();
      expect(fs.mkdir).toHaveBeenCalledWith(expect.stringContaining('audit-logs'), expect.objectContaining({
        recursive: true
      }));
    });
  });
  describe('log', () => {
    beforeEach(async () => {
      await auditLogger.initialize();
    });
    it('should log an event', async () => {
      await auditLogger.log('file:read', 'Read file', '/test/file.txt');

      // Flush to write to disk
      await auditLogger.flush();
      expect(fs.appendFile).toHaveBeenCalled();
    });
    it('should include all event properties', async () => {
      await auditLogger.log('ai:request', 'AI request', 'gpt-4', {
        severity: 'info',
        actor: 'user',
        details: {
          tokens: 100
        },
        metadata: {
          projectPath: '/test'
        }
      });
      await auditLogger.flush();
      const writeCall = fs.appendFile.mock.calls[0];
      const logLine = writeCall[1];
      const event = JSON.parse(logLine.trim());
      expect(event).toMatchObject({
        type: 'ai:request',
        action: 'AI request',
        resource: 'gpt-4',
        severity: 'info',
        actor: 'user'
      });
      expect(event.details).toEqual({
        tokens: 100
      });
      expect(event.metadata).toEqual({
        projectPath: '/test'
      });
    });
    it('should auto-flush when buffer reaches 100 events', async () => {
      for (let i = 0; i < 100; i++) {
        await auditLogger.log('file:read', 'Read file', `/test/file${i}.txt`);
      }
      expect(fs.appendFile).toHaveBeenCalled();
    });
  });
  describe('specialized logging methods', () => {
    beforeEach(async () => {
      await auditLogger.initialize();
    });
    it('should log AI request', async () => {
      await auditLogger.logAIRequest('gpt-4', 'test prompt', {
        tokens: 100,
        cost: 0.01,
        projectPath: '/test'
      });
      await auditLogger.flush();
      expect(fs.appendFile).toHaveBeenCalled();
    });
    it('should log AI response', async () => {
      await auditLogger.logAIResponse('gpt-4', true, {
        tokens: 200,
        duration: 1000
      });
      await auditLogger.flush();
      expect(fs.appendFile).toHaveBeenCalled();
    });
    it('should log file operation', async () => {
      await auditLogger.logFileOperation('write', '/test/file.txt', {
        fileSize: 1024,
        success: true
      });
      await auditLogger.flush();
      expect(fs.appendFile).toHaveBeenCalled();
    });
    it('should log network request', async () => {
      await auditLogger.logNetworkRequest('https://api.example.com', 'POST', {
        duration: 500,
        statusCode: 200,
        success: true
      });
      await auditLogger.flush();
      expect(fs.appendFile).toHaveBeenCalled();
    });
    it('should log permission grant', async () => {
      await auditLogger.logPermission('filesystem:read', '/test/path', true, 'User granted');
      await auditLogger.flush();
      const writeCall = fs.appendFile.mock.calls[0];
      const logLine = writeCall[1];
      const event = JSON.parse(logLine.trim());
      expect(event.type).toBe('permission:grant');
    });
    it('should log permission deny', async () => {
      await auditLogger.logPermission('network:request', 'unknown.com', false, 'User denied');
      await auditLogger.flush();
      const writeCall = fs.appendFile.mock.calls[0];
      const logLine = writeCall[1];
      const event = JSON.parse(logLine.trim());
      expect(event.type).toBe('permission:deny');
      expect(event.severity).toBe('warning');
    });
    it('should log secret access', async () => {
      await auditLogger.logSecretAccess('read', 'API_KEY', 'global');
      await auditLogger.flush();
      expect(fs.appendFile).toHaveBeenCalled();
    });
    it('should log Git operation', async () => {
      await auditLogger.logGitOperation('commit', '/test/repo', {
        branch: 'main',
        success: true
      });
      await auditLogger.flush();
      expect(fs.appendFile).toHaveBeenCalled();
    });
    it('should log code execution', async () => {
      await auditLogger.logCodeExecution('generate', 'Generate service', {
        projectPath: '/test',
        filesAffected: 5,
        success: true
      });
      await auditLogger.flush();
      expect(fs.appendFile).toHaveBeenCalled();
    });
  });
  describe('query', () => {
    beforeEach(async () => {
      await auditLogger.initialize();

      // Mock readFile to return sample events
      fs.readFile.mockResolvedValue(JSON.stringify({
        type: 'file:read',
        timestamp: new Date(),
        severity: 'info',
        actor: 'user',
        resource: '/test',
        action: 'test'
      }) + '\n' + JSON.stringify({
        type: 'file:write',
        timestamp: new Date(),
        severity: 'warning',
        actor: 'system',
        resource: '/test2',
        action: 'test'
      }) + '\n' + JSON.stringify({
        type: 'ai:request',
        timestamp: new Date(),
        severity: 'info',
        actor: 'user',
        resource: 'gpt-4',
        action: 'test'
      }));
      fs.readdir.mockResolvedValue(['audit-123.jsonl']);
    });
    it('should query all events', async () => {
      const events = await auditLogger.query();
      expect(events.length).toBe(3);
    });
    it('should filter by event type', async () => {
      const events = await auditLogger.query({
        types: ['file:read', 'file:write']
      });
      expect(events.length).toBe(2);
      expect(events.every(e => e.type.startsWith('file:'))).toBe(true);
    });
    it('should filter by severity', async () => {
      const events = await auditLogger.query({
        severities: ['warning']
      });
      expect(events.length).toBe(1);
      expect(events[0].severity).toBe('warning');
    });
    it('should filter by actor', async () => {
      const events = await auditLogger.query({
        actor: 'user'
      });
      expect(events.length).toBe(2);
      expect(events.every(e => e.actor === 'user')).toBe(true);
    });
    it('should apply pagination', async () => {
      const events = await auditLogger.query({
        limit: 2,
        offset: 1
      });
      expect(events.length).toBe(2);
    });
  });
  describe('statistics', () => {
    beforeEach(async () => {
      await auditLogger.initialize();
      fs.readFile.mockResolvedValue(JSON.stringify({
        type: 'file:read',
        timestamp: new Date(),
        severity: 'info',
        actor: 'user',
        resource: '/test',
        action: 'test'
      }) + '\n' + JSON.stringify({
        type: 'file:read',
        timestamp: new Date(),
        severity: 'info',
        actor: 'user',
        resource: '/test',
        action: 'test'
      }) + '\n' + JSON.stringify({
        type: 'file:write',
        timestamp: new Date(),
        severity: 'error',
        actor: 'system',
        resource: '/test2',
        action: 'test'
      }));
      fs.readdir.mockResolvedValue(['audit-123.jsonl']);
    });
    it('should calculate statistics', async () => {
      const stats = await auditLogger.getStatistics();
      expect(stats.totalEvents).toBe(3);
      expect(stats.eventsByType['file:read']).toBe(2);
      expect(stats.eventsByType['file:write']).toBe(1);
      expect(stats.eventsBySeverity['info']).toBe(2);
      expect(stats.eventsBySeverity['error']).toBe(1);
    });
    it('should include recent errors', async () => {
      const stats = await auditLogger.getStatistics();
      expect(stats.recentErrors.length).toBe(1);
      expect(stats.recentErrors[0].severity).toBe('error');
    });
    it('should include top resources', async () => {
      const stats = await auditLogger.getStatistics();
      expect(stats.topResources.length).toBeGreaterThan(0);
      expect(stats.topResources[0].resource).toBe('/test');
      expect(stats.topResources[0].count).toBe(2);
    });
  });
  describe('export', () => {
    beforeEach(async () => {
      await auditLogger.initialize();
      fs.readFile.mockResolvedValue(JSON.stringify({
        type: 'file:read',
        timestamp: new Date(),
        severity: 'info',
        actor: 'user',
        resource: '/test',
        action: 'test'
      }));
      fs.readdir.mockResolvedValue(['audit-123.jsonl']);
    });
    it('should export audit log to file', async () => {
      await auditLogger.export('/export/audit.json');
      expect(fs.writeFile).toHaveBeenCalledWith('/export/audit.json', expect.any(String), 'utf-8');
    });
    it('should export filtered events', async () => {
      await auditLogger.export('/export/audit.json', {
        types: ['file:read']
      });
      expect(fs.writeFile).toHaveBeenCalled();
    });
  });
  describe('log rotation', () => {
    beforeEach(async () => {
      await auditLogger.initialize();
    });
    it('should rotate logs when file size exceeds limit', async () => {
      // Mock large file size
      fs.stat.mockResolvedValue({
        size: 11 * 1024 * 1024,
        // 11MB
        mtime: new Date()
      });
      await auditLogger.flush();

      // Should create new log file
      expect(fs.stat).toHaveBeenCalled();
    });
    it('should clean up old log files', async () => {
      const oldFiles = Array.from({
        length: 10
      }, (_, i) => `audit-${i}.jsonl`);
      fs.readdir.mockResolvedValue(oldFiles);
      fs.stat.mockImplementation(filePath => {
        return Promise.resolve({
          size: 1000,
          mtime: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000) // 60 days old
        });
      });
      const deleted = await auditLogger.clearOldLogs(30);
      expect(deleted).toBeGreaterThan(0);
      expect(fs.unlink).toHaveBeenCalled();
    });
  });
  describe('shutdown', () => {
    beforeEach(async () => {
      await auditLogger.initialize();
    });
    it('should flush events on shutdown', async () => {
      await auditLogger.log('file:read', 'Read file', '/test/file.txt');
      await auditLogger.shutdown();
      expect(fs.appendFile).toHaveBeenCalled();
    });
    it('should stop periodic flush timer', async () => {
      await auditLogger.shutdown();

      // Timer should be cleared
      // This is hard to test directly, but we can verify shutdown completes
      expect(true).toBe(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJhcHAiLCJnZXRQYXRoIiwiamVzdCIsImZuIiwibmFtZSIsIl9BdWRpdExvZ2dlciIsInJlcXVpcmUiLCJmcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZGVzY3JpYmUiLCJhdWRpdExvZ2dlciIsIm1vY2tQcm9qZWN0UGF0aCIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiQXVkaXRMb2dnZXIiLCJta2RpciIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidW5kZWZpbmVkIiwic3RhdCIsInNpemUiLCJtdGltZSIsIkRhdGUiLCJhcHBlbmRGaWxlIiwicmVhZGRpciIsInJlYWRGaWxlIiwid3JpdGVGaWxlIiwidW5saW5rIiwiYWZ0ZXJFYWNoIiwic2h1dGRvd24iLCJpdCIsImluaXRpYWxpemUiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJzdHJpbmdDb250YWluaW5nIiwib2JqZWN0Q29udGFpbmluZyIsInJlY3Vyc2l2ZSIsImxvZyIsImZsdXNoIiwic2V2ZXJpdHkiLCJhY3RvciIsImRldGFpbHMiLCJ0b2tlbnMiLCJtZXRhZGF0YSIsInByb2plY3RQYXRoIiwid3JpdGVDYWxsIiwiY2FsbHMiLCJsb2dMaW5lIiwiZXZlbnQiLCJKU09OIiwicGFyc2UiLCJ0cmltIiwidG9NYXRjaE9iamVjdCIsInR5cGUiLCJhY3Rpb24iLCJyZXNvdXJjZSIsInRvRXF1YWwiLCJsb2dBSVJlcXVlc3QiLCJjb3N0IiwibG9nQUlSZXNwb25zZSIsImR1cmF0aW9uIiwibG9nRmlsZU9wZXJhdGlvbiIsImZpbGVTaXplIiwic3VjY2VzcyIsImxvZ05ldHdvcmtSZXF1ZXN0Iiwic3RhdHVzQ29kZSIsImxvZ1Blcm1pc3Npb24iLCJ0b0JlIiwibG9nU2VjcmV0QWNjZXNzIiwibG9nR2l0T3BlcmF0aW9uIiwiYnJhbmNoIiwibG9nQ29kZUV4ZWN1dGlvbiIsImZpbGVzQWZmZWN0ZWQiLCJzdHJpbmdpZnkiLCJ0aW1lc3RhbXAiLCJldmVudHMiLCJxdWVyeSIsImxlbmd0aCIsInR5cGVzIiwiZXZlcnkiLCJzdGFydHNXaXRoIiwic2V2ZXJpdGllcyIsImxpbWl0Iiwib2Zmc2V0Iiwic3RhdHMiLCJnZXRTdGF0aXN0aWNzIiwidG90YWxFdmVudHMiLCJldmVudHNCeVR5cGUiLCJldmVudHNCeVNldmVyaXR5IiwicmVjZW50RXJyb3JzIiwidG9wUmVzb3VyY2VzIiwidG9CZUdyZWF0ZXJUaGFuIiwiY291bnQiLCJleHBvcnQiLCJhbnkiLCJTdHJpbmciLCJvbGRGaWxlcyIsIkFycmF5IiwiZnJvbSIsIl8iLCJtb2NrSW1wbGVtZW50YXRpb24iLCJmaWxlUGF0aCIsIlByb21pc2UiLCJyZXNvbHZlIiwibm93IiwiZGVsZXRlZCIsImNsZWFyT2xkTG9ncyJdLCJzb3VyY2VzIjpbIkF1ZGl0TG9nZ2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXVkaXRMb2dnZXIsIEF1ZGl0RXZlbnRUeXBlLCBBdWRpdFNldmVyaXR5IH0gZnJvbSAnLi4vQXVkaXRMb2dnZXInO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHsgYXBwIH0gZnJvbSAnZWxlY3Ryb24nO1xuXG4vLyBNb2NrIGVsZWN0cm9uXG5qZXN0Lm1vY2soJ2VsZWN0cm9uJywgKCkgPT4gKHtcbiAgYXBwOiB7XG4gICAgZ2V0UGF0aDogamVzdC5mbigobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAobmFtZSA9PT0gJ3VzZXJEYXRhJykge1xuICAgICAgICByZXR1cm4gJy9tb2NrL3VzZXIvZGF0YSc7XG4gICAgICB9XG4gICAgICByZXR1cm4gJy9tb2NrL3BhdGgnO1xuICAgIH0pLFxuICB9LFxufSkpO1xuXG4vLyBNb2NrIGZzL3Byb21pc2VzXG5qZXN0Lm1vY2soJ2ZzL3Byb21pc2VzJyk7XG5cbmRlc2NyaWJlKCdBdWRpdExvZ2dlcicsICgpID0+IHtcbiAgbGV0IGF1ZGl0TG9nZ2VyOiBBdWRpdExvZ2dlcjtcbiAgY29uc3QgbW9ja1Byb2plY3RQYXRoID0gJy9tb2NrL3Byb2plY3QnO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIGF1ZGl0TG9nZ2VyID0gbmV3IEF1ZGl0TG9nZ2VyKG1vY2tQcm9qZWN0UGF0aCk7XG5cbiAgICAvLyBNb2NrIGZzIG9wZXJhdGlvbnNcbiAgICAoZnMubWtkaXIgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgIChmcy5zdGF0IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoeyBzaXplOiAxMDAwLCBtdGltZTogbmV3IERhdGUoKSB9KTtcbiAgICAoZnMuYXBwZW5kRmlsZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgKGZzLnJlYWRkaXIgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG4gICAgKGZzLnJlYWRGaWxlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoJycpO1xuICAgIChmcy53cml0ZUZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgIChmcy51bmxpbmsgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICB9KTtcblxuICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLnNodXRkb3duKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpbml0aWFsaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICBleHBlY3QoZnMubWtkaXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGxvZyBkaXJlY3RvcnkgaWYgaXQgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdExvZ2dlci5pbml0aWFsaXplKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChmcy5ta2RpcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdhdWRpdC1sb2dzJyksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9nJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuaW5pdGlhbGl6ZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgYW4gZXZlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdExvZ2dlci5sb2coJ2ZpbGU6cmVhZCcsICdSZWFkIGZpbGUnLCAnL3Rlc3QvZmlsZS50eHQnKTtcbiAgICAgIFxuICAgICAgLy8gRmx1c2ggdG8gd3JpdGUgdG8gZGlza1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuZmx1c2goKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZzLmFwcGVuZEZpbGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBhbGwgZXZlbnQgcHJvcGVydGllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmxvZygnYWk6cmVxdWVzdCcsICdBSSByZXF1ZXN0JywgJ2dwdC00Jywge1xuICAgICAgICBzZXZlcml0eTogJ2luZm8nLFxuICAgICAgICBhY3RvcjogJ3VzZXInLFxuICAgICAgICBkZXRhaWxzOiB7IHRva2VuczogMTAwIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7IHByb2plY3RQYXRoOiAnL3Rlc3QnIH0sXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuZmx1c2goKTtcbiAgICAgIFxuICAgICAgY29uc3Qgd3JpdGVDYWxsID0gKGZzLmFwcGVuZEZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdO1xuICAgICAgY29uc3QgbG9nTGluZSA9IHdyaXRlQ2FsbFsxXTtcbiAgICAgIGNvbnN0IGV2ZW50ID0gSlNPTi5wYXJzZShsb2dMaW5lLnRyaW0oKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChldmVudCkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHR5cGU6ICdhaTpyZXF1ZXN0JyxcbiAgICAgICAgYWN0aW9uOiAnQUkgcmVxdWVzdCcsXG4gICAgICAgIHJlc291cmNlOiAnZ3B0LTQnLFxuICAgICAgICBzZXZlcml0eTogJ2luZm8nLFxuICAgICAgICBhY3RvcjogJ3VzZXInLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QoZXZlbnQuZGV0YWlscykudG9FcXVhbCh7IHRva2VuczogMTAwIH0pO1xuICAgICAgZXhwZWN0KGV2ZW50Lm1ldGFkYXRhKS50b0VxdWFsKHsgcHJvamVjdFBhdGg6ICcvdGVzdCcgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGF1dG8tZmx1c2ggd2hlbiBidWZmZXIgcmVhY2hlcyAxMDAgZXZlbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgICBhd2FpdCBhdWRpdExvZ2dlci5sb2coJ2ZpbGU6cmVhZCcsICdSZWFkIGZpbGUnLCBgL3Rlc3QvZmlsZSR7aX0udHh0YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGV4cGVjdChmcy5hcHBlbmRGaWxlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzcGVjaWFsaXplZCBsb2dnaW5nIG1ldGhvZHMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdExvZ2dlci5pbml0aWFsaXplKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBBSSByZXF1ZXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIubG9nQUlSZXF1ZXN0KCdncHQtNCcsICd0ZXN0IHByb21wdCcsIHtcbiAgICAgICAgdG9rZW5zOiAxMDAsXG4gICAgICAgIGNvc3Q6IDAuMDEsXG4gICAgICAgIHByb2plY3RQYXRoOiAnL3Rlc3QnLFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmZsdXNoKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChmcy5hcHBlbmRGaWxlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBBSSByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmxvZ0FJUmVzcG9uc2UoJ2dwdC00JywgdHJ1ZSwge1xuICAgICAgICB0b2tlbnM6IDIwMCxcbiAgICAgICAgZHVyYXRpb246IDEwMDAsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuZmx1c2goKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZzLmFwcGVuZEZpbGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9nIGZpbGUgb3BlcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIubG9nRmlsZU9wZXJhdGlvbignd3JpdGUnLCAnL3Rlc3QvZmlsZS50eHQnLCB7XG4gICAgICAgIGZpbGVTaXplOiAxMDI0LFxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmZsdXNoKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChmcy5hcHBlbmRGaWxlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBuZXR3b3JrIHJlcXVlc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdExvZ2dlci5sb2dOZXR3b3JrUmVxdWVzdCgnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLCAnUE9TVCcsIHtcbiAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgc3RhdHVzQ29kZTogMjAwLFxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmZsdXNoKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChmcy5hcHBlbmRGaWxlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBwZXJtaXNzaW9uIGdyYW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIubG9nUGVybWlzc2lvbignZmlsZXN5c3RlbTpyZWFkJywgJy90ZXN0L3BhdGgnLCB0cnVlLCAnVXNlciBncmFudGVkJyk7XG5cbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmZsdXNoKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHdyaXRlQ2FsbCA9IChmcy5hcHBlbmRGaWxlIGFzIGplc3QuTW9jaykubW9jay5jYWxsc1swXTtcbiAgICAgIGNvbnN0IGxvZ0xpbmUgPSB3cml0ZUNhbGxbMV07XG4gICAgICBjb25zdCBldmVudCA9IEpTT04ucGFyc2UobG9nTGluZS50cmltKCkpO1xuICAgICAgXG4gICAgICBleHBlY3QoZXZlbnQudHlwZSkudG9CZSgncGVybWlzc2lvbjpncmFudCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgcGVybWlzc2lvbiBkZW55JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIubG9nUGVybWlzc2lvbignbmV0d29yazpyZXF1ZXN0JywgJ3Vua25vd24uY29tJywgZmFsc2UsICdVc2VyIGRlbmllZCcpO1xuXG4gICAgICBhd2FpdCBhdWRpdExvZ2dlci5mbHVzaCgpO1xuICAgICAgXG4gICAgICBjb25zdCB3cml0ZUNhbGwgPSAoZnMuYXBwZW5kRmlsZSBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHNbMF07XG4gICAgICBjb25zdCBsb2dMaW5lID0gd3JpdGVDYWxsWzFdO1xuICAgICAgY29uc3QgZXZlbnQgPSBKU09OLnBhcnNlKGxvZ0xpbmUudHJpbSgpKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGV2ZW50LnR5cGUpLnRvQmUoJ3Blcm1pc3Npb246ZGVueScpO1xuICAgICAgZXhwZWN0KGV2ZW50LnNldmVyaXR5KS50b0JlKCd3YXJuaW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBzZWNyZXQgYWNjZXNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIubG9nU2VjcmV0QWNjZXNzKCdyZWFkJywgJ0FQSV9LRVknLCAnZ2xvYmFsJyk7XG5cbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmZsdXNoKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChmcy5hcHBlbmRGaWxlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBHaXQgb3BlcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIubG9nR2l0T3BlcmF0aW9uKCdjb21taXQnLCAnL3Rlc3QvcmVwbycsIHtcbiAgICAgICAgYnJhbmNoOiAnbWFpbicsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuZmx1c2goKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZzLmFwcGVuZEZpbGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9nIGNvZGUgZXhlY3V0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIubG9nQ29kZUV4ZWN1dGlvbignZ2VuZXJhdGUnLCAnR2VuZXJhdGUgc2VydmljZScsIHtcbiAgICAgICAgcHJvamVjdFBhdGg6ICcvdGVzdCcsXG4gICAgICAgIGZpbGVzQWZmZWN0ZWQ6IDUsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuZmx1c2goKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZzLmFwcGVuZEZpbGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3F1ZXJ5JywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIHJlYWRGaWxlIHRvIHJldHVybiBzYW1wbGUgZXZlbnRzXG4gICAgICAoZnMucmVhZEZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnZmlsZTpyZWFkJywgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLCBzZXZlcml0eTogJ2luZm8nLCBhY3RvcjogJ3VzZXInLCByZXNvdXJjZTogJy90ZXN0JywgYWN0aW9uOiAndGVzdCcgfSkgKyAnXFxuJyArXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ2ZpbGU6d3JpdGUnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCksIHNldmVyaXR5OiAnd2FybmluZycsIGFjdG9yOiAnc3lzdGVtJywgcmVzb3VyY2U6ICcvdGVzdDInLCBhY3Rpb246ICd0ZXN0JyB9KSArICdcXG4nICtcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnYWk6cmVxdWVzdCcsIHRpbWVzdGFtcDogbmV3IERhdGUoKSwgc2V2ZXJpdHk6ICdpbmZvJywgYWN0b3I6ICd1c2VyJywgcmVzb3VyY2U6ICdncHQtNCcsIGFjdGlvbjogJ3Rlc3QnIH0pXG4gICAgICApO1xuICAgICAgXG4gICAgICAoZnMucmVhZGRpciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKFsnYXVkaXQtMTIzLmpzb25sJ10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBxdWVyeSBhbGwgZXZlbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRzID0gYXdhaXQgYXVkaXRMb2dnZXIucXVlcnkoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGV2ZW50cy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBieSBldmVudCB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRzID0gYXdhaXQgYXVkaXRMb2dnZXIucXVlcnkoe1xuICAgICAgICB0eXBlczogWydmaWxlOnJlYWQnLCAnZmlsZTp3cml0ZSddLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChldmVudHMubGVuZ3RoKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGV2ZW50cy5ldmVyeShlID0+IGUudHlwZS5zdGFydHNXaXRoKCdmaWxlOicpKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IHNldmVyaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRzID0gYXdhaXQgYXVkaXRMb2dnZXIucXVlcnkoe1xuICAgICAgICBzZXZlcml0aWVzOiBbJ3dhcm5pbmcnXSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QoZXZlbnRzLmxlbmd0aCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChldmVudHNbMF0uc2V2ZXJpdHkpLnRvQmUoJ3dhcm5pbmcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IGFjdG9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRzID0gYXdhaXQgYXVkaXRMb2dnZXIucXVlcnkoe1xuICAgICAgICBhY3RvcjogJ3VzZXInLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChldmVudHMubGVuZ3RoKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGV2ZW50cy5ldmVyeShlID0+IGUuYWN0b3IgPT09ICd1c2VyJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFwcGx5IHBhZ2luYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudHMgPSBhd2FpdCBhdWRpdExvZ2dlci5xdWVyeSh7XG4gICAgICAgIGxpbWl0OiAyLFxuICAgICAgICBvZmZzZXQ6IDEsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGV2ZW50cy5sZW5ndGgpLnRvQmUoMik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICAoZnMucmVhZEZpbGUgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAnZmlsZTpyZWFkJywgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLCBzZXZlcml0eTogJ2luZm8nLCBhY3RvcjogJ3VzZXInLCByZXNvdXJjZTogJy90ZXN0JywgYWN0aW9uOiAndGVzdCcgfSkgKyAnXFxuJyArXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ2ZpbGU6cmVhZCcsIHRpbWVzdGFtcDogbmV3IERhdGUoKSwgc2V2ZXJpdHk6ICdpbmZvJywgYWN0b3I6ICd1c2VyJywgcmVzb3VyY2U6ICcvdGVzdCcsIGFjdGlvbjogJ3Rlc3QnIH0pICsgJ1xcbicgK1xuICAgICAgICBKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICdmaWxlOndyaXRlJywgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLCBzZXZlcml0eTogJ2Vycm9yJywgYWN0b3I6ICdzeXN0ZW0nLCByZXNvdXJjZTogJy90ZXN0MicsIGFjdGlvbjogJ3Rlc3QnIH0pXG4gICAgICApO1xuICAgICAgXG4gICAgICAoZnMucmVhZGRpciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKFsnYXVkaXQtMTIzLmpzb25sJ10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgc3RhdGlzdGljcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgYXVkaXRMb2dnZXIuZ2V0U3RhdGlzdGljcygpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxFdmVudHMpLnRvQmUoMyk7XG4gICAgICBleHBlY3Qoc3RhdHMuZXZlbnRzQnlUeXBlWydmaWxlOnJlYWQnXSkudG9CZSgyKTtcbiAgICAgIGV4cGVjdChzdGF0cy5ldmVudHNCeVR5cGVbJ2ZpbGU6d3JpdGUnXSkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChzdGF0cy5ldmVudHNCeVNldmVyaXR5WydpbmZvJ10pLnRvQmUoMik7XG4gICAgICBleHBlY3Qoc3RhdHMuZXZlbnRzQnlTZXZlcml0eVsnZXJyb3InXSkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSByZWNlbnQgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBhdWRpdExvZ2dlci5nZXRTdGF0aXN0aWNzKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdGF0cy5yZWNlbnRFcnJvcnMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHN0YXRzLnJlY2VudEVycm9yc1swXS5zZXZlcml0eSkudG9CZSgnZXJyb3InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSB0b3AgcmVzb3VyY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBhdWRpdExvZ2dlci5nZXRTdGF0aXN0aWNzKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdGF0cy50b3BSZXNvdXJjZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3Qoc3RhdHMudG9wUmVzb3VyY2VzWzBdLnJlc291cmNlKS50b0JlKCcvdGVzdCcpO1xuICAgICAgZXhwZWN0KHN0YXRzLnRvcFJlc291cmNlc1swXS5jb3VudCkudG9CZSgyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2V4cG9ydCcsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmluaXRpYWxpemUoKTtcbiAgICAgIFxuICAgICAgKGZzLnJlYWRGaWxlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ2ZpbGU6cmVhZCcsIHRpbWVzdGFtcDogbmV3IERhdGUoKSwgc2V2ZXJpdHk6ICdpbmZvJywgYWN0b3I6ICd1c2VyJywgcmVzb3VyY2U6ICcvdGVzdCcsIGFjdGlvbjogJ3Rlc3QnIH0pXG4gICAgICApO1xuICAgICAgXG4gICAgICAoZnMucmVhZGRpciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKFsnYXVkaXQtMTIzLmpzb25sJ10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBleHBvcnQgYXVkaXQgbG9nIHRvIGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdExvZ2dlci5leHBvcnQoJy9leHBvcnQvYXVkaXQuanNvbicpO1xuICAgICAgXG4gICAgICBleHBlY3QoZnMud3JpdGVGaWxlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJy9leHBvcnQvYXVkaXQuanNvbicsXG4gICAgICAgIGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgJ3V0Zi04J1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZXhwb3J0IGZpbHRlcmVkIGV2ZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLmV4cG9ydCgnL2V4cG9ydC9hdWRpdC5qc29uJywge1xuICAgICAgICB0eXBlczogWydmaWxlOnJlYWQnXSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QoZnMud3JpdGVGaWxlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2cgcm90YXRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdExvZ2dlci5pbml0aWFsaXplKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJvdGF0ZSBsb2dzIHdoZW4gZmlsZSBzaXplIGV4Y2VlZHMgbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGxhcmdlIGZpbGUgc2l6ZVxuICAgICAgKGZzLnN0YXQgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHNpemU6IDExICogMTAyNCAqIDEwMjQsIC8vIDExTUJcbiAgICAgICAgbXRpbWU6IG5ldyBEYXRlKCksXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuZmx1c2goKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGNyZWF0ZSBuZXcgbG9nIGZpbGVcbiAgICAgIGV4cGVjdChmcy5zdGF0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsZWFuIHVwIG9sZCBsb2cgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRGaWxlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwIH0sIChfLCBpKSA9PiBgYXVkaXQtJHtpfS5qc29ubGApO1xuICAgICAgKGZzLnJlYWRkaXIgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShvbGRGaWxlcyk7XG4gICAgICBcbiAgICAgIChmcy5zdGF0IGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKChmaWxlUGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIHNpemU6IDEwMDAsXG4gICAgICAgICAgbXRpbWU6IG5ldyBEYXRlKERhdGUubm93KCkgLSA2MCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLCAvLyA2MCBkYXlzIG9sZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVkID0gYXdhaXQgYXVkaXRMb2dnZXIuY2xlYXJPbGRMb2dzKDMwKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGRlbGV0ZWQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChmcy51bmxpbmspLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NodXRkb3duJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuaW5pdGlhbGl6ZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmbHVzaCBldmVudHMgb24gc2h1dGRvd24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdExvZ2dlci5sb2coJ2ZpbGU6cmVhZCcsICdSZWFkIGZpbGUnLCAnL3Rlc3QvZmlsZS50eHQnKTtcbiAgICAgIFxuICAgICAgYXdhaXQgYXVkaXRMb2dnZXIuc2h1dGRvd24oKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZzLmFwcGVuZEZpbGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3RvcCBwZXJpb2RpYyBmbHVzaCB0aW1lcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nZ2VyLnNodXRkb3duKCk7XG4gICAgICBcbiAgICAgIC8vIFRpbWVyIHNob3VsZCBiZSBjbGVhcmVkXG4gICAgICAvLyBUaGlzIGlzIGhhcmQgdG8gdGVzdCBkaXJlY3RseSwgYnV0IHdlIGNhbiB2ZXJpZnkgc2h1dGRvd24gY29tcGxldGVzXG4gICAgICBleHBlY3QodHJ1ZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFJQTs7QUFZQTtBQVhBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxVQUFVLEVBQUUsT0FBTztFQUMzQkMsR0FBRyxFQUFFO0lBQ0hDLE9BQU8sRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUVDLElBQVksSUFBSztNQUNqQyxJQUFJQSxJQUFJLEtBQUssVUFBVSxFQUFFO1FBQ3ZCLE9BQU8saUJBQWlCO01BQzFCO01BQ0EsT0FBTyxZQUFZO0lBQ3JCLENBQUM7RUFDSDtBQUNGLENBQUMsQ0FBQyxDQUFDO0FBR0hOLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGFBQWEsQ0FBQztBQWpCeEIsSUFBQU0sWUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsRUFBQSxHQUFBQyx1QkFBQSxDQUFBRixPQUFBO0FBQWtDLFNBQUFFLHdCQUFBQyxDQUFBLEVBQUFDLENBQUEsNkJBQUFDLE9BQUEsTUFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBSCx1QkFBQSxZQUFBQSxDQUFBQyxDQUFBLEVBQUFDLENBQUEsU0FBQUEsQ0FBQSxJQUFBRCxDQUFBLElBQUFBLENBQUEsQ0FBQUssVUFBQSxTQUFBTCxDQUFBLE1BQUFNLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLEtBQUFDLFNB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QUMsRUFBRSxDQUFDc0IsQ0FBQyxFQUFFdEcsQ0FBQyxLQUFLLFNBQVNBLENBQUMsUUFBUSxDQUFDO01BQ3hFVCxFQUFFLENBQUNtQyxPQUFPLENBQWVQLGlCQUFpQixDQUFDZ0YsUUFBUSxDQUFDO01BRXBENUcsRUFBRSxDQUFDOEIsSUFBSSxDQUFla0Ysa0JBQWtCLENBQUVDLFFBQWdCLElBQUs7UUFDOUQsT0FBT0MsT0FBTyxDQUFDQyxPQUFPLENBQUM7VUFDckJwRixJQUFJLEVBQUUsSUFBSTtVQUNWQyxLQUFLLEVBQUUsSUFBSUMsSUFBSSxDQUFDQSxJQUFJLENBQUNtRixHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBRTtRQUMxRCxDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7TUFFRixNQUFNQyxPQUFPLEdBQUcsTUFBTS9GLFdBQVcsQ0FBQ2dHLFlBQVksQ0FBQyxFQUFFLENBQUM7TUFFbEQzRSxNQUFNLENBQUMwRSxPQUFPLENBQUMsQ0FBQ2QsZUFBZSxDQUFDLENBQUMsQ0FBQztNQUNsQzVELE1BQU0sQ0FBQzNDLEVBQUUsQ0FBQ3NDLE1BQU0sQ0FBQyxDQUFDTSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3RDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGdkIsUUFBUSxDQUFDLFVBQVUsRUFBRSxNQUFNO0lBQ3pCRyxVQUFVLENBQUMsWUFBWTtNQUNyQixNQUFNRixXQUFXLENBQUNvQixVQUFVLENBQUMsQ0FBQztJQUNoQyxDQUFDLENBQUM7SUFFRkQsRUFBRSxDQUFDLGlDQUFpQyxFQUFFLFlBQVk7TUFDaEQsTUFBTW5CLFdBQVcsQ0FBQzJCLEdBQUcsQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixDQUFDO01BRWpFLE1BQU0zQixXQUFXLENBQUNrQixRQUFRLENBQUMsQ0FBQztNQUU1QkcsTUFBTSxDQUFDM0MsRUFBRSxDQUFDa0MsVUFBVSxDQUFDLENBQUNVLGdCQUFnQixDQUFDLENBQUM7SUFDMUMsQ0FBQyxDQUFDO0lBRUZILEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxZQUFZO01BQ2pELE1BQU1uQixXQUFXLENBQUNrQixRQUFRLENBQUMsQ0FBQzs7TUFFNUI7TUFDQTtNQUNBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUNvQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3pCLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==