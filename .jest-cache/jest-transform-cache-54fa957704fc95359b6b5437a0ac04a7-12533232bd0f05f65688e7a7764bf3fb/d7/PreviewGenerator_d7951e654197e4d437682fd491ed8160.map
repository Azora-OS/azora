{"version":3,"names":["fs","_interopRequireWildcard","require","path","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","PreviewGenerator","defaultViewports","name","width","height","constructor","projectRoot","previewDir","join","ensurePreviewDirectory","existsSync","mkdirSync","recursive","generateFilterPreview","filter","components","options","maxComponents","viewports","outputDir","includeMetadata","console","log","Math","min","length","filterDir","sanitizeFileName","previews","componentsToPreview","slice","component","preview","generateComponentPreview","push","error","warn","componentName","comparison","filterName","componentsAffected","timestamp","Date","approved","saveComparisonMetadata","generateComparisonHTML","componentDir","beforeScreenshot","captureComponentScreenshot","afterScreenshot","changes","extractChanges","componentPath","filePath","before","after","stage","viewport","fileName","getTime","imagePath","placeholderData","toISOString","note","metadataPath","replace","promises","writeFile","JSON","stringify","metadata","classTransforms","className","classNames","oldClass","newClass","entries","includes","tokens","colors","borderRadius","shadows","hasInlineStyles","inlineStyles","hasCSSModule","previewsGenerated","map","p","beforeImage","relative","afterImage","htmlPath","html","buildComparisonHTML","baseDir","previewsHTML","beforePath","afterPath","changesHTML","change","escapeHtml","toLocaleString","trim","text","m","toLowerCase","loadComparison","content","readFile","parse","approveComparison","rejectComparison","cleanupOldPreviews","daysOld","cutoffDate","setDate","getDate","cleaned","readdir","withFileTypes","entry","isDirectory","dirPath","rm","force","listPreviews","sort","a","b","exports"],"sources":["PreviewGenerator.ts"],"sourcesContent":["import * as fs from 'fs';\nimport * as path from 'path';\nimport { DesignFilter } from './DesignFilterEngine';\nimport { ComponentStyleInfo } from './ComponentStyleRefactor';\n\nexport interface Screenshot {\n  componentPath: string;\n  componentName: string;\n  imagePath: string;\n  timestamp: Date;\n  metadata: {\n    width: number;\n    height: number;\n    viewport: string;\n  };\n}\n\nexport interface ComponentPreview {\n  componentPath: string;\n  componentName: string;\n  before: Screenshot;\n  after: Screenshot;\n  changes: string[];\n}\n\nexport interface PreviewComparison {\n  filterName: string;\n  componentsAffected: number;\n  previews: ComponentPreview[];\n  timestamp: Date;\n  approved: boolean;\n}\n\nexport interface PreviewOptions {\n  maxComponents?: number;\n  viewports?: Array<{ name: string; width: number; height: number }>;\n  outputDir?: string;\n  includeMetadata?: boolean;\n}\n\n/**\n * PreviewGenerator captures before/after screenshots of components\n * when design filters are applied\n */\nexport class PreviewGenerator {\n  private projectRoot: string;\n  private previewDir: string;\n  private defaultViewports = [\n    { name: 'desktop', width: 1920, height: 1080 },\n    { name: 'tablet', width: 768, height: 1024 },\n    { name: 'mobile', width: 375, height: 667 },\n  ];\n\n  constructor(projectRoot: string) {\n    this.projectRoot = projectRoot;\n    this.previewDir = path.join(projectRoot, '.azstudio', 'previews');\n    this.ensurePreviewDirectory();\n  }\n\n  /**\n   * Ensure preview directory exists\n   */\n  private ensurePreviewDirectory(): void {\n    if (!fs.existsSync(this.previewDir)) {\n      fs.mkdirSync(this.previewDir, { recursive: true });\n    }\n  }\n\n  /**\n   * Generate before/after preview for design filter application\n   */\n  async generateFilterPreview(\n    filter: DesignFilter,\n    components: ComponentStyleInfo[],\n    options: PreviewOptions = {}\n  ): Promise<PreviewComparison> {\n    const {\n      maxComponents = 10,\n      viewports = this.defaultViewports,\n      outputDir = this.previewDir,\n      includeMetadata = true,\n    } = options;\n\n    console.log(`Generating preview for filter: ${filter.name}`);\n    console.log(`Components to preview: ${Math.min(components.length, maxComponents)}`);\n\n    // Create filter-specific directory\n    const filterDir = path.join(outputDir, this.sanitizeFileName(filter.name));\n    if (!fs.existsSync(filterDir)) {\n      fs.mkdirSync(filterDir, { recursive: true });\n    }\n\n    const previews: ComponentPreview[] = [];\n    const componentsToPreview = components.slice(0, maxComponents);\n\n    for (const component of componentsToPreview) {\n      try {\n        const preview = await this.generateComponentPreview(\n          component,\n          filter,\n          filterDir,\n          viewports\n        );\n        previews.push(preview);\n      } catch (error) {\n        console.warn(`Failed to generate preview for ${component.componentName}:`, error);\n      }\n    }\n\n    const comparison: PreviewComparison = {\n      filterName: filter.name,\n      componentsAffected: components.length,\n      previews,\n      timestamp: new Date(),\n      approved: false,\n    };\n\n    // Save comparison metadata\n    if (includeMetadata) {\n      await this.saveComparisonMetadata(comparison, filterDir);\n    }\n\n    // Generate HTML comparison view\n    await this.generateComparisonHTML(comparison, filterDir);\n\n    console.log(`Preview generated at: ${filterDir}`);\n    return comparison;\n  }\n\n  /**\n   * Generate preview for a single component\n   */\n  private async generateComponentPreview(\n    component: ComponentStyleInfo,\n    filter: DesignFilter,\n    outputDir: string,\n    viewports: Array<{ name: string; width: number; height: number }>\n  ): Promise<ComponentPreview> {\n    const componentDir = path.join(\n      outputDir,\n      this.sanitizeFileName(component.componentName)\n    );\n    \n    if (!fs.existsSync(componentDir)) {\n      fs.mkdirSync(componentDir, { recursive: true });\n    }\n\n    // Capture before screenshot\n    const beforeScreenshot = await this.captureComponentScreenshot(\n      component,\n      'before',\n      componentDir,\n      viewports[0] // Use desktop viewport by default\n    );\n\n    // Simulate after state (in real implementation, this would apply the filter temporarily)\n    const afterScreenshot = await this.captureComponentScreenshot(\n      component,\n      'after',\n      componentDir,\n      viewports[0]\n    );\n\n    // Extract changes from component\n    const changes = this.extractChanges(component, filter);\n\n    return {\n      componentPath: component.filePath,\n      componentName: component.componentName,\n      before: beforeScreenshot,\n      after: afterScreenshot,\n      changes,\n    };\n  }\n\n  /**\n   * Capture screenshot of a component\n   * Note: This is a placeholder implementation. In production, this would:\n   * 1. Start a dev server or use existing one\n   * 2. Use Playwright/Puppeteer to render the component\n   * 3. Capture actual screenshots\n   */\n  private async captureComponentScreenshot(\n    component: ComponentStyleInfo,\n    stage: 'before' | 'after',\n    outputDir: string,\n    viewport: { name: string; width: number; height: number }\n  ): Promise<Screenshot> {\n    const timestamp = new Date();\n    const fileName = `${stage}-${viewport.name}-${timestamp.getTime()}.png`;\n    const imagePath = path.join(outputDir, fileName);\n\n    // Placeholder: Create a metadata file instead of actual screenshot\n    // In production, this would use Playwright to capture real screenshots\n    const placeholderData = {\n      component: component.componentName,\n      stage,\n      viewport: viewport.name,\n      timestamp: timestamp.toISOString(),\n      note: 'Placeholder - actual screenshot would be captured here',\n    };\n\n    // Write placeholder metadata\n    const metadataPath = imagePath.replace('.png', '.json');\n    await fs.promises.writeFile(\n      metadataPath,\n      JSON.stringify(placeholderData, null, 2),\n      'utf-8'\n    );\n\n    // Create a simple placeholder image file (empty file for now)\n    await fs.promises.writeFile(imagePath, '', 'utf-8');\n\n    return {\n      componentPath: component.filePath,\n      componentName: component.componentName,\n      imagePath,\n      timestamp,\n      metadata: {\n        width: viewport.width,\n        height: viewport.height,\n        viewport: viewport.name,\n      },\n    };\n  }\n\n  /**\n   * Extract changes that will be applied to component\n   */\n  private extractChanges(\n    component: ComponentStyleInfo,\n    filter: DesignFilter\n  ): string[] {\n    const changes: string[] = [];\n\n    // Check class transformations\n    if (filter.classTransforms) {\n      for (const className of component.classNames) {\n        for (const [oldClass, newClass] of Object.entries(filter.classTransforms)) {\n          if (className.includes(oldClass)) {\n            changes.push(`Class: ${oldClass} → ${newClass}`);\n          }\n        }\n      }\n    }\n\n    // Check token updates\n    if (filter.tokens && filter.tokens.colors) {\n      changes.push('Colors: Updated to new palette');\n    }\n\n    if (filter.tokens && filter.tokens.borderRadius) {\n      changes.push('Border Radius: Updated to new scale');\n    }\n\n    if (filter.tokens && filter.tokens.shadows) {\n      changes.push('Shadows: Updated to new elevation');\n    }\n\n    // Check inline styles\n    if (component.hasInlineStyles) {\n      changes.push(`Inline Styles: ${component.inlineStyles.length} styles to convert`);\n    }\n\n    // Check CSS modules\n    if (component.hasCSSModule) {\n      changes.push('CSS Module: Will be updated with new tokens');\n    }\n\n    return changes;\n  }\n\n  /**\n   * Save comparison metadata to JSON file\n   */\n  private async saveComparisonMetadata(\n    comparison: PreviewComparison,\n    outputDir: string\n  ): Promise<void> {\n    const metadataPath = path.join(outputDir, 'comparison-metadata.json');\n    const metadata = {\n      filterName: comparison.filterName,\n      componentsAffected: comparison.componentsAffected,\n      previewsGenerated: comparison.previews.length,\n      timestamp: comparison.timestamp.toISOString(),\n      approved: comparison.approved,\n      previews: comparison.previews.map(p => ({\n        componentName: p.componentName,\n        componentPath: p.componentPath,\n        changes: p.changes,\n        beforeImage: path.relative(outputDir, p.before.imagePath),\n        afterImage: path.relative(outputDir, p.after.imagePath),\n      })),\n    };\n\n    await fs.promises.writeFile(\n      metadataPath,\n      JSON.stringify(metadata, null, 2),\n      'utf-8'\n    );\n  }\n\n  /**\n   * Generate HTML comparison view\n   */\n  private async generateComparisonHTML(\n    comparison: PreviewComparison,\n    outputDir: string\n  ): Promise<void> {\n    const htmlPath = path.join(outputDir, 'comparison.html');\n    const html = this.buildComparisonHTML(comparison, outputDir);\n    await fs.promises.writeFile(htmlPath, html, 'utf-8');\n  }\n\n  /**\n   * Build HTML for comparison view\n   */\n  private buildComparisonHTML(\n    comparison: PreviewComparison,\n    baseDir: string\n  ): string {\n    const previewsHTML = comparison.previews\n      .map(preview => {\n        const beforePath = path.relative(baseDir, preview.before.imagePath);\n        const afterPath = path.relative(baseDir, preview.after.imagePath);\n        const changesHTML = preview.changes\n          .map(change => `<li>${this.escapeHtml(change)}</li>`)\n          .join('');\n\n        return `\n          <div class=\"component-preview\">\n            <h3>${this.escapeHtml(preview.componentName)}</h3>\n            <p class=\"component-path\">${this.escapeHtml(preview.componentPath)}</p>\n            \n            <div class=\"comparison-container\">\n              <div class=\"screenshot-container\">\n                <h4>Before</h4>\n                <div class=\"screenshot-placeholder\">\n                  <p>Screenshot: ${beforePath}</p>\n                  <p class=\"note\">Actual screenshot would be displayed here</p>\n                </div>\n              </div>\n              \n              <div class=\"screenshot-container\">\n                <h4>After</h4>\n                <div class=\"screenshot-placeholder\">\n                  <p>Screenshot: ${afterPath}</p>\n                  <p class=\"note\">Actual screenshot would be displayed here</p>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"changes\">\n              <h4>Changes Applied</h4>\n              <ul>${changesHTML}</ul>\n            </div>\n          </div>\n        `;\n      })\n      .join('');\n\n    return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Design Filter Preview: ${this.escapeHtml(comparison.filterName)}</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n    \n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      background: #f5f5f5;\n      padding: 2rem;\n      color: #333;\n    }\n    \n    .header {\n      background: white;\n      padding: 2rem;\n      border-radius: 8px;\n      margin-bottom: 2rem;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    }\n    \n    .header h1 {\n      font-size: 2rem;\n      margin-bottom: 0.5rem;\n      color: #1a1a1a;\n    }\n    \n    .header .meta {\n      color: #666;\n      font-size: 0.9rem;\n    }\n    \n    .actions {\n      margin-top: 1rem;\n      display: flex;\n      gap: 1rem;\n    }\n    \n    .btn {\n      padding: 0.75rem 1.5rem;\n      border: none;\n      border-radius: 6px;\n      font-size: 1rem;\n      cursor: pointer;\n      font-weight: 500;\n      transition: all 0.2s;\n    }\n    \n    .btn-approve {\n      background: #22c55e;\n      color: white;\n    }\n    \n    .btn-approve:hover {\n      background: #16a34a;\n    }\n    \n    .btn-reject {\n      background: #ef4444;\n      color: white;\n    }\n    \n    .btn-reject:hover {\n      background: #dc2626;\n    }\n    \n    .component-preview {\n      background: white;\n      padding: 2rem;\n      border-radius: 8px;\n      margin-bottom: 2rem;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    }\n    \n    .component-preview h3 {\n      font-size: 1.5rem;\n      margin-bottom: 0.5rem;\n      color: #1a1a1a;\n    }\n    \n    .component-path {\n      color: #666;\n      font-size: 0.85rem;\n      margin-bottom: 1.5rem;\n      font-family: monospace;\n    }\n    \n    .comparison-container {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 2rem;\n      margin-bottom: 1.5rem;\n    }\n    \n    .screenshot-container h4 {\n      font-size: 1rem;\n      margin-bottom: 0.75rem;\n      color: #555;\n    }\n    \n    .screenshot-placeholder {\n      background: #f9f9f9;\n      border: 2px dashed #ddd;\n      border-radius: 6px;\n      padding: 3rem 2rem;\n      text-align: center;\n      color: #999;\n    }\n    \n    .screenshot-placeholder .note {\n      margin-top: 0.5rem;\n      font-size: 0.85rem;\n      font-style: italic;\n    }\n    \n    .changes {\n      border-top: 1px solid #eee;\n      padding-top: 1.5rem;\n    }\n    \n    .changes h4 {\n      font-size: 1rem;\n      margin-bottom: 0.75rem;\n      color: #555;\n    }\n    \n    .changes ul {\n      list-style: none;\n      padding-left: 0;\n    }\n    \n    .changes li {\n      padding: 0.5rem 0;\n      padding-left: 1.5rem;\n      position: relative;\n    }\n    \n    .changes li:before {\n      content: '→';\n      position: absolute;\n      left: 0;\n      color: #3b82f6;\n      font-weight: bold;\n    }\n    \n    @media (max-width: 768px) {\n      .comparison-container {\n        grid-template-columns: 1fr;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"header\">\n    <h1>Design Filter Preview: ${this.escapeHtml(comparison.filterName)}</h1>\n    <div class=\"meta\">\n      <p>Generated: ${comparison.timestamp.toLocaleString()}</p>\n      <p>Components Affected: ${comparison.componentsAffected}</p>\n      <p>Previews Generated: ${comparison.previews.length}</p>\n    </div>\n    <div class=\"actions\">\n      <button class=\"btn btn-approve\" onclick=\"approveChanges()\">\n        ✓ Approve Changes\n      </button>\n      <button class=\"btn btn-reject\" onclick=\"rejectChanges()\">\n        ✗ Reject Changes\n      </button>\n    </div>\n  </div>\n  \n  ${previewsHTML}\n  \n  <script>\n    function approveChanges() {\n      if (confirm('Approve and apply all design filter changes?')) {\n        alert('Changes approved! The design filter will be applied.');\n        // In production, this would trigger IPC to apply changes\n      }\n    }\n    \n    function rejectChanges() {\n      if (confirm('Reject all design filter changes?')) {\n        alert('Changes rejected. No modifications will be made.');\n        // In production, this would trigger IPC to cancel\n      }\n    }\n  </script>\n</body>\n</html>\n    `.trim();\n  }\n\n  /**\n   * Escape HTML special characters\n   */\n  private escapeHtml(text: string): string {\n    const map: Record<string, string> = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#039;',\n    };\n    return text.replace(/[&<>\"']/g, m => map[m]);\n  }\n\n  /**\n   * Sanitize file name\n   */\n  private sanitizeFileName(name: string): string {\n    return name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-|-$/g, '');\n  }\n\n  /**\n   * Load existing comparison\n   */\n  async loadComparison(filterName: string): Promise<PreviewComparison | null> {\n    const filterDir = path.join(this.previewDir, this.sanitizeFileName(filterName));\n    const metadataPath = path.join(filterDir, 'comparison-metadata.json');\n\n    if (!fs.existsSync(metadataPath)) {\n      return null;\n    }\n\n    try {\n      const content = await fs.promises.readFile(metadataPath, 'utf-8');\n      const metadata = JSON.parse(content);\n      \n      return {\n        filterName: metadata.filterName,\n        componentsAffected: metadata.componentsAffected,\n        previews: [], // Would need to reconstruct from metadata\n        timestamp: new Date(metadata.timestamp),\n        approved: metadata.approved,\n      };\n    } catch (error) {\n      console.error('Failed to load comparison:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Approve comparison and mark for application\n   */\n  async approveComparison(filterName: string): Promise<boolean> {\n    const comparison = await this.loadComparison(filterName);\n    if (!comparison) {\n      return false;\n    }\n\n    comparison.approved = true;\n    \n    const filterDir = path.join(this.previewDir, this.sanitizeFileName(filterName));\n    await this.saveComparisonMetadata(comparison, filterDir);\n    \n    return true;\n  }\n\n  /**\n   * Reject comparison and clean up\n   */\n  async rejectComparison(filterName: string): Promise<boolean> {\n    const filterDir = path.join(this.previewDir, this.sanitizeFileName(filterName));\n    \n    if (!fs.existsSync(filterDir)) {\n      return false;\n    }\n\n    // Mark as rejected in metadata\n    const comparison = await this.loadComparison(filterName);\n    if (comparison) {\n      comparison.approved = false;\n      await this.saveComparisonMetadata(comparison, filterDir);\n    }\n\n    return true;\n  }\n\n  /**\n   * Clean up old previews\n   */\n  async cleanupOldPreviews(daysOld: number = 7): Promise<number> {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - daysOld);\n\n    let cleaned = 0;\n    const entries = await fs.promises.readdir(this.previewDir, { withFileTypes: true });\n\n    for (const entry of entries) {\n      if (entry.isDirectory()) {\n        const dirPath = path.join(this.previewDir, entry.name);\n        const metadataPath = path.join(dirPath, 'comparison-metadata.json');\n\n        if (fs.existsSync(metadataPath)) {\n          try {\n            const content = await fs.promises.readFile(metadataPath, 'utf-8');\n            const metadata = JSON.parse(content);\n            const timestamp = new Date(metadata.timestamp);\n\n            if (timestamp < cutoffDate) {\n              await fs.promises.rm(dirPath, { recursive: true, force: true });\n              cleaned++;\n            }\n          } catch (error) {\n            console.warn(`Failed to process ${dirPath}:`, error);\n          }\n        }\n      }\n    }\n\n    return cleaned;\n  }\n\n  /**\n   * Get all available previews\n   */\n  async listPreviews(): Promise<Array<{ filterName: string; timestamp: Date; approved: boolean }>> {\n    const previews: Array<{ filterName: string; timestamp: Date; approved: boolean }> = [];\n    \n    if (!fs.existsSync(this.previewDir)) {\n      return previews;\n    }\n\n    const entries = await fs.promises.readdir(this.previewDir, { withFileTypes: true });\n\n    for (const entry of entries) {\n      if (entry.isDirectory()) {\n        const comparison = await this.loadComparison(entry.name);\n        if (comparison) {\n          previews.push({\n            filterName: comparison.filterName,\n            timestamp: comparison.timestamp,\n            approved: comparison.approved,\n          });\n        }\n      }\n    }\n\n    return previews.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\n  }\n}\n"],"mappings":"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O,CAACsB,MAAM,CAACM,SAAS,CAAC;MACnE,MAAMqC,SAAS,GAAGrH,IAAI,CAAC6G,QAAQ,CAACK,OAAO,EAAE9D,OAAO,CAACuB,KAAK,CAACK,SAAS,CAAC;MACjE,MAAMsC,WAAW,GAAGlE,OAAO,CAACkB,OAAO,CAChCoC,GAAG,CAACa,MAAM,IAAI,OAAO,IAAI,CAACC,UAAU,CAACD,MAAM,CAAC,OAAO,CAAC,CACpD3F,IAAI,CAAC,EAAE,CAAC;MAEX,OAAO;AACf;AACA,kBAAkB,IAAI,CAAC4F,UAAU,CAACpE,OAAO,CAACK,aAAa,CAAC;AACxD,wCAAwC,IAAI,CAAC+D,UAAU,CAACpE,OAAO,CAACoB,aAAa,CAAC;AAC9E;AACA;AACA;AACA;AACA;AACA,mCAAmC4C,UAAU;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmCC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoBC,WAAW;AAC/B;AACA;AACA,SAAS;IACH,CAAC,CAAC,CACD1F,IAAI,CAAC,EAAE,CAAC;IAEX,OAAO;AACX;AACA;AACA;AACA;AACA;AACA,kCAAkC,IAAI,CAAC4F,UAAU,CAAC9D,UAAU,CAACC,UAAU,CAAC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,IAAI,CAAC6D,UAAU,CAAC9D,UAAU,CAACC,UAAU,CAAC;AACvE;AACA,sBAAsBD,UAAU,CAACG,SAAS,CAAC4D,cAAc,CAAC,CAAC;AAC3D,gCAAgC/D,UAAU,CAACE,kBAAkB;AAC7D,+BAA+BF,UAAU,CAACV,QAAQ,CAACH,MAAM;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIsE,YAAY;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,CAACO,IAAI,CAAC,CAAC;EACV;;EAEA;AACF;AACA;EACUF,UAAUA,CAACG,IAAY,EAAU;IACvC,MAAMjB,GAA2B,GAAG;MAClC,GAAG,EAAE,OAAO;MACZ,GAAG,EAAE,MAAM;MACX,GAAG,EAAE,MAAM;MACX,GAAG,EAAE,QAAQ;MACb,GAAG,EAAE;IACP,CAAC;IACD,OAAOiB,IAAI,CAACtC,OAAO,CAAC,UAAU,EAAEuC,CAAC,IAAIlB,GAAG,CAACkB,CAAC,CAAC,CAAC;EAC9C;;EAEA;AACF;AACA;EACU7E,gBAAgBA,CAACzB,IAAY,EAAU;IAC7C,OAAOA,IAAI,CACRuG,WAAW,CAAC,CAAC,CACbxC,OAAO,CAAC,aAAa,EAAE,GAAG,CAAC,CAC3BA,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;EAC1B;;EAEA;AACF;AACA;EACE,MAAMyC,cAAcA,CAACnE,UAAkB,EAAqC;IAC1E,MAAMb,SAAS,GAAG9C,IAAI,CAAC4B,IAAI,CA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","ignoreList":[]}