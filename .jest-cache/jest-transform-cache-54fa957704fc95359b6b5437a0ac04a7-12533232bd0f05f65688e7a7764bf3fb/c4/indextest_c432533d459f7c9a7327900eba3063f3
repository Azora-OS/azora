f3fc72236c9a4fc79156356c751f368a
"use strict";

// Mock Prisma client
_getJestObj().mock('../../utils/database');
var _index = require("../index");
var _database = require("../../utils/database");
var _errors = require("../../utils/errors");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('Data Models', () => {
  let mockPrisma;
  beforeEach(() => {
    mockPrisma = {
      course: {
        create: jest.fn(),
        findUnique: jest.fn(),
        findMany: jest.fn(),
        update: jest.fn(),
        delete: jest.fn(),
        count: jest.fn()
      },
      enrollment: {
        create: jest.fn(),
        findUnique: jest.fn(),
        findMany: jest.fn(),
        findFirst: jest.fn(),
        update: jest.fn(),
        count: jest.fn()
      },
      assessment: {
        findUnique: jest.fn(),
        findMany: jest.fn()
      },
      learningOutcome: {
        create: jest.fn(),
        findMany: jest.fn(),
        aggregate: jest.fn()
      }
    };
    _database.getPrismaClient.mockReturnValue(mockPrisma);
  });
  describe('CourseModel', () => {
    describe('create', () => {
      it('should create a course with provided data', async () => {
        const courseData = {
          title: 'TypeScript Basics',
          description: 'Learn TypeScript fundamentals',
          instructorId: 'instructor-123',
          tier: 'free',
          language: 'en',
          prerequisites: []
        };
        mockPrisma.course.create.mockResolvedValue({
          id: 'course-123',
          ...courseData,
          createdAt: new Date(),
          updatedAt: new Date()
        });
        const result = await _index.CourseModel.create(courseData);
        expect(mockPrisma.course.create).toHaveBeenCalledWith({
          data: courseData
        });
        expect(result.id).toBe('course-123');
        expect(result.title).toBe('TypeScript Basics');
      });
      it('should use default language if not provided', async () => {
        const courseData = {
          title: 'TypeScript Basics',
          description: 'Learn TypeScript fundamentals',
          instructorId: 'instructor-123',
          tier: 'free'
        };
        mockPrisma.course.create.mockResolvedValue({
          id: 'course-123',
          ...courseData,
          language: 'en',
          prerequisites: [],
          createdAt: new Date(),
          updatedAt: new Date()
        });
        await _index.CourseModel.create(courseData);
        expect(mockPrisma.course.create).toHaveBeenCalledWith({
          data: expect.objectContaining({
            language: 'en',
            prerequisites: []
          })
        });
      });
    });
    describe('findById', () => {
      it('should find a course by ID', async () => {
        const course = {
          id: 'course-123',
          title: 'TypeScript Basics',
          description: 'Learn TypeScript',
          instructorId: 'instructor-123',
          tier: 'free',
          language: 'en',
          prerequisites: [],
          modules: [],
          assessments: [],
          createdAt: new Date(),
          updatedAt: new Date()
        };
        mockPrisma.course.findUnique.mockResolvedValue(course);
        const result = await _index.CourseModel.findById('course-123');
        expect(mockPrisma.course.findUnique).toHaveBeenCalledWith({
          where: {
            id: 'course-123'
          },
          include: {
            modules: true,
            assessments: true
          }
        });
        expect(result).toEqual(course);
      });
      it('should throw NotFoundError when course does not exist', async () => {
        mockPrisma.course.findUnique.mockResolvedValue(null);
        await expect(_index.CourseModel.findById('nonexistent')).rejects.toThrow(_errors.NotFoundError);
      });
    });
    describe('findAll', () => {
      it('should find all courses with pagination', async () => {
        const courses = [{
          id: 'course-1',
          title: 'Course 1',
          description: 'Description 1',
          instructorId: 'instructor-1',
          tier: 'free',
          language: 'en',
          prerequisites: [],
          modules: [],
          assessments: [],
          createdAt: new Date(),
          updatedAt: new Date()
        }];
        mockPrisma.course.findMany.mockResolvedValue(courses);
        mockPrisma.course.count.mockResolvedValue(1);
        const result = await _index.CourseModel.findAll({
          page: 1,
          pageSize: 10
        });
        expect(result.data).toEqual(courses);
        expect(result.total).toBe(1);
        expect(result.page).toBe(1);
        expect(result.pageSize).toBe(10);
        expect(result.totalPages).toBe(1);
      });
      it('should filter by tier', async () => {
        mockPrisma.course.findMany.mockResolvedValue([]);
        mockPrisma.course.count.mockResolvedValue(0);
        await _index.CourseModel.findAll({
          tier: 'premium'
        });
        expect(mockPrisma.course.findMany).toHaveBeenCalledWith(expect.objectContaining({
          where: expect.objectContaining({
            tier: 'premium'
          })
        }));
      });
    });
    describe('update', () => {
      it('should update a course', async () => {
        const updatedCourse = {
          id: 'course-123',
          title: 'Updated Title',
          description: 'Updated Description',
          instructorId: 'instructor-123',
          tier: 'premium',
          language: 'en',
          prerequisites: [],
          modules: [],
          assessments: [],
          createdAt: new Date(),
          updatedAt: new Date()
        };
        mockPrisma.course.update.mockResolvedValue(updatedCourse);
        const result = await _index.CourseModel.update('course-123', {
          title: 'Updated Title',
          tier: 'premium'
        });
        expect(mockPrisma.course.update).toHaveBeenCalledWith({
          where: {
            id: 'course-123'
          },
          data: expect.objectContaining({
            title: 'Updated Title',
            tier: 'premium'
          }),
          include: {
            modules: true,
            assessments: true
          }
        });
        expect(result.title).toBe('Updated Title');
      });
    });
    describe('delete', () => {
      it('should delete a course', async () => {
        mockPrisma.course.delete.mockResolvedValue({
          id: 'course-123'
        });
        await _index.CourseModel.delete('course-123');
        expect(mockPrisma.course.delete).toHaveBeenCalledWith({
          where: {
            id: 'course-123'
          }
        });
      });
    });
  });
  describe('EnrollmentModel', () => {
    describe('create', () => {
      it('should create an enrollment for a free course', async () => {
        const enrollmentData = {
          studentId: 'student-123',
          courseId: 'course-456',
          tier: 'free'
        };
        mockPrisma.course.findUnique.mockResolvedValue({
          id: 'course-456',
          tier: 'free'
        });
        mockPrisma.enrollment.findFirst.mockResolvedValue(null);
        mockPrisma.enrollment.create.mockResolvedValue({
          id: 'enrollment-789',
          ...enrollmentData,
          status: 'active',
          progress: 0,
          startDate: new Date(),
          completionDate: null,
          course: {
            id: 'course-456',
            tier: 'free'
          },
          student: {
            id: 'student-123'
          }
        });
        const result = await _index.EnrollmentModel.create(enrollmentData);
        expect(result.id).toBe('enrollment-789');
        expect(result.status).toBe('active');
        expect(result.progress).toBe(0);
      });
      it('should throw TierAccessError when free student tries to enroll in premium course', async () => {
        const enrollmentData = {
          studentId: 'student-123',
          courseId: 'course-456',
          tier: 'free'
        };
        mockPrisma.course.findUnique.mockResolvedValue({
          id: 'course-456',
          tier: 'premium'
        });
        await expect(_index.EnrollmentModel.create(enrollmentData)).rejects.toThrow(_errors.TierAccessError);
      });
      it('should throw NotFoundError when course does not exist', async () => {
        const enrollmentData = {
          studentId: 'student-123',
          courseId: 'nonexistent',
          tier: 'free'
        };
        mockPrisma.course.findUnique.mockResolvedValue(null);
        await expect(_index.EnrollmentModel.create(enrollmentData)).rejects.toThrow(_errors.NotFoundError);
      });
      it('should throw EnrollmentError for duplicate enrollment', async () => {
        const enrollmentData = {
          studentId: 'student-123',
          courseId: 'course-456',
          tier: 'free'
        };
        mockPrisma.course.findUnique.mockResolvedValue({
          id: 'course-456',
          tier: 'free'
        });
        mockPrisma.enrollment.findFirst.mockResolvedValue({
          id: 'existing-enrollment'
        });
        await expect(_index.EnrollmentModel.create(enrollmentData)).rejects.toThrow(_errors.EnrollmentError);
      });
    });
    describe('findById', () => {
      it('should find an enrollment by ID', async () => {
        const enrollment = {
          id: 'enrollment-123',
          studentId: 'student-123',
          courseId: 'course-456',
          tier: 'free',
          status: 'active',
          progress: 50,
          startDate: new Date(),
          completionDate: null,
          course: {
            id: 'course-456'
          },
          student: {
            id: 'student-123'
          },
          outcomes: []
        };
        mockPrisma.enrollment.findUnique.mockResolvedValue(enrollment);
        const result = await _index.EnrollmentModel.findById('enrollment-123');
        expect(result).toEqual(enrollment);
      });
      it('should throw NotFoundError when enrollment does not exist', async () => {
        mockPrisma.enrollment.findUnique.mockResolvedValue(null);
        await expect(_index.EnrollmentModel.findById('nonexistent')).rejects.toThrow(_errors.NotFoundError);
      });
    });
    describe('findByStudentId', () => {
      it('should find enrollments by student ID', async () => {
        const enrollments = [{
          id: 'enrollment-1',
          studentId: 'student-123',
          courseId: 'course-1',
          tier: 'free',
          status: 'active',
          progress: 50,
          startDate: new Date(),
          completionDate: null,
          course: {
            id: 'course-1'
          },
          outcomes: []
        }];
        mockPrisma.enrollment.findMany.mockResolvedValue(enrollments);
        mockPrisma.enrollment.count.mockResolvedValue(1);
        const result = await _index.EnrollmentModel.findByStudentId('student-123');
        expect(result.data).toEqual(enrollments);
        expect(result.total).toBe(1);
      });
    });
    describe('markCompleted', () => {
      it('should mark an enrollment as completed', async () => {
        mockPrisma.enrollment.update.mockResolvedValue({
          id: 'enrollment-123',
          status: 'completed',
          progress: 100,
          completionDate: new Date()
        });
        const result = await _index.EnrollmentModel.markCompleted('enrollment-123');
        expect(mockPrisma.enrollment.update).toHaveBeenCalledWith({
          where: {
            id: 'enrollment-123'
          },
          data: expect.objectContaining({
            status: 'completed',
            progress: 100
          })
        });
        expect(result.status).toBe('completed');
      });
    });
  });
  describe('LearningOutcomeModel', () => {
    describe('create', () => {
      it('should create a learning outcome', async () => {
        const outcomeData = {
          enrollmentId: 'enrollment-123',
          courseId: 'course-456',
          moduleId: 'module-789',
          assessmentScore: 85,
          timeSpent: 3600,
          conceptMastery: 80
        };
        mockPrisma.learningOutcome.create.mockResolvedValue({
          id: 'outcome-123',
          ...outcomeData,
          completedAt: new Date()
        });
        const result = await _index.LearningOutcomeModel.create(outcomeData);
        expect(result.id).toBe('outcome-123');
        expect(result.assessmentScore).toBe(85);
      });
    });
    describe('calculateAverageScore', () => {
      it('should calculate average score for an enrollment', async () => {
        mockPrisma.learningOutcome.aggregate.mockResolvedValue({
          _avg: {
            assessmentScore: 82.5
          }
        });
        const result = await _index.LearningOutcomeModel.calculateAverageScore('enrollment-123');
        expect(result).toBe(82.5);
      });
      it('should return 0 when no outcomes exist', async () => {
        mockPrisma.learningOutcome.aggregate.mockResolvedValue({
          _avg: {
            assessmentScore: null
          }
        });
        const result = await _index.LearningOutcomeModel.calculateAverageScore('enrollment-123');
        expect(result).toBe(0);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJfaW5kZXgiLCJyZXF1aXJlIiwiX2RhdGFiYXNlIiwiX2Vycm9ycyIsImplc3QiLCJkZXNjcmliZSIsIm1vY2tQcmlzbWEiLCJiZWZvcmVFYWNoIiwiY291cnNlIiwiY3JlYXRlIiwiZm4iLCJmaW5kVW5pcXVlIiwiZmluZE1hbnkiLCJ1cGRhdGUiLCJkZWxldGUiLCJjb3VudCIsImVucm9sbG1lbnQiLCJmaW5kRmlyc3QiLCJhc3Nlc3NtZW50IiwibGVhcm5pbmdPdXRjb21lIiwiYWdncmVnYXRlIiwiZ2V0UHJpc21hQ2xpZW50IiwibW9ja1JldHVyblZhbHVlIiwiaXQiLCJjb3Vyc2VEYXRhIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImluc3RydWN0b3JJZCIsInRpZXIiLCJsYW5ndWFnZSIsInByZXJlcXVpc2l0ZXMiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImlkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInJlc3VsdCIsIkNvdXJzZU1vZGVsIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJkYXRhIiwidG9CZSIsIm9iamVjdENvbnRhaW5pbmciLCJtb2R1bGVzIiwiYXNzZXNzbWVudHMiLCJmaW5kQnlJZCIsIndoZXJlIiwiaW5jbHVkZSIsInRvRXF1YWwiLCJyZWplY3RzIiwidG9UaHJvdyIsIk5vdEZvdW5kRXJyb3IiLCJjb3Vyc2VzIiwiZmluZEFsbCIsInBhZ2UiLCJwYWdlU2l6ZSIsInRvdGFsIiwidG90YWxQYWdlcyIsInVwZGF0ZWRDb3Vyc2UiLCJlbnJvbGxtZW50RGF0YSIsInN0dWRlbnRJZCIsImNvdXJzZUlkIiwic3RhdHVzIiwicHJvZ3Jlc3MiLCJzdGFydERhdGUiLCJjb21wbGV0aW9uRGF0ZSIsInN0dWRlbnQiLCJFbnJvbGxtZW50TW9kZWwiLCJUaWVyQWNjZXNzRXJyb3IiLCJFbnJvbGxtZW50RXJyb3IiLCJvdXRjb21lcyIsImVucm9sbG1lbnRzIiwiZmluZEJ5U3R1ZGVudElkIiwibWFya0NvbXBsZXRlZCIsIm91dGNvbWVEYXRhIiwiZW5yb2xsbWVudElkIiwibW9kdWxlSWQiLCJhc3Nlc3NtZW50U2NvcmUiLCJ0aW1lU3BlbnQiLCJjb25jZXB0TWFzdGVyeSIsImNvbXBsZXRlZEF0IiwiTGVhcm5pbmdPdXRjb21lTW9kZWwiLCJfYXZnIiwiY2FsY3VsYXRlQXZlcmFnZVNjb3JlIl0sInNvdXJjZXMiOlsiaW5kZXgudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb3Vyc2VNb2RlbCwgRW5yb2xsbWVudE1vZGVsLCBMZWFybmluZ091dGNvbWVNb2RlbCB9IGZyb20gJy4uL2luZGV4JztcclxuaW1wb3J0IHsgZ2V0UHJpc21hQ2xpZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZGF0YWJhc2UnO1xyXG5pbXBvcnQgeyBOb3RGb3VuZEVycm9yLCBUaWVyQWNjZXNzRXJyb3IsIEVucm9sbG1lbnRFcnJvciB9IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9ycyc7XHJcblxyXG4vLyBNb2NrIFByaXNtYSBjbGllbnRcclxuamVzdC5tb2NrKCcuLi8uLi91dGlscy9kYXRhYmFzZScpO1xyXG5cclxuZGVzY3JpYmUoJ0RhdGEgTW9kZWxzJywgKCkgPT4ge1xyXG4gIGxldCBtb2NrUHJpc21hOiBhbnk7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgbW9ja1ByaXNtYSA9IHtcclxuICAgICAgY291cnNlOiB7XHJcbiAgICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxyXG4gICAgICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXHJcbiAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXHJcbiAgICAgICAgY291bnQ6IGplc3QuZm4oKSxcclxuICAgICAgfSxcclxuICAgICAgZW5yb2xsbWVudDoge1xyXG4gICAgICAgIGNyZWF0ZTogamVzdC5mbigpLFxyXG4gICAgICAgIGZpbmRVbmlxdWU6IGplc3QuZm4oKSxcclxuICAgICAgICBmaW5kTWFueTogamVzdC5mbigpLFxyXG4gICAgICAgIGZpbmRGaXJzdDogamVzdC5mbigpLFxyXG4gICAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgICAgIGNvdW50OiBqZXN0LmZuKCksXHJcbiAgICAgIH0sXHJcbiAgICAgIGFzc2Vzc21lbnQ6IHtcclxuICAgICAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXHJcbiAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcclxuICAgICAgfSxcclxuICAgICAgbGVhcm5pbmdPdXRjb21lOiB7XHJcbiAgICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcclxuICAgICAgICBhZ2dyZWdhdGU6IGplc3QuZm4oKSxcclxuICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgKGdldFByaXNtYUNsaWVudCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrUHJpc21hKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvdXJzZU1vZGVsJywgKCkgPT4ge1xyXG4gICAgZGVzY3JpYmUoJ2NyZWF0ZScsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBjb3Vyc2Ugd2l0aCBwcm92aWRlZCBkYXRhJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvdXJzZURhdGEgPSB7XHJcbiAgICAgICAgICB0aXRsZTogJ1R5cGVTY3JpcHQgQmFzaWNzJyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTGVhcm4gVHlwZVNjcmlwdCBmdW5kYW1lbnRhbHMnLFxyXG4gICAgICAgICAgaW5zdHJ1Y3RvcklkOiAnaW5zdHJ1Y3Rvci0xMjMnLFxyXG4gICAgICAgICAgdGllcjogJ2ZyZWUnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgbGFuZ3VhZ2U6ICdlbicsXHJcbiAgICAgICAgICBwcmVyZXF1aXNpdGVzOiBbXSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBtb2NrUHJpc21hLmNvdXJzZS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgaWQ6ICdjb3Vyc2UtMTIzJyxcclxuICAgICAgICAgIC4uLmNvdXJzZURhdGEsXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvdXJzZU1vZGVsLmNyZWF0ZShjb3Vyc2VEYXRhKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KG1vY2tQcmlzbWEuY291cnNlLmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgICAgZGF0YTogY291cnNlRGF0YSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlKCdjb3Vyc2UtMTIzJyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC50aXRsZSkudG9CZSgnVHlwZVNjcmlwdCBCYXNpY3MnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IGxhbmd1YWdlIGlmIG5vdCBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBjb3Vyc2VEYXRhID0ge1xyXG4gICAgICAgICAgdGl0bGU6ICdUeXBlU2NyaXB0IEJhc2ljcycsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIFR5cGVTY3JpcHQgZnVuZGFtZW50YWxzJyxcclxuICAgICAgICAgIGluc3RydWN0b3JJZDogJ2luc3RydWN0b3ItMTIzJyxcclxuICAgICAgICAgIHRpZXI6ICdmcmVlJyBhcyBjb25zdCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBtb2NrUHJpc21hLmNvdXJzZS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgaWQ6ICdjb3Vyc2UtMTIzJyxcclxuICAgICAgICAgIC4uLmNvdXJzZURhdGEsXHJcbiAgICAgICAgICBsYW5ndWFnZTogJ2VuJyxcclxuICAgICAgICAgIHByZXJlcXVpc2l0ZXM6IFtdLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhd2FpdCBDb3Vyc2VNb2RlbC5jcmVhdGUoY291cnNlRGF0YSk7XHJcblxyXG4gICAgICAgIGV4cGVjdChtb2NrUHJpc21hLmNvdXJzZS5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICAgIGRhdGE6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2U6ICdlbicsXHJcbiAgICAgICAgICAgIHByZXJlcXVpc2l0ZXM6IFtdLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZpbmRCeUlkJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGZpbmQgYSBjb3Vyc2UgYnkgSUQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY291cnNlID0ge1xyXG4gICAgICAgICAgaWQ6ICdjb3Vyc2UtMTIzJyxcclxuICAgICAgICAgIHRpdGxlOiAnVHlwZVNjcmlwdCBCYXNpY3MnLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBUeXBlU2NyaXB0JyxcclxuICAgICAgICAgIGluc3RydWN0b3JJZDogJ2luc3RydWN0b3ItMTIzJyxcclxuICAgICAgICAgIHRpZXI6ICdmcmVlJyxcclxuICAgICAgICAgIGxhbmd1YWdlOiAnZW4nLFxyXG4gICAgICAgICAgcHJlcmVxdWlzaXRlczogW10sXHJcbiAgICAgICAgICBtb2R1bGVzOiBbXSxcclxuICAgICAgICAgIGFzc2Vzc21lbnRzOiBbXSxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBtb2NrUHJpc21hLmNvdXJzZS5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKGNvdXJzZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvdXJzZU1vZGVsLmZpbmRCeUlkKCdjb3Vyc2UtMTIzJyk7XHJcblxyXG4gICAgICAgIGV4cGVjdChtb2NrUHJpc21hLmNvdXJzZS5maW5kVW5pcXVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgICB3aGVyZTogeyBpZDogJ2NvdXJzZS0xMjMnIH0sXHJcbiAgICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICAgIG1vZHVsZXM6IHRydWUsXHJcbiAgICAgICAgICAgIGFzc2Vzc21lbnRzOiB0cnVlLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGNvdXJzZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBOb3RGb3VuZEVycm9yIHdoZW4gY291cnNlIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIG1vY2tQcmlzbWEuY291cnNlLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICAgIGF3YWl0IGV4cGVjdChDb3Vyc2VNb2RlbC5maW5kQnlJZCgnbm9uZXhpc3RlbnQnKSkucmVqZWN0cy50b1Rocm93KE5vdEZvdW5kRXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaW5kQWxsJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGZpbmQgYWxsIGNvdXJzZXMgd2l0aCBwYWdpbmF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvdXJzZXMgPSBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAnY291cnNlLTEnLFxyXG4gICAgICAgICAgICB0aXRsZTogJ0NvdXJzZSAxJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdEZXNjcmlwdGlvbiAxJyxcclxuICAgICAgICAgICAgaW5zdHJ1Y3RvcklkOiAnaW5zdHJ1Y3Rvci0xJyxcclxuICAgICAgICAgICAgdGllcjogJ2ZyZWUnLFxyXG4gICAgICAgICAgICBsYW5ndWFnZTogJ2VuJyxcclxuICAgICAgICAgICAgcHJlcmVxdWlzaXRlczogW10sXHJcbiAgICAgICAgICAgIG1vZHVsZXM6IFtdLFxyXG4gICAgICAgICAgICBhc3Nlc3NtZW50czogW10sXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBtb2NrUHJpc21hLmNvdXJzZS5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShjb3Vyc2VzKTtcclxuICAgICAgICBtb2NrUHJpc21hLmNvdXJzZS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ291cnNlTW9kZWwuZmluZEFsbCh7IHBhZ2U6IDEsIHBhZ2VTaXplOiAxMCB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0VxdWFsKGNvdXJzZXMpO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQudG90YWwpLnRvQmUoMSk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5wYWdlKS50b0JlKDEpO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQucGFnZVNpemUpLnRvQmUoMTApO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQudG90YWxQYWdlcykudG9CZSgxKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIGZpbHRlciBieSB0aWVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIG1vY2tQcmlzbWEuY291cnNlLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcclxuICAgICAgICBtb2NrUHJpc21hLmNvdXJzZS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgwKTtcclxuXHJcbiAgICAgICAgYXdhaXQgQ291cnNlTW9kZWwuZmluZEFsbCh7IHRpZXI6ICdwcmVtaXVtJyB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KG1vY2tQcmlzbWEuY291cnNlLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgd2hlcmU6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgdGllcjogJ3ByZW1pdW0nIH0pLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd1cGRhdGUnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgdXBkYXRlIGEgY291cnNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDb3Vyc2UgPSB7XHJcbiAgICAgICAgICBpZDogJ2NvdXJzZS0xMjMnLFxyXG4gICAgICAgICAgdGl0bGU6ICdVcGRhdGVkIFRpdGxlJyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlZCBEZXNjcmlwdGlvbicsXHJcbiAgICAgICAgICBpbnN0cnVjdG9ySWQ6ICdpbnN0cnVjdG9yLTEyMycsXHJcbiAgICAgICAgICB0aWVyOiAncHJlbWl1bScsXHJcbiAgICAgICAgICBsYW5ndWFnZTogJ2VuJyxcclxuICAgICAgICAgIHByZXJlcXVpc2l0ZXM6IFtdLFxyXG4gICAgICAgICAgbW9kdWxlczogW10sXHJcbiAgICAgICAgICBhc3Nlc3NtZW50czogW10sXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbW9ja1ByaXNtYS5jb3Vyc2UudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZWRDb3Vyc2UpO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDb3Vyc2VNb2RlbC51cGRhdGUoJ2NvdXJzZS0xMjMnLCB7XHJcbiAgICAgICAgICB0aXRsZTogJ1VwZGF0ZWQgVGl0bGUnLFxyXG4gICAgICAgICAgdGllcjogJ3ByZW1pdW0nLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBleHBlY3QobW9ja1ByaXNtYS5jb3Vyc2UudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgICB3aGVyZTogeyBpZDogJ2NvdXJzZS0xMjMnIH0sXHJcbiAgICAgICAgICBkYXRhOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnVXBkYXRlZCBUaXRsZScsXHJcbiAgICAgICAgICAgIHRpZXI6ICdwcmVtaXVtJyxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICBtb2R1bGVzOiB0cnVlLFxyXG4gICAgICAgICAgICBhc3Nlc3NtZW50czogdHJ1ZSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC50aXRsZSkudG9CZSgnVXBkYXRlZCBUaXRsZScpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdkZWxldGUnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgZGVsZXRlIGEgY291cnNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIG1vY2tQcmlzbWEuY291cnNlLmRlbGV0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGlkOiAnY291cnNlLTEyMycgfSk7XHJcblxyXG4gICAgICAgIGF3YWl0IENvdXJzZU1vZGVsLmRlbGV0ZSgnY291cnNlLTEyMycpO1xyXG5cclxuICAgICAgICBleHBlY3QobW9ja1ByaXNtYS5jb3Vyc2UuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgICB3aGVyZTogeyBpZDogJ2NvdXJzZS0xMjMnIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFbnJvbGxtZW50TW9kZWwnLCAoKSA9PiB7XHJcbiAgICBkZXNjcmliZSgnY3JlYXRlJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhbiBlbnJvbGxtZW50IGZvciBhIGZyZWUgY291cnNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVucm9sbG1lbnREYXRhID0ge1xyXG4gICAgICAgICAgc3R1ZGVudElkOiAnc3R1ZGVudC0xMjMnLFxyXG4gICAgICAgICAgY291cnNlSWQ6ICdjb3Vyc2UtNDU2JyxcclxuICAgICAgICAgIHRpZXI6ICdmcmVlJyBhcyBjb25zdCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBtb2NrUHJpc21hLmNvdXJzZS5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgIGlkOiAnY291cnNlLTQ1NicsXHJcbiAgICAgICAgICB0aWVyOiAnZnJlZScsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vY2tQcmlzbWEuZW5yb2xsbWVudC5maW5kRmlyc3QubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICAgIG1vY2tQcmlzbWEuZW5yb2xsbWVudC5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgaWQ6ICdlbnJvbGxtZW50LTc4OScsXHJcbiAgICAgICAgICAuLi5lbnJvbGxtZW50RGF0YSxcclxuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICAgICAgICBwcm9ncmVzczogMCxcclxuICAgICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGNvbXBsZXRpb25EYXRlOiBudWxsLFxyXG4gICAgICAgICAgY291cnNlOiB7IGlkOiAnY291cnNlLTQ1NicsIHRpZXI6ICdmcmVlJyB9LFxyXG4gICAgICAgICAgc3R1ZGVudDogeyBpZDogJ3N0dWRlbnQtMTIzJyB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBFbnJvbGxtZW50TW9kZWwuY3JlYXRlKGVucm9sbG1lbnREYXRhKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5pZCkudG9CZSgnZW5yb2xsbWVudC03ODknKTtcclxuICAgICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5wcm9ncmVzcykudG9CZSgwKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHRocm93IFRpZXJBY2Nlc3NFcnJvciB3aGVuIGZyZWUgc3R1ZGVudCB0cmllcyB0byBlbnJvbGwgaW4gcHJlbWl1bSBjb3Vyc2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW5yb2xsbWVudERhdGEgPSB7XHJcbiAgICAgICAgICBzdHVkZW50SWQ6ICdzdHVkZW50LTEyMycsXHJcbiAgICAgICAgICBjb3Vyc2VJZDogJ2NvdXJzZS00NTYnLFxyXG4gICAgICAgICAgdGllcjogJ2ZyZWUnIGFzIGNvbnN0LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG1vY2tQcmlzbWEuY291cnNlLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgaWQ6ICdjb3Vyc2UtNDU2JyxcclxuICAgICAgICAgIHRpZXI6ICdwcmVtaXVtJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYXdhaXQgZXhwZWN0KEVucm9sbG1lbnRNb2RlbC5jcmVhdGUoZW5yb2xsbWVudERhdGEpKS5yZWplY3RzLnRvVGhyb3coVGllckFjY2Vzc0Vycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHRocm93IE5vdEZvdW5kRXJyb3Igd2hlbiBjb3Vyc2UgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW5yb2xsbWVudERhdGEgPSB7XHJcbiAgICAgICAgICBzdHVkZW50SWQ6ICdzdHVkZW50LTEyMycsXHJcbiAgICAgICAgICBjb3Vyc2VJZDogJ25vbmV4aXN0ZW50JyxcclxuICAgICAgICAgIHRpZXI6ICdmcmVlJyBhcyBjb25zdCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBtb2NrUHJpc21hLmNvdXJzZS5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgICBhd2FpdCBleHBlY3QoRW5yb2xsbWVudE1vZGVsLmNyZWF0ZShlbnJvbGxtZW50RGF0YSkpLnJlamVjdHMudG9UaHJvdyhOb3RGb3VuZEVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHRocm93IEVucm9sbG1lbnRFcnJvciBmb3IgZHVwbGljYXRlIGVucm9sbG1lbnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW5yb2xsbWVudERhdGEgPSB7XHJcbiAgICAgICAgICBzdHVkZW50SWQ6ICdzdHVkZW50LTEyMycsXHJcbiAgICAgICAgICBjb3Vyc2VJZDogJ2NvdXJzZS00NTYnLFxyXG4gICAgICAgICAgdGllcjogJ2ZyZWUnIGFzIGNvbnN0LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG1vY2tQcmlzbWEuY291cnNlLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgaWQ6ICdjb3Vyc2UtNDU2JyxcclxuICAgICAgICAgIHRpZXI6ICdmcmVlJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9ja1ByaXNtYS5lbnJvbGxtZW50LmZpbmRGaXJzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgICBpZDogJ2V4aXN0aW5nLWVucm9sbG1lbnQnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhd2FpdCBleHBlY3QoRW5yb2xsbWVudE1vZGVsLmNyZWF0ZShlbnJvbGxtZW50RGF0YSkpLnJlamVjdHMudG9UaHJvdyhFbnJvbGxtZW50RXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmaW5kQnlJZCcsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCBmaW5kIGFuIGVucm9sbG1lbnQgYnkgSUQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW5yb2xsbWVudCA9IHtcclxuICAgICAgICAgIGlkOiAnZW5yb2xsbWVudC0xMjMnLFxyXG4gICAgICAgICAgc3R1ZGVudElkOiAnc3R1ZGVudC0xMjMnLFxyXG4gICAgICAgICAgY291cnNlSWQ6ICdjb3Vyc2UtNDU2JyxcclxuICAgICAgICAgIHRpZXI6ICdmcmVlJyxcclxuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICAgICAgICBwcm9ncmVzczogNTAsXHJcbiAgICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICBjb21wbGV0aW9uRGF0ZTogbnVsbCxcclxuICAgICAgICAgIGNvdXJzZTogeyBpZDogJ2NvdXJzZS00NTYnIH0sXHJcbiAgICAgICAgICBzdHVkZW50OiB7IGlkOiAnc3R1ZGVudC0xMjMnIH0sXHJcbiAgICAgICAgICBvdXRjb21lczogW10sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbW9ja1ByaXNtYS5lbnJvbGxtZW50LmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUoZW5yb2xsbWVudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEVucm9sbG1lbnRNb2RlbC5maW5kQnlJZCgnZW5yb2xsbWVudC0xMjMnKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChlbnJvbGxtZW50KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHRocm93IE5vdEZvdW5kRXJyb3Igd2hlbiBlbnJvbGxtZW50IGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIG1vY2tQcmlzbWEuZW5yb2xsbWVudC5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgICBhd2FpdCBleHBlY3QoRW5yb2xsbWVudE1vZGVsLmZpbmRCeUlkKCdub25leGlzdGVudCcpKS5yZWplY3RzLnRvVGhyb3coTm90Rm91bmRFcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZpbmRCeVN0dWRlbnRJZCcsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCBmaW5kIGVucm9sbG1lbnRzIGJ5IHN0dWRlbnQgSUQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW5yb2xsbWVudHMgPSBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAnZW5yb2xsbWVudC0xJyxcclxuICAgICAgICAgICAgc3R1ZGVudElkOiAnc3R1ZGVudC0xMjMnLFxyXG4gICAgICAgICAgICBjb3Vyc2VJZDogJ2NvdXJzZS0xJyxcclxuICAgICAgICAgICAgdGllcjogJ2ZyZWUnLFxyXG4gICAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gICAgICAgICAgICBwcm9ncmVzczogNTAsXHJcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgY29tcGxldGlvbkRhdGU6IG51bGwsXHJcbiAgICAgICAgICAgIGNvdXJzZTogeyBpZDogJ2NvdXJzZS0xJyB9LFxyXG4gICAgICAgICAgICBvdXRjb21lczogW10sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIG1vY2tQcmlzbWEuZW5yb2xsbWVudC5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShlbnJvbGxtZW50cyk7XHJcbiAgICAgICAgbW9ja1ByaXNtYS5lbnJvbGxtZW50LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDEpO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBFbnJvbGxtZW50TW9kZWwuZmluZEJ5U3R1ZGVudElkKCdzdHVkZW50LTEyMycpO1xyXG5cclxuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvRXF1YWwoZW5yb2xsbWVudHMpO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQudG90YWwpLnRvQmUoMSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ21hcmtDb21wbGV0ZWQnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgbWFyayBhbiBlbnJvbGxtZW50IGFzIGNvbXBsZXRlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBtb2NrUHJpc21hLmVucm9sbG1lbnQudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgIGlkOiAnZW5yb2xsbWVudC0xMjMnLFxyXG4gICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcclxuICAgICAgICAgIHByb2dyZXNzOiAxMDAsXHJcbiAgICAgICAgICBjb21wbGV0aW9uRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgRW5yb2xsbWVudE1vZGVsLm1hcmtDb21wbGV0ZWQoJ2Vucm9sbG1lbnQtMTIzJyk7XHJcblxyXG4gICAgICAgIGV4cGVjdChtb2NrUHJpc21hLmVucm9sbG1lbnQudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgICB3aGVyZTogeyBpZDogJ2Vucm9sbG1lbnQtMTIzJyB9LFxyXG4gICAgICAgICAgZGF0YTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxyXG4gICAgICAgICAgICBwcm9ncmVzczogMTAwLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoJ2NvbXBsZXRlZCcpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnTGVhcm5pbmdPdXRjb21lTW9kZWwnLCAoKSA9PiB7XHJcbiAgICBkZXNjcmliZSgnY3JlYXRlJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIGxlYXJuaW5nIG91dGNvbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3V0Y29tZURhdGEgPSB7XHJcbiAgICAgICAgICBlbnJvbGxtZW50SWQ6ICdlbnJvbGxtZW50LTEyMycsXHJcbiAgICAgICAgICBjb3Vyc2VJZDogJ2NvdXJzZS00NTYnLFxyXG4gICAgICAgICAgbW9kdWxlSWQ6ICdtb2R1bGUtNzg5JyxcclxuICAgICAgICAgIGFzc2Vzc21lbnRTY29yZTogODUsXHJcbiAgICAgICAgICB0aW1lU3BlbnQ6IDM2MDAsXHJcbiAgICAgICAgICBjb25jZXB0TWFzdGVyeTogODAsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbW9ja1ByaXNtYS5sZWFybmluZ091dGNvbWUuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgIGlkOiAnb3V0Y29tZS0xMjMnLFxyXG4gICAgICAgICAgLi4ub3V0Y29tZURhdGEsXHJcbiAgICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTGVhcm5pbmdPdXRjb21lTW9kZWwuY3JlYXRlKG91dGNvbWVEYXRhKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5pZCkudG9CZSgnb3V0Y29tZS0xMjMnKTtcclxuICAgICAgICBleHBlY3QocmVzdWx0LmFzc2Vzc21lbnRTY29yZSkudG9CZSg4NSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2NhbGN1bGF0ZUF2ZXJhZ2VTY29yZScsICgpID0+IHtcclxuICAgICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgYXZlcmFnZSBzY29yZSBmb3IgYW4gZW5yb2xsbWVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBtb2NrUHJpc21hLmxlYXJuaW5nT3V0Y29tZS5hZ2dyZWdhdGUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgX2F2ZzogeyBhc3Nlc3NtZW50U2NvcmU6IDgyLjUgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTGVhcm5pbmdPdXRjb21lTW9kZWwuY2FsY3VsYXRlQXZlcmFnZVNjb3JlKCdlbnJvbGxtZW50LTEyMycpO1xyXG5cclxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKDgyLjUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIDAgd2hlbiBubyBvdXRjb21lcyBleGlzdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBtb2NrUHJpc21hLmxlYXJuaW5nT3V0Y29tZS5hZ2dyZWdhdGUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgX2F2ZzogeyBhc3Nlc3NtZW50U2NvcmU6IG51bGwgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTGVhcm5pbmdPdXRjb21lTW9kZWwuY2FsY3VsYXRlQXZlcmFnZVNjb3JlKCdlbnJvbGxtZW50LTEyMycpO1xyXG5cclxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKDApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUlBO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLHNCQUFzQixDQUFDO0FBTGpDLElBQUFDLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUFxRixTQUFBSCxZQUFBO0VBQUE7SUFBQU07RUFBQSxJQUFBSCxPQUFBO0VBQUFILFdBQUEsR0FBQUEsQ0FBQSxLQUFBTSxJQUFBO0VBQUEsT0FBQUEsSUFBQTtBQUFBO0FBS3JGQyxRQUFRLENBQUMsYUFBYSxFQUFFLE1BQU07RUFDNUIsSUFBSUMsVUFBZTtFQUVuQkMsVUFBVSxDQUFDLE1BQU07SUFDZkQsVUFBVSxHQUFHO01BQ1hFLE1BQU0sRUFBRTtRQUNOQyxNQUFNLEVBQUVMLElBQUksQ0FBQ00sRUFBRSxDQUFDLENBQUM7UUFDakJDLFVBQVUsRUFBRVAsSUFBSSxDQUFDTSxFQUFFLENBQUMsQ0FBQztRQUNyQkUsUUFBUSxFQUFFUixJQUFJLENBQUNNLEVBQUUsQ0FBQyxDQUFDO1FBQ25CRyxNQUFNLEVBQUVULElBQUksQ0FBQ00sRUFBRSxDQUFDLENBQUM7UUFDakJJLE1BQU0sRUFBRVYsSUFBSSxDQUFDTSxFQUFFLENBQUMsQ0FBQztRQUNqQkssS0FBSyxFQUFFWCxJQUFJLENBQUNNLEVBQUUsQ0FBQztNQUNqQixDQUFDO01BQ0RNLFVBQVUsRUFBRTtRQUNWUCxNQUFNLEVBQUVMLElBQUksQ0FBQ00sRUFBRSxDQUFDLENBQUM7UUFDakJDLFVBQVUsRUFBRVAsSUFBSSxDQUFDTSxFQUFFLENBQUMsQ0FBQztRQUNyQkUsUUFBUSxFQUFFUixJQUFJLENBQUNNLEVBQUUsQ0FBQyxDQUFDO1FBQ25CTyxTQUFTLEVBQUViLElBQUksQ0FBQ00sRUFB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