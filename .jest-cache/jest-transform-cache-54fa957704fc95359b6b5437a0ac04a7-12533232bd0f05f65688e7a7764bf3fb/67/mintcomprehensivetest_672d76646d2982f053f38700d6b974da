de45623f59f7f5677c77aa4c2f954c96
"use strict";

var _globals = require("@jest/globals");
var _testUtils = require("@azora/test-utils");
var _supertest = _interopRequireDefault(require("supertest"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const API_URL = process.env.MINT_SERVICE_URL || 'http://localhost:4003';
(0, _globals.describe)('Mint Service - Comprehensive Tests', () => {
  let authToken;
  let testUser;
  (0, _globals.beforeEach)(async () => {
    testUser = _testUtils.userFactory.buildStudent();
    authToken = _testUtils.authHelper.generateToken({
      userId: testUser.id,
      email: testUser.email,
      role: testUser.role
    });
  });
  (0, _globals.describe)('Wallet Management', () => {
    (0, _globals.it)('should create wallet on user registration', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/wallet/create').set('Authorization', `Bearer ${authToken}`);
      (0, _globals.expect)(res.status).toBe(201);
      (0, _globals.expect)(res.body.wallet.userId).toBe(testUser.id);
      (0, _globals.expect)(res.body.wallet.balance).toBe(0);
    });
    (0, _globals.it)('should get wallet balance', async () => {
      await (0, _supertest.default)(API_URL).post('/api/wallet/create').set('Authorization', `Bearer ${authToken}`);
      const res = await (0, _supertest.default)(API_URL).get('/api/wallet/balance').set('Authorization', `Bearer ${authToken}`);
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.balance).toBeDefined();
    });
    (0, _globals.it)('should get wallet transactions', async () => {
      const res = await (0, _supertest.default)(API_URL).get('/api/wallet/transactions').set('Authorization', `Bearer ${authToken}`);
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(Array.isArray(res.body.transactions)).toBe(true);
    });
  });
  (0, _globals.describe)('Mining Engine (Proof-of-Knowledge)', () => {
    (0, _globals.beforeEach)(async () => {
      await (0, _supertest.default)(API_URL).post('/api/wallet/create').set('Authorization', `Bearer ${authToken}`);
    });
    (0, _globals.it)('should calculate mining rewards for lesson completion', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/mining/calculate').set('Authorization', `Bearer ${authToken}`).send({
        activityType: 'lesson_completion',
        courseId: 'course-123',
        lessonId: 'lesson-456'
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.reward).toBeGreaterThan(0);
    });
    (0, _globals.it)('should award AZR tokens for learning activity', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/mining/award').set('Authorization', `Bearer ${authToken}`).send({
        activityType: 'lesson_completion',
        amount: 10
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.transaction.amount).toBe(10);
    });
    (0, _globals.it)('should enforce daily mining limits', async () => {
      // Award tokens multiple times
      for (let i = 0; i < 10; i++) {
        await (0, _supertest.default)(API_URL).post('/api/mining/award').set('Authorization', `Bearer ${authToken}`).send({
          activityType: 'lesson_completion',
          amount: 100
        });
      }

      // Should hit limit
      const res = await (0, _supertest.default)(API_URL).post('/api/mining/award').set('Authorization', `Bearer ${authToken}`).send({
        activityType: 'lesson_completion',
        amount: 100
      });
      (0, _globals.expect)(res.status).toBe(429);
      (0, _globals.expect)(res.body.error).toContain('limit');
    });
  });
  (0, _globals.describe)('Transaction Processing', () => {
    (0, _globals.beforeEach)(async () => {
      await (0, _supertest.default)(API_URL).post('/api/wallet/create').set('Authorization', `Bearer ${authToken}`);

      // Add some balance
      await (0, _supertest.default)(API_URL).post('/api/mining/award').set('Authorization', `Bearer ${authToken}`).send({
        activityType: 'lesson_completion',
        amount: 100
      });
    });
    (0, _globals.it)('should process transfer between wallets', async () => {
      const recipient = _testUtils.userFactory.build();
      const res = await (0, _supertest.default)(API_URL).post('/api/transactions/transfer').set('Authorization', `Bearer ${authToken}`).send({
        recipientId: recipient.id,
        amount: 10,
        currency: 'AZR'
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.transaction.amount).toBe(10);
    });
    (0, _globals.it)('should reject transfer with insufficient balance', async () => {
      const recipient = _testUtils.userFactory.build();
      const res = await (0, _supertest.default)(API_URL).post('/api/transactions/transfer').set('Authorization', `Bearer ${authToken}`).send({
        recipientId: recipient.id,
        amount: 1000,
        currency: 'AZR'
      });
      (0, _globals.expect)(res.status).toBe(400);
      (0, _globals.expect)(res.body.error).toContain('insufficient');
    });
    (0, _globals.it)('should maintain balance integrity', async () => {
      const initialBalance = await (0, _supertest.default)(API_URL).get('/api/wallet/balance').set('Authorization', `Bearer ${authToken}`);
      const recipient = _testUtils.userFactory.build();
      await (0, _supertest.default)(API_URL).post('/api/transactions/transfer').set('Authorization', `Bearer ${authToken}`).send({
        recipientId: recipient.id,
        amount: 10,
        currency: 'AZR'
      });
      const finalBalance = await (0, _supertest.default)(API_URL).get('/api/wallet/balance').set('Authorization', `Bearer ${authToken}`);
      (0, _globals.expect)(finalBalance.body.balance).toBe(initialBalance.body.balance - 10);
    });
  });
  (0, _globals.describe)('Payment Processing (Stripe)', () => {
    (0, _globals.it)('should create payment intent', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/payments/create-intent').set('Authorization', `Bearer ${authToken}`).send({
        amount: 1000,
        currency: 'usd',
        description: 'Course purchase'
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.clientSecret).toBeDefined();
    });
    (0, _globals.it)('should process successful payment', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/payments/process').set('Authorization', `Bearer ${authToken}`).send({
        paymentIntentId: 'pi_test_123',
        amount: 1000
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.status).toBe('succeeded');
    });
  });
  (0, _globals.describe)('Token Economics', () => {
    (0, _globals.it)('should get current AZR price', async () => {
      const res = await (0, _supertest.default)(API_URL).get('/api/economics/price');
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.price).toBeGreaterThan(0);
    });
    (0, _globals.it)('should get token supply metrics', async () => {
      const res = await (0, _supertest.default)(API_URL).get('/api/economics/supply');
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.totalSupply).toBeDefined();
      (0, _globals.expect)(res.body.circulatingSupply).toBeDefined();
    });
    (0, _globals.it)('should calculate UBI distribution', async () => {
      const res = await (0, _supertest.default)(API_URL).get('/api/economics/ubi').set('Authorization', `Bearer ${authToken}`);
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.amount).toBeGreaterThan(0);
    });
  });
  (0, _globals.describe)('Withdrawal', () => {
    (0, _globals.beforeEach)(async () => {
      await (0, _supertest.default)(API_URL).post('/api/wallet/create').set('Authorization', `Bearer ${authToken}`);

      // Add balance
      await (0, _supertest.default)(API_URL).post('/api/mining/award').set('Authorization', `Bearer ${authToken}`).send({
        activityType: 'lesson_completion',
        amount: 1000
      });
    });
    (0, _globals.it)('should initiate withdrawal request', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/wallet/withdraw').set('Authorization', `Bearer ${authToken}`).send({
        amount: 100,
        method: 'bank_transfer',
        bankDetails: {
          accountNumber: '1234567890',
          routingNumber: '987654321'
        }
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.withdrawal.status).toBe('pending');
    });
    (0, _globals.it)('should enforce minimum withdrawal amount', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/wallet/withdraw').set('Authorization', `Bearer ${authToken}`).send({
        amount: 1,
        method: 'bank_transfer'
      });
      (0, _globals.expect)(res.status).toBe(400);
      (0, _globals.expect)(res.body.error).toContain('minimum');
    });
  });
  (0, _globals.describe)('Token Minting', () => {
    (0, _globals.it)('should mint tokens for valid proof-of-knowledge', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/mint/tokens').set('Authorization', `Bearer ${authToken}`).send({
        proofType: 'course_completion',
        proofData: {
          courseId: 'course-123',
          score: 95
        }
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.tokensMinted).toBeGreaterThan(0);
      (0, _globals.expect)(res.body.transactionId).toBeDefined();
    });
    (0, _globals.it)('should reject minting without valid proof', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/mint/tokens').set('Authorization', `Bearer ${authToken}`).send({
        proofType: 'invalid_proof'
      });
      (0, _globals.expect)(res.status).toBe(400);
      (0, _globals.expect)(res.body.error).toContain('proof');
    });
    (0, _globals.it)('should track total minted supply', async () => {
      const res = await (0, _supertest.default)(API_URL).get('/api/mint/supply');
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.totalMinted).toBeDefined();
      (0, _globals.expect)(res.body.circulatingSupply).toBeDefined();
    });
  });
  (0, _globals.describe)('Staking Mechanism', () => {
    (0, _globals.beforeEach)(async () => {
      await (0, _supertest.default)(API_URL).post('/api/wallet/create').set('Authorization', `Bearer ${authToken}`);
      await (0, _supertest.default)(API_URL).post('/api/mining/award').set('Authorization', `Bearer ${authToken}`).send({
        activityType: 'lesson_completion',
        amount: 500
      });
    });
    (0, _globals.it)('should stake tokens', async () => {
      const res = await (0, _supertest.default)(API_URL).post('/api/staking/stake').set('Authorization', `Bearer ${authToken}`).send({
        amount: 100,
        duration: 30
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.stakeId).toBeDefined();
      (0, _globals.expect)(res.body.amount).toBe(100);
      (0, _globals.expect)(res.body.status).toBe('active');
    });
    (0, _globals.it)('should calculate staking rewards', async () => {
      await (0, _supertest.default)(API_URL).post('/api/staking/stake').set('Authorization', `Bearer ${authToken}`).send({
        amount: 100,
        duration: 30
      });
      const res = await (0, _supertest.default)(API_URL).get('/api/staking/rewards').set('Authorization', `Bearer ${authToken}`);
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.pendingRewards).toBeDefined();
    });
    (0, _globals.it)('should unstake tokens after duration', async () => {
      const stakeRes = await (0, _supertest.default)(API_URL).post('/api/staking/stake').set('Authorization', `Bearer ${authToken}`).send({
        amount: 100,
        duration: 0
      });
      const res = await (0, _supertest.default)(API_URL).post('/api/staking/unstake').set('Authorization', `Bearer ${authToken}`).send({
        stakeId: stakeRes.body.stakeId
      });
      (0, _globals.expect)(res.status).toBe(200);
      (0, _globals.expect)(res.body.amountReturned).toBe(100);
    });
    (0, _globals.it)('should reject unstaking before duration ends', async () => {
      const stakeRes = await (0, _supertest.default)(API_URL).post('/api/staking/stake').set('Authorization', `Bearer ${authToken}`).send({
        amount: 100,
        duration: 365
      });
      const res = await (0, _supertest.default)(API_URL).post('/api/staking/unstake').set('Authorization', `Bearer ${authToken}`).send({
        stakeId: stakeRes.body.stakeId
      });
      (0, _globals.expect)(res.status).toBe(400);
      (0, _globals.expect)(res.body.error).toContain('duration');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfdGVzdFV0aWxzIiwiX3N1cGVydGVzdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk1JTlRfU0VSVklDRV9VUkwiLCJkZXNjcmliZSIsImF1dGhUb2tlbiIsInRlc3RVc2VyIiwiYmVmb3JlRWFjaCIsInVzZXJGYWN0b3J5IiwiYnVpbGRTdHVkZW50IiwiYXV0aEhlbHBlciIsImdlbmVyYXRlVG9rZW4iLCJ1c2VySWQiLCJpZCIsImVtYWlsIiwicm9sZSIsIml0IiwicmVzIiwicmVxdWVzdCIsInBvc3QiLCJzZXQiLCJleHBlY3QiLCJzdGF0dXMiLCJ0b0JlIiwiYm9keSIsIndhbGxldCIsImJhbGFuY2UiLCJnZXQiLCJ0b0JlRGVmaW5lZCIsIkFycmF5IiwiaXNBcnJheSIsInRyYW5zYWN0aW9ucyIsInNlbmQiLCJhY3Rpdml0eVR5cGUiLCJjb3Vyc2VJZCIsImxlc3NvbklkIiwicmV3YXJkIiwidG9CZUdyZWF0ZXJUaGFuIiwiYW1vdW50IiwidHJhbnNhY3Rpb24iLCJpIiwiZXJyb3IiLCJ0b0NvbnRhaW4iLCJyZWNpcGllbnQiLCJidWlsZCIsInJlY2lwaWVudElkIiwiY3VycmVuY3kiLCJpbml0aWFsQmFsYW5jZSIsImZpbmFsQmFsYW5jZSIsImRlc2NyaXB0aW9uIiwiY2xpZW50U2VjcmV0IiwicGF5bWVudEludGVudElkIiwicHJpY2UiLCJ0b3RhbFN1cHBseSIsImNpcmN1bGF0aW5nU3VwcGx5IiwibWV0aG9kIiwiYmFua0RldGFpbHMiLCJhY2NvdW50TnVtYmVyIiwicm91dGluZ051bWJlciIsIndpdGhkcmF3YWwiLCJwcm9vZlR5cGUiLCJwcm9vZkRhdGEiLCJzY29yZSIsInRva2Vuc01pbnRlZCIsInRyYW5zYWN0aW9uSWQiLCJ0b3RhbE1pbnRlZCIsImR1cmF0aW9uIiwic3Rha2VJZCIsInBlbmRpbmdSZXdhcmRzIiwic3Rha2VSZXMiLCJhbW91bnRSZXR1cm5lZCJdLCJzb3VyY2VzIjpbIm1pbnQtY29tcHJlaGVuc2l2ZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyB1c2VyRmFjdG9yeSwgYXV0aEhlbHBlciB9IGZyb20gJ0Bhem9yYS90ZXN0LXV0aWxzJztcbmltcG9ydCByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5cbmNvbnN0IEFQSV9VUkwgPSBwcm9jZXNzLmVudi5NSU5UX1NFUlZJQ0VfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjQwMDMnO1xuXG5kZXNjcmliZSgnTWludCBTZXJ2aWNlIC0gQ29tcHJlaGVuc2l2ZSBUZXN0cycsICgpID0+IHtcbiAgbGV0IGF1dGhUb2tlbjogc3RyaW5nO1xuICBsZXQgdGVzdFVzZXI6IGFueTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICB0ZXN0VXNlciA9IHVzZXJGYWN0b3J5LmJ1aWxkU3R1ZGVudCgpO1xuICAgIGF1dGhUb2tlbiA9IGF1dGhIZWxwZXIuZ2VuZXJhdGVUb2tlbih7XG4gICAgICB1c2VySWQ6IHRlc3RVc2VyLmlkISxcbiAgICAgIGVtYWlsOiB0ZXN0VXNlci5lbWFpbCxcbiAgICAgIHJvbGU6IHRlc3RVc2VyLnJvbGUsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdXYWxsZXQgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3YWxsZXQgb24gdXNlciByZWdpc3RyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5wb3N0KCcvYXBpL3dhbGxldC9jcmVhdGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS53YWxsZXQudXNlcklkKS50b0JlKHRlc3RVc2VyLmlkKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS53YWxsZXQuYmFsYW5jZSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IHdhbGxldCBiYWxhbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS93YWxsZXQvY3JlYXRlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLmdldCgnL2FwaS93YWxsZXQvYmFsYW5jZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmJhbGFuY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCB3YWxsZXQgdHJhbnNhY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAuZ2V0KCcvYXBpL3dhbGxldC90cmFuc2FjdGlvbnMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlcy5ib2R5LnRyYW5zYWN0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNaW5pbmcgRW5naW5lIChQcm9vZi1vZi1Lbm93bGVkZ2UpJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS93YWxsZXQvY3JlYXRlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBtaW5pbmcgcmV3YXJkcyBmb3IgbGVzc29uIGNvbXBsZXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5wb3N0KCcvYXBpL21pbmluZy9jYWxjdWxhdGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgYWN0aXZpdHlUeXBlOiAnbGVzc29uX2NvbXBsZXRpb24nLFxuICAgICAgICAgIGNvdXJzZUlkOiAnY291cnNlLTEyMycsXG4gICAgICAgICAgbGVzc29uSWQ6ICdsZXNzb24tNDU2JyxcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkucmV3YXJkKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGF3YXJkIEFaUiB0b2tlbnMgZm9yIGxlYXJuaW5nIGFjdGl2aXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9taW5pbmcvYXdhcmQnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgYWN0aXZpdHlUeXBlOiAnbGVzc29uX2NvbXBsZXRpb24nLFxuICAgICAgICAgIGFtb3VudDogMTAsXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LnRyYW5zYWN0aW9uLmFtb3VudCkudG9CZSgxMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVuZm9yY2UgZGFpbHkgbWluaW5nIGxpbWl0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEF3YXJkIHRva2VucyBtdWx0aXBsZSB0aW1lc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgICAucG9zdCgnL2FwaS9taW5pbmcvYXdhcmQnKVxuICAgICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgICAgLnNlbmQoeyBhY3Rpdml0eVR5cGU6ICdsZXNzb25fY29tcGxldGlvbicsIGFtb3VudDogMTAwIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGl0IGxpbWl0XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5wb3N0KCcvYXBpL21pbmluZy9hd2FyZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHsgYWN0aXZpdHlUeXBlOiAnbGVzc29uX2NvbXBsZXRpb24nLCBhbW91bnQ6IDEwMCB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoNDI5KTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5lcnJvcikudG9Db250YWluKCdsaW1pdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVHJhbnNhY3Rpb24gUHJvY2Vzc2luZycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLnBvc3QoJy9hcGkvd2FsbGV0L2NyZWF0ZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApO1xuICAgICAgXG4gICAgICAvLyBBZGQgc29tZSBiYWxhbmNlXG4gICAgICBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5wb3N0KCcvYXBpL21pbmluZy9hd2FyZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHsgYWN0aXZpdHlUeXBlOiAnbGVzc29uX2NvbXBsZXRpb24nLCBhbW91bnQ6IDEwMCB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvY2VzcyB0cmFuc2ZlciBiZXR3ZWVuIHdhbGxldHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZWNpcGllbnQgPSB1c2VyRmFjdG9yeS5idWlsZCgpO1xuICAgICAgXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5wb3N0KCcvYXBpL3RyYW5zYWN0aW9ucy90cmFuc2ZlcicpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICByZWNpcGllbnRJZDogcmVjaXBpZW50LmlkLFxuICAgICAgICAgIGFtb3VudDogMTAsXG4gICAgICAgICAgY3VycmVuY3k6ICdBWlInLFxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS50cmFuc2FjdGlvbi5hbW91bnQpLnRvQmUoMTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgdHJhbnNmZXIgd2l0aCBpbnN1ZmZpY2llbnQgYmFsYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlY2lwaWVudCA9IHVzZXJGYWN0b3J5LmJ1aWxkKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLnBvc3QoJy9hcGkvdHJhbnNhY3Rpb25zL3RyYW5zZmVyJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHJlY2lwaWVudElkOiByZWNpcGllbnQuaWQsXG4gICAgICAgICAgYW1vdW50OiAxMDAwLFxuICAgICAgICAgIGN1cnJlbmN5OiAnQVpSJyxcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuZXJyb3IpLnRvQ29udGFpbignaW5zdWZmaWNpZW50Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIGJhbGFuY2UgaW50ZWdyaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbEJhbGFuY2UgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5nZXQoJy9hcGkvd2FsbGV0L2JhbGFuY2UnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVjaXBpZW50ID0gdXNlckZhY3RvcnkuYnVpbGQoKTtcbiAgICAgIGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLnBvc3QoJy9hcGkvdHJhbnNhY3Rpb25zL3RyYW5zZmVyJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHJlY2lwaWVudElkOiByZWNpcGllbnQuaWQsXG4gICAgICAgICAgYW1vdW50OiAxMCxcbiAgICAgICAgICBjdXJyZW5jeTogJ0FaUicsXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBmaW5hbEJhbGFuY2UgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5nZXQoJy9hcGkvd2FsbGV0L2JhbGFuY2UnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZpbmFsQmFsYW5jZS5ib2R5LmJhbGFuY2UpLnRvQmUoaW5pdGlhbEJhbGFuY2UuYm9keS5iYWxhbmNlIC0gMTApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGF5bWVudCBQcm9jZXNzaW5nIChTdHJpcGUpJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHBheW1lbnQgaW50ZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9wYXltZW50cy9jcmVhdGUtaW50ZW50JylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGFtb3VudDogMTAwMCxcbiAgICAgICAgICBjdXJyZW5jeTogJ3VzZCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDb3Vyc2UgcHVyY2hhc2UnLFxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5jbGllbnRTZWNyZXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb2Nlc3Mgc3VjY2Vzc2Z1bCBwYXltZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9wYXltZW50cy9wcm9jZXNzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHBheW1lbnRJbnRlbnRJZDogJ3BpX3Rlc3RfMTIzJyxcbiAgICAgICAgICBhbW91bnQ6IDEwMDAsXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LnN0YXR1cykudG9CZSgnc3VjY2VlZGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUb2tlbiBFY29ub21pY3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCBBWlIgcHJpY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5nZXQoJy9hcGkvZWNvbm9taWNzL3ByaWNlJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkucHJpY2UpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IHRva2VuIHN1cHBseSBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAuZ2V0KCcvYXBpL2Vjb25vbWljcy9zdXBwbHknKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS50b3RhbFN1cHBseSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5jaXJjdWxhdGluZ1N1cHBseSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIFVCSSBkaXN0cmlidXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5nZXQoJy9hcGkvZWNvbm9taWNzL3ViaScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmFtb3VudCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnV2l0aGRyYXdhbCcsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLnBvc3QoJy9hcGkvd2FsbGV0L2NyZWF0ZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApO1xuICAgICAgXG4gICAgICAvLyBBZGQgYmFsYW5jZVxuICAgICAgYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9taW5pbmcvYXdhcmQnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7IGFjdGl2aXR5VHlwZTogJ2xlc3Nvbl9jb21wbGV0aW9uJywgYW1vdW50OiAxMDAwIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbml0aWF0ZSB3aXRoZHJhd2FsIHJlcXVlc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5wb3N0KCcvYXBpL3dhbGxldC93aXRoZHJhdycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBhbW91bnQ6IDEwMCxcbiAgICAgICAgICBtZXRob2Q6ICdiYW5rX3RyYW5zZmVyJyxcbiAgICAgICAgICBiYW5rRGV0YWlsczoge1xuICAgICAgICAgICAgYWNjb3VudE51bWJlcjogJzEyMzQ1Njc4OTAnLFxuICAgICAgICAgICAgcm91dGluZ051bWJlcjogJzk4NzY1NDMyMScsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkud2l0aGRyYXdhbC5zdGF0dXMpLnRvQmUoJ3BlbmRpbmcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW5mb3JjZSBtaW5pbXVtIHdpdGhkcmF3YWwgYW1vdW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS93YWxsZXQvd2l0aGRyYXcnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgYW1vdW50OiAxLFxuICAgICAgICAgIG1ldGhvZDogJ2JhbmtfdHJhbnNmZXInLFxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5lcnJvcikudG9Db250YWluKCdtaW5pbXVtJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUb2tlbiBNaW50aW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWludCB0b2tlbnMgZm9yIHZhbGlkIHByb29mLW9mLWtub3dsZWRnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLnBvc3QoJy9hcGkvbWludC90b2tlbnMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgcHJvb2ZUeXBlOiAnY291cnNlX2NvbXBsZXRpb24nLFxuICAgICAgICAgIHByb29mRGF0YToge1xuICAgICAgICAgICAgY291cnNlSWQ6ICdjb3Vyc2UtMTIzJyxcbiAgICAgICAgICAgIHNjb3JlOiA5NSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS50b2tlbnNNaW50ZWQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS50cmFuc2FjdGlvbklkKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgbWludGluZyB3aXRob3V0IHZhbGlkIHByb29mJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9taW50L3Rva2VucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBwcm9vZlR5cGU6ICdpbnZhbGlkX3Byb29mJyxcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuZXJyb3IpLnRvQ29udGFpbigncHJvb2YnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgdG90YWwgbWludGVkIHN1cHBseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLmdldCgnL2FwaS9taW50L3N1cHBseScpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LnRvdGFsTWludGVkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmNpcmN1bGF0aW5nU3VwcGx5KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3Rha2luZyBNZWNoYW5pc20nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCByZXF1ZXN0KEFQSV9VUkwpXG4gICAgICAgIC5wb3N0KCcvYXBpL3dhbGxldC9jcmVhdGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKTtcbiAgICAgIFxuICAgICAgYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9taW5pbmcvYXdhcmQnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7IGFjdGl2aXR5VHlwZTogJ2xlc3Nvbl9jb21wbGV0aW9uJywgYW1vdW50OiA1MDAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN0YWtlIHRva2VucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLnBvc3QoJy9hcGkvc3Rha2luZy9zdGFrZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBhbW91bnQ6IDEwMCxcbiAgICAgICAgICBkdXJhdGlvbjogMzAsXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LnN0YWtlSWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuYW1vdW50KS50b0JlKDEwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuc3RhdHVzKS50b0JlKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHN0YWtpbmcgcmV3YXJkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLnBvc3QoJy9hcGkvc3Rha2luZy9zdGFrZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHsgYW1vdW50OiAxMDAsIGR1cmF0aW9uOiAzMCB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAuZ2V0KCcvYXBpL3N0YWtpbmcvcmV3YXJkcycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LnBlbmRpbmdSZXdhcmRzKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1bnN0YWtlIHRva2VucyBhZnRlciBkdXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YWtlUmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9zdGFraW5nL3N0YWtlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoeyBhbW91bnQ6IDEwMCwgZHVyYXRpb246IDAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoQVBJX1VSTClcbiAgICAgICAgLnBvc3QoJy9hcGkvc3Rha2luZy91bnN0YWtlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoeyBzdGFrZUlkOiBzdGFrZVJlcy5ib2R5LnN0YWtlSWQgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuYW1vdW50UmV0dXJuZWQpLnRvQmUoMTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHVuc3Rha2luZyBiZWZvcmUgZHVyYXRpb24gZW5kcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YWtlUmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9zdGFraW5nL3N0YWtlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoeyBhbW91bnQ6IDEwMCwgZHVyYXRpb246IDM2NSB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChBUElfVVJMKVxuICAgICAgICAucG9zdCgnL2FwaS9zdGFraW5nL3Vuc3Rha2UnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7IHN0YWtlSWQ6IHN0YWtlUmVzLmJvZHkuc3Rha2VJZCB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5lcnJvcikudG9Db250YWluKCdkdXJhdGlvbicpO1xuICAgIH0pO1xuICB9KTtcbn0p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