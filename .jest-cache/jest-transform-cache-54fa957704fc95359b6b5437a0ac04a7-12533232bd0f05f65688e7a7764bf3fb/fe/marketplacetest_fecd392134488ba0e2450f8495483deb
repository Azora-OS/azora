c59eef0019a8d2263362f8088965f16d
"use strict";

const request = require('supertest');
const express = require('express');
const router = require('../api/marketplace');
const app = express();
app.use(express.json());
app.use('/api', router);
describe('Marketplace API', () => {
  it('should return jobs list', async () => {
    const res = await request(app).get('/api/jobs');
    expect(res.status).toBe(200);
    expect(res.body.success).toBe(true);
  });
  it('should create job posting', async () => {
    const res = await request(app).post('/api/jobs').send({
      title: 'Software Engineer',
      company: 'Test Co',
      location: 'Remote',
      type: 'full-time',
      salary: {
        min: 50000,
        max: 80000
      },
      skills: ['JavaScript', 'React']
    });
    expect(res.status).toBe(201);
    expect(res.body.data.title).toBe('Software Engineer');
  });
  it('should apply to job', async () => {
    const job = await request(app).post('/api/jobs').send({
      title: 'Test Job',
      company: 'Test',
      location: 'Remote',
      type: 'full-time',
      salary: {
        min: 50000,
        max: 80000
      },
      skills: ['Test']
    });
    const res = await request(app).post(`/api/jobs/${job.body.data.id}/apply`).send({
      userId: 'user-123',
      coverLetter: 'Test letter'
    });
    expect(res.status).toBe(201);
    expect(res.body.data.status).toBe('pending');
  });
  it('should match jobs', async () => {
    await request(app).post('/api/jobs').send({
      title: 'JS Developer',
      company: 'Test',
      location: 'Remote',
      type: 'full-time',
      salary: {
        min: 60000,
        max: 90000
      },
      skills: ['JavaScript', 'Node.js'],
      experience: 3,
      remote: true
    });
    const res = await request(app).post('/api/match').send({
      userId: 'user-1',
      skills: ['JavaScript', 'Node.js'],
      experience: 3,
      location: 'Remote'
    });
    expect(res.status).toBe(200);
    expect(res.body.success).toBe(true);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImV4cHJlc3MiLCJyb3V0ZXIiLCJhcHAiLCJ1c2UiLCJqc29uIiwiZGVzY3JpYmUiLCJpdCIsInJlcyIsImdldCIsImV4cGVjdCIsInN0YXR1cyIsInRvQmUiLCJib2R5Iiwic3VjY2VzcyIsInBvc3QiLCJzZW5kIiwidGl0bGUiLCJjb21wYW55IiwibG9jYXRpb24iLCJ0eXBlIiwic2FsYXJ5IiwibWluIiwibWF4Iiwic2tpbGxzIiwiZGF0YSIsImpvYiIsImlkIiwidXNlcklkIiwiY292ZXJMZXR0ZXIiLCJleHBlcmllbmNlIiwicmVtb3RlIl0sInNvdXJjZXMiOlsibWFya2V0cGxhY2UudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlciA9IHJlcXVpcmUoJy4uL2FwaS9tYXJrZXRwbGFjZScpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuYXBwLnVzZSgnL2FwaScsIHJvdXRlcik7XHJcblxyXG5kZXNjcmliZSgnTWFya2V0cGxhY2UgQVBJJywgKCkgPT4ge1xyXG4gIGl0KCdzaG91bGQgcmV0dXJuIGpvYnMgbGlzdCcsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoJy9hcGkvam9icycpO1xyXG4gICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgIGV4cGVjdChyZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIGNyZWF0ZSBqb2IgcG9zdGluZycsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKS5wb3N0KCcvYXBpL2pvYnMnKS5zZW5kKHtcclxuICAgICAgdGl0bGU6ICdTb2Z0d2FyZSBFbmdpbmVlcicsXHJcbiAgICAgIGNvbXBhbnk6ICdUZXN0IENvJyxcclxuICAgICAgbG9jYXRpb246ICdSZW1vdGUnLFxyXG4gICAgICB0eXBlOiAnZnVsbC10aW1lJyxcclxuICAgICAgc2FsYXJ5OiB7IG1pbjogNTAwMDAsIG1heDogODAwMDAgfSxcclxuICAgICAgc2tpbGxzOiBbJ0phdmFTY3JpcHQnLCAnUmVhY3QnXVxyXG4gICAgfSk7XHJcbiAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDEpO1xyXG4gICAgZXhwZWN0KHJlcy5ib2R5LmRhdGEudGl0bGUpLnRvQmUoJ1NvZnR3YXJlIEVuZ2luZWVyJyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgYXBwbHkgdG8gam9iJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3Qgam9iID0gYXdhaXQgcmVxdWVzdChhcHApLnBvc3QoJy9hcGkvam9icycpLnNlbmQoe1xyXG4gICAgICB0aXRsZTogJ1Rlc3QgSm9iJyxcclxuICAgICAgY29tcGFueTogJ1Rlc3QnLFxyXG4gICAgICBsb2NhdGlvbjogJ1JlbW90ZScsXHJcbiAgICAgIHR5cGU6ICdmdWxsLXRpbWUnLFxyXG4gICAgICBzYWxhcnk6IHsgbWluOiA1MDAwMCwgbWF4OiA4MDAwMCB9LFxyXG4gICAgICBza2lsbHM6IFsnVGVzdCddXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApLnBvc3QoYC9hcGkvam9icy8ke2pvYi5ib2R5LmRhdGEuaWR9L2FwcGx5YCkuc2VuZCh7XHJcbiAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcclxuICAgICAgY292ZXJMZXR0ZXI6ICdUZXN0IGxldHRlcidcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDEpO1xyXG4gICAgZXhwZWN0KHJlcy5ib2R5LmRhdGEuc3RhdHVzKS50b0JlKCdwZW5kaW5nJyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgbWF0Y2ggam9icycsIGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IHJlcXVlc3QoYXBwKS5wb3N0KCcvYXBpL2pvYnMnKS5zZW5kKHtcclxuICAgICAgdGl0bGU6ICdKUyBEZXZlbG9wZXInLFxyXG4gICAgICBjb21wYW55OiAnVGVzdCcsXHJcbiAgICAgIGxvY2F0aW9uOiAnUmVtb3RlJyxcclxuICAgICAgdHlwZTogJ2Z1bGwtdGltZScsXHJcbiAgICAgIHNhbGFyeTogeyBtaW46IDYwMDAwLCBtYXg6IDkwMDAwIH0sXHJcbiAgICAgIHNraWxsczogWydKYXZhU2NyaXB0JywgJ05vZGUuanMnXSxcclxuICAgICAgZXhwZXJpZW5jZTogMyxcclxuICAgICAgcmVtb3RlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApLnBvc3QoJy9hcGkvbWF0Y2gnKS5zZW5kKHtcclxuICAgICAgdXNlcklkOiAndXNlci0xJyxcclxuICAgICAgc2tpbGxzOiBbJ0phdmFTY3JpcHQnLCAnTm9kZS5qcyddLFxyXG4gICAgICBleHBlcmllbmNlOiAzLFxyXG4gICAgICBsb2NhdGlvbjogJ1JlbW90ZSdcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgZXhwZWN0KHJlcy5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNRSxNQUFNLEdBQUdGLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUU1QyxNQUFNRyxHQUFHLEdBQUdGLE9BQU8sQ0FBQyxDQUFDO0FBQ3JCRSxHQUFHLENB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