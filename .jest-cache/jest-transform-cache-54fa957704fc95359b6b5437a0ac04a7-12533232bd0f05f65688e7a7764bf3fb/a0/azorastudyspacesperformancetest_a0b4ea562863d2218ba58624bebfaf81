37b92a005d2adc19273d2d392e5f37f4
"use strict";

const request = require('supertest');
const app = require('../server');
describe('azora-studyspaces Performance Tests', () => {
  it('should respond within 100ms', async () => {
    const start = Date.now();
    await request(app).get('/health').expect(200);
    const duration = Date.now() - start;
    expect(duration).toBeLessThan(100);
  });
  it('should handle 1000 requests per second', async () => {
    const start = Date.now();
    const promises = Array(1000).fill().map(() => request(app).get('/health'));
    await Promise.all(promises);
    const duration = Date.now() - start;
    expect(duration).toBeLessThan(1000);
  });
  it('should have low memory usage', () => {
    const memBefore = process.memoryUsage().heapUsed;
    // Simulate workload
    for (let i = 0; i < 10000; i++) {
      const obj = {
        data: 'test'.repeat(100)
      };
    }
    const memAfter = process.memoryUsage().heapUsed;
    const memIncrease = memAfter - memBefore;
    expect(memIncrease).toBeLessThan(50 * 1024 * 1024); // 50MB
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsImRlc2NyaWJlIiwiaXQiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJnZXQiLCJleHBlY3QiLCJkdXJhdGlvbiIsInRvQmVMZXNzVGhhbiIsInByb21pc2VzIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiUHJvbWlzZSIsImFsbCIsIm1lbUJlZm9yZSIsInByb2Nlc3MiLCJtZW1vcnlVc2FnZSIsImhlYXBVc2VkIiwiaSIsIm9iaiIsImRhdGEiLCJyZXBlYXQiLCJtZW1BZnRlciIsIm1lbUluY3JlYXNlIl0sInNvdXJjZXMiOlsiYXpvcmEtc3R1ZHlzcGFjZXMucGVyZm9ybWFuY2UudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG5jb25zdCBhcHAgPSByZXF1aXJlKCcuLi9zZXJ2ZXInKTtcblxuZGVzY3JpYmUoJ2F6b3JhLXN0dWR5c3BhY2VzIFBlcmZvcm1hbmNlIFRlc3RzJywgKCkgPT4ge1xuICBpdCgnc2hvdWxkIHJlc3BvbmQgd2l0aGluIDEwMG1zJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBhd2FpdCByZXF1ZXN0KGFwcCkuZ2V0KCcvaGVhbHRoJykuZXhwZWN0KDIwMCk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgMTAwMCByZXF1ZXN0cyBwZXIgc2Vjb25kJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5KDEwMDApLmZpbGwoKS5tYXAoKCkgPT4gXG4gICAgICByZXF1ZXN0KGFwcCkuZ2V0KCcvaGVhbHRoJylcbiAgICApO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigxMDAwKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYXZlIGxvdyBtZW1vcnkgdXNhZ2UnLCAoKSA9PiB7XG4gICAgY29uc3QgbWVtQmVmb3JlID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkO1xuICAgIC8vIFNpbXVsYXRlIHdvcmtsb2FkXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwMDsgaSsrKSB7XG4gICAgICBjb25zdCBvYmogPSB7IGRhdGE6ICd0ZXN0Jy5yZXBlYXQoMTAwKSB9O1xuICAgIH1cbiAgICBjb25zdCBtZW1BZnRlciA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKS5oZWFwVXNlZDtcbiAgICBjb25zdCBtZW1JbmNyZWFzZSA9IG1lbUFmdGVyIC0gbWVtQmVmb3JlO1xuICAgIGV4cGVjdChtZW1JbmNyZWFzZSkudG9CZUxlc3NUaGFuKDUwICogMTAyNCAqIDEwMjQpOyAvLyA1ME1CXG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxNQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFaENFLFFBQVEsQ0FBQyxxQ0FBcUMsRUFBRSxNQUFNO0VBQ3BEQyxFQUFFLENBQUMsNkJBQTZCLEVBQUUsWUFBWTtJQUM1QyxNQUFNQyxLQUFLLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7SUFDeEIsTUFBTVAsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FBQ00sR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDO0lBQzdDLE1BQU1DLFFBQVEsR0FBR0osSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHRixLQUFLO0lBQ25DSSxNQUFNLENBQUNDLFFBQVEsQ0FBQyxDQUFDQyxZQUFZLENBQUMsR0FBRyxDQUFDO0VBQ3BDLENBQUMsQ0FBQztFQUVGUCxFQUFFLENBQUMsd0NBQXdDLEVBQUUsWUFBWTtJQUN2RCxNQUFNQyxLQUFLLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7SUFDeEIsTUFBTUssUUFBUSxHQUFHQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxNQUN0Q2YsT0FBTyxDQUFDRSxHQUFHLENBQUMsQ0FBQ00sR0FBRyxDQUFDLFNBQVMsQ0FDNUIsQ0FBQztJQUNELE1BQU1RLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTCxRQUFRLENBQUM7SUFDM0IsTUFBTUYsUUFBUSxHQUFHSixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLEtBQUs7SUFDbkNJLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDLENBQUNDLFlBQVksQ0FBQyxJQUFJLENBQUM7RUFDckMsQ0FBQyxDQUFDO0VBRUZQLEVBQUUsQ0FBQyw4QkFBOEIsRUFBRSxNQUFNO0lBQ3ZDLE1BQU1jLFNBQVMsR0FBR0MsT0FBTyxDQUFDQyxXQUFXLENBQUMsQ0FBQyxDQUFDQyxRQUFRO0lBQ2hEO0lBQ0EsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsS0FBSyxFQUFFQSxDQUFDLEVBQUUsRUFBRTtNQUM5QixNQUFNQyxHQUFHLEdBQUc7UUFBRUMsSUFBSSxFQUFFLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDLEdBQUc7TUFBRSxDQUFDO0lBQzFDO0lBQ0EsTUFBTUMsUUFBUSxHQUFHUCxPQUFPLENBQUNDLFdBQVcsQ0FBQyxDQUFDLENBQUNDLFFBQVE7SUFDL0MsTUFBTU0sV0FBVyxHQUFHRCxRQUFRLEdBQUdSLFNBQVM7SUFDeENULE1BQU0sQ0FBQ2tCLFdBQVcsQ0FBQyxDQUFDaEIsWUFBWSxDQUFDLEVBQUUsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUN0RCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=