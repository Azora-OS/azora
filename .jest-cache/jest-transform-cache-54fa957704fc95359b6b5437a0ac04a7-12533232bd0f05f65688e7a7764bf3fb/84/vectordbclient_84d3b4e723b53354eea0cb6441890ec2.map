{"version":3,"names":["cov_25waj3l0zx","actualCoverage","VectorDBClient","constructor","connection","indexName","f","s","b","process","env","PINECONE_INDEX_NAME","search","queryEmbedding","options","topK","minScore","filter","includeMetadata","index","getIndex","queryResponse","query","vector","documents","matches","match","score","map","id","content","metadata","source","category","subcategory","timestamp","Date","author","tags","accessLevel","error","console","Error","message","upsert","batchSize","i","length","batch","slice","vectors","doc","toISOString","values","embedding","log","Math","floor","delete","ids","deleteMany","deleteByFilter","fetch","fetchResponse","Object","entries","records","record","getStats","getIndexStats","updateMetadata","docs","updatedDoc","exports"],"sources":["vector-db-client.ts"],"sourcesContent":["/**\r\n * Vector Database Client\r\n * Handles all interactions with Pinecone vector database\r\n */\r\n\r\nimport { PineconeConnection } from './connection';\r\nimport { Document, SearchOptions, UpsertOptions } from './types';\r\n\r\nexport class VectorDBClient {\r\n  private connection: PineconeConnection;\r\n  private indexName: string;\r\n\r\n  constructor(connection: PineconeConnection, indexName?: string) {\r\n    this.connection = connection;\r\n    this.indexName = indexName || process.env.PINECONE_INDEX_NAME || 'azora-knowledge-ocean';\r\n  }\r\n\r\n  /**\r\n   * Search for similar documents using vector similarity\r\n   */\r\n  public async search(\r\n    queryEmbedding: number[],\r\n    options: SearchOptions = {}\r\n  ): Promise<Document[]> {\r\n    const {\r\n      topK = 10,\r\n      minScore = 0.7,\r\n      filter = {},\r\n      includeMetadata = true\r\n    } = options;\r\n\r\n    try {\r\n      const index = await this.connection.getIndex(this.indexName);\r\n      \r\n      const queryResponse = await index.query({\r\n        vector: queryEmbedding,\r\n        topK,\r\n        filter,\r\n        includeMetadata\r\n      });\r\n\r\n      const documents: Document[] = (queryResponse.matches || [])\r\n        .filter(match => (match.score || 0) >= minScore)\r\n        .map(match => ({\r\n          id: match.id,\r\n          content: (match.metadata?.content as string) || '',\r\n          metadata: {\r\n            source: (match.metadata?.source as 'internal' | 'external') || 'internal',\r\n            category: (match.metadata?.category as string) || 'general',\r\n            subcategory: match.metadata?.subcategory as string,\r\n            timestamp: match.metadata?.timestamp \r\n              ? new Date(match.metadata.timestamp as string) \r\n              : new Date(),\r\n            author: match.metadata?.author as string,\r\n            tags: (match.metadata?.tags as string[]) || [],\r\n            accessLevel: (match.metadata?.accessLevel as 'public' | 'private' | 'restricted') || 'public'\r\n          },\r\n          score: match.score\r\n        }));\r\n\r\n      return documents;\r\n    } catch (error) {\r\n      console.error('Vector search failed:', error);\r\n      throw new Error(`Vector search failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Upsert documents into the vector database\r\n   */\r\n  public async upsert(\r\n    documents: Document[],\r\n    options: UpsertOptions = {}\r\n  ): Promise<void> {\r\n    const { batchSize = 100 } = options;\r\n\r\n    try {\r\n      const index = await this.connection.getIndex(this.indexName);\r\n      \r\n      // Process in batches\r\n      for (let i = 0; i < documents.length; i += batchSize) {\r\n        const batch = documents.slice(i, i + batchSize);\r\n        \r\n        const vectors = batch.map(doc => {\r\n          const metadata: Record<string, string | number | boolean | string[]> = {\r\n            content: doc.content,\r\n            source: doc.metadata.source,\r\n            category: doc.metadata.category,\r\n            timestamp: doc.metadata.timestamp.toISOString(),\r\n            tags: doc.metadata.tags\r\n          };\r\n\r\n          // Only add optional fields if they exist\r\n          if (doc.metadata.subcategory) {\r\n            metadata.subcategory = doc.metadata.subcategory;\r\n          }\r\n          if (doc.metadata.author) {\r\n            metadata.author = doc.metadata.author;\r\n          }\r\n          if (doc.metadata.accessLevel) {\r\n            metadata.accessLevel = doc.metadata.accessLevel;\r\n          }\r\n\r\n          return {\r\n            id: doc.id,\r\n            values: doc.embedding || [],\r\n            metadata\r\n          };\r\n        });\r\n\r\n        await index.upsert(vectors);\r\n        \r\n        console.log(`✓ Upserted batch ${Math.floor(i / batchSize) + 1} (${batch.length} documents)`);\r\n      }\r\n\r\n      console.log(`✓ Successfully upserted ${documents.length} documents`);\r\n    } catch (error) {\r\n      console.error('Upsert failed:', error);\r\n      throw new Error(`Upsert failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete documents by IDs\r\n   */\r\n  public async delete(ids: string[]): Promise<void> {\r\n    try {\r\n      const index = await this.connection.getIndex(this.indexName);\r\n      \r\n      await index.deleteMany(ids);\r\n      \r\n      console.log(`✓ Deleted ${ids.length} documents`);\r\n    } catch (error) {\r\n      console.error('Delete failed:', error);\r\n      throw new Error(`Delete failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete all documents matching a filter\r\n   */\r\n  public async deleteByFilter(filter: Record<string, any>): Promise<void> {\r\n    try {\r\n      const index = await this.connection.getIndex(this.indexName);\r\n      \r\n      await index.deleteMany(filter);\r\n      \r\n      console.log(`✓ Deleted documents matching filter`);\r\n    } catch (error) {\r\n      console.error('Delete by filter failed:', error);\r\n      throw new Error(`Delete by filter failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fetch documents by IDs\r\n   */\r\n  public async fetch(ids: string[]): Promise<Document[]> {\r\n    try {\r\n      const index = await this.connection.getIndex(this.indexName);\r\n      \r\n      const fetchResponse = await index.fetch(ids);\r\n      \r\n      const documents: Document[] = Object.entries(fetchResponse.records || {}).map(([id, record]) => ({\r\n        id,\r\n        content: (record.metadata?.content as string) || '',\r\n        metadata: {\r\n          source: (record.metadata?.source as 'internal' | 'external') || 'internal',\r\n          category: (record.metadata?.category as string) || 'general',\r\n          subcategory: record.metadata?.subcategory as string,\r\n          timestamp: record.metadata?.timestamp \r\n            ? new Date(record.metadata.timestamp as string) \r\n            : new Date(),\r\n          author: record.metadata?.author as string,\r\n          tags: (record.metadata?.tags as string[]) || [],\r\n          accessLevel: (record.metadata?.accessLevel as 'public' | 'private' | 'restricted') || 'public'\r\n        },\r\n        embedding: record.values\r\n      }));\r\n\r\n      return documents;\r\n    } catch (error) {\r\n      console.error('Fetch failed:', error);\r\n      throw new Error(`Fetch failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get statistics about the index\r\n   */\r\n  public async getStats(): Promise<any> {\r\n    try {\r\n      return await this.connection.getIndexStats(this.indexName);\r\n    } catch (error) {\r\n      console.error('Failed to get stats:', error);\r\n      throw new Error(`Failed to get stats: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update document metadata without changing embedding\r\n   */\r\n  public async updateMetadata(\r\n    id: string,\r\n    metadata: Partial<Document['metadata']>\r\n  ): Promise<void> {\r\n    try {\r\n      // Fetch existing document\r\n      const docs = await this.fetch([id]);\r\n      if (docs.length === 0) {\r\n        throw new Error(`Document with id ${id} not found`);\r\n      }\r\n\r\n      const doc = docs[0];\r\n      if (!doc) {\r\n        throw new Error(`Document with id ${id} not found`);\r\n      }\r\n      \r\n      // Merge metadata\r\n      const updatedDoc: Document = {\r\n        id: doc.id,\r\n        content: doc.content,\r\n        embedding: doc.embedding,\r\n        metadata: {\r\n          ...doc.metadata,\r\n          ...metadata\r\n        }\r\n      };\r\n\r\n      // Upsert with updated metadata\r\n      await this.upsert([updatedDoc]);\r\n      \r\n      console.log(`✓ Updated metadata for document ${id}`);\r\n    } catch (error) {\r\n      console.error('Update metadata failed:', error);\r\n      throw new Error(`Update metadata failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}