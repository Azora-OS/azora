6251db01f86a8d32019257bcce7c0081
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PlannerAgent = void 0;
class PlannerAgent {
  constructor(aiOrchestrator) {
    this.aiOrchestrator = aiOrchestrator;
  }
  async planTask(userPrompt, context) {
    console.log('Planning task:', userPrompt);

    // Generate plan using AI
    const planningPrompt = this.buildPlanningPrompt(userPrompt);
    const response = await this.aiOrchestrator.generateCode(planningPrompt, context);

    // Parse AI response into tasks
    const tasks = this.parsePlan(response.content);

    // Build dependency graph
    const dependencies = this.buildDependencyGraph(tasks);

    // Calculate estimated duration
    const estimatedDuration = tasks.reduce((sum, task) => sum + task.estimatedDuration, 0);

    // Identify rollback points
    const rollbackPoints = tasks.map(task => task.rollbackPoint);
    return {
      tasks,
      dependencies,
      rollbackPoints,
      estimatedDuration
    };
  }
  buildPlanningPrompt(userPrompt) {
    return `
You are a software development planner. Break down the following task into a series of concrete, actionable steps.

Task: ${userPrompt}

For each step, provide:
1. A clear description of what needs to be done
2. The type of operation (create, modify, delete, refactor)
3. Which files will be affected
4. Dependencies on other steps
5. Estimated duration in minutes

Format your response as a JSON array of tasks:
[
  {
    "id": "task-1",
    "description": "Create user model with TypeScript interfaces",
    "type": "create",
    "targetFiles": ["src/models/User.ts"],
    "dependencies": [],
    "estimatedDuration": 5
  },
  {
    "id": "task-2",
    "description": "Implement user service with CRUD operations",
    "type": "create",
    "targetFiles": ["src/services/UserService.ts"],
    "dependencies": ["task-1"],
    "estimatedDuration": 10
  }
]

Important:
- Each task should be small and focused (5-15 minutes)
- Tasks should build on each other incrementally
- Include proper error handling and validation
- Follow TypeScript and modern JavaScript best practices
`;
  }
  parsePlan(aiResponse) {
    try {
      // Extract JSON from response (AI might include explanation text)
      const jsonMatch = aiResponse.match(/\[[\s\S]*\]/);
      if (!jsonMatch) {
        throw new Error('No JSON array found in AI response');
      }
      const parsed = JSON.parse(jsonMatch[0]);
      return parsed.map((task, index) => ({
        id: task.id || `task-${index + 1}`,
        description: task.description,
        type: task.type || 'modify',
        targetFiles: task.targetFiles || [],
        dependencies: task.dependencies || [],
        rollbackPoint: `rollback-${task.id || index + 1}`,
        estimatedDuration: task.estimatedDuration || 10
      }));
    } catch (error) {
      console.error('Failed to parse AI plan:', error);

      // Fallback: create a single task
      return [{
        id: 'task-1',
        description: 'Complete the requested task',
        type: 'modify',
        targetFiles: [],
        dependencies: [],
        rollbackPoint: 'rollback-1',
        estimatedDuration: 15
      }];
    }
  }
  buildDependencyGraph(tasks) {
    const graph = new Map();
    for (const task of tasks) {
      graph.set(task.id, task.dependencies);
    }
    return graph;
  }
  getExecutionOrder(dag) {
    const {
      tasks,
      dependencies
    } = dag;
    const executed = new Set();
    const order = [];

    // Topological sort
    const visit = taskId => {
      if (executed.has(taskId)) return;
      const deps = dependencies.get(taskId) || [];
      for (const depId of deps) {
        visit(depId);
      }
      const task = tasks.find(t => t.id === taskId);
      if (task) {
        order.push(task);
        executed.add(taskId);
      }
    };
    for (const task of tasks) {
      visit(task.id);
    }
    return order;
  }
  validateDAG(dag) {
    const errors = [];

    // Check for circular dependencies
    const visited = new Set();
    const recursionStack = new Set();
    const hasCycle = taskId => {
      visited.add(taskId);
      recursionStack.add(taskId);
      const deps = dag.dependencies.get(taskId) || [];
      for (const depId of deps) {
        if (!visited.has(depId)) {
          if (hasCycle(depId)) return true;
        } else if (recursionStack.has(depId)) {
          return true;
        }
      }
      recursionStack.delete(taskId);
      return false;
    };
    for (const task of dag.tasks) {
      if (!visited.has(task.id) && hasCycle(task.id)) {
        errors.push(`Circular dependency detected involving task: ${task.id}`);
      }
    }

    // Check for missing dependencies
    for (const task of dag.tasks) {
      for (const depId of task.dependencies) {
        if (!dag.tasks.find(t => t.id === depId)) {
          errors.push(`Task ${task.id} depends on non-existent task: ${depId}`);
        }
      }
    }
    return {
      valid: errors.length === 0,
      errors
    };
  }
}
exports.PlannerAgent = PlannerAgent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQbGFubmVyQWdlbnQiLCJjb25zdHJ1Y3RvciIsImFpT3JjaGVzdHJhdG9yIiwicGxhblRhc2siLCJ1c2VyUHJvbXB0IiwiY29udGV4dCIsImNvbnNvbGUiLCJsb2ciLCJwbGFubmluZ1Byb21wdCIsImJ1aWxkUGxhbm5pbmdQcm9tcHQiLCJyZXNwb25zZSIsImdlbmVyYXRlQ29kZSIsInRhc2tzIiwicGFyc2VQbGFuIiwiY29udGVudCIsImRlcGVuZGVuY2llcyIsImJ1aWxkRGVwZW5kZW5jeUdyYXBoIiwiZXN0aW1hdGVkRHVyYXRpb24iLCJyZWR1Y2UiLCJzdW0iLCJ0YXNrIiwicm9sbGJhY2tQb2ludHMiLCJtYXAiLCJyb2xsYmFja1BvaW50IiwiYWlSZXNwb25zZSIsImpzb25NYXRjaCIsIm1hdGNoIiwiRXJyb3IiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJpbmRleCIsImlkIiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwidGFyZ2V0RmlsZXMiLCJlcnJvciIsImdyYXBoIiwiTWFwIiwic2V0IiwiZ2V0RXhlY3V0aW9uT3JkZXIiLCJkYWciLCJleGVjdXRlZCIsIlNldCIsIm9yZGVyIiwidmlzaXQiLCJ0YXNrSWQiLCJoYXMiLCJkZXBzIiwiZ2V0IiwiZGVwSWQiLCJmaW5kIiwidCIsInB1c2giLCJhZGQiLCJ2YWxpZGF0ZURBRyIsImVycm9ycyIsInZpc2l0ZWQiLCJyZWN1cnNpb25TdGFjayIsImhhc0N5Y2xlIiwiZGVsZXRlIiwidmFsaWQiLCJsZW5ndGgiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiUGxhbm5lckFnZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFJT3JjaGVzdHJhdG9yLCBBSUNvbnRleHQgfSBmcm9tICcuL0FJT3JjaGVzdHJhdG9yJztcblxuZXhwb3J0IGludGVyZmFjZSBUYXNrIHtcbiAgaWQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdHlwZTogJ2NyZWF0ZScgfCAnbW9kaWZ5JyB8ICdkZWxldGUnIHwgJ3JlZmFjdG9yJztcbiAgdGFyZ2V0RmlsZXM6IHN0cmluZ1tdO1xuICBkZXBlbmRlbmNpZXM6IHN0cmluZ1tdO1xuICByb2xsYmFja1BvaW50OiBzdHJpbmc7XG4gIGVzdGltYXRlZER1cmF0aW9uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFza0RBRyB7XG4gIHRhc2tzOiBUYXNrW107XG4gIGRlcGVuZGVuY2llczogTWFwPHN0cmluZywgc3RyaW5nW10+O1xuICByb2xsYmFja1BvaW50czogc3RyaW5nW107XG4gIGVzdGltYXRlZER1cmF0aW9uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBQbGFubmVyQWdlbnQge1xuICBwcml2YXRlIGFpT3JjaGVzdHJhdG9yOiBBSU9yY2hlc3RyYXRvcjtcblxuICBjb25zdHJ1Y3RvcihhaU9yY2hlc3RyYXRvcjogQUlPcmNoZXN0cmF0b3IpIHtcbiAgICB0aGlzLmFpT3JjaGVzdHJhdG9yID0gYWlPcmNoZXN0cmF0b3I7XG4gIH1cblxuICBhc3luYyBwbGFuVGFzayh1c2VyUHJvbXB0OiBzdHJpbmcsIGNvbnRleHQ6IEFJQ29udGV4dCk6IFByb21pc2U8VGFza0RBRz4ge1xuICAgIGNvbnNvbGUubG9nKCdQbGFubmluZyB0YXNrOicsIHVzZXJQcm9tcHQpO1xuXG4gICAgLy8gR2VuZXJhdGUgcGxhbiB1c2luZyBBSVxuICAgIGNvbnN0IHBsYW5uaW5nUHJvbXB0ID0gdGhpcy5idWlsZFBsYW5uaW5nUHJvbXB0KHVzZXJQcm9tcHQpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5haU9yY2hlc3RyYXRvci5nZW5lcmF0ZUNvZGUocGxhbm5pbmdQcm9tcHQsIGNvbnRleHQpO1xuXG4gICAgLy8gUGFyc2UgQUkgcmVzcG9uc2UgaW50byB0YXNrc1xuICAgIGNvbnN0IHRhc2tzID0gdGhpcy5wYXJzZVBsYW4ocmVzcG9uc2UuY29udGVudCk7XG5cbiAgICAvLyBCdWlsZCBkZXBlbmRlbmN5IGdyYXBoXG4gICAgY29uc3QgZGVwZW5kZW5jaWVzID0gdGhpcy5idWlsZERlcGVuZGVuY3lHcmFwaCh0YXNrcyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgZXN0aW1hdGVkIGR1cmF0aW9uXG4gICAgY29uc3QgZXN0aW1hdGVkRHVyYXRpb24gPSB0YXNrcy5yZWR1Y2UoKHN1bSwgdGFzaykgPT4gc3VtICsgdGFzay5lc3RpbWF0ZWREdXJhdGlvbiwgMCk7XG5cbiAgICAvLyBJZGVudGlmeSByb2xsYmFjayBwb2ludHNcbiAgICBjb25zdCByb2xsYmFja1BvaW50cyA9IHRhc2tzLm1hcCh0YXNrID0+IHRhc2sucm9sbGJhY2tQb2ludCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGFza3MsXG4gICAgICBkZXBlbmRlbmNpZXMsXG4gICAgICByb2xsYmFja1BvaW50cyxcbiAgICAgIGVzdGltYXRlZER1cmF0aW9uLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkUGxhbm5pbmdQcm9tcHQodXNlclByb21wdDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuWW91IGFyZSBhIHNvZnR3YXJlIGRldmVsb3BtZW50IHBsYW5uZXIuIEJyZWFrIGRvd24gdGhlIGZvbGxvd2luZyB0YXNrIGludG8gYSBzZXJpZXMgb2YgY29uY3JldGUsIGFjdGlvbmFibGUgc3RlcHMuXG5cblRhc2s6ICR7dXNlclByb21wdH1cblxuRm9yIGVhY2ggc3RlcCwgcHJvdmlkZTpcbjEuIEEgY2xlYXIgZGVzY3JpcHRpb24gb2Ygd2hhdCBuZWVkcyB0byBiZSBkb25lXG4yLiBUaGUgdHlwZSBvZiBvcGVyYXRpb24gKGNyZWF0ZSwgbW9kaWZ5LCBkZWxldGUsIHJlZmFjdG9yKVxuMy4gV2hpY2ggZmlsZXMgd2lsbCBiZSBhZmZlY3RlZFxuNC4gRGVwZW5kZW5jaWVzIG9uIG90aGVyIHN0ZXBzXG41LiBFc3RpbWF0ZWQgZHVyYXRpb24gaW4gbWludXRlc1xuXG5Gb3JtYXQgeW91ciByZXNwb25zZSBhcyBhIEpTT04gYXJyYXkgb2YgdGFza3M6XG5bXG4gIHtcbiAgICBcImlkXCI6IFwidGFzay0xXCIsXG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIkNyZWF0ZSB1c2VyIG1vZGVsIHdpdGggVHlwZVNjcmlwdCBpbnRlcmZhY2VzXCIsXG4gICAgXCJ0eXBlXCI6IFwiY3JlYXRlXCIsXG4gICAgXCJ0YXJnZXRGaWxlc1wiOiBbXCJzcmMvbW9kZWxzL1VzZXIudHNcIl0sXG4gICAgXCJkZXBlbmRlbmNpZXNcIjogW10sXG4gICAgXCJlc3RpbWF0ZWREdXJhdGlvblwiOiA1XG4gIH0sXG4gIHtcbiAgICBcImlkXCI6IFwidGFzay0yXCIsXG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIkltcGxlbWVudCB1c2VyIHNlcnZpY2Ugd2l0aCBDUlVEIG9wZXJhdGlvbnNcIixcbiAgICBcInR5cGVcIjogXCJjcmVhdGVcIixcbiAgICBcInRhcmdldEZpbGVzXCI6IFtcInNyYy9zZXJ2aWNlcy9Vc2VyU2VydmljZS50c1wiXSxcbiAgICBcImRlcGVuZGVuY2llc1wiOiBbXCJ0YXNrLTFcIl0sXG4gICAgXCJlc3RpbWF0ZWREdXJhdGlvblwiOiAxMFxuICB9XG5dXG5cbkltcG9ydGFudDpcbi0gRWFjaCB0YXNrIHNob3VsZCBiZSBzbWFsbCBhbmQgZm9jdXNlZCAoNS0xNSBtaW51dGVzKVxuLSBUYXNrcyBzaG91bGQgYnVpbGQgb24gZWFjaCBvdGhlciBpbmNyZW1lbnRhbGx5XG4tIEluY2x1ZGUgcHJvcGVyIGVycm9yIGhhbmRsaW5nIGFuZCB2YWxpZGF0aW9uXG4tIEZvbGxvdyBUeXBlU2NyaXB0IGFuZCBtb2Rlcm4gSmF2YVNjcmlwdCBiZXN0IHByYWN0aWNlc1xuYDtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VQbGFuKGFpUmVzcG9uc2U6IHN0cmluZyk6IFRhc2tbXSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEV4dHJhY3QgSlNPTiBmcm9tIHJlc3BvbnNlIChBSSBtaWdodCBpbmNsdWRlIGV4cGxhbmF0aW9uIHRleHQpXG4gICAgICBjb25zdCBqc29uTWF0Y2ggPSBhaVJlc3BvbnNlLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKTtcbiAgICAgIGlmICghanNvbk1hdGNoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gSlNPTiBhcnJheSBmb3VuZCBpbiBBSSByZXNwb25zZScpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XG4gICAgICBcbiAgICAgIHJldHVybiBwYXJzZWQubWFwKCh0YXNrOiBhbnksIGluZGV4OiBudW1iZXIpID0+ICh7XG4gICAgICAgIGlkOiB0YXNrLmlkIHx8IGB0YXNrLSR7aW5kZXggKyAxfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0YXNrLmRlc2NyaXB0aW9uLFxuICAgICAgICB0eXBlOiB0YXNrLnR5cGUgfHwgJ21vZGlmeScsXG4gICAgICAgIHRhcmdldEZpbGVzOiB0YXNrLnRhcmdldEZpbGVzIHx8IFtdLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IHRhc2suZGVwZW5kZW5jaWVzIHx8IFtdLFxuICAgICAgICByb2xsYmFja1BvaW50OiBgcm9sbGJhY2stJHt0YXNrLmlkIHx8IGluZGV4ICsgMX1gLFxuICAgICAgICBlc3RpbWF0ZWREdXJhdGlvbjogdGFzay5lc3RpbWF0ZWREdXJhdGlvbiB8fCAxMCxcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHBhcnNlIEFJIHBsYW46JywgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyBGYWxsYmFjazogY3JlYXRlIGEgc2luZ2xlIHRhc2tcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBpZDogJ3Rhc2stMScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tcGxldGUgdGhlIHJlcXVlc3RlZCB0YXNrJyxcbiAgICAgICAgdHlwZTogJ21vZGlmeScsXG4gICAgICAgIHRhcmdldEZpbGVzOiBbXSxcbiAgICAgICAgZGVwZW5kZW5jaWVzOiBbXSxcbiAgICAgICAgcm9sbGJhY2tQb2ludDogJ3JvbGxiYWNrLTEnLFxuICAgICAgICBlc3RpbWF0ZWREdXJhdGlvbjogMTUsXG4gICAgICB9XTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkRGVwZW5kZW5jeUdyYXBoKHRhc2tzOiBUYXNrW10pOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGdyYXBoID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZ1tdPigpO1xuICAgIFxuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgZ3JhcGguc2V0KHRhc2suaWQsIHRhc2suZGVwZW5kZW5jaWVzKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGdyYXBoO1xuICB9XG5cbiAgZ2V0RXhlY3V0aW9uT3JkZXIoZGFnOiBUYXNrREFHKTogVGFza1tdIHtcbiAgICBjb25zdCB7IHRhc2tzLCBkZXBlbmRlbmNpZXMgfSA9IGRhZztcbiAgICBjb25zdCBleGVjdXRlZCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IG9yZGVyOiBUYXNrW10gPSBbXTtcblxuICAgIC8vIFRvcG9sb2dpY2FsIHNvcnRcbiAgICBjb25zdCB2aXNpdCA9ICh0YXNrSWQ6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKGV4ZWN1dGVkLmhhcyh0YXNrSWQpKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGRlcHMgPSBkZXBlbmRlbmNpZXMuZ2V0KHRhc2tJZCkgfHwgW107XG4gICAgICBmb3IgKGNvbnN0IGRlcElkIG9mIGRlcHMpIHtcbiAgICAgICAgdmlzaXQoZGVwSWQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0YXNrID0gdGFza3MuZmluZCh0ID0+IHQuaWQgPT09IHRhc2tJZCk7XG4gICAgICBpZiAodGFzaykge1xuICAgICAgICBvcmRlci5wdXNoKHRhc2spO1xuICAgICAgICBleGVjdXRlZC5hZGQodGFza0lkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICB2aXNpdCh0YXNrLmlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3JkZXI7XG4gIH1cblxuICB2YWxpZGF0ZURBRyhkYWc6IFRhc2tEQUcpOiB7IHZhbGlkOiBib29sZWFuOyBlcnJvcnM6IHN0cmluZ1tdIH0ge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIENoZWNrIGZvciBjaXJjdWxhciBkZXBlbmRlbmNpZXNcbiAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3QgcmVjdXJzaW9uU3RhY2sgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIGNvbnN0IGhhc0N5Y2xlID0gKHRhc2tJZDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICB2aXNpdGVkLmFkZCh0YXNrSWQpO1xuICAgICAgcmVjdXJzaW9uU3RhY2suYWRkKHRhc2tJZCk7XG5cbiAgICAgIGNvbnN0IGRlcHMgPSBkYWcuZGVwZW5kZW5jaWVzLmdldCh0YXNrSWQpIHx8IFtdO1xuICAgICAgZm9yIChjb25zdCBkZXBJZCBvZiBkZXBzKSB7XG4gICAgICAgIGlmICghdmlzaXRlZC5oYXMoZGVwSWQpKSB7XG4gICAgICAgICAgaWYgKGhhc0N5Y2xlKGRlcElkKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjdXJzaW9uU3RhY2suaGFzKGRlcElkKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlY3Vyc2lvblN0YWNrLmRlbGV0ZSh0YXNrSWQpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgZGFnLnRhc2tzKSB7XG4gICAgICBpZiAoIXZpc2l0ZWQuaGFzKHRhc2suaWQpICYmIGhhc0N5Y2xlKHRhc2suaWQpKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBDaXJjdWxhciBkZXBlbmRlbmN5IGRldGVjdGVkIGludm9sdmluZyB0YXNrOiAke3Rhc2suaWR9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIG1pc3NpbmcgZGVwZW5kZW5jaWVzXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIGRhZy50YXNrcykge1xuICAgICAgZm9yIChjb25zdCBkZXBJZCBvZiB0YXNrLmRlcGVuZGVuY2llcykge1xuICAgICAgICBpZiAoIWRhZy50YXNrcy5maW5kKHQgPT4gdC5pZCA9PT0gZGVwSWQpKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goYFRhc2sgJHt0YXNrLmlkfSBkZXBlbmRzIG9uIG5vbi1leGlzdGVudCB0YXNrOiAke2RlcElkfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgICAgZXJyb3JzLFxuICAgIH07XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBbUJPLE1BQU1BLFlBQVksQ0FBQztFQUd4QkMsV0FBV0EsQ0FBQ0MsY0FBOEIsRUFBRTtJQUMxQyxJQUFJLENBQUNBLGNBQWMsR0FBR0EsY0FBYztFQUN0QztFQUVBLE1BQU1DLFFBQVFBLENBQUNDLFVBQWtCLEVBQUVDLE9BQWtCLEVBQW9CO0lBQ3ZFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRUgsVUFBVSxDQUFDOztJQUV6QztJQUNBLE1BQU1JLGNBQWMsR0FBRyxJQUFJLENBQUNDLG1CQUFtQixDQUFDTCxVQUFVLENBQUM7SUFDM0QsTUFBTU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDUixjQUFjLENBQUNTLFlBQVksQ0FBQ0gsY0FBYyxFQUFFSCxPQUFPLENBQUM7O0lBRWhGO0lBQ0EsTUFBTU8sS0FBSyxHQUFHLElBQUksQ0FBQ0MsU0FBUyxDQUFDSCxRQUFRLENBQUNJLE9BQU8sQ0FBQzs7SUFFOUM7SUFDQSxNQUFNQyxZQUFZLEdBQUcsSUFBSSxDQUFDQyxvQkFBb0IsQ0FBQ0os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