a23be33366c76c7c5ce699f0b34e8c08
"use strict";

var _signingService = require("../services/signing.service.js");
var _legalService = require("../services/legal.service.js");
describe('Legal Document Signing Flow', () => {
  const mockBusinessId = 'test-business-123';
  const mockUserId = 'test-user-123';
  const mockIpAddress = '192.168.1.1';
  const mockUserAgent = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)';
  let documentId;
  let templateId;
  beforeAll(async () => {
    // Get a template and create a document for testing
    const templates = await _legalService.legalService.getTemplates();
    templateId = templates[0].id;
    const documentData = {
      templateId,
      data: {
        businessName: 'Test Business',
        businessType: 'e-commerce',
        ownerName: 'John Doe',
        date: '2024-01-01',
        additionalTerms: 'Standard terms apply'
      }
    };
    const document = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
    documentId = document.id;
  });
  describe('Signing Session Management', () => {
    it('should create a signing session', async () => {
      const session = await _signingService.signingService.createSigningSession(documentId, mockUserId);
      expect(session).toBeDefined();
      expect(session.id).toBeDefined();
      expect(session.documentId).toBe(documentId);
      expect(session.userId).toBe(mockUserId);
      expect(session.status).toBe('pending');
      expect(session.createdAt).toBeDefined();
      expect(session.expiresAt).toBeDefined();
      expect(session.expiresAt.getTime()).toBeGreaterThan(session.createdAt.getTime());
    });
    it('should retrieve signing session', async () => {
      const createdSession = await _signingService.signingService.createSigningSession(documentId, mockUserId);
      const retrievedSession = await _signingService.signingService.getSigningSession(createdSession.id);
      expect(retrievedSession).toBeDefined();
      expect(retrievedSession.id).toBe(createdSession.id);
      expect(retrievedSession.status).toBe('pending');
    });
    it('should throw error for non-existent session', async () => {
      await expect(_signingService.signingService.getSigningSession('non-existent-session')).rejects.toThrow('Signing session not found');
    });
    it('should throw error when signing already signed document', async () => {
      const session = await _signingService.signingService.createSigningSession(documentId, mockUserId);

      // Sign the document
      await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);

      // Try to create another session for the same document
      await expect(_signingService.signingService.createSigningSession(documentId, mockUserId)).rejects.toThrow('Document is already signed');
    });
  });
  describe('Signature Capture with Timestamp and IP Logging', () => {
    it('should capture signature with timestamp and IP', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Capture Test Business',
          businessType: 'tutoring',
          ownerName: 'Jane Doe',
          date: '2024-01-01',
          additionalTerms: 'Capture test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      const capture = await _signingService.signingService.captureSignature(session.id, mockUserId, mockIpAddress, mockUserAgent);
      expect(capture).toBeDefined();
      expect(capture.sessionId).toBe(session.id);
      expect(capture.documentId).toBe(doc.id);
      expect(capture.userId).toBe(mockUserId);
      expect(capture.signatureHash).toBeDefined();
      expect(capture.timestamp).toBeDefined();
      expect(capture.ipAddress).toBe(mockIpAddress);
      expect(capture.userAgent).toBe(mockUserAgent);
      expect(capture.signatureData.algorithm).toBe('SHA256');
      expect(capture.signatureData.hashLength).toBe(64);
      expect(capture.signatureData.verified).toBe(true);
    });
    it('should validate signature hash format', async () => {
      const validHash = 'a'.repeat(64);
      const invalidHash = 'invalid-hash';
      expect(_signingService.signingService.validateSignatureHash(validHash)).toBe(true);
      expect(_signingService.signingService.validateSignatureHash(invalidHash)).toBe(false);
    });
    it('should throw error when capturing signature for non-pending session', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Non-Pending Test',
          businessType: 'gig-platform',
          ownerName: 'Test Owner',
          date: '2024-01-01',
          additionalTerms: 'Test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);

      // Sign the document
      await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);

      // Try to capture signature again
      await expect(_signingService.signingService.captureSignature(session.id, mockUserId, mockIpAddress, mockUserAgent)).rejects.toThrow('Signing session is not pending');
    });
  });
  describe('Document Signing', () => {
    it('should sign document with timestamp and IP logging', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Sign Test Business',
          businessType: 'ride-sharing',
          ownerName: 'Sign Owner',
          date: '2024-01-01',
          additionalTerms: 'Sign test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      const signedDoc = await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);
      expect(signedDoc).toBeDefined();
      expect(signedDoc.status).toBe('signed');
      expect(signedDoc.signedAt).toBeDefined();
      expect(signedDoc.signerId).toBe(mockUserId);
      expect(signedDoc.signatureHash).toBeDefined();
      expect(signedDoc.ipAddress).toBe(mockIpAddress);
      expect(signedDoc.userAgent).toBe(mockUserAgent);
    });
    it('should throw error when unauthorized user tries to sign', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Unauthorized Test',
          businessType: 'e-commerce',
          ownerName: 'Unauth Owner',
          date: '2024-01-01',
          additionalTerms: 'Unauth terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      await expect(_signingService.signingService.signDocument(session.id, 'different-user', mockIpAddress, mockUserAgent)).rejects.toThrow('Unauthorized to sign this document');
    });
    it('should throw error when signing non-pending session', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Non-Pending Sign Test',
          businessType: 'tutoring',
          ownerName: 'Non-Pending Owner',
          date: '2024-01-01',
          additionalTerms: 'Non-pending terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);

      // Sign once
      await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);

      // Try to sign again
      await expect(_signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent)).rejects.toThrow('Signing session is not pending');
    });
  });
  describe('Signature Verification', () => {
    it('should verify valid signature', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Verify Test Business',
          businessType: 'gig-platform',
          ownerName: 'Verify Owner',
          date: '2024-01-01',
          additionalTerms: 'Verify test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      const signedDoc = await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);
      const verification = await _signingService.signingService.verifySignature(doc.id, mockUserId);
      expect(verification).toBeDefined();
      expect(verification.valid).toBe(true);
      expect(verification.signedAt).toBeDefined();
      expect(verification.signerId).toBe(mockUserId);
      expect(verification.ipAddress).toBe(mockIpAddress);
      expect(verification.userAgent).toBe(mockUserAgent);
    });
    it('should verify signature integrity', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Integrity Test Business',
          businessType: 'e-commerce',
          ownerName: 'Integrity Owner',
          date: '2024-01-01',
          additionalTerms: 'Integrity test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      const signedDoc = await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);
      const verification = await _signingService.signingService.verifySignatureIntegrity(doc.id, mockUserId, signedDoc.signatureHash);
      expect(verification).toBeDefined();
      expect(verification.valid).toBe(true);
      expect(verification.documentId).toBe(doc.id);
      expect(verification.verificationTimestamp).toBeDefined();
    });
    it('should detect invalid signature', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Invalid Sig Test',
          businessType: 'ride-sharing',
          ownerName: 'Invalid Owner',
          date: '2024-01-01',
          additionalTerms: 'Invalid sig terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);
      const invalidHash = 'b'.repeat(64);
      const verification = await _signingService.signingService.verifySignatureIntegrity(doc.id, mockUserId, invalidHash);
      expect(verification.valid).toBe(false);
      expect(verification.details).toContain('mismatch');
    });
  });
  describe('Audit Trail', () => {
    it('should retrieve signing history', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'History Test Business',
          businessType: 'tutoring',
          ownerName: 'History Owner',
          date: '2024-01-01',
          additionalTerms: 'History test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);
      const history = await _signingService.signingService.getSigningHistory(doc.id, mockUserId);
      expect(Array.isArray(history)).toBe(true);
      expect(history.length).toBeGreaterThan(0);
      expect(history[0]).toHaveProperty('action');
      expect(history[0]).toHaveProperty('timestamp');
      expect(history[0]).toHaveProperty('details');
    });
    it('should get complete audit trail for signed document', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Complete Audit Test',
          businessType: 'gig-platform',
          ownerName: 'Audit Owner',
          date: '2024-01-01',
          additionalTerms: 'Audit test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      const signedDoc = await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);
      const auditTrail = await _signingService.signingService.getSignedDocumentAuditTrail(doc.id, mockUserId);
      expect(auditTrail).toBeDefined();
      expect(auditTrail.documentId).toBe(doc.id);
      expect(auditTrail.auditTrail).toBeDefined();
      expect(Array.isArray(auditTrail.auditTrail)).toBe(true);
      expect(auditTrail.signatureVerification).toBeDefined();
      expect(auditTrail.signatureVerification.isSigned).toBe(true);
      expect(auditTrail.signatureVerification.signedAt).toBeDefined();
      expect(auditTrail.signatureVerification.signedBy).toBe(mockUserId);
      expect(auditTrail.signatureVerification.ipAddress).toBe(mockIpAddress);
      expect(auditTrail.signatureVerification.userAgent).toBe(mockUserAgent);
    });
    it('should export audit trail as CSV', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'CSV Export Test',
          businessType: 'e-commerce',
          ownerName: 'CSV Owner',
          date: '2024-01-01',
          additionalTerms: 'CSV test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      await _signingService.signingService.signDocument(session.id, mockUserId, mockIpAddress, mockUserAgent);
      const csv = await _signingService.signingService.exportAuditTrailAsCSV(doc.id, mockUserId);
      expect(typeof csv).toBe('string');
      expect(csv).toContain('Action');
      expect(csv).toContain('Timestamp');
      expect(csv).toContain('User ID');
      expect(csv).toContain('IP Address');
    });
  });
  describe('Session Management', () => {
    it('should extend signing session', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Extend Test Business',
          businessType: 'ride-sharing',
          ownerName: 'Extend Owner',
          date: '2024-01-01',
          additionalTerms: 'Extend test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      const originalExpiry = session.expiresAt;
      const extended = await _signingService.signingService.extendSigningSession(session.id, mockUserId);
      expect(extended.expiresAt.getTime()).toBeGreaterThan(originalExpiry.getTime());
    });
    it('should cancel signing session', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Cancel Test Business',
          businessType: 'tutoring',
          ownerName: 'Cancel Owner',
          date: '2024-01-01',
          additionalTerms: 'Cancel test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      await _signingService.signingService.cancelSigningSession(session.id, mockUserId);
      await expect(_signingService.signingService.getSigningSession(session.id)).rejects.toThrow('Signing session not found');
    });
    it('should get user signing sessions', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'User Sessions Test',
          businessType: 'gig-platform',
          ownerName: 'Sessions Owner',
          date: '2024-01-01',
          additionalTerms: 'Sessions test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      const sessions = await _signingService.signingService.getUserSigningSessions(mockUserId);
      expect(Array.isArray(sessions)).toBe(true);
      expect(sessions.length).toBeGreaterThan(0);
      expect(sessions[0].userId).toBe(mockUserId);
    });
  });
  describe('Security and Statistics', () => {
    it('should validate session security', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Security Test Business',
          businessType: 'e-commerce',
          ownerName: 'Security Owner',
          date: '2024-01-01',
          additionalTerms: 'Security test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      const security = await _signingService.signingService.validateSessionSecurity(session.id);
      expect(security).toBeDefined();
      expect(security.sessionId).toBe(session.id);
      expect(security.isSecure).toBeDefined();
      expect(Array.isArray(security.issues)).toBe(true);
      expect(Array.isArray(security.recommendations)).toBe(true);
    });
    it('should get signing statistics', async () => {
      const stats = await _signingService.signingService.getSigningStats();
      expect(stats).toBeDefined();
      expect(stats.totalSessions).toBeGreaterThanOrEqual(0);
      expect(stats.pendingSessions).toBeGreaterThanOrEqual(0);
      expect(stats.signedSessions).toBeGreaterThanOrEqual(0);
      expect(stats.expiredSessions).toBeGreaterThanOrEqual(0);
      expect(stats.averageSigningTime).toBeGreaterThanOrEqual(0);
    });
    it('should get signing statistics with security metrics', async () => {
      const stats = await _signingService.signingService.getSigningStatistics();
      expect(stats).toBeDefined();
      expect(stats.totalSessions).toBeGreaterThanOrEqual(0);
      expect(stats.securityMetrics).toBeDefined();
      expect(stats.securityMetrics.sessionsWithIPLogging).toBeGreaterThanOrEqual(0);
      expect(stats.securityMetrics.sessionsWithUserAgent).toBeGreaterThanOrEqual(0);
      expect(stats.securityMetrics.sessionsWithTimestamp).toBeGreaterThanOrEqual(0);
    });
    it('should cleanup expired sessions', async () => {
      const cleaned = await _signingService.signingService.cleanupExpiredSessions();
      expect(typeof cleaned).toBe('number');
      expect(cleaned).toBeGreaterThanOrEqual(0);
    });
  });
  describe('Signature Capture Details', () => {
    it('should get document signature captures', async () => {
      const documentData = {
        templateId,
        data: {
          businessName: 'Captures Test Business',
          businessType: 'ride-sharing',
          ownerName: 'Captures Owner',
          date: '2024-01-01',
          additionalTerms: 'Captures test terms'
        }
      };
      const doc = await _legalService.legalService.generateDocument(mockBusinessId, documentData, mockUserId);
      const session = await _signingService.signingService.createSigningSession(doc.id, mockUserId);
      await _signingService.signingService.captureSignature(session.id, mockUserId, mockIpAddress, mockUserAgent);
      const captures = await _signingService.signingService.getDocumentSignatureCaptures(doc.id);
      expect(Array.isArray(captures)).toBe(true);
      expect(captures.length).toBeGreaterThan(0);
      expect(captures[0].documentId).toBe(doc.id);
      expect(captures[0].userId).toBe(mockUserId);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2lnbmluZ1NlcnZpY2UiLCJyZXF1aXJlIiwiX2xlZ2FsU2VydmljZSIsImRlc2NyaWJlIiwibW9ja0J1c2luZXNzSWQiLCJtb2NrVXNlcklkIiwibW9ja0lwQWRkcmVzcyIsIm1vY2tVc2VyQWdlbnQiLCJkb2N1bWVudElkIiwidGVtcGxhdGVJZCIsImJlZm9yZUFsbCIsInRlbXBsYXRlcyIsImxlZ2FsU2VydmljZSIsImdldFRlbXBsYXRlcyIsImlkIiwiZG9jdW1lbnREYXRhIiwiZGF0YSIsImJ1c2luZXNzTmFtZSIsImJ1c2luZXNzVHlwZSIsIm93bmVyTmFtZSIsImRhdGUiLCJhZGRpdGlvbmFsVGVybXMiLCJkb2N1bWVudCIsImdlbmVyYXRlRG9jdW1lbnQiLCJpdCIsInNlc3Npb24iLCJzaWduaW5nU2VydmljZSIsImNyZWF0ZVNpZ25pbmdTZXNzaW9uIiwiZXhwZWN0IiwidG9CZURlZmluZWQiLCJ0b0JlIiwidXNlcklkIiwic3RhdHVzIiwiY3JlYXRlZEF0IiwiZXhwaXJlc0F0IiwiZ2V0VGltZSIsInRvQmVHcmVhdGVyVGhhbiIsImNyZWF0ZWRTZXNzaW9uIiwicmV0cmlldmVkU2Vzc2lvbiIsImdldFNpZ25pbmdTZXNzaW9uIiwicmVqZWN0cyIsInRvVGhyb3ciLCJzaWduRG9jdW1lbnQiLCJkb2MiLCJjYXB0dXJlIiwiY2FwdHVyZVNpZ25hdHVyZSIsInNlc3Npb25JZCIsInNpZ25hdHVyZUhhc2giLCJ0aW1lc3RhbXAiLCJpcEFkZHJlc3MiLCJ1c2VyQWdlbnQiLCJzaWduYXR1cmVEYXRhIiwiYWxnb3JpdGhtIiwiaGFzaExlbmd0aCIsInZlcmlmaWVkIiwidmFsaWRIYXNoIiwicmVwZWF0IiwiaW52YWxpZEhhc2giLCJ2YWxpZGF0ZVNpZ25hdHVyZUhhc2giLCJzaWduZWREb2MiLCJzaWduZWRBdCIsInNpZ25lcklkIiwidmVyaWZpY2F0aW9uIiwidmVyaWZ5U2lnbmF0dXJlIiwidmFsaWQiLCJ2ZXJpZnlTaWduYXR1cmVJbnRlZ3JpdHkiLCJ2ZXJpZmljYXRpb25UaW1lc3RhbXAiLCJkZXRhaWxzIiwidG9Db250YWluIiwiaGlzdG9yeSIsImdldFNpZ25pbmdIaXN0b3J5IiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwidG9IYXZlUHJvcGVydHkiLCJhdWRpdFRyYWlsIiwiZ2V0U2lnbmVkRG9jdW1lbnRBdWRpdFRyYWlsIiwic2lnbmF0dXJlVmVyaWZpY2F0aW9uIiwiaXNTaWduZWQiLCJzaWduZWRCeSIsImNzdiIsImV4cG9ydEF1ZGl0VHJhaWxBc0NTViIsIm9yaWdpbmFsRXhwaXJ5IiwiZXh0ZW5kZWQiLCJleHRlbmRTaWduaW5nU2Vzc2lvbiIsImNhbmNlbFNpZ25pbmdTZXNzaW9uIiwic2Vzc2lvbnMiLCJnZXRVc2VyU2lnbmluZ1Nlc3Npb25zIiwic2VjdXJpdHkiLCJ2YWxpZGF0ZVNlc3Npb25TZWN1cml0eSIsImlzU2VjdXJlIiwiaXNzdWVzIiwicmVjb21tZW5kYXRpb25zIiwic3RhdHMiLCJnZXRTaWduaW5nU3RhdHMiLCJ0b3RhbFNlc3Npb25zIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInBlbmRpbmdTZXNzaW9ucyIsInNpZ25lZFNlc3Npb25zIiwiZXhwaXJlZFNlc3Npb25zIiwiYXZlcmFnZVNpZ25pbmdUaW1lIiwiZ2V0U2lnbmluZ1N0YXRpc3RpY3MiLCJzZWN1cml0eU1ldHJpY3MiLCJzZXNzaW9uc1dpdGhJUExvZ2dpbmciLCJzZXNzaW9uc1dpdGhVc2VyQWdlbnQiLCJzZXNzaW9uc1dpdGhUaW1lc3RhbXAiLCJjbGVhbmVkIiwiY2xlYW51cEV4cGlyZWRTZXNzaW9ucyIsImNhcHR1cmVzIiwiZ2V0RG9jdW1lbnRTaWduYXR1cmVDYXB0dXJlcyJdLCJzb3VyY2VzIjpbInNpZ25pbmctZmxvdy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNpZ25pbmdTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvc2lnbmluZy5zZXJ2aWNlLmpzJztcclxuaW1wb3J0IHsgbGVnYWxTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbGVnYWwuc2VydmljZS5qcyc7XHJcbmltcG9ydCB7IGF1ZGl0U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2F1ZGl0LnNlcnZpY2UuanMnO1xyXG5cclxuZGVzY3JpYmUoJ0xlZ2FsIERvY3VtZW50IFNpZ25pbmcgRmxvdycsICgpID0+IHtcclxuICBjb25zdCBtb2NrQnVzaW5lc3NJZCA9ICd0ZXN0LWJ1c2luZXNzLTEyMyc7XHJcbiAgY29uc3QgbW9ja1VzZXJJZCA9ICd0ZXN0LXVzZXItMTIzJztcclxuICBjb25zdCBtb2NrSXBBZGRyZXNzID0gJzE5Mi4xNjguMS4xJztcclxuICBjb25zdCBtb2NrVXNlckFnZW50ID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpJztcclxuICBsZXQgZG9jdW1lbnRJZDogc3RyaW5nO1xyXG4gIGxldCB0ZW1wbGF0ZUlkOiBzdHJpbmc7XHJcblxyXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBHZXQgYSB0ZW1wbGF0ZSBhbmQgY3JlYXRlIGEgZG9jdW1lbnQgZm9yIHRlc3RpbmdcclxuICAgIGNvbnN0IHRlbXBsYXRlcyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZXRUZW1wbGF0ZXMoKTtcclxuICAgIHRlbXBsYXRlSWQgPSB0ZW1wbGF0ZXNbMF0uaWQ7XHJcblxyXG4gICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xyXG4gICAgICB0ZW1wbGF0ZUlkLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgYnVzaW5lc3NOYW1lOiAnVGVzdCBCdXNpbmVzcycsXHJcbiAgICAgICAgYnVzaW5lc3NUeXBlOiAnZS1jb21tZXJjZScsXHJcbiAgICAgICAgb3duZXJOYW1lOiAnSm9obiBEb2UnLFxyXG4gICAgICAgIGRhdGU6ICcyMDI0LTAxLTAxJyxcclxuICAgICAgICBhZGRpdGlvbmFsVGVybXM6ICdTdGFuZGFyZCB0ZXJtcyBhcHBseScsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgbGVnYWxTZXJ2aWNlLmdlbmVyYXRlRG9jdW1lbnQobW9ja0J1c2luZXNzSWQsIGRvY3VtZW50RGF0YSwgbW9ja1VzZXJJZCk7XHJcbiAgICBkb2N1bWVudElkID0gZG9jdW1lbnQuaWQ7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTaWduaW5nIFNlc3Npb24gTWFuYWdlbWVudCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGEgc2lnbmluZyBzZXNzaW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuY3JlYXRlU2lnbmluZ1Nlc3Npb24oZG9jdW1lbnRJZCwgbW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICBleHBlY3Qoc2Vzc2lvbikudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHNlc3Npb24uaWQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChzZXNzaW9uLmRvY3VtZW50SWQpLnRvQmUoZG9jdW1lbnRJZCk7XHJcbiAgICAgIGV4cGVjdChzZXNzaW9uLnVzZXJJZCkudG9CZShtb2NrVXNlcklkKTtcclxuICAgICAgZXhwZWN0KHNlc3Npb24uc3RhdHVzKS50b0JlKCdwZW5kaW5nJyk7XHJcbiAgICAgIGV4cGVjdChzZXNzaW9uLmNyZWF0ZWRBdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHNlc3Npb24uZXhwaXJlc0F0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3Qoc2Vzc2lvbi5leHBpcmVzQXQuZ2V0VGltZSgpKS50b0JlR3JlYXRlclRoYW4oc2Vzc2lvbi5jcmVhdGVkQXQuZ2V0VGltZSgpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgc2lnbmluZyBzZXNzaW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjcmVhdGVkU2Vzc2lvbiA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmNyZWF0ZVNpZ25pbmdTZXNzaW9uKGRvY3VtZW50SWQsIG1vY2tVc2VySWQpO1xyXG4gICAgICBjb25zdCByZXRyaWV2ZWRTZXNzaW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuZ2V0U2lnbmluZ1Nlc3Npb24oY3JlYXRlZFNlc3Npb24uaWQpO1xyXG5cclxuICAgICAgZXhwZWN0KHJldHJpZXZlZFNlc3Npb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXRyaWV2ZWRTZXNzaW9uLmlkKS50b0JlKGNyZWF0ZWRTZXNzaW9uLmlkKTtcclxuICAgICAgZXhwZWN0KHJldHJpZXZlZFNlc3Npb24uc3RhdHVzKS50b0JlKCdwZW5kaW5nJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBub24tZXhpc3RlbnQgc2Vzc2lvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgZXhwZWN0KHNpZ25pbmdTZXJ2aWNlLmdldFNpZ25pbmdTZXNzaW9uKCdub24tZXhpc3RlbnQtc2Vzc2lvbicpKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICAgJ1NpZ25pbmcgc2Vzc2lvbiBub3QgZm91bmQnXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gc2lnbmluZyBhbHJlYWR5IHNpZ25lZCBkb2N1bWVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmNyZWF0ZVNpZ25pbmdTZXNzaW9uKGRvY3VtZW50SWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgLy8gU2lnbiB0aGUgZG9jdW1lbnRcclxuICAgICAgYXdhaXQgc2lnbmluZ1NlcnZpY2Uuc2lnbkRvY3VtZW50KHNlc3Npb24uaWQsIG1vY2tVc2VySWQsIG1vY2tJcEFkZHJlc3MsIG1vY2tVc2VyQWdlbnQpO1xyXG5cclxuICAgICAgLy8gVHJ5IHRvIGNyZWF0ZSBhbm90aGVyIHNlc3Npb24gZm9yIHRoZSBzYW1lIGRvY3VtZW50XHJcbiAgICAgIGF3YWl0IGV4cGVjdChcclxuICAgICAgICBzaWduaW5nU2VydmljZS5jcmVhdGVTaWduaW5nU2Vzc2lvbihkb2N1bWVudElkLCBtb2NrVXNlcklkKVxyXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnRG9jdW1lbnQgaXMgYWxyZWFkeSBzaWduZWQnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnU2lnbmF0dXJlIENhcHR1cmUgd2l0aCBUaW1lc3RhbXAgYW5kIElQIExvZ2dpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhcHR1cmUgc2lnbmF0dXJlIHdpdGggdGltZXN0YW1wIGFuZCBJUCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xyXG4gICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYnVzaW5lc3NOYW1lOiAnQ2FwdHVyZSBUZXN0IEJ1c2luZXNzJyxcclxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ3R1dG9yaW5nJyxcclxuICAgICAgICAgIG93bmVyTmFtZTogJ0phbmUgRG9lJyxcclxuICAgICAgICAgIGRhdGU6ICcyMDI0LTAxLTAxJyxcclxuICAgICAgICAgIGFkZGl0aW9uYWxUZXJtczogJ0NhcHR1cmUgdGVzdCB0ZXJtcycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZW5lcmF0ZURvY3VtZW50KG1vY2tCdXNpbmVzc0lkLCBkb2N1bWVudERhdGEsIG1vY2tVc2VySWQpO1xyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuY3JlYXRlU2lnbmluZ1Nlc3Npb24oZG9jLmlkLCBtb2NrVXNlcklkKTtcclxuXHJcbiAgICAgIGNvbnN0IGNhcHR1cmUgPSBhd2FpdCBzaWduaW5nU2VydmljZS5jYXB0dXJlU2lnbmF0dXJlKFxyXG4gICAgICAgIHNlc3Npb24uaWQsXHJcbiAgICAgICAgbW9ja1VzZXJJZCxcclxuICAgICAgICBtb2NrSXBBZGRyZXNzLFxyXG4gICAgICAgIG1vY2tVc2VyQWdlbnRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChjYXB0dXJlKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY2FwdHVyZS5zZXNzaW9uSWQpLnRvQmUoc2Vzc2lvbi5pZCk7XHJcbiAgICAgIGV4cGVjdChjYXB0dXJlLmRvY3VtZW50SWQpLnRvQmUoZG9jLmlkKTtcclxuICAgICAgZXhwZWN0KGNhcHR1cmUudXNlcklkKS50b0JlKG1vY2tVc2VySWQpO1xyXG4gICAgICBleHBlY3QoY2FwdHVyZS5zaWduYXR1cmVIYXNoKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoY2FwdHVyZS50aW1lc3RhbXApLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChjYXB0dXJlLmlwQWRkcmVzcykudG9CZShtb2NrSXBBZGRyZXNzKTtcclxuICAgICAgZXhwZWN0KGNhcHR1cmUudXNlckFnZW50KS50b0JlKG1vY2tVc2VyQWdlbnQpO1xyXG4gICAgICBleHBlY3QoY2FwdHVyZS5zaWduYXR1cmVEYXRhLmFsZ29yaXRobSkudG9CZSgnU0hBMjU2Jyk7XHJcbiAgICAgIGV4cGVjdChjYXB0dXJlLnNpZ25hdHVyZURhdGEuaGFzaExlbmd0aCkudG9CZSg2NCk7XHJcbiAgICAgIGV4cGVjdChjYXB0dXJlLnNpZ25hdHVyZURhdGEudmVyaWZpZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHNpZ25hdHVyZSBoYXNoIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdmFsaWRIYXNoID0gJ2EnLnJlcGVhdCg2NCk7XHJcbiAgICAgIGNvbnN0IGludmFsaWRIYXNoID0gJ2ludmFsaWQtaGFzaCc7XHJcblxyXG4gICAgICBleHBlY3Qoc2lnbmluZ1NlcnZpY2UudmFsaWRhdGVTaWduYXR1cmVIYXNoKHZhbGlkSGFzaCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChzaWduaW5nU2VydmljZS52YWxpZGF0ZVNpZ25hdHVyZUhhc2goaW52YWxpZEhhc2gpKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBjYXB0dXJpbmcgc2lnbmF0dXJlIGZvciBub24tcGVuZGluZyBzZXNzaW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkb2N1bWVudERhdGEgPSB7XHJcbiAgICAgICAgdGVtcGxhdGVJZCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBidXNpbmVzc05hbWU6ICdOb24tUGVuZGluZyBUZXN0JyxcclxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ2dpZy1wbGF0Zm9ybScsXHJcbiAgICAgICAgICBvd25lck5hbWU6ICdUZXN0IE93bmVyJyxcclxuICAgICAgICAgIGRhdGU6ICcyMDI0LTAxLTAxJyxcclxuICAgICAgICAgIGFkZGl0aW9uYWxUZXJtczogJ1Rlc3QgdGVybXMnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBsZWdhbFNlcnZpY2UuZ2VuZXJhdGVEb2N1bWVudChtb2NrQnVzaW5lc3NJZCwgZG9jdW1lbnREYXRhLCBtb2NrVXNlcklkKTtcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmNyZWF0ZVNpZ25pbmdTZXNzaW9uKGRvYy5pZCwgbW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICAvLyBTaWduIHRoZSBkb2N1bWVudFxyXG4gICAgICBhd2FpdCBzaWduaW5nU2VydmljZS5zaWduRG9jdW1lbnQoc2Vzc2lvbi5pZCwgbW9ja1VzZXJJZCwgbW9ja0lwQWRkcmVzcywgbW9ja1VzZXJBZ2VudCk7XHJcblxyXG4gICAgICAvLyBUcnkgdG8gY2FwdHVyZSBzaWduYXR1cmUgYWdhaW5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIHNpZ25pbmdTZXJ2aWNlLmNhcHR1cmVTaWduYXR1cmUoc2Vzc2lvbi5pZCwgbW9ja1VzZXJJZCwgbW9ja0lwQWRkcmVzcywgbW9ja1VzZXJBZ2VudClcclxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1NpZ25pbmcgc2Vzc2lvbiBpcyBub3QgcGVuZGluZycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEb2N1bWVudCBTaWduaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBzaWduIGRvY3VtZW50IHdpdGggdGltZXN0YW1wIGFuZCBJUCBsb2dnaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkb2N1bWVudERhdGEgPSB7XHJcbiAgICAgICAgdGVtcGxhdGVJZCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBidXNpbmVzc05hbWU6ICdTaWduIFRlc3QgQnVzaW5lc3MnLFxyXG4gICAgICAgICAgYnVzaW5lc3NUeXBlOiAncmlkZS1zaGFyaW5nJyxcclxuICAgICAgICAgIG93bmVyTmFtZTogJ1NpZ24gT3duZXInLFxyXG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgICAgYWRkaXRpb25hbFRlcm1zOiAnU2lnbiB0ZXN0IHRlcm1zJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgZG9jID0gYXdhaXQgbGVnYWxTZXJ2aWNlLmdlbmVyYXRlRG9jdW1lbnQobW9ja0J1c2luZXNzSWQsIGRvY3VtZW50RGF0YSwgbW9ja1VzZXJJZCk7XHJcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzaWduaW5nU2VydmljZS5jcmVhdGVTaWduaW5nU2Vzc2lvbihkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgY29uc3Qgc2lnbmVkRG9jID0gYXdhaXQgc2lnbmluZ1NlcnZpY2Uuc2lnbkRvY3VtZW50KFxyXG4gICAgICAgIHNlc3Npb24uaWQsXHJcbiAgICAgICAgbW9ja1VzZXJJZCxcclxuICAgICAgICBtb2NrSXBBZGRyZXNzLFxyXG4gICAgICAgIG1vY2tVc2VyQWdlbnRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChzaWduZWREb2MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChzaWduZWREb2Muc3RhdHVzKS50b0JlKCdzaWduZWQnKTtcclxuICAgICAgZXhwZWN0KHNpZ25lZERvYy5zaWduZWRBdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHNpZ25lZERvYy5zaWduZXJJZCkudG9CZShtb2NrVXNlcklkKTtcclxuICAgICAgZXhwZWN0KHNpZ25lZERvYy5zaWduYXR1cmVIYXNoKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3Qoc2lnbmVkRG9jLmlwQWRkcmVzcykudG9CZShtb2NrSXBBZGRyZXNzKTtcclxuICAgICAgZXhwZWN0KHNpZ25lZERvYy51c2VyQWdlbnQpLnRvQmUobW9ja1VzZXJBZ2VudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gdW5hdXRob3JpemVkIHVzZXIgdHJpZXMgdG8gc2lnbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xyXG4gICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYnVzaW5lc3NOYW1lOiAnVW5hdXRob3JpemVkIFRlc3QnLFxyXG4gICAgICAgICAgYnVzaW5lc3NUeXBlOiAnZS1jb21tZXJjZScsXHJcbiAgICAgICAgICBvd25lck5hbWU6ICdVbmF1dGggT3duZXInLFxyXG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgICAgYWRkaXRpb25hbFRlcm1zOiAnVW5hdXRoIHRlcm1zJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgZG9jID0gYXdhaXQgbGVnYWxTZXJ2aWNlLmdlbmVyYXRlRG9jdW1lbnQobW9ja0J1c2luZXNzSWQsIGRvY3VtZW50RGF0YSwgbW9ja1VzZXJJZCk7XHJcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzaWduaW5nU2VydmljZS5jcmVhdGVTaWduaW5nU2Vzc2lvbihkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIHNpZ25pbmdTZXJ2aWNlLnNpZ25Eb2N1bWVudChzZXNzaW9uLmlkLCAnZGlmZmVyZW50LXVzZXInLCBtb2NrSXBBZGRyZXNzLCBtb2NrVXNlckFnZW50KVxyXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnVW5hdXRob3JpemVkIHRvIHNpZ24gdGhpcyBkb2N1bWVudCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciB3aGVuIHNpZ25pbmcgbm9uLXBlbmRpbmcgc2Vzc2lvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xyXG4gICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYnVzaW5lc3NOYW1lOiAnTm9uLVBlbmRpbmcgU2lnbiBUZXN0JyxcclxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ3R1dG9yaW5nJyxcclxuICAgICAgICAgIG93bmVyTmFtZTogJ05vbi1QZW5kaW5nIE93bmVyJyxcclxuICAgICAgICAgIGRhdGU6ICcyMDI0LTAxLTAxJyxcclxuICAgICAgICAgIGFkZGl0aW9uYWxUZXJtczogJ05vbi1wZW5kaW5nIHRlcm1zJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgZG9jID0gYXdhaXQgbGVnYWxTZXJ2aWNlLmdlbmVyYXRlRG9jdW1lbnQobW9ja0J1c2luZXNzSWQsIGRvY3VtZW50RGF0YSwgbW9ja1VzZXJJZCk7XHJcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzaWduaW5nU2VydmljZS5jcmVhdGVTaWduaW5nU2Vzc2lvbihkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgLy8gU2lnbiBvbmNlXHJcbiAgICAgIGF3YWl0IHNpZ25pbmdTZXJ2aWNlLnNpZ25Eb2N1bWVudChzZXNzaW9uLmlkLCBtb2NrVXNlcklkLCBtb2NrSXBBZGRyZXNzLCBtb2NrVXNlckFnZW50KTtcclxuXHJcbiAgICAgIC8vIFRyeSB0byBzaWduIGFnYWluXHJcbiAgICAgIGF3YWl0IGV4cGVjdChcclxuICAgICAgICBzaWduaW5nU2VydmljZS5zaWduRG9jdW1lbnQoc2Vzc2lvbi5pZCwgbW9ja1VzZXJJZCwgbW9ja0lwQWRkcmVzcywgbW9ja1VzZXJBZ2VudClcclxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1NpZ25pbmcgc2Vzc2lvbiBpcyBub3QgcGVuZGluZycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTaWduYXR1cmUgVmVyaWZpY2F0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2ZXJpZnkgdmFsaWQgc2lnbmF0dXJlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkb2N1bWVudERhdGEgPSB7XHJcbiAgICAgICAgdGVtcGxhdGVJZCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBidXNpbmVzc05hbWU6ICdWZXJpZnkgVGVzdCBCdXNpbmVzcycsXHJcbiAgICAgICAgICBidXNpbmVzc1R5cGU6ICdnaWctcGxhdGZvcm0nLFxyXG4gICAgICAgICAgb3duZXJOYW1lOiAnVmVyaWZ5IE93bmVyJyxcclxuICAgICAgICAgIGRhdGU6ICcyMDI0LTAxLTAxJyxcclxuICAgICAgICAgIGFkZGl0aW9uYWxUZXJtczogJ1ZlcmlmeSB0ZXN0IHRlcm1zJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgZG9jID0gYXdhaXQgbGVnYWxTZXJ2aWNlLmdlbmVyYXRlRG9jdW1lbnQobW9ja0J1c2luZXNzSWQsIGRvY3VtZW50RGF0YSwgbW9ja1VzZXJJZCk7XHJcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzaWduaW5nU2VydmljZS5jcmVhdGVTaWduaW5nU2Vzc2lvbihkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgY29uc3Qgc2lnbmVkRG9jID0gYXdhaXQgc2lnbmluZ1NlcnZpY2Uuc2lnbkRvY3VtZW50KFxyXG4gICAgICAgIHNlc3Npb24uaWQsXHJcbiAgICAgICAgbW9ja1VzZXJJZCxcclxuICAgICAgICBtb2NrSXBBZGRyZXNzLFxyXG4gICAgICAgIG1vY2tVc2VyQWdlbnRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLnZlcmlmeVNpZ25hdHVyZShkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgZXhwZWN0KHZlcmlmaWNhdGlvbikudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHZlcmlmaWNhdGlvbi52YWxpZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHZlcmlmaWNhdGlvbi5zaWduZWRBdCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHZlcmlmaWNhdGlvbi5zaWduZXJJZCkudG9CZShtb2NrVXNlcklkKTtcclxuICAgICAgZXhwZWN0KHZlcmlmaWNhdGlvbi5pcEFkZHJlc3MpLnRvQmUobW9ja0lwQWRkcmVzcyk7XHJcbiAgICAgIGV4cGVjdCh2ZXJpZmljYXRpb24udXNlckFnZW50KS50b0JlKG1vY2tVc2VyQWdlbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2ZXJpZnkgc2lnbmF0dXJlIGludGVncml0eScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xyXG4gICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYnVzaW5lc3NOYW1lOiAnSW50ZWdyaXR5IFRlc3QgQnVzaW5lc3MnLFxyXG4gICAgICAgICAgYnVzaW5lc3NUeXBlOiAnZS1jb21tZXJjZScsXHJcbiAgICAgICAgICBvd25lck5hbWU6ICdJbnRlZ3JpdHkgT3duZXInLFxyXG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgICAgYWRkaXRpb25hbFRlcm1zOiAnSW50ZWdyaXR5IHRlc3QgdGVybXMnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBsZWdhbFNlcnZpY2UuZ2VuZXJhdGVEb2N1bWVudChtb2NrQnVzaW5lc3NJZCwgZG9jdW1lbnREYXRhLCBtb2NrVXNlcklkKTtcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmNyZWF0ZVNpZ25pbmdTZXNzaW9uKGRvYy5pZCwgbW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICBjb25zdCBzaWduZWREb2MgPSBhd2FpdCBzaWduaW5nU2VydmljZS5zaWduRG9jdW1lbnQoXHJcbiAgICAgICAgc2Vzc2lvbi5pZCxcclxuICAgICAgICBtb2NrVXNlcklkLFxyXG4gICAgICAgIG1vY2tJcEFkZHJlc3MsXHJcbiAgICAgICAgbW9ja1VzZXJBZ2VudFxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UudmVyaWZ5U2lnbmF0dXJlSW50ZWdyaXR5KFxyXG4gICAgICAgIGRvYy5pZCxcclxuICAgICAgICBtb2NrVXNlcklkLFxyXG4gICAgICAgIHNpZ25lZERvYy5zaWduYXR1cmVIYXNoIVxyXG4gICAgICApO1xyXG5cclxuICAgICAgZXhwZWN0KHZlcmlmaWNhdGlvbikudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHZlcmlmaWNhdGlvbi52YWxpZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHZlcmlmaWNhdGlvbi5kb2N1bWVudElkKS50b0JlKGRvYy5pZCk7XHJcbiAgICAgIGV4cGVjdCh2ZXJpZmljYXRpb24udmVyaWZpY2F0aW9uVGltZXN0YW1wKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgaW52YWxpZCBzaWduYXR1cmUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRvY3VtZW50RGF0YSA9IHtcclxuICAgICAgICB0ZW1wbGF0ZUlkLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGJ1c2luZXNzTmFtZTogJ0ludmFsaWQgU2lnIFRlc3QnLFxyXG4gICAgICAgICAgYnVzaW5lc3NUeXBlOiAncmlkZS1zaGFyaW5nJyxcclxuICAgICAgICAgIG93bmVyTmFtZTogJ0ludmFsaWQgT3duZXInLFxyXG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgICAgYWRkaXRpb25hbFRlcm1zOiAnSW52YWxpZCBzaWcgdGVybXMnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBkb2MgPSBhd2FpdCBsZWdhbFNlcnZpY2UuZ2VuZXJhdGVEb2N1bWVudChtb2NrQnVzaW5lc3NJZCwgZG9jdW1lbnREYXRhLCBtb2NrVXNlcklkKTtcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmNyZWF0ZVNpZ25pbmdTZXNzaW9uKGRvYy5pZCwgbW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICBhd2FpdCBzaWduaW5nU2VydmljZS5zaWduRG9jdW1lbnQoc2Vzc2lvbi5pZCwgbW9ja1VzZXJJZCwgbW9ja0lwQWRkcmVzcywgbW9ja1VzZXJBZ2VudCk7XHJcblxyXG4gICAgICBjb25zdCBpbnZhbGlkSGFzaCA9ICdiJy5yZXBlYXQoNjQpO1xyXG4gICAgICBjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBzaWduaW5nU2VydmljZS52ZXJpZnlTaWduYXR1cmVJbnRlZ3JpdHkoXHJcbiAgICAgICAgZG9jLmlkLFxyXG4gICAgICAgIG1vY2tVc2VySWQsXHJcbiAgICAgICAgaW52YWxpZEhhc2hcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdCh2ZXJpZmljYXRpb24udmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QodmVyaWZpY2F0aW9uLmRldGFpbHMpLnRvQ29udGFpbignbWlzbWF0Y2gnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQXVkaXQgVHJhaWwnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHNpZ25pbmcgaGlzdG9yeScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xyXG4gICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYnVzaW5lc3NOYW1lOiAnSGlzdG9yeSBUZXN0IEJ1c2luZXNzJyxcclxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ3R1dG9yaW5nJyxcclxuICAgICAgICAgIG93bmVyTmFtZTogJ0hpc3RvcnkgT3duZXInLFxyXG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgICAgYWRkaXRpb25hbFRlcm1zOiAnSGlzdG9yeSB0ZXN0IHRlcm1zJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgZG9jID0gYXdhaXQgbGVnYWxTZXJ2aWNlLmdlbmVyYXRlRG9jdW1lbnQobW9ja0J1c2luZXNzSWQsIGRvY3VtZW50RGF0YSwgbW9ja1VzZXJJZCk7XHJcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzaWduaW5nU2VydmljZS5jcmVhdGVTaWduaW5nU2Vzc2lvbihkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgYXdhaXQgc2lnbmluZ1NlcnZpY2Uuc2lnbkRvY3VtZW50KHNlc3Npb24uaWQsIG1vY2tVc2VySWQsIG1vY2tJcEFkZHJlc3MsIG1vY2tVc2VyQWdlbnQpO1xyXG5cclxuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmdldFNpZ25pbmdIaXN0b3J5KGRvYy5pZCwgbW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShoaXN0b3J5KSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdKS50b0hhdmVQcm9wZXJ0eSgnYWN0aW9uJyk7XHJcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdKS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJyk7XHJcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdKS50b0hhdmVQcm9wZXJ0eSgnZGV0YWlscycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBnZXQgY29tcGxldGUgYXVkaXQgdHJhaWwgZm9yIHNpZ25lZCBkb2N1bWVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xyXG4gICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYnVzaW5lc3NOYW1lOiAnQ29tcGxldGUgQXVkaXQgVGVzdCcsXHJcbiAgICAgICAgICBidXNpbmVzc1R5cGU6ICdnaWctcGxhdGZvcm0nLFxyXG4gICAgICAgICAgb3duZXJOYW1lOiAnQXVkaXQgT3duZXInLFxyXG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgICAgYWRkaXRpb25hbFRlcm1zOiAnQXVkaXQgdGVzdCB0ZXJtcycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZW5lcmF0ZURvY3VtZW50KG1vY2tCdXNpbmVzc0lkLCBkb2N1bWVudERhdGEsIG1vY2tVc2VySWQpO1xyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuY3JlYXRlU2lnbmluZ1Nlc3Npb24oZG9jLmlkLCBtb2NrVXNlcklkKTtcclxuXHJcbiAgICAgIGNvbnN0IHNpZ25lZERvYyA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLnNpZ25Eb2N1bWVudChcclxuICAgICAgICBzZXNzaW9uLmlkLFxyXG4gICAgICAgIG1vY2tVc2VySWQsXHJcbiAgICAgICAgbW9ja0lwQWRkcmVzcyxcclxuICAgICAgICBtb2NrVXNlckFnZW50XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBhdWRpdFRyYWlsID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuZ2V0U2lnbmVkRG9jdW1lbnRBdWRpdFRyYWlsKGRvYy5pZCwgbW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICBleHBlY3QoYXVkaXRUcmFpbCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGF1ZGl0VHJhaWwuZG9jdW1lbnRJZCkudG9CZShkb2MuaWQpO1xyXG4gICAgICBleHBlY3QoYXVkaXRUcmFpbC5hdWRpdFRyYWlsKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhdWRpdFRyYWlsLmF1ZGl0VHJhaWwpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoYXVkaXRUcmFpbC5zaWduYXR1cmVWZXJpZmljYXRpb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChhdWRpdFRyYWlsLnNpZ25hdHVyZVZlcmlmaWNhdGlvbi5pc1NpZ25lZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGF1ZGl0VHJhaWwuc2lnbmF0dXJlVmVyaWZpY2F0aW9uLnNpZ25lZEF0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QoYXVkaXRUcmFpbC5zaWduYXR1cmVWZXJpZmljYXRpb24uc2lnbmVkQnkpLnRvQmUobW9ja1VzZXJJZCk7XHJcbiAgICAgIGV4cGVjdChhdWRpdFRyYWlsLnNpZ25hdHVyZVZlcmlmaWNhdGlvbi5pcEFkZHJlc3MpLnRvQmUobW9ja0lwQWRkcmVzcyk7XHJcbiAgICAgIGV4cGVjdChhdWRpdFRyYWlsLnNpZ25hdHVyZVZlcmlmaWNhdGlvbi51c2VyQWdlbnQpLnRvQmUobW9ja1VzZXJBZ2VudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBhdWRpdCB0cmFpbCBhcyBDU1YnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRvY3VtZW50RGF0YSA9IHtcclxuICAgICAgICB0ZW1wbGF0ZUlkLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGJ1c2luZXNzTmFtZTogJ0NTViBFeHBvcnQgVGVzdCcsXHJcbiAgICAgICAgICBidXNpbmVzc1R5cGU6ICdlLWNvbW1lcmNlJyxcclxuICAgICAgICAgIG93bmVyTmFtZTogJ0NTViBPd25lcicsXHJcbiAgICAgICAgICBkYXRlOiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgICBhZGRpdGlvbmFsVGVybXM6ICdDU1YgdGVzdCB0ZXJtcycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZW5lcmF0ZURvY3VtZW50KG1vY2tCdXNpbmVzc0lkLCBkb2N1bWVudERhdGEsIG1vY2tVc2VySWQpO1xyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuY3JlYXRlU2lnbmluZ1Nlc3Npb24oZG9jLmlkLCBtb2NrVXNlcklkKTtcclxuXHJcbiAgICAgIGF3YWl0IHNpZ25pbmdTZXJ2aWNlLnNpZ25Eb2N1bWVudChzZXNzaW9uLmlkLCBtb2NrVXNlcklkLCBtb2NrSXBBZGRyZXNzLCBtb2NrVXNlckFnZW50KTtcclxuXHJcbiAgICAgIGNvbnN0IGNzdiA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmV4cG9ydEF1ZGl0VHJhaWxBc0NTVihkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgZXhwZWN0KHR5cGVvZiBjc3YpLnRvQmUoJ3N0cmluZycpO1xyXG4gICAgICBleHBlY3QoY3N2KS50b0NvbnRhaW4oJ0FjdGlvbicpO1xyXG4gICAgICBleHBlY3QoY3N2KS50b0NvbnRhaW4oJ1RpbWVzdGFtcCcpO1xyXG4gICAgICBleHBlY3QoY3N2KS50b0NvbnRhaW4oJ1VzZXIgSUQnKTtcclxuICAgICAgZXhwZWN0KGNzdikudG9Db250YWluKCdJUCBBZGRyZXNzJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1Nlc3Npb24gTWFuYWdlbWVudCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZXh0ZW5kIHNpZ25pbmcgc2Vzc2lvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xyXG4gICAgICAgIHRlbXBsYXRlSWQsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYnVzaW5lc3NOYW1lOiAnRXh0ZW5kIFRlc3QgQnVzaW5lc3MnLFxyXG4gICAgICAgICAgYnVzaW5lc3NUeXBlOiAncmlkZS1zaGFyaW5nJyxcclxuICAgICAgICAgIG93bmVyTmFtZTogJ0V4dGVuZCBPd25lcicsXHJcbiAgICAgICAgICBkYXRlOiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgICBhZGRpdGlvbmFsVGVybXM6ICdFeHRlbmQgdGVzdCB0ZXJtcycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZW5lcmF0ZURvY3VtZW50KG1vY2tCdXNpbmVzc0lkLCBkb2N1bWVudERhdGEsIG1vY2tVc2VySWQpO1xyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuY3JlYXRlU2lnbmluZ1Nlc3Npb24oZG9jLmlkLCBtb2NrVXNlcklkKTtcclxuXHJcbiAgICAgIGNvbnN0IG9yaWdpbmFsRXhwaXJ5ID0gc2Vzc2lvbi5leHBpcmVzQXQ7XHJcbiAgICAgIGNvbnN0IGV4dGVuZGVkID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuZXh0ZW5kU2lnbmluZ1Nlc3Npb24oc2Vzc2lvbi5pZCwgbW9ja1VzZXJJZCk7XHJcblxyXG4gICAgICBleHBlY3QoZXh0ZW5kZWQuZXhwaXJlc0F0LmdldFRpbWUoKSkudG9CZUdyZWF0ZXJUaGFuKG9yaWdpbmFsRXhwaXJ5LmdldFRpbWUoKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNhbmNlbCBzaWduaW5nIHNlc3Npb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRvY3VtZW50RGF0YSA9IHtcclxuICAgICAgICB0ZW1wbGF0ZUlkLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGJ1c2luZXNzTmFtZTogJ0NhbmNlbCBUZXN0IEJ1c2luZXNzJyxcclxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ3R1dG9yaW5nJyxcclxuICAgICAgICAgIG93bmVyTmFtZTogJ0NhbmNlbCBPd25lcicsXHJcbiAgICAgICAgICBkYXRlOiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgICBhZGRpdGlvbmFsVGVybXM6ICdDYW5jZWwgdGVzdCB0ZXJtcycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZW5lcmF0ZURvY3VtZW50KG1vY2tCdXNpbmVzc0lkLCBkb2N1bWVudERhdGEsIG1vY2tVc2VySWQpO1xyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuY3JlYXRlU2lnbmluZ1Nlc3Npb24oZG9jLmlkLCBtb2NrVXNlcklkKTtcclxuXHJcbiAgICAgIGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmNhbmNlbFNpZ25pbmdTZXNzaW9uKHNlc3Npb24uaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHNpZ25pbmdTZXJ2aWNlLmdldFNpZ25pbmdTZXNzaW9uKHNlc3Npb24uaWQpKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICAgJ1NpZ25pbmcgc2Vzc2lvbiBub3QgZm91bmQnXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGdldCB1c2VyIHNpZ25pbmcgc2Vzc2lvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRvY3VtZW50RGF0YSA9IHtcclxuICAgICAgICB0ZW1wbGF0ZUlkLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGJ1c2luZXNzTmFtZTogJ1VzZXIgU2Vzc2lvbnMgVGVzdCcsXHJcbiAgICAgICAgICBidXNpbmVzc1R5cGU6ICdnaWctcGxhdGZvcm0nLFxyXG4gICAgICAgICAgb3duZXJOYW1lOiAnU2Vzc2lvbnMgT3duZXInLFxyXG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgICAgYWRkaXRpb25hbFRlcm1zOiAnU2Vzc2lvbnMgdGVzdCB0ZXJtcycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZW5lcmF0ZURvY3VtZW50KG1vY2tCdXNpbmVzc0lkLCBkb2N1bWVudERhdGEsIG1vY2tVc2VySWQpO1xyXG4gICAgICBhd2FpdCBzaWduaW5nU2VydmljZS5jcmVhdGVTaWduaW5nU2Vzc2lvbihkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBzaWduaW5nU2VydmljZS5nZXRVc2VyU2lnbmluZ1Nlc3Npb25zKG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc2Vzc2lvbnMpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3Qoc2Vzc2lvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChzZXNzaW9uc1swXS51c2VySWQpLnRvQmUobW9ja1VzZXJJZCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1NlY3VyaXR5IGFuZCBTdGF0aXN0aWNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBzZXNzaW9uIHNlY3VyaXR5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkb2N1bWVudERhdGEgPSB7XHJcbiAgICAgICAgdGVtcGxhdGVJZCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBidXNpbmVzc05hbWU6ICdTZWN1cml0eSBUZXN0IEJ1c2luZXNzJyxcclxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ2UtY29tbWVyY2UnLFxyXG4gICAgICAgICAgb3duZXJOYW1lOiAnU2VjdXJpdHkgT3duZXInLFxyXG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgICAgYWRkaXRpb25hbFRlcm1zOiAnU2VjdXJpdHkgdGVzdCB0ZXJtcycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IGxlZ2FsU2VydmljZS5nZW5lcmF0ZURvY3VtZW50KG1vY2tCdXNpbmVzc0lkLCBkb2N1bWVudERhdGEsIG1vY2tVc2VySWQpO1xyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuY3JlYXRlU2lnbmluZ1Nlc3Npb24oZG9jLmlkLCBtb2NrVXNlcklkKTtcclxuXHJcbiAgICAgIGNvbnN0IHNlY3VyaXR5ID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UudmFsaWRhdGVTZXNzaW9uU2VjdXJpdHkoc2Vzc2lvbi5pZCk7XHJcblxyXG4gICAgICBleHBlY3Qoc2VjdXJpdHkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChzZWN1cml0eS5zZXNzaW9uSWQpLnRvQmUoc2Vzc2lvbi5pZCk7XHJcbiAgICAgIGV4cGVjdChzZWN1cml0eS5pc1NlY3VyZSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc2VjdXJpdHkuaXNzdWVzKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc2VjdXJpdHkucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ2V0IHNpZ25pbmcgc3RhdGlzdGljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBzaWduaW5nU2VydmljZS5nZXRTaWduaW5nU3RhdHMoKTtcclxuXHJcbiAgICAgIGV4cGVjdChzdGF0cykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsU2Vzc2lvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5wZW5kaW5nU2Vzc2lvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5zaWduZWRTZXNzaW9ucykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLmV4cGlyZWRTZXNzaW9ucykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VTaWduaW5nVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZ2V0IHNpZ25pbmcgc3RhdGlzdGljcyB3aXRoIHNlY3VyaXR5IG1ldHJpY3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgc2lnbmluZ1NlcnZpY2UuZ2V0U2lnbmluZ1N0YXRpc3RpY3MoKTtcclxuXHJcbiAgICAgIGV4cGVjdChzdGF0cykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsU2Vzc2lvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5zZWN1cml0eU1ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5zZWN1cml0eU1ldHJpY3Muc2Vzc2lvbnNXaXRoSVBMb2dnaW5nKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgICBleHBlY3Qoc3RhdHMuc2VjdXJpdHlNZXRyaWNzLnNlc3Npb25zV2l0aFVzZXJBZ2VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnNlY3VyaXR5TWV0cmljcy5zZXNzaW9uc1dpdGhUaW1lc3RhbXApLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNsZWFudXAgZXhwaXJlZCBzZXNzaW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2xlYW5lZCA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmNsZWFudXBFeHBpcmVkU2Vzc2lvbnMoKTtcclxuXHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgY2xlYW5lZCkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdChjbGVhbmVkKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTaWduYXR1cmUgQ2FwdHVyZSBEZXRhaWxzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBnZXQgZG9jdW1lbnQgc2lnbmF0dXJlIGNhcHR1cmVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkb2N1bWVudERhdGEgPSB7XHJcbiAgICAgICAgdGVtcGxhdGVJZCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBidXNpbmVzc05hbWU6ICdDYXB0dXJlcyBUZXN0IEJ1c2luZXNzJyxcclxuICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ3JpZGUtc2hhcmluZycsXHJcbiAgICAgICAgICBvd25lck5hbWU6ICdDYXB0dXJlcyBPd25lcicsXHJcbiAgICAgICAgICBkYXRlOiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgICBhZGRpdGlvbmFsVGVybXM6ICdDYXB0dXJlcyB0ZXN0IHRlcm1zJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgZG9jID0gYXdhaXQgbGVnYWxTZXJ2aWNlLmdlbmVyYXRlRG9jdW1lbnQobW9ja0J1c2luZXNzSWQsIGRvY3VtZW50RGF0YSwgbW9ja1VzZXJJZCk7XHJcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzaWduaW5nU2VydmljZS5jcmVhdGVTaWduaW5nU2Vzc2lvbihkb2MuaWQsIG1vY2tVc2VySWQpO1xyXG5cclxuICAgICAgYXdhaXQgc2lnbmluZ1NlcnZpY2UuY2FwdHVyZVNpZ25hdHVyZShcclxuICAgICAgICBzZXNzaW9uLmlkLFxyXG4gICAgICAgIG1vY2tVc2VySWQsXHJcbiAgICAgICAgbW9ja0lwQWRkcmVzcyxcclxuICAgICAgICBtb2NrVXNlckFnZW50XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBjYXB0dXJlcyA9IGF3YWl0IHNpZ25pbmdTZXJ2aWNlLmdldERvY3VtZW50U2lnbmF0dXJlQ2FwdHVyZXMoZG9jLmlkKTtcclxuXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGNhcHR1cmVzKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGNhcHR1cmVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3QoY2FwdHVyZXNbMF0uZG9jdW1lbnRJZCkudG9CZShkb2MuaWQpO1xyXG4gICAgICBleHBlY3QoY2FwdHVyZXNbMF0udXNlcklkKS50b0JlKG1vY2tVc2VySWQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJc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