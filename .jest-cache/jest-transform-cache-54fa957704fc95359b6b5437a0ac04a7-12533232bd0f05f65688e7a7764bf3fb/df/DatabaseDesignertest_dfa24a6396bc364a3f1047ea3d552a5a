4b31b8d2d06d0031d0aa380a167a5191
"use strict";

var _DatabaseDesigner = require("../DatabaseDesigner");
describe('DatabaseDesigner', () => {
  let designer;
  beforeEach(() => {
    designer = new _DatabaseDesigner.DatabaseDesigner();
  });
  describe('generateSchema', () => {
    it('should generate basic Prisma schema with models', () => {
      const schema = {
        models: [{
          id: 'model1',
          name: 'User',
          fields: [{
            id: 'f1',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }, {
            id: 'f2',
            name: 'email',
            type: 'String',
            required: true,
            unique: true
          }, {
            id: 'f3',
            name: 'name',
            type: 'String',
            required: false
          }]
        }],
        relations: []
      };
      const result = designer.generateSchema(schema, '/test');
      expect(result).toHaveLength(1);
      expect(result[0].path).toContain('schema.prisma');
      expect(result[0].content).toContain('model User');
      expect(result[0].content).toContain('id           String @id');
      expect(result[0].content).toContain('email        String @unique');
      expect(result[0].content).toContain('name         String?');
    });
    it('should generate schema with 1:N relationships', () => {
      const schema = {
        models: [{
          id: 'model1',
          name: 'User',
          fields: [{
            id: 'f1',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }, {
            id: 'f2',
            name: 'email',
            type: 'String',
            required: true
          }]
        }, {
          id: 'model2',
          name: 'Post',
          fields: [{
            id: 'f3',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }, {
            id: 'f4',
            name: 'title',
            type: 'String',
            required: true
          }]
        }],
        relations: [{
          id: 'rel1',
          sourceModel: 'User',
          targetModel: 'Post',
          type: '1:N',
          sourceField: 'posts',
          targetField: 'author'
        }]
      };
      const result = designer.generateSchema(schema, '/test');
      expect(result[0].content).toContain('posts        Post[]');
      expect(result[0].content).toContain('author       User?');
      expect(result[0].content).toContain('authorId     String?');
    });
    it('should generate schema with cascade delete', () => {
      const schema = {
        models: [{
          id: 'model1',
          name: 'User',
          fields: [{
            id: 'f1',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }]
        }, {
          id: 'model2',
          name: 'Post',
          fields: [{
            id: 'f2',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }]
        }],
        relations: [{
          id: 'rel1',
          sourceModel: 'User',
          targetModel: 'Post',
          type: '1:N',
          onDelete: 'Cascade'
        }]
      };
      const result = designer.generateSchema(schema, '/test');
      expect(result[0].content).toContain('onDelete: Cascade');
    });
  });
  describe('generateMigration', () => {
    it('should generate SQL migration file', () => {
      const schema = {
        models: [{
          id: 'model1',
          name: 'User',
          fields: [{
            id: 'f1',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }, {
            id: 'f2',
            name: 'email',
            type: 'String',
            required: true,
            unique: true
          }, {
            id: 'f3',
            name: 'createdAt',
            type: 'DateTime',
            required: true,
            default: 'now()'
          }]
        }],
        relations: []
      };
      const result = designer.generateMigration(schema, 'init', '/test');
      expect(result).toHaveLength(1);
      expect(result[0].path).toContain('migration.sql');
      expect(result[0].content).toContain('CREATE TABLE "User"');
      expect(result[0].content).toContain('"id" TEXT NOT NULL PRIMARY KEY');
      expect(result[0].content).toContain('"email" TEXT NOT NULL UNIQUE');
      expect(result[0].content).toContain('"createdAt" TIMESTAMP(3) NOT NULL DEFAULT NOW()');
    });
    it('should generate foreign key constraints', () => {
      const schema = {
        models: [{
          id: 'model1',
          name: 'User',
          fields: [{
            id: 'f1',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }]
        }, {
          id: 'model2',
          name: 'Post',
          fields: [{
            id: 'f2',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }]
        }],
        relations: [{
          id: 'rel1',
          sourceModel: 'Post',
          targetModel: 'User',
          type: '1:N',
          sourceField: 'author',
          onDelete: 'Cascade'
        }]
      };
      const result = designer.generateMigration(schema, 'add_posts', '/test');
      expect(result[0].content).toContain('AddForeignKey');
      expect(result[0].content).toContain('FOREIGN KEY');
      expect(result[0].content).toContain('ON DELETE CASCADE');
    });
  });
  describe('previewMigration', () => {
    it('should preview migration SQL', () => {
      const schema = {
        models: [{
          id: 'model1',
          name: 'Product',
          fields: [{
            id: 'f1',
            name: 'id',
            type: 'String',
            required: true,
            isPrimaryKey: true
          }, {
            id: 'f2',
            name: 'name',
            type: 'String',
            required: true
          }, {
            id: 'f3',
            name: 'price',
            type: 'Float',
            required: true
          }, {
            id: 'f4',
            name: 'inStock',
            type: 'Boolean',
            required: true
          }]
        }],
        relations: []
      };
      const preview = designer.previewMigration(schema);
      expect(preview).toContain('CREATE TABLE "Product"');
      expect(preview).toContain('"name" TEXT NOT NULL');
      expect(preview).toContain('"price" DOUBLE PRECISION NOT NULL');
      expect(preview).toContain('"inStock" BOOLEAN NOT NULL');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfRGF0YWJhc2VEZXNpZ25lciIsInJlcXVpcmUiLCJkZXNjcmliZSIsImRlc2lnbmVyIiwiYmVmb3JlRWFjaCIsIkRhdGFiYXNlRGVzaWduZXIiLCJpdCIsInNjaGVtYSIsIm1vZGVscyIsImlkIiwibmFtZSIsImZpZWxkcyIsInR5cGUiLCJyZXF1aXJlZCIsImlzUHJpbWFyeUtleSIsInVuaXF1ZSIsInJlbGF0aW9ucyIsInJlc3VsdCIsImdlbmVyYXRlU2NoZW1hIiwiZXhwZWN0IiwidG9IYXZlTGVuZ3RoIiwicGF0aCIsInRvQ29udGFpbiIsImNvbnRlbnQiLCJzb3VyY2VNb2RlbCIsInRhcmdldE1vZGVsIiwic291cmNlRmllbGQiLCJ0YXJnZXRGaWVsZCIsIm9uRGVsZXRlIiwiZGVmYXVsdCIsImdlbmVyYXRlTWlncmF0aW9uIiwicHJldmlldyIsInByZXZpZXdNaWdyYXRpb24iXSwic291cmNlcyI6WyJEYXRhYmFzZURlc2lnbmVyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YWJhc2VEZXNpZ25lciwgRGF0YWJhc2VTY2hlbWEgfSBmcm9tICcuLi9EYXRhYmFzZURlc2lnbmVyJztcblxuZGVzY3JpYmUoJ0RhdGFiYXNlRGVzaWduZXInLCAoKSA9PiB7XG4gIGxldCBkZXNpZ25lcjogRGF0YWJhc2VEZXNpZ25lcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBkZXNpZ25lciA9IG5ldyBEYXRhYmFzZURlc2lnbmVyKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZW5lcmF0ZVNjaGVtYScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGJhc2ljIFByaXNtYSBzY2hlbWEgd2l0aCBtb2RlbHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzY2hlbWE6IERhdGFiYXNlU2NoZW1hID0ge1xuICAgICAgICBtb2RlbHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ21vZGVsMScsXG4gICAgICAgICAgICBuYW1lOiAnVXNlcicsXG4gICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgeyBpZDogJ2YxJywgbmFtZTogJ2lkJywgdHlwZTogJ1N0cmluZycsIHJlcXVpcmVkOiB0cnVlLCBpc1ByaW1hcnlLZXk6IHRydWUgfSxcbiAgICAgICAgICAgICAgeyBpZDogJ2YyJywgbmFtZTogJ2VtYWlsJywgdHlwZTogJ1N0cmluZycsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcbiAgICAgICAgICAgICAgeyBpZDogJ2YzJywgbmFtZTogJ25hbWUnLCB0eXBlOiAnU3RyaW5nJywgcmVxdWlyZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHJlbGF0aW9uczogW10sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZXNpZ25lci5nZW5lcmF0ZVNjaGVtYShzY2hlbWEsICcvdGVzdCcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLnBhdGgpLnRvQ29udGFpbignc2NoZW1hLnByaXNtYScpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0NvbnRhaW4oJ21vZGVsIFVzZXInKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9Db250YWluKCdpZCAgICAgICAgICAgU3RyaW5nIEBpZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0NvbnRhaW4oJ2VtYWlsICAgICAgICBTdHJpbmcgQHVuaXF1ZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0NvbnRhaW4oJ25hbWUgICAgICAgICBTdHJpbmc/Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHNjaGVtYSB3aXRoIDE6TiByZWxhdGlvbnNoaXBzJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NoZW1hOiBEYXRhYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgbW9kZWxzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdtb2RlbDEnLFxuICAgICAgICAgICAgbmFtZTogJ1VzZXInLFxuICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgIHsgaWQ6ICdmMScsIG5hbWU6ICdpZCcsIHR5cGU6ICdTdHJpbmcnLCByZXF1aXJlZDogdHJ1ZSwgaXNQcmltYXJ5S2V5OiB0cnVlIH0sXG4gICAgICAgICAgICAgIHsgaWQ6ICdmMicsIG5hbWU6ICdlbWFpbCcsIHR5cGU6ICdTdHJpbmcnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnbW9kZWwyJyxcbiAgICAgICAgICAgIG5hbWU6ICdQb3N0JyxcbiAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICB7IGlkOiAnZjMnLCBuYW1lOiAnaWQnLCB0eXBlOiAnU3RyaW5nJywgcmVxdWlyZWQ6IHRydWUsIGlzUHJpbWFyeUtleTogdHJ1ZSB9LFxuICAgICAgICAgICAgICB7IGlkOiAnZjQnLCBuYW1lOiAndGl0bGUnLCB0eXBlOiAnU3RyaW5nJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcmVsYXRpb25zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdyZWwxJyxcbiAgICAgICAgICAgIHNvdXJjZU1vZGVsOiAnVXNlcicsXG4gICAgICAgICAgICB0YXJnZXRNb2RlbDogJ1Bvc3QnLFxuICAgICAgICAgICAgdHlwZTogJzE6TicsXG4gICAgICAgICAgICBzb3VyY2VGaWVsZDogJ3Bvc3RzJyxcbiAgICAgICAgICAgIHRhcmdldEZpZWxkOiAnYXV0aG9yJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gZGVzaWduZXIuZ2VuZXJhdGVTY2hlbWEoc2NoZW1hLCAnL3Rlc3QnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0NvbnRhaW4oJ3Bvc3RzICAgICAgICBQb3N0W10nKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9Db250YWluKCdhdXRob3IgICAgICAgVXNlcj8nKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9Db250YWluKCdhdXRob3JJZCAgICAgU3RyaW5nPycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBzY2hlbWEgd2l0aCBjYXNjYWRlIGRlbGV0ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHNjaGVtYTogRGF0YWJhc2VTY2hlbWEgPSB7XG4gICAgICAgIG1vZGVsczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnbW9kZWwxJyxcbiAgICAgICAgICAgIG5hbWU6ICdVc2VyJyxcbiAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICB7IGlkOiAnZjEnLCBuYW1lOiAnaWQnLCB0eXBlOiAnU3RyaW5nJywgcmVxdWlyZWQ6IHRydWUsIGlzUHJpbWFyeUtleTogdHJ1ZSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnbW9kZWwyJyxcbiAgICAgICAgICAgIG5hbWU6ICdQb3N0JyxcbiAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICB7IGlkOiAnZjInLCBuYW1lOiAnaWQnLCB0eXBlOiAnU3RyaW5nJywgcmVxdWlyZWQ6IHRydWUsIGlzUHJpbWFyeUtleTogdHJ1ZSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICByZWxhdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ3JlbDEnLFxuICAgICAgICAgICAgc291cmNlTW9kZWw6ICdVc2VyJyxcbiAgICAgICAgICAgIHRhcmdldE1vZGVsOiAnUG9zdCcsXG4gICAgICAgICAgICB0eXBlOiAnMTpOJyxcbiAgICAgICAgICAgIG9uRGVsZXRlOiAnQ2FzY2FkZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGRlc2lnbmVyLmdlbmVyYXRlU2NoZW1hKHNjaGVtYSwgJy90ZXN0Jyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9Db250YWluKCdvbkRlbGV0ZTogQ2FzY2FkZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGVNaWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBTUUwgbWlncmF0aW9uIGZpbGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzY2hlbWE6IERhdGFiYXNlU2NoZW1hID0ge1xuICAgICAgICBtb2RlbHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ21vZGVsMScsXG4gICAgICAgICAgICBuYW1lOiAnVXNlcicsXG4gICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgeyBpZDogJ2YxJywgbmFtZTogJ2lkJywgdHlwZTogJ1N0cmluZycsIHJlcXVpcmVkOiB0cnVlLCBpc1ByaW1hcnlLZXk6IHRydWUgfSxcbiAgICAgICAgICAgICAgeyBpZDogJ2YyJywgbmFtZTogJ2VtYWlsJywgdHlwZTogJ1N0cmluZycsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcbiAgICAgICAgICAgICAgeyBpZDogJ2YzJywgbmFtZTogJ2NyZWF0ZWRBdCcsIHR5cGU6ICdEYXRlVGltZScsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiAnbm93KCknIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHJlbGF0aW9uczogW10sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZXNpZ25lci5nZW5lcmF0ZU1pZ3JhdGlvbihzY2hlbWEsICdpbml0JywgJy90ZXN0Jyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ucGF0aCkudG9Db250YWluKCdtaWdyYXRpb24uc3FsJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbnRlbnQpLnRvQ29udGFpbignQ1JFQVRFIFRBQkxFIFwiVXNlclwiJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbnRlbnQpLnRvQ29udGFpbignXCJpZFwiIFRFWFQgTk9UIE5VTEwgUFJJTUFSWSBLRVknKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9Db250YWluKCdcImVtYWlsXCIgVEVYVCBOT1QgTlVMTCBVTklRVUUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9Db250YWluKCdcImNyZWF0ZWRBdFwiIFRJTUVTVEFNUCgzKSBOT1QgTlVMTCBERUZBVUxUIE5PVygpJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGZvcmVpZ24ga2V5IGNvbnN0cmFpbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NoZW1hOiBEYXRhYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgbW9kZWxzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdtb2RlbDEnLFxuICAgICAgICAgICAgbmFtZTogJ1VzZXInLFxuICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgIHsgaWQ6ICdmMScsIG5hbWU6ICdpZCcsIHR5cGU6ICdTdHJpbmcnLCByZXF1aXJlZDogdHJ1ZSwgaXNQcmltYXJ5S2V5OiB0cnVlIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdtb2RlbDInLFxuICAgICAgICAgICAgbmFtZTogJ1Bvc3QnLFxuICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgIHsgaWQ6ICdmMicsIG5hbWU6ICdpZCcsIHR5cGU6ICdTdHJpbmcnLCByZXF1aXJlZDogdHJ1ZSwgaXNQcmltYXJ5S2V5OiB0cnVlIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHJlbGF0aW9uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAncmVsMScsXG4gICAgICAgICAgICBzb3VyY2VNb2RlbDogJ1Bvc3QnLFxuICAgICAgICAgICAgdGFyZ2V0TW9kZWw6ICdVc2VyJyxcbiAgICAgICAgICAgIHR5cGU6ICcxOk4nLFxuICAgICAgICAgICAgc291cmNlRmllbGQ6ICdhdXRob3InLFxuICAgICAgICAgICAgb25EZWxldGU6ICdDYXNjYWRlJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gZGVzaWduZXIuZ2VuZXJhdGVNaWdyYXRpb24oc2NoZW1hLCAnYWRkX3Bvc3RzJywgJy90ZXN0Jyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9Db250YWluKCdBZGRGb3JlaWduS2V5Jyk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbnRlbnQpLnRvQ29udGFpbignRk9SRUlHTiBLRVknKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9Db250YWluKCdPTiBERUxFVEUgQ0FTQ0FERScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncHJldmlld01pZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByZXZpZXcgbWlncmF0aW9uIFNRTCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHNjaGVtYTogRGF0YWJhc2VTY2hlbWEgPSB7XG4gICAgICAgIG1vZGVsczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnbW9kZWwxJyxcbiAgICAgICAgICAgIG5hbWU6ICdQcm9kdWN0JyxcbiAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICB7IGlkOiAnZjEnLCBuYW1lOiAnaWQnLCB0eXBlOiAnU3RyaW5nJywgcmVxdWlyZWQ6IHRydWUsIGlzUHJpbWFyeUtleTogdHJ1ZSB9LFxuICAgICAgICAgICAgICB7IGlkOiAnZjInLCBuYW1lOiAnbmFtZScsIHR5cGU6ICdTdHJpbmcnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICAgICAgICB7IGlkOiAnZjMnLCBuYW1lOiAncHJpY2UnLCB0eXBlOiAnRmxvYXQnLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICAgICAgICB7IGlkOiAnZjQnLCBuYW1lOiAnaW5TdG9jaycsIHR5cGU6ICdCb29sZWFuJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcmVsYXRpb25zOiBbXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByZXZpZXcgPSBkZXNpZ25lci5wcmV2aWV3TWlncmF0aW9uKHNjaGVtYSk7XG5cbiAgICAgIGV4cGVjdChwcmV2aWV3KS50b0NvbnRhaW4oJ0NSRUFURSBUQUJMRSBcIlByb2R1Y3RcIicpO1xuICAgICAgZXhwZWN0KHByZXZpZXcpLnRvQ29udGFpbignXCJuYW1lXCIgVEVYVCBOT1QgTlVMTCcpO1xuICAgICAgZXhwZWN0KHByZXZpZXcpLnRvQ29udGFpbignXCJwcmljZVwiIERPVUJMRSBQUkVDSVNJT04gTk9UIE5VTEwnKTtcbiAgICAgIGV4cGVjdChwcmV2aWV3KS50b0NvbnRhaW4oJ1wiaW5TdG9ja1wiIEJPT0xFQU4gTk9UIE5VTEwnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxpQkFBQSxHQUFBQyxPQUFBO0FBRUFDLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxNQUFNO0VBQ2pDLElB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