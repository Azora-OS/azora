{"version":3,"names":["_factories","require","_database","prisma","getTestPrismaClient","describe","afterEach","cleanupTestDatabase","it","instructor","userFactory","createInstructor","course","courseFactory","create","instructorId","id","title","description","expect","toBeDefined","toBe","requiredFields","forEach","field","status","updatedCourse","update","where","data","price","delete","deletedCourse","findUnique","toBeNull","softDeleted","courses","findMany","length","instructor1","instructor2","instructor1Courses","publishedCourses","pythonCourses","contains","toContain"],"sources":["course-management.test.ts"],"sourcesContent":["import { userFactory, courseFactory } from '../../../tests/factories';\r\nimport { getTestPrismaClient, cleanupTestDatabase } from '../../../tests/utils/database';\r\n\r\nconst prisma = getTestPrismaClient();\r\n\r\ndescribe('Education Service - Course Management', () => {\r\n  afterEach(async () => {\r\n    await cleanupTestDatabase();\r\n  });\r\n\r\n  describe('Course Creation', () => {\r\n    it('should create course with valid data', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n\r\n      const course = await courseFactory.create({\r\n        instructorId: instructor.id,\r\n        title: 'Introduction to Python',\r\n        description: 'Learn Python programming from scratch',\r\n      });\r\n\r\n      expect(course).toBeDefined();\r\n      expect(course.title).toBe('Introduction to Python');\r\n      expect(course.instructorId).toBe(instructor.id);\r\n    });\r\n\r\n    it('should validate required fields', () => {\r\n      const requiredFields = ['title', 'description', 'instructorId'];\r\n\r\n      requiredFields.forEach(field => {\r\n        expect(field).toBeDefined();\r\n      });\r\n    });\r\n\r\n    it('should set default values', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n\r\n      const course = await courseFactory.create({\r\n        instructorId: instructor.id,\r\n      });\r\n\r\n      expect(course.status).toBeDefined();\r\n      expect(course.status).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('Course Update', () => {\r\n    it('should update course title', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n      const course = await courseFactory.create({ instructorId: instructor.id });\r\n\r\n      const updatedCourse = await prisma.course.update({\r\n        where: { id: course.id },\r\n        data: { title: 'Updated Course Title' },\r\n      });\r\n\r\n      expect(updatedCourse.title).toBe('Updated Course Title');\r\n    });\r\n\r\n    it('should update course description', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n      const course = await courseFactory.create({ instructorId: instructor.id });\r\n\r\n      const updatedCourse = await prisma.course.update({\r\n        where: { id: course.id },\r\n        data: { description: 'Updated description' },\r\n      });\r\n\r\n      expect(updatedCourse.description).toBe('Updated description');\r\n    });\r\n\r\n    it('should update course price', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n      const course = await courseFactory.create({ instructorId: instructor.id });\r\n\r\n      const updatedCourse = await prisma.course.update({\r\n        where: { id: course.id },\r\n        data: { price: 4999 },\r\n      });\r\n\r\n      expect(updatedCourse.price).toBe(4999);\r\n    });\r\n  });\r\n\r\n  describe('Course Deletion', () => {\r\n    it('should delete course', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n      const course = await courseFactory.create({ instructorId: instructor.id });\r\n\r\n      await prisma.course.delete({\r\n        where: { id: course.id },\r\n      });\r\n\r\n      const deletedCourse = await prisma.course.findUnique({\r\n        where: { id: course.id },\r\n      });\r\n\r\n      expect(deletedCourse).toBeNull();\r\n    });\r\n\r\n    it('should soft delete course', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n      const course = await courseFactory.create({ instructorId: instructor.id });\r\n\r\n      await prisma.course.update({\r\n        where: { id: course.id },\r\n        data: { status: 'ARCHIVED' },\r\n      });\r\n\r\n      const softDeleted = await prisma.course.findUnique({\r\n        where: { id: course.id },\r\n      });\r\n\r\n      expect(softDeleted!.status).toBe('ARCHIVED');\r\n    });\r\n  });\r\n\r\n  describe('Course Listing', () => {\r\n    it('should list all courses', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n\r\n      await courseFactory.create({ instructorId: instructor.id });\r\n      await courseFactory.create({ instructorId: instructor.id });\r\n      await courseFactory.create({ instructorId: instructor.id });\r\n\r\n      const courses = await prisma.course.findMany();\r\n\r\n      expect(courses.length).toBe(3);\r\n    });\r\n\r\n    it('should filter courses by instructor', async () => {\r\n      const instructor1 = await userFactory.createInstructor();\r\n      const instructor2 = await userFactory.createInstructor();\r\n\r\n      await courseFactory.create({ instructorId: instructor1.id });\r\n      await courseFactory.create({ instructorId: instructor1.id });\r\n      await courseFactory.create({ instructorId: instructor2.id });\r\n\r\n      const instructor1Courses = await prisma.course.findMany({\r\n        where: { instructorId: instructor1.id },\r\n      });\r\n\r\n      expect(instructor1Courses.length).toBe(2);\r\n    });\r\n\r\n    it('should filter published courses', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n\r\n      await courseFactory.create({ instructorId: instructor.id });\r\n      await courseFactory.create({ instructorId: instructor.id });\r\n      await courseFactory.create({ instructorId: instructor.id });\r\n\r\n      const publishedCourses = await prisma.course.findMany({\r\n        where: { status: 'PUBLISHED' },\r\n      });\r\n\r\n      expect(publishedCourses.length).toBe(2);\r\n    });\r\n\r\n    it('should search courses by title', async () => {\r\n      const instructor = await userFactory.createInstructor();\r\n\r\n      await courseFactory.create({\r\n        instructorId: instructor.id,\r\n        title: 'Python Programming',\r\n      });\r\n      await courseFactory.create({\r\n        instructorId: instructor.id,\r\n        title: 'JavaScript Basics',\r\n      });\r\n\r\n      const pythonCourses = await prisma.course.findMany({\r\n        where: {\r\n          title: {\r\n            contains: 'Python',\r\n          },\r\n        },\r\n      });\r\n\r\n      expect(pythonCourses.length).toBe(1);\r\n      expect(pythonCourses[0].title).toContain('Python');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}