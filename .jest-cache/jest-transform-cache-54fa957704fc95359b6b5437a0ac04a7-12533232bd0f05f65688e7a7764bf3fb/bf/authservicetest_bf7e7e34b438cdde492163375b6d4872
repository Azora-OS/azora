e90081ac4bad237abb5ff25a7789ea99
"use strict";

_getJestObj().mock('axios');
var _auth = require("../auth.service");
var _axios = _interopRequireDefault(require("axios"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const mockedAxios = _axios.default;
describe('AuthService', () => {
  let authService;
  let axiosInstance;
  beforeEach(() => {
    axiosInstance = {
      post: jest.fn(),
      get: jest.fn(),
      patch: jest.fn()
    };
    authService = new _auth.AuthService(axiosInstance);
  });
  describe('login', () => {
    test('should login successfully', async () => {
      const mockResponse = {
        data: {
          accessToken: 'token',
          user: {
            id: '1',
            email: 'test@example.com',
            name: 'Test User',
            role: 'student'
          }
        }
      };
      axiosInstance.post.mockResolvedValue(mockResponse);
      const result = await authService.login('test@example.com', 'password');
      expect(result.success).toBe(true);
      expect(result.data?.accessToken).toBe('token');
      expect(axiosInstance.post).toHaveBeenCalledWith('/auth/login', {
        email: 'test@example.com',
        password: 'password'
      });
    });
    test('should handle login error', async () => {
      axiosInstance.post.mockRejectedValue(new Error('Invalid credentials'));
      const result = await authService.login('test@example.com', 'wrong');
      expect(result.success).toBe(false);
      expect(result.error).toBe('Invalid credentials');
    });
  });
  describe('register', () => {
    test('should register successfully', async () => {
      const mockResponse = {
        data: {
          accessToken: 'token',
          user: {
            id: '1',
            email: 'new@example.com',
            name: 'New User',
            role: 'student'
          }
        }
      };
      axiosInstance.post.mockResolvedValue(mockResponse);
      const result = await authService.register('new@example.com', 'password', 'New User');
      expect(result.success).toBe(true);
      expect(result.data?.user.email).toBe('new@example.com');
    });
  });
  describe('profile', () => {
    test('should get profile successfully', async () => {
      const mockResponse = {
        data: {
          id: '1',
          email: 'test@example.com',
          name: 'Test User',
          role: 'student'
        }
      };
      axiosInstance.get.mockResolvedValue(mockResponse);
      const result = await authService.profile();
      expect(result.success).toBe(true);
      expect(result.data?.email).toBe('test@example.com');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJfYXV0aCIsInJlcXVpcmUiLCJfYXhpb3MiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiamVzdCIsIm1vY2tlZEF4aW9zIiwiYXhpb3MiLCJkZXNjcmliZSIsImF1dGhTZXJ2aWNlIiwiYXhpb3NJbnN0YW5jZSIsImJlZm9yZUVhY2giLCJwb3N0IiwiZm4iLCJnZXQiLCJwYXRjaCIsIkF1dGhTZXJ2aWNlIiwidGVzdCIsIm1vY2tSZXNwb25zZSIsImRhdGEiLCJhY2Nlc3NUb2tlbiIsInVzZXIiLCJpZCIsImVtYWlsIiwibmFtZSIsInJvbGUiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInJlc3VsdCIsImxvZ2luIiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInBhc3N3b3JkIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsImVycm9yIiwicmVnaXN0ZXIiLCJwcm9maWxlIl0sInNvdXJjZXMiOlsiYXV0aC5zZXJ2aWNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXV0aFNlcnZpY2UgfSBmcm9tICcuLi9hdXRoLnNlcnZpY2UnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5cclxuamVzdC5tb2NrKCdheGlvcycpO1xyXG5jb25zdCBtb2NrZWRBeGlvcyA9IGF4aW9zIGFzIGplc3QuTW9ja2VkPHR5cGVvZiBheGlvcz47XHJcblxyXG5kZXNjcmliZSgnQXV0aFNlcnZpY2UnLCAoKSA9PiB7XHJcbiAgbGV0IGF1dGhTZXJ2aWNlOiBBdXRoU2VydmljZTtcclxuICBsZXQgYXhpb3NJbnN0YW5jZTogYW55O1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGF4aW9zSW5zdGFuY2UgPSB7XHJcbiAgICAgIHBvc3Q6IGplc3QuZm4oKSxcclxuICAgICAgZ2V0OiBqZXN0LmZuKCksXHJcbiAgICAgIHBhdGNoOiBqZXN0LmZuKCksXHJcbiAgICB9O1xyXG4gICAgYXV0aFNlcnZpY2UgPSBuZXcgQXV0aFNlcnZpY2UoYXhpb3NJbnN0YW5jZSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdsb2dpbicsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCBsb2dpbiBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBhY2Nlc3NUb2tlbjogJ3Rva2VuJyxcclxuICAgICAgICAgIHVzZXI6IHsgaWQ6ICcxJywgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJywgbmFtZTogJ1Rlc3QgVXNlcicsIHJvbGU6ICdzdHVkZW50JyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBheGlvc0luc3RhbmNlLnBvc3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3BvbnNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1dGhTZXJ2aWNlLmxvZ2luKCd0ZXN0QGV4YW1wbGUuY29tJywgJ3Bhc3N3b3JkJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YT8uYWNjZXNzVG9rZW4pLnRvQmUoJ3Rva2VuJyk7XHJcbiAgICAgIGV4cGVjdChheGlvc0luc3RhbmNlLnBvc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aC9sb2dpbicsIHtcclxuICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsb2dpbiBlcnJvcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXhpb3NJbnN0YW5jZS5wb3N0Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignSW52YWxpZCBjcmVkZW50aWFscycpKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1dGhTZXJ2aWNlLmxvZ2luKCd0ZXN0QGV4YW1wbGUuY29tJywgJ3dyb25nJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdJbnZhbGlkIGNyZWRlbnRpYWxzJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3JlZ2lzdGVyJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIHJlZ2lzdGVyIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGFjY2Vzc1Rva2VuOiAndG9rZW4nLFxyXG4gICAgICAgICAgdXNlcjogeyBpZDogJzEnLCBlbWFpbDogJ25ld0BleGFtcGxlLmNvbScsIG5hbWU6ICdOZXcgVXNlcicsIHJvbGU6ICdzdHVkZW50JyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBheGlvc0luc3RhbmNlLnBvc3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3BvbnNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1dGhTZXJ2aWNlLnJlZ2lzdGVyKCduZXdAZXhhbXBsZS5jb20nLCAncGFzc3dvcmQnLCAnTmV3IFVzZXInKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhPy51c2VyLmVtYWlsKS50b0JlKCduZXdAZXhhbXBsZS5jb20nKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncHJvZmlsZScsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCBnZXQgcHJvZmlsZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcclxuICAgICAgICBkYXRhOiB7IGlkOiAnMScsIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsIG5hbWU6ICdUZXN0IFVzZXInLCByb2xlOiAnc3R1ZGVudCcgfVxyXG4gICAgICB9O1xyXG4gICAgICBheGlvc0luc3RhbmNlLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzcG9uc2UpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXV0aFNlcnZpY2UucHJvZmlsZSgpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmRhdGE/LmVtYWlsKS50b0JlKCd0ZXN0QGV4YW1wbGUuY29tJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFHQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBSGxCLElBQUFDLEtBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUEwQixTQUFBRSx1QkFBQUMsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUFBLFNBQUFOLFlBQUE7RUFBQTtJQUFBUztFQUFBLElBQUFOLE9BQUE7RUFBQUgsV0FBQSxHQUFBQSxDQUFBLEtBQUFTLElBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFHMUIsTUFBTUMsV0FBVyxHQUFHQyxjQUFrQztBQUV0REMsUUFBUSxDQUFDLGFBQWEsRUFBRSxNQUFNO0VBQzVCLElBQUlDLFdBQXdCO0VBQzVCLElBQUlDLGFBQWtCO0VBRXRCQyxVQUFVLENBQUMsTUFBTTtJQUNmRCxhQUFhLEdBQUc7TUFDZEUsSUFB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