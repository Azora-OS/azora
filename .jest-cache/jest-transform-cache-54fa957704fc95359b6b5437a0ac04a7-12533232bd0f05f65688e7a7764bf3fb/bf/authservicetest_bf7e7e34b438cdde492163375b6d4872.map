{"version":3,"names":["_getJestObj","mock","_auth","require","_axios","_interopRequireDefault","e","__esModule","default","jest","mockedAxios","axios","describe","authService","axiosInstance","beforeEach","post","fn","get","patch","AuthService","test","mockResponse","data","accessToken","user","id","email","name","role","mockResolvedValue","result","login","expect","success","toBe","toHaveBeenCalledWith","password","mockRejectedValue","Error","error","register","profile"],"sources":["auth.service.test.ts"],"sourcesContent":["import { AuthService } from '../auth.service';\r\nimport axios from 'axios';\r\n\r\njest.mock('axios');\r\nconst mockedAxios = axios as jest.Mocked<typeof axios>;\r\n\r\ndescribe('AuthService', () => {\r\n  let authService: AuthService;\r\n  let axiosInstance: any;\r\n\r\n  beforeEach(() => {\r\n    axiosInstance = {\r\n      post: jest.fn(),\r\n      get: jest.fn(),\r\n      patch: jest.fn(),\r\n    };\r\n    authService = new AuthService(axiosInstance);\r\n  });\r\n\r\n  describe('login', () => {\r\n    test('should login successfully', async () => {\r\n      const mockResponse = {\r\n        data: {\r\n          accessToken: 'token',\r\n          user: { id: '1', email: 'test@example.com', name: 'Test User', role: 'student' }\r\n        }\r\n      };\r\n      axiosInstance.post.mockResolvedValue(mockResponse);\r\n\r\n      const result = await authService.login('test@example.com', 'password');\r\n\r\n      expect(result.success).toBe(true);\r\n      expect(result.data?.accessToken).toBe('token');\r\n      expect(axiosInstance.post).toHaveBeenCalledWith('/auth/login', {\r\n        email: 'test@example.com',\r\n        password: 'password'\r\n      });\r\n    });\r\n\r\n    test('should handle login error', async () => {\r\n      axiosInstance.post.mockRejectedValue(new Error('Invalid credentials'));\r\n\r\n      const result = await authService.login('test@example.com', 'wrong');\r\n\r\n      expect(result.success).toBe(false);\r\n      expect(result.error).toBe('Invalid credentials');\r\n    });\r\n  });\r\n\r\n  describe('register', () => {\r\n    test('should register successfully', async () => {\r\n      const mockResponse = {\r\n        data: {\r\n          accessToken: 'token',\r\n          user: { id: '1', email: 'new@example.com', name: 'New User', role: 'student' }\r\n        }\r\n      };\r\n      axiosInstance.post.mockResolvedValue(mockResponse);\r\n\r\n      const result = await authService.register('new@example.com', 'password', 'New User');\r\n\r\n      expect(result.success).toBe(true);\r\n      expect(result.data?.user.email).toBe('new@example.com');\r\n    });\r\n  });\r\n\r\n  describe('profile', () => {\r\n    test('should get profile successfully', async () => {\r\n      const mockResponse = {\r\n        data: { id: '1', email: 'test@example.com', name: 'Test User', role: 'student' }\r\n      };\r\n      axiosInstance.get.mockResolvedValue(mockResponse);\r\n\r\n      const result = await authService.profile();\r\n\r\n      expect(result.success).toBe(true);\r\n      expect(result.data?.email).toBe('test@example.com');\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}