ca10c7cea561b28e8b05f2b98cd1e611
"use strict";

// Mock dependencies
_getJestObj().mock('../../services/payment/stripe-client');
_getJestObj().mock('../../services/payment/payment-repository');
_getJestObj().mock('@prisma/client');
var _paymentProcessor = require("../../services/payment/payment-processor");
var _stripeClient = require("../../services/payment/stripe-client");
var _paymentRepository = require("../../services/payment/payment-repository");
var _webhookHandler = require("../../services/payment/webhook-handler");
var _receiptGenerator = require("../../services/payment/receipt-generator");
var _types = require("../../services/payment/types");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
/**
 * Payment Flow Integration Tests
 * Tests for complete end-to-end payment processing
 */
describe('Payment Flow Integration Tests', () => {
  let paymentProcessor;
  let webhookHandler;
  let receiptGenerator;
  let mockStripeClient;
  let mockPaymentRepository;
  beforeEach(() => {
    mockStripeClient = new _stripeClient.StripeClientService('sk_test_key');
    mockPaymentRepository = new _paymentRepository.PaymentRepository(null);
    paymentProcessor = new _paymentProcessor.PaymentProcessor(mockStripeClient, mockPaymentRepository);
    webhookHandler = new _webhookHandler.WebhookHandler(mockStripeClient, mockPaymentRepository);
    receiptGenerator = new _receiptGenerator.ReceiptGenerator();
  });
  describe('Complete Payment Flow', () => {
    it('should process payment and handle webhook', async () => {
      // Step 1: Process payment
      const paymentRequest = {
        userId: 'user-123',
        amount: 9999,
        currency: 'usd',
        paymentMethodId: 'pm_123',
        courseId: 'course-123'
      };
      const paymentResult = await paymentProcessor.processPayment(paymentRequest);
      expect(paymentResult.success).toBe(true);
      expect(paymentResult.paymentId).toBeDefined();
      expect(paymentResult.stripePaymentIntentId).toBeDefined();

      // Step 2: Simulate webhook event
      const webhookEvent = {
        id: 'evt_123',
        type: 'payment_intent.succeeded',
        data: {
          object: {
            id: paymentResult.stripePaymentIntentId,
            status: 'succeeded',
            amount: 9999,
            currency: 'usd',
            metadata: {}
          }
        },
        created: Math.floor(Date.now() / 1000)
      };
      mockPaymentRepository.getPaymentByStripeId = jest.fn().mockResolvedValue({
        id: paymentResult.paymentId,
        status: _types.PaymentStatus.PENDING
      });
      await expect(webhookHandler.processWebhookEvent(webhookEvent)).resolves.not.toThrow();

      // Step 3: Generate receipt
      const payment = {
        id: paymentResult.paymentId,
        userId: 'user-123',
        amount: 9999,
        currency: 'usd',
        status: _types.PaymentStatus.SUCCEEDED,
        courseId: 'course-123',
        createdAt: new Date()
      };
      const receipt = await receiptGenerator.generateReceipt(payment, 'Advanced TypeScript');
      expect(receipt.paymentId).toBe(paymentResult.paymentId);
      expect(receipt.invoiceNumber).toBeDefined();
      expect(receipt.items).toHaveLength(1);
    });
    it('should handle payment failure flow', async () => {
      const paymentRequest = {
        userId: 'user-123',
        amount: 9999,
        currency: 'usd',
        paymentMethodId: 'pm_declined',
        courseId: 'course-123'
      };
      const paymentResult = await paymentProcessor.processPayment(paymentRequest);

      // Simulate failed webhook
      const failedEvent = {
        id: 'evt_123',
        type: 'payment_intent.payment_failed',
        data: {
          object: {
            id: 'pi_failed',
            status: 'requires_payment_method',
            last_payment_error: {
              code: 'card_declined',
              message: 'Your card was declined'
            }
          }
        },
        created: Math.floor(Date.now() / 1000)
      };
      mockPaymentRepository.getPaymentByStripeId = jest.fn().mockResolvedValue({
        id: 'pay-123',
        status: _types.PaymentStatus.PENDING
      });
      await expect(webhookHandler.processWebhookEvent(failedEvent)).resolves.not.toThrow();
    });
    it('should handle refund flow', async () => {
      // Create initial payment
      mockPaymentRepository.getPaymentById = jest.fn().mockResolvedValue({
        id: 'pay-123',
        status: _types.PaymentStatus.SUCCEEDED,
        stripePaymentIntentId: 'pi_123',
        amount: 9999
      });

      // Process refund
      const refundResult = await paymentProcessor.refundPayment('pay-123', 5000, 'Customer requested');
      expect(refundResult.success).toBe(true);

      // Simulate refund webhook
      const refundEvent = {
        id: 'evt_123',
        type: 'charge.refunded',
        data: {
          object: {
            id: 'ch_123',
            payment_intent: 'pi_123',
            amount_refunded: 5000,
            refunded: true
          }
        },
        created: Math.floor(Date.now() / 1000)
      };
      mockPaymentRepository.getPaymentByStripeId = jest.fn().mockResolvedValue({
        id: 'pay-123',
        status: _types.PaymentStatus.SUCCEEDED
      });
      await expect(webhookHandler.processWebhookEvent(refundEvent)).resolves.not.toThrow();
    });
  });
  describe('Payment History Flow', () => {
    it('should retrieve payment history', async () => {
      mockPaymentRepository.getPaymentHistory = jest.fn().mockResolvedValue({
        payments: [{
          id: 'pay-1',
          userId: 'user-123',
          status: _types.PaymentStatus.SUCCEEDED,
          amount: 9999
        }, {
          id: 'pay-2',
          userId: 'user-123',
          status: _types.PaymentStatus.SUCCEEDED,
          amount: 4999
        }],
        total: 2,
        limit: 20,
        offset: 0
      });
      const history = await mockPaymentRepository.getPaymentHistory('user-123', 20, 0);
      expect(history.payments).toHaveLength(2);
      expect(history.total).toBe(2);
    });
    it('should support pagination', async () => {
      mockPaymentRepository.getPaymentHistory = jest.fn().mockResolvedValue({
        payments: [],
        total: 100,
        limit: 10,
        offset: 20
      });
      const history = await mockPaymentRepository.getPaymentHistory('user-123', 10, 20);
      expect(history.limit).toBe(10);
      expect(history.offset).toBe(20);
      expect(history.total).toBe(100);
    });
  });
  describe('Error Scenarios', () => {
    it('should handle invalid payment request', async () => {
      const invalidRequest = {
        userId: '',
        amount: 0,
        currency: '',
        paymentMethodId: ''
      };
      const result = await paymentProcessor.processPayment(invalidRequest);
      expect(result.success).toBe(false);
      expect(result.error).toBeDefined();
    });
    it('should handle payment not found', async () => {
      mockPaymentRepository.getPaymentById = jest.fn().mockResolvedValue(null);
      const result = await paymentProcessor.refundPayment('pay-123');
      expect(result.success).toBe(false);
      expect(result.error?.code).toBe('NOT_FOUND');
    });
    it('should handle duplicate payment prevention', async () => {
      const paymentRequest = {
        userId: 'user-123',
        amount: 9999,
        currency: 'usd',
        paymentMethodId: 'pm_123'
      };

      // First payment
      const result1 = await paymentProcessor.processPayment(paymentRequest);
      expect(result1.success).toBe(true);

      // Duplicate payment with same idempotency key should return cached result
      const result2 = await paymentProcessor.processPayment(paymentRequest);
      expect(result2.success).toBe(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJfcGF5bWVudFByb2Nlc3NvciIsInJlcXVpcmUiLCJfc3RyaXBlQ2xpZW50IiwiX3BheW1lbnRSZXBvc2l0b3J5IiwiX3dlYmhvb2tIYW5kbGVyIiwiX3JlY2VpcHRHZW5lcmF0b3IiLCJfdHlwZXMiLCJqZXN0IiwiZGVzY3JpYmUiLCJwYXltZW50UHJvY2Vzc29yIiwid2ViaG9va0hhbmRsZXIiLCJyZWNlaXB0R2VuZXJhdG9yIiwibW9ja1N0cmlwZUNsaWVudCIsIm1vY2tQYXltZW50UmVwb3NpdG9yeSIsImJlZm9yZUVhY2giLCJTdHJpcGVDbGllbnRTZXJ2aWNlIiwiUGF5bWVudFJlcG9zaXRvcnkiLCJQYXltZW50UHJvY2Vzc29yIiwiV2ViaG9va0hhbmRsZXIiLCJSZWNlaXB0R2VuZXJhdG9yIiwiaXQiLCJwYXltZW50UmVxdWVzdCIsInVzZXJJZCIsImFtb3VudCIsImN1cnJlbmN5IiwicGF5bWVudE1ldGhvZElkIiwiY291cnNlSWQiLCJwYXltZW50UmVzdWx0IiwicHJvY2Vzc1BheW1lbnQiLCJleHBlY3QiLCJzdWNjZXNzIiwidG9CZSIsInBheW1lbnRJZCIsInRvQmVEZWZpbmVkIiwic3RyaXBlUGF5bWVudEludGVudElkIiwid2ViaG9va0V2ZW50IiwiaWQiLCJ0eXBlIiwiZGF0YSIsIm9iamVjdCIsInN0YXR1cyIsIm1ldGFkYXRhIiwiY3JlYXRlZCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJnZXRQYXltZW50QnlTdHJpcGVJZCIsImZuIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJQYXltZW50U3RhdHVzIiwiUEVORElORyIsInByb2Nlc3NXZWJob29rRXZlbnQiLCJyZXNvbHZlcyIsIm5vdCIsInRvVGhyb3ciLCJwYXltZW50IiwiU1VDQ0VFREVEIiwiY3JlYXRlZEF0IiwicmVjZWlwdCIsImdlbmVyYXRlUmVjZWlwdCIsImludm9pY2VOdW1iZXIiLCJpdGVtcyIsInRvSGF2ZUxlbmd0aCIsImZhaWxlZEV2ZW50IiwibGFzdF9wYXltZW50X2Vycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJnZXRQYXltZW50QnlJZCIsInJlZnVuZFJlc3VsdCIsInJlZnVuZFBheW1lbnQiLCJyZWZ1bmRFdmVudCIsInBheW1lbnRfaW50ZW50IiwiYW1vdW50X3JlZnVuZGVkIiwicmVmdW5kZWQiLCJnZXRQYXltZW50SGlzdG9yeSIsInBheW1lbnRzIiwidG90YWwiLCJsaW1pdCIsIm9mZnNldCIsImhpc3RvcnkiLCJpbnZhbGlkUmVxdWVzdCIsInJlc3VsdCIsImVycm9yIiwicmVzdWx0MSIsInJlc3VsdDIiXSwic291cmNlcyI6WyJwYXltZW50LWZsb3cudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogUGF5bWVudCBGbG93IEludGVncmF0aW9uIFRlc3RzXHJcbiAqIFRlc3RzIGZvciBjb21wbGV0ZSBlbmQtdG8tZW5kIHBheW1lbnQgcHJvY2Vzc2luZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBheW1lbnRQcm9jZXNzb3IgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wYXltZW50L3BheW1lbnQtcHJvY2Vzc29yJztcclxuaW1wb3J0IHsgU3RyaXBlQ2xpZW50U2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BheW1lbnQvc3RyaXBlLWNsaWVudCc7XHJcbmltcG9ydCB7IFBheW1lbnRSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcGF5bWVudC9wYXltZW50LXJlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBXZWJob29rSGFuZGxlciB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BheW1lbnQvd2ViaG9vay1oYW5kbGVyJztcclxuaW1wb3J0IHsgUmVjZWlwdEdlbmVyYXRvciB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BheW1lbnQvcmVjZWlwdC1nZW5lcmF0b3InO1xyXG5pbXBvcnQgeyBQYXltZW50U3RhdHVzIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcGF5bWVudC90eXBlcyc7XHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuaW1wb3J0IFN0cmlwZSBmcm9tICdzdHJpcGUnO1xyXG5cclxuLy8gTW9jayBkZXBlbmRlbmNpZXNcclxuamVzdC5tb2NrKCcuLi8uLi9zZXJ2aWNlcy9wYXltZW50L3N0cmlwZS1jbGllbnQnKTtcclxuamVzdC5tb2NrKCcuLi8uLi9zZXJ2aWNlcy9wYXltZW50L3BheW1lbnQtcmVwb3NpdG9yeScpO1xyXG5qZXN0Lm1vY2soJ0BwcmlzbWEvY2xpZW50Jyk7XHJcblxyXG5kZXNjcmliZSgnUGF5bWVudCBGbG93IEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xyXG4gIGxldCBwYXltZW50UHJvY2Vzc29yOiBQYXltZW50UHJvY2Vzc29yO1xyXG4gIGxldCB3ZWJob29rSGFuZGxlcjogV2ViaG9va0hhbmRsZXI7XHJcbiAgbGV0IHJlY2VpcHRHZW5lcmF0b3I6IFJlY2VpcHRHZW5lcmF0b3I7XHJcbiAgbGV0IG1vY2tTdHJpcGVDbGllbnQ6IGplc3QuTW9ja2VkPFN0cmlwZUNsaWVudFNlcnZpY2U+O1xyXG4gIGxldCBtb2NrUGF5bWVudFJlcG9zaXRvcnk6IGplc3QuTW9ja2VkPFBheW1lbnRSZXBvc2l0b3J5PjtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBtb2NrU3RyaXBlQ2xpZW50ID0gbmV3IFN0cmlwZUNsaWVudFNlcnZpY2UoJ3NrX3Rlc3Rfa2V5JykgYXMgamVzdC5Nb2NrZWQ8U3RyaXBlQ2xpZW50U2VydmljZT47XHJcbiAgICBtb2NrUGF5bWVudFJlcG9zaXRvcnkgPSBuZXcgUGF5bWVudFJlcG9zaXRvcnkobnVsbCBhcyBhbnkpIGFzIGplc3QuTW9ja2VkPFBheW1lbnRSZXBvc2l0b3J5PjtcclxuICAgIHBheW1lbnRQcm9jZXNzb3IgPSBuZXcgUGF5bWVudFByb2Nlc3Nvcihtb2NrU3RyaXBlQ2xpZW50LCBtb2NrUGF5bWVudFJlcG9zaXRvcnkpO1xyXG4gICAgd2ViaG9va0hhbmRsZXIgPSBuZXcgV2ViaG9va0hhbmRsZXIobW9ja1N0cmlwZUNsaWVudCwgbW9ja1BheW1lbnRSZXBvc2l0b3J5KTtcclxuICAgIHJlY2VpcHRHZW5lcmF0b3IgPSBuZXcgUmVjZWlwdEdlbmVyYXRvcigpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29tcGxldGUgUGF5bWVudCBGbG93JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBwcm9jZXNzIHBheW1lbnQgYW5kIGhhbmRsZSB3ZWJob29rJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBTdGVwIDE6IFByb2Nlc3MgcGF5bWVudFxyXG4gICAgICBjb25zdCBwYXltZW50UmVxdWVzdCA9IHtcclxuICAgICAgICB1c2VySWQ6ICd1c2VyLTEyMycsXHJcbiAgICAgICAgYW1vdW50OiA5OTk5LFxyXG4gICAgICAgIGN1cnJlbmN5OiAndXNkJyxcclxuICAgICAgICBwYXltZW50TWV0aG9kSWQ6ICdwbV8xMjMnLFxyXG4gICAgICAgIGNvdXJzZUlkOiAnY291cnNlLTEyMycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBwYXltZW50UmVzdWx0ID0gYXdhaXQgcGF5bWVudFByb2Nlc3Nvci5wcm9jZXNzUGF5bWVudChwYXltZW50UmVxdWVzdCk7XHJcblxyXG4gICAgICBleHBlY3QocGF5bWVudFJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocGF5bWVudFJlc3VsdC5wYXltZW50SWQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChwYXltZW50UmVzdWx0LnN0cmlwZVBheW1lbnRJbnRlbnRJZCkudG9CZURlZmluZWQoKTtcclxuXHJcbiAgICAgIC8vIFN0ZXAgMjogU2ltdWxhdGUgd2ViaG9vayBldmVudFxyXG4gICAgICBjb25zdCB3ZWJob29rRXZlbnQ6IFN0cmlwZS5FdmVudCA9IHtcclxuICAgICAgICBpZDogJ2V2dF8xMjMnLFxyXG4gICAgICAgIHR5cGU6ICdwYXltZW50X2ludGVudC5zdWNjZWVkZWQnLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIG9iamVjdDoge1xyXG4gICAgICAgICAgICBpZDogcGF5bWVudFJlc3VsdC5zdHJpcGVQYXltZW50SW50ZW50SWQsXHJcbiAgICAgICAgICAgIHN0YXR1czogJ3N1Y2NlZWRlZCcsXHJcbiAgICAgICAgICAgIGFtb3VudDogOTk5OSxcclxuICAgICAgICAgICAgY3VycmVuY3k6ICd1c2QnLFxyXG4gICAgICAgICAgICBtZXRhZGF0YToge30sXHJcbiAgICAgICAgICB9IGFzIGFueSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNyZWF0ZWQ6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApLFxyXG4gICAgICB9IGFzIFN0cmlwZS5FdmVudDtcclxuXHJcbiAgICAgIG1vY2tQYXltZW50UmVwb3NpdG9yeS5nZXRQYXltZW50QnlTdHJpcGVJZCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgaWQ6IHBheW1lbnRSZXN1bHQucGF5bWVudElkLFxyXG4gICAgICAgIHN0YXR1czogUGF5bWVudFN0YXR1cy5QRU5ESU5HLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdCh3ZWJob29rSGFuZGxlci5wcm9jZXNzV2ViaG9va0V2ZW50KHdlYmhvb2tFdmVudCkpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XHJcblxyXG4gICAgICAvLyBTdGVwIDM6IEdlbmVyYXRlIHJlY2VpcHRcclxuICAgICAgY29uc3QgcGF5bWVudCA9IHtcclxuICAgICAgICBpZDogcGF5bWVudFJlc3VsdC5wYXltZW50SWQsXHJcbiAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxyXG4gICAgICAgIGFtb3VudDogOTk5OSxcclxuICAgICAgICBjdXJyZW5jeTogJ3VzZCcsXHJcbiAgICAgICAgc3RhdHVzOiBQYXltZW50U3RhdHVzLlNVQ0NFRURFRCxcclxuICAgICAgICBjb3Vyc2VJZDogJ2NvdXJzZS0xMjMnLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgfSBhcyBhbnk7XHJcblxyXG4gICAgICBjb25zdCByZWNlaXB0ID0gYXdhaXQgcmVjZWlwdEdlbmVyYXRvci5nZW5lcmF0ZVJlY2VpcHQocGF5bWVudCwgJ0FkdmFuY2VkIFR5cGVTY3JpcHQnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZWNlaXB0LnBheW1lbnRJZCkudG9CZShwYXltZW50UmVzdWx0LnBheW1lbnRJZCk7XHJcbiAgICAgIGV4cGVjdChyZWNlaXB0Lmludm9pY2VOdW1iZXIpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZWNlaXB0Lml0ZW1zKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwYXltZW50IGZhaWx1cmUgZmxvdycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGF5bWVudFJlcXVlc3QgPSB7XHJcbiAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxyXG4gICAgICAgIGFtb3VudDogOTk5OSxcclxuICAgICAgICBjdXJyZW5jeTogJ3VzZCcsXHJcbiAgICAgICAgcGF5bWVudE1ldGhvZElkOiAncG1fZGVjbGluZWQnLFxyXG4gICAgICAgIGNvdXJzZUlkOiAnY291cnNlLTEyMycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBwYXltZW50UmVzdWx0ID0gYXdhaXQgcGF5bWVudFByb2Nlc3Nvci5wcm9jZXNzUGF5bWVudChwYXltZW50UmVxdWVzdCk7XHJcblxyXG4gICAgICAvLyBTaW11bGF0ZSBmYWlsZWQgd2ViaG9va1xyXG4gICAgICBjb25zdCBmYWlsZWRFdmVudDogU3RyaXBlLkV2ZW50ID0ge1xyXG4gICAgICAgIGlkOiAnZXZ0XzEyMycsXHJcbiAgICAgICAgdHlwZTogJ3BheW1lbnRfaW50ZW50LnBheW1lbnRfZmFpbGVkJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBvYmplY3Q6IHtcclxuICAgICAgICAgICAgaWQ6ICdwaV9mYWlsZWQnLFxyXG4gICAgICAgICAgICBzdGF0dXM6ICdyZXF1aXJlc19wYXltZW50X21ldGhvZCcsXHJcbiAgICAgICAgICAgIGxhc3RfcGF5bWVudF9lcnJvcjoge1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdjYXJkX2RlY2xpbmVkJyxcclxuICAgICAgICAgICAgICBtZXNzYWdlOiAnWW91ciBjYXJkIHdhcyBkZWNsaW5lZCcsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9IGFzIGFueSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNyZWF0ZWQ6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApLFxyXG4gICAgICB9IGFzIFN0cmlwZS5FdmVudDtcclxuXHJcbiAgICAgIG1vY2tQYXltZW50UmVwb3NpdG9yeS5nZXRQYXltZW50QnlTdHJpcGVJZCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgaWQ6ICdwYXktMTIzJyxcclxuICAgICAgICBzdGF0dXM6IFBheW1lbnRTdGF0dXMuUEVORElORyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qod2ViaG9va0hhbmRsZXIucHJvY2Vzc1dlYmhvb2tFdmVudChmYWlsZWRFdmVudCkpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByZWZ1bmQgZmxvdycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gQ3JlYXRlIGluaXRpYWwgcGF5bWVudFxyXG4gICAgICBtb2NrUGF5bWVudFJlcG9zaXRvcnkuZ2V0UGF5bWVudEJ5SWQgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIGlkOiAncGF5LTEyMycsXHJcbiAgICAgICAgc3RhdHVzOiBQYXltZW50U3RhdHVzLlNVQ0NFRURFRCxcclxuICAgICAgICBzdHJpcGVQYXltZW50SW50ZW50SWQ6ICdwaV8xMjMnLFxyXG4gICAgICAgIGFtb3VudDogOTk5OSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBQcm9jZXNzIHJlZnVuZFxyXG4gICAgICBjb25zdCByZWZ1bmRSZXN1bHQgPSBhd2FpdCBwYXltZW50UHJvY2Vzc29yLnJlZnVuZFBheW1lbnQoXHJcbiAgICAgICAgJ3BheS0xMjMnLFxyXG4gICAgICAgIDUwMDAsXHJcbiAgICAgICAgJ0N1c3RvbWVyIHJlcXVlc3RlZCdcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZWZ1bmRSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuXHJcbiAgICAgIC8vIFNpbXVsYXRlIHJlZnVuZCB3ZWJob29rXHJcbiAgICAgIGNvbnN0IHJlZnVuZEV2ZW50OiBTdHJpcGUuRXZlbnQgPSB7XHJcbiAgICAgICAgaWQ6ICdldnRfMTIzJyxcclxuICAgICAgICB0eXBlOiAnY2hhcmdlLnJlZnVuZGVkJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBvYmplY3Q6IHtcclxuICAgICAgICAgICAgaWQ6ICdjaF8xMjMnLFxyXG4gICAgICAgICAgICBwYXltZW50X2ludGVudDogJ3BpXzEyMycsXHJcbiAgICAgICAgICAgIGFtb3VudF9yZWZ1bmRlZDogNTAwMCxcclxuICAgICAgICAgICAgcmVmdW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICB9IGFzIGFueSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNyZWF0ZWQ6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApLFxyXG4gICAgICB9IGFzIFN0cmlwZS5FdmVudDtcclxuXHJcbiAgICAgIG1vY2tQYXltZW50UmVwb3NpdG9yeS5nZXRQYXltZW50QnlTdHJpcGVJZCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgaWQ6ICdwYXktMTIzJyxcclxuICAgICAgICBzdGF0dXM6IFBheW1lbnRTdGF0dXMuU1VDQ0VFREVELFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdCh3ZWJob29rSGFuZGxlci5wcm9jZXNzV2ViaG9va0V2ZW50KHJlZnVuZEV2ZW50KSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUGF5bWVudCBIaXN0b3J5IEZsb3cnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHBheW1lbnQgaGlzdG9yeScsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1BheW1lbnRSZXBvc2l0b3J5LmdldFBheW1lbnRIaXN0b3J5ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBwYXltZW50czogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogJ3BheS0xJyxcclxuICAgICAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxyXG4gICAgICAgICAgICBzdGF0dXM6IFBheW1lbnRTdGF0dXMuU1VDQ0VFREVELFxyXG4gICAgICAgICAgICBhbW91bnQ6IDk5OTksXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogJ3BheS0yJyxcclxuICAgICAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxyXG4gICAgICAgICAgICBzdGF0dXM6IFBheW1lbnRTdGF0dXMuU1VDQ0VFREVELFxyXG4gICAgICAgICAgICBhbW91bnQ6IDQ5OTksXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdG90YWw6IDIsXHJcbiAgICAgICAgbGltaXQ6IDIwLFxyXG4gICAgICAgIG9mZnNldDogMCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgbW9ja1BheW1lbnRSZXBvc2l0b3J5LmdldFBheW1lbnRIaXN0b3J5KCd1c2VyLTEyMycsIDIwLCAwKTtcclxuXHJcbiAgICAgIGV4cGVjdChoaXN0b3J5LnBheW1lbnRzKS50b0hhdmVMZW5ndGgoMik7XHJcbiAgICAgIGV4cGVjdChoaXN0b3J5LnRvdGFsKS50b0JlKDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IHBhZ2luYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tQYXltZW50UmVwb3NpdG9yeS5nZXRQYXltZW50SGlzdG9yeSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgcGF5bWVudHM6IFtdLFxyXG4gICAgICAgIHRvdGFsOiAxMDAsXHJcbiAgICAgICAgbGltaXQ6IDEwLFxyXG4gICAgICAgIG9mZnNldDogMjAsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IG1vY2tQYXltZW50UmVwb3NpdG9yeS5nZXRQYXltZW50SGlzdG9yeSgndXNlci0xMjMnLCAxMCwgMjApO1xyXG5cclxuICAgICAgZXhwZWN0KGhpc3RvcnkubGltaXQpLnRvQmUoMTApO1xyXG4gICAgICBleHBlY3QoaGlzdG9yeS5vZmZzZXQpLnRvQmUoMjApO1xyXG4gICAgICBleHBlY3QoaGlzdG9yeS50b3RhbCkudG9CZSgxMDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFcnJvciBTY2VuYXJpb3MnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHBheW1lbnQgcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW52YWxpZFJlcXVlc3QgPSB7XHJcbiAgICAgICAgdXNlcklkOiAnJyxcclxuICAgICAgICBhbW91bnQ6IDAsXHJcbiAgICAgICAgY3VycmVuY3k6ICcnLFxyXG4gICAgICAgIHBheW1lbnRNZXRob2RJZDogJycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwYXltZW50UHJvY2Vzc29yLnByb2Nlc3NQYXltZW50KGludmFsaWRSZXF1ZXN0KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwYXltZW50IG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1BheW1lbnRSZXBvc2l0b3J5LmdldFBheW1lbnRCeUlkID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGF5bWVudFByb2Nlc3Nvci5yZWZ1bmRQYXltZW50KCdwYXktMTIzJyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yPy5jb2RlKS50b0JlKCdOT1RfRk9VTkQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGR1cGxpY2F0ZSBwYXltZW50IHByZXZlbnRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBheW1lbnRSZXF1ZXN0ID0ge1xyXG4gICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcclxuICAgICAgICBhbW91bnQ6IDk5OTksXHJcbiAgICAgICAgY3VycmVuY3k6ICd1c2QnLFxyXG4gICAgICAgIHBheW1lbnRNZXRob2RJZDogJ3BtXzEyMycsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBGaXJzdCBwYXltZW50XHJcbiAgICAgIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBwYXltZW50UHJvY2Vzc29yLnByb2Nlc3NQYXltZW50KHBheW1lbnRSZXF1ZXN0KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdDEuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuXHJcbiAgICAgIC8vIER1cGxpY2F0ZSBwYXltZW50IHdpdGggc2FtZSBpZGVtcG90ZW5jeSBrZXkgc2hvdWxkIHJldHVybiBjYWNoZWQgcmVzdWx0XHJcbiAgICAgIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBwYXltZW50UHJvY2Vzc29yLnByb2Nlc3NQYXltZW50KHBheW1lbnRSZXF1ZXN0KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdDIuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQWNBO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLHNDQUFzQyxDQUFDO0FBQ2pERCxXQUFBLEdBQUtDLElBQUksQ0FBQywyQ0FBMkMsQ0FBQztBQUN0REQsV0FBQSxHQUFLQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7QUFaM0IsSUFBQUMsaUJBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGtCQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxlQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxpQkFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssTUFBQSxHQUFBTCxPQUFBO0FBQTZELFNBQUFILFlBQUE7RUFBQTtJQUFBUztFQUFBLElBQUFOLE9BQUE7RUFBQUgsV0FBQSxHQUFBQSxDQUFBLEtBQUFTLElBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFWN0Q7QUFDQTtBQUNBO0FBQ0E7QUFnQkFDLFFBQVEsQ0FBQyxnQ0FBZ0MsRUFBRSxNQUFNO0VBQy9DLElBQUlDLGdCQUFrQztFQUN0QyxJQUFJQyxjQUE4QjtFQUNsQyxJQUFJQyxnQkFBa0M7RUFDdEMsSUFBSUMsZ0JBQWtEO0VBQ3RELElBQUlDLHFCQUFxRDtFQUV6REMsVUFBVSxDQUFDLE1BQU07SUFDZkYsZ0JBQWdCLEdBQUcsSUFBSUcsaUNBQW1CLENBQUMsYUFBYSxDQUFxQztJQUM3RkYscUJBQXFCLEdBQUcsSUFBSUcsb0NBQWlCLENBQUMsSUFBVyxDQUFtQztJQUM1RlAsZ0JBQWdCLEdBQUcsSUFBSVEsa0NB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