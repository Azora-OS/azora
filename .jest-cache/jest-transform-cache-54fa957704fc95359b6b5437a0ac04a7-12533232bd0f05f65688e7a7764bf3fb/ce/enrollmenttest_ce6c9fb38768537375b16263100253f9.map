{"version":3,"names":["_factories","require","_database","prisma","getTestPrismaClient","describe","afterEach","cleanupTestDatabase","it","student","userFactory","createStudent","instructor","createInstructor","course","courseFactory","create","instructorId","id","enrollment","enrollmentFactory","userId","courseId","expect","toBeDefined","toBe","progress","updated","update","where","data","completed","status","completedAt","Date"],"sources":["enrollment.test.ts"],"sourcesContent":["import { userFactory, courseFactory, enrollmentFactory } from '../../../tests/factories';\nimport { getTestPrismaClient, cleanupTestDatabase } from '../../../tests/utils/database';\n\nconst prisma = getTestPrismaClient();\n\ndescribe('Education Service - Enrollment', () => {\n  afterEach(async () => {\n    await cleanupTestDatabase();\n  });\n\n  it('should create enrollment', async () => {\n    const student = await userFactory.createStudent();\n    const instructor = await userFactory.createInstructor();\n    const course = await courseFactory.create({ instructorId: instructor.id });\n\n    const enrollment = await enrollmentFactory.create({\n      userId: student.id,\n      courseId: course.id,\n    });\n\n    expect(enrollment).toBeDefined();\n    expect(enrollment.userId).toBe(student.id);\n    expect(enrollment.courseId).toBe(course.id);\n  });\n\n  it('should update enrollment progress', async () => {\n    const student = await userFactory.createStudent();\n    const instructor = await userFactory.createInstructor();\n    const course = await courseFactory.create({ instructorId: instructor.id });\n\n    const enrollment = await enrollmentFactory.create({\n      userId: student.id,\n      courseId: course.id,\n      progress: 50,\n    });\n\n    const updated = await prisma.enrollment.update({\n      where: { id: enrollment.id },\n      data: { progress: 75 },\n    });\n\n    expect(updated.progress).toBe(75);\n  });\n\n  it('should complete enrollment', async () => {\n    const student = await userFactory.createStudent();\n    const instructor = await userFactory.createInstructor();\n    const course = await courseFactory.create({ instructorId: instructor.id });\n\n    const enrollment = await enrollmentFactory.create({\n      userId: student.id,\n      courseId: course.id,\n    });\n\n    const completed = await prisma.enrollment.update({\n      where: { id: enrollment.id },\n      data: {\n        status: 'COMPLETED',\n        progress: 100,\n        completedAt: new Date(),\n      },\n    });\n\n    expect(completed.status).toBe('COMPLETED');\n    expect(completed.progress).toBe(100);\n    expect(completed.completedAt).toBeDefined();\n  });\n});"],"mappings":"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","ignoreList":[]}