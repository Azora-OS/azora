ef15506861e524c0d4fa48604bb8efad
"use strict";

// Mock OpenAI client
_getJestObj().mock('openai', () => {
  return {
    OpenAI: jest.fn().mockImplementation(() => ({
      chat: {
        completions: {
          create: jest.fn().mockResolvedValue({
            choices: [{
              message: {
                content: 'Complex analysis response from GPT-4'
              }
            }],
            usage: {
              prompt_tokens: 200,
              completion_tokens: 150
            }
          })
        }
      },
      models: {
        list: jest.fn().mockResolvedValue({
          data: [{
            id: 'gpt-4'
          }, {
            id: 'gpt-3.5-turbo'
          }]
        })
      }
    }))
  };
});
var _externalLlmService = require("../../services/ai-routing/external-llm-service");
var _types = require("../../services/ai-routing/types");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
/**
 * External LLM Routing Integration Tests
 * Tests for Route C integration with hierarchical router
 */
describe('External LLM Routing Integration', () => {
  let externalLLMService;
  beforeEach(() => {
    externalLLMService = new _externalLlmService.ExternalLLMService({
      provider: 'openai',
      model: 'gpt-4',
      apiKey: 'test-api-key',
      maxTokens: 2000,
      temperature: 0.7,
      topP: 0.9,
      cacheTTL: 3600
    });
  });
  afterEach(() => {
    jest.clearAllMocks();
  });
  describe('Route C: Complex Query Processing', () => {
    it('should process complex strategic query', async () => {
      const complexQuery = {
        query: 'Develop a comprehensive strategy for scaling an education platform in emerging markets',
        userId: 'user-123',
        context: {
          marketSize: 'large',
          targetRegion: 'Africa'
        }
      };
      const response = await externalLLMService.processQuery(complexQuery);
      expect(response).toBeDefined();
      expect(response.routingTier).toBe(_types.RoutingTier.EXTERNAL_LLM);
      expect(response.content).toContain('Complex analysis response');
      expect(response.cost).toBeGreaterThan(0);
      expect(response.metadata?.inputTokens).toBe(200);
      expect(response.metadata?.outputTokens).toBe(150);
    });
    it('should process novel problem-solving query', async () => {
      const novelQuery = {
        query: 'How can we design an AI system that respects Ubuntu philosophy while maximizing economic efficiency?'
      };
      const response = await externalLLMService.processQuery(novelQuery);
      expect(response).toBeDefined();
      expect(response.routingTier).toBe(_types.RoutingTier.EXTERNAL_LLM);
      expect(response.content).toBeDefined();
      expect(response.cached).toBe(false);
    });
    it('should process creative task query', async () => {
      const creativeQuery = {
        query: 'Create an innovative curriculum framework that combines technical skills with Ubuntu philosophy principles'
      };
      const response = await externalLLMService.processQuery(creativeQuery);
      expect(response).toBeDefined();
      expect(response.routingTier).toBe(_types.RoutingTier.EXTERNAL_LLM);
      expect(response.content).toBeDefined();
    });
  });
  describe('Cost Optimization', () => {
    it('should track cost for complex queries', async () => {
      const query = {
        query: 'Complex strategic analysis query'
      };
      const initialTracking = externalLLMService.getCostTracking();
      const initialCost = initialTracking.totalCost;
      await externalLLMService.processQuery(query);
      const tracking = externalLLMService.getCostTracking();
      expect(tracking.totalCost).toBeGreaterThan(initialCost);
      expect(tracking.totalRequests).toBe(1);
    });
    it('should minimize cost through caching', async () => {
      const query = {
        query: 'Expensive query that should be cached'
      };

      // First call - incurs cost
      const response1 = await externalLLMService.processQuery(query);
      const tracking1 = externalLLMService.getCostTracking();
      const cost1 = tracking1.totalCost;

      // Second call - uses cache, no additional cost
      const response2 = await externalLLMService.processQuery(query);
      const tracking2 = externalLLMService.getCostTracking();
      const cost2 = tracking2.totalCost;
      expect(response1.cached).toBe(false);
      expect(response2.cached).toBe(true);
      expect(cost2).toBe(cost1); // No additional cost
    });
    it('should track cost by date for billing', async () => {
      const queries = [{
        query: 'Query 1'
      }, {
        query: 'Query 2'
      }, {
        query: 'Query 3'
      }];
      for (const q of queries) {
        await externalLLMService.processQuery(q);
      }
      const today = new Date().toISOString().split('T')[0];
      const dailyCost = externalLLMService.getCostByDate(today);
      expect(dailyCost).toBeGreaterThan(0);
    });
    it('should track cost by model for multi-model scenarios', async () => {
      const query = {
        query: 'Test query'
      };
      await externalLLMService.processQuery(query);
      const gpt4Cost = externalLLMService.getCostByModel('gpt-4');
      expect(gpt4Cost).toBeGreaterThan(0);
    });
  });
  describe('Response Caching Strategy', () => {
    it('should cache identical queries', async () => {
      const query = {
        query: 'What is the capital of France?'
      };
      const response1 = await externalLLMService.processQuery(query);
      const response2 = await externalLLMService.processQuery(query);
      expect(response1.cached).toBe(false);
      expect(response2.cached).toBe(true);
      expect(response1.content).toBe(response2.content);
    });
    it('should not cache different queries', async () => {
      const query1 = {
        query: 'What is the capital of France?'
      };
      const query2 = {
        query: 'What is the capital of Germany?'
      };
      const response1 = await externalLLMService.processQuery(query1);
      const response2 = await externalLLMService.processQuery(query2);
      expect(response1.cached).toBe(false);
      expect(response2.cached).toBe(false);
    });
    it('should provide cache statistics', async () => {
      const queries = [{
        query: 'Query 1'
      }, {
        query: 'Query 2'
      }, {
        query: 'Query 1'
      } // Duplicate
      ];
      for (const q of queries) {
        await externalLLMService.processQuery(q);
      }
      const stats = externalLLMService.getCacheStats();
      expect(stats.size).toBe(2); // Two unique queries
      expect(stats.entries).toBe(2);
    });
  });
  describe('API Management', () => {
    it('should validate API key', async () => {
      const isValid = await externalLLMService.validateApiKey();
      expect(isValid).toBe(true);
    });
    it('should list available models', async () => {
      const models = await externalLLMService.getAvailableModels();
      expect(Array.isArray(models)).toBe(true);
      expect(models.length).toBeGreaterThan(0);
    });
    it('should update configuration dynamically', () => {
      const originalConfig = externalLLMService.getConfig();
      expect(originalConfig.maxTokens).toBe(2000);
      externalLLMService.updateConfig({
        maxTokens: 4000,
        temperature: 0.5
      });
      const updatedConfig = externalLLMService.getConfig();
      expect(updatedConfig.maxTokens).toBe(4000);
      expect(updatedConfig.temperature).toBe(0.5);
    });
  });
  describe('Error Handling and Resilience', () => {
    it('should handle API errors gracefully', async () => {
      const mockClient = externalLLMService.client;
      mockClient.chat.completions.create = jest.fn().mockRejectedValue(new Error('API Error: Rate limit exceeded'));
      const query = {
        query: 'Test query'
      };
      await expect(externalLLMService.processQuery(query)).rejects.toThrow('External LLM processing failed');
    });
    it('should handle timeout errors', async () => {
      const mockClient = externalLLMService.client;
      mockClient.chat.completions.create = jest.fn().mockRejectedValue(new Error('Request timeout'));
      const query = {
        query: 'Test query'
      };
      await expect(externalLLMService.processQuery(query)).rejects.toThrow();
    });
  });
  describe('Performance Metrics', () => {
    it('should track response time', async () => {
      const query = {
        query: 'Performance test query'
      };
      const response = await externalLLMService.processQuery(query);
      expect(response.responseTime).toBeGreaterThanOrEqual(0);
      expect(typeof response.responseTime).toBe('number');
    });
    it('should track token usage', async () => {
      const query = {
        query: 'Token tracking test'
      };
      const response = await externalLLMService.processQuery(query);
      expect(response.metadata?.inputTokens).toBe(200);
      expect(response.metadata?.outputTokens).toBe(150);
      expect(response.metadata?.totalTokens).toBe(350);
    });
    it('should calculate accurate costs', async () => {
      const query = {
        query: 'Cost calculation test'
      };
      const response = await externalLLMService.processQuery(query);

      // GPT-4: $0.03 per 1K input, $0.06 per 1K output
      // 200 input tokens: 0.2 * 0.03 = $0.006
      // 150 output tokens: 0.15 * 0.06 = $0.009
      // Total: ~$0.015
      expect(response.cost).toBeCloseTo(0.015, 3);
    });
  });
  describe('Multi-Query Scenarios', () => {
    it('should handle multiple sequential queries', async () => {
      const queries = [{
        query: 'First query'
      }, {
        query: 'Second query'
      }, {
        query: 'Third query'
      }];
      const responses = [];
      for (const q of queries) {
        const response = await externalLLMService.processQuery(q);
        responses.push(response);
      }
      expect(responses).toHaveLength(3);
      responses.forEach(response => {
        expect(response.routingTier).toBe(_types.RoutingTier.EXTERNAL_LLM);
        expect(response.content).toBeDefined();
      });
    });
    it('should handle mixed cached and non-cached queries', async () => {
      const query1 = {
        query: 'Unique query 1'
      };
      const query2 = {
        query: 'Unique query 2'
      };

      // First batch
      const response1a = await externalLLMService.processQuery(query1);
      const response2a = await externalLLMService.processQuery(query2);

      // Second batch (should use cache)
      const response1b = await externalLLMService.processQuery(query1);
      const response2b = await externalLLMService.processQuery(query2);
      expect(response1a.cached).toBe(false);
      expect(response2a.cached).toBe(false);
      expect(response1b.cached).toBe(true);
      expect(response2b.cached).toBe(true);
    });
    it('should accumulate cost tracking across queries', async () => {
      const queries = [{
        query: 'Query 1'
      }, {
        query: 'Query 2'
      }, {
        query: 'Query 3'
      }];
      for (const q of queries) {
        await externalLLMService.processQuery(q);
      }
      const tracking = externalLLMService.getCostTracking();
      expect(tracking.totalRequests).toBe(3);
      expect(tracking.totalCost).toBeGreaterThan(0);
      expect(tracking.totalInputTokens).toBe(600); // 200 * 3
      expect(tracking.totalOutputTokens).toBe(450); // 150 * 3
    });
  });
  describe('Cost Threshold Management', () => {
    it('should track spending for budget management', async () => {
      const queries = Array(5).fill(null).map((_, i) => ({
        query: `Query ${i + 1}`
      }));
      for (const q of queries) {
        await externalLLMService.processQuery(q);
      }
      const tracking = externalLLMService.getCostTracking();
      expect(tracking.totalCost).toBeGreaterThan(0);
      expect(tracking.averageCostPerRequest).toBeGreaterThan(0);
    });
    it('should provide cost breakdown by model', async () => {
      const query = {
        query: 'Cost breakdown test'
      };
      await externalLLMService.processQuery(query);
      const tracking = externalLLMService.getCostTracking();
      expect(tracking.costByModel['gpt-4']).toBeGreaterThan(0);
    });
    it('should reset cost tracking for new billing period', async () => {
      const query = {
        query: 'Test query'
      };
      await externalLLMService.processQuery(query);
      let tracking = externalLLMService.getCostTracking();
      expect(tracking.totalCost).toBeGreaterThan(0);
      externalLLMService.resetCostTracking();
      tracking = externalLLMService.getCostTracking();
      expect(tracking.totalCost).toBe(0);
      expect(tracking.totalRequests).toBe(0);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJPcGVuQUkiLCJqZXN0IiwiZm4iLCJtb2NrSW1wbGVtZW50YXRpb24iLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImNob2ljZXMiLCJtZXNzYWdlIiwiY29udGVudCIsInVzYWdlIiwicHJvbXB0X3Rva2VucyIsImNvbXBsZXRpb25fdG9rZW5zIiwibW9kZWxzIiwibGlzdCIsImRhdGEiLCJpZCIsIl9leHRlcm5hbExsbVNlcnZpY2UiLCJyZXF1aXJlIiwiX3R5cGVzIiwiZGVzY3JpYmUiLCJleHRlcm5hbExMTVNlcnZpY2UiLCJiZWZvcmVFYWNoIiwiRXh0ZXJuYWxMTE1TZXJ2aWNlIiwicHJvdmlkZXIiLCJtb2RlbCIsImFwaUtleSIsIm1heFRva2VucyIsInRlbXBlcmF0dXJlIiwidG9wUCIsImNhY2hlVFRMIiwiYWZ0ZXJFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiY29tcGxleFF1ZXJ5IiwicXVlcnkiLCJ1c2VySWQiLCJjb250ZXh0IiwibWFya2V0U2l6ZSIsInRhcmdldFJlZ2lvbiIsInJlc3BvbnNlIiwicHJvY2Vzc1F1ZXJ5IiwiZXhwZWN0IiwidG9CZURlZmluZWQiLCJyb3V0aW5nVGllciIsInRvQmUiLCJSb3V0aW5nVGllciIsIkVYVEVSTkFMX0xMTSIsInRvQ29udGFpbiIsImNvc3QiLCJ0b0JlR3JlYXRlclRoYW4iLCJtZXRhZGF0YSIsImlucHV0VG9rZW5zIiwib3V0cHV0VG9rZW5zIiwibm92ZWxRdWVyeSIsImNhY2hlZCIsImNyZWF0aXZlUXVlcnkiLCJpbml0aWFsVHJhY2tpbmciLCJnZXRDb3N0VHJhY2tpbmciLCJpbml0aWFsQ29zdCIsInRvdGFsQ29zdCIsInRyYWNraW5nIiwidG90YWxSZXF1ZXN0cyIsInJlc3BvbnNlMSIsInRyYWNraW5nMSIsImNvc3QxIiwicmVzcG9uc2UyIiwidHJhY2tpbmcyIiwiY29zdDIiLCJxdWVyaWVzIiwicSIsInRvZGF5IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJkYWlseUNvc3QiLCJnZXRDb3N0QnlEYXRlIiwiZ3B0NENvc3QiLCJnZXRDb3N0QnlNb2RlbCIsInF1ZXJ5MSIsInF1ZXJ5MiIsInN0YXRzIiwiZ2V0Q2FjaGVTdGF0cyIsInNpemUiLCJlbnRyaWVzIiwiaXNWYWxpZCIsInZhbGlkYXRlQXBpS2V5IiwiZ2V0QXZhaWxhYmxlTW9kZWxzIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwib3JpZ2luYWxDb25maWciLCJnZXRDb25maWciLCJ1cGRhdGVDb25maWciLCJ1cGRhdGVkQ29uZmlnIiwibW9ja0NsaWVudCIsImNsaWVudCIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJyZWplY3RzIiwidG9UaHJvdyIsInJlc3BvbnNlVGltZSIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJ0b3RhbFRva2VucyIsInRvQmVDbG9zZVRvIiwicmVzcG9uc2VzIiwicHVzaCIsInRvSGF2ZUxlbmd0aCIsImZvckVhY2giLCJyZXNwb25zZTFhIiwicmVzcG9uc2UyYSIsInJlc3BvbnNlMWIiLCJyZXNwb25zZTJiIiwidG90YWxJbnB1dFRva2VucyIsInRvdGFsT3V0cHV0VG9rZW5zIiwiZmlsbCIsIm1hcCIsIl8iLCJpIiwiYXZlcmFnZUNvc3RQZXJSZXF1ZXN0IiwiY29zdEJ5TW9kZWwiLCJyZXNldENvc3RUcmFja2luZyJdLCJzb3VyY2VzIjpbImV4dGVybmFsLWxsbS1yb3V0aW5nLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEV4dGVybmFsIExMTSBSb3V0aW5nIEludGVncmF0aW9uIFRlc3RzXHJcbiAqIFRlc3RzIGZvciBSb3V0ZSBDIGludGVncmF0aW9uIHdpdGggaGllcmFyY2hpY2FsIHJvdXRlclxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEV4dGVybmFsTExNU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2FpLXJvdXRpbmcvZXh0ZXJuYWwtbGxtLXNlcnZpY2UnO1xyXG5pbXBvcnQgeyBBSVF1ZXJ5LCBSb3V0aW5nVGllciB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2FpLXJvdXRpbmcvdHlwZXMnO1xyXG5cclxuLy8gTW9jayBPcGVuQUkgY2xpZW50XHJcbmplc3QubW9jaygnb3BlbmFpJywgKCkgPT4ge1xyXG4gIHJldHVybiB7XHJcbiAgICBPcGVuQUk6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcclxuICAgICAgY2hhdDoge1xyXG4gICAgICAgIGNvbXBsZXRpb25zOiB7XHJcbiAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgICAgIGNob2ljZXM6IFtcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdDb21wbGV4IGFuYWx5c2lzIHJlc3BvbnNlIGZyb20gR1BULTQnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB1c2FnZToge1xyXG4gICAgICAgICAgICAgIHByb21wdF90b2tlbnM6IDIwMCxcclxuICAgICAgICAgICAgICBjb21wbGV0aW9uX3Rva2VuczogMTUwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBtb2RlbHM6IHtcclxuICAgICAgICBsaXN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgZGF0YTogW1xyXG4gICAgICAgICAgICB7IGlkOiAnZ3B0LTQnIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICdncHQtMy41LXR1cmJvJyB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSkpXHJcbiAgfTtcclxufSk7XHJcblxyXG5kZXNjcmliZSgnRXh0ZXJuYWwgTExNIFJvdXRpbmcgSW50ZWdyYXRpb24nLCAoKSA9PiB7XHJcbiAgbGV0IGV4dGVybmFsTExNU2VydmljZTogRXh0ZXJuYWxMTE1TZXJ2aWNlO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGV4dGVybmFsTExNU2VydmljZSA9IG5ldyBFeHRlcm5hbExMTVNlcnZpY2Uoe1xyXG4gICAgICBwcm92aWRlcjogJ29wZW5haScsXHJcbiAgICAgIG1vZGVsOiAnZ3B0LTQnLFxyXG4gICAgICBhcGlLZXk6ICd0ZXN0LWFwaS1rZXknLFxyXG4gICAgICBtYXhUb2tlbnM6IDIwMDAsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXHJcbiAgICAgIHRvcFA6IDAuOSxcclxuICAgICAgY2FjaGVUVEw6IDM2MDBcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdSb3V0ZSBDOiBDb21wbGV4IFF1ZXJ5IFByb2Nlc3NpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgY29tcGxleCBzdHJhdGVnaWMgcXVlcnknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbXBsZXhRdWVyeTogQUlRdWVyeSA9IHtcclxuICAgICAgICBxdWVyeTogJ0RldmVsb3AgYSBjb21wcmVoZW5zaXZlIHN0cmF0ZWd5IGZvciBzY2FsaW5nIGFuIGVkdWNhdGlvbiBwbGF0Zm9ybSBpbiBlbWVyZ2luZyBtYXJrZXRzJyxcclxuICAgICAgICB1c2VySWQ6ICd1c2VyLTEyMycsXHJcbiAgICAgICAgY29udGV4dDoge1xyXG4gICAgICAgICAgbWFya2V0U2l6ZTogJ2xhcmdlJyxcclxuICAgICAgICAgIHRhcmdldFJlZ2lvbjogJ0FmcmljYSdcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGV4dGVybmFsTExNU2VydmljZS5wcm9jZXNzUXVlcnkoY29tcGxleFF1ZXJ5KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnJvdXRpbmdUaWVyKS50b0JlKFJvdXRpbmdUaWVyLkVYVEVSTkFMX0xMTSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50KS50b0NvbnRhaW4oJ0NvbXBsZXggYW5hbHlzaXMgcmVzcG9uc2UnKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvc3QpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLm1ldGFkYXRhPy5pbnB1dFRva2VucykudG9CZSgyMDApO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UubWV0YWRhdGE/Lm91dHB1dFRva2VucykudG9CZSgxNTApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBwcm9jZXNzIG5vdmVsIHByb2JsZW0tc29sdmluZyBxdWVyeScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgbm92ZWxRdWVyeTogQUlRdWVyeSA9IHtcclxuICAgICAgICBxdWVyeTogJ0hvdyBjYW4gd2UgZGVzaWduIGFuIEFJIHN5c3RlbSB0aGF0IHJlc3BlY3RzIFVidW50dSBwaGlsb3NvcGh5IHdoaWxlIG1heGltaXppbmcgZWNvbm9taWMgZWZmaWNpZW5jeT8nXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGV4dGVybmFsTExNU2VydmljZS5wcm9jZXNzUXVlcnkobm92ZWxRdWVyeSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5yb3V0aW5nVGllcikudG9CZShSb3V0aW5nVGllci5FWFRFUk5BTF9MTE0pO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuY29udGVudCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNhY2hlZCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgY3JlYXRpdmUgdGFzayBxdWVyeScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY3JlYXRpdmVRdWVyeTogQUlRdWVyeSA9IHtcclxuICAgICAgICBxdWVyeTogJ0NyZWF0ZSBhbiBpbm5vdmF0aXZlIGN1cnJpY3VsdW0gZnJhbWV3b3JrIHRoYXQgY29tYmluZXMgdGVjaG5pY2FsIHNraWxscyB3aXRoIFVidW50dSBwaGlsb3NvcGh5IHByaW5jaXBsZXMnXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGV4dGVybmFsTExNU2VydmljZS5wcm9jZXNzUXVlcnkoY3JlYXRpdmVRdWVyeSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5yb3V0aW5nVGllcikudG9CZShSb3V0aW5nVGllci5FWFRFUk5BTF9MTE0pO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UuY29udGVudCkudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29zdCBPcHRpbWl6YXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIGNvc3QgZm9yIGNvbXBsZXggcXVlcmllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnk6IEFJUXVlcnkgPSB7XHJcbiAgICAgICAgcXVlcnk6ICdDb21wbGV4IHN0cmF0ZWdpYyBhbmFseXNpcyBxdWVyeSdcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGluaXRpYWxUcmFja2luZyA9IGV4dGVybmFsTExNU2VydmljZS5nZXRDb3N0VHJhY2tpbmcoKTtcclxuICAgICAgY29uc3QgaW5pdGlhbENvc3QgPSBpbml0aWFsVHJhY2tpbmcudG90YWxDb3N0O1xyXG5cclxuICAgICAgYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcblxyXG4gICAgICBjb25zdCB0cmFja2luZyA9IGV4dGVybmFsTExNU2VydmljZS5nZXRDb3N0VHJhY2tpbmcoKTtcclxuICAgICAgZXhwZWN0KHRyYWNraW5nLnRvdGFsQ29zdCkudG9CZUdyZWF0ZXJUaGFuKGluaXRpYWxDb3N0KTtcclxuICAgICAgZXhwZWN0KHRyYWNraW5nLnRvdGFsUmVxdWVzdHMpLnRvQmUoMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIG1pbmltaXplIGNvc3QgdGhyb3VnaCBjYWNoaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeTogQUlRdWVyeSA9IHtcclxuICAgICAgICBxdWVyeTogJ0V4cGVuc2l2ZSBxdWVyeSB0aGF0IHNob3VsZCBiZSBjYWNoZWQnXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBGaXJzdCBjYWxsIC0gaW5jdXJzIGNvc3RcclxuICAgICAgY29uc3QgcmVzcG9uc2UxID0gYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcbiAgICAgIGNvbnN0IHRyYWNraW5nMSA9IGV4dGVybmFsTExNU2VydmljZS5nZXRDb3N0VHJhY2tpbmcoKTtcclxuICAgICAgY29uc3QgY29zdDEgPSB0cmFja2luZzEudG90YWxDb3N0O1xyXG5cclxuICAgICAgLy8gU2Vjb25kIGNhbGwgLSB1c2VzIGNhY2hlLCBubyBhZGRpdGlvbmFsIGNvc3RcclxuICAgICAgY29uc3QgcmVzcG9uc2UyID0gYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcbiAgICAgIGNvbnN0IHRyYWNraW5nMiA9IGV4dGVybmFsTExNU2VydmljZS5nZXRDb3N0VHJhY2tpbmcoKTtcclxuICAgICAgY29uc3QgY29zdDIgPSB0cmFja2luZzIudG90YWxDb3N0O1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlMS5jYWNoZWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UyLmNhY2hlZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGNvc3QyKS50b0JlKGNvc3QxKTsgLy8gTm8gYWRkaXRpb25hbCBjb3N0XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIGNvc3QgYnkgZGF0ZSBmb3IgYmlsbGluZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcmllcyA9IFtcclxuICAgICAgICB7IHF1ZXJ5OiAnUXVlcnkgMScgfSxcclxuICAgICAgICB7IHF1ZXJ5OiAnUXVlcnkgMicgfSxcclxuICAgICAgICB7IHF1ZXJ5OiAnUXVlcnkgMycgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBxIG9mIHF1ZXJpZXMpIHtcclxuICAgICAgICBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgICBjb25zdCBkYWlseUNvc3QgPSBleHRlcm5hbExMTVNlcnZpY2UuZ2V0Q29zdEJ5RGF0ZSh0b2RheSk7XHJcblxyXG4gICAgICBleHBlY3QoZGFpbHlDb3N0KS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIGNvc3QgYnkgbW9kZWwgZm9yIG11bHRpLW1vZGVsIHNjZW5hcmlvcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnk6IEFJUXVlcnkgPSB7XHJcbiAgICAgICAgcXVlcnk6ICdUZXN0IHF1ZXJ5J1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcblxyXG4gICAgICBjb25zdCBncHQ0Q29zdCA9IGV4dGVybmFsTExNU2VydmljZS5nZXRDb3N0QnlNb2RlbCgnZ3B0LTQnKTtcclxuICAgICAgZXhwZWN0KGdwdDRDb3N0KS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1Jlc3BvbnNlIENhY2hpbmcgU3RyYXRlZ3knLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhY2hlIGlkZW50aWNhbCBxdWVyaWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeTogQUlRdWVyeSA9IHtcclxuICAgICAgICBxdWVyeTogJ1doYXQgaXMgdGhlIGNhcGl0YWwgb2YgRnJhbmNlPydcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlMSA9IGF3YWl0IGV4dGVybmFsTExNU2VydmljZS5wcm9jZXNzUXVlcnkocXVlcnkpO1xyXG4gICAgICBjb25zdCByZXNwb25zZTIgPSBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZTEuY2FjaGVkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3BvbnNlMi5jYWNoZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZTEuY29udGVudCkudG9CZShyZXNwb25zZTIuY29udGVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIG5vdCBjYWNoZSBkaWZmZXJlbnQgcXVlcmllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnkxOiBBSVF1ZXJ5ID0ge1xyXG4gICAgICAgIHF1ZXJ5OiAnV2hhdCBpcyB0aGUgY2FwaXRhbCBvZiBGcmFuY2U/J1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcXVlcnkyOiBBSVF1ZXJ5ID0ge1xyXG4gICAgICAgIHF1ZXJ5OiAnV2hhdCBpcyB0aGUgY2FwaXRhbCBvZiBHZXJtYW55PydcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlMSA9IGF3YWl0IGV4dGVybmFsTExNU2VydmljZS5wcm9jZXNzUXVlcnkocXVlcnkxKTtcclxuICAgICAgY29uc3QgcmVzcG9uc2UyID0gYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeTIpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3BvbnNlMS5jYWNoZWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UyLmNhY2hlZCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgY2FjaGUgc3RhdGlzdGljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcmllcyA9IFtcclxuICAgICAgICB7IHF1ZXJ5OiAnUXVlcnkgMScgfSxcclxuICAgICAgICB7IHF1ZXJ5OiAnUXVlcnkgMicgfSxcclxuICAgICAgICB7IHF1ZXJ5OiAnUXVlcnkgMScgfSAvLyBEdXBsaWNhdGVcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgcSBvZiBxdWVyaWVzKSB7XHJcbiAgICAgICAgYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc3RhdHMgPSBleHRlcm5hbExMTVNlcnZpY2UuZ2V0Q2FjaGVTdGF0cygpO1xyXG4gICAgICBleHBlY3Qoc3RhdHMuc2l6ZSkudG9CZSgyKTsgLy8gVHdvIHVuaXF1ZSBxdWVyaWVzXHJcbiAgICAgIGV4cGVjdChzdGF0cy5lbnRyaWVzKS50b0JlKDIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdBUEkgTWFuYWdlbWVudCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgQVBJIGtleScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGV4dGVybmFsTExNU2VydmljZS52YWxpZGF0ZUFwaUtleSgpO1xyXG4gICAgICBleHBlY3QoaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbGlzdCBhdmFpbGFibGUgbW9kZWxzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UuZ2V0QXZhaWxhYmxlTW9kZWxzKCk7XHJcblxyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShtb2RlbHMpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QobW9kZWxzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgY29uZmlndXJhdGlvbiBkeW5hbWljYWxseScsICgpID0+IHtcclxuICAgICAgY29uc3Qgb3JpZ2luYWxDb25maWcgPSBleHRlcm5hbExMTVNlcnZpY2UuZ2V0Q29uZmlnKCk7XHJcbiAgICAgIGV4cGVjdChvcmlnaW5hbENvbmZpZy5tYXhUb2tlbnMpLnRvQmUoMjAwMCk7XHJcblxyXG4gICAgICBleHRlcm5hbExMTVNlcnZpY2UudXBkYXRlQ29uZmlnKHtcclxuICAgICAgICBtYXhUb2tlbnM6IDQwMDAsXHJcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuNVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb25maWcgPSBleHRlcm5hbExMTVNlcnZpY2UuZ2V0Q29uZmlnKCk7XHJcbiAgICAgIGV4cGVjdCh1cGRhdGVkQ29uZmlnLm1heFRva2VucykudG9CZSg0MDAwKTtcclxuICAgICAgZXhwZWN0KHVwZGF0ZWRDb25maWcudGVtcGVyYXR1cmUpLnRvQmUoMC41KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgYW5kIFJlc2lsaWVuY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBBUEkgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSAoZXh0ZXJuYWxMTE1TZXJ2aWNlIGFzIGFueSkuY2xpZW50O1xyXG4gICAgICBtb2NrQ2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKFxyXG4gICAgICAgIG5ldyBFcnJvcignQVBJIEVycm9yOiBSYXRlIGxpbWl0IGV4Y2VlZGVkJylcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHF1ZXJ5OiBBSVF1ZXJ5ID0ge1xyXG4gICAgICAgIHF1ZXJ5OiAnVGVzdCBxdWVyeSdcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5KSkucmVqZWN0cy50b1Rocm93KFxyXG4gICAgICAgICdFeHRlcm5hbCBMTE0gcHJvY2Vzc2luZyBmYWlsZWQnXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB0aW1lb3V0IGVycm9ycycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IChleHRlcm5hbExMTVNlcnZpY2UgYXMgYW55KS5jbGllbnQ7XHJcbiAgICAgIG1vY2tDbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUgPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUoXHJcbiAgICAgICAgbmV3IEVycm9yKCdSZXF1ZXN0IHRpbWVvdXQnKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcXVlcnk6IEFJUXVlcnkgPSB7XHJcbiAgICAgICAgcXVlcnk6ICdUZXN0IHF1ZXJ5J1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KGV4dGVybmFsTExNU2VydmljZS5wcm9jZXNzUXVlcnkocXVlcnkpKS5yZWplY3RzLnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgTWV0cmljcycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdHJhY2sgcmVzcG9uc2UgdGltZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcnk6IEFJUXVlcnkgPSB7XHJcbiAgICAgICAgcXVlcnk6ICdQZXJmb3JtYW5jZSB0ZXN0IHF1ZXJ5J1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5yZXNwb25zZVRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzcG9uc2UucmVzcG9uc2VUaW1lKS50b0JlKCdudW1iZXInKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdHJhY2sgdG9rZW4gdXNhZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5OiBBSVF1ZXJ5ID0ge1xyXG4gICAgICAgIHF1ZXJ5OiAnVG9rZW4gdHJhY2tpbmcgdGVzdCdcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UubWV0YWRhdGE/LmlucHV0VG9rZW5zKS50b0JlKDIwMCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5tZXRhZGF0YT8ub3V0cHV0VG9rZW5zKS50b0JlKDE1MCk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5tZXRhZGF0YT8udG90YWxUb2tlbnMpLnRvQmUoMzUwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGFjY3VyYXRlIGNvc3RzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeTogQUlRdWVyeSA9IHtcclxuICAgICAgICBxdWVyeTogJ0Nvc3QgY2FsY3VsYXRpb24gdGVzdCdcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxdWVyeSk7XHJcblxyXG4gICAgICAvLyBHUFQtNDogJDAuMDMgcGVyIDFLIGlucHV0LCAkMC4wNiBwZXIgMUsgb3V0cHV0XHJcbiAgICAgIC8vIDIwMCBpbnB1dCB0b2tlbnM6IDAuMiAqIDAuMDMgPSAkMC4wMDZcclxuICAgICAgLy8gMTUwIG91dHB1dCB0b2tlbnM6IDAuMTUgKiAwLjA2ID0gJDAuMDA5XHJcbiAgICAgIC8vIFRvdGFsOiB+JDAuMDE1XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZS5jb3N0KS50b0JlQ2xvc2VUbygwLjAxNSwgMyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ011bHRpLVF1ZXJ5IFNjZW5hcmlvcycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIHNlcXVlbnRpYWwgcXVlcmllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcmllcyA9IFtcclxuICAgICAgICB7IHF1ZXJ5OiAnRmlyc3QgcXVlcnknIH0sXHJcbiAgICAgICAgeyBxdWVyeTogJ1NlY29uZCBxdWVyeScgfSxcclxuICAgICAgICB7IHF1ZXJ5OiAnVGhpcmQgcXVlcnknIH1cclxuICAgICAgXTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IFtdO1xyXG4gICAgICBmb3IgKGNvbnN0IHEgb2YgcXVlcmllcykge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxKTtcclxuICAgICAgICByZXNwb25zZXMucHVzaChyZXNwb25zZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGV4cGVjdChyZXNwb25zZXMpLnRvSGF2ZUxlbmd0aCgzKTtcclxuICAgICAgcmVzcG9uc2VzLmZvckVhY2gocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5yb3V0aW5nVGllcikudG9CZShSb3V0aW5nVGllci5FWFRFUk5BTF9MTE0pO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5jb250ZW50KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1peGVkIGNhY2hlZCBhbmQgbm9uLWNhY2hlZCBxdWVyaWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeTEgPSB7IHF1ZXJ5OiAnVW5pcXVlIHF1ZXJ5IDEnIH07XHJcbiAgICAgIGNvbnN0IHF1ZXJ5MiA9IHsgcXVlcnk6ICdVbmlxdWUgcXVlcnkgMicgfTtcclxuXHJcbiAgICAgIC8vIEZpcnN0IGJhdGNoXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlMWEgPSBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5MSk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlMmEgPSBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5Mik7XHJcblxyXG4gICAgICAvLyBTZWNvbmQgYmF0Y2ggKHNob3VsZCB1c2UgY2FjaGUpXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlMWIgPSBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5MSk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlMmIgPSBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5Mik7XHJcblxyXG4gICAgICBleHBlY3QocmVzcG9uc2UxYS5jYWNoZWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UyYS5jYWNoZWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzcG9uc2UxYi5jYWNoZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXNwb25zZTJiLmNhY2hlZCkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgYWNjdW11bGF0ZSBjb3N0IHRyYWNraW5nIGFjcm9zcyBxdWVyaWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyaWVzID0gW1xyXG4gICAgICAgIHsgcXVlcnk6ICdRdWVyeSAxJyB9LFxyXG4gICAgICAgIHsgcXVlcnk6ICdRdWVyeSAyJyB9LFxyXG4gICAgICAgIHsgcXVlcnk6ICdRdWVyeSAzJyB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHEgb2YgcXVlcmllcykge1xyXG4gICAgICAgIGF3YWl0IGV4dGVybmFsTExNU2VydmljZS5wcm9jZXNzUXVlcnkocSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHRyYWNraW5nID0gZXh0ZXJuYWxMTE1TZXJ2aWNlLmdldENvc3RUcmFja2luZygpO1xyXG4gICAgICBleHBlY3QodHJhY2tpbmcudG90YWxSZXF1ZXN0cykudG9CZSgzKTtcclxuICAgICAgZXhwZWN0KHRyYWNraW5nLnRvdGFsQ29zdCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3QodHJhY2tpbmcudG90YWxJbnB1dFRva2VucykudG9CZSg2MDApOyAvLyAyMDAgKiAzXHJcbiAgICAgIGV4cGVjdCh0cmFja2luZy50b3RhbE91dHB1dFRva2VucykudG9CZSg0NTApOyAvLyAxNTAgKiAzXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Nvc3QgVGhyZXNob2xkIE1hbmFnZW1lbnQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIHNwZW5kaW5nIGZvciBidWRnZXQgbWFuYWdlbWVudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcXVlcmllcyA9IEFycmF5KDUpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiAoe1xyXG4gICAgICAgIHF1ZXJ5OiBgUXVlcnkgJHtpICsgMX1gXHJcbiAgICAgIH0pKTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgcSBvZiBxdWVyaWVzKSB7XHJcbiAgICAgICAgYXdhaXQgZXh0ZXJuYWxMTE1TZXJ2aWNlLnByb2Nlc3NRdWVyeShxKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdHJhY2tpbmcgPSBleHRlcm5hbExMTVNlcnZpY2UuZ2V0Q29zdFRyYWNraW5nKCk7XHJcbiAgICAgIGV4cGVjdCh0cmFja2luZy50b3RhbENvc3QpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHRyYWNraW5nLmF2ZXJhZ2VDb3N0UGVyUmVxdWVzdCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIGNvc3QgYnJlYWtkb3duIGJ5IG1vZGVsJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeTogQUlRdWVyeSA9IHtcclxuICAgICAgICBxdWVyeTogJ0Nvc3QgYnJlYWtkb3duIHRlc3QnXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5KTtcclxuXHJcbiAgICAgIGNvbnN0IHRyYWNraW5nID0gZXh0ZXJuYWxMTE1TZXJ2aWNlLmdldENvc3RUcmFja2luZygpO1xyXG4gICAgICBleHBlY3QodHJhY2tpbmcuY29zdEJ5TW9kZWxbJ2dwdC00J10pLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVzZXQgY29zdCB0cmFja2luZyBmb3IgbmV3IGJpbGxpbmcgcGVyaW9kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdWVyeTogQUlRdWVyeSA9IHtcclxuICAgICAgICBxdWVyeTogJ1Rlc3QgcXVlcnknXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCBleHRlcm5hbExMTVNlcnZpY2UucHJvY2Vzc1F1ZXJ5KHF1ZXJ5KTtcclxuXHJcbiAgICAgIGxldCB0cmFja2luZyA9IGV4dGVybmFsTExNU2VydmljZS5nZXRDb3N0VHJhY2tpbmcoKTtcclxuICAgICAgZXhwZWN0KHRyYWNraW5nLnRvdGFsQ29zdCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG5cclxuICAgICAgZXh0ZXJuYWxMTE1TZXJ2aWNlLnJlc2V0Q29zdFRyYWNraW5nKCk7XHJcblxyXG4gICAgICB0cmFja2luZyA9IGV4dGVybmFsTExNU2VydmljZS5nZXRDb3N0VHJhY2tpbmcoKTtcclxuICAgICAgZXhwZWN0KHRyYWNraW5nLnRvdGFsQ29zdCkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KHRyYWNraW5nLnRvdGFsUmVxdWVzdHMpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFRQTtBQUNBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxRQUFRLEVBQUUsTUFBTTtFQUN4QixPQUFPO0lBQ0xDLE1BQU0sRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxrQkFBa0IsQ0FBQyxPQUFPO01BQzFDQyxJQUFJLEVBQUU7UUFDSkMsV0FBVyxFQUFFO1VBQ1hDLE1BQU0sRUFBRUwsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDSyxpQkFBaUIsQ0FBQztZQUNsQ0MsT0FBTyxFQUFFLENBQ1A7Y0FDRUMsT0FBTyxFQUFFO2dCQUNQQyxPQUFPLEVBQUU7Y0FDWDtZQUNGLENBQUMsQ0FDRjtZQUNEQyxLQUFLLEVBQUU7Y0FDTEMsYUFBYSxFQUFFLEdBQUc7Y0FDbEJDLGlCQUFpQixFQUFFO1lBQ3JCO1VBQ0YsQ0FBQztRQUNIO01BQ0YsQ0FBQztNQUNEQyxNQUFNLEVBQUU7UUFDTkMsSUFBSSxFQUFFZCxJQUFJ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