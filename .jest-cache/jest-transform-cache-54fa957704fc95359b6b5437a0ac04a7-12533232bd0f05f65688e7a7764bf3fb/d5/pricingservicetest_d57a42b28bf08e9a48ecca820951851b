e1b1506457be19ec970fa0bd1cf05970
"use strict";

// Mock Prisma before importing the service
_getJestObj().mock('../../index', () => ({
  prisma: {
    pricingTier: {
      findMany: jest.fn(),
      findUnique: jest.fn(),
      create: jest.fn(),
      update: jest.fn()
    }
  }
}));
var _pricing = require("../pricing.service");
var _index = require("../../index");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('PricingService', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });
  describe('getAllTiers', () => {
    it('should return all pricing tiers sorted by price', async () => {
      const mockTiers = [{
        id: '1',
        name: 'free',
        monthlyPrice: 0,
        studentDiscount: 0,
        features: ['Feature 1'],
        coursesPerMonth: 3,
        aiQueriesPerMonth: 10,
        storageGB: 1,
        supportLevel: 'community',
        createdAt: new Date(),
        updatedAt: new Date()
      }, {
        id: '2',
        name: 'premium',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        features: ['Feature 1', 'Feature 2'],
        coursesPerMonth: 999999,
        aiQueriesPerMonth: 999999,
        storageGB: 10,
        supportLevel: 'priority',
        createdAt: new Date(),
        updatedAt: new Date()
      }];
      _index.prisma.pricingTier.findMany.mockResolvedValue(mockTiers);
      const result = await _pricing.pricingService.getAllTiers();
      expect(result).toHaveLength(2);
      expect(result[0].name).toBe('free');
      expect(result[1].name).toBe('premium');
      expect(_index.prisma.pricingTier.findMany).toHaveBeenCalledWith({
        orderBy: {
          monthlyPrice: 'asc'
        }
      });
    });
  });
  describe('getTierByName', () => {
    it('should return a specific tier by name', async () => {
      const mockTier = {
        id: '1',
        name: 'premium',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        features: ['Feature 1', 'Feature 2'],
        coursesPerMonth: 999999,
        aiQueriesPerMonth: 999999,
        storageGB: 10,
        supportLevel: 'priority',
        createdAt: new Date(),
        updatedAt: new Date()
      };
      _index.prisma.pricingTier.findUnique.mockResolvedValue(mockTier);
      const result = await _pricing.pricingService.getTierByName('premium');
      expect(result).not.toBeNull();
      expect(result?.name).toBe('premium');
      expect(_index.prisma.pricingTier.findUnique).toHaveBeenCalledWith({
        where: {
          name: 'premium'
        }
      });
    });
    it('should return null if tier does not exist', async () => {
      _index.prisma.pricingTier.findUnique.mockResolvedValue(null);
      const result = await _pricing.pricingService.getTierByName('nonexistent');
      expect(result).toBeNull();
    });
  });
  describe('calculateStudentPrice', () => {
    it('should calculate correct student price with discount', () => {
      const price = _pricing.pricingService.calculateStudentPrice(100, 50);
      expect(price).toBe(50);
    });
    it('should calculate correct student price with 30% discount', () => {
      const price = _pricing.pricingService.calculateStudentPrice(99.99, 30);
      expect(price).toBeCloseTo(69.99, 2);
    });
    it('should return original price with 0% discount', () => {
      const price = _pricing.pricingService.calculateStudentPrice(29.99, 0);
      expect(price).toBe(29.99);
    });
  });
  describe('getTierLimits', () => {
    it('should return tier limits for a specific tier', async () => {
      const mockTier = {
        id: '1',
        name: 'premium',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        features: ['Feature 1'],
        coursesPerMonth: 999999,
        aiQueriesPerMonth: 999999,
        storageGB: 10,
        supportLevel: 'priority',
        createdAt: new Date(),
        updatedAt: new Date()
      };
      _index.prisma.pricingTier.findUnique.mockResolvedValue(mockTier);
      const result = await _pricing.pricingService.getTierLimits('premium');
      expect(result).not.toBeNull();
      expect(result?.coursesPerMonth).toBe(999999);
      expect(result?.aiQueriesPerMonth).toBe(999999);
      expect(result?.storageGB).toBe(10);
      expect(result?.supportLevel).toBe('priority');
    });
    it('should return null if tier does not exist', async () => {
      _index.prisma.pricingTier.findUnique.mockResolvedValue(null);
      const result = await _pricing.pricingService.getTierLimits('nonexistent');
      expect(result).toBeNull();
    });
  });
  describe('canAccessCourse', () => {
    it('should allow free tier student to access free course', async () => {
      const result = await _pricing.pricingService.canAccessCourse('free', 'free');
      expect(result).toBe(true);
    });
    it('should prevent free tier student from accessing premium course', async () => {
      const result = await _pricing.pricingService.canAccessCourse('free', 'premium');
      expect(result).toBe(false);
    });
    it('should allow premium tier student to access free course', async () => {
      const result = await _pricing.pricingService.canAccessCourse('premium', 'free');
      expect(result).toBe(true);
    });
    it('should allow premium tier student to access premium course', async () => {
      const result = await _pricing.pricingService.canAccessCourse('premium', 'premium');
      expect(result).toBe(true);
    });
    it('should allow pro tier student to access all courses', async () => {
      expect(await _pricing.pricingService.canAccessCourse('pro', 'free')).toBe(true);
      expect(await _pricing.pricingService.canAccessCourse('pro', 'premium')).toBe(true);
      expect(await _pricing.pricingService.canAccessCourse('pro', 'pro')).toBe(true);
    });
  });
  describe('getStudentPricing', () => {
    it('should return student pricing with discount applied', async () => {
      const mockTier = {
        id: '1',
        name: 'premium',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        features: ['Feature 1', 'Feature 2'],
        coursesPerMonth: 999999,
        aiQueriesPerMonth: 999999,
        storageGB: 10,
        supportLevel: 'priority',
        createdAt: new Date(),
        updatedAt: new Date()
      };
      _index.prisma.pricingTier.findUnique.mockResolvedValue(mockTier);
      const result = await _pricing.pricingService.getStudentPricing('premium');
      expect(result.tier).toBe('premium');
      expect(result.originalPrice).toBe(29.99);
      expect(result.studentDiscount).toBe(50);
      expect(result.studentPrice).toBeCloseTo(14.995, 2);
      expect(result.savings).toBeCloseTo(14.995, 2);
      expect(result.features).toHaveLength(2);
      expect(result.limits.coursesPerMonth).toBe(999999);
    });
    it('should throw error if tier does not exist', async () => {
      _index.prisma.pricingTier.findUnique.mockResolvedValue(null);
      await expect(_pricing.pricingService.getStudentPricing('nonexistent')).rejects.toThrow('Pricing tier nonexistent not found');
    });
  });
  describe('createTier', () => {
    it('should create a new pricing tier', async () => {
      const tierData = {
        name: 'pro',
        monthlyPrice: 299.99,
        studentDiscount: 20,
        features: ['Feature 1', 'Feature 2', 'Feature 3'],
        coursesPerMonth: 999999,
        aiQueriesPerMonth: 999999,
        storageGB: 500,
        supportLevel: 'dedicated'
      };
      const mockCreatedTier = {
        id: '3',
        ...tierData,
        createdAt: new Date(),
        updatedAt: new Date()
      };
      _index.prisma.pricingTier.findUnique.mockResolvedValue(null);
      _index.prisma.pricingTier.create.mockResolvedValue(mockCreatedTier);
      const result = await _pricing.pricingService.createTier(tierData);
      expect(result.name).toBe('pro');
      expect(result.monthlyPrice).toBe(299.99);
      expect(_index.prisma.pricingTier.create).toHaveBeenCalled();
    });
    it('should throw error if tier already exists', async () => {
      const tierData = {
        name: 'premium',
        monthlyPrice: 29.99,
        studentDiscount: 50,
        features: ['Feature 1'],
        coursesPerMonth: 999999,
        aiQueriesPerMonth: 999999,
        storageGB: 10,
        supportLevel: 'priority'
      };
      _index.prisma.pricingTier.findUnique.mockResolvedValue({
        id: '2',
        ...tierData
      });
      await expect(_pricing.pricingService.createTier(tierData)).rejects.toThrow('Pricing tier premium already exists');
    });
    it('should throw validation error for invalid data', async () => {
      const invalidData = {
        name: 'invalid_tier',
        monthlyPrice: -10
      };
      await expect(_pricing.pricingService.createTier(invalidData)).rejects.toThrow();
    });
  });
  describe('updateTier', () => {
    it('should update an existing pricing tier', async () => {
      const updateData = {
        monthlyPrice: 39.99,
        studentDiscount: 40
      };
      const mockUpdatedTier = {
        id: '2',
        name: 'premium',
        monthlyPrice: 39.99,
        studentDiscount: 40,
        features: ['Feature 1'],
        coursesPerMonth: 999999,
        aiQueriesPerMonth: 999999,
        storageGB: 10,
        supportLevel: 'priority',
        createdAt: new Date(),
        updatedAt: new Date()
      };
      _index.prisma.pricingTier.update.mockResolvedValue(mockUpdatedTier);
      const result = await _pricing.pricingService.updateTier('premium', updateData);
      expect(result.monthlyPrice).toBe(39.99);
      expect(result.studentDiscount).toBe(40);
      expect(_index.prisma.pricingTier.update).toHaveBeenCalled();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJwcmlzbWEiLCJwcmljaW5nVGllciIsImZpbmRNYW55IiwiamVzdCIsImZuIiwiZmluZFVuaXF1ZSIsImNyZWF0ZSIsInVwZGF0ZSIsIl9wcmljaW5nIiwicmVxdWlyZSIsIl9pbmRleCIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIm1vY2tUaWVycyIsImlkIiwibmFtZSIsIm1vbnRobHlQcmljZSIsInN0dWRlbnREaXNjb3VudCIsImZlYXR1cmVzIiwiY291cnNlc1Blck1vbnRoIiwiYWlRdWVyaWVzUGVyTW9udGgiLCJzdG9yYWdlR0IiLCJzdXBwb3J0TGV2ZWwiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJyZXN1bHQiLCJwcmljaW5nU2VydmljZSIsImdldEFsbFRpZXJzIiwiZXhwZWN0IiwidG9IYXZlTGVuZ3RoIiwidG9CZSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib3JkZXJCeSIsIm1vY2tUaWVyIiwiZ2V0VGllckJ5TmFtZSIsIm5vdCIsInRvQmVOdWxsIiwid2hlcmUiLCJwcmljZSIsImNhbGN1bGF0ZVN0dWRlbnRQcmljZSIsInRvQmVDbG9zZVRvIiwiZ2V0VGllckxpbWl0cyIsImNhbkFjY2Vzc0NvdXJzZSIsImdldFN0dWRlbnRQcmljaW5nIiwidGllciIsIm9yaWdpbmFsUHJpY2UiLCJzdHVkZW50UHJpY2UiLCJzYXZpbmdzIiwibGltaXRzIiwicmVqZWN0cyIsInRvVGhyb3ciLCJ0aWVyRGF0YSIsIm1vY2tDcmVhdGVkVGllciIsImNyZWF0ZVRpZXIiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiaW52YWxpZERhdGEiLCJ1cGRhdGVEYXRhIiwibW9ja1VwZGF0ZWRUaWVyIiwidXBkYXRlVGllciJdLCJzb3VyY2VzIjpbInByaWNpbmcuc2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIE1vY2sgUHJpc21hIGJlZm9yZSBpbXBvcnRpbmcgdGhlIHNlcnZpY2VcclxuamVzdC5tb2NrKCcuLi8uLi9pbmRleCcsICgpID0+ICh7XHJcbiAgcHJpc21hOiB7XHJcbiAgICBwcmljaW5nVGllcjoge1xyXG4gICAgICBmaW5kTWFueTogamVzdC5mbigpLFxyXG4gICAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXHJcbiAgICAgIGNyZWF0ZTogamVzdC5mbigpLFxyXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKSxcclxuICAgIH0sXHJcbiAgfSxcclxufSkpO1xyXG5cclxuaW1wb3J0IHsgcHJpY2luZ1NlcnZpY2UgfSBmcm9tICcuLi9wcmljaW5nLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi8uLi9pbmRleCc7XHJcblxyXG5kZXNjcmliZSgnUHJpY2luZ1NlcnZpY2UnLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldEFsbFRpZXJzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYWxsIHByaWNpbmcgdGllcnMgc29ydGVkIGJ5IHByaWNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrVGllcnMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICcxJyxcclxuICAgICAgICAgIG5hbWU6ICdmcmVlJyxcclxuICAgICAgICAgIG1vbnRobHlQcmljZTogMCxcclxuICAgICAgICAgIHN0dWRlbnREaXNjb3VudDogMCxcclxuICAgICAgICAgIGZlYXR1cmVzOiBbJ0ZlYXR1cmUgMSddLFxyXG4gICAgICAgICAgY291cnNlc1Blck1vbnRoOiAzLFxyXG4gICAgICAgICAgYWlRdWVyaWVzUGVyTW9udGg6IDEwLFxyXG4gICAgICAgICAgc3RvcmFnZUdCOiAxLFxyXG4gICAgICAgICAgc3VwcG9ydExldmVsOiAnY29tbXVuaXR5JyxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnMicsXHJcbiAgICAgICAgICBuYW1lOiAncHJlbWl1bScsXHJcbiAgICAgICAgICBtb250aGx5UHJpY2U6IDI5Ljk5LFxyXG4gICAgICAgICAgc3R1ZGVudERpc2NvdW50OiA1MCxcclxuICAgICAgICAgIGZlYXR1cmVzOiBbJ0ZlYXR1cmUgMScsICdGZWF0dXJlIDInXSxcclxuICAgICAgICAgIGNvdXJzZXNQZXJNb250aDogOTk5OTk5LFxyXG4gICAgICAgICAgYWlRdWVyaWVzUGVyTW9udGg6IDk5OTk5OSxcclxuICAgICAgICAgIHN0b3JhZ2VHQjogMTAsXHJcbiAgICAgICAgICBzdXBwb3J0TGV2ZWw6ICdwcmlvcml0eScsXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIChwcmlzbWEucHJpY2luZ1RpZXIuZmluZE1hbnkgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGllcnMpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpY2luZ1NlcnZpY2UuZ2V0QWxsVGllcnMoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5uYW1lKS50b0JlKCdmcmVlJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRbMV0ubmFtZSkudG9CZSgncHJlbWl1bScpO1xyXG4gICAgICBleHBlY3QocHJpc21hLnByaWNpbmdUaWVyLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgb3JkZXJCeTogeyBtb250aGx5UHJpY2U6ICdhc2MnIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRUaWVyQnlOYW1lJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYSBzcGVjaWZpYyB0aWVyIGJ5IG5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tUaWVyID0ge1xyXG4gICAgICAgIGlkOiAnMScsXHJcbiAgICAgICAgbmFtZTogJ3ByZW1pdW0nLFxyXG4gICAgICAgIG1vbnRobHlQcmljZTogMjkuOTksXHJcbiAgICAgICAgc3R1ZGVudERpc2NvdW50OiA1MCxcclxuICAgICAgICBmZWF0dXJlczogWydGZWF0dXJlIDEnLCAnRmVhdHVyZSAyJ10sXHJcbiAgICAgICAgY291cnNlc1Blck1vbnRoOiA5OTk5OTksXHJcbiAgICAgICAgYWlRdWVyaWVzUGVyTW9udGg6IDk5OTk5OSxcclxuICAgICAgICBzdG9yYWdlR0I6IDEwLFxyXG4gICAgICAgIHN1cHBvcnRMZXZlbDogJ3ByaW9yaXR5JyxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgKHByaXNtYS5wcmljaW5nVGllci5maW5kVW5pcXVlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RpZXIpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpY2luZ1NlcnZpY2UuZ2V0VGllckJ5TmFtZSgncHJlbWl1bScpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkubm90LnRvQmVOdWxsKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQ/Lm5hbWUpLnRvQmUoJ3ByZW1pdW0nKTtcclxuICAgICAgZXhwZWN0KHByaXNtYS5wcmljaW5nVGllci5maW5kVW5pcXVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgd2hlcmU6IHsgbmFtZTogJ3ByZW1pdW0nIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBpZiB0aWVyIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAocHJpc21hLnByaWNpbmdUaWVyLmZpbmRVbmlxdWUgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaWNpbmdTZXJ2aWNlLmdldFRpZXJCeU5hbWUoJ25vbmV4aXN0ZW50Jyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdjYWxjdWxhdGVTdHVkZW50UHJpY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBjb3JyZWN0IHN0dWRlbnQgcHJpY2Ugd2l0aCBkaXNjb3VudCcsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2UgPSBwcmljaW5nU2VydmljZS5jYWxjdWxhdGVTdHVkZW50UHJpY2UoMTAwLCA1MCk7XHJcbiAgICAgIGV4cGVjdChwcmljZSkudG9CZSg1MCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBjb3JyZWN0IHN0dWRlbnQgcHJpY2Ugd2l0aCAzMCUgZGlzY291bnQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByaWNlID0gcHJpY2luZ1NlcnZpY2UuY2FsY3VsYXRlU3R1ZGVudFByaWNlKDk5Ljk5LCAzMCk7XHJcbiAgICAgIGV4cGVjdChwcmljZSkudG9CZUNsb3NlVG8oNjkuOTksIDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gb3JpZ2luYWwgcHJpY2Ugd2l0aCAwJSBkaXNjb3VudCcsICgpID0+IHtcclxuICAgICAgY29uc3QgcHJpY2UgPSBwcmljaW5nU2VydmljZS5jYWxjdWxhdGVTdHVkZW50UHJpY2UoMjkuOTksIDApO1xyXG4gICAgICBleHBlY3QocHJpY2UpLnRvQmUoMjkuOTkpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRUaWVyTGltaXRzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdGllciBsaW1pdHMgZm9yIGEgc3BlY2lmaWMgdGllcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1RpZXIgPSB7XHJcbiAgICAgICAgaWQ6ICcxJyxcclxuICAgICAgICBuYW1lOiAncHJlbWl1bScsXHJcbiAgICAgICAgbW9udGhseVByaWNlOiAyOS45OSxcclxuICAgICAgICBzdHVkZW50RGlzY291bnQ6IDUwLFxyXG4gICAgICAgIGZlYXR1cmVzOiBbJ0ZlYXR1cmUgMSddLFxyXG4gICAgICAgIGNvdXJzZXNQZXJNb250aDogOTk5OTk5LFxyXG4gICAgICAgIGFpUXVlcmllc1Blck1vbnRoOiA5OTk5OTksXHJcbiAgICAgICAgc3RvcmFnZUdCOiAxMCxcclxuICAgICAgICBzdXBwb3J0TGV2ZWw6ICdwcmlvcml0eScsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChwcmlzbWEucHJpY2luZ1RpZXIuZmluZFVuaXF1ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUaWVyKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaWNpbmdTZXJ2aWNlLmdldFRpZXJMaW1pdHMoJ3ByZW1pdW0nKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLm5vdC50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Py5jb3Vyc2VzUGVyTW9udGgpLnRvQmUoOTk5OTk5KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdD8uYWlRdWVyaWVzUGVyTW9udGgpLnRvQmUoOTk5OTk5KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdD8uc3RvcmFnZUdCKS50b0JlKDEwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdD8uc3VwcG9ydExldmVsKS50b0JlKCdwcmlvcml0eScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBpZiB0aWVyIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAocHJpc21hLnByaWNpbmdUaWVyLmZpbmRVbmlxdWUgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaWNpbmdTZXJ2aWNlLmdldFRpZXJMaW1pdHMoJ25vbmV4aXN0ZW50Jyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdjYW5BY2Nlc3NDb3Vyc2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGFsbG93IGZyZWUgdGllciBzdHVkZW50IHRvIGFjY2VzcyBmcmVlIGNvdXJzZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpY2luZ1NlcnZpY2UuY2FuQWNjZXNzQ291cnNlKCdmcmVlJywgJ2ZyZWUnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcHJldmVudCBmcmVlIHRpZXIgc3R1ZGVudCBmcm9tIGFjY2Vzc2luZyBwcmVtaXVtIGNvdXJzZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpY2luZ1NlcnZpY2UuY2FuQWNjZXNzQ291cnNlKCdmcmVlJywgJ3ByZW1pdW0nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGFsbG93IHByZW1pdW0gdGllciBzdHVkZW50IHRvIGFjY2VzcyBmcmVlIGNvdXJzZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpY2luZ1NlcnZpY2UuY2FuQWNjZXNzQ291cnNlKCdwcmVtaXVtJywgJ2ZyZWUnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgYWxsb3cgcHJlbWl1bSB0aWVyIHN0dWRlbnQgdG8gYWNjZXNzIHByZW1pdW0gY291cnNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmljaW5nU2VydmljZS5jYW5BY2Nlc3NDb3Vyc2UoJ3ByZW1pdW0nLCAncHJlbWl1bScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBwcm8gdGllciBzdHVkZW50IHRvIGFjY2VzcyBhbGwgY291cnNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgZXhwZWN0KGF3YWl0IHByaWNpbmdTZXJ2aWNlLmNhbkFjY2Vzc0NvdXJzZSgncHJvJywgJ2ZyZWUnKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGF3YWl0IHByaWNpbmdTZXJ2aWNlLmNhbkFjY2Vzc0NvdXJzZSgncHJvJywgJ3ByZW1pdW0nKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGF3YWl0IHByaWNpbmdTZXJ2aWNlLmNhbkFjY2Vzc0NvdXJzZSgncHJvJywgJ3BybycpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRTdHVkZW50UHJpY2luZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHN0dWRlbnQgcHJpY2luZyB3aXRoIGRpc2NvdW50IGFwcGxpZWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tUaWVyID0ge1xyXG4gICAgICAgIGlkOiAnMScsXHJcbiAgICAgICAgbmFtZTogJ3ByZW1pdW0nLFxyXG4gICAgICAgIG1vbnRobHlQcmljZTogMjkuOTksXHJcbiAgICAgICAgc3R1ZGVudERpc2NvdW50OiA1MCxcclxuICAgICAgICBmZWF0dXJlczogWydGZWF0dXJlIDEnLCAnRmVhdHVyZSAyJ10sXHJcbiAgICAgICAgY291cnNlc1Blck1vbnRoOiA5OTk5OTksXHJcbiAgICAgICAgYWlRdWVyaWVzUGVyTW9udGg6IDk5OTk5OSxcclxuICAgICAgICBzdG9yYWdlR0I6IDEwLFxyXG4gICAgICAgIHN1cHBvcnRMZXZlbDogJ3ByaW9yaXR5JyxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgKHByaXNtYS5wcmljaW5nVGllci5maW5kVW5pcXVlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RpZXIpO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpY2luZ1NlcnZpY2UuZ2V0U3R1ZGVudFByaWNpbmcoJ3ByZW1pdW0nKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQudGllcikudG9CZSgncHJlbWl1bScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm9yaWdpbmFsUHJpY2UpLnRvQmUoMjkuOTkpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN0dWRlbnREaXNjb3VudCkudG9CZSg1MCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3R1ZGVudFByaWNlKS50b0JlQ2xvc2VUbygxNC45OTUsIDIpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnNhdmluZ3MpLnRvQmVDbG9zZVRvKDE0Ljk5NSwgMik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZmVhdHVyZXMpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5saW1pdHMuY291cnNlc1Blck1vbnRoKS50b0JlKDk5OTk5OSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGlmIHRpZXIgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIChwcmlzbWEucHJpY2luZ1RpZXIuZmluZFVuaXF1ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHByaWNpbmdTZXJ2aWNlLmdldFN0dWRlbnRQcmljaW5nKCdub25leGlzdGVudCcpKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICAgJ1ByaWNpbmcgdGllciBub25leGlzdGVudCBub3QgZm91bmQnXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2NyZWF0ZVRpZXInLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIG5ldyBwcmljaW5nIHRpZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRpZXJEYXRhID0ge1xyXG4gICAgICAgIG5hbWU6ICdwcm8nLFxyXG4gICAgICAgIG1vbnRobHlQcmljZTogMjk5Ljk5LFxyXG4gICAgICAgIHN0dWRlbnREaXNjb3VudDogMjAsXHJcbiAgICAgICAgZmVhdHVyZXM6IFsnRmVhdHVyZSAxJywgJ0ZlYXR1cmUgMicsICdGZWF0dXJlIDMnXSxcclxuICAgICAgICBjb3Vyc2VzUGVyTW9udGg6IDk5OTk5OSxcclxuICAgICAgICBhaVF1ZXJpZXNQZXJNb250aDogOTk5OTk5LFxyXG4gICAgICAgIHN0b3JhZ2VHQjogNTAwLFxyXG4gICAgICAgIHN1cHBvcnRMZXZlbDogJ2RlZGljYXRlZCcsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBtb2NrQ3JlYXRlZFRpZXIgPSB7XHJcbiAgICAgICAgaWQ6ICczJyxcclxuICAgICAgICAuLi50aWVyRGF0YSxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgKHByaXNtYS5wcmljaW5nVGllci5maW5kVW5pcXVlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcbiAgICAgIChwcmlzbWEucHJpY2luZ1RpZXIuY3JlYXRlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NyZWF0ZWRUaWVyKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaWNpbmdTZXJ2aWNlLmNyZWF0ZVRpZXIodGllckRhdGEpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5uYW1lKS50b0JlKCdwcm8nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tb250aGx5UHJpY2UpLnRvQmUoMjk5Ljk5KTtcclxuICAgICAgZXhwZWN0KHByaXNtYS5wcmljaW5nVGllci5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgaWYgdGllciBhbHJlYWR5IGV4aXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdGllckRhdGEgPSB7XHJcbiAgICAgICAgbmFtZTogJ3ByZW1pdW0nLFxyXG4gICAgICAgIG1vbnRobHlQcmljZTogMjkuOTksXHJcbiAgICAgICAgc3R1ZGVudERpc2NvdW50OiA1MCxcclxuICAgICAgICBmZWF0dXJlczogWydGZWF0dXJlIDEnXSxcclxuICAgICAgICBjb3Vyc2VzUGVyTW9udGg6IDk5OTk5OSxcclxuICAgICAgICBhaVF1ZXJpZXNQZXJNb250aDogOTk5OTk5LFxyXG4gICAgICAgIHN0b3JhZ2VHQjogMTAsXHJcbiAgICAgICAgc3VwcG9ydExldmVsOiAncHJpb3JpdHknLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgKHByaXNtYS5wcmljaW5nVGllci5maW5kVW5pcXVlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIGlkOiAnMicsXHJcbiAgICAgICAgLi4udGllckRhdGEsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHByaWNpbmdTZXJ2aWNlLmNyZWF0ZVRpZXIodGllckRhdGEpKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICAgJ1ByaWNpbmcgdGllciBwcmVtaXVtIGFscmVhZHkgZXhpc3RzJ1xyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyB2YWxpZGF0aW9uIGVycm9yIGZvciBpbnZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0ge1xyXG4gICAgICAgIG5hbWU6ICdpbnZhbGlkX3RpZXInLFxyXG4gICAgICAgIG1vbnRobHlQcmljZTogLTEwLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHByaWNpbmdTZXJ2aWNlLmNyZWF0ZVRpZXIoaW52YWxpZERhdGEpKS5yZWplY3RzLnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgndXBkYXRlVGllcicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGFuIGV4aXN0aW5nIHByaWNpbmcgdGllcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcclxuICAgICAgICBtb250aGx5UHJpY2U6IDM5Ljk5LFxyXG4gICAgICAgIHN0dWRlbnREaXNjb3VudDogNDAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBtb2NrVXBkYXRlZFRpZXIgPSB7XHJcbiAgICAgICAgaWQ6ICcyJyxcclxuICAgICAgICBuYW1lOiAncHJlbWl1bScsXHJcbiAgICAgICAgbW9udGhseVByaWNlOiAzOS45OSxcclxuICAgICAgICBzdHVkZW50RGlzY291bnQ6IDQwLFxyXG4gICAgICAgIGZlYXR1cmVzOiBbJ0ZlYXR1cmUgMSddLFxyXG4gICAgICAgIGNvdXJzZXNQZXJNb250aDogOTk5OTk5LFxyXG4gICAgICAgIGFpUXVlcmllc1Blck1vbnRoOiA5OTk5OTksXHJcbiAgICAgICAgc3RvcmFnZUdCOiAxMCxcclxuICAgICAgICBzdXBwb3J0TGV2ZWw6ICdwcmlvcml0eScsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIChwcmlzbWEucHJpY2luZ1RpZXIudXBkYXRlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VwZGF0ZWRUaWVyKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaWNpbmdTZXJ2aWNlLnVwZGF0ZVRpZXIoJ3ByZW1pdW0nLCB1cGRhdGVEYXRhKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQubW9udGhseVByaWNlKS50b0JlKDM5Ljk5KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdHVkZW50RGlzY291bnQpLnRvQmUoNDApO1xyXG4gICAgICBleHBlY3QocHJpc21hLnByaWNpbmdUaWVyLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGFBQWEsRUFBRSxPQUFPO0VBQzlCQyxNQUFNLEVBQUU7SUFDTkMsV0FBVyxFQUFFO01BQ1hDLFFBQVEsRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUNuQkMsVUFBVSxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ3JCRSxNQUFNLEVBQUVILElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7TUFDakJHLE1BQU0sRUFBRUosSUFBSSxDQUFDQyxFQUFFLENB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