38b637eb1f982fa782ae290161512e59
"use strict";

const AzoraAPIClient = require('../../packages/shared-api/client');
const client = new AzoraAPIClient('http://localhost:4000/api');
describe('Azora OS Integration Tests', () => {
  let testUserId;
  let testWalletAddress;
  let testCourseId;
  test('Health checks pass for all services', async () => {
    const response = await fetch('http://localhost:3013/api/services/status');
    const services = await response.json();
    services.forEach(service => {
      expect(service.status).toBe('healthy');
    });
  });
  test('User can enroll in course', async () => {
    testUserId = 'test-user-' + Date.now();
    testCourseId = 'course-101';
    const result = await client.education.enroll(testCourseId, testUserId);
    expect(result.success).toBe(true);
  });
  test('User receives AZR tokens for enrollment', async () => {
    const wallet = await client.mint.createWallet(testUserId);
    testWalletAddress = wallet.address;
    expect(wallet.balance).toBeGreaterThan(0);
  });
  test('AI Family responds to chat', async () => {
    const response = await client.ai.chat('themba', 'Hello!');
    expect(response.character).toBe('themba');
    expect(response.message).toBeTruthy();
  });
  test('Analytics tracks events', async () => {
    const response = await fetch('http://localhost:3012/api/analytics/track', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        type: 'test_event',
        userId: testUserId,
        data: {
          test: true
        }
      })
    });
    const result = await response.json();
    expect(result.tracked).toBe(true);
  });
  test('Monitoring service reports metrics', async () => {
    const response = await fetch('http://localhost:3013/metrics');
    const metrics = await response.text();
    expect(metrics).toContain('service_health_status');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBem9yYUFQSUNsaWVudCIsInJlcXVpcmUiLCJjbGllbnQiLCJkZXNjcmliZSIsInRlc3RVc2VySWQiLCJ0ZXN0V2FsbGV0QWRkcmVzcyIsInRlc3RDb3Vyc2VJZCIsInRlc3QiLCJyZXNwb25zZSIsImZldGNoIiwic2VydmljZXMiLCJqc29uIiwiZm9yRWFjaCIsInNlcnZpY2UiLCJleHBlY3QiLCJzdGF0dXMiLCJ0b0JlIiwiRGF0ZSIsIm5vdyIsInJlc3VsdCIsImVkdWNhdGlvbiIsImVucm9sbCIsInN1Y2Nlc3MiLCJ3YWxsZXQiLCJtaW50IiwiY3JlYXRlV2FsbGV0IiwiYWRkcmVzcyIsImJhbGFuY2UiLCJ0b0JlR3JlYXRlclRoYW4iLCJhaSIsImNoYXQiLCJjaGFyYWN0ZXIiLCJtZXNzYWdlIiwidG9CZVRydXRoeSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInR5cGUiLCJ1c2VySWQiLCJkYXRhIiwidHJhY2tlZCIsIm1ldHJpY3MiLCJ0ZXh0IiwidG9Db250YWluIl0sInNvdXJjZXMiOlsiZnVsbC1zeXN0ZW0udGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBem9yYUFQSUNsaWVudCA9IHJlcXVpcmUoJy4uLy4uL3BhY2thZ2VzL3NoYXJlZC1hcGkvY2xpZW50Jyk7XG5cbmNvbnN0IGNsaWVudCA9IG5ldyBBem9yYUFQSUNsaWVudCgnaHR0cDovL2xvY2FsaG9zdDo0MDAwL2FwaScpO1xuXG5kZXNjcmliZSgnQXpvcmEgT1MgSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gIGxldCB0ZXN0VXNlcklkO1xuICBsZXQgdGVzdFdhbGxldEFkZHJlc3M7XG4gIGxldCB0ZXN0Q291cnNlSWQ7XG5cbiAgdGVzdCgnSGVhbHRoIGNoZWNrcyBwYXNzIGZvciBhbGwgc2VydmljZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDozMDEzL2FwaS9zZXJ2aWNlcy9zdGF0dXMnKTtcbiAgICBjb25zdCBzZXJ2aWNlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBcbiAgICBzZXJ2aWNlcy5mb3JFYWNoKHNlcnZpY2UgPT4ge1xuICAgICAgZXhwZWN0KHNlcnZpY2Uuc3RhdHVzKS50b0JlKCdoZWFsdGh5Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ1VzZXIgY2FuIGVucm9sbCBpbiBjb3Vyc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgdGVzdFVzZXJJZCA9ICd0ZXN0LXVzZXItJyArIERhdGUubm93KCk7XG4gICAgdGVzdENvdXJzZUlkID0gJ2NvdXJzZS0xMDEnO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5lZHVjYXRpb24uZW5yb2xsKHRlc3RDb3Vyc2VJZCwgdGVzdFVzZXJJZCk7XG4gICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICB9KTtcblxuICB0ZXN0KCdVc2VyIHJlY2VpdmVzIEFaUiB0b2tlbnMgZm9yIGVucm9sbG1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgd2FsbGV0ID0gYXdhaXQgY2xpZW50Lm1pbnQuY3JlYXRlV2FsbGV0KHRlc3RVc2VySWQpO1xuICAgIHRlc3RXYWxsZXRBZGRyZXNzID0gd2FsbGV0LmFkZHJlc3M7XG4gICAgXG4gICAgZXhwZWN0KHdhbGxldC5iYWxhbmNlKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ0FJIEZhbWlseSByZXNwb25kcyB0byBjaGF0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmFpLmNoYXQoJ3RoZW1iYScsICdIZWxsbyEnKTtcbiAgICBcbiAgICBleHBlY3QocmVzcG9uc2UuY2hhcmFjdGVyKS50b0JlKCd0aGVtYmEnKTtcbiAgICBleHBlY3QocmVzcG9uc2UubWVzc2FnZSkudG9CZVRydXRoeSgpO1xuICB9KTtcblxuICB0ZXN0KCdBbmFseXRpY3MgdHJhY2tzIGV2ZW50cycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMTIvYXBpL2FuYWx5dGljcy90cmFjaycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHR5cGU6ICd0ZXN0X2V2ZW50JyxcbiAgICAgICAgdXNlcklkOiB0ZXN0VXNlcklkLFxuICAgICAgICBkYXRhOiB7IHRlc3Q6IHRydWUgfVxuICAgICAgfSlcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgZXhwZWN0KHJlc3VsdC50cmFja2VkKS50b0JlKHRydWUpO1xuICB9KTtcblxuICB0ZXN0KCdNb25pdG9yaW5nIHNlcnZpY2UgcmVwb3J0cyBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAxMy9tZXRyaWNzJyk7XG4gICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICBcbiAgICBleHBlY3QobWV0cmljcykudG9Db250YWluKCdzZXJ2aWNlX2hlYWx0aF9zdGF0dXMnKTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxjQUFjLEdBQUdDLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQztBQUVsRSxNQUFNQyxNQUFNLEdBQUcsSUFBSUYsY0FBYyxDQUFDLDJCQUEyQixDQUFDO0FBRTlERyxRQUFRLENBQUMsNEJBQTRCLEVBQUUsTUFBTTtFQUMzQyxJQUFJQyxVQUFVO0VBQ2QsSUFBSUMsaUJBQWlCO0VBQ3JCLElBQUlDLFlBQVk7RUFFaEJDLElBQUks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