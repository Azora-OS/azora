{"version":3,"names":["quantumTrackingService","require","describe","userId","beforeEach","trackingData","clear","quantumEvents","predictiveModels","test","eventType","data","courseId","timeSpent","quantumEvent","trackQuantumEvent","expect","toBeDefined","id","toBe","toEqual","quantumState","predictiveInsights","has","get","toHaveLength","generateQuantumState","superposition","entanglement","coherence","uncertainty","waveFunction","amplitude","phase","insights","generatePredictiveInsights","probability","confidence","timeline","Array","isArray","recommendations","length","toBeGreaterThan","transactionId","interactionId","getUserTrackingData","events","total","every","event","filteredData","analytics","getQuantumAnalytics","totalEvents","eventTypes","quantumMetrics","predictiveAccuracy","modelId","trainingData","score","model","trainPredictiveModel","trainedAt","accuracy","parameters","predictions","inputData","currentScore","prediction","makePrediction","input","output","timestamp","toThrow","oldEvent","Date","now","removedCount","clearOldData"],"sources":["quantum-tracking.test.js"],"sourcesContent":["const quantumTrackingService = require('../index');\n\ndescribe('Quantum Tracking Service', () => {\n  const userId = 'test-user-123';\n\n  beforeEach(() => {\n    // Clear data before each test\n    quantumTrackingService.trackingData.clear();\n    quantumTrackingService.quantumEvents = [];\n    quantumTrackingService.predictiveModels.clear();\n  });\n\n  test('should track quantum events', () => {\n    const eventType = 'learning_engagement';\n    const data = { courseId: 'course_algebra_101', timeSpent: 1200 };\n\n    const quantumEvent = quantumTrackingService.trackQuantumEvent(userId, eventType, data);\n\n    expect(quantumEvent).toBeDefined();\n    expect(quantumEvent.id).toBeDefined();\n    expect(quantumEvent.userId).toBe(userId);\n    expect(quantumEvent.eventType).toBe(eventType);\n    expect(quantumEvent.data).toEqual(data);\n    expect(quantumEvent.quantumState).toBeDefined();\n    expect(quantumEvent.predictiveInsights).toBeDefined();\n\n    // Verify data was stored\n    expect(quantumTrackingService.trackingData.has(userId)).toBe(true);\n    expect(quantumTrackingService.trackingData.get(userId)).toHaveLength(1);\n  });\n\n  test('should generate quantum state', () => {\n    const quantumState = quantumTrackingService.generateQuantumState();\n\n    expect(quantumState).toBeDefined();\n    expect(typeof quantumState.superposition).toBe('boolean');\n    expect(typeof quantumState.entanglement).toBe('number');\n    expect(typeof quantumState.coherence).toBe('number');\n    expect(typeof quantumState.uncertainty).toBe('number');\n    expect(quantumState.waveFunction).toBeDefined();\n    expect(typeof quantumState.waveFunction.amplitude).toBe('number');\n    expect(typeof quantumState.waveFunction.phase).toBe('number');\n  });\n\n  test('should generate predictive insights', () => {\n    const eventType = 'learning_engagement';\n    const data = { courseId: 'course_algebra_101' };\n\n    const insights = quantumTrackingService.generatePredictiveInsights(eventType, data);\n\n    expect(insights).toBeDefined();\n    expect(typeof insights.probability).toBe('number');\n    expect(typeof insights.confidence).toBe('number');\n    expect(typeof insights.timeline).toBe('number');\n    expect(Array.isArray(insights.recommendations)).toBe(true);\n    expect(insights.recommendations.length).toBeGreaterThan(0);\n  });\n\n  test('should get user tracking data', () => {\n    // Add some test events\n    quantumTrackingService.trackQuantumEvent(userId, 'learning_engagement', { courseId: 'course1' });\n    quantumTrackingService.trackQuantumEvent(userId, 'financial_behavior', { transactionId: 'tx1' });\n    quantumTrackingService.trackQuantumEvent('other-user', 'social_interaction', { interactionId: 'int1' });\n\n    const trackingData = quantumTrackingService.getUserTrackingData(userId);\n\n    expect(trackingData.events).toHaveLength(2);\n    expect(trackingData.total).toBe(2);\n    expect(trackingData.events.every(event => event.userId === userId)).toBe(true);\n  });\n\n  test('should filter user tracking data by event type', () => {\n    // Add some test events\n    quantumTrackingService.trackQuantumEvent(userId, 'learning_engagement', { courseId: 'course1' });\n    quantumTrackingService.trackQuantumEvent(userId, 'financial_behavior', { transactionId: 'tx1' });\n\n    const filteredData = quantumTrackingService.getUserTrackingData(userId, { eventType: 'learning_engagement' });\n\n    expect(filteredData.events).toHaveLength(1);\n    expect(filteredData.events[0].eventType).toBe('learning_engagement');\n  });\n\n  test('should get quantum analytics', () => {\n    // Add some test events\n    quantumTrackingService.trackQuantumEvent(userId, 'learning_engagement', { courseId: 'course1' });\n    quantumTrackingService.trackQuantumEvent(userId, 'financial_behavior', { transactionId: 'tx1' });\n\n    const analytics = quantumTrackingService.getQuantumAnalytics(userId);\n\n    expect(analytics).toBeDefined();\n    expect(analytics.totalEvents).toBe(2);\n    expect(analytics.eventTypes).toBeDefined();\n    expect(analytics.quantumMetrics).toBeDefined();\n    expect(typeof analytics.predictiveAccuracy).toBe('number');\n    expect(Array.isArray(analytics.insights)).toBe(true);\n  });\n\n  test('should train predictive model', () => {\n    const modelId = 'test-model';\n    const trainingData = [{ userId: 'user1', score: 0.8 }];\n\n    const model = quantumTrackingService.trainPredictiveModel(modelId, trainingData);\n\n    expect(model).toBeDefined();\n    expect(model.id).toBe(modelId);\n    expect(model.trainedAt).toBeDefined();\n    expect(typeof model.accuracy).toBe('number');\n    expect(model.parameters).toBeDefined();\n    expect(Array.isArray(model.predictions)).toBe(true);\n\n    // Verify model was stored\n    expect(quantumTrackingService.predictiveModels.has(modelId)).toBe(true);\n  });\n\n  test('should make prediction', () => {\n    const modelId = 'test-model';\n    const inputData = { userId: 'user1', currentScore: 0.7 };\n\n    // First train a model\n    quantumTrackingService.trainPredictiveModel(modelId, [{ userId: 'user1', score: 0.8 }]);\n\n    const prediction = quantumTrackingService.makePrediction(modelId, inputData);\n\n    expect(prediction).toBeDefined();\n    expect(prediction.modelId).toBe(modelId);\n    expect(prediction.input).toEqual(inputData);\n    expect(prediction.output).toBeDefined();\n    expect(prediction.timestamp).toBeDefined();\n\n    // Verify prediction was stored in model\n    const model = quantumTrackingService.predictiveModels.get(modelId);\n    expect(model.predictions).toHaveLength(1);\n    expect(model.predictions[0].id).toBe(prediction.id);\n  });\n\n  test('should throw error for non-existent model prediction', () => {\n    const modelId = 'non-existent-model';\n    const inputData = { userId: 'user1' };\n\n    expect(() => {\n      quantumTrackingService.makePrediction(modelId, inputData);\n    }).toThrow('Quantum predictive model non-existent-model not found');\n  });\n\n  test('should clear old data', () => {\n    // Add some recent events\n    quantumTrackingService.trackQuantumEvent(userId, 'recent_event', { data: 'recent' });\n\n    // Add an old event\n    const oldEvent = quantumTrackingService.trackQuantumEvent(userId, 'old_event', { data: 'old' });\n    oldEvent.timestamp = new Date(Date.now() - 100 * 24 * 60 * 60 * 1000); // 100 days old\n\n    expect(quantumTrackingService.quantumEvents).toHaveLength(2);\n\n    // Clear events older than 90 days\n    const removedCount = quantumTrackingService.clearOldData(90);\n\n    expect(removedCount).toBe(1);\n    expect(quantumTrackingService.quantumEvents).toHaveLength(1);\n    expect(quantumTrackingService.quantumEvents[0].eventType).toBe('recent_event');\n  });\n});\n"],"mappings":"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","ignoreList":[]}