{"version":3,"names":["cov_10eyl9a1zy","actualCoverage","ContextInjector","constructor","options","b","f","s","defaultMaxTokens","maxTokens","tokensPerWord","defaultFormat","format","promptTemplate","getDefaultTemplate","injectContext","userPrompt","documents","includeMetadata","formattedContext","formatContext","truncatedContext","tokensUsed","truncated","truncateToTokenLimit","prompt","buildPrompt","contextLength","length","documentsIncluded","formatAsJson","formatAsPlain","formatAsMarkdown","sections","map","doc","index","section","metadata","source","category","subcategory","author","score","undefined","toFixed","tags","join","content","contextDocs","item","relevance","parseFloat","JSON","stringify","context","estimatedTokens","estimateTokens","targetChars","Math","floor","substring","lastNewline","lastIndexOf","text","words","split","ceil","system","userPrefix","userSuffix","contextPrefix","contextSuffix","setPromptTemplate","template","getPromptTemplate","getContextStats","totalDocuments","totalCharacters","averageDocLength","sourceBreakdown","categoryBreakdown","reduce","sum","d","forEach","round","validateOptions","errors","push","includes","valid","exports"],"sources":["context-injector.ts"],"sourcesContent":["/**\r\n * Context Injector\r\n * Injects retrieved context into AI prompts with formatting and token management\r\n */\r\n\r\nimport { Document, ContextInjectionOptions } from './types';\r\n\r\nexport interface ContextInjectionResult {\r\n  prompt: string;\r\n  contextLength: number;\r\n  tokensUsed: number;\r\n  documentsIncluded: number;\r\n  truncated: boolean;\r\n}\r\n\r\nexport interface PromptTemplate {\r\n  system: string;\r\n  userPrefix: string;\r\n  contextPrefix: string;\r\n  contextSuffix: string;\r\n  userSuffix: string;\r\n}\r\n\r\n/**\r\n * Context Injector\r\n * Handles context formatting and injection into prompts\r\n */\r\nexport class ContextInjector {\r\n  private defaultMaxTokens: number;\r\n  private tokensPerWord: number;\r\n  private defaultFormat: 'markdown' | 'json' | 'plain';\r\n  private promptTemplate: PromptTemplate;\r\n\r\n  constructor(options: ContextInjectionOptions = {}) {\r\n    this.defaultMaxTokens = options.maxTokens || 2000;\r\n    this.tokensPerWord = 1.3; // Approximate tokens per word\r\n    this.defaultFormat = options.format || 'markdown';\r\n    this.promptTemplate = this.getDefaultTemplate();\r\n  }\r\n\r\n  /**\r\n   * Inject context into a user prompt\r\n   */\r\n  public injectContext(\r\n    userPrompt: string,\r\n    documents: Document[],\r\n    options: ContextInjectionOptions = {}\r\n  ): ContextInjectionResult {\r\n    const maxTokens = options.maxTokens || this.defaultMaxTokens;\r\n    const format = options.format || this.defaultFormat;\r\n    const includeMetadata = options.includeMetadata !== false;\r\n\r\n    // Format context from documents\r\n    const formattedContext = this.formatContext(documents, format, includeMetadata);\r\n\r\n    // Truncate context if needed\r\n    const { truncatedContext, tokensUsed, truncated } = this.truncateToTokenLimit(\r\n      formattedContext,\r\n      maxTokens\r\n    );\r\n\r\n    // Build final prompt\r\n    const prompt = this.buildPrompt(userPrompt, truncatedContext);\r\n\r\n    return {\r\n      prompt,\r\n      contextLength: truncatedContext.length,\r\n      tokensUsed,\r\n      documentsIncluded: documents.length,\r\n      truncated\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Format context from documents\r\n   */\r\n  public formatContext(\r\n    documents: Document[],\r\n    format: 'markdown' | 'json' | 'plain' = 'markdown',\r\n    includeMetadata: boolean = true\r\n  ): string {\r\n    if (documents.length === 0) {\r\n      return '';\r\n    }\r\n\r\n    switch (format) {\r\n      case 'json':\r\n        return this.formatAsJson(documents, includeMetadata);\r\n      case 'plain':\r\n        return this.formatAsPlain(documents, includeMetadata);\r\n      case 'markdown':\r\n      default:\r\n        return this.formatAsMarkdown(documents, includeMetadata);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format context as Markdown\r\n   */\r\n  private formatAsMarkdown(documents: Document[], includeMetadata: boolean): string {\r\n    const sections = documents.map((doc, index) => {\r\n      let section = `### Source ${index + 1}\\n\\n`;\r\n\r\n      if (includeMetadata) {\r\n        section += `**Source:** ${doc.metadata.source}\\n`;\r\n        section += `**Category:** ${doc.metadata.category}\\n`;\r\n\r\n        if (doc.metadata.subcategory) {\r\n          section += `**Subcategory:** ${doc.metadata.subcategory}\\n`;\r\n        }\r\n\r\n        if (doc.metadata.author) {\r\n          section += `**Author:** ${doc.metadata.author}\\n`;\r\n        }\r\n\r\n        if (doc.score !== undefined) {\r\n          section += `**Relevance:** ${(doc.score * 100).toFixed(1)}%\\n`;\r\n        }\r\n\r\n        if (doc.metadata.tags && doc.metadata.tags.length > 0) {\r\n          section += `**Tags:** ${doc.metadata.tags.join(', ')}\\n`;\r\n        }\r\n\r\n        section += '\\n';\r\n      }\r\n\r\n      section += `${doc.content}\\n`;\r\n\r\n      return section;\r\n    });\r\n\r\n    return `## Context\\n\\n${sections.join('\\n---\\n\\n')}`;\r\n  }\r\n\r\n  /**\r\n   * Format context as plain text\r\n   */\r\n  private formatAsPlain(documents: Document[], includeMetadata: boolean): string {\r\n    const sections = documents.map((doc, index) => {\r\n      let section = `Source ${index + 1}:\\n`;\r\n\r\n      if (includeMetadata) {\r\n        section += `Source: ${doc.metadata.source}\\n`;\r\n        section += `Category: ${doc.metadata.category}\\n`;\r\n\r\n        if (doc.metadata.subcategory) {\r\n          section += `Subcategory: ${doc.metadata.subcategory}\\n`;\r\n        }\r\n\r\n        if (doc.metadata.author) {\r\n          section += `Author: ${doc.metadata.author}\\n`;\r\n        }\r\n\r\n        if (doc.score !== undefined) {\r\n          section += `Relevance: ${(doc.score * 100).toFixed(1)}%\\n`;\r\n        }\r\n\r\n        if (doc.metadata.tags && doc.metadata.tags.length > 0) {\r\n          section += `Tags: ${doc.metadata.tags.join(', ')}\\n`;\r\n        }\r\n\r\n        section += '\\n';\r\n      }\r\n\r\n      section += `${doc.content}\\n`;\r\n\r\n      return section;\r\n    });\r\n\r\n    return `CONTEXT:\\n\\n${sections.join('\\n---\\n\\n')}`;\r\n  }\r\n\r\n  /**\r\n   * Format context as JSON\r\n   */\r\n  private formatAsJson(documents: Document[], includeMetadata: boolean): string {\r\n    const contextDocs = documents.map(doc => {\r\n      const item: any = {\r\n        content: doc.content\r\n      };\r\n\r\n      if (includeMetadata) {\r\n        item.metadata = {\r\n          source: doc.metadata.source,\r\n          category: doc.metadata.category\r\n        };\r\n\r\n        if (doc.metadata.subcategory) {\r\n          item.metadata.subcategory = doc.metadata.subcategory;\r\n        }\r\n\r\n        if (doc.metadata.author) {\r\n          item.metadata.author = doc.metadata.author;\r\n        }\r\n\r\n        if (doc.score !== undefined) {\r\n          item.relevance = parseFloat((doc.score * 100).toFixed(1));\r\n        }\r\n\r\n        if (doc.metadata.tags && doc.metadata.tags.length > 0) {\r\n          item.metadata.tags = doc.metadata.tags;\r\n        }\r\n      }\r\n\r\n      return item;\r\n    });\r\n\r\n    return JSON.stringify({ context: contextDocs }, null, 2);\r\n  }\r\n\r\n  /**\r\n   * Truncate context to token limit\r\n   */\r\n  public truncateToTokenLimit(\r\n    context: string,\r\n    maxTokens: number\r\n  ): { truncatedContext: string; tokensUsed: number; truncated: boolean } {\r\n    const estimatedTokens = this.estimateTokens(context);\r\n\r\n    if (estimatedTokens <= maxTokens) {\r\n      return {\r\n        truncatedContext: context,\r\n        tokensUsed: estimatedTokens,\r\n        truncated: false\r\n      };\r\n    }\r\n\r\n    // Calculate target character count\r\n    const targetChars = Math.floor((context.length * maxTokens) / estimatedTokens);\r\n    let truncated = context.substring(0, targetChars);\r\n\r\n    // Find last complete sentence or section\r\n    const lastNewline = truncated.lastIndexOf('\\n');\r\n    if (lastNewline > targetChars * 0.8) {\r\n      truncated = truncated.substring(0, lastNewline);\r\n    }\r\n\r\n    // Add truncation indicator\r\n    truncated += '\\n\\n[Context truncated due to token limit]';\r\n\r\n    return {\r\n      truncatedContext: truncated,\r\n      tokensUsed: this.estimateTokens(truncated),\r\n      truncated: true\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Estimate token count for text\r\n   */\r\n  private estimateTokens(text: string): number {\r\n    // Simple estimation: count words and multiply by average tokens per word\r\n    const words = text.split(/\\s+/).length;\r\n    return Math.ceil(words * this.tokensPerWord);\r\n  }\r\n\r\n  /**\r\n   * Build final prompt with context\r\n   */\r\n  private buildPrompt(userPrompt: string, context: string): string {\r\n    if (!context) {\r\n      return userPrompt;\r\n    }\r\n\r\n    return `${this.promptTemplate.system}\r\n\r\n${context}\r\n\r\n${this.promptTemplate.userPrefix}\r\n\r\n${userPrompt}\r\n\r\n${this.promptTemplate.userSuffix}`;\r\n  }\r\n\r\n  /**\r\n   * Get default prompt template\r\n   */\r\n  private getDefaultTemplate(): PromptTemplate {\r\n    return {\r\n      system: 'You are a helpful assistant. Use the provided context to answer questions accurately and thoroughly.',\r\n      userPrefix: 'Based on the context provided above, please answer the following question:',\r\n      contextPrefix: 'CONTEXT:',\r\n      contextSuffix: 'END CONTEXT',\r\n      userSuffix: 'Please provide a comprehensive answer based on the context.'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Set custom prompt template\r\n   */\r\n  public setPromptTemplate(template: Partial<PromptTemplate>): void {\r\n    this.promptTemplate = {\r\n      ...this.getDefaultTemplate(),\r\n      ...template\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get current prompt template\r\n   */\r\n  public getPromptTemplate(): PromptTemplate {\r\n    return { ...this.promptTemplate };\r\n  }\r\n\r\n  /**\r\n   * Calculate context statistics\r\n   */\r\n  public getContextStats(documents: Document[]): {\r\n    totalDocuments: number;\r\n    totalCharacters: number;\r\n    estimatedTokens: number;\r\n    averageDocLength: number;\r\n    sourceBreakdown: Record<string, number>;\r\n    categoryBreakdown: Record<string, number>;\r\n  } {\r\n    if (documents.length === 0) {\r\n      return {\r\n        totalDocuments: 0,\r\n        totalCharacters: 0,\r\n        estimatedTokens: 0,\r\n        averageDocLength: 0,\r\n        sourceBreakdown: {},\r\n        categoryBreakdown: {}\r\n      };\r\n    }\r\n\r\n    const totalCharacters = documents.reduce((sum, doc) => sum + doc.content.length, 0);\r\n    const estimatedTokens = this.estimateTokens(\r\n      documents.map(d => d.content).join(' ')\r\n    );\r\n\r\n    const sourceBreakdown: Record<string, number> = {};\r\n    const categoryBreakdown: Record<string, number> = {};\r\n\r\n    documents.forEach(doc => {\r\n      sourceBreakdown[doc.metadata.source] = (sourceBreakdown[doc.metadata.source] || 0) + 1;\r\n      categoryBreakdown[doc.metadata.category] = (categoryBreakdown[doc.metadata.category] || 0) + 1;\r\n    });\r\n\r\n    return {\r\n      totalDocuments: documents.length,\r\n      totalCharacters,\r\n      estimatedTokens,\r\n      averageDocLength: Math.round(totalCharacters / documents.length),\r\n      sourceBreakdown,\r\n      categoryBreakdown\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validate context injection options\r\n   */\r\n  public validateOptions(options: ContextInjectionOptions): { valid: boolean; errors: string[] } {\r\n    const errors: string[] = [];\r\n\r\n    if (options.maxTokens !== undefined && options.maxTokens < 100) {\r\n      errors.push('maxTokens must be at least 100');\r\n    }\r\n\r\n    if (options.format && !['markdown', 'json', 'plain'].includes(options.format)) {\r\n      errors.push('format must be one of: markdown, json, plain');\r\n    }\r\n\r\n    return {\r\n      valid: errors.length === 0,\r\n      errors\r\n    };\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}