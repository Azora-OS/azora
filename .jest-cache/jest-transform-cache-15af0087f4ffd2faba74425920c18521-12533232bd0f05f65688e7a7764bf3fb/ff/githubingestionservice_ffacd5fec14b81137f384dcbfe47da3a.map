{"version":3,"names":["cov_1v4ao0zk1u","actualCoverage","EventEmitter","GitHubIngestionOrchestrator","SovereignIngestionEngine","AzorahubGitHubIngestion","repositories","s","Map","ingestionStats","totalRepositories","ingested","pending","failed","lastIngestion","Date","constructor","f","orchestrator","getInstance","sie","on","progress","handleIngestionComplete","instance","b","startIngestion","console","log","majorRepos","owner","repo","priority","addRepository","focus","license","keyFiles","start","emit","repoKey","repository","name","split","id","description","stars","forks","language","createdAt","startTime","updatedAt","endTime","ingestedAt","set","getRepositories","Array","from","values","getStats","searchRepositories","query","results","lowerQuery","toLowerCase","includes","push"],"sources":["github-ingestion-service.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\nCopyright (c) 2025 Azora ES (Pty) Ltd. All Rights Reserved.\nSee LICENSE file for details.\n*/\n\n/**\n * Azorahub GitHub Ingestion Service\n *\n * Continuously ingests repositories from GitHub to make Azorahub\n * a complete GitHub alternative with all features\n */\n\nimport { EventEmitter } from 'events';\nimport { GitHubIngestionOrchestrator } from '../system-core/github-ingestion-orchestrator';\nimport { SovereignIngestionEngine } from '../system-core/sovereign-ingestion-engine';\n\nexport interface Repository {\n  id: string;\n  owner: string;\n  name: string;\n  description: string;\n  stars: number;\n  forks: number;\n  language: string;\n  license: string;\n  createdAt: Date;\n  updatedAt: Date;\n  ingested: boolean;\n  ingestedAt?: Date;\n}\n\nexport interface IngestionStats {\n  totalRepositories: number;\n  ingested: number;\n  pending: number;\n  failed: number;\n  lastIngestion: Date;\n}\n\nexport class AzorahubGitHubIngestion extends EventEmitter {\n  private static instance: AzorahubGitHubIngestion;\n  private orchestrator: GitHubIngestionOrchestrator;\n  private sie: SovereignIngestionEngine;\n  private repositories: Map<string, Repository> = new Map();\n  private ingestionStats: IngestionStats = {\n    totalRepositories: 0,\n    ingested: 0,\n    pending: 0,\n    failed: 0,\n    lastIngestion: new Date()\n  };\n\n  private constructor() {\n    super();\n    this.orchestrator = GitHubIngestionOrchestrator.getInstance();\n    this.sie = SovereignIngestionEngine.getInstance();\n\n    // Listen to ingestion events\n    this.orchestrator.on('ingestion-completed', (progress) => {\n      this.handleIngestionComplete(progress);\n    });\n  }\n\n  public static getInstance(): AzorahubGitHubIngestion {\n    if (!AzorahubGitHubIngestion.instance) {\n      AzorahubGitHubIngestion.instance = new AzorahubGitHubIngestion();\n    }\n    return AzorahubGitHubIngestion.instance;\n  }\n\n  /**\n   * Start continuous GitHub ingestion\n   */\n  public async startIngestion(): Promise<void> {\n    console.log('ðŸ”„ Starting Azorahub GitHub ingestion...');\n\n    // Add all major GitHub repositories to queue\n    const majorRepos = [\n      // Popular repos\n      { owner: 'facebook', repo: 'react', priority: 'critical' as const },\n      { owner: 'microsoft', repo: 'vscode', priority: 'critical' as const },\n      { owner: 'google', repo: 'tensorflow', priority: 'high' as const },\n      { owner: 'microsoft', repo: 'TypeScript', priority: 'high' as const },\n      { owner: 'kubernetes', repo: 'kubernetes', priority: 'high' as const },\n      { owner: 'pytorch', repo: 'pytorch', priority: 'high' as const },\n      { owner: 'microsoft', repo: 'vscode', priority: 'high' as const },\n      { owner: 'angular', repo: 'angular', priority: 'medium' as const },\n      { owner: 'facebook', repo: 'jest', priority: 'medium' as const },\n      { owner: 'aws', repo: 'aws-sdk-js-v3', priority: 'medium' as const },\n    ];\n\n    for (const repo of majorRepos) {\n      this.orchestrator.addRepository({\n        owner: repo.owner,\n        repo: repo.repo,\n        priority: repo.priority,\n        focus: ['all'],\n        license: 'MIT',\n        keyFiles: []\n      });\n    }\n\n    await this.orchestrator.start();\n    this.emit('ingestion-started');\n  }\n\n  /**\n   * Handle completed ingestion\n   */\n  private handleIngestionComplete(progress: any): void {\n    const repoKey = progress.repository;\n    const [owner, name] = repoKey.split('/');\n\n    const repository: Repository = {\n      id: repoKey,\n      owner,\n      name,\n      description: `Ingested from GitHub: ${repoKey}`,\n      stars: 0,\n      forks: 0,\n      language: 'mixed',\n      license: 'MIT',\n      createdAt: progress.startTime || new Date(),\n      updatedAt: progress.endTime || new Date(),\n      ingested: true,\n      ingestedAt: progress.endTime\n    };\n\n    this.repositories.set(repoKey, repository);\n    this.ingestionStats.ingested++;\n    this.ingestionStats.lastIngestion = new Date();\n\n    this.emit('repository-ingested', repository);\n  }\n\n  /**\n   * Get all ingested repositories\n   */\n  public getRepositories(): Repository[] {\n    return Array.from(this.repositories.values());\n  }\n\n  /**\n   * Get ingestion statistics\n   */\n  public getStats(): IngestionStats {\n    return { ...this.ingestionStats };\n  }\n\n  /**\n   * Search repositories\n   */\n  public searchRepositories(query: string): Repository[] {\n    const results: Repository[] = [];\n    const lowerQuery = query.toLowerCase();\n\n    for (const repo of this.repositories.values()) {\n      if (\n        repo.name.toLowerCase().includes(lowerQuery) ||\n        repo.owner.toLowerCase().includes(lowerQuery) ||\n        repo.description.toLowerCase().includes(lowerQuery) ||\n        repo.language.toLowerCase().includes(lowerQuery)\n      ) {\n        results.push(repo);\n      }\n    }\n\n    return results;\n  }\n}\n\nexport default AzorahubGitHubIngestion;\n\n\n"],"mappings":"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","ignoreList":[]}