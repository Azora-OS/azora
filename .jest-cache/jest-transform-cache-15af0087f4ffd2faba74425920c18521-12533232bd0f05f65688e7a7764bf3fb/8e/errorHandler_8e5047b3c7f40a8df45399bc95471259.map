{"version":3,"names":["cov_1ch8d8id9v","actualCoverage","AppError","Error","constructor","statusCode","message","isOperational","b","f","s","Object","setPrototypeOf","prototype","errorHandler","err","req","res","next","status","json","console","error","process","env","NODE_ENV"],"sources":["errorHandler.ts"],"sourcesContent":["import { Request, Response, NextFunction } from 'express';\n\nexport class AppError extends Error {\n  constructor(\n    public statusCode: number,\n    public message: string,\n    public isOperational = true\n  ) {\n    super(message);\n    Object.setPrototypeOf(this, AppError.prototype);\n  }\n}\n\nexport const errorHandler = (\n  err: Error,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  if (err instanceof AppError) {\n    return res.status(err.statusCode).json({\n      status: 'error',\n      message: err.message,\n    });\n  }\n\n  console.error('Unexpected error:', err);\n\n  const message = process.env.NODE_ENV === 'production'\n    ? 'Internal server error'\n    : err.message;\n\n  res.status(500).json({\n    status: 'error',\n    message,\n  });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAbZ,OAAO,MAAME,QAAQ,SAASC,KAAK,CAAC;EAClCC,WAAWA,CACFC,UAAkB,EAClBC,OAAe,EACfC,aAAa;EAAA;EAAA,CAAAP,cAAA,GAAAQ,CAAA,UAAG,IAAI,GAC3B;IAAA;IAAAR,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAU,CAAA;IACA,KAAK,CAACJ,OAAO,CAAC;IAAC;IAAA,KAJRD,UAAkB,GAAlBA,UAAkB;IAAA;IAAA,KAClBC,OAAe,GAAfA,OAAe;IAAA;IAAA,KACfC,aAAa,GAAbA,aAAa;IAAA;IAAAP,cAAA,GAAAU,CAAA;IAGpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEV,QAAQ,CAACW,SAAS,CAAC;EACjD;AACF;AAAC;AAAAb,cAAA,GAAAU,CAAA;AAED,OAAO,MAAMI,YAAY,GAAGA,CAC1BC,GAAU,EACVC,GAAY,EACZC,GAAa,EACbC,IAAkB,KACf;EAAA;EAAAlB,cAAA,GAAAS,CAAA;EAAAT,cAAA,GAAAU,CAAA;EACH,IAAIK,GAAG,YAAYb,QAAQ,EAAE;IAAA;IAAAF,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAU,CAAA;IAC3B,OAAOO,GAAG,CAACE,MAAM,CAACJ,GAAG,CAACV,UAAU,CAAC,CAACe,IAAI,CAAC;MACrCD,MAAM,EAAE,OAAO;MACfb,OAAO,EAAES,GAAG,CAACT;IACf,CAAC,CAAC;EACJ,CAAC;EAAA;EAAA;IAAAN,cAAA,GAAAQ,CAAA;EAAA;EAAAR,cAAA,GAAAU,CAAA;EAEDW,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEP,GAAG,CAAC;EAEvC,MAAMT,OAAO;EAAA;EAAA,CAAAN,cAAA,GAAAU,CAAA,OAAGa,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY;EAAA;EAAA,CAAAzB,cAAA,GAAAQ,CAAA,UACjD,uBAAuB;EAAA;EAAA,CAAAR,cAAA,GAAAQ,CAAA,UACvBO,GAAG,CAACT,OAAO;EAAC;EAAAN,cAAA,GAAAU,CAAA;EAEhBO,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IACnBD,MAAM,EAAE,OAAO;IACfb;EACF,CAAC,CAAC;AACJ,CAAC","ignoreList":[]}