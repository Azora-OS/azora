{"version":3,"names":["cov_27df6rf0ua","actualCoverage","axios","SouthAfricaDataSource","statsSAUrl","s","jseUrl","fetchEconomicIndicators","indicator","options","b","f","limit","response","get","params","data","error","console","getMockSAData","fetchJSEData","symbol","name","price","change","changePercent","timestamp","Date","toISOString","getMockJSEData","mockData","unemployment","value","unit","date","source","gdp","inflation","Math","random","convertStatisticToKnowledgeSource","stat","type","url","title","content","metadata","category","verified","relevance","tags","convertJSEToKnowledgeSource","jse","trend","toFixed","toLowerCase","fetchAndConvertIndicators","stats","map","fetchAndConvertJSE"],"sources":["south-africa.ts"],"sourcesContent":["import axios from 'axios';\nimport { KnowledgeSource } from '../knowledge-ocean';\n\nexport interface SAStatistic {\n  indicator: string;\n  value: number;\n  unit: string;\n  date: string;\n  source: string;\n}\n\nexport interface JSEData {\n  symbol: string;\n  name: string;\n  price: number;\n  change: number;\n  changePercent: number;\n  timestamp: string;\n}\n\nexport class SouthAfricaDataSource {\n  private statsSAUrl = 'https://www.statssa.gov.za/api';\n  private jseUrl = 'https://api.jse.co.za';\n\n  /**\n   * Fetch economic indicators from Stats SA\n   */\n  async fetchEconomicIndicators(\n    indicator: string,\n    options: { limit?: number } = {}\n  ): Promise<SAStatistic[]> {\n    const { limit = 10 } = options;\n\n    try {\n      // Note: This is a placeholder - actual Stats SA API may differ\n      const response = await axios.get(`${this.statsSAUrl}/indicators/${indicator}`, {\n        params: { limit },\n      });\n\n      return response.data.data || [];\n    } catch (error) {\n      console.error('Error fetching Stats SA data:', error);\n      // Return mock data for demonstration\n      return this.getMockSAData(indicator);\n    }\n  }\n\n  /**\n   * Fetch JSE stock data\n   */\n  async fetchJSEData(symbol: string): Promise<JSEData> {\n    try {\n      const response = await axios.get(`${this.jseUrl}/quote/${symbol}`);\n\n      return {\n        symbol: response.data.symbol,\n        name: response.data.name,\n        price: response.data.price,\n        change: response.data.change,\n        changePercent: response.data.changePercent,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error('Error fetching JSE data:', error);\n      // Return mock data for demonstration\n      return this.getMockJSEData(symbol);\n    }\n  }\n\n  /**\n   * Get mock SA data for demonstration\n   */\n  private getMockSAData(indicator: string): SAStatistic[] {\n    const mockData: Record<string, SAStatistic[]> = {\n      unemployment: [\n        {\n          indicator: 'Unemployment Rate',\n          value: 34.5,\n          unit: '%',\n          date: new Date().toISOString(),\n          source: 'Stats SA',\n        },\n      ],\n      gdp: [\n        {\n          indicator: 'GDP Growth',\n          value: 0.5,\n          unit: '%',\n          date: new Date().toISOString(),\n          source: 'Stats SA',\n        },\n      ],\n      inflation: [\n        {\n          indicator: 'Inflation Rate',\n          value: 5.8,\n          unit: '%',\n          date: new Date().toISOString(),\n          source: 'Stats SA',\n        },\n      ],\n    };\n\n    return mockData[indicator] || [];\n  }\n\n  /**\n   * Get mock JSE data for demonstration\n   */\n  private getMockJSEData(symbol: string): JSEData {\n    return {\n      symbol,\n      name: `${symbol} Limited`,\n      price: 100 + Math.random() * 50,\n      change: Math.random() * 10 - 5,\n      changePercent: Math.random() * 5 - 2.5,\n      timestamp: new Date().toISOString(),\n    };\n  }\n\n  /**\n   * Convert SA statistic to KnowledgeSource\n   */\n  convertStatisticToKnowledgeSource(stat: SAStatistic): Omit<\n    KnowledgeSource,\n    'id' | 'embedding' | 'createdAt' | 'updatedAt'\n  > {\n    return {\n      type: 'market',\n      source: stat.source,\n      url: 'https://www.statssa.gov.za',\n      title: `${stat.indicator} - South Africa`,\n      content: `Indicator: ${stat.indicator}\\nValue: ${stat.value}${stat.unit}\\nDate: ${stat.date}\\nSource: ${stat.source}`,\n      metadata: {\n        date: stat.date,\n        category: 'south-africa',\n        verified: true,\n        relevance: 0.9,\n        tags: ['south-africa', 'statistics', 'economic-data'],\n      },\n    };\n  }\n\n  /**\n   * Convert JSE data to KnowledgeSource\n   */\n  convertJSEToKnowledgeSource(jse: JSEData): Omit<\n    KnowledgeSource,\n    'id' | 'embedding' | 'createdAt' | 'updatedAt'\n  > {\n    const trend = jse.change >= 0 ? 'up' : 'down';\n    return {\n      type: 'market',\n      source: 'JSE',\n      url: `https://www.jse.co.za/stock/${jse.symbol}`,\n      title: `${jse.name} (${jse.symbol}) - JSE Update`,\n      content: `Stock: ${jse.name} (${jse.symbol})\\nPrice: R${jse.price.toFixed(2)}\\nChange: R${jse.change.toFixed(2)} (${jse.changePercent.toFixed(2)}%)\\nTimestamp: ${jse.timestamp}`,\n      metadata: {\n        date: jse.timestamp,\n        category: 'south-africa',\n        verified: true,\n        relevance: 0.9,\n        tags: ['jse', 'south-africa', 'stock', jse.symbol.toLowerCase(), trend],\n      },\n    };\n  }\n\n  /**\n   * Fetch and convert economic indicators\n   */\n  async fetchAndConvertIndicators(\n    indicator: string,\n    options: { limit?: number } = {}\n  ): Promise<Omit<KnowledgeSource, 'id' | 'embedding' | 'createdAt' | 'updatedAt'>[]> {\n    const stats = await this.fetchEconomicIndicators(indicator, options);\n    return stats.map((stat) => this.convertStatisticToKnowledgeSource(stat));\n  }\n\n  /**\n   * Fetch and convert JSE data\n   */\n  async fetchAndConvertJSE(symbol: string): Promise<Omit<\n    KnowledgeSource,\n    'id' | 'embedding' | 'createdAt' | 'updatedAt'\n  >> {\n    const jse = await this.fetchJSEData(symbol);\n    return this.convertJSEToKnowledgeSource(jse);\n  }\n}\n\nexport default SouthAfricaDataSource;\n"],"mappings":"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","ignoreList":[]}