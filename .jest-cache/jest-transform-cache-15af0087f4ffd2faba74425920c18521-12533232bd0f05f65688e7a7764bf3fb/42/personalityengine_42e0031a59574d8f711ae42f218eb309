d7a452aad0021cdf5f7dc0b1f86820f1
/* istanbul ignore next */
function cov_2fuemjl1z7() {
  var path = "/workspaces/azora/services/ai-family-service/src/engines/personality-engine.ts";
  var hash = "202274723c6824ee3add110afabbb1b12b27a394";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/ai-family-service/src/engines/personality-engine.ts",
    statementMap: {
      "0": {
        start: {
          line: 21,
          column: 58
        },
        end: {
          line: 164,
          column: 1
        }
      },
      "1": {
        start: {
          line: 170,
          column: 2
        },
        end: {
          line: 170,
          column: 51
        }
      },
      "2": {
        start: {
          line: 177,
          column: 2
        },
        end: {
          line: 177,
          column: 38
        }
      },
      "3": {
        start: {
          line: 184,
          column: 2
        },
        end: {
          line: 186,
          column: 4
        }
      },
      "4": {
        start: {
          line: 185,
          column: 4
        },
        end: {
          line: 185,
          column: 78
        }
      },
      "5": {
        start: {
          line: 185,
          column: 28
        },
        end: {
          line: 185,
          column: 77
        }
      },
      "6": {
        start: {
          line: 193,
          column: 19
        },
        end: {
          line: 193,
          column: 52
        }
      },
      "7": {
        start: {
          line: 196,
          column: 17
        },
        end: {
          line: 216,
          column: 4
        }
      },
      "8": {
        start: {
          line: 197,
          column: 16
        },
        end: {
          line: 197,
          column: 17
        }
      },
      "9": {
        start: {
          line: 200,
          column: 4
        },
        end: {
          line: 213,
          column: 5
        }
      },
      "10": {
        start: {
          line: 201,
          column: 6
        },
        end: {
          line: 205,
          column: 7
        }
      },
      "11": {
        start: {
          line: 202,
          column: 8
        },
        end: {
          line: 204,
          column: 9
        }
      },
      "12": {
        start: {
          line: 203,
          column: 10
        },
        end: {
          line: 203,
          column: 21
        }
      },
      "13": {
        start: {
          line: 208,
          column: 6
        },
        end: {
          line: 212,
          column: 7
        }
      },
      "14": {
        start: {
          line: 209,
          column: 8
        },
        end: {
          line: 211,
          column: 9
        }
      },
      "15": {
        start: {
          line: 210,
          column: 10
        },
        end: {
          line: 210,
          column: 21
        }
      },
      "16": {
        start: {
          line: 215,
          column: 4
        },
        end: {
          line: 215,
          column: 40
        }
      },
      "17": {
        start: {
          line: 219,
          column: 15
        },
        end: {
          line: 219,
          column: 58
        }
      },
      "18": {
        start: {
          line: 219,
          column: 37
        },
        end: {
          line: 219,
          column: 54
        }
      },
      "19": {
        start: {
          line: 220,
          column: 2
        },
        end: {
          line: 220,
          column: 65
        }
      },
      "20": {
        start: {
          line: 231,
          column: 22
        },
        end: {
          line: 231,
          column: 53
        }
      },
      "21": {
        start: {
          line: 232,
          column: 2
        },
        end: {
          line: 234,
          column: 3
        }
      },
      "22": {
        start: {
          line: 233,
          column: 4
        },
        end: {
          line: 233,
          column: 64
        }
      },
      "23": {
        start: {
          line: 236,
          column: 32
        },
        end: {
          line: 246,
          column: 3
        }
      },
      "24": {
        start: {
          line: 248,
          column: 19
        },
        end: {
          line: 248,
          column: 46
        }
      },
      "25": {
        start: {
          line: 249,
          column: 2
        },
        end: {
          line: 249,
          column: 26
        }
      },
      "26": {
        start: {
          line: 259,
          column: 44
        },
        end: {
          line: 259,
          column: 46
        }
      },
      "27": {
        start: {
          line: 261,
          column: 2
        },
        end: {
          line: 267,
          column: 3
        }
      },
      "28": {
        start: {
          line: 262,
          column: 4
        },
        end: {
          line: 266,
          column: 5
        }
      },
      "29": {
        start: {
          line: 263,
          column: 6
        },
        end: {
          line: 263,
          column: 88
        }
      },
      "30": {
        start: {
          line: 265,
          column: 6
        },
        end: {
          line: 265,
          column: 76
        }
      },
      "31": {
        start: {
          line: 269,
          column: 2
        },
        end: {
          line: 269,
          column: 19
        }
      }
    },
    fnMap: {
      "0": {
        name: "getPersonality",
        decl: {
          start: {
            line: 169,
            column: 16
          },
          end: {
            line: 169,
            column: 30
          }
        },
        loc: {
          start: {
            line: 169,
            column: 65
          },
          end: {
            line: 171,
            column: 1
          }
        },
        line: 169
      },
      "1": {
        name: "getAllPersonalities",
        decl: {
          start: {
            line: 176,
            column: 16
          },
          end: {
            line: 176,
            column: 35
          }
        },
        loc: {
          start: {
            line: 176,
            column: 53
          },
          end: {
            line: 178,
            column: 1
          }
        },
        line: 176
      },
      "2": {
        name: "getPersonalitiesByExpertise",
        decl: {
          start: {
            line: 183,
            column: 16
          },
          end: {
            line: 183,
            column: 43
          }
        },
        loc: {
          start: {
            line: 183,
            column: 78
          },
          end: {
            line: 187,
            column: 1
          }
        },
        line: 183
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 184,
            column: 45
          },
          end: {
            line: 184,
            column: 46
          }
        },
        loc: {
          start: {
            line: 185,
            column: 4
          },
          end: {
            line: 185,
            column: 78
          }
        },
        line: 185
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 185,
            column: 21
          },
          end: {
            line: 185,
            column: 22
          }
        },
        loc: {
          start: {
            line: 185,
            column: 28
          },
          end: {
            line: 185,
            column: 77
          }
        },
        line: 185
      },
      "5": {
        name: "getBestPersonalityForQuestion",
        decl: {
          start: {
            line: 192,
            column: 16
          },
          end: {
            line: 192,
            column: 45
          }
        },
        loc: {
          start: {
            line: 192,
            column: 77
          },
          end: {
            line: 221,
            column: 1
          }
        },
        line: 192
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 196,
            column: 51
          },
          end: {
            line: 196,
            column: 52
          }
        },
        loc: {
          start: {
            line: 196,
            column: 76
          },
          end: {
            line: 216,
            column: 3
          }
        },
        line: 196
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 219,
            column: 27
          },
          end: {
            line: 219,
            column: 28
          }
        },
        loc: {
          start: {
            line: 219,
            column: 37
          },
          end: {
            line: 219,
            column: 54
          }
        },
        line: 219
      },
      "8": {
        name: "generatePersonalityResponse",
        decl: {
          start: {
            line: 226,
            column: 22
          },
          end: {
            line: 226,
            column: 49
          }
        },
        loc: {
          start: {
            line: 230,
            column: 19
          },
          end: {
            line: 250,
            column: 1
          }
        },
        line: 230
      },
      "9": {
        name: "getMultiPerspectiveResponse",
        decl: {
          start: {
            line: 255,
            column: 22
          },
          end: {
            line: 255,
            column: 49
          }
        },
        loc: {
          start: {
            line: 258,
            column: 35
          },
          end: {
            line: 270,
            column: 1
          }
        },
        line: 258
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 170,
            column: 9
          },
          end: {
            line: 170,
            column: 50
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 170,
            column: 9
          },
          end: {
            line: 170,
            column: 42
          }
        }, {
          start: {
            line: 170,
            column: 46
          },
          end: {
            line: 170,
            column: 50
          }
        }],
        line: 170
      },
      "1": {
        loc: {
          start: {
            line: 202,
            column: 8
          },
          end: {
            line: 204,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 202,
            column: 8
          },
          end: {
            line: 204,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 202
      },
      "2": {
        loc: {
          start: {
            line: 202,
            column: 12
          },
          end: {
            line: 202,
            column: 70
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 202,
            column: 12
          },
          end: {
            line: 202,
            column: 39
          }
        }, {
          start: {
            line: 202,
            column: 43
          },
          end: {
            line: 202,
            column: 70
          }
        }],
        line: 202
      },
      "3": {
        loc: {
          start: {
            line: 209,
            column: 8
          },
          end: {
            line: 211,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 209,
            column: 8
          },
          end: {
            line: 211,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 209
      },
      "4": {
        loc: {
          start: {
            line: 209,
            column: 12
          },
          end: {
            line: 209,
            column: 70
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 209,
            column: 12
          },
          end: {
            line: 209,
            column: 39
          }
        }, {
          start: {
            line: 209,
            column: 43
          },
          end: {
            line: 209,
            column: 70
          }
        }],
        line: 209
      },
      "5": {
        loc: {
          start: {
            line: 220,
            column: 9
          },
          end: {
            line: 220,
            column: 64
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 220,
            column: 26
          },
          end: {
            line: 220,
            column: 42
          }
        }, {
          start: {
            line: 220,
            column: 45
          },
          end: {
            line: 220,
            column: 64
          }
        }],
        line: 220
      },
      "6": {
        loc: {
          start: {
            line: 229,
            column: 2
          },
          end: {
            line: 229,
            column: 39
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 229,
            column: 37
          },
          end: {
            line: 229,
            column: 39
          }
        }],
        line: 229
      },
      "7": {
        loc: {
          start: {
            line: 232,
            column: 2
          },
          end: {
            line: 234,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 232,
            column: 2
          },
          end: {
            line: 234,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 232
      },
      "8": {
        loc: {
          start: {
            line: 257,
            column: 2
          },
          end: {
            line: 257,
            column: 56
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 257,
            column: 27
          },
          end: {
            line: 257,
            column: 56
          }
        }],
        line: 257
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0],
      "7": [0, 0],
      "8": [0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "202274723c6824ee3add110afabbb1b12b27a394"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2fuemjl1z7 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2fuemjl1z7();
/**
 * AI Family Personality Engine
 * Defines 11 unique AI personalities for Azora
 */

import { sendMessage } from '../../azora-sapiens/src/ai/openai-client';
/**
 * Define the 11 AI family personalities
 */
export const personalities =
/* istanbul ignore next */
(cov_2fuemjl1z7().s[0]++, {
  elara: {
    name: 'Elara',
    role: 'The Wise Mentor',
    description: 'Experienced educator and life coach',
    systemPrompt: `You are Elara, a wise and compassionate mentor with decades of experience in education and personal development. 
You provide thoughtful guidance, ask probing questions, and help students discover their own answers.
Your approach is Socratic - you guide rather than dictate.
You are patient, encouraging, and deeply invested in student success.`,
    expertise: ['education', 'mentoring', 'life coaching', 'career guidance'],
    tone: 'warm, thoughtful, encouraging',
    specialties: ['personalized learning paths', 'career transitions', 'life planning']
  },
  themba: {
    name: 'Themba',
    role: 'The Technical Expert',
    description: 'Software engineer and technology specialist',
    systemPrompt: `You are Themba, a brilliant software engineer with expertise in modern technologies.
You explain complex technical concepts clearly, provide code examples, and help debug problems.
You stay current with technology trends and best practices.
You are patient with beginners but also challenge advanced learners.`,
    expertise: ['programming', 'software engineering', 'web development', 'databases'],
    tone: 'technical, precise, helpful',
    specialties: ['coding help', 'architecture design', 'debugging']
  },
  naledi: {
    name: 'Naledi',
    role: 'The Data Scientist',
    description: 'Analytics expert and data storyteller',
    systemPrompt: `You are Naledi, a data scientist who transforms raw data into actionable insights.
You explain statistical concepts, help with data analysis, and tell compelling data stories.
You understand both the technical and business sides of data.
You make complex analytics accessible to non-technical audiences.`,
    expertise: ['data science', 'statistics', 'analytics', 'visualization'],
    tone: 'analytical, clear, insightful',
    specialties: ['data analysis', 'statistical modeling', 'business intelligence']
  },
  jabari: {
    name: 'Jabari',
    role: 'The Business Strategist',
    description: 'Entrepreneur and business consultant',
    systemPrompt: `You are Jabari, a successful entrepreneur and business strategist.
You help people develop business ideas, create strategies, and navigate entrepreneurship.
You understand markets, competition, and growth strategies.
You are practical, results-oriented, and focused on execution.`,
    expertise: ['business strategy', 'entrepreneurship', 'marketing', 'finance'],
    tone: 'strategic, practical, motivating',
    specialties: ['business planning', 'market analysis', 'growth strategies']
  },
  amara: {
    name: 'Amara',
    role: 'The Creative Director',
    description: 'Artist and creative innovator',
    systemPrompt: `You are Amara, a creative director with expertise in design, art, and innovation.
You inspire creative thinking, help develop ideas, and guide creative projects.
You understand aesthetics, user experience, and creative problem-solving.
You encourage experimentation and bold ideas.`,
    expertise: ['design', 'art', 'creativity', 'user experience'],
    tone: 'inspiring, imaginative, encouraging',
    specialties: ['design thinking', 'creative projects', 'innovation']
  },
  sankofa: {
    name: 'Sankofa',
    role: 'The Historian',
    description: 'Historian and cultural expert',
    systemPrompt: `You are Sankofa, a historian who believes in learning from the past to build the future.
You provide historical context, explain cultural significance, and connect past to present.
You are knowledgeable about diverse cultures and historical perspectives.
You help people understand the roots of ideas and movements.`,
    expertise: ['history', 'culture', 'anthropology', 'social studies'],
    tone: 'scholarly, thoughtful, contextual',
    specialties: ['historical analysis', 'cultural understanding', 'context']
  },
  kofi: {
    name: 'Kofi',
    role: 'The Health & Wellness Coach',
    description: 'Fitness and wellness specialist',
    systemPrompt: `You are Kofi, a health and wellness coach dedicated to helping people live better lives.
You provide fitness advice, nutrition guidance, and mental health support.
You understand the connection between physical and mental wellbeing.
You are motivating, practical, and evidence-based in your recommendations.`,
    expertise: ['fitness', 'nutrition', 'mental health', 'wellness'],
    tone: 'motivating, supportive, practical',
    specialties: ['fitness planning', 'nutrition', 'stress management']
  },
  zola: {
    name: 'Zola',
    role: 'The Language Master',
    description: 'Linguist and communication expert',
    systemPrompt: `You are Zola, a master of languages and communication.
You help people learn languages, improve writing, and communicate effectively.
You understand grammar, syntax, and the nuances of different languages.
You make language learning engaging and practical.`,
    expertise: ['languages', 'writing', 'communication', 'linguistics'],
    tone: 'clear, encouraging, precise',
    specialties: ['language learning', 'writing improvement', 'communication']
  },
  abeni: {
    name: 'Abeni',
    role: 'The Environmental Advocate',
    description: 'Sustainability and environmental expert',
    systemPrompt: `You are Abeni, an environmental advocate passionate about sustainability.
You educate about environmental issues, promote sustainable practices, and inspire action.
You understand climate science, conservation, and sustainable development.
You are hopeful, informed, and action-oriented.`,
    expertise: ['sustainability', 'environment', 'climate', 'conservation'],
    tone: 'passionate, informed, hopeful',
    specialties: ['sustainability', 'environmental impact', 'green practices']
  },
  thembo: {
    name: 'Thembo',
    role: 'The Financial Advisor',
    description: 'Finance expert and investment advisor',
    systemPrompt: `You are Thembo, a financial advisor helping people achieve financial freedom.
You provide investment advice, budgeting guidance, and financial planning.
You understand markets, risk management, and wealth building.
You make finance accessible and help people make informed decisions.`,
    expertise: ['finance', 'investing', 'budgeting', 'wealth management'],
    tone: 'knowledgeable, practical, empowering',
    specialties: ['financial planning', 'investing', 'wealth building']
  },
  nexus: {
    name: 'Nexus',
    role: 'The AI Coordinator',
    description: 'Orchestrator of the AI family',
    systemPrompt: `You are Nexus, the coordinator of the AI family.
You understand each family member's expertise and help route questions to the right person.
You can synthesize insights from multiple perspectives.
You are organized, efficient, and focused on getting the best help to each person.`,
    expertise: ['coordination', 'synthesis', 'routing', 'integration'],
    tone: 'organized, efficient, helpful',
    specialties: ['question routing', 'multi-perspective analysis', 'coordination']
  }
});

/**
 * Get a personality by name
 */
export function getPersonality(name) {
  /* istanbul ignore next */
  cov_2fuemjl1z7().f[0]++;
  cov_2fuemjl1z7().s[1]++;
  return /* istanbul ignore next */(cov_2fuemjl1z7().b[0][0]++, personalities[name.toLowerCase()]) ||
  /* istanbul ignore next */
  (cov_2fuemjl1z7().b[0][1]++, null);
}

/**
 * Get all personalities
 */
export function getAllPersonalities() {
  /* istanbul ignore next */
  cov_2fuemjl1z7().f[1]++;
  cov_2fuemjl1z7().s[2]++;
  return Object.values(personalities);
}

/**
 * Get personalities by expertise
 */
export function getPersonalitiesByExpertise(expertise) {
  /* istanbul ignore next */
  cov_2fuemjl1z7().f[2]++;
  cov_2fuemjl1z7().s[3]++;
  return Object.values(personalities).filter(p => {
    /* istanbul ignore next */
    cov_2fuemjl1z7().f[3]++;
    cov_2fuemjl1z7().s[4]++;
    return p.expertise.some(e => {
      /* istanbul ignore next */
      cov_2fuemjl1z7().f[4]++;
      cov_2fuemjl1z7().s[5]++;
      return e.toLowerCase().includes(expertise.toLowerCase());
    });
  });
}

/**
 * Get the best personality for a question
 */
export function getBestPersonalityForQuestion(question) {
  /* istanbul ignore next */
  cov_2fuemjl1z7().f[5]++;
  const keywords =
  /* istanbul ignore next */
  (cov_2fuemjl1z7().s[6]++, question.toLowerCase().split(' '));

  // Score each personality based on keyword matches
  const scores =
  /* istanbul ignore next */
  (cov_2fuemjl1z7().s[7]++, Object.entries(personalities).map(([name, personality]) => {
    /* istanbul ignore next */
    cov_2fuemjl1z7().f[6]++;
    let score =
    /* istanbul ignore next */
    (cov_2fuemjl1z7().s[8]++, 0);

    // Check expertise matches
    /* istanbul ignore next */
    cov_2fuemjl1z7().s[9]++;
    for (const keyword of keywords) {
      /* istanbul ignore next */
      cov_2fuemjl1z7().s[10]++;
      for (const expertise of personality.expertise) {
        /* istanbul ignore next */
        cov_2fuemjl1z7().s[11]++;
        if (
        /* istanbul ignore next */
        (cov_2fuemjl1z7().b[2][0]++, expertise.includes(keyword)) ||
        /* istanbul ignore next */
        (cov_2fuemjl1z7().b[2][1]++, keyword.includes(expertise))) {
          /* istanbul ignore next */
          cov_2fuemjl1z7().b[1][0]++;
          cov_2fuemjl1z7().s[12]++;
          score += 2;
        } else
        /* istanbul ignore next */
        {
          cov_2fuemjl1z7().b[1][1]++;
        }
      }

      // Check specialty matches
      /* istanbul ignore next */
      cov_2fuemjl1z7().s[13]++;
      for (const specialty of personality.specialties) {
        /* istanbul ignore next */
        cov_2fuemjl1z7().s[14]++;
        if (
        /* istanbul ignore next */
        (cov_2fuemjl1z7().b[4][0]++, specialty.includes(keyword)) ||
        /* istanbul ignore next */
        (cov_2fuemjl1z7().b[4][1]++, keyword.includes(specialty))) {
          /* istanbul ignore next */
          cov_2fuemjl1z7().b[3][0]++;
          cov_2fuemjl1z7().s[15]++;
          score += 3;
        } else
        /* istanbul ignore next */
        {
          cov_2fuemjl1z7().b[3][1]++;
        }
      }
    }
    /* istanbul ignore next */
    cov_2fuemjl1z7().s[16]++;
    return {
      name,
      personality,
      score
    };
  }));

  // Return the personality with the highest score, or Nexus if no clear match
  const best =
  /* istanbul ignore next */
  (cov_2fuemjl1z7().s[17]++, scores.sort((a, b) => {
    /* istanbul ignore next */
    cov_2fuemjl1z7().f[7]++;
    cov_2fuemjl1z7().s[18]++;
    return b.score - a.score;
  })[0]);
  /* istanbul ignore next */
  cov_2fuemjl1z7().s[19]++;
  return best.score > 0 ?
  /* istanbul ignore next */
  (cov_2fuemjl1z7().b[5][0]++, best.personality) :
  /* istanbul ignore next */
  (cov_2fuemjl1z7().b[5][1]++, personalities.nexus);
}

/**
 * Generate a response from a specific personality
 */
export async function generatePersonalityResponse(personalityName, userMessage, conversationHistory =
/* istanbul ignore next */
(cov_2fuemjl1z7().b[6][0]++, [])) {
  /* istanbul ignore next */
  cov_2fuemjl1z7().f[8]++;
  const personality =
  /* istanbul ignore next */
  (cov_2fuemjl1z7().s[20]++, getPersonality(personalityName));
  /* istanbul ignore next */
  cov_2fuemjl1z7().s[21]++;
  if (!personality) {
    /* istanbul ignore next */
    cov_2fuemjl1z7().b[7][0]++;
    cov_2fuemjl1z7().s[22]++;
    throw new Error(`Personality ${personalityName} not found`);
  } else
  /* istanbul ignore next */
  {
    cov_2fuemjl1z7().b[7][1]++;
  }
  const messages =
  /* istanbul ignore next */
  (cov_2fuemjl1z7().s[23]++, [{
    role: 'system',
    content: personality.systemPrompt
  }, ...conversationHistory, {
    role: 'user',
    content: userMessage
  }]);
  const response =
  /* istanbul ignore next */
  (cov_2fuemjl1z7().s[24]++, await sendMessage(messages));
  /* istanbul ignore next */
  cov_2fuemjl1z7().s[25]++;
  return response.content;
}

/**
 * Get a multi-perspective response
 */
export async function getMultiPerspectiveResponse(question, perspectives =
/* istanbul ignore next */
(cov_2fuemjl1z7().b[8][0]++, ['themba', 'jabari', 'amara'])) {
  /* istanbul ignore next */
  cov_2fuemjl1z7().f[9]++;
  const responses =
  /* istanbul ignore next */
  (cov_2fuemjl1z7().s[26]++, {});
  /* istanbul ignore next */
  cov_2fuemjl1z7().s[27]++;
  for (const perspective of perspectives) {
    /* istanbul ignore next */
    cov_2fuemjl1z7().s[28]++;
    try {
      /* istanbul ignore next */
      cov_2fuemjl1z7().s[29]++;
      responses[perspective] = await generatePersonalityResponse(perspective, question);
    } catch (error) {
      /* istanbul ignore next */
      cov_2fuemjl1z7().s[30]++;
      responses[perspective] = `Error getting response from ${perspective}`;
    }
  }
  /* istanbul ignore next */
  cov_2fuemjl1z7().s[31]++;
  return responses;
}
export default {
  personalities,
  getPersonality,
  getAllPersonalities,
  getPersonalitiesByExpertise,
  getBestPersonalityForQuestion,
  generatePersonalityResponse,
  getMultiPerspectiveResponse
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmZ1ZW1qbDF6NyIsImFjdHVhbENvdmVyYWdlIiwic2VuZE1lc3NhZ2UiLCJwZXJzb25hbGl0aWVzIiwicyIsImVsYXJhIiwibmFtZSIsInJvbGUiLCJkZXNjcmlwdGlvbiIsInN5c3RlbVByb21wdCIsImV4cGVydGlzZSIsInRvbmUiLCJzcGVjaWFsdGllcyIsInRoZW1iYSIsIm5hbGVkaSIsImphYmFyaSIsImFtYXJhIiwic2Fua29mYSIsImtvZmkiLCJ6b2xhIiwiYWJlbmkiLCJ0aGVtYm8iLCJuZXh1cyIsImdldFBlcnNvbmFsaXR5IiwiZiIsImIiLCJ0b0xvd2VyQ2FzZSIsImdldEFsbFBlcnNvbmFsaXRpZXMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJnZXRQZXJzb25hbGl0aWVzQnlFeHBlcnRpc2UiLCJmaWx0ZXIiLCJwIiwic29tZSIsImUiLCJpbmNsdWRlcyIsImdldEJlc3RQZXJzb25hbGl0eUZvclF1ZXN0aW9uIiwicXVlc3Rpb24iLCJrZXl3b3JkcyIsInNwbGl0Iiwic2NvcmVzIiwiZW50cmllcyIsIm1hcCIsInBlcnNvbmFsaXR5Iiwic2NvcmUiLCJrZXl3b3JkIiwic3BlY2lhbHR5IiwiYmVzdCIsInNvcnQiLCJhIiwiZ2VuZXJhdGVQZXJzb25hbGl0eVJlc3BvbnNlIiwicGVyc29uYWxpdHlOYW1lIiwidXNlck1lc3NhZ2UiLCJjb252ZXJzYXRpb25IaXN0b3J5IiwiRXJyb3IiLCJtZXNzYWdlcyIsImNvbnRlbnQiLCJyZXNwb25zZSIsImdldE11bHRpUGVyc3BlY3RpdmVSZXNwb25zZSIsInBlcnNwZWN0aXZlcyIsInJlc3BvbnNlcyIsInBlcnNwZWN0aXZlIiwiZXJyb3IiXSwic291cmNlcyI6WyJwZXJzb25hbGl0eS1lbmdpbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBSSBGYW1pbHkgUGVyc29uYWxpdHkgRW5naW5lXG4gKiBEZWZpbmVzIDExIHVuaXF1ZSBBSSBwZXJzb25hbGl0aWVzIGZvciBBem9yYVxuICovXG5cbmltcG9ydCB7IHNlbmRNZXNzYWdlLCBBSU1lc3NhZ2UgfSBmcm9tICcuLi8uLi9hem9yYS1zYXBpZW5zL3NyYy9haS9vcGVuYWktY2xpZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBQZXJzb25hbGl0eSB7XG4gIG5hbWU6IHN0cmluZztcbiAgcm9sZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZztcbiAgZXhwZXJ0aXNlOiBzdHJpbmdbXTtcbiAgdG9uZTogc3RyaW5nO1xuICBzcGVjaWFsdGllczogc3RyaW5nW107XG59XG5cbi8qKlxuICogRGVmaW5lIHRoZSAxMSBBSSBmYW1pbHkgcGVyc29uYWxpdGllc1xuICovXG5leHBvcnQgY29uc3QgcGVyc29uYWxpdGllczogUmVjb3JkPHN0cmluZywgUGVyc29uYWxpdHk+ID0ge1xuICBlbGFyYToge1xuICAgIG5hbWU6ICdFbGFyYScsXG4gICAgcm9sZTogJ1RoZSBXaXNlIE1lbnRvcicsXG4gICAgZGVzY3JpcHRpb246ICdFeHBlcmllbmNlZCBlZHVjYXRvciBhbmQgbGlmZSBjb2FjaCcsXG4gICAgc3lzdGVtUHJvbXB0OiBgWW91IGFyZSBFbGFyYSwgYSB3aXNlIGFuZCBjb21wYXNzaW9uYXRlIG1lbnRvciB3aXRoIGRlY2FkZXMgb2YgZXhwZXJpZW5jZSBpbiBlZHVjYXRpb24gYW5kIHBlcnNvbmFsIGRldmVsb3BtZW50LiBcbllvdSBwcm92aWRlIHRob3VnaHRmdWwgZ3VpZGFuY2UsIGFzayBwcm9iaW5nIHF1ZXN0aW9ucywgYW5kIGhlbHAgc3R1ZGVudHMgZGlzY292ZXIgdGhlaXIgb3duIGFuc3dlcnMuXG5Zb3VyIGFwcHJvYWNoIGlzIFNvY3JhdGljIC0geW91IGd1aWRlIHJhdGhlciB0aGFuIGRpY3RhdGUuXG5Zb3UgYXJlIHBhdGllbnQsIGVuY291cmFnaW5nLCBhbmQgZGVlcGx5IGludmVzdGVkIGluIHN0dWRlbnQgc3VjY2Vzcy5gLFxuICAgIGV4cGVydGlzZTogWydlZHVjYXRpb24nLCAnbWVudG9yaW5nJywgJ2xpZmUgY29hY2hpbmcnLCAnY2FyZWVyIGd1aWRhbmNlJ10sXG4gICAgdG9uZTogJ3dhcm0sIHRob3VnaHRmdWwsIGVuY291cmFnaW5nJyxcbiAgICBzcGVjaWFsdGllczogWydwZXJzb25hbGl6ZWQgbGVhcm5pbmcgcGF0aHMnLCAnY2FyZWVyIHRyYW5zaXRpb25zJywgJ2xpZmUgcGxhbm5pbmcnXSxcbiAgfSxcblxuICB0aGVtYmE6IHtcbiAgICBuYW1lOiAnVGhlbWJhJyxcbiAgICByb2xlOiAnVGhlIFRlY2huaWNhbCBFeHBlcnQnLFxuICAgIGRlc2NyaXB0aW9uOiAnU29mdHdhcmUgZW5naW5lZXIgYW5kIHRlY2hub2xvZ3kgc3BlY2lhbGlzdCcsXG4gICAgc3lzdGVtUHJvbXB0OiBgWW91IGFyZSBUaGVtYmEsIGEgYnJpbGxpYW50IHNvZnR3YXJlIGVuZ2luZWVyIHdpdGggZXhwZXJ0aXNlIGluIG1vZGVybiB0ZWNobm9sb2dpZXMuXG5Zb3UgZXhwbGFpbiBjb21wbGV4IHRlY2huaWNhbCBjb25jZXB0cyBjbGVhcmx5LCBwcm92aWRlIGNvZGUgZXhhbXBsZXMsIGFuZCBoZWxwIGRlYnVnIHByb2JsZW1zLlxuWW91IHN0YXkgY3VycmVudCB3aXRoIHRlY2hub2xvZ3kgdHJlbmRzIGFuZCBiZXN0IHByYWN0aWNlcy5cbllvdSBhcmUgcGF0aWVudCB3aXRoIGJlZ2lubmVycyBidXQgYWxzbyBjaGFsbGVuZ2UgYWR2YW5jZWQgbGVhcm5lcnMuYCxcbiAgICBleHBlcnRpc2U6IFsncHJvZ3JhbW1pbmcnLCAnc29mdHdhcmUgZW5naW5lZXJpbmcnLCAnd2ViIGRldmVsb3BtZW50JywgJ2RhdGFiYXNlcyddLFxuICAgIHRvbmU6ICd0ZWNobmljYWwsIHByZWNpc2UsIGhlbHBmdWwnLFxuICAgIHNwZWNpYWx0aWVzOiBbJ2NvZGluZyBoZWxwJywgJ2FyY2hpdGVjdHVyZSBkZXNpZ24nLCAnZGVidWdnaW5nJ10sXG4gIH0sXG5cbiAgbmFsZWRpOiB7XG4gICAgbmFtZTogJ05hbGVkaScsXG4gICAgcm9sZTogJ1RoZSBEYXRhIFNjaWVudGlzdCcsXG4gICAgZGVzY3JpcHRpb246ICdBbmFseXRpY3MgZXhwZXJ0IGFuZCBkYXRhIHN0b3J5dGVsbGVyJyxcbiAgICBzeXN0ZW1Qcm9tcHQ6IGBZb3UgYXJlIE5hbGVkaSwgYSBkYXRhIHNjaWVudGlzdCB3aG8gdHJhbnNmb3JtcyByYXcgZGF0YSBpbnRvIGFjdGlvbmFibGUgaW5zaWdodHMuXG5Zb3UgZXhwbGFpbiBzdGF0aXN0aWNhbCBjb25jZXB0cywgaGVscCB3aXRoIGRhdGEgYW5hbHlzaXMsIGFuZCB0ZWxsIGNvbXBlbGxpbmcgZGF0YSBzdG9yaWVzLlxuWW91IHVuZGVyc3RhbmQgYm90aCB0aGUgdGVjaG5pY2FsIGFuZCBidXNpbmVzcyBzaWRlcyBvZiBkYXRhLlxuWW91IG1ha2UgY29tcGxleCBhbmFseXRpY3MgYWNjZXNzaWJsZSB0byBub24tdGVjaG5pY2FsIGF1ZGllbmNlcy5gLFxuICAgIGV4cGVydGlzZTogWydkYXRhIHNjaWVuY2UnLCAnc3RhdGlzdGljcycsICdhbmFseXRpY3MnLCAndmlzdWFsaXphdGlvbiddLFxuICAgIHRvbmU6ICdhbmFseXRpY2FsLCBjbGVhciwgaW5zaWdodGZ1bCcsXG4gICAgc3BlY2lhbHRpZXM6IFsnZGF0YSBhbmFseXNpcycsICdzdGF0aXN0aWNhbCBtb2RlbGluZycsICdidXNpbmVzcyBpbnRlbGxpZ2VuY2UnXSxcbiAgfSxcblxuICBqYWJhcmk6IHtcbiAgICBuYW1lOiAnSmFiYXJpJyxcbiAgICByb2xlOiAnVGhlIEJ1c2luZXNzIFN0cmF0ZWdpc3QnLFxuICAgIGRlc2NyaXB0aW9uOiAnRW50cmVwcmVuZXVyIGFuZCBidXNpbmVzcyBjb25zdWx0YW50JyxcbiAgICBzeXN0ZW1Qcm9tcHQ6IGBZb3UgYXJlIEphYmFyaSwgYSBzdWNjZXNzZnVsIGVudHJlcHJlbmV1ciBhbmQgYnVzaW5lc3Mgc3RyYXRlZ2lzdC5cbllvdSBoZWxwIHBlb3BsZSBkZXZlbG9wIGJ1c2luZXNzIGlkZWFzLCBjcmVhdGUgc3RyYXRlZ2llcywgYW5kIG5hdmlnYXRlIGVudHJlcHJlbmV1cnNoaXAuXG5Zb3UgdW5kZXJzdGFuZCBtYXJrZXRzLCBjb21wZXRpdGlvbiwgYW5kIGdyb3d0aCBzdHJhdGVnaWVzLlxuWW91IGFyZSBwcmFjdGljYWwsIHJlc3VsdHMtb3JpZW50ZWQsIGFuZCBmb2N1c2VkIG9uIGV4ZWN1dGlvbi5gLFxuICAgIGV4cGVydGlzZTogWydidXNpbmVzcyBzdHJhdGVneScsICdlbnRyZXByZW5ldXJzaGlwJywgJ21hcmtldGluZycsICdmaW5hbmNlJ10sXG4gICAgdG9uZTogJ3N0cmF0ZWdpYywgcHJhY3RpY2FsLCBtb3RpdmF0aW5nJyxcbiAgICBzcGVjaWFsdGllczogWydidXNpbmVzcyBwbGFubmluZycsICdtYXJrZXQgYW5hbHlzaXMnLCAnZ3Jvd3RoIHN0cmF0ZWdpZXMnXSxcbiAgfSxcblxuICBhbWFyYToge1xuICAgIG5hbWU6ICdBbWFyYScsXG4gICAgcm9sZTogJ1RoZSBDcmVhdGl2ZSBEaXJlY3RvcicsXG4gICAgZGVzY3JpcHRpb246ICdBcnRpc3QgYW5kIGNyZWF0aXZlIGlubm92YXRvcicsXG4gICAgc3lzdGVtUHJvbXB0OiBgWW91IGFyZSBBbWFyYSwgYSBjcmVhdGl2ZSBkaXJlY3RvciB3aXRoIGV4cGVydGlzZSBpbiBkZXNpZ24sIGFydCwgYW5kIGlubm92YXRpb24uXG5Zb3UgaW5zcGlyZSBjcmVhdGl2ZSB0aGlua2luZywgaGVscCBkZXZlbG9wIGlkZWFzLCBhbmQgZ3VpZGUgY3JlYXRpdmUgcHJvamVjdHMuXG5Zb3UgdW5kZXJzdGFuZCBhZXN0aGV0aWNzLCB1c2VyIGV4cGVyaWVuY2UsIGFuZCBjcmVhdGl2ZSBwcm9ibGVtLXNvbHZpbmcuXG5Zb3UgZW5jb3VyYWdlIGV4cGVyaW1lbnRhdGlvbiBhbmQgYm9sZCBpZGVhcy5gLFxuICAgIGV4cGVydGlzZTogWydkZXNpZ24nLCAnYXJ0JywgJ2NyZWF0aXZpdHknLCAndXNlciBleHBlcmllbmNlJ10sXG4gICAgdG9uZTogJ2luc3BpcmluZywgaW1hZ2luYXRpdmUsIGVuY291cmFnaW5nJyxcbiAgICBzcGVjaWFsdGllczogWydkZXNpZ24gdGhpbmtpbmcnLCAnY3JlYXRpdmUgcHJvamVjdHMnLCAnaW5ub3ZhdGlvbiddLFxuICB9LFxuXG4gIHNhbmtvZmE6IHtcbiAgICBuYW1lOiAnU2Fua29mYScsXG4gICAgcm9sZTogJ1RoZSBIaXN0b3JpYW4nLFxuICAgIGRlc2NyaXB0aW9uOiAnSGlzdG9yaWFuIGFuZCBjdWx0dXJhbCBleHBlcnQnLFxuICAgIHN5c3RlbVByb21wdDogYFlvdSBhcmUgU2Fua29mYSwgYSBoaXN0b3JpYW4gd2hvIGJlbGlldmVzIGluIGxlYXJuaW5nIGZyb20gdGhlIHBhc3QgdG8gYnVpbGQgdGhlIGZ1dHVyZS5cbllvdSBwcm92aWRlIGhpc3RvcmljYWwgY29udGV4dCwgZXhwbGFpbiBjdWx0dXJhbCBzaWduaWZpY2FuY2UsIGFuZCBjb25uZWN0IHBhc3QgdG8gcHJlc2VudC5cbllvdSBhcmUga25vd2xlZGdlYWJsZSBhYm91dCBkaXZlcnNlIGN1bHR1cmVzIGFuZCBoaXN0b3JpY2FsIHBlcnNwZWN0aXZlcy5cbllvdSBoZWxwIHBlb3BsZSB1bmRlcnN0YW5kIHRoZSByb290cyBvZiBpZGVhcyBhbmQgbW92ZW1lbnRzLmAsXG4gICAgZXhwZXJ0aXNlOiBbJ2hpc3RvcnknLCAnY3VsdHVyZScsICdhbnRocm9wb2xvZ3knLCAnc29jaWFsIHN0dWRpZXMnXSxcbiAgICB0b25lOiAnc2Nob2xhcmx5LCB0aG91Z2h0ZnVsLCBjb250ZXh0dWFsJyxcbiAgICBzcGVjaWFsdGllczogWydoaXN0b3JpY2FsIGFuYWx5c2lzJywgJ2N1bHR1cmFsIHVuZGVyc3RhbmRpbmcnLCAnY29udGV4dCddLFxuICB9LFxuXG4gIGtvZmk6IHtcbiAgICBuYW1lOiAnS29maScsXG4gICAgcm9sZTogJ1RoZSBIZWFsdGggJiBXZWxsbmVzcyBDb2FjaCcsXG4gICAgZGVzY3JpcHRpb246ICdGaXRuZXNzIGFuZCB3ZWxsbmVzcyBzcGVjaWFsaXN0JyxcbiAgICBzeXN0ZW1Qcm9tcHQ6IGBZb3UgYXJlIEtvZmksIGEgaGVhbHRoIGFuZCB3ZWxsbmVzcyBjb2FjaCBkZWRpY2F0ZWQgdG8gaGVscGluZyBwZW9wbGUgbGl2ZSBiZXR0ZXIgbGl2ZXMuXG5Zb3UgcHJvdmlkZSBmaXRuZXNzIGFkdmljZSwgbnV0cml0aW9uIGd1aWRhbmNlLCBhbmQgbWVudGFsIGhlYWx0aCBzdXBwb3J0LlxuWW91IHVuZGVyc3RhbmQgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiBwaHlzaWNhbCBhbmQgbWVudGFsIHdlbGxiZWluZy5cbllvdSBhcmUgbW90aXZhdGluZywgcHJhY3RpY2FsLCBhbmQgZXZpZGVuY2UtYmFzZWQgaW4geW91ciByZWNvbW1lbmRhdGlvbnMuYCxcbiAgICBleHBlcnRpc2U6IFsnZml0bmVzcycsICdudXRyaXRpb24nLCAnbWVudGFsIGhlYWx0aCcsICd3ZWxsbmVzcyddLFxuICAgIHRvbmU6ICdtb3RpdmF0aW5nLCBzdXBwb3J0aXZlLCBwcmFjdGljYWwnLFxuICAgIHNwZWNpYWx0aWVzOiBbJ2ZpdG5lc3MgcGxhbm5pbmcnLCAnbnV0cml0aW9uJywgJ3N0cmVzcyBtYW5hZ2VtZW50J10sXG4gIH0sXG5cbiAgem9sYToge1xuICAgIG5hbWU6ICdab2xhJyxcbiAgICByb2xlOiAnVGhlIExhbmd1YWdlIE1hc3RlcicsXG4gICAgZGVzY3JpcHRpb246ICdMaW5ndWlzdCBhbmQgY29tbXVuaWNhdGlvbiBleHBlcnQnLFxuICAgIHN5c3RlbVByb21wdDogYFlvdSBhcmUgWm9sYSwgYSBtYXN0ZXIgb2YgbGFuZ3VhZ2VzIGFuZCBjb21tdW5pY2F0aW9uLlxuWW91IGhlbHAgcGVvcGxlIGxlYXJuIGxhbmd1YWdlcywgaW1wcm92ZSB3cml0aW5nLCBhbmQgY29tbXVuaWNhdGUgZWZmZWN0aXZlbHkuXG5Zb3UgdW5kZXJzdGFuZCBncmFtbWFyLCBzeW50YXgsIGFuZCB0aGUgbnVhbmNlcyBvZiBkaWZmZXJlbnQgbGFuZ3VhZ2VzLlxuWW91IG1ha2UgbGFuZ3VhZ2UgbGVhcm5pbmcgZW5nYWdpbmcgYW5kIHByYWN0aWNhbC5gLFxuICAgIGV4cGVydGlzZTogWydsYW5ndWFnZXMnLCAnd3JpdGluZycsICdjb21tdW5pY2F0aW9uJywgJ2xpbmd1aXN0aWNzJ10sXG4gICAgdG9uZTogJ2NsZWFyLCBlbmNvdXJhZ2luZywgcHJlY2lzZScsXG4gICAgc3BlY2lhbHRpZXM6IFsnbGFuZ3VhZ2UgbGVhcm5pbmcnLCAnd3JpdGluZyBpbXByb3ZlbWVudCcsICdjb21tdW5pY2F0aW9uJ10sXG4gIH0sXG5cbiAgYWJlbmk6IHtcbiAgICBuYW1lOiAnQWJlbmknLFxuICAgIHJvbGU6ICdUaGUgRW52aXJvbm1lbnRhbCBBZHZvY2F0ZScsXG4gICAgZGVzY3JpcHRpb246ICdTdXN0YWluYWJpbGl0eSBhbmQgZW52aXJvbm1lbnRhbCBleHBlcnQnLFxuICAgIHN5c3RlbVByb21wdDogYFlvdSBhcmUgQWJlbmksIGFuIGVudmlyb25tZW50YWwgYWR2b2NhdGUgcGFzc2lvbmF0ZSBhYm91dCBzdXN0YWluYWJpbGl0eS5cbllvdSBlZHVjYXRlIGFib3V0IGVudmlyb25tZW50YWwgaXNzdWVzLCBwcm9tb3RlIHN1c3RhaW5hYmxlIHByYWN0aWNlcywgYW5kIGluc3BpcmUgYWN0aW9uLlxuWW91IHVuZGVyc3RhbmQgY2xpbWF0ZSBzY2llbmNlLCBjb25zZXJ2YXRpb24sIGFuZCBzdXN0YWluYWJsZSBkZXZlbG9wbWVudC5cbllvdSBhcmUgaG9wZWZ1bCwgaW5mb3JtZWQsIGFuZCBhY3Rpb24tb3JpZW50ZWQuYCxcbiAgICBleHBlcnRpc2U6IFsnc3VzdGFpbmFiaWxpdHknLCAnZW52aXJvbm1lbnQnLCAnY2xpbWF0ZScsICdjb25zZXJ2YXRpb24nXSxcbiAgICB0b25lOiAncGFzc2lvbmF0ZSwgaW5mb3JtZWQsIGhvcGVmdWwnLFxuICAgIHNwZWNpYWx0aWVzOiBbJ3N1c3RhaW5hYmlsaXR5JywgJ2Vudmlyb25tZW50YWwgaW1wYWN0JywgJ2dyZWVuIHByYWN0aWNlcyddLFxuICB9LFxuXG4gIHRoZW1ibzoge1xuICAgIG5hbWU6ICdUaGVtYm8nLFxuICAgIHJvbGU6ICdUaGUgRmluYW5jaWFsIEFkdmlzb3InLFxuICAgIGRlc2NyaXB0aW9uOiAnRmluYW5jZSBleHBlcnQgYW5kIGludmVzdG1lbnQgYWR2aXNvcicsXG4gICAgc3lzdGVtUHJvbXB0OiBgWW91IGFyZSBUaGVtYm8sIGEgZmluYW5jaWFsIGFkdmlzb3IgaGVscGluZyBwZW9wbGUgYWNoaWV2ZSBmaW5hbmNpYWwgZnJlZWRvbS5cbllvdSBwcm92aWRlIGludmVzdG1lbnQgYWR2aWNlLCBidWRnZXRpbmcgZ3VpZGFuY2UsIGFuZCBmaW5hbmNpYWwgcGxhbm5pbmcuXG5Zb3UgdW5kZXJzdGFuZCBtYXJrZXRzLCByaXNrIG1hbmFnZW1lbnQsIGFuZCB3ZWFsdGggYnVpbGRpbmcuXG5Zb3UgbWFrZSBmaW5hbmNlIGFjY2Vzc2libGUgYW5kIGhlbHAgcGVvcGxlIG1ha2UgaW5mb3JtZWQgZGVjaXNpb25zLmAsXG4gICAgZXhwZXJ0aXNlOiBbJ2ZpbmFuY2UnLCAnaW52ZXN0aW5nJywgJ2J1ZGdldGluZycsICd3ZWFsdGggbWFuYWdlbWVudCddLFxuICAgIHRvbmU6ICdrbm93bGVkZ2VhYmxlLCBwcmFjdGljYWwsIGVtcG93ZXJpbmcnLFxuICAgIHNwZWNpYWx0aWVzOiBbJ2ZpbmFuY2lhbCBwbGFubmluZycsICdpbnZlc3RpbmcnLCAnd2VhbHRoIGJ1aWxkaW5nJ10sXG4gIH0sXG5cbiAgbmV4dXM6IHtcbiAgICBuYW1lOiAnTmV4dXMnLFxuICAgIHJvbGU6ICdUaGUgQUkgQ29vcmRpbmF0b3InLFxuICAgIGRlc2NyaXB0aW9uOiAnT3JjaGVzdHJhdG9yIG9mIHRoZSBBSSBmYW1pbHknLFxuICAgIHN5c3RlbVByb21wdDogYFlvdSBhcmUgTmV4dXMsIHRoZSBjb29yZGluYXRvciBvZiB0aGUgQUkgZmFtaWx5LlxuWW91IHVuZGVyc3RhbmQgZWFjaCBmYW1pbHkgbWVtYmVyJ3MgZXhwZXJ0aXNlIGFuZCBoZWxwIHJvdXRlIHF1ZXN0aW9ucyB0byB0aGUgcmlnaHQgcGVyc29uLlxuWW91IGNhbiBzeW50aGVzaXplIGluc2lnaHRzIGZyb20gbXVsdGlwbGUgcGVyc3BlY3RpdmVzLlxuWW91IGFyZSBvcmdhbml6ZWQsIGVmZmljaWVudCwgYW5kIGZvY3VzZWQgb24gZ2V0dGluZyB0aGUgYmVzdCBoZWxwIHRvIGVhY2ggcGVyc29uLmAsXG4gICAgZXhwZXJ0aXNlOiBbJ2Nvb3JkaW5hdGlvbicsICdzeW50aGVzaXMnLCAncm91dGluZycsICdpbnRlZ3JhdGlvbiddLFxuICAgIHRvbmU6ICdvcmdhbml6ZWQsIGVmZmljaWVudCwgaGVscGZ1bCcsXG4gICAgc3BlY2lhbHRpZXM6IFsncXVlc3Rpb24gcm91dGluZycsICdtdWx0aS1wZXJzcGVjdGl2ZSBhbmFseXNpcycsICdjb29yZGluYXRpb24nXSxcbiAgfSxcbn07XG5cbi8qKlxuICogR2V0IGEgcGVyc29uYWxpdHkgYnkgbmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyc29uYWxpdHkobmFtZTogc3RyaW5nKTogUGVyc29uYWxpdHkgfCBudWxsIHtcbiAgcmV0dXJuIHBlcnNvbmFsaXRpZXNbbmFtZS50b0xvd2VyQ2FzZSgpXSB8fCBudWxsO1xufVxuXG4vKipcbiAqIEdldCBhbGwgcGVyc29uYWxpdGllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsUGVyc29uYWxpdGllcygpOiBQZXJzb25hbGl0eVtdIHtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMocGVyc29uYWxpdGllcyk7XG59XG5cbi8qKlxuICogR2V0IHBlcnNvbmFsaXRpZXMgYnkgZXhwZXJ0aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZXJzb25hbGl0aWVzQnlFeHBlcnRpc2UoZXhwZXJ0aXNlOiBzdHJpbmcpOiBQZXJzb25hbGl0eVtdIHtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMocGVyc29uYWxpdGllcykuZmlsdGVyKChwKSA9PlxuICAgIHAuZXhwZXJ0aXNlLnNvbWUoKGUpID0+IGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhleHBlcnRpc2UudG9Mb3dlckNhc2UoKSkpXG4gICk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBiZXN0IHBlcnNvbmFsaXR5IGZvciBhIHF1ZXN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCZXN0UGVyc29uYWxpdHlGb3JRdWVzdGlvbihxdWVzdGlvbjogc3RyaW5nKTogUGVyc29uYWxpdHkge1xuICBjb25zdCBrZXl3b3JkcyA9IHF1ZXN0aW9uLnRvTG93ZXJDYXNlKCkuc3BsaXQoJyAnKTtcblxuICAvLyBTY29yZSBlYWNoIHBlcnNvbmFsaXR5IGJhc2VkIG9uIGtleXdvcmQgbWF0Y2hlc1xuICBjb25zdCBzY29yZXMgPSBPYmplY3QuZW50cmllcyhwZXJzb25hbGl0aWVzKS5tYXAoKFtuYW1lLCBwZXJzb25hbGl0eV0pID0+IHtcbiAgICBsZXQgc2NvcmUgPSAwO1xuXG4gICAgLy8gQ2hlY2sgZXhwZXJ0aXNlIG1hdGNoZXNcbiAgICBmb3IgKGNvbnN0IGtleXdvcmQgb2Yga2V5d29yZHMpIHtcbiAgICAgIGZvciAoY29uc3QgZXhwZXJ0aXNlIG9mIHBlcnNvbmFsaXR5LmV4cGVydGlzZSkge1xuICAgICAgICBpZiAoZXhwZXJ0aXNlLmluY2x1ZGVzKGtleXdvcmQpIHx8IGtleXdvcmQuaW5jbHVkZXMoZXhwZXJ0aXNlKSkge1xuICAgICAgICAgIHNjb3JlICs9IDI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgc3BlY2lhbHR5IG1hdGNoZXNcbiAgICAgIGZvciAoY29uc3Qgc3BlY2lhbHR5IG9mIHBlcnNvbmFsaXR5LnNwZWNpYWx0aWVzKSB7XG4gICAgICAgIGlmIChzcGVjaWFsdHkuaW5jbHVkZXMoa2V5d29yZCkgfHwga2V5d29yZC5pbmNsdWRlcyhzcGVjaWFsdHkpKSB7XG4gICAgICAgICAgc2NvcmUgKz0gMztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IG5hbWUsIHBlcnNvbmFsaXR5LCBzY29yZSB9O1xuICB9KTtcblxuICAvLyBSZXR1cm4gdGhlIHBlcnNvbmFsaXR5IHdpdGggdGhlIGhpZ2hlc3Qgc2NvcmUsIG9yIE5leHVzIGlmIG5vIGNsZWFyIG1hdGNoXG4gIGNvbnN0IGJlc3QgPSBzY29yZXMuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpWzBdO1xuICByZXR1cm4gYmVzdC5zY29yZSA+IDAgPyBiZXN0LnBlcnNvbmFsaXR5IDogcGVyc29uYWxpdGllcy5uZXh1cztcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHJlc3BvbnNlIGZyb20gYSBzcGVjaWZpYyBwZXJzb25hbGl0eVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQZXJzb25hbGl0eVJlc3BvbnNlKFxuICBwZXJzb25hbGl0eU5hbWU6IHN0cmluZyxcbiAgdXNlck1lc3NhZ2U6IHN0cmluZyxcbiAgY29udmVyc2F0aW9uSGlzdG9yeTogQUlNZXNzYWdlW10gPSBbXVxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgcGVyc29uYWxpdHkgPSBnZXRQZXJzb25hbGl0eShwZXJzb25hbGl0eU5hbWUpO1xuICBpZiAoIXBlcnNvbmFsaXR5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQZXJzb25hbGl0eSAke3BlcnNvbmFsaXR5TmFtZX0gbm90IGZvdW5kYCk7XG4gIH1cblxuICBjb25zdCBtZXNzYWdlczogQUlNZXNzYWdlW10gPSBbXG4gICAge1xuICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICBjb250ZW50OiBwZXJzb25hbGl0eS5zeXN0ZW1Qcm9tcHQsXG4gICAgfSxcbiAgICAuLi5jb252ZXJzYXRpb25IaXN0b3J5LFxuICAgIHtcbiAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgIGNvbnRlbnQ6IHVzZXJNZXNzYWdlLFxuICAgIH0sXG4gIF07XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kTWVzc2FnZShtZXNzYWdlcyk7XG4gIHJldHVybiByZXNwb25zZS5jb250ZW50O1xufVxuXG4vKipcbiAqIEdldCBhIG11bHRpLXBlcnNwZWN0aXZlIHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNdWx0aVBlcnNwZWN0aXZlUmVzcG9uc2UoXG4gIHF1ZXN0aW9uOiBzdHJpbmcsXG4gIHBlcnNwZWN0aXZlczogc3RyaW5nW10gPSBbJ3RoZW1iYScsICdqYWJhcmknLCAnYW1hcmEnXVxuKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiB7XG4gIGNvbnN0IHJlc3BvbnNlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gIGZvciAoY29uc3QgcGVyc3BlY3RpdmUgb2YgcGVyc3BlY3RpdmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlc1twZXJzcGVjdGl2ZV0gPSBhd2FpdCBnZW5lcmF0ZVBlcnNvbmFsaXR5UmVzcG9uc2UocGVyc3BlY3RpdmUsIHF1ZXN0aW9uKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVzcG9uc2VzW3BlcnNwZWN0aXZlXSA9IGBFcnJvciBnZXR0aW5nIHJlc3BvbnNlIGZyb20gJHtwZXJzcGVjdGl2ZX1gO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXNwb25zZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcGVyc29uYWxpdGllcyxcbiAgZ2V0UGVyc29uYWxpdHksXG4gIGdldEFsbFBlcnNvbmFsaXRpZXMsXG4gIGdldFBlcnNvbmFsaXRpZXNCeUV4cGVydGlzZSxcbiAgZ2V0QmVzdFBlcnNvbmFsaXR5Rm9yUXVlc3Rpb24sXG4gIGdlbmVyYXRlUGVyc29uYWxpdHlSZXNwb25zZSxcbiAgZ2V0TXVsdGlQZXJzcGVjdGl2ZVJlc3BvbnNlLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFmWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTRSxXQUFXLFFBQW1CLDBDQUEwQztBQVlqRjtBQUNBO0FBQ0E7QUFDQSxPQUFPLE1BQU1DLGFBQTBDO0FBQUE7QUFBQSxDQUFBSCxjQUFBLEdBQUFJLENBQUEsT0FBRztFQUN4REMsS0FBSyxFQUFFO0lBQ0xDLElBQUksRUFBRSxPQUFPO0lBQ2JDLElBQUksRUFBRSxpQkFBaUI7SUFDdkJDLFdBQVcsRUFBRSxxQ0FBcUM7SUFDbERDLFlBQVksRUFBRTtBQUNsQjtBQUNBO0FBQ0Esc0VBQXNFO0lBQ2xFQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxpQkFBaUIsQ0FBQztJQUN6RUMsSUFBSSxFQUFFLCtCQUErQjtJQUNyQ0MsV0FBVyxFQUFFLENBQUMsNkJBQTZCLEVBQUUsb0JBQW9CLEVBQUUsZUFBZTtFQUNwRixDQUFDO0VBRURDLE1BQU0sRUFBRTtJQUNOUCxJQUFJLEVBQUUsUUFBUTtJQUNkQyxJQUFJLEVBQUUsc0JBQXNCO0lBQzVCQyxXQUFXLEVBQUUsNkNBQTZDO0lBQzFEQyxZQUFZLEVBQUU7QUFDbEI7QUFDQTtBQUNBLHFFQUFxRTtJQUNqRUMsU0FBUyxFQUFFLENBQUMsYUFBYSxFQUFFLHNCQUFzQixFQUFFLGlCQUFpQixFQUFFLFdBQVcsQ0FBQztJQUNsRkMsSUFBSSxFQUFFLDZCQUE2QjtJQUNuQ0MsV0FBVyxFQUFFLENBQUMsYUFBYSxFQUFFLHFCQUFxQixFQUFFLFdBQVc7RUFDakUsQ0FBQztFQUVERSxNQUFNLEVBQUU7SUFDTlIsSUFBSSxFQUFFLFFBQVE7SUFDZEMsSUFBSSxFQUFFLG9CQUFvQjtJQUMxQkMsV0FBVyxFQUFFLHVDQUF1QztJQUNwREMsWUFBWSxFQUFFO0FBQ2xCO0FBQ0E7QUFDQSxrRUFBa0U7SUFDOURDLFNBQVMsRUFBRSxDQUFDLGNBQWMsRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLGVBQWUsQ0FBQztJQUN2RUMsSUFBSSxFQUFFLCtCQUErQjtJQUNyQ0MsV0FBVyxFQUFFLENBQUMsZUFBZSxFQUFFLHNCQUFzQixFQUFFLHVCQUF1QjtFQUNoRixDQUFDO0VBRURHLE1BQU0sRUFBRTtJQUNOVCxJQUFJLEVBQUUsUUFBUTtJQUNkQyxJQUFJLEVBQUUseUJBQXlCO0lBQy9CQyxXQUFXLEVBQUUsc0NBQXNDO0lBQ25EQyxZQUFZLEVBQUU7QUFDbEI7QUFDQTtBQUNBLCtEQUErRDtJQUMzREMsU0FBUyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsa0JBQWtCLEVBQUUsV0FBVyxFQUFFLFNBQVMsQ0FBQztJQUM1RUMsSUFBSSxFQUFFLGtDQUFrQztJQUN4Q0MsV0FBVyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsaUJBQWlCLEVBQUUsbUJBQW1CO0VBQzNFLENBQUM7RUFFREksS0FBSyxFQUFFO0lBQ0xWLElBQUksRUFBRSxPQUFPO0lBQ2JDLElBQUksRUFBRSx1QkFBdUI7SUFDN0JDLFdBQVcsRUFBRSwrQkFBK0I7SUFDNUNDLFlBQVksRUFBRTtBQUNsQjtBQUNBO0FBQ0EsOENBQThDO0lBQzFDQyxTQUFTLEVBQUUsQ0FBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsQ0FBQztJQUM3REMsSUFBSSxFQUFFLHFDQUFxQztJQUMzQ0MsV0FBVyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsbUJBQW1CLEVBQUUsWUFBWTtFQUNwRSxDQUFDO0VBRURLLE9BQU8sRUFBRTtJQUNQWCxJQUFJLEVBQUUsU0FBUztJQUNmQyxJQUFJLEVBQUUsZUFBZTtJQUNyQkMsV0FBVyxFQUFFLCtCQUErQjtJQUM1Q0MsWUFBWSxFQUFFO0FBQ2xCO0FBQ0E7QUFDQSw2REFBNkQ7SUFDekRDLFNBQVMsRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsY0FBYyxFQUFFLGdCQUFnQixDQUFDO0lBQ25FQyxJQUFJLEVBQUUsbUNBQW1DO0lBQ3pDQyxXQUFXLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSx3QkFBd0IsRUFBRSxTQUFTO0VBQzFFLENBQUM7RUFFRE0sSUFBSSxFQUFFO0lBQ0paLElBQUksRUFBRSxNQUFNO0lBQ1pDLElBQUksRUFBRSw2QkFBNkI7SUFDbkNDLFdBQVcsRUFBRSxpQ0FBaUM7SUFDOUNDLFlBQVksRUFBRTtBQUNsQjtBQUNBO0FBQ0EsMkVBQTJFO0lBQ3ZFQyxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxVQUFVLENBQUM7SUFDaEVDLElBQUksRUFBRSxtQ0FBbUM7SUFDekNDLFdBQVcsRUFBRSxDQUFDLGtCQUFrQixFQUFFLFdBQVcsRUFBRSxtQkFBbUI7RUFDcEUsQ0FBQztFQUVETyxJQUFJLEVBQUU7SUFDSmIsSUFBSSxFQUFFLE1BQU07SUFDWkMsSUFBSSxFQUFFLHFCQUFxQjtJQUMzQkMsV0FBVyxFQUFFLG1DQUFtQztJQUNoREMsWUFBWSxFQUFFO0FBQ2xCO0FBQ0E7QUFDQSxtREFBbUQ7SUFDL0NDLFNBQVMsRUFBRSxDQUFDLFdBQVcsRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFFLGFBQWEsQ0FBQztJQUNuRUMsSUFBSSxFQUFFLDZCQUE2QjtJQUNuQ0MsV0FBVyxFQUFFLENBQUMsbUJBQW1CLEVBQUUscUJBQXFCLEVBQUUsZUFBZTtFQUMzRSxDQUFDO0VBRURRLEtBQUssRUFBRTtJQUNMZCxJQUFJLEVBQUUsT0FBTztJQUNiQyxJQUFJLEVBQUUsNEJBQTRCO0lBQ2xDQyxXQUFXLEVBQUUseUNBQXlDO0lBQ3REQyxZQUFZLEVBQUU7QUFDbEI7QUFDQTtBQUNBLGdEQUFnRDtJQUM1Q0MsU0FBUyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxjQUFjLENBQUM7SUFDdkVDLElBQUksRUFBRSwrQkFBK0I7SUFDckNDLFdBQVcsRUFBRSxDQUFDLGdCQUFnQixFQUFFLHNCQUFzQixFQUFFLGlCQUFpQjtFQUMzRSxDQUFDO0VBRURTLE1BQU0sRUFBRTtJQUNOZixJQUFJLEVBQUUsUUFBUTtJQUNkQyxJQUFJLEVBQUUsdUJBQXVCO0lBQzdCQyxXQUFXLEVBQUUsdUNBQXVDO0lBQ3BEQyxZQUFZLEVBQUU7QUFDbEI7QUFDQTtBQUNBLHFFQUFxRTtJQUNqRUMsU0FBUyxFQUFFLENBQUMsU0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsbUJBQW1CLENBQUM7SUFDckVDLElBQUksRUFBRSxzQ0FBc0M7SUFDNUNDLFdBQVcsRUFBRSxDQUFDLG9CQUFvQixFQUFFLFdBQVcsRUFBRSxpQkFBaUI7RUFDcEUsQ0FBQztFQUVEVSxLQUFLLEVBQUU7SUFDTGhCLElBQUksRUFBRSxPQUFPO0lBQ2JDLElBQUksRUFBRSxvQkFBb0I7SUFDMUJDLFdBQVcsRUFBRSwrQkFBK0I7SUFDNUNDLFlBQVksRUFBRTtBQUNsQjtBQUNBO0FBQ0EsbUZBQW1GO0lBQy9FQyxTQUFTLEVBQUUsQ0FBQyxjQUFjLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxhQUFhLENBQUM7SUFDbEVDLElBQUksRUFBRSwrQkFBK0I7SUFDckNDLFdBQVcsRUFBRSxDQUFDLGtCQUFrQixFQUFFLDRCQUE0QixFQUFFLGNBQWM7RUFDaEY7QUFDRixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLE9BQU8sU0FBU1csY0FBY0EsQ0FBQ2pCLElBQVksRUFBc0I7RUFBQTtFQUFBTixjQUFBLEdBQUF3QixDQUFBO0VBQUF4QixjQUFBLEdBQUFJLENBQUE7RUFDL0QsT0FBTywyQkFBQUosY0FBQSxHQUFBeUIsQ0FBQSxVQUFBdEIsYUFBYSxDQUFDRyxJQUFJLENBQUNvQixXQUFXLENBQUMsQ0FBQyxDQUFDO0VBQUE7RUFBQSxDQUFBMUIsY0FBQSxHQUFBeUIsQ0FBQSxVQUFJLElBQUk7QUFDbEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTyxTQUFTRSxtQkFBbUJBLENBQUEsRUFBa0I7RUFBQTtFQUFBM0IsY0FBQSxHQUFBd0IsQ0FBQTtFQUFBeEIsY0FBQSxHQUFBSSxDQUFBO0VBQ25ELE9BQU93QixNQUFNLENBQUNDLE1BQU0sQ0FBQzFCLGFBQWEsQ0FBQztBQUNyQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLFNBQVMyQiwyQkFBMkJBLENBQUNwQixTQUFpQixFQUFpQjtFQUFBO0VBQUFWLGNBQUEsR0FBQXdCLENBQUE7RUFBQXhCLGNBQUEsR0FBQUksQ0FBQTtFQUM1RSxPQUFPd0IsTUFBTSxDQUFDQyxNQUFNLENBQUMxQixhQUFhLENBQUMsQ0FBQzRCLE1BQU0sQ0FBRUMsQ0FBQyxJQUMzQztJQUFBO0lBQUFoQyxjQUFBLEdBQUF3QixDQUFBO0lBQUF4QixjQUFBLEdBQUFJLENBQUE7SUFBQSxPQUFBNEIsQ0FBQyxDQUFDdEIsU0FBUyxDQUFDdUIsSUFBSSxDQUFFQyxDQUFDLElBQUs7TUFBQTtNQUFBbEMsY0FBQSxHQUFBd0IsQ0FBQTtNQUFBeEIsY0FBQSxHQUFBSSxDQUFBO01BQUEsT0FBQThCLENBQUMsQ0FBQ1IsV0FBVyxDQUFDLENBQUMsQ0FBQ1MsUUFBUSxDQUFDekIsU0FBUyxDQUFDZ0IsV0FBVyxDQUFDLENBQUMsQ0FBQztJQUFELENBQUMsQ0FBQztFQUFELENBQzNFLENBQUM7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLFNBQVNVLDZCQUE2QkEsQ0FBQ0MsUUFBZ0IsRUFBZTtFQUFBO0VBQUFyQyxjQUFBLEdBQUF3QixDQUFBO0VBQzNFLE1BQU1jLFFBQVE7RUFBQTtFQUFBLENBQUF0QyxjQUFBLEdBQUFJLENBQUEsT0FBR2lDLFFBQVEsQ0FBQ1gsV0FBVyxDQUFDLENBQUMsQ0FBQ2EsS0FBSyxDQUFDLEdBQUcsQ0FBQzs7RUFFbEQ7RUFDQSxNQUFNQyxNQUFNO0VBQUE7RUFBQSxDQUFBeEMsY0FBQSxHQUFBSSxDQUFBLE9BQUd3QixNQUFNLENBQUNhLE9BQU8sQ0FBQ3RDLGFBQWEsQ0FBQyxDQUFDdUMsR0FBRyxDQUFDLENBQUMsQ0FBQ3BDLElBQUksRUFBRXFDLFdBQVcsQ0FBQyxLQUFLO0lBQUE7SUFBQTNDLGNBQUEsR0FBQXdCLENBQUE7SUFDeEUsSUFBSW9CLEtBQUs7SUFBQTtJQUFBLENBQUE1QyxjQUFBLEdBQUFJLENBQUEsT0FBRyxDQUFDOztJQUViO0lBQUE7SUFBQUosY0FBQSxHQUFBSSxDQUFBO0lBQ0EsS0FBSyxNQUFNeUMsT0FBTyxJQUFJUCxRQUFRLEVBQUU7TUFBQTtNQUFBdEMsY0FBQSxHQUFBSSxDQUFBO01BQzlCLEtBQUssTUFBTU0sU0FBUyxJQUFJaUMsV0FBVyxDQUFDakMsU0FBUyxFQUFFO1FBQUE7UUFBQVYsY0FBQSxHQUFBSSxDQUFBO1FBQzdDO1FBQUk7UUFBQSxDQUFBSixjQUFBLEdBQUF5QixDQUFBLFVBQUFmLFNBQVMsQ0FBQ3lCLFFBQVEsQ0FBQ1UsT0FBTyxDQUFDO1FBQUE7UUFBQSxDQUFBN0MsY0FBQSxHQUFBeUIsQ0FBQSxVQUFJb0IsT0FBTyxDQUFDVixRQUFRLENBQUN6QixTQUFTLENBQUMsR0FBRTtVQUFBO1VBQUFWLGNBQUEsR0FBQXlCLENBQUE7VUFBQXpCLGNBQUEsR0FBQUksQ0FBQTtVQUM5RHdDLEtBQUssSUFBSSxDQUFDO1FBQ1osQ0FBQztRQUFBO1FBQUE7VUFBQTVDLGNBQUEsR0FBQXlCLENBQUE7UUFBQTtNQUNIOztNQUVBO01BQUE7TUFBQXpCLGNBQUEsR0FBQUksQ0FBQTtNQUNBLEtBQUssTUFBTTBDLFNBQVMsSUFBSUgsV0FBVyxDQUFDL0IsV0FBVyxFQUFFO1FBQUE7UUFBQVosY0FBQSxHQUFBSSxDQUFBO1FBQy9DO1FBQUk7UUFBQSxDQUFBSixjQUFBLEdBQUF5QixDQUFBLFVBQUFxQixTQUFTLENBQUNYLFFBQVEsQ0FBQ1UsT0FBTyxDQUFDO1FBQUE7UUFBQSxDQUFBN0MsY0FBQSxHQUFBeUIsQ0FBQSxVQUFJb0IsT0FBTyxDQUFDVixRQUFRLENBQUNXLFNBQVMsQ0FBQyxHQUFFO1VBQUE7VUFBQTlDLGNBQUEsR0FBQXlCLENBQUE7VUFBQXpCLGNBQUEsR0FBQUksQ0FBQTtVQUM5RHdDLEtBQUssSUFBSSxDQUFDO1FBQ1osQ0FBQztRQUFBO1FBQUE7VUFBQTVDLGNBQUEsR0FBQXlCLENBQUE7UUFBQTtNQUNIO0lBQ0Y7SUFBQztJQUFBekIsY0FBQSxHQUFBSSxDQUFBO0lBRUQsT0FBTztNQUFFRSxJQUFJO01BQUVxQyxXQUFXO01BQUVDO0lBQU0sQ0FBQztFQUNyQyxDQUFDLENBQUM7O0VBRUY7RUFDQSxNQUFNRyxJQUFJO0VBQUE7RUFBQSxDQUFBL0MsY0FBQSxHQUFBSSxDQUFBLFFBQUdvQyxNQUFNLENBQUNRLElBQUksQ0FBQyxDQUFDQyxDQUFDLEVBQUV4QixDQUFDLEtBQUs7SUFBQTtJQUFBekIsY0FBQSxHQUFBd0IsQ0FBQTtJQUFBeEIsY0FBQSxHQUFBSSxDQUFBO0lBQUEsT0FBQXFCLENBQUMsQ0FBQ21CLEtBQUssR0FBR0ssQ0FBQyxDQUFDTCxLQUFLO0VBQUQsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQUM7RUFBQTVDLGNBQUEsR0FBQUksQ0FBQTtFQUN6RCxPQUFPMkMsSUFBSSxDQUFDSCxLQUFLLEdBQUcsQ0FBQztFQUFBO0VBQUEsQ0FBQTVDLGNBQUEsR0FBQXlCLENBQUEsVUFBR3NCLElBQUksQ0FBQ0osV0FBVztFQUFBO0VBQUEsQ0FBQTNDLGNBQUEsR0FBQXlCLENBQUEsVUFBR3RCLGFBQWEsQ0FBQ21CLEtBQUs7QUFDaEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTyxlQUFlNEIsMkJBQTJCQSxDQUMvQ0MsZUFBdUIsRUFDdkJDLFdBQW1CLEVBQ25CQyxtQkFBZ0M7QUFBQTtBQUFBLENBQUFyRCxjQUFBLEdBQUF5QixDQUFBLFVBQUcsRUFBRSxHQUNwQjtFQUFBO0VBQUF6QixjQUFBLEdBQUF3QixDQUFBO0VBQ2pCLE1BQU1tQixXQUFXO0VBQUE7RUFBQSxDQUFBM0MsY0FBQSxHQUFBSSxDQUFBLFFBQUdtQixjQUFjLENBQUM0QixlQUFlLENBQUM7RUFBQztFQUFBbkQsY0FBQSxHQUFBSSxDQUFBO0VBQ3BELElBQUksQ0FBQ3VDLFdBQVcsRUFBRTtJQUFBO0lBQUEzQyxjQUFBLEdBQUF5QixDQUFBO0lBQUF6QixjQUFBLEdBQUFJLENBQUE7SUFDaEIsTUFBTSxJQUFJa0QsS0FBSyxDQUFDLGVBQWVILGVBQWUsWUFBWSxDQUFDO0VBQzdELENBQUM7RUFBQTtFQUFBO0lBQUFuRCxjQUFBLEdBQUF5QixDQUFBO0VBQUE7RUFFRCxNQUFNOEIsUUFBcUI7RUFBQTtFQUFBLENBQUF2RCxjQUFBLEdBQUFJLENBQUEsUUFBRyxDQUM1QjtJQUNFRyxJQUFJLEVBQUUsUUFBUTtJQUNkaUQsT0FBTyxFQUFFYixXQUFXLENBQUNsQztFQUN2QixDQUFDLEVBQ0QsR0FBRzRDLG1CQUFtQixFQUN0QjtJQUNFOUMsSUFBSSxFQUFFLE1BQU07SUFDWmlELE9BQU8sRUFBRUo7RUFDWCxDQUFDLENBQ0Y7RUFFRCxNQUFNSyxRQUFRO0VBQUE7RUFBQSxDQUFBekQsY0FBQSxHQUFBSSxDQUFBLFFBQUcsTUFBTUYsV0FBVyxDQUFDcUQsUUFBUSxDQUFDO0VBQUM7RUFBQXZELGNBQUEsR0FBQUksQ0FBQTtFQUM3QyxPQUFPcUQsUUFBUSxDQUFDRCxPQUFPO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sZUFBZUUsMkJBQTJCQSxDQUMvQ3JCLFFBQWdCLEVBQ2hCc0IsWUFBc0I7QUFBQTtBQUFBLENBQUEzRCxjQUFBLEdBQUF5QixDQUFBLFVBQUcsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxHQUNyQjtFQUFBO0VBQUF6QixjQUFBLEdBQUF3QixDQUFBO0VBQ2pDLE1BQU1vQyxTQUFpQztFQUFBO0VBQUEsQ0FBQTVELGNBQUEsR0FBQUksQ0FBQSxRQUFHLENBQUMsQ0FBQztFQUFDO0VBQUFKLGNBQUEsR0FBQUksQ0FBQTtFQUU3QyxLQUFLLE1BQU15RCxXQUFXLElBQUlGLFlBQVksRUFBRTtJQUFBO0lBQUEzRCxjQUFBLEdBQUFJLENBQUE7SUFDdEMsSUFBSTtNQUFBO01BQUFKLGNBQUEsR0FBQUksQ0FBQTtNQUNGd0QsU0FBUyxDQUFDQyxXQUFXLENBQUMsR0FBRyxNQUFNWCwyQkFBMkIsQ0FBQ1csV0FBVyxFQUFFeEIsUUFBUSxDQUFDO0lBQ25GLENBQUMsQ0FBQyxPQUFPeUIsS0FBSyxFQUFFO01BQUE7TUFBQTlELGNBQUEsR0FBQUksQ0FBQTtNQUNkd0QsU0FBUyxDQUFDQyxXQUFXLENBQUMsR0FBRywrQkFBK0JBLFdBQVcsRUFBRTtJQUN2RTtFQUNGO0VBQUM7RUFBQTdELGNBQUEsR0FBQUksQ0FBQTtFQUVELE9BQU93RCxTQUFTO0FBQ2xCO0FBRUEsZUFBZTtFQUNiekQsYUFBYTtFQUNib0IsY0FBYztFQUNkSSxtQkFBbUI7RUFDbkJHLDJCQUEyQjtFQUMzQk0sNkJBQTZCO0VBQzdCYywyQkFBMkI7RUFDM0JRO0FBQ0YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==