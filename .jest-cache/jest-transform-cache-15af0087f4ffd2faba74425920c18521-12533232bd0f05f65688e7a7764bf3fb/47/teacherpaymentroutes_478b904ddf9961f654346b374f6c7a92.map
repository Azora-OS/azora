{"version":3,"names":["cov_2dchnhh6h6","actualCoverage","Router","teacherPaymentService","logger","router","s","get","req","res","f","instructorId","params","period","query","revenue","calculateRevenue","b","json","success","data","error","status","post","amount","body","result","processWithdrawal","history","getPaymentHistory"],"sources":["teacher-payment.routes.ts"],"sourcesContent":["import { Router, Request, Response } from 'express';\nimport { teacherPaymentService } from '../services/teacher-payment.service';\nimport { logger } from '../utils/logger';\n\nconst router = Router();\n\nrouter.get('/teacher/revenue/:instructorId', async (req: Request, res: Response) => {\n  try {\n    const { instructorId } = req.params;\n    const { period } = req.query;\n    const revenue = await teacherPaymentService.calculateRevenue(instructorId, (period as string) || 'current');\n    res.json({ success: true, data: revenue });\n  } catch (error) {\n    logger.error('Error fetching revenue', { error });\n    res.status(500).json({ success: false, error: 'Failed to fetch revenue' });\n  }\n});\n\nrouter.post('/teacher/payments/withdraw', async (req: Request, res: Response) => {\n  try {\n    const { instructorId, amount } = req.body;\n    const result = await teacherPaymentService.processWithdrawal(instructorId, amount);\n    res.json({ success: true, data: result });\n  } catch (error) {\n    logger.error('Error processing withdrawal', { error });\n    res.status(500).json({ success: false, error: 'Failed to process withdrawal' });\n  }\n});\n\nrouter.get('/teacher/payments/:instructorId', async (req: Request, res: Response) => {\n  try {\n    const { instructorId } = req.params;\n    const history = await teacherPaymentService.getPaymentHistory(instructorId);\n    res.json({ success: true, data: history });\n  } catch (error) {\n    logger.error('Error fetching payment history', { error });\n    res.status(500).json({ success: false, error: 'Failed to fetch payment history' });\n  }\n});\n\nexport default router;\n"],"mappings":"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","ignoreList":[]}