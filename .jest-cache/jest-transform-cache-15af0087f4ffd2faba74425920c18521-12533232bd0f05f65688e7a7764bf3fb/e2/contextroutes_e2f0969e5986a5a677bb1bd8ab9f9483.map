{"version":3,"names":["cov_12adceagia","actualCoverage","Router","contextRetrievalService","router","s","post","req","res","next","f","studentId","courseId","moduleId","query","language","topK","body","result","retrieveContext","status","json","success","data","timestamp","Date","error","get","resources","getLanguageSpecificResources","params","count","length","b","Array","isArray","rankedResources","rankResources"],"sources":["context.routes.ts"],"sourcesContent":["import { Router, Request, Response, NextFunction } from 'express';\nimport { contextRetrievalService } from '../integrations/knowledge-ocean-integration';\n\nconst router = Router();\n\n// POST /api/v1/context/retrieve - Retrieve context for a query\nrouter.post('/retrieve', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { studentId, courseId, moduleId, query, language, topK } = req.body;\n\n    const result = await contextRetrievalService.retrieveContext({\n      studentId,\n      courseId,\n      moduleId,\n      query,\n      language,\n      topK,\n    });\n\n    res.status(201).json({\n      success: true,\n      data: result,\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\n// GET /api/v1/context/language/:courseId/:moduleId/:language - Get language-specific resources\nrouter.get(\n  '/language/:courseId/:moduleId/:language',\n  async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const resources = await contextRetrievalService.getLanguageSpecificResources(\n        req.params.courseId,\n        req.params.moduleId,\n        req.params.language\n      );\n\n      res.json({\n        success: true,\n        data: {\n          courseId: req.params.courseId,\n          moduleId: req.params.moduleId,\n          language: req.params.language,\n          resources,\n          count: resources.length,\n        },\n        timestamp: new Date(),\n      });\n    } catch (error) {\n      next(error);\n    }\n  }\n);\n\n// POST /api/v1/context/rank - Rank resources by relevance\nrouter.post('/rank', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { resources } = req.body;\n\n    if (!resources || !Array.isArray(resources)) {\n      res.status(400).json({\n        success: false,\n        error: 'Resources array is required',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const rankedResources = await contextRetrievalService.rankResources(resources);\n\n    res.json({\n      success: true,\n      data: {\n        resources: rankedResources,\n        count: rankedResources.length,\n      },\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\nexport default router;\n"],"mappings":"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","ignoreList":[]}