{"version":3,"names":["cov_1aredqy2u3","actualCoverage","OfflineAdapter","constructor","f","s","cache","Map","queue","isOnline","window","b","addEventListener","handleOnline","handleOffline","cacheData","key","data","ttlMinutes","now","Date","expiresAt","getTime","set","timestamp","toISOString","console","log","getCachedData","cached","get","delete","queueOperation","operation","queueItem","id","retries","push","syncQueue","length","toSync","item","executeQueuedOperation","error","warn","Promise","resolve","setTimeout","checkOnlineStatus","getQueueStatus","queuedOperations","cachedItems","size"],"sources":["offline-adapter.ts"],"sourcesContent":["export interface CachedData<T> {\n    data: T;\n    timestamp: string;\n    expiresAt: string;\n}\n\nexport interface OfflineQueue {\n    id: string;\n    operation: string;\n    data: any;\n    timestamp: string;\n    retries: number;\n}\n\nexport class OfflineAdapter<T> {\n    private cache: Map<string, CachedData<T>>;\n    private queue: OfflineQueue[];\n    private isOnline: boolean;\n\n    constructor() {\n        this.cache = new Map();\n        this.queue = [];\n        this.isOnline = true;\n\n        // Monitor online/offline status\n        if (typeof window !== 'undefined') {\n            window.addEventListener('online', () => this.handleOnline());\n            window.addEventListener('offline', () => this.handleOffline());\n        }\n    }\n\n    /**\n     * Cache data for offline access\n     */\n    cacheData(key: string, data: T, ttlMinutes: number = 60): void {\n        const now = new Date();\n        const expiresAt = new Date(now.getTime() + ttlMinutes * 60000);\n\n        this.cache.set(key, {\n            data,\n            timestamp: now.toISOString(),\n            expiresAt: expiresAt.toISOString()\n        });\n\n        console.log(`üíæ Cached: ${key} (expires in ${ttlMinutes}m)`);\n    }\n\n    /**\n     * Get cached data\n     */\n    getCachedData(key: string): T | null {\n        const cached = this.cache.get(key);\n\n        if (!cached) {\n            return null;\n        }\n\n        // Check if expired\n        if (new Date() > new Date(cached.expiresAt)) {\n            this.cache.delete(key);\n            return null;\n        }\n\n        console.log(`üì¶ Retrieved from cache: ${key}`);\n        return cached.data;\n    }\n\n    /**\n     * Queue operation for later sync\n     */\n    queueOperation(operation: string, data: any): void {\n        const queueItem: OfflineQueue = {\n            id: `queue-${Date.now()}`,\n            operation,\n            data,\n            timestamp: new Date().toISOString(),\n            retries: 0\n        };\n\n        this.queue.push(queueItem);\n        console.log(`üì• Queued operation: ${operation}`);\n    }\n\n    /**\n     * Sync queued operations when online\n     */\n    async syncQueue(): Promise<void> {\n        if (!this.isOnline || this.queue.length === 0) {\n            return;\n        }\n\n        console.log(`üîÑ Syncing ${this.queue.length} queued operations...`);\n\n        const toSync = [...this.queue];\n        this.queue = [];\n\n        for (const item of toSync) {\n            try {\n                // Attempt to execute queued operation\n                await this.executeQueuedOperation(item);\n                console.log(`‚úÖ Synced: ${item.operation}`);\n            } catch (error) {\n                // Re-queue if failed\n                item.retries++;\n                if (item.retries < 3) {\n                    this.queue.push(item);\n                    console.warn(`‚ö†Ô∏è Sync failed, re-queued: ${item.operation}`);\n                } else {\n                    console.error(`‚ùå Sync failed permanently: ${item.operation}`);\n                }\n            }\n        }\n    }\n\n    /**\n     * Execute a queued operation\n     */\n    private async executeQueuedOperation(item: OfflineQueue): Promise<void> {\n        // In production, this would execute the actual operation\n        // For now, we simulate\n        await new Promise(resolve => setTimeout(resolve, 100));\n    }\n\n    /**\n     * Handle online event\n     */\n    private handleOnline(): void {\n        console.log('üåê Connection restored - syncing...');\n        this.isOnline = true;\n        this.syncQueue();\n    }\n\n    /**\n     * Handle offline event\n     */\n    private handleOffline(): void {\n        console.log('üì¥ Connection lost - entering offline mode');\n        this.isOnline = false;\n    }\n\n    /**\n     * Check if currently online\n     */\n    public checkOnlineStatus(): boolean {\n        return this.isOnline;\n    }\n\n    /**\n     * Get queue status\n     */\n    public getQueueStatus() {\n        return {\n            isOnline: this.isOnline,\n            queuedOperations: this.queue.length,\n            cachedItems: this.cache.size\n        };\n    }\n}\n\nexport default OfflineAdapter;\n"],"mappings":"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","ignoreList":[]}