{"version":3,"names":["cov_19hc2suyh2","actualCoverage","Session","history","s","metadata","constructor","id","f","createdAt","Date","addMessage","message","push","timestamp","b","SessionManager","sessions","Map","getOrCreateSession","sessionId","generateId","has","get","session","set","getSession","deleteSession","delete","now","Math","random","toString","substr"],"sources":["session-manager.ts"],"sourcesContent":["/**\n * Session Manager\n * Manages conversation sessions and history\n */\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp?: Date;\n}\n\nexport class Session {\n  id: string;\n  createdAt: Date;\n  history: Message[] = [];\n  metadata: Record<string, unknown> = {};\n\n  constructor(id: string) {\n    this.id = id;\n    this.createdAt = new Date();\n  }\n\n  addMessage(message: Message) {\n    this.history.push({\n      ...message,\n      timestamp: message.timestamp || new Date()\n    });\n  }\n}\n\nexport class SessionManager {\n  private sessions: Map<string, Session> = new Map();\n\n  getOrCreateSession(sessionId?: string): Session {\n    const id = sessionId || this.generateId();\n\n    if (this.sessions.has(id)) {\n      return this.sessions.get(id)!;\n    }\n\n    const session = new Session(id);\n    this.sessions.set(id, session);\n    return session;\n  }\n\n  getSession(sessionId: string): Session | undefined {\n    return this.sessions.get(sessionId);\n  }\n\n  deleteSession(sessionId: string): boolean {\n    return this.sessions.delete(sessionId);\n  }\n\n  private generateId(): string {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;AACA;AACA;;AAQA,OAAO,MAAME,OAAO,CAAC;EAGnBC,OAAO;EAAA;EAAA,CAAAH,cAAA,GAAAI,CAAA,OAAc,EAAE;EACvBC,QAAQ;EAAA;EAAA,CAAAL,cAAA,GAAAI,CAAA,OAA4B,CAAC,CAAC;EAEtCE,WAAWA,CAACC,EAAU,EAAE;IAAA;IAAAP,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAI,CAAA;IACtB,IAAI,CAACG,EAAE,GAAGA,EAAE;IAAC;IAAAP,cAAA,GAAAI,CAAA;IACb,IAAI,CAACK,SAAS,GAAG,IAAIC,IAAI,CAAC,CAAC;EAC7B;EAEAC,UAAUA,CAACC,OAAgB,EAAE;IAAA;IAAAZ,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAI,CAAA;IAC3B,IAAI,CAACD,OAAO,CAACU,IAAI,CAAC;MAChB,GAAGD,OAAO;MACVE,SAAS;MAAE;MAAA,CAAAd,cAAA,GAAAe,CAAA,UAAAH,OAAO,CAACE,SAAS;MAAA;MAAA,CAAAd,cAAA,GAAAe,CAAA,UAAI,IAAIL,IAAI,CAAC,CAAC;IAC5C,CAAC,CAAC;EACJ;AACF;AAEA,OAAO,MAAMM,cAAc,CAAC;EAClBC,QAAQ;EAAA;EAAA,CAAAjB,cAAA,GAAAI,CAAA,OAAyB,IAAIc,GAAG,CAAC,CAAC;EAElDC,kBAAkBA,CAACC,SAAkB,EAAW;IAAA;IAAApB,cAAA,GAAAQ,CAAA;IAC9C,MAAMD,EAAE;IAAA;IAAA,CAAAP,cAAA,GAAAI,CAAA;IAAG;IAAA,CAAAJ,cAAA,GAAAe,CAAA,UAAAK,SAAS;IAAA;IAAA,CAAApB,cAAA,GAAAe,CAAA,UAAI,IAAI,CAACM,UAAU,CAAC,CAAC;IAAC;IAAArB,cAAA,GAAAI,CAAA;IAE1C,IAAI,IAAI,CAACa,QAAQ,CAACK,GAAG,CAACf,EAAE,CAAC,EAAE;MAAA;MAAAP,cAAA,GAAAe,CAAA;MAAAf,cAAA,GAAAI,CAAA;MACzB,OAAO,IAAI,CAACa,QAAQ,CAACM,GAAG,CAAChB,EAAE,CAAC;IAC9B,CAAC;IAAA;IAAA;MAAAP,cAAA,GAAAe,CAAA;IAAA;IAED,MAAMS,OAAO;IAAA;IAAA,CAAAxB,cAAA,GAAAI,CAAA,OAAG,IAAIF,OAAO,CAACK,EAAE,CAAC;IAAC;IAAAP,cAAA,GAAAI,CAAA;IAChC,IAAI,CAACa,QAAQ,CAACQ,GAAG,CAAClB,EAAE,EAAEiB,OAAO,CAAC;IAAC;IAAAxB,cAAA,GAAAI,CAAA;IAC/B,OAAOoB,OAAO;EAChB;EAEAE,UAAUA,CAACN,SAAiB,EAAuB;IAAA;IAAApB,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAI,CAAA;IACjD,OAAO,IAAI,CAACa,QAAQ,CAACM,GAAG,CAACH,SAAS,CAAC;EACrC;EAEAO,aAAaA,CAACP,SAAiB,EAAW;IAAA;IAAApB,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAI,CAAA;IACxC,OAAO,IAAI,CAACa,QAAQ,CAACW,MAAM,CAACR,SAAS,CAAC;EACxC;EAEQC,UAAUA,CAAA,EAAW;IAAA;IAAArB,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAI,CAAA;IAC3B,OAAO,WAAWM,IAAI,CAACmB,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;EAC3E;AACF","ignoreList":[]}