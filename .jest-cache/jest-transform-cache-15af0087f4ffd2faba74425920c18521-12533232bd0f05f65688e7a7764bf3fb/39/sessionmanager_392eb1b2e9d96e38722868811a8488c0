79710030510aaf96adb6da7bfdfee46d
/* istanbul ignore next */
function cov_19hc2suyh2() {
  var path = "/workspaces/azora/services/elara-orchestrator/src/session-manager.ts";
  var hash = "1d59960c496d961d638ed2289f8dc32e5c1aaceb";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/elara-orchestrator/src/session-manager.ts",
    statementMap: {
      "0": {
        start: {
          line: 15,
          column: 23
        },
        end: {
          line: 15,
          column: 25
        }
      },
      "1": {
        start: {
          line: 16,
          column: 38
        },
        end: {
          line: 16,
          column: 40
        }
      },
      "2": {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 19,
          column: 17
        }
      },
      "3": {
        start: {
          line: 20,
          column: 4
        },
        end: {
          line: 20,
          column: 32
        }
      },
      "4": {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 27,
          column: 7
        }
      },
      "5": {
        start: {
          line: 32,
          column: 43
        },
        end: {
          line: 32,
          column: 52
        }
      },
      "6": {
        start: {
          line: 35,
          column: 15
        },
        end: {
          line: 35,
          column: 45
        }
      },
      "7": {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 39,
          column: 5
        }
      },
      "8": {
        start: {
          line: 38,
          column: 6
        },
        end: {
          line: 38,
          column: 36
        }
      },
      "9": {
        start: {
          line: 41,
          column: 20
        },
        end: {
          line: 41,
          column: 35
        }
      },
      "10": {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 42,
          column: 35
        }
      },
      "11": {
        start: {
          line: 43,
          column: 4
        },
        end: {
          line: 43,
          column: 19
        }
      },
      "12": {
        start: {
          line: 47,
          column: 4
        },
        end: {
          line: 47,
          column: 40
        }
      },
      "13": {
        start: {
          line: 51,
          column: 4
        },
        end: {
          line: 51,
          column: 43
        }
      },
      "14": {
        start: {
          line: 55,
          column: 4
        },
        end: {
          line: 55,
          column: 78
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 18,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        },
        loc: {
          start: {
            line: 18,
            column: 26
          },
          end: {
            line: 21,
            column: 3
          }
        },
        line: 18
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 23,
            column: 2
          },
          end: {
            line: 23,
            column: 3
          }
        },
        loc: {
          start: {
            line: 23,
            column: 31
          },
          end: {
            line: 28,
            column: 3
          }
        },
        line: 23
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 34,
            column: 2
          },
          end: {
            line: 34,
            column: 3
          }
        },
        loc: {
          start: {
            line: 34,
            column: 50
          },
          end: {
            line: 44,
            column: 3
          }
        },
        line: 34
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 46,
            column: 2
          },
          end: {
            line: 46,
            column: 3
          }
        },
        loc: {
          start: {
            line: 46,
            column: 53
          },
          end: {
            line: 48,
            column: 3
          }
        },
        line: 46
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 50,
            column: 2
          },
          end: {
            line: 50,
            column: 3
          }
        },
        loc: {
          start: {
            line: 50,
            column: 44
          },
          end: {
            line: 52,
            column: 3
          }
        },
        line: 50
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 54,
            column: 2
          },
          end: {
            line: 54,
            column: 3
          }
        },
        loc: {
          start: {
            line: 54,
            column: 31
          },
          end: {
            line: 56,
            column: 3
          }
        },
        line: 54
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 26,
            column: 17
          },
          end: {
            line: 26,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 26,
            column: 17
          },
          end: {
            line: 26,
            column: 34
          }
        }, {
          start: {
            line: 26,
            column: 38
          },
          end: {
            line: 26,
            column: 48
          }
        }],
        line: 26
      },
      "1": {
        loc: {
          start: {
            line: 35,
            column: 15
          },
          end: {
            line: 35,
            column: 45
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 35,
            column: 15
          },
          end: {
            line: 35,
            column: 24
          }
        }, {
          start: {
            line: 35,
            column: 28
          },
          end: {
            line: 35,
            column: 45
          }
        }],
        line: 35
      },
      "2": {
        loc: {
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 39,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 39,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 37
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "1d59960c496d961d638ed2289f8dc32e5c1aaceb"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_19hc2suyh2 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_19hc2suyh2();
/**
 * Session Manager
 * Manages conversation sessions and history
 */

export class Session {
  history =
  /* istanbul ignore next */
  (cov_19hc2suyh2().s[0]++, []);
  metadata =
  /* istanbul ignore next */
  (cov_19hc2suyh2().s[1]++, {});
  constructor(id) {
    /* istanbul ignore next */
    cov_19hc2suyh2().f[0]++;
    cov_19hc2suyh2().s[2]++;
    this.id = id;
    /* istanbul ignore next */
    cov_19hc2suyh2().s[3]++;
    this.createdAt = new Date();
  }
  addMessage(message) {
    /* istanbul ignore next */
    cov_19hc2suyh2().f[1]++;
    cov_19hc2suyh2().s[4]++;
    this.history.push({
      ...message,
      timestamp:
      /* istanbul ignore next */
      (cov_19hc2suyh2().b[0][0]++, message.timestamp) ||
      /* istanbul ignore next */
      (cov_19hc2suyh2().b[0][1]++, new Date())
    });
  }
}
export class SessionManager {
  sessions =
  /* istanbul ignore next */
  (cov_19hc2suyh2().s[5]++, new Map());
  getOrCreateSession(sessionId) {
    /* istanbul ignore next */
    cov_19hc2suyh2().f[2]++;
    const id =
    /* istanbul ignore next */
    (cov_19hc2suyh2().s[6]++,
    /* istanbul ignore next */
    (cov_19hc2suyh2().b[1][0]++, sessionId) ||
    /* istanbul ignore next */
    (cov_19hc2suyh2().b[1][1]++, this.generateId()));
    /* istanbul ignore next */
    cov_19hc2suyh2().s[7]++;
    if (this.sessions.has(id)) {
      /* istanbul ignore next */
      cov_19hc2suyh2().b[2][0]++;
      cov_19hc2suyh2().s[8]++;
      return this.sessions.get(id);
    } else
    /* istanbul ignore next */
    {
      cov_19hc2suyh2().b[2][1]++;
    }
    const session =
    /* istanbul ignore next */
    (cov_19hc2suyh2().s[9]++, new Session(id));
    /* istanbul ignore next */
    cov_19hc2suyh2().s[10]++;
    this.sessions.set(id, session);
    /* istanbul ignore next */
    cov_19hc2suyh2().s[11]++;
    return session;
  }
  getSession(sessionId) {
    /* istanbul ignore next */
    cov_19hc2suyh2().f[3]++;
    cov_19hc2suyh2().s[12]++;
    return this.sessions.get(sessionId);
  }
  deleteSession(sessionId) {
    /* istanbul ignore next */
    cov_19hc2suyh2().f[4]++;
    cov_19hc2suyh2().s[13]++;
    return this.sessions.delete(sessionId);
  }
  generateId() {
    /* istanbul ignore next */
    cov_19hc2suyh2().f[5]++;
    cov_19hc2suyh2().s[14]++;
    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTloYzJzdXloMiIsImFjdHVhbENvdmVyYWdlIiwiU2Vzc2lvbiIsImhpc3RvcnkiLCJzIiwibWV0YWRhdGEiLCJjb25zdHJ1Y3RvciIsImlkIiwiZiIsImNyZWF0ZWRBdCIsIkRhdGUiLCJhZGRNZXNzYWdlIiwibWVzc2FnZSIsInB1c2giLCJ0aW1lc3RhbXAiLCJiIiwiU2Vzc2lvbk1hbmFnZXIiLCJzZXNzaW9ucyIsIk1hcCIsImdldE9yQ3JlYXRlU2Vzc2lvbiIsInNlc3Npb25JZCIsImdlbmVyYXRlSWQiLCJoYXMiLCJnZXQiLCJzZXNzaW9uIiwic2V0IiwiZ2V0U2Vzc2lvbiIsImRlbGV0ZVNlc3Npb24iLCJkZWxldGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiXSwic291cmNlcyI6WyJzZXNzaW9uLW1hbmFnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTZXNzaW9uIE1hbmFnZXJcbiAqIE1hbmFnZXMgY29udmVyc2F0aW9uIHNlc3Npb25zIGFuZCBoaXN0b3J5XG4gKi9cblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcbiAgY29udGVudDogc3RyaW5nO1xuICB0aW1lc3RhbXA/OiBEYXRlO1xufVxuXG5leHBvcnQgY2xhc3MgU2Vzc2lvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgaGlzdG9yeTogTWVzc2FnZVtdID0gW107XG4gIG1ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICB9XG5cbiAgYWRkTWVzc2FnZShtZXNzYWdlOiBNZXNzYWdlKSB7XG4gICAgdGhpcy5oaXN0b3J5LnB1c2goe1xuICAgICAgLi4ubWVzc2FnZSxcbiAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXAgfHwgbmV3IERhdGUoKVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTZXNzaW9uTWFuYWdlciB7XG4gIHByaXZhdGUgc2Vzc2lvbnM6IE1hcDxzdHJpbmcsIFNlc3Npb24+ID0gbmV3IE1hcCgpO1xuXG4gIGdldE9yQ3JlYXRlU2Vzc2lvbihzZXNzaW9uSWQ/OiBzdHJpbmcpOiBTZXNzaW9uIHtcbiAgICBjb25zdCBpZCA9IHNlc3Npb25JZCB8fCB0aGlzLmdlbmVyYXRlSWQoKTtcblxuICAgIGlmICh0aGlzLnNlc3Npb25zLmhhcyhpZCkpIHtcbiAgICAgIHJldHVybiB0aGlzLnNlc3Npb25zLmdldChpZCkhO1xuICAgIH1cblxuICAgIGNvbnN0IHNlc3Npb24gPSBuZXcgU2Vzc2lvbihpZCk7XG4gICAgdGhpcy5zZXNzaW9ucy5zZXQoaWQsIHNlc3Npb24pO1xuICAgIHJldHVybiBzZXNzaW9uO1xuICB9XG5cbiAgZ2V0U2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IFNlc3Npb24gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICB9XG5cbiAgZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnNlc3Npb25zLmRlbGV0ZShzZXNzaW9uSWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBzZXNzaW9uXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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