a64098d44b215696de1e514abc925ed3
/* istanbul ignore next */
function cov_utmfwsa8o() {
  var path = "/workspaces/azora/services/enterprise/white-label.ts";
  var hash = "2e0d4ecb2c6643e7bc33ac5317582095b652e769";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/enterprise/white-label.ts",
    statementMap: {
      "0": {
        start: {
          line: 10,
          column: 15
        },
        end: {
          line: 10,
          column: 33
        }
      },
      "1": {
        start: {
          line: 35,
          column: 4
        },
        end: {
          line: 55,
          column: 5
        }
      },
      "2": {
        start: {
          line: 36,
          column: 6
        },
        end: {
          line: 36,
          column: 57
        }
      },
      "3": {
        start: {
          line: 38,
          column: 22
        },
        end: {
          line: 40,
          column: 8
        }
      },
      "4": {
        start: {
          line: 42,
          column: 6
        },
        end: {
          line: 44,
          column: 7
        }
      },
      "5": {
        start: {
          line: 43,
          column: 8
        },
        end: {
          line: 43,
          column: 58
        }
      },
      "6": {
        start: {
          line: 46,
          column: 6
        },
        end: {
          line: 49,
          column: 9
        }
      },
      "7": {
        start: {
          line: 51,
          column: 6
        },
        end: {
          line: 51,
          column: 56
        }
      },
      "8": {
        start: {
          line: 53,
          column: 6
        },
        end: {
          line: 53,
          column: 73
        }
      },
      "9": {
        start: {
          line: 54,
          column: 6
        },
        end: {
          line: 54,
          column: 39
        }
      },
      "10": {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 111,
          column: 5
        }
      },
      "11": {
        start: {
          line: 63,
          column: 6
        },
        end: {
          line: 63,
          column: 66
        }
      },
      "12": {
        start: {
          line: 66,
          column: 26
        },
        end: {
          line: 66,
          column: 74
        }
      },
      "13": {
        start: {
          line: 67,
          column: 6
        },
        end: {
          line: 69,
          column: 7
        }
      },
      "14": {
        start: {
          line: 68,
          column: 8
        },
        end: {
          line: 68,
          column: 49
        }
      },
      "15": {
        start: {
          line: 72,
          column: 30
        },
        end: {
          line: 77,
          column: 8
        }
      },
      "16": {
        start: {
          line: 79,
          column: 6
        },
        end: {
          line: 81,
          column: 7
        }
      },
      "17": {
        start: {
          line: 80,
          column: 8
        },
        end: {
          line: 80,
          column: 52
        }
      },
      "18": {
        start: {
          line: 83,
          column: 6
        },
        end: {
          line: 86,
          column: 9
        }
      },
      "19": {
        start: {
          line: 89,
          column: 6
        },
        end: {
          line: 105,
          column: 9
        }
      },
      "20": {
        start: {
          line: 107,
          column: 6
        },
        end: {
          line: 107,
          column: 62
        }
      },
      "21": {
        start: {
          line: 109,
          column: 6
        },
        end: {
          line: 109,
          column: 72
        }
      },
      "22": {
        start: {
          line: 110,
          column: 6
        },
        end: {
          line: 110,
          column: 39
        }
      },
      "23": {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 158,
          column: 5
        }
      },
      "24": {
        start: {
          line: 119,
          column: 6
        },
        end: {
          line: 119,
          column: 53
        }
      },
      "25": {
        start: {
          line: 122,
          column: 30
        },
        end: {
          line: 130,
          column: 7
        }
      },
      "26": {
        start: {
          line: 132,
          column: 6
        },
        end: {
          line: 152,
          column: 7
        }
      },
      "27": {
        start: {
          line: 133,
          column: 8
        },
        end: {
          line: 151,
          column: 9
        }
      },
      "28": {
        start: {
          line: 134,
          column: 10
        },
        end: {
          line: 150,
          column: 13
        }
      },
      "29": {
        start: {
          line: 154,
          column: 6
        },
        end: {
          line: 154,
          column: 49
        }
      },
      "30": {
        start: {
          line: 156,
          column: 6
        },
        end: {
          line: 156,
          column: 67
        }
      },
      "31": {
        start: {
          line: 157,
          column: 6
        },
        end: {
          line: 157,
          column: 39
        }
      },
      "32": {
        start: {
          line: 165,
          column: 4
        },
        end: {
          line: 183,
          column: 5
        }
      },
      "33": {
        start: {
          line: 166,
          column: 29
        },
        end: {
          line: 171,
          column: 8
        }
      },
      "34": {
        start: {
          line: 173,
          column: 39
        },
        end: {
          line: 173,
          column: 41
        }
      },
      "35": {
        start: {
          line: 175,
          column: 6
        },
        end: {
          line: 177,
          column: 9
        }
      },
      "36": {
        start: {
          line: 176,
          column: 8
        },
        end: {
          line: 176,
          column: 75
        }
      },
      "37": {
        start: {
          line: 179,
          column: 6
        },
        end: {
          line: 179,
          column: 22
        }
      },
      "38": {
        start: {
          line: 181,
          column: 6
        },
        end: {
          line: 181,
          column: 67
        }
      },
      "39": {
        start: {
          line: 182,
          column: 6
        },
        end: {
          line: 182,
          column: 39
        }
      },
      "40": {
        start: {
          line: 190,
          column: 4
        },
        end: {
          line: 221,
          column: 5
        }
      },
      "41": {
        start: {
          line: 191,
          column: 6
        },
        end: {
          line: 191,
          column: 49
        }
      },
      "42": {
        start: {
          line: 193,
          column: 6
        },
        end: {
          line: 196,
          column: 9
        }
      },
      "43": {
        start: {
          line: 199,
          column: 6
        },
        end: {
          line: 215,
          column: 9
        }
      },
      "44": {
        start: {
          line: 217,
          column: 6
        },
        end: {
          line: 217,
          column: 48
        }
      },
      "45": {
        start: {
          line: 219,
          column: 6
        },
        end: {
          line: 219,
          column: 65
        }
      },
      "46": {
        start: {
          line: 220,
          column: 6
        },
        end: {
          line: 220,
          column: 39
        }
      },
      "47": {
        start: {
          line: 228,
          column: 4
        },
        end: {
          line: 245,
          column: 5
        }
      },
      "48": {
        start: {
          line: 229,
          column: 21
        },
        end: {
          line: 235,
          column: 8
        }
      },
      "49": {
        start: {
          line: 237,
          column: 6
        },
        end: {
          line: 239,
          column: 7
        }
      },
      "50": {
        start: {
          line: 238,
          column: 8
        },
        end: {
          line: 238,
          column: 20
        }
      },
      "51": {
        start: {
          line: 241,
          column: 6
        },
        end: {
          line: 241,
          column: 38
        }
      },
      "52": {
        start: {
          line: 243,
          column: 6
        },
        end: {
          line: 243,
          column: 69
        }
      },
      "53": {
        start: {
          line: 244,
          column: 6
        },
        end: {
          line: 244,
          column: 39
        }
      },
      "54": {
        start: {
          line: 252,
          column: 4
        },
        end: {
          line: 283,
          column: 5
        }
      },
      "55": {
        start: {
          line: 253,
          column: 6
        },
        end: {
          line: 253,
          column: 56
        }
      },
      "56": {
        start: {
          line: 255,
          column: 6
        },
        end: {
          line: 258,
          column: 9
        }
      },
      "57": {
        start: {
          line: 261,
          column: 6
        },
        end: {
          line: 277,
          column: 9
        }
      },
      "58": {
        start: {
          line: 279,
          column: 6
        },
        end: {
          line: 279,
          column: 55
        }
      },
      "59": {
        start: {
          line: 281,
          column: 6
        },
        end: {
          line: 281,
          column: 65
        }
      },
      "60": {
        start: {
          line: 282,
          column: 6
        },
        end: {
          line: 282,
          column: 39
        }
      },
      "61": {
        start: {
          line: 290,
          column: 4
        },
        end: {
          line: 330,
          column: 5
        }
      },
      "62": {
        start: {
          line: 291,
          column: 22
        },
        end: {
          line: 293,
          column: 8
        }
      },
      "63": {
        start: {
          line: 295,
          column: 6
        },
        end: {
          line: 297,
          column: 7
        }
      },
      "64": {
        start: {
          line: 296,
          column: 8
        },
        end: {
          line: 296,
          column: 58
        }
      },
      "65": {
        start: {
          line: 299,
          column: 39
        },
        end: {
          line: 299,
          column: 41
        }
      },
      "66": {
        start: {
          line: 301,
          column: 6
        },
        end: {
          line: 303,
          column: 7
        }
      },
      "67": {
        start: {
          line: 302,
          column: 8
        },
        end: {
          line: 302,
          column: 51
        }
      },
      "68": {
        start: {
          line: 305,
          column: 6
        },
        end: {
          line: 307,
          column: 7
        }
      },
      "69": {
        start: {
          line: 306,
          column: 8
        },
        end: {
          line: 306,
          column: 60
        }
      },
      "70": {
        start: {
          line: 309,
          column: 6
        },
        end: {
          line: 311,
          column: 7
        }
      },
      "71": {
        start: {
          line: 310,
          column: 8
        },
        end: {
          line: 310,
          column: 56
        }
      },
      "72": {
        start: {
          line: 313,
          column: 6
        },
        end: {
          line: 324,
          column: 7
        }
      },
      "73": {
        start: {
          line: 314,
          column: 26
        },
        end: {
          line: 320,
          column: 10
        }
      },
      "74": {
        start: {
          line: 321,
          column: 8
        },
        end: {
          line: 323,
          column: 9
        }
      },
      "75": {
        start: {
          line: 322,
          column: 10
        },
        end: {
          line: 322,
          column: 57
        }
      },
      "76": {
        start: {
          line: 326,
          column: 6
        },
        end: {
          line: 326,
          column: 20
        }
      },
      "77": {
        start: {
          line: 328,
          column: 6
        },
        end: {
          line: 328,
          column: 77
        }
      },
      "78": {
        start: {
          line: 329,
          column: 6
        },
        end: {
          line: 329,
          column: 39
        }
      },
      "79": {
        start: {
          line: 337,
          column: 4
        },
        end: {
          line: 353,
          column: 5
        }
      },
      "80": {
        start: {
          line: 338,
          column: 29
        },
        end: {
          line: 341,
          column: 8
        }
      },
      "81": {
        start: {
          line: 343,
          column: 6
        },
        end: {
          line: 349,
          column: 10
        }
      },
      "82": {
        start: {
          line: 343,
          column: 40
        },
        end: {
          line: 349,
          column: 7
        }
      },
      "83": {
        start: {
          line: 351,
          column: 6
        },
        end: {
          line: 351,
          column: 73
        }
      },
      "84": {
        start: {
          line: 352,
          column: 6
        },
        end: {
          line: 352,
          column: 39
        }
      },
      "85": {
        start: {
          line: 360,
          column: 4
        },
        end: {
          line: 371,
          column: 5
        }
      },
      "86": {
        start: {
          line: 361,
          column: 6
        },
        end: {
          line: 361,
          column: 65
        }
      },
      "87": {
        start: {
          line: 363,
          column: 6
        },
        end: {
          line: 365,
          column: 9
        }
      },
      "88": {
        start: {
          line: 367,
          column: 6
        },
        end: {
          line: 367,
          column: 64
        }
      },
      "89": {
        start: {
          line: 369,
          column: 6
        },
        end: {
          line: 369,
          column: 81
        }
      },
      "90": {
        start: {
          line: 370,
          column: 6
        },
        end: {
          line: 370,
          column: 39
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 34,
            column: 2
          },
          end: {
            line: 34,
            column: 3
          }
        },
        loc: {
          start: {
            line: 34,
            column: 59
          },
          end: {
            line: 56,
            column: 3
          }
        },
        line: 34
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 61,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        },
        loc: {
          start: {
            line: 61,
            column: 74
          },
          end: {
            line: 112,
            column: 3
          }
        },
        line: 61
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 117,
            column: 2
          },
          end: {
            line: 117,
            column: 3
          }
        },
        loc: {
          start: {
            line: 117,
            column: 80
          },
          end: {
            line: 159,
            column: 3
          }
        },
        line: 117
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 164,
            column: 2
          },
          end: {
            line: 164,
            column: 3
          }
        },
        loc: {
          start: {
            line: 164,
            column: 64
          },
          end: {
            line: 184,
            column: 3
          }
        },
        line: 164
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 175,
            column: 29
          },
          end: {
            line: 175,
            column: 30
          }
        },
        loc: {
          start: {
            line: 175,
            column: 41
          },
          end: {
            line: 177,
            column: 7
          }
        },
        line: 175
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 189,
            column: 2
          },
          end: {
            line: 189,
            column: 3
          }
        },
        loc: {
          start: {
            line: 189,
            column: 68
          },
          end: {
            line: 222,
            column: 3
          }
        },
        line: 189
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 227,
            column: 2
          },
          end: {
            line: 227,
            column: 3
          }
        },
        loc: {
          start: {
            line: 227,
            column: 55
          },
          end: {
            line: 246,
            column: 3
          }
        },
        line: 227
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 251,
            column: 2
          },
          end: {
            line: 251,
            column: 3
          }
        },
        loc: {
          start: {
            line: 251,
            column: 68
          },
          end: {
            line: 284,
            column: 3
          }
        },
        line: 251
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 289,
            column: 2
          },
          end: {
            line: 289,
            column: 3
          }
        },
        loc: {
          start: {
            line: 289,
            column: 74
          },
          end: {
            line: 331,
            column: 3
          }
        },
        line: 289
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 336,
            column: 2
          },
          end: {
            line: 336,
            column: 3
          }
        },
        loc: {
          start: {
            line: 336,
            column: 61
          },
          end: {
            line: 354,
            column: 3
          }
        },
        line: 336
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 343,
            column: 32
          },
          end: {
            line: 343,
            column: 33
          }
        },
        loc: {
          start: {
            line: 343,
            column: 40
          },
          end: {
            line: 349,
            column: 7
          }
        },
        line: 343
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 359,
            column: 2
          },
          end: {
            line: 359,
            column: 3
          }
        },
        loc: {
          start: {
            line: 359,
            column: 68
          },
          end: {
            line: 372,
            column: 3
          }
        },
        line: 359
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 42,
            column: 6
          },
          end: {
            line: 44,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 42,
            column: 6
          },
          end: {
            line: 44,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 42
      },
      "1": {
        loc: {
          start: {
            line: 67,
            column: 6
          },
          end: {
            line: 69,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 67,
            column: 6
          },
          end: {
            line: 69,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 67
      },
      "2": {
        loc: {
          start: {
            line: 79,
            column: 6
          },
          end: {
            line: 81,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 79,
            column: 6
          },
          end: {
            line: 81,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 79
      },
      "3": {
        loc: {
          start: {
            line: 133,
            column: 8
          },
          end: {
            line: 151,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 133,
            column: 8
          },
          end: {
            line: 151,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 133
      },
      "4": {
        loc: {
          start: {
            line: 237,
            column: 6
          },
          end: {
            line: 239,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 237,
            column: 6
          },
          end: {
            line: 239,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 237
      },
      "5": {
        loc: {
          start: {
            line: 295,
            column: 6
          },
          end: {
            line: 297,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 295,
            column: 6
          },
          end: {
            line: 297,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 295
      },
      "6": {
        loc: {
          start: {
            line: 301,
            column: 6
          },
          end: {
            line: 303,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 301,
            column: 6
          },
          end: {
            line: 303,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 301
      },
      "7": {
        loc: {
          start: {
            line: 305,
            column: 6
          },
          end: {
            line: 307,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 305,
            column: 6
          },
          end: {
            line: 307,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 305
      },
      "8": {
        loc: {
          start: {
            line: 309,
            column: 6
          },
          end: {
            line: 311,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 309,
            column: 6
          },
          end: {
            line: 311,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 309
      },
      "9": {
        loc: {
          start: {
            line: 313,
            column: 6
          },
          end: {
            line: 324,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 313,
            column: 6
          },
          end: {
            line: 324,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 313
      },
      "10": {
        loc: {
          start: {
            line: 321,
            column: 8
          },
          end: {
            line: 323,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 321,
            column: 8
          },
          end: {
            line: 323,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 321
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "2e0d4ecb2c6643e7bc33ac5317582095b652e769"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_utmfwsa8o = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_utmfwsa8o();
/**
 * White-Label Features Service
 * Manages custom branding, domains, and white-label configurations
 */

import { PrismaClient } from '@prisma/client';
import { logger } from '../shared/logging';
import { ErrorHandler } from '../payment/error-handler';
const prisma =
/* istanbul ignore next */
(cov_utmfwsa8o().s[0]++, new PrismaClient());
export class WhiteLabelService {
  /**
   * Enable white-label for license
   */
  async enableWhiteLabel(licenseId) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[0]++;
    cov_utmfwsa8o().s[1]++;
    try {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[2]++;
      logger.info('Enabling white-label', {
        licenseId
      });
      const license =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[3]++, await prisma.enterpriseLicense.findUnique({
        where: {
          id: licenseId
        }
      }));
      /* istanbul ignore next */
      cov_utmfwsa8o().s[4]++;
      if (!license) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[0][0]++;
        cov_utmfwsa8o().s[5]++;
        throw new Error(`License ${licenseId} not found`);
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[0][1]++;
      }
      cov_utmfwsa8o().s[6]++;
      await prisma.enterpriseLicense.update({
        where: {
          id: licenseId
        },
        data: {
          whiteLabel: true
        }
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[7]++;
      logger.info('White-label enabled', {
        licenseId
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[8]++;
      logger.error('Failed to enable white-label', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[9]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Set custom domain
   */
  async setCustomDomain(licenseId, domain) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[1]++;
    cov_utmfwsa8o().s[10]++;
    try {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[11]++;
      logger.info('Setting custom domain', {
        licenseId,
        domain
      });

      // Validate domain format
      const domainRegex =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[12]++, /^([a-z0-9]([a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i);
      /* istanbul ignore next */
      cov_utmfwsa8o().s[13]++;
      if (!domainRegex.test(domain)) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[1][0]++;
        cov_utmfwsa8o().s[14]++;
        throw new Error('Invalid domain format');
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[1][1]++;
      }

      // Check if domain is already in use
      const existingLicense =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[15]++, await prisma.enterpriseLicense.findFirst({
        where: {
          customDomain: domain,
          id: {
            not: licenseId
          }
        }
      }));
      /* istanbul ignore next */
      cov_utmfwsa8o().s[16]++;
      if (existingLicense) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[2][0]++;
        cov_utmfwsa8o().s[17]++;
        throw new Error('Domain is already in use');
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[2][1]++;
      }
      cov_utmfwsa8o().s[18]++;
      await prisma.enterpriseLicense.update({
        where: {
          id: licenseId
        },
        data: {
          customDomain: domain
        }
      });

      // Store customization
      /* istanbul ignore next */
      cov_utmfwsa8o().s[19]++;
      await prisma.enterpriseCustomization.upsert({
        where: {
          licenseId_type_key: {
            licenseId,
            type: 'DOMAIN',
            key: 'customDomain'
          }
        },
        update: {
          value: domain
        },
        create: {
          licenseId,
          type: 'DOMAIN',
          key: 'customDomain',
          value: domain,
          description: 'Custom domain for white-label'
        }
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[20]++;
      logger.info('Custom domain set', {
        licenseId,
        domain
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[21]++;
      logger.error('Failed to set custom domain', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[22]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Set branding configuration
   */
  async setBranding(licenseId, branding) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[2]++;
    cov_utmfwsa8o().s[23]++;
    try {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[24]++;
      logger.info('Setting branding', {
        licenseId
      });

      // Store each branding element
      const brandingEntries =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[25]++, [{
        key: 'primaryColor',
        value: branding.primaryColor
      }, {
        key: 'secondaryColor',
        value: branding.secondaryColor
      }, {
        key: 'logoUrl',
        value: branding.logoUrl
      }, {
        key: 'faviconUrl',
        value: branding.faviconUrl
      }, {
        key: 'companyName',
        value: branding.companyName
      }, {
        key: 'supportEmail',
        value: branding.supportEmail
      }, {
        key: 'supportPhone',
        value: branding.supportPhone
      }]);
      /* istanbul ignore next */
      cov_utmfwsa8o().s[26]++;
      for (const entry of brandingEntries) {
        /* istanbul ignore next */
        cov_utmfwsa8o().s[27]++;
        if (entry.value) {
          /* istanbul ignore next */
          cov_utmfwsa8o().b[3][0]++;
          cov_utmfwsa8o().s[28]++;
          await prisma.enterpriseCustomization.upsert({
            where: {
              licenseId_type_key: {
                licenseId,
                type: 'BRANDING',
                key: entry.key
              }
            },
            update: {
              value: entry.value
            },
            create: {
              licenseId,
              type: 'BRANDING',
              key: entry.key,
              value: entry.value,
              description: `Branding: ${entry.key}`
            }
          });
        } else
        /* istanbul ignore next */
        {
          cov_utmfwsa8o().b[3][1]++;
        }
      }
      /* istanbul ignore next */
      cov_utmfwsa8o().s[29]++;
      logger.info('Branding set', {
        licenseId
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[30]++;
      logger.error('Failed to set branding', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[31]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Get branding configuration
   */
  async getBranding(licenseId) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[3]++;
    cov_utmfwsa8o().s[32]++;
    try {
      const customizations =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[33]++, await prisma.enterpriseCustomization.findMany({
        where: {
          licenseId,
          type: 'BRANDING'
        }
      }));
      const branding =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[34]++, {});
      /* istanbul ignore next */
      cov_utmfwsa8o().s[35]++;
      customizations.forEach(custom => {
        /* istanbul ignore next */
        cov_utmfwsa8o().f[4]++;
        cov_utmfwsa8o().s[36]++;
        branding[custom.key] = custom.value;
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[37]++;
      return branding;
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[38]++;
      logger.error('Failed to get branding', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[39]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Enable SSO integration
   */
  async enableSSO(licenseId, ssoConfig) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[5]++;
    cov_utmfwsa8o().s[40]++;
    try {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[41]++;
      logger.info('Enabling SSO', {
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[42]++;
      await prisma.enterpriseLicense.update({
        where: {
          id: licenseId
        },
        data: {
          ssoEnabled: true
        }
      });

      // Store SSO configuration
      /* istanbul ignore next */
      cov_utmfwsa8o().s[43]++;
      await prisma.enterpriseCustomization.upsert({
        where: {
          licenseId_type_key: {
            licenseId,
            type: 'SSO',
            key: 'ssoConfig'
          }
        },
        update: {
          value: JSON.stringify(ssoConfig)
        },
        create: {
          licenseId,
          type: 'SSO',
          key: 'ssoConfig',
          value: JSON.stringify(ssoConfig),
          description: 'SSO configuration'
        }
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[44]++;
      logger.info('SSO enabled', {
        licenseId
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[45]++;
      logger.error('Failed to enable SSO', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[46]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Get SSO configuration
   */
  async getSSO(licenseId) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[6]++;
    cov_utmfwsa8o().s[47]++;
    try {
      const custom =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[48]++, await prisma.enterpriseCustomization.findFirst({
        where: {
          licenseId,
          type: 'SSO',
          key: 'ssoConfig'
        }
      }));
      /* istanbul ignore next */
      cov_utmfwsa8o().s[49]++;
      if (!custom) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[4][0]++;
        cov_utmfwsa8o().s[50]++;
        return null;
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[4][1]++;
      }
      cov_utmfwsa8o().s[51]++;
      return JSON.parse(custom.value);
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[52]++;
      logger.error('Failed to get SSO config', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[53]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Enable API access
   */
  async enableAPI(licenseId, apiConfig) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[7]++;
    cov_utmfwsa8o().s[54]++;
    try {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[55]++;
      logger.info('Enabling API access', {
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[56]++;
      await prisma.enterpriseLicense.update({
        where: {
          id: licenseId
        },
        data: {
          apiAccessEnabled: true
        }
      });

      // Store API configuration
      /* istanbul ignore next */
      cov_utmfwsa8o().s[57]++;
      await prisma.enterpriseCustomization.upsert({
        where: {
          licenseId_type_key: {
            licenseId,
            type: 'API',
            key: 'apiConfig'
          }
        },
        update: {
          value: JSON.stringify(apiConfig)
        },
        create: {
          licenseId,
          type: 'API',
          key: 'apiConfig',
          value: JSON.stringify(apiConfig),
          description: 'API configuration'
        }
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[58]++;
      logger.info('API access enabled', {
        licenseId
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[59]++;
      logger.error('Failed to enable API', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[60]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Get white-label configuration
   */
  async getWhiteLabelConfig(licenseId) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[8]++;
    cov_utmfwsa8o().s[61]++;
    try {
      const license =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[62]++, await prisma.enterpriseLicense.findUnique({
        where: {
          id: licenseId
        }
      }));
      /* istanbul ignore next */
      cov_utmfwsa8o().s[63]++;
      if (!license) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[5][0]++;
        cov_utmfwsa8o().s[64]++;
        throw new Error(`License ${licenseId} not found`);
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[5][1]++;
      }
      const config =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[65]++, {});
      /* istanbul ignore next */
      cov_utmfwsa8o().s[66]++;
      if (license.customDomain) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[6][0]++;
        cov_utmfwsa8o().s[67]++;
        config.customDomain = license.customDomain;
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[6][1]++;
      }
      cov_utmfwsa8o().s[68]++;
      if (license.whiteLabel) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[7][0]++;
        cov_utmfwsa8o().s[69]++;
        config.branding = await this.getBranding(licenseId);
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[7][1]++;
      }
      cov_utmfwsa8o().s[70]++;
      if (license.ssoEnabled) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[8][0]++;
        cov_utmfwsa8o().s[71]++;
        config.ssoConfig = await this.getSSO(licenseId);
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[8][1]++;
      }
      cov_utmfwsa8o().s[72]++;
      if (license.apiAccessEnabled) {
        /* istanbul ignore next */
        cov_utmfwsa8o().b[9][0]++;
        const apiCustom =
        /* istanbul ignore next */
        (cov_utmfwsa8o().s[73]++, await prisma.enterpriseCustomization.findFirst({
          where: {
            licenseId,
            type: 'API',
            key: 'apiConfig'
          }
        }));
        /* istanbul ignore next */
        cov_utmfwsa8o().s[74]++;
        if (apiCustom) {
          /* istanbul ignore next */
          cov_utmfwsa8o().b[10][0]++;
          cov_utmfwsa8o().s[75]++;
          config.apiConfig = JSON.parse(apiCustom.value);
        } else
        /* istanbul ignore next */
        {
          cov_utmfwsa8o().b[10][1]++;
        }
      } else
      /* istanbul ignore next */
      {
        cov_utmfwsa8o().b[9][1]++;
      }
      cov_utmfwsa8o().s[76]++;
      return config;
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[77]++;
      logger.error('Failed to get white-label config', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[78]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Get all customizations for license
   */
  async getCustomizations(licenseId) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[9]++;
    cov_utmfwsa8o().s[79]++;
    try {
      const customizations =
      /* istanbul ignore next */
      (cov_utmfwsa8o().s[80]++, await prisma.enterpriseCustomization.findMany({
        where: {
          licenseId
        },
        orderBy: {
          type: 'asc'
        }
      }));
      /* istanbul ignore next */
      cov_utmfwsa8o().s[81]++;
      return customizations.map(c => {
        /* istanbul ignore next */
        cov_utmfwsa8o().f[10]++;
        cov_utmfwsa8o().s[82]++;
        return {
          id: c.id,
          type: c.type,
          key: c.key,
          value: c.value,
          description: c.description
        };
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[83]++;
      logger.error('Failed to get customizations', {
        error,
        licenseId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[84]++;
      throw ErrorHandler.handle(error);
    }
  }

  /**
   * Delete customization
   */
  async deleteCustomization(customizationId) {
    /* istanbul ignore next */
    cov_utmfwsa8o().f[11]++;
    cov_utmfwsa8o().s[85]++;
    try {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[86]++;
      logger.info('Deleting customization', {
        customizationId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[87]++;
      await prisma.enterpriseCustomization.delete({
        where: {
          id: customizationId
        }
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[88]++;
      logger.info('Customization deleted', {
        customizationId
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_utmfwsa8o().s[89]++;
      logger.error('Failed to delete customization', {
        error,
        customizationId
      });
      /* istanbul ignore next */
      cov_utmfwsa8o().s[90]++;
      throw ErrorHandler.handle(error);
    }
  }
}
export default new WhiteLabelService();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfdXRtZndzYThvIiwiYWN0dWFsQ292ZXJhZ2UiLCJQcmlzbWFDbGllbnQiLCJsb2dnZXIiLCJFcnJvckhhbmRsZXIiLCJwcmlzbWEiLCJzIiwiV2hpdGVMYWJlbFNlcnZpY2UiLCJlbmFibGVXaGl0ZUxhYmVsIiwibGljZW5zZUlkIiwiZiIsImluZm8iLCJsaWNlbnNlIiwiZW50ZXJwcmlzZUxpY2Vuc2UiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImIiLCJFcnJvciIsInVwZGF0ZSIsImRhdGEiLCJ3aGl0ZUxhYmVsIiwiZXJyb3IiLCJoYW5kbGUiLCJzZXRDdXN0b21Eb21haW4iLCJkb21haW4iLCJkb21haW5SZWdleCIsInRlc3QiLCJleGlzdGluZ0xpY2Vuc2UiLCJmaW5kRmlyc3QiLCJjdXN0b21Eb21haW4iLCJub3QiLCJlbnRlcnByaXNlQ3VzdG9taXphdGlvbiIsInVwc2VydCIsImxpY2Vuc2VJZF90eXBlX2tleSIsInR5cGUiLCJrZXkiLCJ2YWx1ZSIsImNyZWF0ZSIsImRlc2NyaXB0aW9uIiwic2V0QnJhbmRpbmciLCJicmFuZGluZyIsImJyYW5kaW5nRW50cmllcyIsInByaW1hcnlDb2xvciIsInNlY29uZGFyeUNvbG9yIiwibG9nb1VybCIsImZhdmljb25VcmwiLCJjb21wYW55TmFtZSIsInN1cHBvcnRFbWFpbCIsInN1cHBvcnRQaG9uZSIsImVudHJ5IiwiZ2V0QnJhbmRpbmciLCJjdXN0b21pemF0aW9ucyIsImZpbmRNYW55IiwiZm9yRWFjaCIsImN1c3RvbSIsImVuYWJsZVNTTyIsInNzb0NvbmZpZyIsInNzb0VuYWJsZWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0U1NPIiwicGFyc2UiLCJlbmFibGVBUEkiLCJhcGlDb25maWciLCJhcGlBY2Nlc3NFbmFibGVkIiwiZ2V0V2hpdGVMYWJlbENvbmZpZyIsImNvbmZpZyIsImFwaUN1c3RvbSIsImdldEN1c3RvbWl6YXRpb25zIiwib3JkZXJCeSIsIm1hcCIsImMiLCJkZWxldGVDdXN0b21pemF0aW9uIiwiY3VzdG9taXphdGlvbklkIiwiZGVsZXRlIl0sInNvdXJjZXMiOlsid2hpdGUtbGFiZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBXaGl0ZS1MYWJlbCBGZWF0dXJlcyBTZXJ2aWNlXG4gKiBNYW5hZ2VzIGN1c3RvbSBicmFuZGluZywgZG9tYWlucywgYW5kIHdoaXRlLWxhYmVsIGNvbmZpZ3VyYXRpb25zXG4gKi9cblxuaW1wb3J0IHsgUHJpc21hQ2xpZW50LCBDdXN0b21pemF0aW9uVHlwZSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3NoYXJlZC9sb2dnaW5nJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gJy4uL3BheW1lbnQvZXJyb3ItaGFuZGxlcic7XG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuZXhwb3J0IGludGVyZmFjZSBCcmFuZGluZ0NvbmZpZyB7XG4gIHByaW1hcnlDb2xvcj86IHN0cmluZztcbiAgc2Vjb25kYXJ5Q29sb3I/OiBzdHJpbmc7XG4gIGxvZ29Vcmw/OiBzdHJpbmc7XG4gIGZhdmljb25Vcmw/OiBzdHJpbmc7XG4gIGNvbXBhbnlOYW1lPzogc3RyaW5nO1xuICBzdXBwb3J0RW1haWw/OiBzdHJpbmc7XG4gIHN1cHBvcnRQaG9uZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXaGl0ZUxhYmVsQ29uZmlnIHtcbiAgY3VzdG9tRG9tYWluPzogc3RyaW5nO1xuICBicmFuZGluZz86IEJyYW5kaW5nQ29uZmlnO1xuICBzc29Db25maWc/OiBhbnk7XG4gIGFwaUNvbmZpZz86IGFueTtcbiAgZmVhdHVyZXM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIFdoaXRlTGFiZWxTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEVuYWJsZSB3aGl0ZS1sYWJlbCBmb3IgbGljZW5zZVxuICAgKi9cbiAgYXN5bmMgZW5hYmxlV2hpdGVMYWJlbChsaWNlbnNlSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbygnRW5hYmxpbmcgd2hpdGUtbGFiZWwnLCB7IGxpY2Vuc2VJZCB9KTtcblxuICAgICAgY29uc3QgbGljZW5zZSA9IGF3YWl0IHByaXNtYS5lbnRlcnByaXNlTGljZW5zZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGxpY2Vuc2VJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghbGljZW5zZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExpY2Vuc2UgJHtsaWNlbnNlSWR9IG5vdCBmb3VuZGApO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBwcmlzbWEuZW50ZXJwcmlzZUxpY2Vuc2UudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGxpY2Vuc2VJZCB9LFxuICAgICAgICBkYXRhOiB7IHdoaXRlTGFiZWw6IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbygnV2hpdGUtbGFiZWwgZW5hYmxlZCcsIHsgbGljZW5zZUlkIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBlbmFibGUgd2hpdGUtbGFiZWwnLCB7IGVycm9yLCBsaWNlbnNlSWQgfSk7XG4gICAgICB0aHJvdyBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGN1c3RvbSBkb21haW5cbiAgICovXG4gIGFzeW5jIHNldEN1c3RvbURvbWFpbihsaWNlbnNlSWQ6IHN0cmluZywgZG9tYWluOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oJ1NldHRpbmcgY3VzdG9tIGRvbWFpbicsIHsgbGljZW5zZUlkLCBkb21haW4gfSk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGRvbWFpbiBmb3JtYXRcbiAgICAgIGNvbnN0IGRvbWFpblJlZ2V4ID0gL14oW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXpdezIsfSQvaTtcbiAgICAgIGlmICghZG9tYWluUmVnZXgudGVzdChkb21haW4pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkb21haW4gZm9ybWF0Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGRvbWFpbiBpcyBhbHJlYWR5IGluIHVzZVxuICAgICAgY29uc3QgZXhpc3RpbmdMaWNlbnNlID0gYXdhaXQgcHJpc21hLmVudGVycHJpc2VMaWNlbnNlLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgY3VzdG9tRG9tYWluOiBkb21haW4sXG4gICAgICAgICAgaWQ6IHsgbm90OiBsaWNlbnNlSWQgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZXhpc3RpbmdMaWNlbnNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRG9tYWluIGlzIGFscmVhZHkgaW4gdXNlJyk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHByaXNtYS5lbnRlcnByaXNlTGljZW5zZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogbGljZW5zZUlkIH0sXG4gICAgICAgIGRhdGE6IHsgY3VzdG9tRG9tYWluOiBkb21haW4gfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdG9yZSBjdXN0b21pemF0aW9uXG4gICAgICBhd2FpdCBwcmlzbWEuZW50ZXJwcmlzZUN1c3RvbWl6YXRpb24udXBzZXJ0KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBsaWNlbnNlSWRfdHlwZV9rZXk6IHtcbiAgICAgICAgICAgIGxpY2Vuc2VJZCxcbiAgICAgICAgICAgIHR5cGU6ICdET01BSU4nLFxuICAgICAgICAgICAga2V5OiAnY3VzdG9tRG9tYWluJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGU6IHsgdmFsdWU6IGRvbWFpbiB9LFxuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBsaWNlbnNlSWQsXG4gICAgICAgICAgdHlwZTogJ0RPTUFJTicsXG4gICAgICAgICAga2V5OiAnY3VzdG9tRG9tYWluJyxcbiAgICAgICAgICB2YWx1ZTogZG9tYWluLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ3VzdG9tIGRvbWFpbiBmb3Igd2hpdGUtbGFiZWwnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdDdXN0b20gZG9tYWluIHNldCcsIHsgbGljZW5zZUlkLCBkb21haW4gfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNldCBjdXN0b20gZG9tYWluJywgeyBlcnJvciwgbGljZW5zZUlkIH0pO1xuICAgICAgdGhyb3cgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCBicmFuZGluZyBjb25maWd1cmF0aW9uXG4gICAqL1xuICBhc3luYyBzZXRCcmFuZGluZyhsaWNlbnNlSWQ6IHN0cmluZywgYnJhbmRpbmc6IEJyYW5kaW5nQ29uZmlnKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5pbmZvKCdTZXR0aW5nIGJyYW5kaW5nJywgeyBsaWNlbnNlSWQgfSk7XG5cbiAgICAgIC8vIFN0b3JlIGVhY2ggYnJhbmRpbmcgZWxlbWVudFxuICAgICAgY29uc3QgYnJhbmRpbmdFbnRyaWVzID0gW1xuICAgICAgICB7IGtleTogJ3ByaW1hcnlDb2xvcicsIHZhbHVlOiBicmFuZGluZy5wcmltYXJ5Q29sb3IgfSxcbiAgICAgICAgeyBrZXk6ICdzZWNvbmRhcnlDb2xvcicsIHZhbHVlOiBicmFuZGluZy5zZWNvbmRhcnlDb2xvciB9LFxuICAgICAgICB7IGtleTogJ2xvZ29VcmwnLCB2YWx1ZTogYnJhbmRpbmcubG9nb1VybCB9LFxuICAgICAgICB7IGtleTogJ2Zhdmljb25VcmwnLCB2YWx1ZTogYnJhbmRpbmcuZmF2aWNvblVybCB9LFxuICAgICAgICB7IGtleTogJ2NvbXBhbnlOYW1lJywgdmFsdWU6IGJyYW5kaW5nLmNvbXBhbnlOYW1lIH0sXG4gICAgICAgIHsga2V5OiAnc3VwcG9ydEVtYWlsJywgdmFsdWU6IGJyYW5kaW5nLnN1cHBvcnRFbWFpbCB9LFxuICAgICAgICB7IGtleTogJ3N1cHBvcnRQaG9uZScsIHZhbHVlOiBicmFuZGluZy5zdXBwb3J0UGhvbmUgfSxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgYnJhbmRpbmdFbnRyaWVzKSB7XG4gICAgICAgIGlmIChlbnRyeS52YWx1ZSkge1xuICAgICAgICAgIGF3YWl0IHByaXNtYS5lbnRlcnByaXNlQ3VzdG9taXphdGlvbi51cHNlcnQoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgbGljZW5zZUlkX3R5cGVfa2V5OiB7XG4gICAgICAgICAgICAgICAgbGljZW5zZUlkLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdCUkFORElORycsXG4gICAgICAgICAgICAgICAga2V5OiBlbnRyeS5rZXksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRlOiB7IHZhbHVlOiBlbnRyeS52YWx1ZSB9LFxuICAgICAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgICAgIGxpY2Vuc2VJZCxcbiAgICAgICAgICAgICAgdHlwZTogJ0JSQU5ESU5HJyxcbiAgICAgICAgICAgICAga2V5OiBlbnRyeS5rZXksXG4gICAgICAgICAgICAgIHZhbHVlOiBlbnRyeS52YWx1ZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGBCcmFuZGluZzogJHtlbnRyeS5rZXl9YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmluZm8oJ0JyYW5kaW5nIHNldCcsIHsgbGljZW5zZUlkIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBzZXQgYnJhbmRpbmcnLCB7IGVycm9yLCBsaWNlbnNlSWQgfSk7XG4gICAgICB0aHJvdyBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGJyYW5kaW5nIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIGFzeW5jIGdldEJyYW5kaW5nKGxpY2Vuc2VJZDogc3RyaW5nKTogUHJvbWlzZTxCcmFuZGluZ0NvbmZpZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXN0b21pemF0aW9ucyA9IGF3YWl0IHByaXNtYS5lbnRlcnByaXNlQ3VzdG9taXphdGlvbi5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgbGljZW5zZUlkLFxuICAgICAgICAgIHR5cGU6ICdCUkFORElORycsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYnJhbmRpbmc6IEJyYW5kaW5nQ29uZmlnID0ge307XG5cbiAgICAgIGN1c3RvbWl6YXRpb25zLmZvckVhY2goKGN1c3RvbSkgPT4ge1xuICAgICAgICBicmFuZGluZ1tjdXN0b20ua2V5IGFzIGtleW9mIEJyYW5kaW5nQ29uZmlnXSA9IGN1c3RvbS52YWx1ZSBhcyBhbnk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGJyYW5kaW5nO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgYnJhbmRpbmcnLCB7IGVycm9yLCBsaWNlbnNlSWQgfSk7XG4gICAgICB0aHJvdyBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIFNTTyBpbnRlZ3JhdGlvblxuICAgKi9cbiAgYXN5bmMgZW5hYmxlU1NPKGxpY2Vuc2VJZDogc3RyaW5nLCBzc29Db25maWc6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbygnRW5hYmxpbmcgU1NPJywgeyBsaWNlbnNlSWQgfSk7XG5cbiAgICAgIGF3YWl0IHByaXNtYS5lbnRlcnByaXNlTGljZW5zZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogbGljZW5zZUlkIH0sXG4gICAgICAgIGRhdGE6IHsgc3NvRW5hYmxlZDogdHJ1ZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0b3JlIFNTTyBjb25maWd1cmF0aW9uXG4gICAgICBhd2FpdCBwcmlzbWEuZW50ZXJwcmlzZUN1c3RvbWl6YXRpb24udXBzZXJ0KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBsaWNlbnNlSWRfdHlwZV9rZXk6IHtcbiAgICAgICAgICAgIGxpY2Vuc2VJZCxcbiAgICAgICAgICAgIHR5cGU6ICdTU08nLFxuICAgICAgICAgICAga2V5OiAnc3NvQ29uZmlnJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGU6IHsgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHNzb0NvbmZpZykgfSxcbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgbGljZW5zZUlkLFxuICAgICAgICAgIHR5cGU6ICdTU08nLFxuICAgICAgICAgIGtleTogJ3Nzb0NvbmZpZycsXG4gICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHNzb0NvbmZpZyksXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdTU08gY29uZmlndXJhdGlvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ1NTTyBlbmFibGVkJywgeyBsaWNlbnNlSWQgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGVuYWJsZSBTU08nLCB7IGVycm9yLCBsaWNlbnNlSWQgfSk7XG4gICAgICB0aHJvdyBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IFNTTyBjb25maWd1cmF0aW9uXG4gICAqL1xuICBhc3luYyBnZXRTU08obGljZW5zZUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VzdG9tID0gYXdhaXQgcHJpc21hLmVudGVycHJpc2VDdXN0b21pemF0aW9uLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgbGljZW5zZUlkLFxuICAgICAgICAgIHR5cGU6ICdTU08nLFxuICAgICAgICAgIGtleTogJ3Nzb0NvbmZpZycsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFjdXN0b20pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGN1c3RvbS52YWx1ZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCBTU08gY29uZmlnJywgeyBlcnJvciwgbGljZW5zZUlkIH0pO1xuICAgICAgdGhyb3cgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBBUEkgYWNjZXNzXG4gICAqL1xuICBhc3luYyBlbmFibGVBUEkobGljZW5zZUlkOiBzdHJpbmcsIGFwaUNvbmZpZzogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5pbmZvKCdFbmFibGluZyBBUEkgYWNjZXNzJywgeyBsaWNlbnNlSWQgfSk7XG5cbiAgICAgIGF3YWl0IHByaXNtYS5lbnRlcnByaXNlTGljZW5zZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogbGljZW5zZUlkIH0sXG4gICAgICAgIGRhdGE6IHsgYXBpQWNjZXNzRW5hYmxlZDogdHJ1ZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0b3JlIEFQSSBjb25maWd1cmF0aW9uXG4gICAgICBhd2FpdCBwcmlzbWEuZW50ZXJwcmlzZUN1c3RvbWl6YXRpb24udXBzZXJ0KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBsaWNlbnNlSWRfdHlwZV9rZXk6IHtcbiAgICAgICAgICAgIGxpY2Vuc2VJZCxcbiAgICAgICAgICAgIHR5cGU6ICdBUEknLFxuICAgICAgICAgICAga2V5OiAnYXBpQ29uZmlnJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGU6IHsgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGFwaUNvbmZpZykgfSxcbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgbGljZW5zZUlkLFxuICAgICAgICAgIHR5cGU6ICdBUEknLFxuICAgICAgICAgIGtleTogJ2FwaUNvbmZpZycsXG4gICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGFwaUNvbmZpZyksXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdBUEkgY29uZmlndXJhdGlvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ0FQSSBhY2Nlc3MgZW5hYmxlZCcsIHsgbGljZW5zZUlkIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBlbmFibGUgQVBJJywgeyBlcnJvciwgbGljZW5zZUlkIH0pO1xuICAgICAgdGhyb3cgRXJyb3JIYW5kbGVyLmhhbmRsZShlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB3aGl0ZS1sYWJlbCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBhc3luYyBnZXRXaGl0ZUxhYmVsQ29uZmlnKGxpY2Vuc2VJZDogc3RyaW5nKTogUHJvbWlzZTxXaGl0ZUxhYmVsQ29uZmlnPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxpY2Vuc2UgPSBhd2FpdCBwcmlzbWEuZW50ZXJwcmlzZUxpY2Vuc2UuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBsaWNlbnNlSWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWxpY2Vuc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBMaWNlbnNlICR7bGljZW5zZUlkfSBub3QgZm91bmRgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29uZmlnOiBXaGl0ZUxhYmVsQ29uZmlnID0ge307XG5cbiAgICAgIGlmIChsaWNlbnNlLmN1c3RvbURvbWFpbikge1xuICAgICAgICBjb25maWcuY3VzdG9tRG9tYWluID0gbGljZW5zZS5jdXN0b21Eb21haW47XG4gICAgICB9XG5cbiAgICAgIGlmIChsaWNlbnNlLndoaXRlTGFiZWwpIHtcbiAgICAgICAgY29uZmlnLmJyYW5kaW5nID0gYXdhaXQgdGhpcy5nZXRCcmFuZGluZyhsaWNlbnNlSWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAobGljZW5zZS5zc29FbmFibGVkKSB7XG4gICAgICAgIGNvbmZpZy5zc29Db25maWcgPSBhd2FpdCB0aGlzLmdldFNTTyhsaWNlbnNlSWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAobGljZW5zZS5hcGlBY2Nlc3NFbmFibGVkKSB7XG4gICAgICAgIGNvbnN0IGFwaUN1c3RvbSA9IGF3YWl0IHByaXNtYS5lbnRlcnByaXNlQ3VzdG9taXphdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBsaWNlbnNlSWQsXG4gICAgICAgICAgICB0eXBlOiAnQVBJJyxcbiAgICAgICAgICAgIGtleTogJ2FwaUNvbmZpZycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhcGlDdXN0b20pIHtcbiAgICAgICAgICBjb25maWcuYXBpQ29uZmlnID0gSlNPTi5wYXJzZShhcGlDdXN0b20udmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCB3aGl0ZS1sYWJlbCBjb25maWcnLCB7IGVycm9yLCBsaWNlbnNlSWQgfSk7XG4gICAgICB0aHJvdyBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBjdXN0b21pemF0aW9ucyBmb3IgbGljZW5zZVxuICAgKi9cbiAgYXN5bmMgZ2V0Q3VzdG9taXphdGlvbnMobGljZW5zZUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1c3RvbWl6YXRpb25zID0gYXdhaXQgcHJpc21hLmVudGVycHJpc2VDdXN0b21pemF0aW9uLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgbGljZW5zZUlkIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgdHlwZTogJ2FzYycgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gY3VzdG9taXphdGlvbnMubWFwKChjKSA9PiAoe1xuICAgICAgICBpZDogYy5pZCxcbiAgICAgICAgdHlwZTogYy50eXBlLFxuICAgICAgICBrZXk6IGMua2V5LFxuICAgICAgICB2YWx1ZTogYy52YWx1ZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGMuZGVzY3JpcHRpb24sXG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCBjdXN0b21pemF0aW9ucycsIHsgZXJyb3IsIGxpY2Vuc2VJZCB9KTtcbiAgICAgIHRocm93IEVycm9ySGFuZGxlci5oYW5kbGUoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgY3VzdG9taXphdGlvblxuICAgKi9cbiAgYXN5bmMgZGVsZXRlQ3VzdG9taXphdGlvbihjdXN0b21pemF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbygnRGVsZXRpbmcgY3VzdG9taXphdGlvbicsIHsgY3VzdG9taXphdGlvbklkIH0pO1xuXG4gICAgICBhd2FpdCBwcmlzbWEuZW50ZXJwcmlzZUN1c3RvbWl6YXRpb24uZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGN1c3RvbWl6YXRpb25JZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdDdXN0b21pemF0aW9uIGRlbGV0ZWQnLCB7IGN1c3RvbWl6YXRpb25JZCB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIGN1c3RvbWl6YXRpb24nLCB7IGVycm9yLCBjdXN0b21pemF0aW9uSWQgfSk7XG4gICAgICB0aHJvdyBFcnJvckhhbmRsZXIuaGFuZGxlKGVycm9yKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFdoaXRlTGFiZWxTZXJ2aWNlKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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