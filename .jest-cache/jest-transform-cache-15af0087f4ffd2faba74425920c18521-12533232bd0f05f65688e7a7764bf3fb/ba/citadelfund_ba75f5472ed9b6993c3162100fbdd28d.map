{"version":3,"names":["cov_sdh6ahrd7","actualCoverage","CitadelFund","constructor","f","s","balance","contributions","distributions","allocationRules","education","openSource","infrastructure","emergency","contribute","source","totalAmount","metadata","contributionAmount","contribution","id","Date","now","amount","timestamp","toISOString","push","console","log","recordContribution","distribute","recipient","category","purpose","b","Error","distribution","executeDistribution","getRecommendedAllocation","fetch","method","headers","body","JSON","stringify","from","to","currency","type","data","citadelContribution","error","citadelDistribution","getStats","totalContributions","reduce","sum","c","totalDistributions","d","contributionCount","length","distributionCount","recommendedAllocation","getContributions","getDistributions"],"sources":["citadel-fund.ts"],"sourcesContent":["export interface FundAllocation {\n    education: number;      // 40%\n    openSource: number;     // 30%\n    infrastructure: number; // 20%\n    emergency: number;      // 10%\n}\n\nexport interface FundContribution {\n    id: string;\n    source: string;\n    amount: number;\n    timestamp: string;\n    metadata?: Record<string, any>;\n}\n\nexport interface FundDistribution {\n    id: string;\n    recipient: string;\n    amount: number;\n    category: keyof FundAllocation;\n    purpose: string;\n    timestamp: string;\n}\n\nexport class CitadelFund {\n    private balance: number;\n    private contributions: FundContribution[];\n    private distributions: FundDistribution[];\n    private allocationRules: FundAllocation;\n\n    constructor() {\n        this.balance = 0;\n        this.contributions = [];\n        this.distributions = [];\n        this.allocationRules = {\n            education: 0.40,      // 40%\n            openSource: 0.30,     // 30%\n            infrastructure: 0.20, // 20%\n            emergency: 0.10       // 10%\n        };\n    }\n\n    /**\n     * Contribute to CitadelFund (10% of revenue)\n     */\n    async contribute(\n        source: string,\n        totalAmount: number,\n        metadata?: Record<string, any>\n    ): Promise<FundContribution> {\n        const contributionAmount = totalAmount * 0.10; // 10% to fund\n\n        const contribution: FundContribution = {\n            id: `citadel-${Date.now()}`,\n            source,\n            amount: contributionAmount,\n            timestamp: new Date().toISOString(),\n            metadata\n        };\n\n        this.balance += contributionAmount;\n        this.contributions.push(contribution);\n\n        console.log(`üèõÔ∏è CitadelFund: ${contributionAmount} AZR from ${source}`);\n        console.log(`   New balance: ${this.balance} AZR`);\n\n        // Record to blockchain\n        await this.recordContribution(contribution);\n\n        return contribution;\n    }\n\n    /**\n     * Distribute funds according to allocation rules\n     */\n    async distribute(\n        recipient: string,\n        amount: number,\n        category: keyof FundAllocation,\n        purpose: string\n    ): Promise<FundDistribution> {\n        if (amount > this.balance) {\n            throw new Error('Insufficient funds in CitadelFund');\n        }\n\n        const distribution: FundDistribution = {\n            id: `dist-${Date.now()}`,\n            recipient,\n            amount,\n            category,\n            purpose,\n            timestamp: new Date().toISOString()\n        };\n\n        this.balance -= amount;\n        this.distributions.push(distribution);\n\n        console.log(`üèõÔ∏è CitadelFund Distribution:`);\n        console.log(`   ${amount} AZR ‚Üí ${recipient}`);\n        console.log(`   Category: ${category}`);\n        console.log(`   Purpose: ${purpose}`);\n\n        // Execute transfer\n        await this.executeDistribution(distribution);\n\n        return distribution;\n    }\n\n    /**\n     * Get recommended allocation based on current balance\n     */\n    getRecommendedAllocation(): FundAllocation {\n        return {\n            education: this.balance * this.allocationRules.education,\n            openSource: this.balance * this.allocationRules.openSource,\n            infrastructure: this.balance * this.allocationRules.infrastructure,\n            emergency: this.balance * this.allocationRules.emergency\n        };\n    }\n\n    /**\n     * Record contribution to blockchain\n     */\n    private async recordContribution(contribution: FundContribution): Promise<void> {\n        try {\n            await fetch('http://localhost:3011/api/blockchain/transaction', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    from: contribution.source,\n                    to: 'citadel-fund',\n                    amount: contribution.amount,\n                    currency: 'AZR',\n                    type: 'Transfer',\n                    data: {\n                        citadelContribution: true,\n                        metadata: contribution.metadata\n                    }\n                })\n            });\n        } catch (error) {\n            console.error('Failed to record contribution:', error);\n        }\n    }\n\n    /**\n     * Execute fund distribution\n     */\n    private async executeDistribution(distribution: FundDistribution): Promise<void> {\n        try {\n            await fetch('http://localhost:3011/api/blockchain/transaction', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    from: 'citadel-fund',\n                    to: distribution.recipient,\n                    amount: distribution.amount,\n                    currency: 'AZR',\n                    type: 'Transfer',\n                    data: {\n                        citadelDistribution: true,\n                        category: distribution.category,\n                        purpose: distribution.purpose\n                    }\n                })\n            });\n        } catch (error) {\n            console.error('Failed to execute distribution:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Get fund statistics\n     */\n    getStats() {\n        const totalContributions = this.contributions.reduce((sum, c) => sum + c.amount, 0);\n        const totalDistributions = this.distributions.reduce((sum, d) => sum + d.amount, 0);\n\n        return {\n            balance: this.balance,\n            totalContributions,\n            totalDistributions,\n            contributionCount: this.contributions.length,\n            distributionCount: this.distributions.length,\n            allocationRules: this.allocationRules,\n            recommendedAllocation: this.getRecommendedAllocation()\n        };\n    }\n\n    /**\n     * Get contribution history\n     */\n    getContributions(): FundContribution[] {\n        return this.contributions;\n    }\n\n    /**\n     * Get distribution history\n     */\n    getDistributions(): FundDistribution[] {\n        return this.distributions;\n    }\n}\n\nexport default CitadelFund;\n"],"mappings":"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","ignoreList":[]}