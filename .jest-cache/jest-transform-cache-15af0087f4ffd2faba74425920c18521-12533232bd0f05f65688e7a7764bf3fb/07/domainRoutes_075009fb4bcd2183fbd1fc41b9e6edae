bcf8a1dc755ea16b5a2639a08e1c5960
/* istanbul ignore next */
function cov_1ma5iybw0r() {
  var path = "/workspaces/azora/services/azora-forge/src/routes/domainRoutes.ts";
  var hash = "35f837b4200359f31d6a3e05ae0836ddc2c30907";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-forge/src/routes/domainRoutes.ts",
    statementMap: {
      "0": {
        start: {
          line: 17,
          column: 18
        },
        end: {
          line: 17,
          column: 39
        }
      },
      "1": {
        start: {
          line: 19,
          column: 15
        },
        end: {
          line: 19,
          column: 23
        }
      },
      "2": {
        start: {
          line: 25,
          column: 40
        },
        end: {
          line: 39,
          column: 1
        }
      },
      "3": {
        start: {
          line: 26,
          column: 2
        },
        end: {
          line: 38,
          column: 3
        }
      },
      "4": {
        start: {
          line: 27,
          column: 19
        },
        end: {
          line: 27,
          column: 56
        }
      },
      "5": {
        start: {
          line: 28,
          column: 4
        },
        end: {
          line: 28,
          column: 50
        }
      },
      "6": {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 29,
          column: 11
        }
      },
      "7": {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 37,
          column: 7
        }
      },
      "8": {
        start: {
          line: 85,
          column: 0
        },
        end: {
          line: 136,
          column: 3
        }
      },
      "9": {
        start: {
          line: 86,
          column: 2
        },
        end: {
          line: 135,
          column: 3
        }
      },
      "10": {
        start: {
          line: 87,
          column: 23
        },
        end: {
          line: 87,
          column: 31
        }
      },
      "11": {
        start: {
          line: 89,
          column: 4
        },
        end: {
          line: 94,
          column: 5
        }
      },
      "12": {
        start: {
          line: 90,
          column: 6
        },
        end: {
          line: 93,
          column: 9
        }
      },
      "13": {
        start: {
          line: 97,
          column: 29
        },
        end: {
          line: 97,
          column: 56
        }
      },
      "14": {
        start: {
          line: 100,
          column: 28
        },
        end: {
          line: 100,
          column: 85
        }
      },
      "15": {
        start: {
          line: 103,
          column: 23
        },
        end: {
          line: 103,
          column: 28
        }
      },
      "16": {
        start: {
          line: 104,
          column: 4
        },
        end: {
          line: 109,
          column: 5
        }
      },
      "17": {
        start: {
          line: 105,
          column: 6
        },
        end: {
          line: 105,
          column: 40
        }
      },
      "18": {
        start: {
          line: 106,
          column: 6
        },
        end: {
          line: 106,
          column: 26
        }
      },
      "19": {
        start: {
          line: 108,
          column: 6
        },
        end: {
          line: 108,
          column: 27
        }
      },
      "20": {
        start: {
          line: 114,
          column: 22
        },
        end: {
          line: 114,
          column: 80
        }
      },
      "21": {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 116,
          column: 45
        }
      },
      "22": {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 127,
          column: 7
        }
      },
      "23": {
        start: {
          line: 129,
          column: 4
        },
        end: {
          line: 129,
          column: 63
        }
      },
      "24": {
        start: {
          line: 130,
          column: 4
        },
        end: {
          line: 134,
          column: 7
        }
      },
      "25": {
        start: {
          line: 183,
          column: 0
        },
        end: {
          line: 235,
          column: 3
        }
      },
      "26": {
        start: {
          line: 184,
          column: 2
        },
        end: {
          line: 234,
          column: 3
        }
      },
      "27": {
        start: {
          line: 185,
          column: 52
        },
        end: {
          line: 185,
          column: 60
        }
      },
      "28": {
        start: {
          line: 186,
          column: 19
        },
        end: {
          line: 186,
          column: 46
        }
      },
      "29": {
        start: {
          line: 188,
          column: 4
        },
        end: {
          line: 193,
          column: 5
        }
      },
      "30": {
        start: {
          line: 189,
          column: 6
        },
        end: {
          line: 192,
          column: 9
        }
      },
      "31": {
        start: {
          line: 196,
          column: 29
        },
        end: {
          line: 196,
          column: 56
        }
      },
      "32": {
        start: {
          line: 199,
          column: 27
        },
        end: {
          line: 199,
          column: 84
        }
      },
      "33": {
        start: {
          line: 200,
          column: 4
        },
        end: {
          line: 205,
          column: 5
        }
      },
      "34": {
        start: {
          line: 201,
          column: 6
        },
        end: {
          line: 204,
          column: 9
        }
      },
      "35": {
        start: {
          line: 208,
          column: 26
        },
        end: {
          line: 217,
          column: 6
        }
      },
      "36": {
        start: {
          line: 219,
          column: 4
        },
        end: {
          line: 219,
          column: 31
        }
      },
      "37": {
        start: {
          line: 221,
          column: 4
        },
        end: {
          line: 221,
          column: 43
        }
      },
      "38": {
        start: {
          line: 223,
          column: 4
        },
        end: {
          line: 226,
          column: 7
        }
      },
      "39": {
        start: {
          line: 228,
          column: 4
        },
        end: {
          line: 228,
          column: 53
        }
      },
      "40": {
        start: {
          line: 229,
          column: 4
        },
        end: {
          line: 233,
          column: 7
        }
      },
      "41": {
        start: {
          line: 264,
          column: 0
        },
        end: {
          line: 294,
          column: 3
        }
      },
      "42": {
        start: {
          line: 265,
          column: 2
        },
        end: {
          line: 293,
          column: 3
        }
      },
      "43": {
        start: {
          line: 266,
          column: 23
        },
        end: {
          line: 266,
          column: 33
        }
      },
      "44": {
        start: {
          line: 267,
          column: 29
        },
        end: {
          line: 267,
          column: 56
        }
      },
      "45": {
        start: {
          line: 269,
          column: 26
        },
        end: {
          line: 269,
          column: 83
        }
      },
      "46": {
        start: {
          line: 271,
          column: 4
        },
        end: {
          line: 276,
          column: 5
        }
      },
      "47": {
        start: {
          line: 272,
          column: 6
        },
        end: {
          line: 275,
          column: 9
        }
      },
      "48": {
        start: {
          line: 279,
          column: 4
        },
        end: {
          line: 279,
          column: 29
        }
      },
      "49": {
        start: {
          line: 280,
          column: 4
        },
        end: {
          line: 280,
          column: 31
        }
      },
      "50": {
        start: {
          line: 282,
          column: 4
        },
        end: {
          line: 285,
          column: 7
        }
      },
      "51": {
        start: {
          line: 287,
          column: 4
        },
        end: {
          line: 287,
          column: 50
        }
      },
      "52": {
        start: {
          line: 288,
          column: 4
        },
        end: {
          line: 292,
          column: 7
        }
      },
      "53": {
        start: {
          line: 340,
          column: 0
        },
        end: {
          line: 379,
          column: 3
        }
      },
      "54": {
        start: {
          line: 341,
          column: 2
        },
        end: {
          line: 378,
          column: 3
        }
      },
      "55": {
        start: {
          line: 342,
          column: 23
        },
        end: {
          line: 342,
          column: 33
        }
      },
      "56": {
        start: {
          line: 343,
          column: 44
        },
        end: {
          line: 343,
          column: 52
        }
      },
      "57": {
        start: {
          line: 344,
          column: 19
        },
        end: {
          line: 344,
          column: 46
        }
      },
      "58": {
        start: {
          line: 346,
          column: 29
        },
        end: {
          line: 346,
          column: 56
        }
      },
      "59": {
        start: {
          line: 348,
          column: 26
        },
        end: {
          line: 351,
          column: 6
        }
      },
      "60": {
        start: {
          line: 353,
          column: 4
        },
        end: {
          line: 358,
          column: 5
        }
      },
      "61": {
        start: {
          line: 354,
          column: 6
        },
        end: {
          line: 357,
          column: 9
        }
      },
      "62": {
        start: {
          line: 361,
          column: 4
        },
        end: {
          line: 361,
          column: 68
        }
      },
      "63": {
        start: {
          line: 361,
          column: 33
        },
        end: {
          line: 361,
          column: 67
        }
      },
      "64": {
        start: {
          line: 362,
          column: 4
        },
        end: {
          line: 362,
          column: 77
        }
      },
      "65": {
        start: {
          line: 362,
          column: 36
        },
        end: {
          line: 362,
          column: 76
        }
      },
      "66": {
        start: {
          line: 363,
          column: 4
        },
        end: {
          line: 363,
          column: 56
        }
      },
      "67": {
        start: {
          line: 363,
          column: 29
        },
        end: {
          line: 363,
          column: 55
        }
      },
      "68": {
        start: {
          line: 365,
          column: 4
        },
        end: {
          line: 365,
          column: 31
        }
      },
      "69": {
        start: {
          line: 367,
          column: 4
        },
        end: {
          line: 370,
          column: 7
        }
      },
      "70": {
        start: {
          line: 372,
          column: 4
        },
        end: {
          line: 372,
          column: 50
        }
      },
      "71": {
        start: {
          line: 373,
          column: 4
        },
        end: {
          line: 377,
          column: 7
        }
      },
      "72": {
        start: {
          line: 400,
          column: 0
        },
        end: {
          line: 432,
          column: 3
        }
      },
      "73": {
        start: {
          line: 401,
          column: 2
        },
        end: {
          line: 431,
          column: 3
        }
      },
      "74": {
        start: {
          line: 402,
          column: 23
        },
        end: {
          line: 402,
          column: 33
        }
      },
      "75": {
        start: {
          line: 403,
          column: 19
        },
        end: {
          line: 403,
          column: 46
        }
      },
      "76": {
        start: {
          line: 405,
          column: 29
        },
        end: {
          line: 405,
          column: 56
        }
      },
      "77": {
        start: {
          line: 407,
          column: 26
        },
        end: {
          line: 411,
          column: 6
        }
      },
      "78": {
        start: {
          line: 413,
          column: 4
        },
        end: {
          line: 418,
          column: 5
        }
      },
      "79": {
        start: {
          line: 414,
          column: 6
        },
        end: {
          line: 417,
          column: 9
        }
      },
      "80": {
        start: {
          line: 420,
          column: 4
        },
        end: {
          line: 423,
          column: 7
        }
      },
      "81": {
        start: {
          line: 425,
          column: 4
        },
        end: {
          line: 425,
          column: 50
        }
      },
      "82": {
        start: {
          line: 426,
          column: 4
        },
        end: {
          line: 430,
          column: 7
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 25,
            column: 40
          },
          end: {
            line: 25,
            column: 41
          }
        },
        loc: {
          start: {
            line: 25,
            column: 108
          },
          end: {
            line: 39,
            column: 1
          }
        },
        line: 25
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 85,
            column: 22
          },
          end: {
            line: 85,
            column: 23
          }
        },
        loc: {
          start: {
            line: 85,
            column: 74
          },
          end: {
            line: 136,
            column: 1
          }
        },
        line: 85
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 183,
            column: 58
          },
          end: {
            line: 183,
            column: 59
          }
        },
        loc: {
          start: {
            line: 183,
            column: 110
          },
          end: {
            line: 235,
            column: 1
          }
        },
        line: 183
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 264,
            column: 23
          },
          end: {
            line: 264,
            column: 24
          }
        },
        loc: {
          start: {
            line: 264,
            column: 62
          },
          end: {
            line: 294,
            column: 1
          }
        },
        line: 264
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 340,
            column: 23
          },
          end: {
            line: 340,
            column: 24
          }
        },
        loc: {
          start: {
            line: 340,
            column: 75
          },
          end: {
            line: 379,
            column: 1
          }
        },
        line: 340
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 400,
            column: 26
          },
          end: {
            line: 400,
            column: 27
          }
        },
        loc: {
          start: {
            line: 400,
            column: 78
          },
          end: {
            line: 432,
            column: 1
          }
        },
        line: 400
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 27,
            column: 19
          },
          end: {
            line: 27,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 27,
            column: 19
          },
          end: {
            line: 27,
            column: 31
          }
        }, {
          start: {
            line: 27,
            column: 35
          },
          end: {
            line: 27,
            column: 41
          }
        }, {
          start: {
            line: 27,
            column: 45
          },
          end: {
            line: 27,
            column: 56
          }
        }],
        line: 27
      },
      "1": {
        loc: {
          start: {
            line: 89,
            column: 4
          },
          end: {
            line: 94,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 89,
            column: 4
          },
          end: {
            line: 94,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 89
      },
      "2": {
        loc: {
          start: {
            line: 114,
            column: 22
          },
          end: {
            line: 114,
            column: 80
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 114,
            column: 22
          },
          end: {
            line: 114,
            column: 38
          }
        }, {
          start: {
            line: 114,
            column: 42
          },
          end: {
            line: 114,
            column: 80
          }
        }],
        line: 114
      },
      "3": {
        loc: {
          start: {
            line: 125,
            column: 16
          },
          end: {
            line: 125,
            column: 54
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 125,
            column: 16
          },
          end: {
            line: 125,
            column: 39
          }
        }, {
          start: {
            line: 125,
            column: 43
          },
          end: {
            line: 125,
            column: 54
          }
        }],
        line: 125
      },
      "4": {
        loc: {
          start: {
            line: 186,
            column: 19
          },
          end: {
            line: 186,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 186,
            column: 19
          },
          end: {
            line: 186,
            column: 31
          }
        }, {
          start: {
            line: 186,
            column: 35
          },
          end: {
            line: 186,
            column: 46
          }
        }],
        line: 186
      },
      "5": {
        loc: {
          start: {
            line: 188,
            column: 4
          },
          end: {
            line: 193,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 188,
            column: 4
          },
          end: {
            line: 193,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 188
      },
      "6": {
        loc: {
          start: {
            line: 200,
            column: 4
          },
          end: {
            line: 205,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 200,
            column: 4
          },
          end: {
            line: 205,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 200
      },
      "7": {
        loc: {
          start: {
            line: 271,
            column: 4
          },
          end: {
            line: 276,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 271,
            column: 4
          },
          end: {
            line: 276,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 271
      },
      "8": {
        loc: {
          start: {
            line: 344,
            column: 19
          },
          end: {
            line: 344,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 344,
            column: 19
          },
          end: {
            line: 344,
            column: 31
          }
        }, {
          start: {
            line: 344,
            column: 35
          },
          end: {
            line: 344,
            column: 46
          }
        }],
        line: 344
      },
      "9": {
        loc: {
          start: {
            line: 353,
            column: 4
          },
          end: {
            line: 358,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 353,
            column: 4
          },
          end: {
            line: 358,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 353
      },
      "10": {
        loc: {
          start: {
            line: 361,
            column: 4
          },
          end: {
            line: 361,
            column: 68
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 361,
            column: 4
          },
          end: {
            line: 361,
            column: 68
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 361
      },
      "11": {
        loc: {
          start: {
            line: 362,
            column: 4
          },
          end: {
            line: 362,
            column: 77
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 362,
            column: 4
          },
          end: {
            line: 362,
            column: 77
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 362
      },
      "12": {
        loc: {
          start: {
            line: 363,
            column: 4
          },
          end: {
            line: 363,
            column: 56
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 363,
            column: 4
          },
          end: {
            line: 363,
            column: 56
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 363
      },
      "13": {
        loc: {
          start: {
            line: 403,
            column: 19
          },
          end: {
            line: 403,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 403,
            column: 19
          },
          end: {
            line: 403,
            column: 31
          }
        }, {
          start: {
            line: 403,
            column: 35
          },
          end: {
            line: 403,
            column: 46
          }
        }],
        line: 403
      },
      "14": {
        loc: {
          start: {
            line: 413,
            column: 4
          },
          end: {
            line: 418,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 413,
            column: 4
          },
          end: {
            line: 418,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 413
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "35f837b4200359f31d6a3e05ae0836ddc2c30907"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1ma5iybw0r = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1ma5iybw0r();
/*
AZORA PROPRIETARY LICENSE

Copyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.

See LICENSE file for details.
*/

import { Router } from 'express';
import DomainListing from '../models/Domain';
import { customMetrics } from '../middleware/metrics';
import { registrationRateLimiter } from '../middleware/rateLimiter';
import logger from '../utils/logger';
import * as dns from 'dns';
import { promisify } from 'util';
const dnsLookup =
/* istanbul ignore next */
(cov_1ma5iybw0r().s[0]++, promisify(dns.lookup));
const router =
/* istanbul ignore next */
(cov_1ma5iybw0r().s[1]++, Router());

// Note: AuthenticatedRequest is defined globally via Express namespace extension
/* istanbul ignore next */
// Middleware for registration rate limiting
cov_1ma5iybw0r().s[2]++;
const registrationRateLimitMiddleware = async (req, res, next) => {
  /* istanbul ignore next */
  cov_1ma5iybw0r().f[0]++;
  cov_1ma5iybw0r().s[3]++;
  try {
    const userId =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[4]++,
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[0][0]++, req.user?.id) ||
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[0][1]++, req.ip) ||
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[0][2]++, 'anonymous'));
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[5]++;
    await registrationRateLimiter.consume(userId);
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[6]++;
    next();
  } catch (rejRes) {
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[7]++;
    res.status(429).json({
      success: false,
      error: {
        message: 'Too many registration attempts, please try again later.',
        statusCode: 429
      }
    });
  }
};

/**
 * @swagger
 * /api/v1/domains/check:
 *   post:
 *     summary: Check domain availability
 *     tags: [Domains]
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             required:
 *               - domain
 *             properties:
 *               domain:
 *                 type: string
 *                 example: "example.com"
 *     responses:
 *       200:
 *         description: Domain availability checked successfully
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   type: object
 *                   properties:
 *                     domain:
 *                       type: string
 *                       example: "example.com"
 *                     available:
 *                       type: boolean
 *                       example: true
 *                     registered:
 *                       type: boolean
 *                       example: false
 */
/* istanbul ignore next */
cov_1ma5iybw0r().s[8]++;
router.post('/check', async (req, res) => {
  /* istanbul ignore next */
  cov_1ma5iybw0r().f[1]++;
  cov_1ma5iybw0r().s[9]++;
  try {
    const {
      domain
    } =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[10]++, req.body);
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[11]++;
    if (!domain) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[1][0]++;
      cov_1ma5iybw0r().s[12]++;
      return res.status(400).json({
        success: false,
        message: 'Domain name is required'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[1][1]++;
    }

    // Normalize domain
    const normalizedDomain =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[13]++, domain.toLowerCase().trim());

    // Check if domain exists in our database
    const existingListing =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[14]++, await DomainListing.findOne({
      domain: normalizedDomain
    }));

    // Check DNS resolution
    let dnsAvailable =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[15]++, false);
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[16]++;
    try {
      /* istanbul ignore next */
      cov_1ma5iybw0r().s[17]++;
      await dnsLookup(normalizedDomain);
      /* istanbul ignore next */
      cov_1ma5iybw0r().s[18]++;
      dnsAvailable = true;
    } catch (error) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().s[19]++;
      dnsAvailable = false;
    }

    // Domain is available if:
    // 1. Not in our database, OR
    // 2. In database but marked as available
    const available =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[20]++,
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[2][0]++, !existingListing) ||
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[2][1]++, existingListing.status === 'available'));
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[21]++;
    customMetrics.listingsCreatedTotal.inc();
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[22]++;
    res.json({
      success: true,
      data: {
        domain: normalizedDomain,
        available,
        registered: !!existingListing,
        dnsResolved: dnsAvailable,
        status:
        /* istanbul ignore next */
        (cov_1ma5iybw0r().b[3][0]++, existingListing?.status) ||
        /* istanbul ignore next */
        (cov_1ma5iybw0r().b[3][1]++, 'available')
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[23]++;
    logger.error('Error checking domain availability:', error);
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[24]++;
    res.status(500).json({
      success: false,
      message: 'Failed to check domain availability',
      error: error.message
    });
  }
});

/**
 * @swagger
 * /api/v1/domains/register:
 *   post:
 *     summary: Register a new domain
 *     tags: [Domains]
 *     security:
 *       - bearerAuth: []
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             required:
 *               - domain
 *             properties:
 *               domain:
 *                 type: string
 *                 example: "example.com"
 *               category:
 *                 type: string
 *                 example: "technology"
 *               description:
 *                 type: string
 *                 example: "A great domain for tech companies"
 *               tags:
 *                 type: array
 *                 items:
 *                   type: string
 *                 example: ["tech", "startup"]
 *     responses:
 *       201:
 *         description: Domain registered successfully
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   $ref: '#/components/schemas/DomainListing'
 */
/* istanbul ignore next */
cov_1ma5iybw0r().s[25]++;
router.post('/register', registrationRateLimitMiddleware, async (req, res) => {
  /* istanbul ignore next */
  cov_1ma5iybw0r().f[2]++;
  cov_1ma5iybw0r().s[26]++;
  try {
    const {
      domain,
      category,
      description,
      tags
    } =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[27]++, req.body);
    const userId =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[28]++,
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[4][0]++, req.user?.id) ||
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[4][1]++, 'anonymous'));
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[29]++;
    if (!domain) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[5][0]++;
      cov_1ma5iybw0r().s[30]++;
      return res.status(400).json({
        success: false,
        message: 'Domain name is required'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[5][1]++;
    }

    // Normalize domain
    const normalizedDomain =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[31]++, domain.toLowerCase().trim());

    // Check if domain already exists
    const existingDomain =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[32]++, await DomainListing.findOne({
      domain: normalizedDomain
    }));
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[33]++;
    if (existingDomain) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[6][0]++;
      cov_1ma5iybw0r().s[34]++;
      return res.status(409).json({
        success: false,
        message: 'Domain already exists'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[6][1]++;
    }

    // Create domain listing
    const domainListing =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[35]++, new DomainListing({
      domain: normalizedDomain,
      owner: userId,
      status: 'available',
      category,
      description,
      tags,
      views: 0,
      inquiries: 0
    }));
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[36]++;
    await domainListing.save();
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[37]++;
    customMetrics.domainsListedTotal.inc();
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[38]++;
    res.status(201).json({
      success: true,
      data: domainListing
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[39]++;
    logger.error('Error registering domain:', error);
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[40]++;
    res.status(500).json({
      success: false,
      message: 'Failed to register domain',
      error: error.message
    });
  }
});

/**
 * @swagger
 * /api/v1/domains/{domain}:
 *   get:
 *     summary: Get domain details
 *     tags: [Domains]
 *     parameters:
 *       - in: path
 *         name: domain
 *         required: true
 *         schema:
 *           type: string
 *         description: Domain name
 *     responses:
 *       200:
 *         description: Domain details retrieved successfully
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   $ref: '#/components/schemas/DomainListing'
 */
/* istanbul ignore next */
cov_1ma5iybw0r().s[41]++;
router.get('/:domain', async (req, res) => {
  /* istanbul ignore next */
  cov_1ma5iybw0r().f[3]++;
  cov_1ma5iybw0r().s[42]++;
  try {
    const {
      domain
    } =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[43]++, req.params);
    const normalizedDomain =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[44]++, domain.toLowerCase().trim());
    const domainListing =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[45]++, await DomainListing.findOne({
      domain: normalizedDomain
    }));
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[46]++;
    if (!domainListing) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[7][0]++;
      cov_1ma5iybw0r().s[47]++;
      return res.status(404).json({
        success: false,
        message: 'Domain not found'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[7][1]++;
    }

    // Increment view count
    cov_1ma5iybw0r().s[48]++;
    domainListing.views += 1;
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[49]++;
    await domainListing.save();
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[50]++;
    res.json({
      success: true,
      data: domainListing
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[51]++;
    logger.error('Error fetching domain:', error);
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[52]++;
    res.status(500).json({
      success: false,
      message: 'Failed to fetch domain',
      error: error.message
    });
  }
});

/**
 * @swagger
 * /api/v1/domains/{domain}:
 *   put:
 *     summary: Update domain details
 *     tags: [Domains]
 *     security:
 *       - bearerAuth: []
 *     parameters:
 *       - in: path
 *         name: domain
 *         required: true
 *         schema:
 *           type: string
 *         description: Domain name
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             properties:
 *               category:
 *                 type: string
 *               description:
 *                 type: string
 *               tags:
 *                 type: array
 *                 items:
 *                   type: string
 *     responses:
 *       200:
 *         description: Domain updated successfully
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   $ref: '#/components/schemas/DomainListing'
 */
/* istanbul ignore next */
cov_1ma5iybw0r().s[53]++;
router.put('/:domain', async (req, res) => {
  /* istanbul ignore next */
  cov_1ma5iybw0r().f[4]++;
  cov_1ma5iybw0r().s[54]++;
  try {
    const {
      domain
    } =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[55]++, req.params);
    const {
      category,
      description,
      tags
    } =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[56]++, req.body);
    const userId =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[57]++,
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[8][0]++, req.user?.id) ||
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[8][1]++, 'anonymous'));
    const normalizedDomain =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[58]++, domain.toLowerCase().trim());
    const domainListing =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[59]++, await DomainListing.findOne({
      domain: normalizedDomain,
      owner: userId
    }));
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[60]++;
    if (!domainListing) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[9][0]++;
      cov_1ma5iybw0r().s[61]++;
      return res.status(404).json({
        success: false,
        message: 'Domain not found or access denied'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[9][1]++;
    }

    // Update fields
    cov_1ma5iybw0r().s[62]++;
    if (category !== undefined) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[10][0]++;
      cov_1ma5iybw0r().s[63]++;
      domainListing.category = category;
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[10][1]++;
    }
    cov_1ma5iybw0r().s[64]++;
    if (description !== undefined) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[11][0]++;
      cov_1ma5iybw0r().s[65]++;
      domainListing.description = description;
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[11][1]++;
    }
    cov_1ma5iybw0r().s[66]++;
    if (tags !== undefined) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[12][0]++;
      cov_1ma5iybw0r().s[67]++;
      domainListing.tags = tags;
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[12][1]++;
    }
    cov_1ma5iybw0r().s[68]++;
    await domainListing.save();
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[69]++;
    res.json({
      success: true,
      data: domainListing
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[70]++;
    logger.error('Error updating domain:', error);
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[71]++;
    res.status(500).json({
      success: false,
      message: 'Failed to update domain',
      error: error.message
    });
  }
});

/**
 * @swagger
 * /api/v1/domains/{domain}:
 *   delete:
 *     summary: Delete domain listing
 *     tags: [Domains]
 *     security:
 *       - bearerAuth: []
 *     parameters:
 *       - in: path
 *         name: domain
 *         required: true
 *         schema:
 *           type: string
 *         description: Domain name
 *     responses:
 *       200:
 *         description: Domain deleted successfully
 */
/* istanbul ignore next */
cov_1ma5iybw0r().s[72]++;
router.delete('/:domain', async (req, res) => {
  /* istanbul ignore next */
  cov_1ma5iybw0r().f[5]++;
  cov_1ma5iybw0r().s[73]++;
  try {
    const {
      domain
    } =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[74]++, req.params);
    const userId =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[75]++,
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[13][0]++, req.user?.id) ||
    /* istanbul ignore next */
    (cov_1ma5iybw0r().b[13][1]++, 'anonymous'));
    const normalizedDomain =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[76]++, domain.toLowerCase().trim());
    const domainListing =
    /* istanbul ignore next */
    (cov_1ma5iybw0r().s[77]++, await DomainListing.findOneAndDelete({
      domain: normalizedDomain,
      owner: userId,
      status: {
        $in: ['available', 'listed']
      }
    }));
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[78]++;
    if (!domainListing) {
      /* istanbul ignore next */
      cov_1ma5iybw0r().b[14][0]++;
      cov_1ma5iybw0r().s[79]++;
      return res.status(404).json({
        success: false,
        message: 'Domain not found or cannot be deleted'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ma5iybw0r().b[14][1]++;
    }
    cov_1ma5iybw0r().s[80]++;
    res.json({
      success: true,
      message: 'Domain deleted successfully'
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[81]++;
    logger.error('Error deleting domain:', error);
    /* istanbul ignore next */
    cov_1ma5iybw0r().s[82]++;
    res.status(500).json({
      success: false,
      message: 'Failed to delete domain',
      error: error.message
    });
  }
});
export default router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMW1hNWl5YncwciIsImFjdHVhbENvdmVyYWdlIiwiUm91dGVyIiwiRG9tYWluTGlzdGluZyIsImN1c3RvbU1ldHJpY3MiLCJyZWdpc3RyYXRpb25SYXRlTGltaXRlciIsImxvZ2dlciIsImRucyIsInByb21pc2lmeSIsImRuc0xvb2t1cCIsInMiLCJsb29rdXAiLCJyb3V0ZXIiLCJyZWdpc3RyYXRpb25SYXRlTGltaXRNaWRkbGV3YXJlIiwicmVxIiwicmVzIiwibmV4dCIsImYiLCJ1c2VySWQiLCJiIiwidXNlciIsImlkIiwiaXAiLCJjb25zdW1lIiwicmVqUmVzIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwicG9zdCIsImRvbWFpbiIsImJvZHkiLCJub3JtYWxpemVkRG9tYWluIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwiZXhpc3RpbmdMaXN0aW5nIiwiZmluZE9uZSIsImRuc0F2YWlsYWJsZSIsImF2YWlsYWJsZSIsImxpc3RpbmdzQ3JlYXRlZFRvdGFsIiwiaW5jIiwiZGF0YSIsInJlZ2lzdGVyZWQiLCJkbnNSZXNvbHZlZCIsImNhdGVnb3J5IiwiZGVzY3JpcHRpb24iLCJ0YWdzIiwiZXhpc3RpbmdEb21haW4iLCJkb21haW5MaXN0aW5nIiwib3duZXIiLCJ2aWV3cyIsImlucXVpcmllcyIsInNhdmUiLCJkb21haW5zTGlzdGVkVG90YWwiLCJnZXQiLCJwYXJhbXMiLCJwdXQiLCJ1bmRlZmluZWQiLCJkZWxldGUiLCJmaW5kT25lQW5kRGVsZXRlIiwiJGluIl0sInNvdXJjZXMiOlsiZG9tYWluUm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BWk9SQSBQUk9QUklFVEFSWSBMSUNFTlNFXG5cbkNvcHlyaWdodCDCqSAyMDI1IEF6b3JhIEVTIChQdHkpIEx0ZC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuU2VlIExJQ0VOU0UgZmlsZSBmb3IgZGV0YWlscy5cbiovXG5cbmltcG9ydCB7IFJvdXRlciwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCBEb21haW5MaXN0aW5nIGZyb20gJy4uL21vZGVscy9Eb21haW4nO1xuaW1wb3J0IHsgY3VzdG9tTWV0cmljcyB9IGZyb20gJy4uL21pZGRsZXdhcmUvbWV0cmljcyc7XG5pbXBvcnQgeyByZWdpc3RyYXRpb25SYXRlTGltaXRlciB9IGZyb20gJy4uL21pZGRsZXdhcmUvcmF0ZUxpbWl0ZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuLi91dGlscy9sb2dnZXInO1xuaW1wb3J0ICogYXMgZG5zIGZyb20gJ2Rucyc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcblxuY29uc3QgZG5zTG9va3VwID0gcHJvbWlzaWZ5KGRucy5sb29rdXApO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxuLy8gTm90ZTogQXV0aGVudGljYXRlZFJlcXVlc3QgaXMgZGVmaW5lZCBnbG9iYWxseSB2aWEgRXhwcmVzcyBuYW1lc3BhY2UgZXh0ZW5zaW9uXG50eXBlIEF1dGhlbnRpY2F0ZWRSZXF1ZXN0ID0gUmVxdWVzdDtcblxuLy8gTWlkZGxld2FyZSBmb3IgcmVnaXN0cmF0aW9uIHJhdGUgbGltaXRpbmdcbmNvbnN0IHJlZ2lzdHJhdGlvblJhdGVMaW1pdE1pZGRsZXdhcmUgPSBhc3luYyAocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogRnVuY3Rpb24pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlcj8uaWQgfHwgcmVxLmlwIHx8ICdhbm9ueW1vdXMnO1xuICAgIGF3YWl0IHJlZ2lzdHJhdGlvblJhdGVMaW1pdGVyLmNvbnN1bWUodXNlcklkKTtcbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKHJlalJlcykge1xuICAgIHJlcy5zdGF0dXMoNDI5KS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgbWVzc2FnZTogJ1RvbyBtYW55IHJlZ2lzdHJhdGlvbiBhdHRlbXB0cywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICBzdGF0dXNDb2RlOiA0MjlcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2FwaS92MS9kb21haW5zL2NoZWNrOlxuICogICBwb3N0OlxuICogICAgIHN1bW1hcnk6IENoZWNrIGRvbWFpbiBhdmFpbGFiaWxpdHlcbiAqICAgICB0YWdzOiBbRG9tYWluc11cbiAqICAgICBzZWN1cml0eTpcbiAqICAgICAgIC0gYmVhcmVyQXV0aDogW11cbiAqICAgICByZXF1ZXN0Qm9keTpcbiAqICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICBjb250ZW50OlxuICogICAgICAgICBhcHBsaWNhdGlvbi9qc29uOlxuICogICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgcmVxdWlyZWQ6XG4gKiAgICAgICAgICAgICAgIC0gZG9tYWluXG4gKiAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICBkb21haW46XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgICAgZXhhbXBsZTogXCJleGFtcGxlLmNvbVwiXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogRG9tYWluIGF2YWlsYWJpbGl0eSBjaGVja2VkIHN1Y2Nlc3NmdWxseVxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICAgIHN1Y2Nlc3M6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBib29sZWFuXG4gKiAgICAgICAgICAgICAgICAgICBleGFtcGxlOiB0cnVlXG4gKiAgICAgICAgICAgICAgICAgZGF0YTpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgICAgICAgZG9tYWluOlxuICogICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IFwiZXhhbXBsZS5jb21cIlxuICogICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGU6XG4gKiAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogYm9vbGVhblxuICogICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IHRydWVcbiAqICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJlZDpcbiAqICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBib29sZWFuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZTogZmFsc2VcbiAqL1xucm91dGVyLnBvc3QoJy9jaGVjaycsIGFzeW5jIChyZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkb21haW4gfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFkb21haW4pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRG9tYWluIG5hbWUgaXMgcmVxdWlyZWQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBOb3JtYWxpemUgZG9tYWluXG4gICAgY29uc3Qgbm9ybWFsaXplZERvbWFpbiA9IGRvbWFpbi50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcblxuICAgIC8vIENoZWNrIGlmIGRvbWFpbiBleGlzdHMgaW4gb3VyIGRhdGFiYXNlXG4gICAgY29uc3QgZXhpc3RpbmdMaXN0aW5nID0gYXdhaXQgRG9tYWluTGlzdGluZy5maW5kT25lKHsgZG9tYWluOiBub3JtYWxpemVkRG9tYWluIH0pO1xuXG4gICAgLy8gQ2hlY2sgRE5TIHJlc29sdXRpb25cbiAgICBsZXQgZG5zQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGRuc0xvb2t1cChub3JtYWxpemVkRG9tYWluKTtcbiAgICAgIGRuc0F2YWlsYWJsZSA9IHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRuc0F2YWlsYWJsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIERvbWFpbiBpcyBhdmFpbGFibGUgaWY6XG4gICAgLy8gMS4gTm90IGluIG91ciBkYXRhYmFzZSwgT1JcbiAgICAvLyAyLiBJbiBkYXRhYmFzZSBidXQgbWFya2VkIGFzIGF2YWlsYWJsZVxuICAgIGNvbnN0IGF2YWlsYWJsZSA9ICFleGlzdGluZ0xpc3RpbmcgfHwgZXhpc3RpbmdMaXN0aW5nLnN0YXR1cyA9PT0gJ2F2YWlsYWJsZSc7XG5cbiAgICBjdXN0b21NZXRyaWNzLmxpc3RpbmdzQ3JlYXRlZFRvdGFsLmluYygpO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZG9tYWluOiBub3JtYWxpemVkRG9tYWluLFxuICAgICAgICBhdmFpbGFibGUsXG4gICAgICAgIHJlZ2lzdGVyZWQ6ICEhZXhpc3RpbmdMaXN0aW5nLFxuICAgICAgICBkbnNSZXNvbHZlZDogZG5zQXZhaWxhYmxlLFxuICAgICAgICBzdGF0dXM6IGV4aXN0aW5nTGlzdGluZz8uc3RhdHVzIHx8ICdhdmFpbGFibGUnXG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGRvbWFpbiBhdmFpbGFiaWxpdHk6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjaGVjayBkb21haW4gYXZhaWxhYmlsaXR5JyxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBzd2FnZ2VyXG4gKiAvYXBpL3YxL2RvbWFpbnMvcmVnaXN0ZXI6XG4gKiAgIHBvc3Q6XG4gKiAgICAgc3VtbWFyeTogUmVnaXN0ZXIgYSBuZXcgZG9tYWluXG4gKiAgICAgdGFnczogW0RvbWFpbnNdXG4gKiAgICAgc2VjdXJpdHk6XG4gKiAgICAgICAtIGJlYXJlckF1dGg6IFtdXG4gKiAgICAgcmVxdWVzdEJvZHk6XG4gKiAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgY29udGVudDpcbiAqICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAgIHJlcXVpcmVkOlxuICogICAgICAgICAgICAgICAtIGRvbWFpblxuICogICAgICAgICAgICAgcHJvcGVydGllczpcbiAqICAgICAgICAgICAgICAgZG9tYWluOlxuICogICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGV4YW1wbGU6IFwiZXhhbXBsZS5jb21cIlxuICogICAgICAgICAgICAgICBjYXRlZ29yeTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBleGFtcGxlOiBcInRlY2hub2xvZ3lcIlxuICogICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgICBleGFtcGxlOiBcIkEgZ3JlYXQgZG9tYWluIGZvciB0ZWNoIGNvbXBhbmllc1wiXG4gKiAgICAgICAgICAgICAgIHRhZ3M6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgICBpdGVtczpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgICAgICAgICAgICAgIGV4YW1wbGU6IFtcInRlY2hcIiwgXCJzdGFydHVwXCJdXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAxOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogRG9tYWluIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XG4gKiAgICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgICAgYXBwbGljYXRpb24vanNvbjpcbiAqICAgICAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICAgIHByb3BlcnRpZXM6XG4gKiAgICAgICAgICAgICAgICAgc3VjY2VzczpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IGJvb2xlYW5cbiAqICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IHRydWVcbiAqICAgICAgICAgICAgICAgICBkYXRhOlxuICogICAgICAgICAgICAgICAgICAgJHJlZjogJyMvY29tcG9uZW50cy9zY2hlbWFzL0RvbWFpbkxpc3RpbmcnXG4gKi9cbnJvdXRlci5wb3N0KCcvcmVnaXN0ZXInLCByZWdpc3RyYXRpb25SYXRlTGltaXRNaWRkbGV3YXJlLCBhc3luYyAocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZG9tYWluLCBjYXRlZ29yeSwgZGVzY3JpcHRpb24sIHRhZ3MgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCAnYW5vbnltb3VzJztcblxuICAgIGlmICghZG9tYWluKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0RvbWFpbiBuYW1lIGlzIHJlcXVpcmVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTm9ybWFsaXplIGRvbWFpblxuICAgIGNvbnN0IG5vcm1hbGl6ZWREb21haW4gPSBkb21haW4udG9Mb3dlckNhc2UoKS50cmltKCk7XG5cbiAgICAvLyBDaGVjayBpZiBkb21haW4gYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ0RvbWFpbiA9IGF3YWl0IERvbWFpbkxpc3RpbmcuZmluZE9uZSh7IGRvbWFpbjogbm9ybWFsaXplZERvbWFpbiB9KTtcbiAgICBpZiAoZXhpc3RpbmdEb21haW4pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRG9tYWluIGFscmVhZHkgZXhpc3RzJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGRvbWFpbiBsaXN0aW5nXG4gICAgY29uc3QgZG9tYWluTGlzdGluZyA9IG5ldyBEb21haW5MaXN0aW5nKHtcbiAgICAgIGRvbWFpbjogbm9ybWFsaXplZERvbWFpbixcbiAgICAgIG93bmVyOiB1c2VySWQsXG4gICAgICBzdGF0dXM6ICdhdmFpbGFibGUnLFxuICAgICAgY2F0ZWdvcnksXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIHRhZ3MsXG4gICAgICB2aWV3czogMCxcbiAgICAgIGlucXVpcmllczogMFxuICAgIH0pO1xuXG4gICAgYXdhaXQgZG9tYWluTGlzdGluZy5zYXZlKCk7XG5cbiAgICBjdXN0b21NZXRyaWNzLmRvbWFpbnNMaXN0ZWRUb3RhbC5pbmMoKTtcblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBkb21haW5MaXN0aW5nXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHJlZ2lzdGVyaW5nIGRvbWFpbjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJlZ2lzdGVyIGRvbWFpbicsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBAc3dhZ2dlclxuICogL2FwaS92MS9kb21haW5zL3tkb21haW59OlxuICogICBnZXQ6XG4gKiAgICAgc3VtbWFyeTogR2V0IGRvbWFpbiBkZXRhaWxzXG4gKiAgICAgdGFnczogW0RvbWFpbnNdXG4gKiAgICAgcGFyYW1ldGVyczpcbiAqICAgICAgIC0gaW46IHBhdGhcbiAqICAgICAgICAgbmFtZTogZG9tYWluXG4gKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gKiAgICAgICAgIHNjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgZGVzY3JpcHRpb246IERvbWFpbiBuYW1lXG4gKiAgICAgcmVzcG9uc2VzOlxuICogICAgICAgMjAwOlxuICogICAgICAgICBkZXNjcmlwdGlvbjogRG9tYWluIGRldGFpbHMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseVxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICAgIHN1Y2Nlc3M6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBib29sZWFuXG4gKiAgICAgICAgICAgICAgICAgICBleGFtcGxlOiB0cnVlXG4gKiAgICAgICAgICAgICAgICAgZGF0YTpcbiAqICAgICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Eb21haW5MaXN0aW5nJ1xuICovXG5yb3V0ZXIuZ2V0KCcvOmRvbWFpbicsIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRvbWFpbiB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCBub3JtYWxpemVkRG9tYWluID0gZG9tYWluLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXG4gICAgY29uc3QgZG9tYWluTGlzdGluZyA9IGF3YWl0IERvbWFpbkxpc3RpbmcuZmluZE9uZSh7IGRvbWFpbjogbm9ybWFsaXplZERvbWFpbiB9KTtcblxuICAgIGlmICghZG9tYWluTGlzdGluZykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdEb21haW4gbm90IGZvdW5kJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSW5jcmVtZW50IHZpZXcgY291bnRcbiAgICBkb21haW5MaXN0aW5nLnZpZXdzICs9IDE7XG4gICAgYXdhaXQgZG9tYWluTGlzdGluZy5zYXZlKCk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogZG9tYWluTGlzdGluZ1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBmZXRjaGluZyBkb21haW46JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBkb21haW4nLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC9hcGkvdjEvZG9tYWlucy97ZG9tYWlufTpcbiAqICAgcHV0OlxuICogICAgIHN1bW1hcnk6IFVwZGF0ZSBkb21haW4gZGV0YWlsc1xuICogICAgIHRhZ3M6IFtEb21haW5zXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGRvbWFpblxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBEb21haW4gbmFtZVxuICogICAgIHJlcXVlc3RCb2R5OlxuICogICAgICAgcmVxdWlyZWQ6IHRydWVcbiAqICAgICAgIGNvbnRlbnQ6XG4gKiAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgc2NoZW1hOlxuICogICAgICAgICAgICAgdHlwZTogb2JqZWN0XG4gKiAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICBjYXRlZ29yeTpcbiAqICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmdcbiAqICAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgICAgICAgIHRhZ3M6XG4gKiAgICAgICAgICAgICAgICAgdHlwZTogYXJyYXlcbiAqICAgICAgICAgICAgICAgICBpdGVtczpcbiAqICAgICAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZ1xuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IERvbWFpbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseVxuICogICAgICAgICBjb250ZW50OlxuICogICAgICAgICAgIGFwcGxpY2F0aW9uL2pzb246XG4gKiAgICAgICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgICAgIHR5cGU6IG9iamVjdFxuICogICAgICAgICAgICAgICBwcm9wZXJ0aWVzOlxuICogICAgICAgICAgICAgICAgIHN1Y2Nlc3M6XG4gKiAgICAgICAgICAgICAgICAgICB0eXBlOiBib29sZWFuXG4gKiAgICAgICAgICAgICAgICAgICBleGFtcGxlOiB0cnVlXG4gKiAgICAgICAgICAgICAgICAgZGF0YTpcbiAqICAgICAgICAgICAgICAgICAgICRyZWY6ICcjL2NvbXBvbmVudHMvc2NoZW1hcy9Eb21haW5MaXN0aW5nJ1xuICovXG5yb3V0ZXIucHV0KCcvOmRvbWFpbicsIGFzeW5jIChyZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkb21haW4gfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgeyBjYXRlZ29yeSwgZGVzY3JpcHRpb24sIHRhZ3MgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZCB8fCAnYW5vbnltb3VzJztcblxuICAgIGNvbnN0IG5vcm1hbGl6ZWREb21haW4gPSBkb21haW4udG9Mb3dlckNhc2UoKS50cmltKCk7XG5cbiAgICBjb25zdCBkb21haW5MaXN0aW5nID0gYXdhaXQgRG9tYWluTGlzdGluZy5maW5kT25lKHtcbiAgICAgIGRvbWFpbjogbm9ybWFsaXplZERvbWFpbixcbiAgICAgIG93bmVyOiB1c2VySWRcbiAgICB9KTtcblxuICAgIGlmICghZG9tYWluTGlzdGluZykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdEb21haW4gbm90IGZvdW5kIG9yIGFjY2VzcyBkZW5pZWQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgZmllbGRzXG4gICAgaWYgKGNhdGVnb3J5ICE9PSB1bmRlZmluZWQpIHtkb21haW5MaXN0aW5nLmNhdGVnb3J5ID0gY2F0ZWdvcnk7fVxuICAgIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSB7ZG9tYWluTGlzdGluZy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO31cbiAgICBpZiAodGFncyAhPT0gdW5kZWZpbmVkKSB7ZG9tYWluTGlzdGluZy50YWdzID0gdGFnczt9XG5cbiAgICBhd2FpdCBkb21haW5MaXN0aW5nLnNhdmUoKTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBkb21haW5MaXN0aW5nXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGRvbWFpbjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSBkb21haW4nLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHN3YWdnZXJcbiAqIC9hcGkvdjEvZG9tYWlucy97ZG9tYWlufTpcbiAqICAgZGVsZXRlOlxuICogICAgIHN1bW1hcnk6IERlbGV0ZSBkb21haW4gbGlzdGluZ1xuICogICAgIHRhZ3M6IFtEb21haW5zXVxuICogICAgIHNlY3VyaXR5OlxuICogICAgICAgLSBiZWFyZXJBdXRoOiBbXVxuICogICAgIHBhcmFtZXRlcnM6XG4gKiAgICAgICAtIGluOiBwYXRoXG4gKiAgICAgICAgIG5hbWU6IGRvbWFpblxuICogICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICogICAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgICAgdHlwZTogc3RyaW5nXG4gKiAgICAgICAgIGRlc2NyaXB0aW9uOiBEb21haW4gbmFtZVxuICogICAgIHJlc3BvbnNlczpcbiAqICAgICAgIDIwMDpcbiAqICAgICAgICAgZGVzY3JpcHRpb246IERvbWFpbiBkZWxldGVkIHN1Y2Nlc3NmdWxseVxuICovXG5yb3V0ZXIuZGVsZXRlKCcvOmRvbWFpbicsIGFzeW5jIChyZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkb21haW4gfSA9IHJlcS5wYXJhbXM7XG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXI/LmlkIHx8ICdhbm9ueW1vdXMnO1xuXG4gICAgY29uc3Qgbm9ybWFsaXplZERvbWFpbiA9IGRvbWFpbi50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcblxuICAgIGNvbnN0IGRvbWFpbkxpc3RpbmcgPSBhd2FpdCBEb21haW5MaXN0aW5nLmZpbmRPbmVBbmREZWxldGUoe1xuICAgICAgZG9tYWluOiBub3JtYWxpemVkRG9tYWluLFxuICAgICAgb3duZXI6IHVzZXJJZCxcbiAgICAgIHN0YXR1czogeyAkaW46IFsnYXZhaWxhYmxlJywgJ2xpc3RlZCddIH1cbiAgICB9KTtcblxuICAgIGlmICghZG9tYWluTGlzdGluZykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdEb21haW4gbm90IGZvdW5kIG9yIGNhbm5vdCBiZSBkZWxldGVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdEb21haW4gZGVsZXRlZCBzdWNjZXNzZnVsbHknXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGRvbWFpbjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSBkb21haW4nLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFmWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTRSxNQUFNLFFBQTJCLFNBQVM7QUFDbkQsT0FBT0MsYUFBYSxNQUFNLGtC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