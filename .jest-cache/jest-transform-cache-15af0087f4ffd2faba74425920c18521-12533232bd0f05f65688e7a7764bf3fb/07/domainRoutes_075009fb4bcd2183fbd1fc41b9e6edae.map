{"version":3,"names":["cov_1ma5iybw0r","actualCoverage","Router","DomainListing","customMetrics","registrationRateLimiter","logger","dns","promisify","dnsLookup","s","lookup","router","registrationRateLimitMiddleware","req","res","next","f","userId","b","user","id","ip","consume","rejRes","status","json","success","error","message","statusCode","post","domain","body","normalizedDomain","toLowerCase","trim","existingListing","findOne","dnsAvailable","available","listingsCreatedTotal","inc","data","registered","dnsResolved","category","description","tags","existingDomain","domainListing","owner","views","inquiries","save","domainsListedTotal","get","params","put","undefined","delete","findOneAndDelete","$in"],"sources":["domainRoutes.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport { Router, Request, Response } from 'express';\nimport DomainListing from '../models/Domain';\nimport { customMetrics } from '../middleware/metrics';\nimport { registrationRateLimiter } from '../middleware/rateLimiter';\nimport logger from '../utils/logger';\nimport * as dns from 'dns';\nimport { promisify } from 'util';\n\nconst dnsLookup = promisify(dns.lookup);\n\nconst router = Router();\n\n// Note: AuthenticatedRequest is defined globally via Express namespace extension\ntype AuthenticatedRequest = Request;\n\n// Middleware for registration rate limiting\nconst registrationRateLimitMiddleware = async (req: AuthenticatedRequest, res: Response, next: Function) => {\n  try {\n    const userId = req.user?.id || req.ip || 'anonymous';\n    await registrationRateLimiter.consume(userId);\n    next();\n  } catch (rejRes) {\n    res.status(429).json({\n      success: false,\n      error: {\n        message: 'Too many registration attempts, please try again later.',\n        statusCode: 429\n      }\n    });\n  }\n};\n\n/**\n * @swagger\n * /api/v1/domains/check:\n *   post:\n *     summary: Check domain availability\n *     tags: [Domains]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - domain\n *             properties:\n *               domain:\n *                 type: string\n *                 example: \"example.com\"\n *     responses:\n *       200:\n *         description: Domain availability checked successfully\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *                   example: true\n *                 data:\n *                   type: object\n *                   properties:\n *                     domain:\n *                       type: string\n *                       example: \"example.com\"\n *                     available:\n *                       type: boolean\n *                       example: true\n *                     registered:\n *                       type: boolean\n *                       example: false\n */\nrouter.post('/check', async (req: AuthenticatedRequest, res: Response) => {\n  try {\n    const { domain } = req.body;\n\n    if (!domain) {\n      return res.status(400).json({\n        success: false,\n        message: 'Domain name is required'\n      });\n    }\n\n    // Normalize domain\n    const normalizedDomain = domain.toLowerCase().trim();\n\n    // Check if domain exists in our database\n    const existingListing = await DomainListing.findOne({ domain: normalizedDomain });\n\n    // Check DNS resolution\n    let dnsAvailable = false;\n    try {\n      await dnsLookup(normalizedDomain);\n      dnsAvailable = true;\n    } catch (error) {\n      dnsAvailable = false;\n    }\n\n    // Domain is available if:\n    // 1. Not in our database, OR\n    // 2. In database but marked as available\n    const available = !existingListing || existingListing.status === 'available';\n\n    customMetrics.listingsCreatedTotal.inc();\n\n    res.json({\n      success: true,\n      data: {\n        domain: normalizedDomain,\n        available,\n        registered: !!existingListing,\n        dnsResolved: dnsAvailable,\n        status: existingListing?.status || 'available'\n      }\n    });\n  } catch (error: any) {\n    logger.error('Error checking domain availability:', error);\n    res.status(500).json({\n      success: false,\n      message: 'Failed to check domain availability',\n      error: error.message\n    });\n  }\n});\n\n/**\n * @swagger\n * /api/v1/domains/register:\n *   post:\n *     summary: Register a new domain\n *     tags: [Domains]\n *     security:\n *       - bearerAuth: []\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             required:\n *               - domain\n *             properties:\n *               domain:\n *                 type: string\n *                 example: \"example.com\"\n *               category:\n *                 type: string\n *                 example: \"technology\"\n *               description:\n *                 type: string\n *                 example: \"A great domain for tech companies\"\n *               tags:\n *                 type: array\n *                 items:\n *                   type: string\n *                 example: [\"tech\", \"startup\"]\n *     responses:\n *       201:\n *         description: Domain registered successfully\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *                   example: true\n *                 data:\n *                   $ref: '#/components/schemas/DomainListing'\n */\nrouter.post('/register', registrationRateLimitMiddleware, async (req: AuthenticatedRequest, res: Response) => {\n  try {\n    const { domain, category, description, tags } = req.body;\n    const userId = req.user?.id || 'anonymous';\n\n    if (!domain) {\n      return res.status(400).json({\n        success: false,\n        message: 'Domain name is required'\n      });\n    }\n\n    // Normalize domain\n    const normalizedDomain = domain.toLowerCase().trim();\n\n    // Check if domain already exists\n    const existingDomain = await DomainListing.findOne({ domain: normalizedDomain });\n    if (existingDomain) {\n      return res.status(409).json({\n        success: false,\n        message: 'Domain already exists'\n      });\n    }\n\n    // Create domain listing\n    const domainListing = new DomainListing({\n      domain: normalizedDomain,\n      owner: userId,\n      status: 'available',\n      category,\n      description,\n      tags,\n      views: 0,\n      inquiries: 0\n    });\n\n    await domainListing.save();\n\n    customMetrics.domainsListedTotal.inc();\n\n    res.status(201).json({\n      success: true,\n      data: domainListing\n    });\n  } catch (error: any) {\n    logger.error('Error registering domain:', error);\n    res.status(500).json({\n      success: false,\n      message: 'Failed to register domain',\n      error: error.message\n    });\n  }\n});\n\n/**\n * @swagger\n * /api/v1/domains/{domain}:\n *   get:\n *     summary: Get domain details\n *     tags: [Domains]\n *     parameters:\n *       - in: path\n *         name: domain\n *         required: true\n *         schema:\n *           type: string\n *         description: Domain name\n *     responses:\n *       200:\n *         description: Domain details retrieved successfully\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *                   example: true\n *                 data:\n *                   $ref: '#/components/schemas/DomainListing'\n */\nrouter.get('/:domain', async (req: Request, res: Response) => {\n  try {\n    const { domain } = req.params;\n    const normalizedDomain = domain.toLowerCase().trim();\n\n    const domainListing = await DomainListing.findOne({ domain: normalizedDomain });\n\n    if (!domainListing) {\n      return res.status(404).json({\n        success: false,\n        message: 'Domain not found'\n      });\n    }\n\n    // Increment view count\n    domainListing.views += 1;\n    await domainListing.save();\n\n    res.json({\n      success: true,\n      data: domainListing\n    });\n  } catch (error: any) {\n    logger.error('Error fetching domain:', error);\n    res.status(500).json({\n      success: false,\n      message: 'Failed to fetch domain',\n      error: error.message\n    });\n  }\n});\n\n/**\n * @swagger\n * /api/v1/domains/{domain}:\n *   put:\n *     summary: Update domain details\n *     tags: [Domains]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: domain\n *         required: true\n *         schema:\n *           type: string\n *         description: Domain name\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               category:\n *                 type: string\n *               description:\n *                 type: string\n *               tags:\n *                 type: array\n *                 items:\n *                   type: string\n *     responses:\n *       200:\n *         description: Domain updated successfully\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *                   example: true\n *                 data:\n *                   $ref: '#/components/schemas/DomainListing'\n */\nrouter.put('/:domain', async (req: AuthenticatedRequest, res: Response) => {\n  try {\n    const { domain } = req.params;\n    const { category, description, tags } = req.body;\n    const userId = req.user?.id || 'anonymous';\n\n    const normalizedDomain = domain.toLowerCase().trim();\n\n    const domainListing = await DomainListing.findOne({\n      domain: normalizedDomain,\n      owner: userId\n    });\n\n    if (!domainListing) {\n      return res.status(404).json({\n        success: false,\n        message: 'Domain not found or access denied'\n      });\n    }\n\n    // Update fields\n    if (category !== undefined) {domainListing.category = category;}\n    if (description !== undefined) {domainListing.description = description;}\n    if (tags !== undefined) {domainListing.tags = tags;}\n\n    await domainListing.save();\n\n    res.json({\n      success: true,\n      data: domainListing\n    });\n  } catch (error: any) {\n    logger.error('Error updating domain:', error);\n    res.status(500).json({\n      success: false,\n      message: 'Failed to update domain',\n      error: error.message\n    });\n  }\n});\n\n/**\n * @swagger\n * /api/v1/domains/{domain}:\n *   delete:\n *     summary: Delete domain listing\n *     tags: [Domains]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: path\n *         name: domain\n *         required: true\n *         schema:\n *           type: string\n *         description: Domain name\n *     responses:\n *       200:\n *         description: Domain deleted successfully\n */\nrouter.delete('/:domain', async (req: AuthenticatedRequest, res: Response) => {\n  try {\n    const { domain } = req.params;\n    const userId = req.user?.id || 'anonymous';\n\n    const normalizedDomain = domain.toLowerCase().trim();\n\n    const domainListing = await DomainListing.findOneAndDelete({\n      domain: normalizedDomain,\n      owner: userId,\n      status: { $in: ['available', 'listed'] }\n    });\n\n    if (!domainListing) {\n      return res.status(404).json({\n        success: false,\n        message: 'Domain not found or cannot be deleted'\n      });\n    }\n\n    res.json({\n      success: true,\n      message: 'Domain deleted successfully'\n    });\n  } catch (error: any) {\n    logger.error('Error deleting domain:', error);\n    res.status(500).json({\n      success: false,\n      message: 'Failed to delete domain',\n      error: error.message\n    });\n  }\n});\n\nexport default router;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}