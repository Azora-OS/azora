{"version":3,"names":["cov_219kvocco1","actualCoverage","VaultService","constructor","f","getInstance","s","instance","b","getSecret","key","value","process","env","Error","setSecret","generateKeyPair","ethers","require","wallet","Wallet","createRandom","publicKey","address","privateKey"],"sources":["vault-service.ts"],"sourcesContent":["export interface KeyPair {\n    publicKey: string;\n    privateKey: string;\n}\n\nexport interface IVaultService {\n    getSecret(key: string): Promise<string>;\n    setSecret(key: string, value: string): Promise<void>;\n    generateKeyPair(): Promise<KeyPair>;\n}\n\nexport class VaultService implements IVaultService {\n    private static instance: VaultService;\n\n    // In a real production environment, this would connect to HashiCorp Vault, AWS Secrets Manager, or Azure Key Vault\n    // For now, it wraps environment variables but provides the abstraction layer requested\n\n    private constructor() { }\n\n    public static getInstance(): VaultService {\n        if (!VaultService.instance) {\n            VaultService.instance = new VaultService();\n        }\n        return VaultService.instance;\n    }\n\n    async getSecret(key: string): Promise<string> {\n        // TODO: Connect to secure vault\n        const value = process.env[key];\n        if (!value) {\n            throw new Error(`Secret ${key} not found`);\n        }\n        return value;\n    }\n\n    async setSecret(key: string, value: string): Promise<void> {\n        // TODO: Connect to secure vault\n        process.env[key] = value;\n    }\n\n    async generateKeyPair(): Promise<KeyPair> {\n        // Placeholder for secure key generation\n        // In production, use a HSM or secure enclave\n        const { ethers } = require('ethers');\n        const wallet = ethers.Wallet.createRandom();\n        return {\n            publicKey: wallet.address,\n            privateKey: wallet.privateKey\n        };\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAJZ,OAAO,MAAME,YAAY,CAA0B;EAG/C;EACA;;EAEQC,WAAWA,CAAA,EAAG;IAAA;IAAAH,cAAA,GAAAI,CAAA;EAAE;EAExB,OAAcC,WAAWA,CAAA,EAAiB;IAAA;IAAAL,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAM,CAAA;IACtC,IAAI,CAACJ,YAAY,CAACK,QAAQ,EAAE;MAAA;MAAAP,cAAA,GAAAQ,CAAA;MAAAR,cAAA,GAAAM,CAAA;MACxBJ,YAAY,CAACK,QAAQ,GAAG,IAAIL,YAAY,CAAC,CAAC;IAC9C,CAAC;IAAA;IAAA;MAAAF,cAAA,GAAAQ,CAAA;IAAA;IAAAR,cAAA,GAAAM,CAAA;IACD,OAAOJ,YAAY,CAACK,QAAQ;EAChC;EAEA,MAAME,SAASA,CAACC,GAAW,EAAmB;IAAA;IAAAV,cAAA,GAAAI,CAAA;IAC1C;IACA,MAAMO,KAAK;IAAA;IAAA,CAAAX,cAAA,GAAAM,CAAA,OAAGM,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;IAAC;IAAAV,cAAA,GAAAM,CAAA;IAC/B,IAAI,CAACK,KAAK,EAAE;MAAA;MAAAX,cAAA,GAAAQ,CAAA;MAAAR,cAAA,GAAAM,CAAA;MACR,MAAM,IAAIQ,KAAK,CAAC,UAAUJ,GAAG,YAAY,CAAC;IAC9C,CAAC;IAAA;IAAA;MAAAV,cAAA,GAAAQ,CAAA;IAAA;IAAAR,cAAA,GAAAM,CAAA;IACD,OAAOK,KAAK;EAChB;EAEA,MAAMI,SAASA,CAACL,GAAW,EAAEC,KAAa,EAAiB;IAAA;IAAAX,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAM,CAAA;IACvD;IACAM,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC,GAAGC,KAAK;EAC5B;EAEA,MAAMK,eAAeA,CAAA,EAAqB;IAAA;IAAAhB,cAAA,GAAAI,CAAA;IACtC;IACA;IACA,MAAM;MAAEa;IAAO,CAAC;IAAA;IAAA,CAAAjB,cAAA,GAAAM,CAAA,OAAGY,OAAO,CAAC,QAAQ,CAAC;IACpC,MAAMC,MAAM;IAAA;IAAA,CAAAnB,cAAA,GAAAM,CAAA,OAAGW,MAAM,CAACG,MAAM,CAACC,YAAY,CAAC,CAAC;IAAC;IAAArB,cAAA,GAAAM,CAAA;IAC5C,OAAO;MACHgB,SAAS,EAAEH,MAAM,CAACI,OAAO;MACzBC,UAAU,EAAEL,MAAM,CAACK;IACvB,CAAC;EACL;AACJ","ignoreList":[]}