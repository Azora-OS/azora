8cd73cba2263fe05d47485e4712f61ec
/* istanbul ignore next */
function cov_219kvocco1() {
  var path = "/workspaces/azora/services/azora-blockchain/src/vault-service.ts";
  var hash = "8c46ba270ff655023f920f83b6e7f60f257c1f65";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-blockchain/src/vault-service.ts",
    statementMap: {
      "0": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 23,
          column: 9
        }
      },
      "1": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 55
        }
      },
      "2": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 24,
          column: 37
        }
      },
      "3": {
        start: {
          line: 29,
          column: 22
        },
        end: {
          line: 29,
          column: 38
        }
      },
      "4": {
        start: {
          line: 30,
          column: 8
        },
        end: {
          line: 32,
          column: 9
        }
      },
      "5": {
        start: {
          line: 31,
          column: 12
        },
        end: {
          line: 31,
          column: 55
        }
      },
      "6": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 33,
          column: 21
        }
      },
      "7": {
        start: {
          line: 38,
          column: 8
        },
        end: {
          line: 38,
          column: 33
        }
      },
      "8": {
        start: {
          line: 44,
          column: 27
        },
        end: {
          line: 44,
          column: 44
        }
      },
      "9": {
        start: {
          line: 45,
          column: 23
        },
        end: {
          line: 45,
          column: 51
        }
      },
      "10": {
        start: {
          line: 46,
          column: 8
        },
        end: {
          line: 49,
          column: 10
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 26
          },
          end: {
            line: 18,
            column: 29
          }
        },
        line: 18
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 20,
            column: 4
          },
          end: {
            line: 20,
            column: 5
          }
        },
        loc: {
          start: {
            line: 20,
            column: 46
          },
          end: {
            line: 25,
            column: 5
          }
        },
        line: 20
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        loc: {
          start: {
            line: 27,
            column: 50
          },
          end: {
            line: 34,
            column: 5
          }
        },
        line: 27
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 36,
            column: 4
          },
          end: {
            line: 36,
            column: 5
          }
        },
        loc: {
          start: {
            line: 36,
            column: 63
          },
          end: {
            line: 39,
            column: 5
          }
        },
        line: 36
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 41,
            column: 5
          }
        },
        loc: {
          start: {
            line: 41,
            column: 46
          },
          end: {
            line: 50,
            column: 5
          }
        },
        line: 41
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 23,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 23,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 21
      },
      "1": {
        loc: {
          start: {
            line: 30,
            column: 8
          },
          end: {
            line: 32,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 30,
            column: 8
          },
          end: {
            line: 32,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 30
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "8c46ba270ff655023f920f83b6e7f60f257c1f65"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_219kvocco1 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_219kvocco1();
export class VaultService {
  // In a real production environment, this would connect to HashiCorp Vault, AWS Secrets Manager, or Azure Key Vault
  // For now, it wraps environment variables but provides the abstraction layer requested

  constructor() {
    /* istanbul ignore next */
    cov_219kvocco1().f[0]++;
  }
  static getInstance() {
    /* istanbul ignore next */
    cov_219kvocco1().f[1]++;
    cov_219kvocco1().s[0]++;
    if (!VaultService.instance) {
      /* istanbul ignore next */
      cov_219kvocco1().b[0][0]++;
      cov_219kvocco1().s[1]++;
      VaultService.instance = new VaultService();
    } else
    /* istanbul ignore next */
    {
      cov_219kvocco1().b[0][1]++;
    }
    cov_219kvocco1().s[2]++;
    return VaultService.instance;
  }
  async getSecret(key) {
    /* istanbul ignore next */
    cov_219kvocco1().f[2]++;
    // TODO: Connect to secure vault
    const value =
    /* istanbul ignore next */
    (cov_219kvocco1().s[3]++, process.env[key]);
    /* istanbul ignore next */
    cov_219kvocco1().s[4]++;
    if (!value) {
      /* istanbul ignore next */
      cov_219kvocco1().b[1][0]++;
      cov_219kvocco1().s[5]++;
      throw new Error(`Secret ${key} not found`);
    } else
    /* istanbul ignore next */
    {
      cov_219kvocco1().b[1][1]++;
    }
    cov_219kvocco1().s[6]++;
    return value;
  }
  async setSecret(key, value) {
    /* istanbul ignore next */
    cov_219kvocco1().f[3]++;
    cov_219kvocco1().s[7]++;
    // TODO: Connect to secure vault
    process.env[key] = value;
  }
  async generateKeyPair() {
    /* istanbul ignore next */
    cov_219kvocco1().f[4]++;
    // Placeholder for secure key generation
    // In production, use a HSM or secure enclave
    const {
      ethers
    } =
    /* istanbul ignore next */
    (cov_219kvocco1().s[8]++, require('ethers'));
    const wallet =
    /* istanbul ignore next */
    (cov_219kvocco1().s[9]++, ethers.Wallet.createRandom());
    /* istanbul ignore next */
    cov_219kvocco1().s[10]++;
    return {
      publicKey: wallet.address,
      privateKey: wallet.privateKey
    };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjE5a3ZvY2NvMSIsImFjdHVhbENvdmVyYWdlIiwiVmF1bHRTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJmIiwiZ2V0SW5zdGFuY2UiLCJzIiwiaW5zdGFuY2UiLCJiIiwiZ2V0U2VjcmV0Iiwia2V5IiwidmFsdWUiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJzZXRTZWNyZXQiLCJnZW5lcmF0ZUtleVBhaXIiLCJldGhlcnMiLCJyZXF1aXJlIiwid2FsbGV0IiwiV2FsbGV0IiwiY3JlYXRlUmFuZG9tIiwicHVibGljS2V5IiwiYWRkcmVzcyIsInByaXZhdGVLZXkiXSwic291cmNlcyI6WyJ2YXVsdC1zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgS2V5UGFpciB7XG4gICAgcHVibGljS2V5OiBzdHJpbmc7XG4gICAgcHJpdmF0ZUtleTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElWYXVsdFNlcnZpY2Uge1xuICAgIGdldFNlY3JldChrZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBzZXRTZWNyZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGdlbmVyYXRlS2V5UGFpcigpOiBQcm9taXNlPEtleVBhaXI+O1xufVxuXG5leHBvcnQgY2xhc3MgVmF1bHRTZXJ2aWNlIGltcGxlbWVudHMgSVZhdWx0U2VydmljZSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFZhdWx0U2VydmljZTtcblxuICAgIC8vIEluIGEgcmVhbCBwcm9kdWN0aW9uIGVudmlyb25tZW50LCB0aGlzIHdvdWxkIGNvbm5lY3QgdG8gSGFzaGlDb3JwIFZhdWx0LCBBV1MgU2VjcmV0cyBNYW5hZ2VyLCBvciBBenVyZSBLZXkgVmF1bHRcbiAgICAvLyBGb3Igbm93LCBpdCB3cmFwcyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYnV0IHByb3ZpZGVzIHRoZSBhYnN0cmFjdGlvbiBsYXllciByZXF1ZXN0ZWRcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7IH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVmF1bHRTZXJ2aWNlIHtcbiAgICAgICAgaWYgKCFWYXVsdFNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIFZhdWx0U2VydmljZS5pbnN0YW5jZSA9IG5ldyBWYXVsdFNlcnZpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVmF1bHRTZXJ2aWNlLmluc3RhbmNlO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFNlY3JldChrZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIC8vIFRPRE86IENvbm5lY3QgdG8gc2VjdXJlIHZhdWx0XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcHJvY2Vzcy5lbnZba2V5XTtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZWNyZXQgJHtrZXl9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRTZWNyZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gVE9ETzogQ29ubmVjdCB0byBzZWN1cmUgdmF1bHRcbiAgICAgICAgcHJvY2Vzcy5lbnZba2V5XSA9IHZhbHVlO1xuICAgIH1cblxuICAgIGFzeW5jIGdlbmVyYXRlS2V5UGFpcigpOiBQcm9taXNlPEtleVBhaXI+IHtcbiAgICAgICAgLy8gUGxhY2Vob2xkZXIgZm9yIHNlY3VyZSBrZXkgZ2VuZXJhdGlvblxuICAgICAgICAvLyBJbiBwcm9kdWN0aW9uLCB1c2UgYSBIU00gb3Igc2VjdXJlIGVuY2xhdmVcbiAgICAgICAgY29uc3QgeyBldGhlcnMgfSA9IHJlcXVpcmUoJ2V0aGVycycpO1xuICAgICAgICBjb25zdCB3YWxsZXQgPSBldGhlcnMuV2FsbGV0LmNyZWF0ZVJhbmRvbSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHVibGljS2V5OiB3YWxsZXQuYWRkcmVzcyxcbiAgICAgICAgICAgIHByaXZhdGVLZXk6IHdhbGxldC5wcml2YXRlS2V5XG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBZVk7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTtBQUpaLE9BQU8sTUFBTUUsWUFBWSxDQUEwQjtFQUcvQztFQUNBOztFQUVRQyxXQUFXQSxDQUFBLEVBQUc7SUFBQTtJQUFBSCxjQUFBLEdBQUFJLENBQUE7RUFBRTtFQUV4QixPQUFjQyxXQUFXQSxDQUFBLEVBQWlCO0lBQUE7SUFBQUwsY0FBQSxHQUFBSSxDQUFBO0lBQUFKLGNBQUEsR0FBQU0sQ0FBQTtJQUN0QyxJQUFJLENBQUNKLFlBQVksQ0FBQ0ssUUFBUSxFQUFFO01BQUE7TUFBQVAsY0FBQSxHQUFBUSxDQUFBO01BQUFSLGNBQUEsR0FBQU0sQ0FBQTtNQUN4QkosWUFBWSxDQUFDSyxRQUFRLEdBQUcsSUFBSUwsWUFBWSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUFBO0lBQUE7TUFBQUYsY0FBQSxHQUFBUSxDQUFBO0lBQUE7SUFBQVIsY0FBQSxHQUFBTSxDQUFBO0lBQ0QsT0FBT0osWUFBWSxDQUFDSyxRQUFRO0VBQ2hDO0VBRUEsTUFBTUUsU0FBU0EsQ0FBQ0MsR0FBVyxFQUFtQjtJQUFBO0lBQUFWLGNBQUEsR0FBQUksQ0FBQTtJQUMxQztJQUNBLE1BQU1PLEtBQUs7SUFBQTtJQUFBLENBQUFYLGNBQUEsR0FBQU0sQ0FBQSxPQUFHTSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0gsR0FBRyxDQUFDO0lBQUM7SUFBQVYsY0FBQSxHQUFBTSxDQUFBO0lBQy9CLElBQUksQ0FBQ0ssS0FBSyxFQUFFO01BQUE7TUFBQVgsY0FBQSxHQUFBUSxDQUFBO01BQUFSLGNBQUEsR0FBQU0sQ0FBQTtNQUNSLE1BQU0sSUFBSVEsS0FBSyxDQUFDLFVBQVVKLEdBQUcsWUFBWSxDQUFDO0lBQzlDLENBQUM7SUFBQTtJQUFBO01BQUFWLGNBQUEsR0FBQVEsQ0FBQTtJQUFBO0lBQUFSLGNBQUEsR0FBQU0sQ0FBQTtJQUNELE9BQU9LLEtBQUs7RUFDaEI7RUFFQSxNQUFNSSxTQUFTQSxDQUFDTCxHQUFXLEVBQUVDLEtBQWEsRUFBaUI7SUFBQTtJQUFBWCxjQUFBLEdBQUFJLENBQUE7SUFBQUosY0FBQSxHQUFBTSxDQUFBO0lBQ3ZEO0lBQ0FNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxHQUFHLENBQUMsR0FBR0MsS0FBSztFQUM1QjtFQUVBLE1BQU1LLGVBQWVBLENBQUEsRUFBcUI7SUFBQTtJQUFBaEIsY0FBQSxHQUFBSSxDQUFBO0lBQ3RDO0lBQ0E7SUFDQSxNQUFNO01BQUVhO0lBQU8sQ0FBQztJQUFBO0lBQUEsQ0FBQWpCLGNBQUEsR0FBQU0sQ0FBQSxPQUFHWSxPQUFPLENBQUMsUUFBUSxDQUFDO0lBQ3BDLE1BQU1DLE1BQU07SUFBQTtJQUFBLENBQUFuQixjQUFBLEdBQUFNLENBQUEsT0FBR1csTUFBTSxDQUFDRyxNQUFNLENBQUNDLFlBQVksQ0FBQyxDQUFDO0lBQUM7SUFBQXJCLGNBQUEsR0FBQU0sQ0FBQTtJQUM1QyxPQUFPO01BQ0hnQixTQUFTLEVBQUVILE1BQU0sQ0FBQ0ksT0FBTztNQUN6QkMsVUFBVSxFQUFFTCxNQUFNLENBQUNLO0lBQ3ZCLENBQUM7RUFDTDtBQUNKIiwiaWdub3JlTGlzdCI6W119