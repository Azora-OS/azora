{"version":3,"names":["cov_vwpnrikxl","actualCoverage","EventEmitter","lunoIntegration","crypto","DirectBankWithdrawal","withdrawals","s","Map","monthlyFreeEFTs","usedFreeEFTs","constructor","f","console","log","withdrawViaLuno","userId","azrAmount","bankAccount","bank","accountNumber","slice","exchangeRate","internalFee","zarAfterFee","toFixed","lunoWithdrawal","withdrawZAR","withdrawal","id","randomUUID","amount","currency","method","status","fee","reference","createdAt","Date","completedAt","set","emit","error","message","withdrawViaManualEFT","accountHolder","b","now","withdrawViaCapitecAPI","getOptimalMethod","lunoConfigured","process","env","LUNO_API_KEY_ID","LUNO_API_SECRET","calculateFees","getSummary","Array","from","values","totalWithdrawn","reduce","sum","w","totalFees","totalWithdrawals","length","netAmount","freeEFTsRemaining","avgFeePercentage","directWithdrawal"],"sources":["direct-bank-withdrawal.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright ¬© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n*/\n\n/**\n * DIRECT BANK WITHDRAWAL SYSTEM\n * Our own withdrawal system - No payment gateway fees!\n * \n * STRATEGY:\n * 1. Use Luno for crypto ‚Üí ZAR conversion (0% fees!)\n * 2. Withdraw ZAR from Luno ‚Üí Your Capitec account (0% fees!)\n * 3. Manual EFT from Capitec ‚Üí Student accounts (free up to 5/month)\n * 4. Or use Capitec API if available\n */\n\nimport { EventEmitter } from 'events'\nimport { lunoIntegration } from './luno-integration'\nimport crypto from 'crypto'\n\nexport interface DirectWithdrawal {\n  id: string\n  userId: string\n  amount: number\n  currency: 'ZAR' | 'AZR'\n  method: 'luno' | 'manual-eft' | 'capitec-api'\n  status: 'pending' | 'processing' | 'completed' | 'failed'\n  fee: number\n  bankAccount: {\n    accountNumber: string\n    bank: string\n    accountHolder: string\n  }\n  reference: string\n  createdAt: Date\n  completedAt?: Date\n}\n\nexport class DirectBankWithdrawal extends EventEmitter {\n  private withdrawals: Map<string, DirectWithdrawal> = new Map()\n  private monthlyFreeEFTs: number = 5 // Capitec gives 5 free EFTs/month\n  private usedFreeEFTs: number = 0\n\n  constructor() {\n    super()\n    console.log('üè¶ Direct Bank Withdrawal System initialized')\n    console.log('   üí° Strategy: Luno (0% fees) ‚Üí Capitec ‚Üí Students')\n  }\n\n  /**\n   * CHEAPEST: Withdraw via Luno (RECOMMENDED)\n   * Total fees: 0%!\n   */\n  async withdrawViaLuno(\n    userId: string,\n    azrAmount: number,\n    bankAccount: { accountNumber: string; bank: string; accountHolder: string }\n  ): Promise<DirectWithdrawal> {\n    console.log('\\nüíé LUNO WITHDRAWAL (0% FEES!)')\n    console.log(`   User: ${userId}`)\n    console.log(`   AZR Amount: ${azrAmount}`)\n    console.log(`   Destination: ${bankAccount.bank} ***${bankAccount.accountNumber.slice(-4)}`)\n\n    // Step 1: Convert AZR to ZAR (1% internal conversion fee goes to you)\n    const exchangeRate = 10 // 1 AZR = R10\n    const internalFee = azrAmount * exchangeRate * 0.01\n    const zarAfterFee = (azrAmount * exchangeRate) - internalFee\n\n    console.log('\\n   STEP 1: Convert AZR ‚Üí ZAR')\n    console.log(`   ${azrAmount} AZR √ó R${exchangeRate} = R${azrAmount * exchangeRate}`)\n    console.log(`   Internal fee (1%): R${internalFee.toFixed(2)} (YOUR REVENUE!)`)\n    console.log(`   Net ZAR: R${zarAfterFee.toFixed(2)}`)\n\n    // Step 2: Send ZAR to user via Luno (0% fees!)\n    console.log('\\n   STEP 2: Withdraw via Luno')\n    console.log(`   Fee: R0 (Luno doesn't charge!)`)\n    \n    try {\n      const lunoWithdrawal = await lunoIntegration.withdrawZAR(zarAfterFee)\n      \n      const withdrawal: DirectWithdrawal = {\n        id: crypto.randomUUID(),\n        userId,\n        amount: zarAfterFee,\n        currency: 'ZAR',\n        method: 'luno',\n        status: 'completed',\n        fee: 0, // No external fees!\n        bankAccount,\n        reference: lunoWithdrawal.reference,\n        createdAt: new Date(),\n        completedAt: new Date()\n      }\n\n      this.withdrawals.set(withdrawal.id, withdrawal)\n\n      console.log('\\n   ‚úÖ WITHDRAWAL COMPLETE!')\n      console.log(`   üí∞ Student gets: R${zarAfterFee.toFixed(2)}`)\n      console.log(`   üíµ You earned: R${internalFee.toFixed(2)}`)\n      console.log(`   üéØ External fees: R0`)\n      console.log(`   üìä Total margin: ${((internalFee / (azrAmount * exchangeRate)) * 100).toFixed(1)}%`)\n\n      this.emit('withdrawal-completed', withdrawal)\n      return withdrawal\n\n    } catch (error: any) {\n      console.error('‚ùå Luno withdrawal failed:', error.message)\n      console.log('   ‚ö†Ô∏è  Falling back to manual EFT...')\n      return this.withdrawViaManualEFT(userId, zarAfterFee, bankAccount)\n    }\n  }\n\n  /**\n   * BACKUP: Manual EFT from Capitec (5 free/month, then R6.50 each)\n   */\n  async withdrawViaManualEFT(\n    userId: string,\n    amount: number,\n    bankAccount: { accountNumber: string; bank: string; accountHolder: string }\n  ): Promise<DirectWithdrawal> {\n    console.log('\\nüí≥ MANUAL EFT WITHDRAWAL')\n    console.log(`   Amount: R${amount}`)\n    console.log(`   To: ${bankAccount.bank} ${bankAccount.accountNumber}`)\n    console.log(`   Holder: ${bankAccount.accountHolder}`)\n\n    // Calculate fee\n    const fee = this.usedFreeEFTs < this.monthlyFreeEFTs ? 0 : 6.50\n    this.usedFreeEFTs++\n\n    const withdrawal: DirectWithdrawal = {\n      id: crypto.randomUUID(),\n      userId,\n      amount,\n      currency: 'ZAR',\n      method: 'manual-eft',\n      status: 'pending',\n      fee,\n      bankAccount,\n      reference: `AZORA-EFT-${Date.now()}`,\n      createdAt: new Date()\n    }\n\n    this.withdrawals.set(withdrawal.id, withdrawal)\n\n    console.log('\\n   üìã MANUAL ACTION REQUIRED:')\n    console.log('   1. Log into Capitec app')\n    console.log('   2. Go to \"Transact\" ‚Üí \"Pay\"')\n    console.log('   3. Add beneficiary:')\n    console.log(`      Name: ${bankAccount.accountHolder}`)\n    console.log(`      Bank: ${bankAccount.bank}`)\n    console.log(`      Account: ${bankAccount.accountNumber}`)\n    console.log(`   4. Pay amount: R${amount}`)\n    console.log(`   5. Reference: ${withdrawal.reference}`)\n    console.log(`   6. Confirm with Remote PIN`)\n    \n    if (fee === 0) {\n      console.log(`\\n   ‚úÖ FREE EFT (${this.usedFreeEFTs}/${this.monthlyFreeEFTs} used this month)`)\n    } else {\n      console.log(`\\n   üíµ Fee: R${fee} (free EFTs exhausted)`)\n    }\n\n    this.emit('manual-eft-required', withdrawal)\n    return withdrawal\n  }\n\n  /**\n   * FUTURE: Capitec API direct integration (if they release it)\n   */\n  async withdrawViaCapitecAPI(\n    userId: string,\n    amount: number,\n    bankAccount: { accountNumber: string; bank: string; accountHolder: string }\n  ): Promise<DirectWithdrawal> {\n    console.log('\\nüöÄ CAPITEC API WITHDRAWAL (NOT YET AVAILABLE)')\n    console.log('   ‚ö†Ô∏è  Capitec does not currently offer public API')\n    console.log('   üí° Falling back to Luno method...')\n\n    return this.withdrawViaLuno(userId, amount / 10, bankAccount) // Convert ZAR back to AZR estimate\n  }\n\n  /**\n   * Get optimal withdrawal method\n   */\n  getOptimalMethod(): 'luno' | 'manual-eft' | 'capitec-api' {\n    // Check if Luno is configured\n    const lunoConfigured = process.env.LUNO_API_KEY_ID && process.env.LUNO_API_SECRET\n    \n    if (lunoConfigured) {\n      return 'luno' // Best: 0% fees!\n    } else if (this.usedFreeEFTs < this.monthlyFreeEFTs) {\n      return 'manual-eft' // Good: Free EFTs available\n    } else {\n      return 'manual-eft' // Okay: R6.50 fee\n    }\n  }\n\n  /**\n   * Calculate total fees\n   */\n  calculateFees(amount: number, method: 'luno' | 'manual-eft' | 'capitec-api'): number {\n    switch (method) {\n      case 'luno':\n        return 0 // Luno doesn't charge withdrawal fees!\n      case 'manual-eft':\n        return this.usedFreeEFTs < this.monthlyFreeEFTs ? 0 : 6.50\n      case 'capitec-api':\n        return 0 // Would be free if available\n      default:\n        return 0\n    }\n  }\n\n  /**\n   * Get withdrawal summary\n   */\n  getSummary() {\n    const withdrawals = Array.from(this.withdrawals.values())\n    const totalWithdrawn = withdrawals.reduce((sum, w) => sum + w.amount, 0)\n    const totalFees = withdrawals.reduce((sum, w) => sum + w.fee, 0)\n\n    return {\n      totalWithdrawals: withdrawals.length,\n      totalWithdrawn,\n      totalFees,\n      netAmount: totalWithdrawn - totalFees,\n      freeEFTsRemaining: this.monthlyFreeEFTs - this.usedFreeEFTs,\n      avgFeePercentage: ((totalFees / totalWithdrawn) * 100).toFixed(2) + '%'\n    }\n  }\n}\n\nexport const directWithdrawal = new DirectBankWithdrawal()\nexport default directWithdrawal\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}