{"version":3,"names":["cov_1f8sxrcigv","actualCoverage","axios","ResearchDataSource","arxivUrl","s","searchArxiv","query","options","b","f","maxResults","sortBy","sortOrder","searchQuery","encodeURIComponent","response","get","headers","papers","parseArxivResponse","data","error","console","xmlData","entryRegex","match","exec","entry","idMatch","titleMatch","summaryMatch","publishedMatch","categoryMatches","arxivId","split","push","id","title","trim","authors","extractAuthors","summary","published","Date","toISOString","url","categories","authorRegex","convertToKnowledgeSource","paper","type","source","content","join","metadata","date","category","verified","relevance","tags","searchAndConvert","map"],"sources":["research.ts"],"sourcesContent":["import axios from 'axios';\nimport { KnowledgeSource } from '../knowledge-ocean';\n\nexport interface ResearchPaper {\n  id: string;\n  title: string;\n  authors: string[];\n  summary: string;\n  published: string;\n  url: string;\n  categories: string[];\n}\n\nexport class ResearchDataSource {\n  private arxivUrl = 'http://export.arxiv.org/api/query';\n\n  /**\n   * Search ArXiv for research papers\n   */\n  async searchArxiv(\n    query: string,\n    options: {\n      maxResults?: number;\n      sortBy?: 'relevance' | 'lastUpdatedDate' | 'submittedDate';\n      sortOrder?: 'ascending' | 'descending';\n    } = {}\n  ): Promise<ResearchPaper[]> {\n    const { maxResults = 50, sortBy = 'relevance', sortOrder = 'descending' } = options;\n\n    try {\n      const searchQuery = `search_query=all:${encodeURIComponent(query)}&start=0&max_results=${maxResults}&sortBy=${sortBy}&sortOrder=${sortOrder}`;\n\n      const response = await axios.get(`${this.arxivUrl}?${searchQuery}`, {\n        headers: { 'User-Agent': 'Azora-Sapiens/1.0' },\n      });\n\n      // Parse XML response\n      const papers = this.parseArxivResponse(response.data);\n      return papers;\n    } catch (error) {\n      console.error('Error searching ArXiv:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Parse ArXiv XML response\n   */\n  private parseArxivResponse(xmlData: string): ResearchPaper[] {\n    const papers: ResearchPaper[] = [];\n\n    // Simple XML parsing (in production, use xml2js or similar)\n    const entryRegex = /<entry>([\\s\\S]*?)<\\/entry>/g;\n    let match;\n\n    while ((match = entryRegex.exec(xmlData)) !== null) {\n      const entry = match[1];\n\n      const idMatch = /<id>(.*?)<\\/id>/.exec(entry);\n      const titleMatch = /<title>(.*?)<\\/title>/.exec(entry);\n      const summaryMatch = /<summary>(.*?)<\\/summary>/.exec(entry);\n      const publishedMatch = /<published>(.*?)<\\/published>/.exec(entry);\n      const categoryMatches = /<category term=\"(.*?)\"/.exec(entry);\n\n      if (idMatch && titleMatch && summaryMatch) {\n        const arxivId = idMatch[1].split('/abs/')[1];\n        papers.push({\n          id: arxivId,\n          title: titleMatch[1].trim(),\n          authors: this.extractAuthors(entry),\n          summary: summaryMatch[1].trim(),\n          published: publishedMatch ? publishedMatch[1] : new Date().toISOString(),\n          url: `https://arxiv.org/abs/${arxivId}`,\n          categories: categoryMatches ? [categoryMatches[1]] : [],\n        });\n      }\n    }\n\n    return papers;\n  }\n\n  /**\n   * Extract authors from entry\n   */\n  private extractAuthors(entry: string): string[] {\n    const authors: string[] = [];\n    const authorRegex = /<author><name>(.*?)<\\/name><\\/author>/g;\n    let match;\n\n    while ((match = authorRegex.exec(entry)) !== null) {\n      authors.push(match[1]);\n    }\n\n    return authors;\n  }\n\n  /**\n   * Convert research paper to KnowledgeSource\n   */\n  convertToKnowledgeSource(paper: ResearchPaper): Omit<\n    KnowledgeSource,\n    'id' | 'embedding' | 'createdAt' | 'updatedAt'\n  > {\n    return {\n      type: 'research',\n      source: 'ArXiv',\n      url: paper.url,\n      title: paper.title,\n      content: `Title: ${paper.title}\\n\\nAuthors: ${paper.authors.join(', ')}\\n\\nAbstract: ${paper.summary}`,\n      metadata: {\n        date: paper.published,\n        category: 'research',\n        verified: true,\n        relevance: 0.85,\n        tags: ['research', 'academic', ...paper.categories],\n      },\n    };\n  }\n\n  /**\n   * Search and convert research papers\n   */\n  async searchAndConvert(\n    query: string,\n    options: {\n      maxResults?: number;\n      sortBy?: 'relevance' | 'lastUpdatedDate' | 'submittedDate';\n      sortOrder?: 'ascending' | 'descending';\n    } = {}\n  ): Promise<Omit<KnowledgeSource, 'id' | 'embedding' | 'createdAt' | 'updatedAt'>[]> {\n    const papers = await this.searchArxiv(query, options);\n    return papers.map((paper) => this.convertToKnowledgeSource(paper));\n  }\n}\n\nexport default ResearchDataSource;\n"],"mappings":"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","ignoreList":[]}