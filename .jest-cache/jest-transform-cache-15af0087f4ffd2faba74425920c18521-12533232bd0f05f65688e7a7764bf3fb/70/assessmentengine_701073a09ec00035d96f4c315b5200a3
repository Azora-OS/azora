6385c4e5d495efd8b75aab27ddd1553c
/* istanbul ignore next */
function cov_1whjlsrjbo() {
  var path = "/workspaces/azora/services/azora-sapiens/src/engines/assessment-engine.ts";
  var hash = "2c0272e4b088d9dad2cf75b3e8e82e7d3cef22f6";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-sapiens/src/engines/assessment-engine.ts",
    statementMap: {
      "0": {
        start: {
          line: 33,
          column: 4
        },
        end: {
          line: 40,
          column: 6
        }
      },
      "1": {
        start: {
          line: 44,
          column: 25
        },
        end: {
          line: 44,
          column: 96
        }
      },
      "2": {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 52,
          column: 8
        }
      },
      "3": {
        start: {
          line: 46,
          column: 52
        },
        end: {
          line: 52,
          column: 5
        }
      },
      "4": {
        start: {
          line: 56,
          column: 24
        },
        end: {
          line: 56,
          column: 82
        }
      },
      "5": {
        start: {
          line: 56,
          column: 64
        },
        end: {
          line: 56,
          column: 78
        }
      },
      "6": {
        start: {
          line: 57,
          column: 25
        },
        end: {
          line: 57,
          column: 88
        }
      },
      "7": {
        start: {
          line: 57,
          column: 52
        },
        end: {
          line: 57,
          column: 84
        }
      },
      "8": {
        start: {
          line: 58,
          column: 23
        },
        end: {
          line: 58,
          column: 57
        }
      },
      "9": {
        start: {
          line: 60,
          column: 4
        },
        end: {
          line: 66,
          column: 6
        }
      },
      "10": {
        start: {
          line: 70,
          column: 4
        },
        end: {
          line: 70,
          column: 81
        }
      },
      "11": {
        start: {
          line: 70,
          column: 22
        },
        end: {
          line: 70,
          column: 80
        }
      },
      "12": {
        start: {
          line: 71,
          column: 4
        },
        end: {
          line: 71,
          column: 71
        }
      },
      "13": {
        start: {
          line: 71,
          column: 22
        },
        end: {
          line: 71,
          column: 70
        }
      },
      "14": {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 72,
          column: 57
        }
      },
      "15": {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 78,
          column: 5
        }
      },
      "16": {
        start: {
          line: 77,
          column: 6
        },
        end: {
          line: 77,
          column: 24
        }
      },
      "17": {
        start: {
          line: 79,
          column: 25
        },
        end: {
          line: 79,
          column: 67
        }
      },
      "18": {
        start: {
          line: 79,
          column: 59
        },
        end: {
          line: 79,
          column: 66
        }
      },
      "19": {
        start: {
          line: 80,
          column: 21
        },
        end: {
          line: 80,
          column: 82
        }
      },
      "20": {
        start: {
          line: 80,
          column: 51
        },
        end: {
          line: 80,
          column: 56
        }
      },
      "21": {
        start: {
          line: 82,
          column: 4
        },
        end: {
          line: 82,
          column: 44
        }
      },
      "22": {
        start: {
          line: 82,
          column: 25
        },
        end: {
          line: 82,
          column: 43
        }
      },
      "23": {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 43
        }
      },
      "24": {
        start: {
          line: 83,
          column: 24
        },
        end: {
          line: 83,
          column: 42
        }
      },
      "25": {
        start: {
          line: 84,
          column: 4
        },
        end: {
          line: 84,
          column: 22
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 32,
            column: 2
          },
          end: {
            line: 32,
            column: 3
          }
        },
        loc: {
          start: {
            line: 32,
            column: 117
          },
          end: {
            line: 41,
            column: 3
          }
        },
        line: 32
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 43,
            column: 2
          },
          end: {
            line: 43,
            column: 3
          }
        },
        loc: {
          start: {
            line: 43,
            column: 113
          },
          end: {
            line: 53,
            column: 3
          }
        },
        line: 43
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 46,
            column: 41
          },
          end: {
            line: 46,
            column: 42
          }
        },
        loc: {
          start: {
            line: 46,
            column: 52
          },
          end: {
            line: 52,
            column: 5
          }
        },
        line: 46
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 55,
            column: 2
          },
          end: {
            line: 55,
            column: 3
          }
        },
        loc: {
          start: {
            line: 55,
            column: 79
          },
          end: {
            line: 67,
            column: 3
          }
        },
        line: 55
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 56,
            column: 52
          },
          end: {
            line: 56,
            column: 53
          }
        },
        loc: {
          start: {
            line: 56,
            column: 64
          },
          end: {
            line: 56,
            column: 78
          }
        },
        line: 56
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 57,
            column: 40
          },
          end: {
            line: 57,
            column: 41
          }
        },
        loc: {
          start: {
            line: 57,
            column: 52
          },
          end: {
            line: 57,
            column: 84
          }
        },
        line: 57
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 69,
            column: 2
          },
          end: {
            line: 69,
            column: 3
          }
        },
        loc: {
          start: {
            line: 69,
            column: 61
          },
          end: {
            line: 73,
            column: 3
          }
        },
        line: 69
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 75,
            column: 3
          }
        },
        loc: {
          start: {
            line: 75,
            column: 96
          },
          end: {
            line: 85,
            column: 3
          }
        },
        line: 75
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 79,
            column: 54
          },
          end: {
            line: 79,
            column: 55
          }
        },
        loc: {
          start: {
            line: 79,
            column: 59
          },
          end: {
            line: 79,
            column: 66
          }
        },
        line: 79
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 80,
            column: 41
          },
          end: {
            line: 80,
            column: 42
          }
        },
        loc: {
          start: {
            line: 80,
            column: 51
          },
          end: {
            line: 80,
            column: 56
          }
        },
        line: 80
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 32,
            column: 85
          },
          end: {
            line: 32,
            column: 103
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 32,
            column: 101
          },
          end: {
            line: 32,
            column: 103
          }
        }],
        line: 32
      },
      "1": {
        loc: {
          start: {
            line: 49,
            column: 12
          },
          end: {
            line: 49,
            column: 83
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 49,
            column: 26
          },
          end: {
            line: 49,
            column: 43
          }
        }, {
          start: {
            line: 49,
            column: 46
          },
          end: {
            line: 49,
            column: 83
          }
        }],
        line: 49
      },
      "2": {
        loc: {
          start: {
            line: 49,
            column: 46
          },
          end: {
            line: 49,
            column: 83
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 49,
            column: 60
          },
          end: {
            line: 49,
            column: 74
          }
        }, {
          start: {
            line: 49,
            column: 77
          },
          end: {
            line: 49,
            column: 83
          }
        }],
        line: 49
      },
      "3": {
        loc: {
          start: {
            line: 51,
            column: 14
          },
          end: {
            line: 51,
            column: 93
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 51,
            column: 47
          },
          end: {
            line: 51,
            column: 49
          }
        }, {
          start: {
            line: 51,
            column: 52
          },
          end: {
            line: 51,
            column: 93
          }
        }],
        line: 51
      },
      "4": {
        loc: {
          start: {
            line: 51,
            column: 52
          },
          end: {
            line: 51,
            column: 93
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 51,
            column: 87
          },
          end: {
            line: 51,
            column: 89
          }
        }, {
          start: {
            line: 51,
            column: 92
          },
          end: {
            line: 51,
            column: 93
          }
        }],
        line: 51
      },
      "5": {
        loc: {
          start: {
            line: 57,
            column: 59
          },
          end: {
            line: 57,
            column: 83
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 57,
            column: 71
          },
          end: {
            line: 57,
            column: 79
          }
        }, {
          start: {
            line: 57,
            column: 82
          },
          end: {
            line: 57,
            column: 83
          }
        }],
        line: 57
      },
      "6": {
        loc: {
          start: {
            line: 70,
            column: 4
          },
          end: {
            line: 70,
            column: 81
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 70,
            column: 4
          },
          end: {
            line: 70,
            column: 81
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 70
      },
      "7": {
        loc: {
          start: {
            line: 71,
            column: 4
          },
          end: {
            line: 71,
            column: 71
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 71,
            column: 4
          },
          end: {
            line: 71,
            column: 71
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 71
      },
      "8": {
        loc: {
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 78,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 78,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 76
      },
      "9": {
        loc: {
          start: {
            line: 82,
            column: 4
          },
          end: {
            line: 82,
            column: 44
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 82,
            column: 4
          },
          end: {
            line: 82,
            column: 44
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 82
      },
      "10": {
        loc: {
          start: {
            line: 83,
            column: 4
          },
          end: {
            line: 83,
            column: 43
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 83,
            column: 4
          },
          end: {
            line: 83,
            column: 43
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 83
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0
    },
    b: {
      "0": [0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "2c0272e4b088d9dad2cf75b3e8e82e7d3cef22f6"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1whjlsrjbo = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1whjlsrjbo();
class AssessmentEngine {
  createAssessment(subject, level, questionCount =
  /* istanbul ignore next */
  (cov_1whjlsrjbo().b[0][0]++, 10)) {
    /* istanbul ignore next */
    cov_1whjlsrjbo().f[0]++;
    cov_1whjlsrjbo().s[0]++;
    return {
      id: `assess_${Date.now()}`,
      subject,
      level,
      questions: this.generateQuestions(subject, level, questionCount),
      timeLimit: questionCount * 2,
      passingScore: 70
    };
  }
  generateQuestions(subject, level, count) {
    /* istanbul ignore next */
    cov_1whjlsrjbo().f[1]++;
    const difficulties =
    /* istanbul ignore next */
    (cov_1whjlsrjbo().s[1]++, {
      beginner: 'easy',
      intermediate: 'medium',
      advanced: 'hard'
    });
    /* istanbul ignore next */
    cov_1whjlsrjbo().s[2]++;
    return Array.from({
      length: count
    }, (_, i) => {
      /* istanbul ignore next */
      cov_1whjlsrjbo().f[2]++;
      cov_1whjlsrjbo().s[3]++;
      return {
        id: `q_${i + 1}`,
        question: `${subject} question ${i + 1} at ${level} level`,
        type: i % 3 === 0 ?
        /* istanbul ignore next */
        (cov_1whjlsrjbo().b[1][0]++, 'multiple_choice') :
        /* istanbul ignore next */
        (cov_1whjlsrjbo().b[1][1]++, i % 3 === 1 ?
        /* istanbul ignore next */
        (cov_1whjlsrjbo().b[2][0]++, 'short_answer') :
        /* istanbul ignore next */
        (cov_1whjlsrjbo().b[2][1]++, 'code')),
        difficulty: difficulties[level],
        points: difficulties[level] === 'hard' ?
        /* istanbul ignore next */
        (cov_1whjlsrjbo().b[3][0]++, 15) :
        /* istanbul ignore next */
        (cov_1whjlsrjbo().b[3][1]++, difficulties[level] === 'medium' ?
        /* istanbul ignore next */
        (cov_1whjlsrjbo().b[4][0]++, 10) :
        /* istanbul ignore next */
        (cov_1whjlsrjbo().b[4][1]++, 5))
      };
    });
  }
  gradeAssessment(answers, assessment) {
    /* istanbul ignore next */
    cov_1whjlsrjbo().f[3]++;
    const totalPoints =
    /* istanbul ignore next */
    (cov_1whjlsrjbo().s[4]++, assessment.questions.reduce((sum, q) => {
      /* istanbul ignore next */
      cov_1whjlsrjbo().f[4]++;
      cov_1whjlsrjbo().s[5]++;
      return sum + q.points;
    }, 0));
    const earnedPoints =
    /* istanbul ignore next */
    (cov_1whjlsrjbo().s[6]++, answers.reduce((sum, a) => {
      /* istanbul ignore next */
      cov_1whjlsrjbo().f[5]++;
      cov_1whjlsrjbo().s[7]++;
      return sum + (a.correct ?
      /* istanbul ignore next */
      (cov_1whjlsrjbo().b[5][0]++, a.points) :
      /* istanbul ignore next */
      (cov_1whjlsrjbo().b[5][1]++, 0));
    }, 0));
    const percentage =
    /* istanbul ignore next */
    (cov_1whjlsrjbo().s[8]++, earnedPoints / totalPoints * 100);
    /* istanbul ignore next */
    cov_1whjlsrjbo().s[9]++;
    return {
      score: percentage,
      passed: percentage >= assessment.passingScore,
      earnedPoints,
      totalPoints,
      feedback: this.generateFeedback(percentage, answers)
    };
  }
  generateFeedback(score, answers) {
    /* istanbul ignore next */
    cov_1whjlsrjbo().f[6]++;
    cov_1whjlsrjbo().s[10]++;
    if (score >= 90) {
      /* istanbul ignore next */
      cov_1whjlsrjbo().b[6][0]++;
      cov_1whjlsrjbo().s[11]++;
      return 'Excellent work! You have mastered this material.';
    } else
    /* istanbul ignore next */
    {
      cov_1whjlsrjbo().b[6][1]++;
    }
    cov_1whjlsrjbo().s[12]++;
    if (score >= 70) {
      /* istanbul ignore next */
      cov_1whjlsrjbo().b[7][0]++;
      cov_1whjlsrjbo().s[13]++;
      return 'Good job! Review the areas you missed.';
    } else
    /* istanbul ignore next */
    {
      cov_1whjlsrjbo().b[7][1]++;
    }
    cov_1whjlsrjbo().s[14]++;
    return 'Keep practicing. Focus on the fundamentals.';
  }
  adaptiveDifficulty(studentHistory) {
    /* istanbul ignore next */
    cov_1whjlsrjbo().f[7]++;
    cov_1whjlsrjbo().s[15]++;
    if (studentHistory.length < 5) {
      /* istanbul ignore next */
      cov_1whjlsrjbo().b[8][0]++;
      cov_1whjlsrjbo().s[16]++;
      return 'maintain';
    } else
    /* istanbul ignore next */
    {
      cov_1whjlsrjbo().b[8][1]++;
    }
    const recentScores =
    /* istanbul ignore next */
    (cov_1whjlsrjbo().s[17]++, studentHistory.slice(-5).map(h => {
      /* istanbul ignore next */
      cov_1whjlsrjbo().f[8]++;
      cov_1whjlsrjbo().s[18]++;
      return h.score;
    }));
    const avgScore =
    /* istanbul ignore next */
    (cov_1whjlsrjbo().s[19]++, recentScores.reduce((a, b) => {
      /* istanbul ignore next */
      cov_1whjlsrjbo().f[9]++;
      cov_1whjlsrjbo().s[20]++;
      return a + b;
    }, 0) / recentScores.length);
    /* istanbul ignore next */
    cov_1whjlsrjbo().s[21]++;
    if (avgScore >= 85) {
      /* istanbul ignore next */
      cov_1whjlsrjbo().b[9][0]++;
      cov_1whjlsrjbo().s[22]++;
      return 'increase';
    } else
    /* istanbul ignore next */
    {
      cov_1whjlsrjbo().b[9][1]++;
    }
    cov_1whjlsrjbo().s[23]++;
    if (avgScore < 60) {
      /* istanbul ignore next */
      cov_1whjlsrjbo().b[10][0]++;
      cov_1whjlsrjbo().s[24]++;
      return 'decrease';
    } else
    /* istanbul ignore next */
    {
      cov_1whjlsrjbo().b[10][1]++;
    }
    cov_1whjlsrjbo().s[25]++;
    return 'maintain';
  }
}
export default new AssessmentEngine();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXdoamxzcmpibyIsImFjdHVhbENvdmVyYWdlIiwiQXNzZXNzbWVudEVuZ2luZSIsImNyZWF0ZUFzc2Vzc21lbnQiLCJzdWJqZWN0IiwibGV2ZWwiLCJxdWVzdGlvbkNvdW50IiwiYiIsImYiLCJzIiwiaWQiLCJEYXRlIiwibm93IiwicXVlc3Rpb25zIiwiZ2VuZXJhdGVRdWVzdGlvbnMiLCJ0aW1lTGltaXQiLCJwYXNzaW5nU2NvcmUiLCJjb3VudCIsImRpZmZpY3VsdGllcyIsImJlZ2lubmVyIiwiaW50ZXJtZWRpYXRlIiwiYWR2YW5jZWQiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJfIiwiaSIsInF1ZXN0aW9uIiwidHlwZSIsImRpZmZpY3VsdHkiLCJwb2ludHMiLCJncmFkZUFzc2Vzc21lbnQiLCJhbnN3ZXJzIiwiYXNzZXNzbWVudCIsInRvdGFsUG9pbnRzIiwicmVkdWNlIiwic3VtIiwicSIsImVhcm5lZFBvaW50cyIsImEiLCJjb3JyZWN0IiwicGVyY2VudGFnZSIsInNjb3JlIiwicGFzc2VkIiwiZmVlZGJhY2siLCJnZW5lcmF0ZUZlZWRiYWNrIiwiYWRhcHRpdmVEaWZmaWN1bHR5Iiwic3R1ZGVudEhpc3RvcnkiLCJyZWNlbnRTY29yZXMiLCJzbGljZSIsIm1hcCIsImgiLCJhdmdTY29yZSJdLCJzb3VyY2VzIjpbImFzc2Vzc21lbnQtZW5naW5lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImludGVyZmFjZSBRdWVzdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIHR5cGU6ICdtdWx0aXBsZV9jaG9pY2UnIHwgJ3Nob3J0X2Fuc3dlcicgfCAnY29kZSc7XG4gIGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdtZWRpdW0nIHwgJ2hhcmQnO1xuICBwb2ludHM6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEFzc2Vzc21lbnQge1xuICBpZDogc3RyaW5nO1xuICBzdWJqZWN0OiBzdHJpbmc7XG4gIGxldmVsOiAnYmVnaW5uZXInIHwgJ2ludGVybWVkaWF0ZScgfCAnYWR2YW5jZWQnO1xuICBxdWVzdGlvbnM6IFF1ZXN0aW9uW107XG4gIHRpbWVMaW1pdDogbnVtYmVyOyAvLyBpbiBtaW51dGVzXG4gIHBhc3NpbmdTY29yZTogbnVtYmVyOyAvLyBwZXJjZW50YWdlXG59XG5cbmludGVyZmFjZSBBbnN3ZXIge1xuICBxdWVzdGlvbklkOiBzdHJpbmc7XG4gIGNvcnJlY3Q6IGJvb2xlYW47XG4gIHBvaW50czogbnVtYmVyO1xufVxuaW50ZXJmYWNlIEdyYWRlZEFzc2Vzc21lbnQge1xuICBzY29yZTogbnVtYmVyO1xuICBwYXNzZWQ6IGJvb2xlYW47XG4gIGVhcm5lZFBvaW50czogbnVtYmVyO1xuICB0b3RhbFBvaW50czogbnVtYmVyO1xuICBmZWVkYmFjazogc3RyaW5nO1xufVxuXG5jbGFzcyBBc3Nlc3NtZW50RW5naW5lIHtcbiAgY3JlYXRlQXNzZXNzbWVudChzdWJqZWN0OiBzdHJpbmcsIGxldmVsOiAnYmVnaW5uZXInIHwgJ2ludGVybWVkaWF0ZScgfCAnYWR2YW5jZWQnLCBxdWVzdGlvbkNvdW50ID0gMTApOiBBc3Nlc3NtZW50IHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGBhc3Nlc3NfJHtEYXRlLm5vdygpfWAsXG4gICAgICBzdWJqZWN0LFxuICAgICAgbGV2ZWwsXG4gICAgICBxdWVzdGlvbnM6IHRoaXMuZ2VuZXJhdGVRdWVzdGlvbnMoc3ViamVjdCwgbGV2ZWwsIHF1ZXN0aW9uQ291bnQpLFxuICAgICAgdGltZUxpbWl0OiBxdWVzdGlvbkNvdW50ICogMixcbiAgICAgIHBhc3NpbmdTY29yZTogNzAsXG4gICAgfTtcbiAgfVxuXG4gIGdlbmVyYXRlUXVlc3Rpb25zKHN1YmplY3Q6IHN0cmluZywgbGV2ZWw6ICdiZWdpbm5lcicgfCAnaW50ZXJtZWRpYXRlJyB8ICdhZHZhbmNlZCcsIGNvdW50OiBudW1iZXIpOiBRdWVzdGlvbltdIHtcbiAgICBjb25zdCBkaWZmaWN1bHRpZXMgPSB7IGJlZ2lubmVyOiAnZWFzeScsIGludGVybWVkaWF0ZTogJ21lZGl1bScsIGFkdmFuY2VkOiAnaGFyZCcgfSBhcyBjb25zdDtcblxuICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjb3VudCB9LCAoXywgaSkgPT4gKHtcbiAgICAgIGlkOiBgcV8ke2kgKyAxfWAsXG4gICAgICBxdWVzdGlvbjogYCR7c3ViamVjdH0gcXVlc3Rpb24gJHtpICsgMX0gYXQgJHtsZXZlbH0gbGV2ZWxgLFxuICAgICAgdHlwZTogaSAlIDMgPT09IDAgPyAnbXVsdGlwbGVfY2hvaWNlJyA6IGkgJSAzID09PSAxID8gJ3Nob3J0X2Fuc3dlcicgOiAnY29kZScsXG4gICAgICBkaWZmaWN1bHR5OiBkaWZmaWN1bHRpZXNbbGV2ZWxdLFxuICAgICAgcG9pbnRzOiBkaWZmaWN1bHRpZXNbbGV2ZWxdID09PSAnaGFyZCcgPyAxNSA6IGRpZmZpY3VsdGllc1tsZXZlbF0gPT09ICdtZWRpdW0nID8gMTAgOiA1LFxuICAgIH0pKTtcbiAgfVxuXG4gIGdyYWRlQXNzZXNzbWVudChhbnN3ZXJzOiBBbnN3ZXJbXSwgYXNzZXNzbWVudDogQXNzZXNzbWVudCk6IEdyYWRlZEFzc2Vzc21lbnQge1xuICAgIGNvbnN0IHRvdGFsUG9pbnRzID0gYXNzZXNzbWVudC5xdWVzdGlvbnMucmVkdWNlKChzdW0sIHEpID0+IHN1bSArIHEucG9pbnRzLCAwKTtcbiAgICBjb25zdCBlYXJuZWRQb2ludHMgPSBhbnN3ZXJzLnJlZHVjZSgoc3VtLCBhKSA9PiBzdW0gKyAoYS5jb3JyZWN0ID8gYS5wb2ludHMgOiAwKSwgMCk7XG4gICAgY29uc3QgcGVyY2VudGFnZSA9IChlYXJuZWRQb2ludHMgLyB0b3RhbFBvaW50cykgKiAxMDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2NvcmU6IHBlcmNlbnRhZ2UsXG4gICAgICBwYXNzZWQ6IHBlcmNlbnRhZ2UgPj0gYXNzZXNzbWVudC5wYXNzaW5nU2NvcmUsXG4gICAgICBlYXJuZWRQb2ludHMsXG4gICAgICB0b3RhbFBvaW50cyxcbiAgICAgIGZlZWRiYWNrOiB0aGlzLmdlbmVyYXRlRmVlZGJhY2socGVyY2VudGFnZSwgYW5zd2VycyksXG4gICAgfTtcbiAgfVxuXG4gIGdlbmVyYXRlRmVlZGJhY2soc2NvcmU6IG51bWJlciwgYW5zd2VyczogQW5zd2VyW10pOiBzdHJpbmcge1xuICAgIGlmIChzY29yZSA+PSA5MCkge3JldHVybiAnRXhjZWxsZW50IHdvcmshIFlvdSBoYXZlIG1hc3RlcmVkIHRoaXMgbWF0ZXJpYWwuJzt9XG4gICAgaWYgKHNjb3JlID49IDcwKSB7cmV0dXJuICdHb29kIGpvYiEgUmV2aWV3IHRoZSBhcmVhcyB5b3UgbWlzc2VkLic7fVxuICAgIHJldHVybiAnS2VlcCBwcmFjdGljaW5nLiBGb2N1cyBvbiB0aGUgZnVuZGFtZW50YWxzLic7XG4gIH1cblxuICBhZGFwdGl2ZURpZmZpY3VsdHkoc3R1ZGVudEhpc3Rvcnk6IHsgc2NvcmU6IG51bWJlciB9W10pOiAnaW5jcmVhc2UnIHwgJ2RlY3JlYXNlJyB8ICdtYWludGFpbicge1xuICAgIGlmIChzdHVkZW50SGlzdG9yeS5sZW5ndGggPCA1KSB7XG4gICAgICByZXR1cm4gJ21haW50YWluJztcbiAgICB9XG4gICAgY29uc3QgcmVjZW50U2NvcmVzID0gc3R1ZGVudEhpc3Rvcnkuc2xpY2UoLTUpLm1hcChoID0+IGguc2NvcmUpO1xuICAgIGNvbnN0IGF2Z1Njb3JlID0gcmVjZW50U2NvcmVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gcmVjZW50U2NvcmVzLmxlbmd0aDtcblxuICAgIGlmIChhdmdTY29yZSA+PSA4NSkge3JldHVybiAnaW5jcmVhc2UnO31cbiAgICBpZiAoYXZnU2NvcmUgPCA2MCkge3JldHVybiAnZGVjcmVhc2UnO31cbiAgICByZXR1cm4gJ21haW50YWluJztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgQXNzZXNzbWVudEVuZ2luZSgpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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