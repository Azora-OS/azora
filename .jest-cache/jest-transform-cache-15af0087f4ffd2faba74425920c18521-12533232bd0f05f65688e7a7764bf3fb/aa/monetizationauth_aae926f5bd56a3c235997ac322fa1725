55ce4f5ae095ccd09916bba337acd14d
/* istanbul ignore next */
function cov_1j5x0gh57v() {
  var path = "/workspaces/azora/services/shared/middleware/monetization-auth.ts";
  var hash = "19c5edf0d34582165ac0dc43ffd237b85a39cee1";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/shared/middleware/monetization-auth.ts",
    statementMap: {
      "0": {
        start: {
          line: 26,
          column: 17
        },
        end: {
          line: 26,
          column: 49
        }
      },
      "1": {
        start: {
          line: 27,
          column: 2
        },
        end: {
          line: 32,
          column: 3
        }
      },
      "2": {
        start: {
          line: 28,
          column: 4
        },
        end: {
          line: 31,
          column: 6
        }
      },
      "3": {
        start: {
          line: 35,
          column: 21
        },
        end: {
          line: 35,
          column: 57
        }
      },
      "4": {
        start: {
          line: 36,
          column: 2
        },
        end: {
          line: 50,
          column: 3
        }
      },
      "5": {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 49,
          column: 5
        }
      },
      "6": {
        start: {
          line: 38,
          column: 20
        },
        end: {
          line: 38,
          column: 43
        }
      },
      "7": {
        start: {
          line: 40,
          column: 22
        },
        end: {
          line: 40,
          column: 73
        }
      },
      "8": {
        start: {
          line: 41,
          column: 6
        },
        end: {
          line: 46,
          column: 8
        }
      },
      "9": {
        start: {
          line: 48,
          column: 6
        },
        end: {
          line: 48,
          column: 62
        }
      },
      "10": {
        start: {
          line: 53,
          column: 18
        },
        end: {
          line: 53,
          column: 33
        }
      },
      "11": {
        start: {
          line: 54,
          column: 16
        },
        end: {
          line: 54,
          column: 48
        }
      },
      "12": {
        start: {
          line: 55,
          column: 2
        },
        end: {
          line: 67,
          column: 3
        }
      },
      "13": {
        start: {
          line: 56,
          column: 4
        },
        end: {
          line: 66,
          column: 5
        }
      },
      "14": {
        start: {
          line: 57,
          column: 22
        },
        end: {
          line: 57,
          column: 73
        }
      },
      "15": {
        start: {
          line: 58,
          column: 6
        },
        end: {
          line: 63,
          column: 8
        }
      },
      "16": {
        start: {
          line: 65,
          column: 6
        },
        end: {
          line: 65,
          column: 61
        }
      },
      "17": {
        start: {
          line: 69,
          column: 2
        },
        end: {
          line: 72,
          column: 4
        }
      },
      "18": {
        start: {
          line: 80,
          column: 18
        },
        end: {
          line: 80,
          column: 45
        }
      },
      "19": {
        start: {
          line: 81,
          column: 2
        },
        end: {
          line: 87,
          column: 3
        }
      },
      "20": {
        start: {
          line: 82,
          column: 4
        },
        end: {
          line: 85,
          column: 7
        }
      },
      "21": {
        start: {
          line: 86,
          column: 4
        },
        end: {
          line: 86,
          column: 16
        }
      },
      "22": {
        start: {
          line: 88,
          column: 2
        },
        end: {
          line: 88,
          column: 17
        }
      },
      "23": {
        start: {
          line: 96,
          column: 2
        },
        end: {
          line: 98,
          column: 3
        }
      },
      "24": {
        start: {
          line: 97,
          column: 4
        },
        end: {
          line: 97,
          column: 17
        }
      },
      "25": {
        start: {
          line: 100,
          column: 2
        },
        end: {
          line: 107,
          column: 3
        }
      },
      "26": {
        start: {
          line: 101,
          column: 4
        },
        end: {
          line: 105,
          column: 7
        }
      },
      "27": {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 106,
          column: 17
        }
      },
      "28": {
        start: {
          line: 109,
          column: 2
        },
        end: {
          line: 109,
          column: 14
        }
      },
      "29": {
        start: {
          line: 120,
          column: 2
        },
        end: {
          line: 122,
          column: 3
        }
      },
      "30": {
        start: {
          line: 121,
          column: 4
        },
        end: {
          line: 121,
          column: 17
        }
      },
      "31": {
        start: {
          line: 124,
          column: 2
        },
        end: {
          line: 130,
          column: 3
        }
      },
      "32": {
        start: {
          line: 125,
          column: 4
        },
        end: {
          line: 128,
          column: 7
        }
      },
      "33": {
        start: {
          line: 129,
          column: 4
        },
        end: {
          line: 129,
          column: 17
        }
      },
      "34": {
        start: {
          line: 132,
          column: 2
        },
        end: {
          line: 132,
          column: 14
        }
      },
      "35": {
        start: {
          line: 144,
          column: 2
        },
        end: {
          line: 144,
          column: 71
        }
      },
      "36": {
        start: {
          line: 145,
          column: 2
        },
        end: {
          line: 147,
          column: 3
        }
      },
      "37": {
        start: {
          line: 146,
          column: 4
        },
        end: {
          line: 146,
          column: 59
        }
      },
      "38": {
        start: {
          line: 148,
          column: 2
        },
        end: {
          line: 150,
          column: 3
        }
      },
      "39": {
        start: {
          line: 149,
          column: 4
        },
        end: {
          line: 149,
          column: 61
        }
      }
    },
    fnMap: {
      "0": {
        name: "extractUserContext",
        decl: {
          start: {
            line: 24,
            column: 16
          },
          end: {
            line: 24,
            column: 34
          }
        },
        loc: {
          start: {
            line: 24,
            column: 70
          },
          end: {
            line: 73,
            column: 1
          }
        },
        line: 24
      },
      "1": {
        name: "requireAuth",
        decl: {
          start: {
            line: 79,
            column: 16
          },
          end: {
            line: 79,
            column: 27
          }
        },
        loc: {
          start: {
            line: 79,
            column: 70
          },
          end: {
            line: 89,
            column: 1
          }
        },
        line: 79
      },
      "2": {
        name: "requireRole",
        decl: {
          start: {
            line: 95,
            column: 16
          },
          end: {
            line: 95,
            column: 27
          }
        },
        loc: {
          start: {
            line: 95,
            column: 83
          },
          end: {
            line: 110,
            column: 1
          }
        },
        line: 95
      },
      "3": {
        name: "verifyResourceOwnership",
        decl: {
          start: {
            line: 116,
            column: 16
          },
          end: {
            line: 116,
            column: 39
          }
        },
        loc: {
          start: {
            line: 119,
            column: 11
          },
          end: {
            line: 133,
            column: 1
          }
        },
        line: 119
      },
      "4": {
        name: "addUserContextToRequest",
        decl: {
          start: {
            line: 139,
            column: 16
          },
          end: {
            line: 139,
            column: 39
          }
        },
        loc: {
          start: {
            line: 142,
            column: 8
          },
          end: {
            line: 151,
            column: 1
          }
        },
        line: 142
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 32,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 32,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 27
      },
      "1": {
        loc: {
          start: {
            line: 36,
            column: 2
          },
          end: {
            line: 50,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 36,
            column: 2
          },
          end: {
            line: 50,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 36
      },
      "2": {
        loc: {
          start: {
            line: 36,
            column: 6
          },
          end: {
            line: 36,
            column: 52
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 36,
            column: 6
          },
          end: {
            line: 36,
            column: 16
          }
        }, {
          start: {
            line: 36,
            column: 20
          },
          end: {
            line: 36,
            column: 52
          }
        }],
        line: 36
      },
      "3": {
        loc: {
          start: {
            line: 42,
            column: 16
          },
          end: {
            line: 42,
            column: 45
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 42,
            column: 16
          },
          end: {
            line: 42,
            column: 30
          }
        }, {
          start: {
            line: 42,
            column: 34
          },
          end: {
            line: 42,
            column: 45
          }
        }],
        line: 42
      },
      "4": {
        loc: {
          start: {
            line: 55,
            column: 2
          },
          end: {
            line: 67,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 55,
            column: 2
          },
          end: {
            line: 67,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 55
      },
      "5": {
        loc: {
          start: {
            line: 59,
            column: 16
          },
          end: {
            line: 59,
            column: 45
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 59,
            column: 16
          },
          end: {
            line: 59,
            column: 30
          }
        }, {
          start: {
            line: 59,
            column: 34
          },
          end: {
            line: 59,
            column: 45
          }
        }],
        line: 59
      },
      "6": {
        loc: {
          start: {
            line: 81,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 81,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 81
      },
      "7": {
        loc: {
          start: {
            line: 96,
            column: 2
          },
          end: {
            line: 98,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 96,
            column: 2
          },
          end: {
            line: 98,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 96
      },
      "8": {
        loc: {
          start: {
            line: 100,
            column: 2
          },
          end: {
            line: 107,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 100,
            column: 2
          },
          end: {
            line: 107,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 100
      },
      "9": {
        loc: {
          start: {
            line: 100,
            column: 6
          },
          end: {
            line: 100,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 100,
            column: 6
          },
          end: {
            line: 100,
            column: 19
          }
        }, {
          start: {
            line: 100,
            column: 23
          },
          end: {
            line: 100,
            column: 59
          }
        }],
        line: 100
      },
      "10": {
        loc: {
          start: {
            line: 120,
            column: 2
          },
          end: {
            line: 122,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 120,
            column: 2
          },
          end: {
            line: 122,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 120
      },
      "11": {
        loc: {
          start: {
            line: 124,
            column: 2
          },
          end: {
            line: 130,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 124,
            column: 2
          },
          end: {
            line: 130,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 124
      },
      "12": {
        loc: {
          start: {
            line: 145,
            column: 2
          },
          end: {
            line: 147,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 145,
            column: 2
          },
          end: {
            line: 147,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 145
      },
      "13": {
        loc: {
          start: {
            line: 148,
            column: 2
          },
          end: {
            line: 150,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 148,
            column: 2
          },
          end: {
            line: 150,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 148
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "19c5edf0d34582165ac0dc43ffd237b85a39cee1"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1j5x0gh57v = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1j5x0gh57v();
/**
 * Monetization Auth Middleware
 * Provides standardized authentication for all monetization endpoints
 * Integrates with existing JWT auth system
 */

import { logger } from '../logging';
/**
 * Extract user context from request
 * Supports multiple auth methods:
 * 1. x-user-id header (for internal services)
 * 2. Authorization Bearer token (for external clients)
 * 3. JWT in cookies (for web clients)
 */
export function extractUserContext(request) {
  /* istanbul ignore next */
  cov_1j5x0gh57v().f[0]++;
  // Method 1: x-user-id header (internal services)
  const userId =
  /* istanbul ignore next */
  (cov_1j5x0gh57v().s[0]++, request.headers.get('x-user-id'));
  /* istanbul ignore next */
  cov_1j5x0gh57v().s[1]++;
  if (userId) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[0][0]++;
    cov_1j5x0gh57v().s[2]++;
    return {
      userId,
      authenticated: true
    };
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[0][1]++;
  }

  // Method 2: Authorization Bearer token
  const authHeader =
  /* istanbul ignore next */
  (cov_1j5x0gh57v().s[3]++, request.headers.get('authorization'));
  /* istanbul ignore next */
  cov_1j5x0gh57v().s[4]++;
  if (
  /* istanbul ignore next */
  (cov_1j5x0gh57v().b[2][0]++, authHeader) &&
  /* istanbul ignore next */
  (cov_1j5x0gh57v().b[2][1]++, authHeader.startsWith('Bearer '))) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[1][0]++;
    cov_1j5x0gh57v().s[5]++;
    try {
      const token =
      /* istanbul ignore next */
      (cov_1j5x0gh57v().s[6]++, authHeader.substring(7));
      // In production, verify JWT signature
      const decoded =
      /* istanbul ignore next */
      (cov_1j5x0gh57v().s[7]++, JSON.parse(Buffer.from(token, 'base64').toString()));
      /* istanbul ignore next */
      cov_1j5x0gh57v().s[8]++;
      return {
        userId:
        /* istanbul ignore next */
        (cov_1j5x0gh57v().b[3][0]++, decoded.userId) ||
        /* istanbul ignore next */
        (cov_1j5x0gh57v().b[3][1]++, decoded.sub),
        role: decoded.role,
        email: decoded.email,
        authenticated: true
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1j5x0gh57v().s[9]++;
      logger.warn('Failed to decode Bearer token', {
        error
      });
    }
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[1][1]++;
  }

  // Method 3: JWT in cookies
  const cookies =
  /* istanbul ignore next */
  (cov_1j5x0gh57v().s[10]++, request.cookies);
  const token =
  /* istanbul ignore next */
  (cov_1j5x0gh57v().s[11]++, cookies.get('auth_token')?.value);
  /* istanbul ignore next */
  cov_1j5x0gh57v().s[12]++;
  if (token) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[4][0]++;
    cov_1j5x0gh57v().s[13]++;
    try {
      const decoded =
      /* istanbul ignore next */
      (cov_1j5x0gh57v().s[14]++, JSON.parse(Buffer.from(token, 'base64').toString()));
      /* istanbul ignore next */
      cov_1j5x0gh57v().s[15]++;
      return {
        userId:
        /* istanbul ignore next */
        (cov_1j5x0gh57v().b[5][0]++, decoded.userId) ||
        /* istanbul ignore next */
        (cov_1j5x0gh57v().b[5][1]++, decoded.sub),
        role: decoded.role,
        email: decoded.email,
        authenticated: true
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_1j5x0gh57v().s[16]++;
      logger.warn('Failed to decode auth cookie', {
        error
      });
    }
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[4][1]++;
  }
  cov_1j5x0gh57v().s[17]++;
  return {
    userId: '',
    authenticated: false
  };
}

/**
 * Require authentication for endpoint
 * Returns 401 if not authenticated
 */
export function requireAuth(request) {
  /* istanbul ignore next */
  cov_1j5x0gh57v().f[1]++;
  const context =
  /* istanbul ignore next */
  (cov_1j5x0gh57v().s[18]++, extractUserContext(request));
  /* istanbul ignore next */
  cov_1j5x0gh57v().s[19]++;
  if (!context.authenticated) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[6][0]++;
    cov_1j5x0gh57v().s[20]++;
    logger.warn('Unauthorized request', {
      path: request.nextUrl.pathname,
      method: request.method
    });
    /* istanbul ignore next */
    cov_1j5x0gh57v().s[21]++;
    return null;
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[6][1]++;
  }
  cov_1j5x0gh57v().s[22]++;
  return context;
}

/**
 * Require specific role for endpoint
 * Returns 403 if user doesn't have required role
 */
export function requireRole(context, allowedRoles) {
  /* istanbul ignore next */
  cov_1j5x0gh57v().f[2]++;
  cov_1j5x0gh57v().s[23]++;
  if (!context.authenticated) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[7][0]++;
    cov_1j5x0gh57v().s[24]++;
    return false;
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[7][1]++;
  }
  cov_1j5x0gh57v().s[25]++;
  if (
  /* istanbul ignore next */
  (cov_1j5x0gh57v().b[9][0]++, !context.role) ||
  /* istanbul ignore next */
  (cov_1j5x0gh57v().b[9][1]++, !allowedRoles.includes(context.role))) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[8][0]++;
    cov_1j5x0gh57v().s[26]++;
    logger.warn('Insufficient permissions', {
      userId: context.userId,
      userRole: context.role,
      requiredRoles: allowedRoles
    });
    /* istanbul ignore next */
    cov_1j5x0gh57v().s[27]++;
    return false;
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[8][1]++;
  }
  cov_1j5x0gh57v().s[28]++;
  return true;
}

/**
 * Verify user owns resource
 * Used for endpoints that access user-specific data
 */
export function verifyResourceOwnership(context, resourceUserId) {
  /* istanbul ignore next */
  cov_1j5x0gh57v().f[3]++;
  cov_1j5x0gh57v().s[29]++;
  if (!context.authenticated) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[10][0]++;
    cov_1j5x0gh57v().s[30]++;
    return false;
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[10][1]++;
  }
  cov_1j5x0gh57v().s[31]++;
  if (context.userId !== resourceUserId) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[11][0]++;
    cov_1j5x0gh57v().s[32]++;
    logger.warn('Unauthorized resource access', {
      userId: context.userId,
      resourceUserId
    });
    /* istanbul ignore next */
    cov_1j5x0gh57v().s[33]++;
    return false;
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[11][1]++;
  }
  cov_1j5x0gh57v().s[34]++;
  return true;
}

/**
 * Add user context to request for downstream services
 * Useful for logging and audit trails
 */
export function addUserContextToRequest(request, context) {
  /* istanbul ignore next */
  cov_1j5x0gh57v().f[4]++;
  cov_1j5x0gh57v().s[35]++;
  // Store in request headers for downstream services
  request.headers['x-authenticated-user-id'] = context.userId;
  /* istanbul ignore next */
  cov_1j5x0gh57v().s[36]++;
  if (context.role) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[12][0]++;
    cov_1j5x0gh57v().s[37]++;
    request.headers['x-user-role'] = context.role;
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[12][1]++;
  }
  cov_1j5x0gh57v().s[38]++;
  if (context.email) {
    /* istanbul ignore next */
    cov_1j5x0gh57v().b[13][0]++;
    cov_1j5x0gh57v().s[39]++;
    request.headers['x-user-email'] = context.email;
  } else
  /* istanbul ignore next */
  {
    cov_1j5x0gh57v().b[13][1]++;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWo1eDBnaDU3diIsImFjdHVhbENvdmVyYWdlIiwibG9nZ2VyIiwiZXh0cmFjdFVzZXJDb250ZXh0IiwicmVxdWVzdCIsImYiLCJ1c2VySWQiLCJzIiwiaGVhZGVycyIsImdldCIsImIiLCJhdXRoZW50aWNhdGVkIiwiYXV0aEhlYWRlciIsInN0YXJ0c1dpdGgiLCJ0b2tlbiIsInN1YnN0cmluZyIsImRlY29kZWQiLCJKU09OIiwicGFyc2UiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJzdWIiLCJyb2xlIiwiZW1haWwiLCJlcnJvciIsIndhcm4iLCJjb29raWVzIiwidmFsdWUiLCJyZXF1aXJlQXV0aCIsImNvbnRleHQiLCJwYXRoIiwibmV4dFVybCIsInBhdGhuYW1lIiwibWV0aG9kIiwicmVxdWlyZVJvbGUiLCJhbGxvd2VkUm9sZXMiLCJpbmNsdWRlcyIsInVzZXJSb2xlIiwicmVxdWlyZWRSb2xlcyIsInZlcmlmeVJlc291cmNlT3duZXJzaGlwIiwicmVzb3VyY2VVc2VySWQiLCJhZGRVc2VyQ29udGV4dFRvUmVxdWVzdCJdLCJzb3VyY2VzIjpbIm1vbmV0aXphdGlvbi1hdXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTW9uZXRpemF0aW9uIEF1dGggTWlkZGxld2FyZVxuICogUHJvdmlkZXMgc3RhbmRhcmRpemVkIGF1dGhlbnRpY2F0aW9uIGZvciBhbGwgbW9uZXRpemF0aW9uIGVuZHBvaW50c1xuICogSW50ZWdyYXRlcyB3aXRoIGV4aXN0aW5nIEpXVCBhdXRoIHN5c3RlbVxuICovXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2luZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aENvbnRleHQge1xuICB1c2VySWQ6IHN0cmluZztcbiAgcm9sZT86IHN0cmluZztcbiAgZW1haWw/OiBzdHJpbmc7XG4gIGF1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICogRXh0cmFjdCB1c2VyIGNvbnRleHQgZnJvbSByZXF1ZXN0XG4gKiBTdXBwb3J0cyBtdWx0aXBsZSBhdXRoIG1ldGhvZHM6XG4gKiAxLiB4LXVzZXItaWQgaGVhZGVyIChmb3IgaW50ZXJuYWwgc2VydmljZXMpXG4gKiAyLiBBdXRob3JpemF0aW9uIEJlYXJlciB0b2tlbiAoZm9yIGV4dGVybmFsIGNsaWVudHMpXG4gKiAzLiBKV1QgaW4gY29va2llcyAoZm9yIHdlYiBjbGllbnRzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFVzZXJDb250ZXh0KHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogQXV0aENvbnRleHQge1xuICAvLyBNZXRob2QgMTogeC11c2VyLWlkIGhlYWRlciAoaW50ZXJuYWwgc2VydmljZXMpXG4gIGNvbnN0IHVzZXJJZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtdXNlci1pZCcpO1xuICBpZiAodXNlcklkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgfTtcbiAgfVxuXG4gIC8vIE1ldGhvZCAyOiBBdXRob3JpemF0aW9uIEJlYXJlciB0b2tlblxuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpO1xuICBpZiAoYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xuICAgICAgLy8gSW4gcHJvZHVjdGlvbiwgdmVyaWZ5IEpXVCBzaWduYXR1cmVcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBKU09OLnBhcnNlKEJ1ZmZlci5mcm9tKHRva2VuLCAnYmFzZTY0JykudG9TdHJpbmcoKSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VySWQ6IGRlY29kZWQudXNlcklkIHx8IGRlY29kZWQuc3ViLFxuICAgICAgICByb2xlOiBkZWNvZGVkLnJvbGUsXG4gICAgICAgIGVtYWlsOiBkZWNvZGVkLmVtYWlsLFxuICAgICAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBkZWNvZGUgQmVhcmVyIHRva2VuJywgeyBlcnJvciB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBNZXRob2QgMzogSldUIGluIGNvb2tpZXNcbiAgY29uc3QgY29va2llcyA9IHJlcXVlc3QuY29va2llcztcbiAgY29uc3QgdG9rZW4gPSBjb29raWVzLmdldCgnYXV0aF90b2tlbicpPy52YWx1ZTtcbiAgaWYgKHRva2VuKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBKU09OLnBhcnNlKEJ1ZmZlci5mcm9tKHRva2VuLCAnYmFzZTY0JykudG9TdHJpbmcoKSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VySWQ6IGRlY29kZWQudXNlcklkIHx8IGRlY29kZWQuc3ViLFxuICAgICAgICByb2xlOiBkZWNvZGVkLnJvbGUsXG4gICAgICAgIGVtYWlsOiBkZWNvZGVkLmVtYWlsLFxuICAgICAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBkZWNvZGUgYXV0aCBjb29raWUnLCB7IGVycm9yIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdXNlcklkOiAnJyxcbiAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uIGZvciBlbmRwb2ludFxuICogUmV0dXJucyA0MDEgaWYgbm90IGF1dGhlbnRpY2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVBdXRoKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogQXV0aENvbnRleHQgfCBudWxsIHtcbiAgY29uc3QgY29udGV4dCA9IGV4dHJhY3RVc2VyQ29udGV4dChyZXF1ZXN0KTtcbiAgaWYgKCFjb250ZXh0LmF1dGhlbnRpY2F0ZWQpIHtcbiAgICBsb2dnZXIud2FybignVW5hdXRob3JpemVkIHJlcXVlc3QnLCB7XG4gICAgICBwYXRoOiByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUsXG4gICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuICAgIH0pO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufVxuXG4vKipcbiAqIFJlcXVpcmUgc3BlY2lmaWMgcm9sZSBmb3IgZW5kcG9pbnRcbiAqIFJldHVybnMgNDAzIGlmIHVzZXIgZG9lc24ndCBoYXZlIHJlcXVpcmVkIHJvbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVSb2xlKGNvbnRleHQ6IEF1dGhDb250ZXh0LCBhbGxvd2VkUm9sZXM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gIGlmICghY29udGV4dC5hdXRoZW50aWNhdGVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCFjb250ZXh0LnJvbGUgfHwgIWFsbG93ZWRSb2xlcy5pbmNsdWRlcyhjb250ZXh0LnJvbGUpKSB7XG4gICAgbG9nZ2VyLndhcm4oJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycsIHtcbiAgICAgIHVzZXJJZDogY29udGV4dC51c2VySWQsXG4gICAgICB1c2VyUm9sZTogY29udGV4dC5yb2xlLFxuICAgICAgcmVxdWlyZWRSb2xlczogYWxsb3dlZFJvbGVzLFxuICAgIH0pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFZlcmlmeSB1c2VyIG93bnMgcmVzb3VyY2VcbiAqIFVzZWQgZm9yIGVuZHBvaW50cyB0aGF0IGFjY2VzcyB1c2VyLXNwZWNpZmljIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVJlc291cmNlT3duZXJzaGlwKFxuICBjb250ZXh0OiBBdXRoQ29udGV4dCxcbiAgcmVzb3VyY2VVc2VySWQ6IHN0cmluZ1xuKTogYm9vbGVhbiB7XG4gIGlmICghY29udGV4dC5hdXRoZW50aWNhdGVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGNvbnRleHQudXNlcklkICE9PSByZXNvdXJjZVVzZXJJZCkge1xuICAgIGxvZ2dlci53YXJuKCdVbmF1dGhvcml6ZWQgcmVzb3VyY2UgYWNjZXNzJywge1xuICAgICAgdXNlcklkOiBjb250ZXh0LnVzZXJJZCxcbiAgICAgIHJlc291cmNlVXNlcklkLFxuICAgIH0pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEFkZCB1c2VyIGNvbnRleHQgdG8gcmVxdWVzdCBmb3IgZG93bnN0cmVhbSBzZXJ2aWNlc1xuICogVXNlZnVsIGZvciBsb2dnaW5nIGFuZCBhdWRpdCB0cmFpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFVzZXJDb250ZXh0VG9SZXF1ZXN0KFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgY29udGV4dDogQXV0aENvbnRleHRcbik6IHZvaWQge1xuICAvLyBTdG9yZSBpbiByZXF1ZXN0IGhlYWRlcnMgZm9yIGRvd25zdHJlYW0gc2VydmljZXNcbiAgKHJlcXVlc3QuaGVhZGVycyBhcyBhbnkpWyd4LWF1dGhlbnRpY2F0ZWQtdXNlci1pZCddID0gY29udGV4dC51c2VySWQ7XG4gIGlmIChjb250ZXh0LnJvbGUpIHtcbiAgICAocmVxdWVzdC5oZWFkZXJzIGFzIGFueSlbJ3gtdXNlci1yb2xlJ10gPSBjb250ZXh0LnJvbGU7XG4gIH1cbiAgaWYgKGNvbnRleHQuZW1haWwpIHtcbiAgICAocmVxdWVzdC5oZWFkZXJzIGFzIGFueSlbJ3gtdXNlci1lbWFpbCddID0gY29udGV4dC5lbWFpbDtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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