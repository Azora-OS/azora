fdd72224f0ecbdfd98c71669e5987074
/* istanbul ignore next */
function cov_ua3tmzyih() {
  var path = "/workspaces/azora/services/agent-execution/src/repo.ts";
  var hash = "f815cb8786fdec5df5dd10ed2b41384443801cc3";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/agent-execution/src/repo.ts",
    statementMap: {
      "0": {
        start: {
          line: 5,
          column: 2
        },
        end: {
          line: 12,
          column: 5
        }
      },
      "1": {
        start: {
          line: 16,
          column: 2
        },
        end: {
          line: 23,
          column: 5
        }
      },
      "2": {
        start: {
          line: 27,
          column: 2
        },
        end: {
          line: 27,
          column: 51
        }
      }
    },
    fnMap: {
      "0": {
        name: "createTaskRecord",
        decl: {
          start: {
            line: 4,
            column: 22
          },
          end: {
            line: 4,
            column: 38
          }
        },
        loc: {
          start: {
            line: 4,
            column: 57
          },
          end: {
            line: 13,
            column: 1
          }
        },
        line: 4
      },
      "1": {
        name: "updateTaskRecord",
        decl: {
          start: {
            line: 15,
            column: 22
          },
          end: {
            line: 15,
            column: 38
          }
        },
        loc: {
          start: {
            line: 15,
            column: 81
          },
          end: {
            line: 24,
            column: 1
          }
        },
        line: 15
      },
      "2": {
        name: "getTaskRecord",
        decl: {
          start: {
            line: 26,
            column: 22
          },
          end: {
            line: 26,
            column: 35
          }
        },
        loc: {
          start: {
            line: 26,
            column: 48
          },
          end: {
            line: 28,
            column: 1
          }
        },
        line: 26
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 10,
            column: 15
          },
          end: {
            line: 10,
            column: 40
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 10,
            column: 15
          },
          end: {
            line: 10,
            column: 27
          }
        }, {
          start: {
            line: 10,
            column: 31
          },
          end: {
            line: 10,
            column: 40
          }
        }],
        line: 10
      },
      "1": {
        loc: {
          start: {
            line: 19,
            column: 14
          },
          end: {
            line: 19,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 19,
            column: 14
          },
          end: {
            line: 19,
            column: 28
          }
        }, {
          start: {
            line: 19,
            column: 32
          },
          end: {
            line: 19,
            column: 41
          }
        }],
        line: 19
      },
      "2": {
        loc: {
          start: {
            line: 20,
            column: 15
          },
          end: {
            line: 20,
            column: 43
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 20,
            column: 15
          },
          end: {
            line: 20,
            column: 30
          }
        }, {
          start: {
            line: 20,
            column: 34
          },
          end: {
            line: 20,
            column: 43
          }
        }],
        line: 20
      },
      "3": {
        loc: {
          start: {
            line: 21,
            column: 15
          },
          end: {
            line: 21,
            column: 43
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 21,
            column: 15
          },
          end: {
            line: 21,
            column: 30
          }
        }, {
          start: {
            line: 21,
            column: 34
          },
          end: {
            line: 21,
            column: 43
          }
        }],
        line: 21
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "f815cb8786fdec5df5dd10ed2b41384443801cc3"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_ua3tmzyih = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_ua3tmzyih();
import prisma from './prismaClient';
export async function createTaskRecord(task) {
  /* istanbul ignore next */
  cov_ua3tmzyih().f[0]++;
  cov_ua3tmzyih().s[0]++;
  return prisma.task.create({
    data: {
      id: task.id,
      status: task.status,
      payload: task.payload,
      agentId:
      /* istanbul ignore next */
      (cov_ua3tmzyih().b[0][0]++, task.agentId) ??
      /* istanbul ignore next */
      (cov_ua3tmzyih().b[0][1]++, undefined)
    }
  });
}
export async function updateTaskRecord(id, updates) {
  /* istanbul ignore next */
  cov_ua3tmzyih().f[1]++;
  cov_ua3tmzyih().s[1]++;
  return prisma.task.update({
    where: {
      id
    },
    data: {
      status:
      /* istanbul ignore next */
      (cov_ua3tmzyih().b[1][0]++, updates.status) ??
      /* istanbul ignore next */
      (cov_ua3tmzyih().b[1][1]++, undefined),
      payload:
      /* istanbul ignore next */
      (cov_ua3tmzyih().b[2][0]++, updates.payload) ??
      /* istanbul ignore next */
      (cov_ua3tmzyih().b[2][1]++, undefined),
      agentId:
      /* istanbul ignore next */
      (cov_ua3tmzyih().b[3][0]++, updates.agentId) ??
      /* istanbul ignore next */
      (cov_ua3tmzyih().b[3][1]++, undefined)
    }
  });
}
export async function getTaskRecord(id) {
  /* istanbul ignore next */
  cov_ua3tmzyih().f[2]++;
  cov_ua3tmzyih().s[2]++;
  return prisma.task.findUnique({
    where: {
      id
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfdWEzdG16eWloIiwiYWN0dWFsQ292ZXJhZ2UiLCJwcmlzbWEiLCJjcmVhdGVUYXNrUmVjb3JkIiwidGFzayIsImYiLCJzIiwiY3JlYXRlIiwiZGF0YSIsImlkIiwic3RhdHVzIiwicGF5bG9hZCIsImFnZW50SWQiLCJiIiwidW5kZWZpbmVkIiwidXBkYXRlVGFza1JlY29yZCIsInVwZGF0ZXMiLCJ1cGRhdGUiLCJ3aGVyZSIsImdldFRhc2tSZWNvcmQiLCJmaW5kVW5pcXVlIl0sInNvdXJjZXMiOlsicmVwby50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJpc21hIGZyb20gJy4vcHJpc21hQ2xpZW50JztcbmltcG9ydCB7IFRhc2tSZWNvcmQgfSBmcm9tICcuL3BlcnNpc3RlbmNlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRhc2tSZWNvcmQodGFzazogVGFza1JlY29yZCkge1xuICByZXR1cm4gcHJpc21hLnRhc2suY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogdGFzay5pZCxcbiAgICAgIHN0YXR1czogdGFzay5zdGF0dXMsXG4gICAgICBwYXlsb2FkOiB0YXNrLnBheWxvYWQgYXMgYW55LFxuICAgICAgYWdlbnRJZDogdGFzay5hZ2VudElkID8/IHVuZGVmaW5lZFxuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVUYXNrUmVjb3JkKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8VGFza1JlY29yZD4pIHtcbiAgcmV0dXJuIHByaXNtYS50YXNrLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6IHVwZGF0ZXMuc3RhdHVzID8/IHVuZGVmaW5lZCxcbiAgICAgIHBheWxvYWQ6IHVwZGF0ZXMucGF5bG9hZCA/PyB1bmRlZmluZWQsXG4gICAgICBhZ2VudElkOiB1cGRhdGVzLmFnZW50SWQgPz8gdW5kZWZpbmVkXG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRhc2tSZWNvcmQoaWQ6IHN0cmluZykge1xuICByZXR1cm4gcHJpc21hLnRhc2suZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkIH0gfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGFBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGFBQUE7QUFmWixPQUFPRSxNQUFNLE1BQU0sZ0JBQWdCO0FBR25DLE9BQU8sZUFBZUMsZ0JBQWdCQSxDQUFDQyxJQUFnQixFQUFFO0VBQUE7RUFBQUosYUFBQSxHQUFBSyxDQUFBO0VBQUFMLGFBQUEsR0FBQU0sQ0FBQTtFQUN2RCxPQUFPSixNQUFNLENBQUNFLElBQUksQ0FBQ0csTUFBTSxDQUFDO0lBQ3hCQyxJQUFJLEVBQUU7TUFDSkMsRUFBRSxFQUFFTCxJQUFJLENBQUNLLEVBQUU7TUFDWEMsTUFBTSxFQUFFTixJQUFJLENBQUNNLE1BQU07TUFDbkJDLE9BQU8sRUFBRVAsSUFBSSxDQUFDTyxPQUFjO01BQzVCQyxPQUFPO01BQUU7TUFBQSxDQUFBWixhQUFBLEdBQUFhLENBQUEsVUFBQVQsSUFBSSxDQUFDUSxPQUFPO01BQUE7TUFBQSxDQUFBWixhQUFBLEdBQUFhLENBQUEsVUFBSUMsU0FBUztJQUNwQztFQUNGLENBQUMsQ0FBQztBQUNKO0FBRUEsT0FBTyxlQUFlQyxnQkFBZ0JBLENBQUNOLEVBQVUsRUFBRU8sT0FBNEIsRUFBRTtFQUFBO0VBQUFoQixhQUFBLEdBQUFLLENBQUE7RUFBQUwsYUFBQSxHQUFBTSxDQUFBO0VBQy9FLE9BQU9KLE1BQU0sQ0FBQ0UsSUFBSSxDQUFDYSxNQUFNLENBQUM7SUFDeEJDLEtBQUssRUFBRTtNQUFFVDtJQUFHLENBQUM7SUFDYkQsSUFBSSxFQUFFO01BQ0pFLE1BQU07TUFBRTtNQUFBLENBQUFWLGFBQUEsR0FBQWEsQ0FBQSxVQUFBRyxPQUFPLENBQUNOLE1BQU07TUFBQTtNQUFBLENBQUFWLGFBQUEsR0FBQWEsQ0FBQSxVQUFJQyxTQUFTO01BQ25DSCxPQUFPO01BQUU7TUFBQSxDQUFBWCxhQUFBLEdBQUFhLENBQUEsVUFBQUcsT0FBTyxDQUFDTCxPQUFPO01BQUE7TUFBQSxDQUFBWCxhQUFBLEdBQUFhLENBQUEsVUFBSUMsU0FBUztNQUNyQ0YsT0FBTztNQUFFO01BQUEsQ0FBQVosYUFBQSxHQUFBYSxDQUFBLFVBQUFHLE9BQU8sQ0FBQ0osT0FBTztNQUFBO01BQUEsQ0FBQVosYUFBQSxHQUFBYSxDQUFBLFVBQUlDLFNBQVM7SUFDdkM7RUFDRixDQUFDLENBQUM7QUFDSjtBQUVBLE9BQU8sZUFBZUssYUFBYUEsQ0FBQ1YsRUFBVSxFQUFFO0VBQUE7RUFBQVQsYUFBQSxHQUFBSyxDQUFBO0VBQUFMLGFBQUEsR0FBQU0sQ0FBQTtFQUM5QyxPQUFPSixNQUFNLENBQUNFLElBQUksQ0FBQ2dCLFVBQVUsQ0FBQztJQUFFRixLQUFLLEVBQUU7TUFBRVQ7SUFBRztFQUFFLENBQUMsQ0FBQztBQUNsRCIsImlnbm9yZUxpc3QiOltdfQ==