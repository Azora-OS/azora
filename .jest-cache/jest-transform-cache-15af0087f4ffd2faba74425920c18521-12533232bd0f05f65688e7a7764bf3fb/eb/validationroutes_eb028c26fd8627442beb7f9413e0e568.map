{"version":3,"names":["cov_2egmp0hkz2","actualCoverage","Router","contentValidationService","router","s","post","req","res","next","f","courseId","content","title","language","body","result","validateCourseContent","contentType","status","json","success","data","timestamp","Date","error","assessmentId","validateAssessmentQuestions","enrollmentId","feedback","validateTeacherFeedback","b","checkForBias","context","checkForAccuracy","checkForClarity","checkForSafety"],"sources":["validation.routes.ts"],"sourcesContent":["import { Router, Request, Response, NextFunction } from 'express';\nimport { contentValidationService } from '../integrations/constitutional-ai-integration';\n\nconst router = Router();\n\n// POST /api/v1/validation/course - Validate course content\nrouter.post('/course', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { courseId, content, title, language } = req.body;\n\n    const result = await contentValidationService.validateCourseContent({\n      courseId,\n      contentType: 'course',\n      content,\n      title,\n      language,\n    });\n\n    res.status(201).json({\n      success: true,\n      data: result,\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\n// POST /api/v1/validation/assessment - Validate assessment questions\nrouter.post('/assessment', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { assessmentId } = req.body;\n\n    const result = await contentValidationService.validateAssessmentQuestions(assessmentId);\n\n    res.status(201).json({\n      success: true,\n      data: result,\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\n// POST /api/v1/validation/feedback - Validate teacher feedback\nrouter.post('/feedback', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { enrollmentId, feedback } = req.body;\n\n    const result = await contentValidationService.validateTeacherFeedback(enrollmentId, feedback);\n\n    res.status(201).json({\n      success: true,\n      data: result,\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\n// POST /api/v1/validation/bias - Check for bias\nrouter.post('/bias', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { content } = req.body;\n\n    if (!content) {\n      res.status(400).json({\n        success: false,\n        error: 'Content is required',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const result = await contentValidationService.checkForBias(content);\n\n    res.json({\n      success: true,\n      data: result,\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\n// POST /api/v1/validation/accuracy - Check for accuracy\nrouter.post('/accuracy', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { content, context } = req.body;\n\n    if (!content) {\n      res.status(400).json({\n        success: false,\n        error: 'Content is required',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const result = await contentValidationService.checkForAccuracy(content, context);\n\n    res.json({\n      success: true,\n      data: result,\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\n// POST /api/v1/validation/clarity - Check for clarity\nrouter.post('/clarity', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { content } = req.body;\n\n    if (!content) {\n      res.status(400).json({\n        success: false,\n        error: 'Content is required',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const result = await contentValidationService.checkForClarity(content);\n\n    res.json({\n      success: true,\n      data: result,\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\n// POST /api/v1/validation/safety - Check for safety\nrouter.post('/safety', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { content } = req.body;\n\n    if (!content) {\n      res.status(400).json({\n        success: false,\n        error: 'Content is required',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const result = await contentValidationService.checkForSafety(content);\n\n    res.json({\n      success: true,\n      data: result,\n      timestamp: new Date(),\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\nexport default router;\n"],"mappings":"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","ignoreList":[]}