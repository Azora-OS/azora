{"version":3,"names":["cov_shs7yqwi0","actualCoverage","healthCheck","req","res","f","startTime","s","Date","now","databaseStatus","checkDatabase","redisStatus","checkRedis","externalApiStatus","checkExternalApi","allHealthy","b","health","status","timestamp","toISOString","version","process","env","APP_VERSION","uptime","checks","database","redis","externalApi","statusCode","json","error"],"sources":["health.ts"],"sourcesContent":["import { Request, Response } from 'express';\n\nexport interface HealthStatus {\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  timestamp: string;\n  version: string;\n  uptime: number;\n  checks: {\n    database?: 'up' | 'down';\n    redis?: 'up' | 'down';\n    externalApi?: 'up' | 'down';\n  };\n}\n\nexport async function healthCheck(req: Request, res: Response): Promise<void> {\n  const startTime = Date.now();\n  \n  try {\n    // Check database\n    const databaseStatus = await checkDatabase();\n    \n    // Check Redis\n    const redisStatus = await checkRedis();\n    \n    // Check external dependencies\n    const externalApiStatus = await checkExternalApi();\n    \n    const allHealthy = \n      databaseStatus === 'up' && \n      redisStatus === 'up' && \n      externalApiStatus === 'up';\n    \n    const health: HealthStatus = {\n      status: allHealthy ? 'healthy' : 'degraded',\n      timestamp: new Date().toISOString(),\n      version: process.env.APP_VERSION || '1.0.0',\n      uptime: process.uptime(),\n      checks: {\n        database: databaseStatus,\n        redis: redisStatus,\n        externalApi: externalApiStatus,\n      },\n    };\n    \n    const statusCode = allHealthy ? 200 : 503;\n    res.status(statusCode).json(health);\n    \n  } catch (error) {\n    res.status(503).json({\n      status: 'unhealthy',\n      timestamp: new Date().toISOString(),\n      error: 'Health check failed',\n    });\n  }\n}\n\nasync function checkDatabase(): Promise<'up' | 'down'> {\n  try {\n    // Implement database check\n    return 'up';\n  } catch {\n    return 'down';\n  }\n}\n\nasync function checkRedis(): Promise<'up' | 'down'> {\n  try {\n    // Implement Redis check\n    return 'up';\n  } catch {\n    return 'down';\n  }\n}\n\nasync function checkExternalApi(): Promise<'up' | 'down'> {\n  try {\n    // Implement external API check\n    return 'up';\n  } catch {\n    return 'down';\n  }\n}\n"],"mappings":"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","ignoreList":[]}