7087fd3d48a1c9f05e09dbf1bbf7888f
/* istanbul ignore next */
function cov_h4xpca1nc() {
  var path = "/workspaces/azora/services/azora-sapiens/src/ai-tutor-openai.ts";
  var hash = "35d639f26dd31411ee621a25ef2e24ac000058ec";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-sapiens/src/ai-tutor-openai.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 15
        },
        end: {
          line: 3,
          column: 65
        }
      },
      "1": {
        start: {
          line: 13,
          column: 23
        },
        end: {
          line: 15,
          column: 45
        }
      },
      "2": {
        start: {
          line: 17,
          column: 19
        },
        end: {
          line: 21,
          column: 3
        }
      },
      "3": {
        start: {
          line: 23,
          column: 19
        },
        end: {
          line: 28,
          column: 4
        }
      },
      "4": {
        start: {
          line: 30,
          column: 2
        },
        end: {
          line: 30,
          column: 45
        }
      },
      "5": {
        start: {
          line: 34,
          column: 17
        },
        end: {
          line: 36,
          column: 80
        }
      },
      "6": {
        start: {
          line: 38,
          column: 19
        },
        end: {
          line: 42,
          column: 4
        }
      },
      "7": {
        start: {
          line: 44,
          column: 2
        },
        end: {
          line: 44,
          column: 65
        }
      }
    },
    fnMap: {
      "0": {
        name: "getTutorResponse",
        decl: {
          start: {
            line: 12,
            column: 22
          },
          end: {
            line: 12,
            column: 38
          }
        },
        loc: {
          start: {
            line: 12,
            column: 80
          },
          end: {
            line: 31,
            column: 1
          }
        },
        line: 12
      },
      "1": {
        name: "generateLearningPath",
        decl: {
          start: {
            line: 33,
            column: 22
          },
          end: {
            line: 33,
            column: 42
          }
        },
        loc: {
          start: {
            line: 33,
            column: 99
          },
          end: {
            line: 45,
            column: 1
          }
        },
        line: 33
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 44,
            column: 20
          },
          end: {
            line: 44,
            column: 63
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 44,
            column: 20
          },
          end: {
            line: 44,
            column: 55
          }
        }, {
          start: {
            line: 44,
            column: 59
          },
          end: {
            line: 44,
            column: 63
          }
        }],
        line: 44
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "35d639f26dd31411ee621a25ef2e24ac000058ec"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_h4xpca1nc = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_h4xpca1nc();
import OpenAI from 'openai';
const openai =
/* istanbul ignore next */
(cov_h4xpca1nc().s[0]++, new OpenAI({
  apiKey: process.env.OPENAI_API_KEY
}));
export async function getTutorResponse(question, context) {
  /* istanbul ignore next */
  cov_h4xpca1nc().f[0]++;
  const systemPrompt =
  /* istanbul ignore next */
  (cov_h4xpca1nc().s[1]++, `You are Elara, an AI tutor for Azora OS. You teach ${context.subject} at ${context.level} level.
Be encouraging, clear, and use the Ubuntu philosophy: "I am because we are."
Break down complex topics into simple steps.`);
  const messages =
  /* istanbul ignore next */
  (cov_h4xpca1nc().s[2]++, [{
    role: 'system',
    content: systemPrompt
  }, ...context.history, {
    role: 'user',
    content: question
  }]);
  const response =
  /* istanbul ignore next */
  (cov_h4xpca1nc().s[3]++, await openai.chat.completions.create({
    model: 'gpt-4',
    messages: messages,
    temperature: 0.7,
    max_tokens: 500
  }));
  /* istanbul ignore next */
  cov_h4xpca1nc().s[4]++;
  return response.choices[0].message.content;
}
export async function generateLearningPath(subject, currentLevel, goals) {
  /* istanbul ignore next */
  cov_h4xpca1nc().f[1]++;
  const prompt =
  /* istanbul ignore next */
  (cov_h4xpca1nc().s[5]++, `Create a learning path for ${subject} at ${currentLevel} level.
Goals: ${goals.join(', ')}
Return a structured JSON with: modules, topics, estimated_hours, prerequisites.`);
  const response =
  /* istanbul ignore next */
  (cov_h4xpca1nc().s[6]++, await openai.chat.completions.create({
    model: 'gpt-4',
    messages: [{
      role: 'user',
      content: prompt
    }],
    temperature: 0.5
  }));
  /* istanbul ignore next */
  cov_h4xpca1nc().s[7]++;
  return JSON.parse(
  /* istanbul ignore next */
  (cov_h4xpca1nc().b[0][0]++, response.choices[0].message.content) ||
  /* istanbul ignore next */
  (cov_h4xpca1nc().b[0][1]++, '{}'));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfaDR4cGNhMW5jIiwiYWN0dWFsQ292ZXJhZ2UiLCJPcGVuQUkiLCJvcGVuYWkiLCJzIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiZ2V0VHV0b3JSZXNwb25zZSIsInF1ZXN0aW9uIiwiY29udGV4dCIsImYiLCJzeXN0ZW1Qcm9tcHQiLCJzdWJqZWN0IiwibGV2ZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwiaGlzdG9yeSIsInJlc3BvbnNlIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJjaG9pY2VzIiwibWVzc2FnZSIsImdlbmVyYXRlTGVhcm5pbmdQYXRoIiwiY3VycmVudExldmVsIiwiZ29hbHMiLCJwcm9tcHQiLCJqb2luIiwiSlNPTiIsInBhcnNlIiwiYiJdLCJzb3VyY2VzIjpbImFpLXR1dG9yLW9wZW5haS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoeyBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIH0pO1xuXG5pbnRlcmZhY2UgVHV0b3JDb250ZXh0IHtcbiAgc3R1ZGVudElkOiBzdHJpbmc7XG4gIHN1YmplY3Q6IHN0cmluZztcbiAgbGV2ZWw6IHN0cmluZztcbiAgaGlzdG9yeTogQXJyYXk8eyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9Pjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFR1dG9yUmVzcG9uc2UocXVlc3Rpb246IHN0cmluZywgY29udGV4dDogVHV0b3JDb250ZXh0KSB7XG4gIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIEVsYXJhLCBhbiBBSSB0dXRvciBmb3IgQXpvcmEgT1MuIFlvdSB0ZWFjaCAke2NvbnRleHQuc3ViamVjdH0gYXQgJHtjb250ZXh0LmxldmVsfSBsZXZlbC5cbkJlIGVuY291cmFnaW5nLCBjbGVhciwgYW5kIHVzZSB0aGUgVWJ1bnR1IHBoaWxvc29waHk6IFwiSSBhbSBiZWNhdXNlIHdlIGFyZS5cIlxuQnJlYWsgZG93biBjb21wbGV4IHRvcGljcyBpbnRvIHNpbXBsZSBzdGVwcy5gO1xuXG4gIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHN5c3RlbVByb21wdCB9LFxuICAgIC4uLmNvbnRleHQuaGlzdG9yeSxcbiAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcXVlc3Rpb24gfSxcbiAgXTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgbW9kZWw6ICdncHQtNCcsXG4gICAgbWVzc2FnZXM6IG1lc3NhZ2VzIGFzIGFueSxcbiAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgIG1heF90b2tlbnM6IDUwMCxcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3BvbnNlLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVMZWFybmluZ1BhdGgoc3ViamVjdDogc3RyaW5nLCBjdXJyZW50TGV2ZWw6IHN0cmluZywgZ29hbHM6IHN0cmluZ1tdKSB7XG4gIGNvbnN0IHByb21wdCA9IGBDcmVhdGUgYSBsZWFybmluZyBwYXRoIGZvciAke3N1YmplY3R9IGF0ICR7Y3VycmVudExldmVsfSBsZXZlbC5cbkdvYWxzOiAke2dvYWxzLmpvaW4oJywgJyl9XG5SZXR1cm4gYSBzdHJ1Y3R1cmVkIEpTT04gd2l0aDogbW9kdWxlcywgdG9waWNzLCBlc3RpbWF0ZWRfaG91cnMsIHByZXJlcXVpc2l0ZXMuYDtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgbW9kZWw6ICdncHQtNCcsXG4gICAgbWVzc2FnZXM6IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1dLFxuICAgIHRlbXBlcmF0dXJlOiAwLjUsXG4gIH0pO1xuXG4gIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50IHx8ICd7fScpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlWTtJQUFBQSxhQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxhQUFBO0FBZlosT0FBT0UsTUFBTSxNQUFNLFFBQVE7QUFFM0IsTUFBTUMsTUFBTTtBQUFBO0FBQUEsQ0FBQUgsYUFBQSxHQUFBSSxDQUFBLE9BQUcsSUFBSUYsTUFBTSxDQUFDO0VBQUVHLE1BQU0sRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDO0FBQWUsQ0FBQyxDQUFDO0FBU2pFLE9BQU8sZUFBZUMsZ0JBQWdCQSxDQUFDQyxRQUFnQixFQUFFQyxPQUFxQixFQUFFO0VBQUE7RUFBQVgsYUFBQSxHQUFBWSxDQUFBO0VBQzlFLE1BQU1DLFlBQVk7RUFBQTtFQUFBLENBQUFiLGFBQUEsR0FBQUksQ0FBQSxPQUFHLHNEQUFzRE8sT0FBTyxDQUFDRyxPQUFPLE9BQU9ILE9BQU8sQ0FBQ0ksS0FBSztBQUNoSDtBQUNBLDZDQUE2QztFQUUzQyxNQUFNQyxRQUFRO0VBQUE7RUFBQSxDQUFBaEIsYUFBQSxHQUFBSSxDQUFBLE9BQUcsQ0FDZjtJQUFFYSxJQUFJLEVBQUUsUUFBUTtJQUFFQyxPQUFPLEVBQUVMO0VBQWEsQ0FBQyxFQUN6QyxHQUFHRixPQUFPLENBQUNRLE9BQU8sRUFDbEI7SUFBRUYsSUFBSSxFQUFFLE1BQU07SUFBRUMsT0FBTyxFQUFFUjtFQUFTLENBQUMsQ0FDcEM7RUFFRCxNQUFNVSxRQUFRO0VBQUE7RUFBQSxDQUFBcEIsYUFBQSxHQUFBSSxDQUFBLE9BQUcsTUFBTUQsTUFBTSxDQUFDa0IsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztJQUNwREMsS0FBSyxFQUFFLE9BQU87SUFDZFIsUUFBUSxFQUFFQSxRQUFlO0lBQ3pCUyxXQUFXLEVBQUUsR0FBRztJQUNoQkMsVUFBVSxFQUFFO0VBQ2QsQ0FBQyxDQUFDO0VBQUM7RUFBQTFCLGFBQUEsR0FBQUksQ0FBQTtFQUVILE9BQU9nQixRQUFRLENBQUNPLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDVixPQUFPO0FBQzVDO0FBRUEsT0FBTyxlQUFlVyxvQkFBb0JBLENBQUNmLE9BQWUsRUFBRWdCLFlBQW9CLEVBQUVDLEtBQWUsRUFBRTtFQUFBO0VBQUEvQixhQUFBLEdBQUFZLENBQUE7RUFDakcsTUFBTW9CLE1BQU07RUFBQTtFQUFBLENBQUFoQyxhQUFBLEdBQUFJLENBQUEsT0FBRyw4QkFBOEJVLE9BQU8sT0FBT2dCLFlBQVk7QUFDekUsU0FBU0MsS0FBSyxDQUFDRSxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ3pCLGdGQUFnRjtFQUU5RSxNQUFNYixRQUFRO0VBQUE7RUFBQSxDQUFBcEIsYUFBQSxHQUFBSSxDQUFBLE9BQUcsTUFBTUQsTUFBTSxDQUFDa0IsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztJQUNwREMsS0FBSyxFQUFFLE9BQU87SUFDZFIsUUFBUSxFQUFFLENBQUM7TUFBRUMsSUFBSSxFQUFFLE1BQU07TUFBRUMsT0FBTyxFQUFFYztJQUFPLENBQUMsQ0FBQztJQUM3Q1AsV0FBVyxFQUFFO0VBQ2YsQ0FBQyxDQUFDO0VBQUM7RUFBQXpCLGFBQUEsR0FBQUksQ0FBQTtFQUVILE9BQU84QixJQUFJLENBQUNDLEtBQUs7RUFBQztFQUFBLENBQUFuQyxhQUFBLEdBQUFvQyxDQUFBLFVBQUFoQixRQUFRLENBQUNPLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDVixPQUFPO0VBQUE7RUFBQSxDQUFBbEIsYUFBQSxHQUFBb0MsQ0FBQSxVQUFJLElBQUksRUFBQztBQUNoRSIsImlnbm9yZUxpc3QiOltdfQ==