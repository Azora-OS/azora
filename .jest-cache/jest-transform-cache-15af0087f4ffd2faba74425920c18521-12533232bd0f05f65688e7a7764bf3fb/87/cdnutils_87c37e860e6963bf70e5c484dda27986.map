{"version":3,"names":["cov_1ml0phlddf","actualCoverage","africaCDN","getCDNAssetURL","path","region","f","s","getAssetURL","getCDNAssetURLs","paths","map","getCDNImageURL","imagePath","options","baseUrl","params","URLSearchParams","width","b","set","toString","height","quality","format","preloadCDNAssets","urls","window","forEach","url","link","document","createElement","rel","as","href","head","appendChild","getOptimalCDNNode","getOptimalNode"],"sources":["cdn-utils.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nCDN ASSET UTILITIES\nHelper functions for serving assets through Africa-First CDN\n*/\n\nimport { africaCDN } from '@azora/shared-infrastructure/africa-cdn';\n\n/**\n * Get CDN URL for asset\n */\nexport function getCDNAssetURL(path: string, region?: string): string {\n  return africaCDN.getAssetURL(path, region);\n}\n\n/**\n * Get CDN URLs for multiple assets\n */\nexport function getCDNAssetURLs(paths: string[], region?: string): string[] {\n  return paths.map(path => getCDNAssetURL(path, region));\n}\n\n/**\n * Generate CDN image URL with optimization\n */\nexport function getCDNImageURL(\n  imagePath: string,\n  options?: {\n    width?: number;\n    height?: number;\n    quality?: number;\n    format?: 'webp' | 'jpg' | 'png';\n    region?: string;\n  }\n): string {\n  const baseUrl = getCDNAssetURL(imagePath, options?.region);\n  const params = new URLSearchParams();\n  \n  if (options?.width) {params.set('w', options.width.toString());}\n  if (options?.height) {params.set('h', options.height.toString());}\n  if (options?.quality) {params.set('q', options.quality.toString());}\n  if (options?.format) {params.set('f', options.format);}\n  \n  return params.toString() ? `${baseUrl}?${params.toString()}` : baseUrl;\n}\n\n/**\n * Preload CDN assets\n */\nexport async function preloadCDNAssets(urls: string[]): Promise<void> {\n  // In browser environment, use link rel=\"preload\"\n  if (typeof window !== 'undefined') {\n    urls.forEach(url => {\n      const link = document.createElement('link');\n      link.rel = 'preload';\n      link.as = 'image';\n      link.href = url;\n      document.head.appendChild(link);\n    });\n  }\n}\n\n/**\n * Get optimal CDN node for region\n */\nexport function getOptimalCDNNode(region?: string) {\n  return africaCDN.getOptimalNode({ path: '/', region });\n}\n\nexport default {\n  getCDNAssetURL,\n  getCDNAssetURLs,\n  getCDNImageURL,\n  preloadCDNAssets,\n  getOptimalCDNNode,\n};\n"],"mappings":"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","ignoreList":[]}