{"version":3,"names":["cov_1a956st6yi","actualCoverage","nlp","BiasType","BiasSeverity","BiasDetector","EnhancedBiasDetector","constructor","config","b","f","s","detectBias","output","baseReport","nlpBiases","detectNLPBias","allBiases","biasTypes","uniqueBiases","deduplicateBiases","hasBias","length","overallSeverity","calculateOverallSeverity","mitigatedOutput","mitigationApplied","getConfig","autoMitigate","mitigateBias","biases","doc","genderBiases","analyzeGenderBias","push","stereotypeBiases","analyzeStereotypes","exclusionBiases","analyzeExclusionaryLanguage","genderedTitles","term","neutral","matches","match","found","text","index","toLowerCase","indexOf","type","GENDER","severity","MEDIUM","confidence","context","extractContext","location","start","end","professionalTerms","sentences","out","sentence","sentenceDoc","hasProf","hasMalePronoun","hasFemalePronoun","LOW","stereotypes","group","traits","AGE","lowerSentence","stereotype","hasGroup","some","g","includes","hasTrait","t","HIGH","exclusionaryTerms","DISABILITY","unique","bias","isDuplicate","existing","Math","abs","contextRadius","contextStart","max","contextEnd","min","substring","biasScores","severityOrder","CRITICAL","maxSeverity","score","currentIndex","maxIndex"],"sources":["bias-detector-enhanced.ts"],"sourcesContent":["/**\n * Enhanced Bias Detector with NLP Integration\n * Uses compromise library for advanced text analysis\n */\n\nimport nlp from 'compromise';\nimport {\n  BiasReport,\n  BiasScore,\n  BiasType,\n  BiasSeverity\n} from '../types';\nimport { BiasDetector, BiasDetectorConfig } from './bias-detector';\n\n/**\n * Enhanced bias detection with NLP capabilities\n */\nexport class EnhancedBiasDetector extends BiasDetector {\n  constructor(config: Partial<BiasDetectorConfig> = {}) {\n    super(config);\n  }\n\n  /**\n   * Enhanced bias detection using NLP analysis\n   */\n  async detectBias(output: string): Promise<BiasReport> {\n    // Get base detection results\n    const baseReport = await super.detectBias(output);\n\n    // Enhance with NLP analysis\n    const nlpBiases = await this.detectNLPBias(output);\n\n    // Merge results\n    const allBiases = [...baseReport.biasTypes, ...nlpBiases];\n    const uniqueBiases = this.deduplicateBiases(allBiases);\n\n    const hasBias = uniqueBiases.length > 0;\n    const overallSeverity = this.calculateOverallSeverity(uniqueBiases);\n\n    let mitigatedOutput: string | undefined;\n    let mitigationApplied = false;\n\n    if (hasBias && this.getConfig().autoMitigate) {\n      mitigatedOutput = await this.mitigateBias(output, uniqueBiases);\n      mitigationApplied = true;\n    }\n\n    return {\n      hasBias,\n      biasTypes: uniqueBiases,\n      overallSeverity,\n      mitigatedOutput,\n      mitigationApplied\n    };\n  }\n\n  /**\n   * Detect bias using NLP analysis\n   */\n  private async detectNLPBias(output: string): Promise<BiasScore[]> {\n    const biases: BiasScore[] = [];\n    const doc = nlp(output);\n\n    // Analyze gendered language\n    const genderBiases = this.analyzeGenderBias(doc, output);\n    biases.push(...genderBiases);\n\n    // Analyze stereotypical associations\n    const stereotypeBiases = this.analyzeStereotypes(doc, output);\n    biases.push(...stereotypeBiases);\n\n    // Analyze exclusionary language\n    const exclusionBiases = this.analyzeExclusionaryLanguage(doc, output);\n    biases.push(...exclusionBiases);\n\n    return biases;\n  }\n\n  /**\n   * Analyze gender bias in text\n   */\n  private analyzeGenderBias(doc: any, output: string): BiasScore[] {\n    const biases: BiasScore[] = [];\n\n    // Check for gendered job titles\n    const genderedTitles = [\n      { term: 'chairman', neutral: 'chairperson' },\n      { term: 'policeman', neutral: 'police officer' },\n      { term: 'fireman', neutral: 'firefighter' },\n      { term: 'businessman', neutral: 'businessperson' },\n      { term: 'mankind', neutral: 'humankind' },\n      { term: 'manpower', neutral: 'workforce' },\n      { term: 'waitress', neutral: 'server' },\n      { term: 'stewardess', neutral: 'flight attendant' }\n    ];\n\n    for (const { term } of genderedTitles) {\n      const matches = doc.match(term);\n      if (matches.found) {\n        const text = matches.text();\n        const index = output.toLowerCase().indexOf(text.toLowerCase());\n        if (index !== -1) {\n          biases.push({\n            type: BiasType.GENDER,\n            severity: BiasSeverity.MEDIUM,\n            confidence: 0.8,\n            context: this.extractContext(output, index, text.length),\n            location: {\n              start: index,\n              end: index + text.length\n            }\n          });\n        }\n      }\n    }\n\n    // Check for gendered pronouns in professional contexts\n    const professionalTerms = doc.match('#Profession');\n    if (professionalTerms.found) {\n      const sentences = doc.sentences().out('array');\n      for (const sentence of sentences) {\n        const sentenceDoc = nlp(sentence);\n        const hasProf = sentenceDoc.match('#Profession').found;\n        const hasMalePronoun = sentenceDoc.match('(he|him|his)').found;\n        const hasFemalePronoun = sentenceDoc.match('(she|her|hers)').found;\n\n        if (hasProf && (hasMalePronoun || hasFemalePronoun)) {\n          const index = output.indexOf(sentence);\n          if (index !== -1) {\n            biases.push({\n              type: BiasType.GENDER,\n              severity: BiasSeverity.LOW,\n              confidence: 0.6,\n              context: sentence,\n              location: {\n                start: index,\n                end: index + sentence.length\n              }\n            });\n          }\n        }\n      }\n    }\n\n    return biases;\n  }\n\n  /**\n   * Analyze stereotypical associations\n   */\n  private analyzeStereotypes(doc: any, output: string): BiasScore[] {\n    const biases: BiasScore[] = [];\n\n    // Stereotypical associations to detect\n    const stereotypes = [\n      {\n        group: ['women', 'woman', 'female', 'girl', 'girls'],\n        traits: ['emotional', 'irrational', 'weak', 'sensitive', 'dramatic'],\n        type: BiasType.GENDER\n      },\n      {\n        group: ['men', 'man', 'male', 'boy', 'boys'],\n        traits: ['aggressive', 'dominant', 'unemotional', 'strong'],\n        type: BiasType.GENDER\n      },\n      {\n        group: ['elderly', 'old', 'senior', 'seniors'],\n        traits: ['slow', 'confused', 'outdated', 'forgetful', 'incompetent'],\n        type: BiasType.AGE\n      },\n      {\n        group: ['young', 'youth', 'millennial', 'millennials'],\n        traits: ['lazy', 'entitled', 'irresponsible', 'naive'],\n        type: BiasType.AGE\n      }\n    ];\n\n    const sentences = doc.sentences().out('array');\n    for (const sentence of sentences) {\n      const lowerSentence = sentence.toLowerCase();\n\n      for (const stereotype of stereotypes) {\n        const hasGroup = stereotype.group.some(g => lowerSentence.includes(g));\n        const hasTrait = stereotype.traits.some(t => lowerSentence.includes(t));\n\n        if (hasGroup && hasTrait) {\n          const index = output.toLowerCase().indexOf(lowerSentence);\n          if (index !== -1) {\n            biases.push({\n              type: stereotype.type,\n              severity: BiasSeverity.HIGH,\n              confidence: 0.75,\n              context: sentence,\n              location: {\n                start: index,\n                end: index + sentence.length\n              }\n            });\n          }\n        }\n      }\n    }\n\n    return biases;\n  }\n\n  /**\n   * Analyze exclusionary language\n   */\n  private analyzeExclusionaryLanguage(doc: any, output: string): BiasScore[] {\n    const biases: BiasScore[] = [];\n\n    // Exclusionary terms\n    const exclusionaryTerms = [\n      { term: 'normal people', type: BiasType.DISABILITY },\n      { term: 'regular people', type: BiasType.DISABILITY },\n      { term: 'able-bodied', type: BiasType.DISABILITY },\n      { term: 'wheelchair bound', type: BiasType.DISABILITY },\n      { term: 'confined to wheelchair', type: BiasType.DISABILITY },\n      { term: 'suffers from', type: BiasType.DISABILITY },\n      { term: 'victim of', type: BiasType.DISABILITY }\n    ];\n\n    for (const { term, type } of exclusionaryTerms) {\n      const matches = doc.match(term);\n      if (matches.found) {\n        const text = matches.text();\n        const index = output.toLowerCase().indexOf(text.toLowerCase());\n        if (index !== -1) {\n          biases.push({\n            type,\n            severity: BiasSeverity.HIGH,\n            confidence: 0.85,\n            context: this.extractContext(output, index, text.length),\n            location: {\n              start: index,\n              end: index + text.length\n            }\n          });\n        }\n      }\n    }\n\n    return biases;\n  }\n\n  /**\n   * Deduplicate overlapping bias detections\n   */\n  private deduplicateBiases(biases: BiasScore[]): BiasScore[] {\n    const unique: BiasScore[] = [];\n\n    for (const bias of biases) {\n      const isDuplicate = unique.some(\n        existing =>\n          existing.type === bias.type &&\n          Math.abs(existing.location.start - bias.location.start) < 10\n      );\n\n      if (!isDuplicate) {\n        unique.push(bias);\n      }\n    }\n\n    return unique;\n  }\n\n  /**\n   * Extract context around a location\n   */\n  private extractContext(text: string, start: number, length: number): string {\n    const contextRadius = 50;\n    const contextStart = Math.max(0, start - contextRadius);\n    const contextEnd = Math.min(text.length, start + length + contextRadius);\n\n    let context = text.substring(contextStart, contextEnd);\n\n    if (contextStart > 0) {\n      context = '...' + context;\n    }\n    if (contextEnd < text.length) {\n      context = context + '...';\n    }\n\n    return context;\n  }\n\n  /**\n   * Calculate overall severity from multiple bias scores\n   */\n  private calculateOverallSeverity(biasScores: BiasScore[]): BiasSeverity {\n    if (biasScores.length === 0) {\n      return BiasSeverity.LOW;\n    }\n\n    const severityOrder = [\n      BiasSeverity.LOW,\n      BiasSeverity.MEDIUM,\n      BiasSeverity.HIGH,\n      BiasSeverity.CRITICAL\n    ];\n\n    let maxSeverity = BiasSeverity.LOW;\n    for (const score of biasScores) {\n      const currentIndex = severityOrder.indexOf(score.severity);\n      const maxIndex = severityOrder.indexOf(maxSeverity);\n      if (currentIndex > maxIndex) {\n        maxSeverity = score.severity;\n      }\n    }\n\n    return maxSeverity;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}