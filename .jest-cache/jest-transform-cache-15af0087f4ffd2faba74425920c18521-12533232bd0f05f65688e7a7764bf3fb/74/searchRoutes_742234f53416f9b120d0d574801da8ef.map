{"version":3,"names":["cov_2dtv3a6a2t","actualCoverage","Router","query","validationResult","s","require","Listing","logger","router","get","optional","isLength","min","isFloat","isInt","max","req","res","f","errors","isEmpty","b","status","json","success","array","q","category","tags","minPrice","maxPrice","deliveryMethod","sortBy","page","limit","searchQuery","$text","$search","price","$gte","parseFloat","$lte","tagArray","split","map","tag","trim","$in","sortOption","createdAt","listings","find","sort","parseInt","skip","total","countDocuments","data","pagination","pages","Math","ceil","search","filters","undefined","priceRange","error","distinct","$regex","$options","categories","titles","title","select","slice","t"],"sources":["searchRoutes.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport { Router, Request, Response } from 'express';\nconst { query, validationResult } = require('express-validator');\nimport { Listing } from '../models/Listing';\nimport logger from '../middleware/requestLogger';\n\nconst router = Router();\n\n/**\n * @swagger\n * /api/search/listings:\n *   get:\n *     summary: Advanced search for listings\n *     parameters:\n *       - in: query\n *         name: q\n *         schema:\n *           type: string\n *       - in: query\n *         name: category\n *         schema:\n *           type: string\n *       - in: query\n *         name: tags\n *         schema:\n *           type: string\n *       - in: query\n *         name: minPrice\n *         schema:\n *           type: number\n *       - in: query\n *         name: maxPrice\n *         schema:\n *           type: number\n *       - in: query\n *         name: deliveryMethod\n *         schema:\n *           type: string\n *           enum: [digital, service]\n *       - in: query\n *         name: sortBy\n *         schema:\n *           type: string\n *           enum: [price_asc, price_desc, created_desc, created_asc]\n *       - in: query\n *         name: page\n *         schema:\n *           type: integer\n *       - in: query\n *         name: limit\n *         schema:\n *           type: integer\n */\nrouter.get('/listings', [\n  query('q').optional().isLength({ min: 1 }),\n  query('minPrice').optional().isFloat({ min: 0 }),\n  query('maxPrice').optional().isFloat({ min: 0 }),\n  query('page').optional().isInt({ min: 1 }),\n  query('limit').optional().isInt({ min: 1, max: 100 }),\n], async (req: Request, res: Response) => {\n  try {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return res.status(400).json({ success: false, errors: errors.array() });\n    }\n\n    const {\n      q,\n      category,\n      tags,\n      minPrice,\n      maxPrice,\n      deliveryMethod,\n      sortBy = 'created_desc',\n      page = 1,\n      limit = 20\n    } = req.query;\n\n    const searchQuery: any = { status: 'active' };\n\n    // Text search\n    if (q) {\n      searchQuery.$text = { $search: q as string };\n    }\n\n    // Filters\n    if (category) {searchQuery.category = category;}\n    if (deliveryMethod) {searchQuery.deliveryMethod = deliveryMethod;}\n\n    if (minPrice || maxPrice) {\n      searchQuery.price = {};\n      if (minPrice) {searchQuery.price.$gte = parseFloat(minPrice as string);}\n      if (maxPrice) {searchQuery.price.$lte = parseFloat(maxPrice as string);}\n    }\n\n    if (tags) {\n      const tagArray = (tags as string).split(',').map(tag => tag.trim());\n      searchQuery.tags = { $in: tagArray };\n    }\n\n    // Sorting\n    let sortOption: any = { createdAt: -1 };\n    switch (sortBy) {\n      case 'price_asc':\n        sortOption = { price: 1 };\n        break;\n      case 'price_desc':\n        sortOption = { price: -1 };\n        break;\n      case 'created_asc':\n        sortOption = { createdAt: 1 };\n        break;\n      case 'created_desc':\n      default:\n        sortOption = { createdAt: -1 };\n        break;\n    }\n\n    const listings = await Listing.find(searchQuery)\n      .sort(sortOption)\n      .limit(parseInt(limit as string))\n      .skip((parseInt(page as string) - 1) * parseInt(limit as string));\n\n    const total = await Listing.countDocuments(searchQuery);\n\n    res.json({\n      success: true,\n      data: listings,\n      pagination: {\n        page: parseInt(page as string),\n        limit: parseInt(limit as string),\n        total,\n        pages: Math.ceil(total / parseInt(limit as string))\n      },\n      search: {\n        query: q,\n        filters: {\n          category,\n          tags: tags ? (tags as string).split(',').map(tag => tag.trim()) : undefined,\n          priceRange: minPrice || maxPrice ? { min: minPrice, max: maxPrice } : undefined,\n          deliveryMethod\n        },\n        sortBy\n      }\n    });\n  } catch (error) {\n    logger.error('Error searching listings:', error);\n    res.status(500).json({ success: false, error: 'Server error' });\n  }\n});\n\n/**\n * @swagger\n * /api/search/suggestions:\n *   get:\n *     summary: Get search suggestions\n *     parameters:\n *       - in: query\n *         name: q\n *         schema:\n *           type: string\n */\nrouter.get('/suggestions', [\n  query('q').isLength({ min: 1, max: 50 })\n], async (req: Request, res: Response) => {\n  try {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return res.status(400).json({ success: false, errors: errors.array() });\n    }\n\n    const { q } = req.query;\n\n    // Get popular tags matching the query\n    const tags = await Listing.distinct('tags', {\n      tags: { $regex: q as string, $options: 'i' },\n      status: 'active'\n    });\n\n    // Get category suggestions\n    const categories = await Listing.distinct('category', {\n      category: { $regex: q as string, $options: 'i' },\n      status: 'active'\n    });\n\n    // Get title suggestions\n    const titles = await Listing.find({\n      title: { $regex: q as string, $options: 'i' },\n      status: 'active'\n    })\n      .select('title')\n      .limit(5);\n\n    res.json({\n      success: true,\n      data: {\n        tags: tags.slice(0, 10),\n        categories: categories.slice(0, 5),\n        titles: titles.map(t => t.title)\n      }\n    });\n  } catch (error) {\n    logger.error('Error getting search suggestions:', error);\n    res.status(500).json({ success: false, error: 'Server error' });\n  }\n});\n\nexport default router;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}