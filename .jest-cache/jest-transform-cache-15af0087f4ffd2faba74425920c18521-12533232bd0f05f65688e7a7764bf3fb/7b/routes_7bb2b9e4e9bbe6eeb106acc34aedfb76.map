{"version":3,"names":["cov_posw97tz4","actualCoverage","express","s","require","PrismaClient","router","Router","prisma","post","req","res","f","console","warn","assessment","create","data","body","json","success","error","status","message","submission","assessmentId","params","id","get","results","findMany","where","module","exports"],"sources":["routes.js"],"sourcesContent":["// This file is kept for backward compatibility but the main routes are now in index.js\n// All new development should use the routes defined in index.js\n\nconst express = require('express');\nconst { PrismaClient } = require('@prisma/client');\nconst router = express.Router();\nconst prisma = new PrismaClient();\n\n// Legacy route for creating assessments (now in index.js)\nrouter.post('/api/assessments', async (req, res) => {\n  try {\n    console.warn('⚠️  Using legacy route. Please use the new API at POST /api/assessments');\n    const assessment = await prisma.assessment.create({ data: req.body });\n    res.json({ success: true, data: assessment });\n  } catch (error) {\n    res.status(500).json({ success: false, error: error.message });\n  }\n});\n\n// Legacy route for submitting assessments (now in index.js)\nrouter.post('/api/assessments/:id/submit', async (req, res) => {\n  try {\n    console.warn('⚠️  Using legacy route. Please use the new API at POST /api/assessments/:id/submit');\n    const submission = await prisma.submission.create({ data: { ...req.body, assessmentId: req.params.id } });\n    res.json({ success: true, data: submission });\n  } catch (error) {\n    res.status(500).json({ success: false, error: error.message });\n  }\n});\n\n// Legacy route for getting results (now in index.js)\nrouter.get('/api/assessments/:id/results', async (req, res) => {\n  try {\n    console.warn('⚠️  Using legacy route. Please use the new API at GET /api/assessments/:id/results');\n    const results = await prisma.submission.findMany({ where: { assessmentId: req.params.id } });\n    res.json({ success: true, data: results });\n  } catch (error) {\n    res.status(500).json({ success: false, error: error.message });\n  }\n});\n\nmodule.exports = router;"],"mappings":"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","ignoreList":[]}