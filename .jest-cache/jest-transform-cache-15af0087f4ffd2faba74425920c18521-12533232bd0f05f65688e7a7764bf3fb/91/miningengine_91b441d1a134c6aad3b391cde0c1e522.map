{"version":3,"names":["cov_9zzd6efgo","actualCoverage","proofOfKnowledge","s","require","tokenMinter","walletManager","MiningEngine","mine","userId","activity","f","validation","validateProof","valid","b","success","reason","reward","calculateReward","proof","mintResult","mint","updateBalance","transaction","newBalance","getMiningStats","wallet","getWallet","recentTransactions","transactions","filter","t","currency","slice","totalMined","balances","AZR","recentMining","averageReward","length","reduce","sum","amount","miningRate","mintingRate","getGlobalMiningStats","totalSupply","maxSupply","inflation","calculateInflation","module","exports"],"sources":["mining-engine.js"],"sourcesContent":["const proofOfKnowledge = require('./proof-of-knowledge');\nconst tokenMinter = require('./token-minter');\nconst walletManager = require('./wallet-manager');\n\nclass MiningEngine {\n  async mine(userId, activity) {\n    const validation = proofOfKnowledge.validateProof(activity);\n    \n    if (!validation.valid) {\n      return { success: false, reason: validation.reason };\n    }\n\n    const reward = proofOfKnowledge.calculateReward(validation.proof);\n    const mintResult = tokenMinter.mint(userId, reward, validation.proof);\n\n    if (!mintResult.success) {\n      return mintResult;\n    }\n\n    walletManager.updateBalance(userId, 'AZR', reward);\n\n    return {\n      success: true,\n      reward,\n      proof: validation.proof,\n      transaction: mintResult.transaction,\n      newBalance: mintResult.newBalance\n    };\n  }\n\n  getMiningStats(userId) {\n    const wallet = walletManager.getWallet(userId);\n    const recentTransactions = wallet.transactions.filter(t => t.currency === 'AZR').slice(-10);\n    \n    return {\n      totalMined: wallet.balances.AZR,\n      recentMining: recentTransactions,\n      averageReward: recentTransactions.length > 0 \n        ? recentTransactions.reduce((sum, t) => sum + t.amount, 0) / recentTransactions.length \n        : 0,\n      miningRate: tokenMinter.mintingRate\n    };\n  }\n\n  getGlobalMiningStats() {\n    return {\n      totalSupply: tokenMinter.totalSupply,\n      maxSupply: tokenMinter.maxSupply,\n      mintingRate: tokenMinter.mintingRate,\n      inflation: tokenMinter.calculateInflation()\n    };\n  }\n}\n\nmodule.exports = new MiningEngine();\n"],"mappings":"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","ignoreList":[]}