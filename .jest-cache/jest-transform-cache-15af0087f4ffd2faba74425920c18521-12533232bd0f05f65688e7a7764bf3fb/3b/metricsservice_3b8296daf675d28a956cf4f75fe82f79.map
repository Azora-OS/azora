{"version":3,"names":["cov_cmq0g2xuf","actualCoverage","ConstitutionalEngine","ConstitutionalMetricsService","metricsHistory","s","ethicsChecksPassed","ethicsChecksTotal","accurateResponses","totalResponses","positiveInteractions","totalInteractions","constructor","f","engine","seedInitialData","recordEthicsCheck","passed","b","recordTutorFeedback","accurate","recordInteraction","positive","calculateMetrics","alignmentScore","truthScore","ubuntuScore","metrics","Math","round","timestamp","Date","toISOString","push","getLatestMetrics","getMetricsHistory"],"sources":["metrics-service.ts"],"sourcesContent":["import { ConstitutionalEngine } from './constitutional-engine';\n\nexport interface ConstitutionalMetrics {\n    alignmentScore: number; // 0-100: Adherence to ethical guidelines\n    truthScore: number;     // 0-100: Accuracy and hallucination resistance\n    ubuntuScore: number;    // 0-100: Community health and positive interactions\n    timestamp: string;\n}\n\nexport class ConstitutionalMetricsService {\n    private engine: ConstitutionalEngine;\n\n    // In-memory storage for demo purposes. In prod, this would be Redis/Prometheus.\n    private metricsHistory: ConstitutionalMetrics[] = [];\n\n    // Simulated counters\n    private ethicsChecksPassed = 0;\n    private ethicsChecksTotal = 0;\n\n    private accurateResponses = 0;\n    private totalResponses = 0;\n\n    private positiveInteractions = 0;\n    private totalInteractions = 0;\n\n    constructor() {\n        this.engine = new ConstitutionalEngine();\n        // Initialize with some baseline data for the \"Genesis\" feel\n        this.seedInitialData();\n    }\n\n    private seedInitialData() {\n        this.ethicsChecksPassed = 48;\n        this.ethicsChecksTotal = 50;\n\n        this.accurateResponses = 142;\n        this.totalResponses = 150;\n\n        this.positiveInteractions = 89;\n        this.totalInteractions = 100;\n    }\n\n    public recordEthicsCheck(passed: boolean) {\n        this.ethicsChecksTotal++;\n        if (passed) this.ethicsChecksPassed++;\n    }\n\n    public recordTutorFeedback(accurate: boolean) {\n        this.totalResponses++;\n        if (accurate) this.accurateResponses++;\n    }\n\n    public recordInteraction(positive: boolean) {\n        this.totalInteractions++;\n        if (positive) this.positiveInteractions++;\n    }\n\n    public calculateMetrics(): ConstitutionalMetrics {\n        const alignmentScore = this.ethicsChecksTotal === 0 ? 100 : (this.ethicsChecksPassed / this.ethicsChecksTotal) * 100;\n        const truthScore = this.totalResponses === 0 ? 100 : (this.accurateResponses / this.totalResponses) * 100;\n        const ubuntuScore = this.totalInteractions === 0 ? 100 : (this.positiveInteractions / this.totalInteractions) * 100;\n\n        const metrics = {\n            alignmentScore: Math.round(alignmentScore * 10) / 10,\n            truthScore: Math.round(truthScore * 10) / 10,\n            ubuntuScore: Math.round(ubuntuScore * 10) / 10,\n            timestamp: new Date().toISOString()\n        };\n\n        this.metricsHistory.push(metrics);\n        return metrics;\n    }\n\n    public getLatestMetrics(): ConstitutionalMetrics {\n        return this.calculateMetrics();\n    }\n\n    public getMetricsHistory(): ConstitutionalMetrics[] {\n        return this.metricsHistory;\n    }\n}\n"],"mappings":"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","ignoreList":[]}