{"version":3,"names":["cov_16126youv3","actualCoverage","HarmType","DEFAULT_CONFIG","s","enabled","severityThreshold","blockOnDetection","harmTypesToCheck","Object","values","confidenceThreshold","HarmPrevention","constructor","config","b","f","harmPatterns","initializeHarmPatterns","type","VIOLENCE","patterns","keywords","severity","HATE_SPEECH","SELF_HARM","ILLEGAL","MISINFORMATION","EXPLOITATION","HARASSMENT","DANGEROUS_CONTENT","assessHarm","query","output","isHarmful","harmTypes","explanation","confidence","combinedText","detectedHarms","detectHarmTypes","calculateSeverity","calculateConfidence","generateExplanation","map","h","text","detected","harmPattern","includes","matchCount","pattern","matches","match","length","lowerText","toLowerCase","keyword","push","maxSeverity","Math","max","typeMultiplier","min","totalMatches","reduce","sum","harmTypeNames","formatHarmType","join","replace","l","toUpperCase","assessment","generateSafeResponse","primaryHarmType","getSafeResponseTemplate","harmType","templates","updateConfig","getConfig","createHarmPrevention"],"sources":["harm-prevention.ts"],"sourcesContent":["/**\n * Harm Prevention Module\n * Detects and prevents harmful content in AI outputs\n */\n\nimport {\n  HarmAssessment,\n  HarmType,\n  IHarmPrevention\n} from '../types';\n\n/**\n * Configuration for harm prevention\n */\nexport interface HarmPreventionConfig {\n  enabled: boolean;\n  severityThreshold: number; // 0-10\n  blockOnDetection: boolean;\n  harmTypesToCheck: HarmType[];\n  confidenceThreshold: number; // 0-1\n}\n\n/**\n * Default configuration\n */\nconst DEFAULT_CONFIG: HarmPreventionConfig = {\n  enabled: true,\n  severityThreshold: 5,\n  blockOnDetection: true,\n  harmTypesToCheck: Object.values(HarmType),\n  confidenceThreshold: 0.7\n};\n\n/**\n * Harm detection patterns\n */\ninterface HarmPattern {\n  type: HarmType;\n  patterns: RegExp[];\n  keywords: string[];\n  severity: number; // 0-10\n}\n\n/**\n * Harm Prevention System\n * Implements detection and prevention of harmful content\n */\nexport class HarmPrevention implements IHarmPrevention {\n  private config: HarmPreventionConfig;\n  private harmPatterns: HarmPattern[];\n\n  constructor(config: Partial<HarmPreventionConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.harmPatterns = this.initializeHarmPatterns();\n  }\n\n  /**\n   * Initialize harm detection patterns\n   */\n  private initializeHarmPatterns(): HarmPattern[] {\n    return [\n      // Violence patterns\n      {\n        type: HarmType.VIOLENCE,\n        patterns: [\n          /\\b(kill|murder|assault|attack|harm|hurt|injure|wound|stab|shoot|beat)\\s+(someone|people|person|them|him|her)\\b/gi,\n          /\\bhow\\s+to\\s+(kill|murder|harm|hurt|injure)\\b/gi,\n          /\\b(weapon|gun|knife|bomb|explosive)\\s+(make|build|create|construct)\\b/gi,\n          /\\b(torture|mutilate|dismember|maim)\\b/gi\n        ],\n        keywords: ['violence', 'assault', 'murder', 'kill', 'attack', 'harm', 'weapon', 'torture'],\n        severity: 9\n      },\n      // Hate speech patterns\n      {\n        type: HarmType.HATE_SPEECH,\n        patterns: [\n          /\\b(hate|despise|detest)\\s+(all|every)?\\s*(black|white|asian|jewish|muslim|christian|gay|lesbian|trans|women|men)\\s+(people|person|individuals)\\b/gi,\n          /\\b(inferior|superior)\\s+(race|ethnicity|gender|religion|groups?)\\b/gi,\n          /\\b(slur|derogatory|offensive)\\s+(term|word|language)\\s+(for|about|against)\\b/gi,\n          /\\b(certain|some)\\s+groups?\\s+(are|is)\\s+(inferior|superior)\\b/gi\n        ],\n        keywords: ['hate', 'racist', 'sexist', 'bigot', 'supremacy'],\n        severity: 10\n      },\n      // Self-harm patterns\n      {\n        type: HarmType.SELF_HARM,\n        patterns: [\n          /\\bhow\\s+to\\s+(commit\\s+suicide|kill\\s+(myself|yourself)|end\\s+(my|your)\\s+life)\\b/gi,\n          /\\b(suicide|self-harm|self\\s+harm|cutting|overdose)\\s+(method|way|technique)\\b/gi,\n          /\\bwant\\s+to\\s+(die|kill\\s+myself|end\\s+it\\s+all)\\b/gi\n        ],\n        keywords: ['suicide', 'self-harm', 'cutting', 'overdose', 'end my life'],\n        severity: 10\n      },\n      // Illegal activity patterns\n      {\n        type: HarmType.ILLEGAL,\n        patterns: [\n          /\\bhow\\s+to\\s+(hack|break\\s+into|steal|rob|fraud|scam|launder\\s+money)\\b/gi,\n          /\\b(illegal|illicit)\\s+(drug|substance|narcotic)\\s+(make|produce|manufacture|synthesize)\\b/gi,\n          /\\b(counterfeit|forge|fake)\\s+(money|currency|document|id|passport)\\b/gi,\n          /\\b(child|minor)\\s+(abuse|exploitation|pornography)\\b/gi\n        ],\n        keywords: ['illegal', 'hack', 'steal', 'fraud', 'counterfeit', 'drug', 'exploit'],\n        severity: 10\n      },\n      // Misinformation patterns\n      {\n        type: HarmType.MISINFORMATION,\n        patterns: [\n          /\\b(vaccine|vaccination)s?\\s+(cause|causes|caused)\\s+(autism|death|harm)\\b/gi,\n          /\\b(covid|coronavirus)\\s+(is\\s+a\\s+)?(hoax|fake|conspiracy)\\b/gi,\n          /\\b(election|vote)\\s+(was\\s+)?(rigged|stolen|fraudulent)\\b/gi,\n          /\\b(climate\\s+change|global\\s+warming)\\s+(is\\s+a\\s+)?(hoax|fake|myth)\\b/gi,\n          /\\bdo\\s+vaccines?\\s+cause\\b/gi\n        ],\n        keywords: ['hoax', 'conspiracy', 'fake news', 'misinformation', 'disinformation', 'autism'],\n        severity: 7\n      },\n      // Exploitation patterns\n      {\n        type: HarmType.EXPLOITATION,\n        patterns: [\n          /\\b(exploit|manipulate|take\\s+advantage\\s+of)\\s+(vulnerable|elderly|children|minors)\\b/gi,\n          /\\b(scam|con|trick|deceive)\\s+(people|victims|targets)\\b/gi,\n          /\\b(pyramid\\s+scheme|ponzi\\s+scheme|multi-level\\s+marketing)\\s+(join|start|create)\\b/gi\n        ],\n        keywords: ['exploit', 'scam', 'manipulate', 'deceive', 'pyramid scheme'],\n        severity: 8\n      },\n      // Harassment patterns\n      {\n        type: HarmType.HARASSMENT,\n        patterns: [\n          /\\b(stalk|harass|threaten|intimidate|bully)\\s+(someone|person|them)\\b/gi,\n          /\\b(dox|doxx|expose)\\s+(personal|private)\\s+(information|details|address)\\b/gi,\n          /\\bsend\\s+(threatening|harassing)\\s+(message|email|text)\\b/gi\n        ],\n        keywords: ['harass', 'stalk', 'threaten', 'intimidate', 'bully', 'dox'],\n        severity: 8\n      },\n      // Dangerous content patterns\n      {\n        type: HarmType.DANGEROUS_CONTENT,\n        patterns: [\n          /\\bhow\\s+to\\s+(make|build|create)\\s+(bomb|explosive|poison|toxin)\\b/gi,\n          /\\b(dangerous|hazardous)\\s+(chemical|substance)\\s+(mix|combine|create)\\b/gi,\n          /\\b(bioweapon|biological\\s+weapon|chemical\\s+weapon)\\s+(make|create|develop)\\b/gi\n        ],\n        keywords: ['bomb', 'explosive', 'poison', 'toxin', 'bioweapon', 'dangerous'],\n        severity: 10\n      }\n    ];\n  }\n\n  /**\n   * Assess harm in query and output\n   */\n  async assessHarm(query: string, output: string): Promise<HarmAssessment> {\n    if (!this.config.enabled) {\n      return {\n        isHarmful: false,\n        harmTypes: [],\n        severity: 0,\n        explanation: 'Harm prevention is disabled',\n        confidence: 1.0\n      };\n    }\n\n    // Combine query and output for comprehensive analysis\n    const combinedText = `${query} ${output}`;\n    \n    // Detect harm types\n    const detectedHarms = this.detectHarmTypes(combinedText);\n    \n    // Calculate overall severity\n    const severity = this.calculateSeverity(detectedHarms);\n    \n    // Calculate confidence\n    const confidence = this.calculateConfidence(detectedHarms);\n    \n    // Generate explanation\n    const explanation = this.generateExplanation(detectedHarms, severity);\n    \n    // Determine if harmful based on threshold\n    const isHarmful = severity >= this.config.severityThreshold && \n                      confidence >= this.config.confidenceThreshold;\n\n    return {\n      isHarmful,\n      harmTypes: detectedHarms.map(h => h.type),\n      severity,\n      explanation,\n      confidence\n    };\n  }\n\n  /**\n   * Detect specific harm types in text\n   */\n  private detectHarmTypes(text: string): Array<{ type: HarmType; matches: number; severity: number }> {\n    const detected: Array<{ type: HarmType; matches: number; severity: number }> = [];\n\n    for (const harmPattern of this.harmPatterns) {\n      // Skip if not in configured types to check\n      if (!this.config.harmTypesToCheck.includes(harmPattern.type)) {\n        continue;\n      }\n\n      let matchCount = 0;\n\n      // Check regex patterns\n      for (const pattern of harmPattern.patterns) {\n        const matches = text.match(pattern);\n        if (matches) {\n          matchCount += matches.length;\n        }\n      }\n\n      // Check keywords\n      const lowerText = text.toLowerCase();\n      for (const keyword of harmPattern.keywords) {\n        if (lowerText.includes(keyword.toLowerCase())) {\n          matchCount++;\n        }\n      }\n\n      // If matches found, add to detected harms\n      if (matchCount > 0) {\n        detected.push({\n          type: harmPattern.type,\n          matches: matchCount,\n          severity: harmPattern.severity\n        });\n      }\n    }\n\n    return detected;\n  }\n\n  /**\n   * Calculate overall severity score\n   */\n  private calculateSeverity(detectedHarms: Array<{ type: HarmType; matches: number; severity: number }>): number {\n    if (detectedHarms.length === 0) {\n      return 0;\n    }\n\n    // Use the highest severity among detected harms\n    const maxSeverity = Math.max(...detectedHarms.map(h => h.severity));\n    \n    // Adjust based on number of different harm types detected\n    const typeMultiplier = Math.min(1 + (detectedHarms.length - 1) * 0.1, 1.5);\n    \n    // Calculate final severity (capped at 10)\n    return Math.min(maxSeverity * typeMultiplier, 10);\n  }\n\n  /**\n   * Calculate confidence score\n   */\n  private calculateConfidence(detectedHarms: Array<{ type: HarmType; matches: number; severity: number }>): number {\n    if (detectedHarms.length === 0) {\n      return 1.0; // High confidence in no harm\n    }\n\n    // Calculate confidence based on number of matches\n    const totalMatches = detectedHarms.reduce((sum, h) => sum + h.matches, 0);\n    \n    // More matches = higher confidence\n    // Base confidence of 0.6, increases with matches\n    const confidence = Math.min(0.6 + (totalMatches * 0.1), 1.0);\n    \n    return confidence;\n  }\n\n  /**\n   * Generate explanation for harm assessment\n   */\n  private generateExplanation(\n    detectedHarms: Array<{ type: HarmType; matches: number; severity: number }>,\n    severity: number\n  ): string {\n    if (detectedHarms.length === 0) {\n      return 'No harmful content detected.';\n    }\n\n    const harmTypeNames = detectedHarms.map(h => this.formatHarmType(h.type)).join(', ');\n    \n    if (severity >= 9) {\n      return `Critical harmful content detected: ${harmTypeNames}. This content poses serious risks and cannot be provided.`;\n    } else if (severity >= 7) {\n      return `Significant harmful content detected: ${harmTypeNames}. This content may cause harm and should be avoided.`;\n    } else if (severity >= 5) {\n      return `Potentially harmful content detected: ${harmTypeNames}. This content requires careful consideration.`;\n    } else {\n      return `Minor concerns detected: ${harmTypeNames}. Content may need review but appears relatively safe.`;\n    }\n  }\n\n  /**\n   * Format harm type for display\n   */\n  private formatHarmType(type: HarmType): string {\n    return type.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n\n  /**\n   * Check if assessment indicates harmful content\n   */\n  isHarmful(assessment: HarmAssessment): boolean {\n    return assessment.isHarmful && \n           assessment.severity >= this.config.severityThreshold &&\n           assessment.confidence >= this.config.confidenceThreshold;\n  }\n\n  /**\n   * Generate safe response for harmful queries\n   */\n  generateSafeResponse(query: string): string {\n    // Detect the primary harm type from the query\n    const detectedHarms = this.detectHarmTypes(query);\n    \n    if (detectedHarms.length === 0) {\n      return \"I cannot provide a response to this query as it may involve harmful content.\";\n    }\n\n    const primaryHarmType = detectedHarms[0].type;\n    \n    // Generate appropriate safe response based on harm type\n    return this.getSafeResponseTemplate(primaryHarmType);\n  }\n\n  /**\n   * Get safe response template for specific harm type\n   */\n  private getSafeResponseTemplate(harmType: HarmType): string {\n    const templates: Record<HarmType, string> = {\n      [HarmType.VIOLENCE]: \n        \"I cannot provide information that could be used to harm others. If you're experiencing thoughts of violence, please reach out to a mental health professional or contact local emergency services.\",\n      \n      [HarmType.HATE_SPEECH]: \n        \"I cannot engage with content that promotes hate or discrimination. All people deserve respect and dignity regardless of their background, identity, or beliefs.\",\n      \n      [HarmType.SELF_HARM]: \n        \"I'm concerned about your wellbeing. If you're having thoughts of self-harm or suicide, please reach out for help immediately. Contact a crisis helpline: National Suicide Prevention Lifeline (US): 988, or visit your local emergency services.\",\n      \n      [HarmType.ILLEGAL]: \n        \"I cannot provide information about illegal activities. If you have questions about the law, please consult with a legal professional or law enforcement.\",\n      \n      [HarmType.MISINFORMATION]: \n        \"I cannot provide information that contradicts established scientific consensus or verified facts. For accurate information, please consult reputable sources such as peer-reviewed research, official health organizations, or fact-checking services.\",\n      \n      [HarmType.EXPLOITATION]: \n        \"I cannot provide information that could be used to exploit or manipulate others. If you're aware of exploitation, please report it to appropriate authorities.\",\n      \n      [HarmType.HARASSMENT]: \n        \"I cannot provide information that could be used to harass, threaten, or intimidate others. Such behavior is harmful and often illegal. If you're experiencing harassment, please contact local authorities.\",\n      \n      [HarmType.DANGEROUS_CONTENT]: \n        \"I cannot provide information about creating dangerous substances or weapons. This information poses serious safety risks. If you have legitimate safety concerns, please contact appropriate authorities or safety professionals.\"\n    };\n\n    return templates[harmType] || \"I cannot provide a response to this query as it involves potentially harmful content. Please rephrase your question or seek appropriate professional guidance.\";\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<HarmPreventionConfig>): void {\n    this.config = { ...this.config, ...config };\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): HarmPreventionConfig {\n    return { ...this.config };\n  }\n}\n\n/**\n * Factory function to create harm prevention instance\n */\nexport function createHarmPrevention(config?: Partial<HarmPreventionConfig>): HarmPrevention {\n  return new HarmPrevention(config);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}