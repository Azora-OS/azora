{"version":3,"names":["cov_20kuhpv4ai","actualCoverage","express","Category","getAllSkillCategories","searchCategories","router","s","Router","get","req","res","f","categories","json","success","data","total","length","error","console","status","details","Error","b","message","q","query","id","params","category","findById","populate","page","limit","sortBy","order","Listing","require","pageNum","parseInt","limitNum","skip","sortOrder","sortOptions","listings","find","name","sort","countDocuments","pagination","pages","Math","ceil","post","description","icon","parentCategory","body","existing","findOne","categoryData","isActive","parent","create","findByIdAndUpdate","$push","subcategories","_id","put","updateData","new","runValidators","delete","totalCategories","totalSubcategories","$ne","totalListings","topCategories","aggregate","$match","$group","count","$sum","$sort","$limit"],"sources":["categoryRoutes.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport express, { Request, Response } from 'express';\nimport { Category } from '../models/Listing';\nimport { getAllSkillCategories, searchCategories } from '../seed-categories';\n\nconst router = express.Router();\n\n/**\n * GET /api/categories\n * Get all active categories with their subcategories\n */\nrouter.get('/', async (req: Request, res: Response) => {\n  try {\n    const categories = await getAllSkillCategories();\n    \n    res.json({\n      success: true,\n      data: categories,\n      total: categories.length\n    });\n  } catch (error) {\n    console.error('Error fetching categories:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to fetch categories',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * GET /api/categories/search\n * Search categories by name or description\n */\nrouter.get('/search', async (req: Request, res: Response) => {\n  try {\n    const { q } = req.query;\n    \n    if (!q || typeof q !== 'string') {\n      return res.status(400).json({\n        success: false,\n        error: 'Search query parameter \"q\" is required'\n      });\n    }\n    \n    const categories = await searchCategories(q);\n    \n    res.json({\n      success: true,\n      data: categories,\n      total: categories.length,\n      query: q\n    });\n  } catch (error) {\n    console.error('Error searching categories:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to search categories',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * GET /api/categories/:id\n * Get a specific category by ID with its subcategories\n */\nrouter.get('/:id', async (req: Request, res: Response) => {\n  try {\n    const { id } = req.params;\n    \n    const category = await Category.findById(id)\n      .populate('subcategories')\n      .populate('parentCategory');\n    \n    if (!category) {\n      return res.status(404).json({\n        success: false,\n        error: 'Category not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: category\n    });\n  } catch (error) {\n    console.error('Error fetching category:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to fetch category',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * GET /api/categories/:id/listings\n * Get all active listings for a specific category\n */\nrouter.get('/:id/listings', async (req: Request, res: Response) => {\n  try {\n    const { id } = req.params;\n    const { page = 1, limit = 20, sortBy = 'createdAt', order = 'desc' } = req.query;\n    \n    const category = await Category.findById(id);\n    if (!category) {\n      return res.status(404).json({\n        success: false,\n        error: 'Category not found'\n      });\n    }\n    \n    // Import Listing model\n    const { Listing } = require('../models/Listing');\n    \n    const pageNum = parseInt(page as string);\n    const limitNum = parseInt(limit as string);\n    const skip = (pageNum - 1) * limitNum;\n    \n    const sortOrder = order === 'asc' ? 1 : -1;\n    const sortOptions: any = { [sortBy as string]: sortOrder };\n    \n    const listings = await Listing.find({\n      category: category.name,\n      status: 'active'\n    })\n      .sort(sortOptions)\n      .skip(skip)\n      .limit(limitNum);\n    \n    const total = await Listing.countDocuments({\n      category: category.name,\n      status: 'active'\n    });\n    \n    res.json({\n      success: true,\n      data: listings,\n      pagination: {\n        page: pageNum,\n        limit: limitNum,\n        total,\n        pages: Math.ceil(total / limitNum)\n      }\n    });\n  } catch (error) {\n    console.error('Error fetching category listings:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to fetch category listings',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * POST /api/categories\n * Create a new category (admin only - add authentication middleware)\n */\nrouter.post('/', async (req: Request, res: Response) => {\n  try {\n    const { name, description, icon, parentCategory } = req.body;\n    \n    if (!name || !description) {\n      return res.status(400).json({\n        success: false,\n        error: 'Name and description are required'\n      });\n    }\n    \n    // Check if category already exists\n    const existing = await Category.findOne({ name });\n    if (existing) {\n      return res.status(409).json({\n        success: false,\n        error: 'Category with this name already exists'\n      });\n    }\n    \n    const categoryData: any = {\n      name,\n      description,\n      icon,\n      isActive: true\n    };\n    \n    if (parentCategory) {\n      // Verify parent exists\n      const parent = await Category.findById(parentCategory);\n      if (!parent) {\n        return res.status(404).json({\n          success: false,\n          error: 'Parent category not found'\n        });\n      }\n      categoryData.parentCategory = parentCategory;\n    }\n    \n    const category = await Category.create(categoryData);\n    \n    // If this is a subcategory, add it to parent's subcategories\n    if (parentCategory) {\n      await Category.findByIdAndUpdate(\n        parentCategory,\n        { $push: { subcategories: category._id } }\n      );\n    }\n    \n    res.status(201).json({\n      success: true,\n      data: category\n    });\n  } catch (error) {\n    console.error('Error creating category:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create category',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * PUT /api/categories/:id\n * Update a category (admin only - add authentication middleware)\n */\nrouter.put('/:id', async (req: Request, res: Response) => {\n  try {\n    const { id } = req.params;\n    const { name, description, icon, isActive } = req.body;\n    \n    const updateData: any = {};\n    if (name) {updateData.name = name;}\n    if (description) {updateData.description = description;}\n    if (icon) {updateData.icon = icon;}\n    if (typeof isActive === 'boolean') {updateData.isActive = isActive;}\n    \n    const category = await Category.findByIdAndUpdate(\n      id,\n      updateData,\n      { new: true, runValidators: true }\n    );\n    \n    if (!category) {\n      return res.status(404).json({\n        success: false,\n        error: 'Category not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: category\n    });\n  } catch (error) {\n    console.error('Error updating category:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update category',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * DELETE /api/categories/:id\n * Delete a category (soft delete - sets isActive to false)\n * (admin only - add authentication middleware)\n */\nrouter.delete('/:id', async (req: Request, res: Response) => {\n  try {\n    const { id } = req.params;\n    \n    const category = await Category.findByIdAndUpdate(\n      id,\n      { isActive: false },\n      { new: true }\n    );\n    \n    if (!category) {\n      return res.status(404).json({\n        success: false,\n        error: 'Category not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      message: 'Category deactivated successfully',\n      data: category\n    });\n  } catch (error) {\n    console.error('Error deleting category:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to delete category',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * GET /api/categories/stats/summary\n * Get statistics about categories and listings\n */\nrouter.get('/stats/summary', async (req: Request, res: Response) => {\n  try {\n    const totalCategories = await Category.countDocuments({ isActive: true, parentCategory: null });\n    const totalSubcategories = await Category.countDocuments({ isActive: true, parentCategory: { $ne: null } });\n    \n    // Import Listing model\n    const { Listing } = require('../models/Listing');\n    const totalListings = await Listing.countDocuments({ status: 'active' });\n    \n    // Get top categories by listing count\n    const topCategories = await Listing.aggregate([\n      { $match: { status: 'active' } },\n      { $group: { _id: '$category', count: { $sum: 1 } } },\n      { $sort: { count: -1 } },\n      { $limit: 10 }\n    ]);\n    \n    res.json({\n      success: true,\n      data: {\n        totalCategories,\n        totalSubcategories,\n        totalListings,\n        topCategories\n      }\n    });\n  } catch (error) {\n    console.error('Error fetching category stats:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to fetch category statistics',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\nexport default router;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}