ebb83b5342e94f6cfab6a2849a27d3c0
/* istanbul ignore next */
function cov_1pdpooe1pu() {
  var path = "/workspaces/azora/services/elara-onboarding/src/services/contract.service.ts";
  var hash = "71d3f0ad0ed1b6d8f7ba81d865a5ce7f4c19d0f0";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/elara-onboarding/src/services/contract.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 32,
          column: 45
        },
        end: {
          line: 32,
          column: 54
        }
      },
      "1": {
        start: {
          line: 34,
          column: 65
        },
        end: {
          line: 43,
          column: 3
        }
      },
      "2": {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 46,
          column: 53
        }
      },
      "3": {
        start: {
          line: 53,
          column: 4
        },
        end: {
          line: 81,
          column: 5
        }
      },
      "4": {
        start: {
          line: 54,
          column: 6
        },
        end: {
          line: 54,
          column: 85
        }
      },
      "5": {
        start: {
          line: 56,
          column: 25
        },
        end: {
          line: 56,
          column: 59
        }
      },
      "6": {
        start: {
          line: 57,
          column: 23
        },
        end: {
          line: 57,
          column: 55
        }
      },
      "7": {
        start: {
          line: 59,
          column: 6
        },
        end: {
          line: 61,
          column: 7
        }
      },
      "8": {
        start: {
          line: 60,
          column: 8
        },
        end: {
          line: 60,
          column: 75
        }
      },
      "9": {
        start: {
          line: 63,
          column: 33
        },
        end: {
          line: 72,
          column: 7
        }
      },
      "10": {
        start: {
          line: 74,
          column: 6
        },
        end: {
          line: 74,
          column: 47
        }
      },
      "11": {
        start: {
          line: 75,
          column: 6
        },
        end: {
          line: 75,
          column: 60
        }
      },
      "12": {
        start: {
          line: 77,
          column: 6
        },
        end: {
          line: 77,
          column: 22
        }
      },
      "13": {
        start: {
          line: 79,
          column: 6
        },
        end: {
          line: 79,
          column: 61
        }
      },
      "14": {
        start: {
          line: 80,
          column: 6
        },
        end: {
          line: 80,
          column: 18
        }
      },
      "15": {
        start: {
          line: 88,
          column: 4
        },
        end: {
          line: 94,
          column: 5
        }
      },
      "16": {
        start: {
          line: 89,
          column: 6
        },
        end: {
          line: 89,
          column: 58
        }
      },
      "17": {
        start: {
          line: 90,
          column: 6
        },
        end: {
          line: 90,
          column: 52
        }
      },
      "18": {
        start: {
          line: 92,
          column: 6
        },
        end: {
          line: 92,
          column: 58
        }
      },
      "19": {
        start: {
          line: 93,
          column: 6
        },
        end: {
          line: 93,
          column: 18
        }
      },
      "20": {
        start: {
          line: 101,
          column: 4
        },
        end: {
          line: 107,
          column: 5
        }
      },
      "21": {
        start: {
          line: 102,
          column: 6
        },
        end: {
          line: 102,
          column: 64
        }
      },
      "22": {
        start: {
          line: 103,
          column: 6
        },
        end: {
          line: 103,
          column: 82
        }
      },
      "23": {
        start: {
          line: 103,
          column: 61
        },
        end: {
          line: 103,
          column: 80
        }
      },
      "24": {
        start: {
          line: 105,
          column: 6
        },
        end: {
          line: 105,
          column: 64
        }
      },
      "25": {
        start: {
          line: 106,
          column: 6
        },
        end: {
          line: 106,
          column: 18
        }
      },
      "26": {
        start: {
          line: 114,
          column: 4
        },
        end: {
          line: 143,
          column: 5
        }
      },
      "27": {
        start: {
          line: 115,
          column: 6
        },
        end: {
          line: 115,
          column: 58
        }
      },
      "28": {
        start: {
          line: 117,
          column: 23
        },
        end: {
          line: 117,
          column: 53
        }
      },
      "29": {
        start: {
          line: 118,
          column: 6
        },
        end: {
          line: 120,
          column: 7
        }
      },
      "30": {
        start: {
          line: 119,
          column: 8
        },
        end: {
          line: 119,
          column: 61
        }
      },
      "31": {
        start: {
          line: 122,
          column: 6
        },
        end: {
          line: 124,
          column: 7
        }
      },
      "32": {
        start: {
          line: 123,
          column: 8
        },
        end: {
          line: 123,
          column: 66
        }
      },
      "33": {
        start: {
          line: 126,
          column: 6
        },
        end: {
          line: 126,
          column: 33
        }
      },
      "34": {
        start: {
          line: 127,
          column: 6
        },
        end: {
          line: 127,
          column: 37
        }
      },
      "35": {
        start: {
          line: 128,
          column: 6
        },
        end: {
          line: 133,
          column: 8
        }
      },
      "36": {
        start: {
          line: 134,
          column: 6
        },
        end: {
          line: 134,
          column: 38
        }
      },
      "37": {
        start: {
          line: 136,
          column: 6
        },
        end: {
          line: 136,
          column: 47
        }
      },
      "38": {
        start: {
          line: 137,
          column: 6
        },
        end: {
          line: 137,
          column: 57
        }
      },
      "39": {
        start: {
          line: 139,
          column: 6
        },
        end: {
          line: 139,
          column: 22
        }
      },
      "40": {
        start: {
          line: 141,
          column: 6
        },
        end: {
          line: 141,
          column: 58
        }
      },
      "41": {
        start: {
          line: 142,
          column: 6
        },
        end: {
          line: 142,
          column: 18
        }
      },
      "42": {
        start: {
          line: 150,
          column: 4
        },
        end: {
          line: 168,
          column: 5
        }
      },
      "43": {
        start: {
          line: 151,
          column: 6
        },
        end: {
          line: 151,
          column: 79
        }
      },
      "44": {
        start: {
          line: 153,
          column: 23
        },
        end: {
          line: 153,
          column: 53
        }
      },
      "45": {
        start: {
          line: 154,
          column: 6
        },
        end: {
          line: 156,
          column: 7
        }
      },
      "46": {
        start: {
          line: 155,
          column: 8
        },
        end: {
          line: 155,
          column: 61
        }
      },
      "47": {
        start: {
          line: 158,
          column: 6
        },
        end: {
          line: 158,
          column: 35
        }
      },
      "48": {
        start: {
          line: 159,
          column: 6
        },
        end: {
          line: 159,
          column: 38
        }
      },
      "49": {
        start: {
          line: 161,
          column: 6
        },
        end: {
          line: 161,
          column: 47
        }
      },
      "50": {
        start: {
          line: 162,
          column: 6
        },
        end: {
          line: 162,
          column: 59
        }
      },
      "51": {
        start: {
          line: 164,
          column: 6
        },
        end: {
          line: 164,
          column: 22
        }
      },
      "52": {
        start: {
          line: 166,
          column: 6
        },
        end: {
          line: 166,
          column: 60
        }
      },
      "53": {
        start: {
          line: 167,
          column: 6
        },
        end: {
          line: 167,
          column: 18
        }
      },
      "54": {
        start: {
          line: 175,
          column: 4
        },
        end: {
          line: 193,
          column: 5
        }
      },
      "55": {
        start: {
          line: 176,
          column: 6
        },
        end: {
          line: 176,
          column: 74
        }
      },
      "56": {
        start: {
          line: 178,
          column: 23
        },
        end: {
          line: 178,
          column: 53
        }
      },
      "57": {
        start: {
          line: 179,
          column: 6
        },
        end: {
          line: 181,
          column: 7
        }
      },
      "58": {
        start: {
          line: 180,
          column: 8
        },
        end: {
          line: 180,
          column: 61
        }
      },
      "59": {
        start: {
          line: 183,
          column: 6
        },
        end: {
          line: 185,
          column: 7
        }
      },
      "60": {
        start: {
          line: 184,
          column: 8
        },
        end: {
          line: 184,
          column: 21
        }
      },
      "61": {
        start: {
          line: 189,
          column: 6
        },
        end: {
          line: 189,
          column: 52
        }
      },
      "62": {
        start: {
          line: 191,
          column: 6
        },
        end: {
          line: 191,
          column: 61
        }
      },
      "63": {
        start: {
          line: 192,
          column: 6
        },
        end: {
          line: 192,
          column: 18
        }
      },
      "64": {
        start: {
          line: 200,
          column: 4
        },
        end: {
          line: 208,
          column: 5
        }
      },
      "65": {
        start: {
          line: 201,
          column: 6
        },
        end: {
          line: 201,
          column: 71
        }
      },
      "66": {
        start: {
          line: 202,
          column: 6
        },
        end: {
          line: 204,
          column: 8
        }
      },
      "67": {
        start: {
          line: 203,
          column: 13
        },
        end: {
          line: 203,
          column: 57
        }
      },
      "68": {
        start: {
          line: 206,
          column: 6
        },
        end: {
          line: 206,
          column: 66
        }
      },
      "69": {
        start: {
          line: 207,
          column: 6
        },
        end: {
          line: 207,
          column: 18
        }
      },
      "70": {
        start: {
          line: 214,
          column: 24
        },
        end: {
          line: 243,
          column: 5
        }
      },
      "71": {
        start: {
          line: 244,
          column: 4
        },
        end: {
          line: 244,
          column: 23
        }
      },
      "72": {
        start: {
          line: 250,
          column: 17
        },
        end: {
          line: 250,
          column: 58
        }
      },
      "73": {
        start: {
          line: 251,
          column: 4
        },
        end: {
          line: 251,
          column: 48
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 45,
            column: 2
          },
          end: {
            line: 45,
            column: 3
          }
        },
        loc: {
          start: {
            line: 45,
            column: 16
          },
          end: {
            line: 47,
            column: 3
          }
        },
        line: 45
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 52,
            column: 2
          },
          end: {
            line: 52,
            column: 3
          }
        },
        loc: {
          start: {
            line: 52,
            column: 80
          },
          end: {
            line: 82,
            column: 3
          }
        },
        line: 52
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 87,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        },
        loc: {
          start: {
            line: 87,
            column: 66
          },
          end: {
            line: 95,
            column: 3
          }
        },
        line: 87
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 100,
            column: 2
          },
          end: {
            line: 100,
            column: 3
          }
        },
        loc: {
          start: {
            line: 100,
            column: 62
          },
          end: {
            line: 108,
            column: 3
          }
        },
        line: 100
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 103,
            column: 56
          },
          end: {
            line: 103,
            column: 57
          }
        },
        loc: {
          start: {
            line: 103,
            column: 61
          },
          end: {
            line: 103,
            column: 80
          }
        },
        line: 103
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 113,
            column: 2
          },
          end: {
            line: 113,
            column: 3
          }
        },
        loc: {
          start: {
            line: 113,
            column: 98
          },
          end: {
            line: 144,
            column: 3
          }
        },
        line: 113
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 149,
            column: 2
          },
          end: {
            line: 149,
            column: 3
          }
        },
        loc: {
          start: {
            line: 149,
            column: 78
          },
          end: {
            line: 169,
            column: 3
          }
        },
        line: 149
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 174,
            column: 2
          },
          end: {
            line: 174,
            column: 3
          }
        },
        loc: {
          start: {
            line: 174,
            column: 62
          },
          end: {
            line: 194,
            column: 3
          }
        },
        line: 174
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 199,
            column: 2
          },
          end: {
            line: 199,
            column: 3
          }
        },
        loc: {
          start: {
            line: 199,
            column: 64
          },
          end: {
            line: 209,
            column: 3
          }
        },
        line: 199
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 203,
            column: 8
          },
          end: {
            line: 203,
            column: 9
          }
        },
        loc: {
          start: {
            line: 203,
            column: 13
          },
          end: {
            line: 203,
            column: 57
          }
        },
        line: 203
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 213,
            column: 2
          },
          end: {
            line: 213,
            column: 3
          }
        },
        loc: {
          start: {
            line: 213,
            column: 62
          },
          end: {
            line: 245,
            column: 3
          }
        },
        line: 213
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 247,
            column: 2
          },
          end: {
            line: 247,
            column: 3
          }
        },
        loc: {
          start: {
            line: 247,
            column: 78
          },
          end: {
            line: 252,
            column: 3
          }
        },
        line: 247
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 59,
            column: 6
          },
          end: {
            line: 61,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 59,
            column: 6
          },
          end: {
            line: 61,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 59
      },
      "1": {
        loc: {
          start: {
            line: 90,
            column: 13
          },
          end: {
            line: 90,
            column: 51
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 90,
            column: 13
          },
          end: {
            line: 90,
            column: 43
          }
        }, {
          start: {
            line: 90,
            column: 47
          },
          end: {
            line: 90,
            column: 51
          }
        }],
        line: 90
      },
      "2": {
        loc: {
          start: {
            line: 118,
            column: 6
          },
          end: {
            line: 120,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 118,
            column: 6
          },
          end: {
            line: 120,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 118
      },
      "3": {
        loc: {
          start: {
            line: 122,
            column: 6
          },
          end: {
            line: 124,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 122,
            column: 6
          },
          end: {
            line: 124,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 122
      },
      "4": {
        loc: {
          start: {
            line: 154,
            column: 6
          },
          end: {
            line: 156,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 154,
            column: 6
          },
          end: {
            line: 156,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 154
      },
      "5": {
        loc: {
          start: {
            line: 179,
            column: 6
          },
          end: {
            line: 181,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 179,
            column: 6
          },
          end: {
            line: 181,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 179
      },
      "6": {
        loc: {
          start: {
            line: 183,
            column: 6
          },
          end: {
            line: 185,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 183,
            column: 6
          },
          end: {
            line: 185,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 183
      },
      "7": {
        loc: {
          start: {
            line: 183,
            column: 10
          },
          end: {
            line: 183,
            column: 65
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 183,
            column: 10
          },
          end: {
            line: 183,
            column: 38
          }
        }, {
          start: {
            line: 183,
            column: 42
          },
          end: {
            line: 183,
            column: 65
          }
        }],
        line: 183
      },
      "8": {
        loc: {
          start: {
            line: 203,
            column: 13
          },
          end: {
            line: 203,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 203,
            column: 13
          },
          end: {
            line: 203,
            column: 32
          }
        }, {
          start: {
            line: 203,
            column: 36
          },
          end: {
            line: 203,
            column: 57
          }
        }],
        line: 203
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "71d3f0ad0ed1b6d8f7ba81d865a5ce7f4c19d0f0"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1pdpooe1pu = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1pdpooe1pu();
/**
 * Contract Service
 * 
 * Manages contract generation and e-signature workflows
 */

import { ElaraLogger } from '../utils/logger';
export class ContractService {
  contracts =
  /* istanbul ignore next */
  (cov_1pdpooe1pu().s[0]++, new Map());
  contractTemplates =
  /* istanbul ignore next */
  (cov_1pdpooe1pu().s[1]++, {
    founder: 'Founder Terms and Conditions - Creator Agreement',
    student: 'Student Terms and Conditions - Educational Access Agreement',
    teacher: 'Educator Terms and Conditions - Teaching Agreement',
    researcher: 'Researcher Terms and Conditions - Research Agreement',
    professional: 'Professional Terms and Conditions - Professional Services Agreement',
    enterprise: 'Enterprise Terms and Conditions - Enterprise License Agreement',
    'non-profit': 'Non-Profit Terms and Conditions - Non-Profit Agreement',
    government: 'Government Terms and Conditions - Government Services Agreement'
  });
  constructor() {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[0]++;
    cov_1pdpooe1pu().s[2]++;
    this.logger = new ElaraLogger('ContractService');
  }

  /**
   * Generate contract for user
   */
  async generateContract(userId, userType) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[1]++;
    cov_1pdpooe1pu().s[3]++;
    try {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[4]++;
      this.logger.info(`Generating contract for user: ${userId}, type: ${userType}`);
      const contractId =
      /* istanbul ignore next */
      (cov_1pdpooe1pu().s[5]++, `contract_${userId}_${Date.now()}`);
      const template =
      /* istanbul ignore next */
      (cov_1pdpooe1pu().s[6]++, this.contractTemplates[userType]);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[7]++;
      if (!template) {
        /* istanbul ignore next */
        cov_1pdpooe1pu().b[0][0]++;
        cov_1pdpooe1pu().s[8]++;
        throw new Error(`No contract template for user type: ${userType}`);
      } else
      /* istanbul ignore next */
      {
        cov_1pdpooe1pu().b[0][1]++;
      }
      const contract =
      /* istanbul ignore next */
      (cov_1pdpooe1pu().s[9]++, {
        id: contractId,
        userId,
        userType,
        contractType: template,
        status: 'pending',
        content: this.generateContractContent(userType),
        createdAt: new Date(),
        updatedAt: new Date()
      });
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[10]++;
      this.contracts.set(contractId, contract);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[11]++;
      this.logger.info(`Contract generated: ${contractId}`);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[12]++;
      return contract;
    } catch (error) {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[13]++;
      this.logger.error('Error generating contract:', error);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[14]++;
      throw error;
    }
  }

  /**
   * Get contract by ID
   */
  async getContract(contractId) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[2]++;
    cov_1pdpooe1pu().s[15]++;
    try {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[16]++;
      this.logger.info(`Getting contract: ${contractId}`);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[17]++;
      return /* istanbul ignore next */(cov_1pdpooe1pu().b[1][0]++, this.contracts.get(contractId)) ||
      /* istanbul ignore next */
      (cov_1pdpooe1pu().b[1][1]++, null);
    } catch (error) {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[18]++;
      this.logger.error('Error getting contract:', error);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[19]++;
      throw error;
    }
  }

  /**
   * Get contracts for user
   */
  async getUserContracts(userId) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[3]++;
    cov_1pdpooe1pu().s[20]++;
    try {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[21]++;
      this.logger.info(`Getting contracts for user: ${userId}`);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[22]++;
      return Array.from(this.contracts.values()).filter(c => {
        /* istanbul ignore next */
        cov_1pdpooe1pu().f[4]++;
        cov_1pdpooe1pu().s[23]++;
        return c.userId === userId;
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[24]++;
      this.logger.error('Error getting user contracts:', error);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[25]++;
      throw error;
    }
  }

  /**
   * Sign contract
   */
  async signContract(contractId, signedBy, ipAddress) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[5]++;
    cov_1pdpooe1pu().s[26]++;
    try {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[27]++;
      this.logger.info(`Signing contract: ${contractId}`);
      const contract =
      /* istanbul ignore next */
      (cov_1pdpooe1pu().s[28]++, this.contracts.get(contractId));
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[29]++;
      if (!contract) {
        /* istanbul ignore next */
        cov_1pdpooe1pu().b[2][0]++;
        cov_1pdpooe1pu().s[30]++;
        throw new Error(`Contract not found: ${contractId}`);
      } else
      /* istanbul ignore next */
      {
        cov_1pdpooe1pu().b[2][1]++;
      }
      cov_1pdpooe1pu().s[31]++;
      if (contract.status === 'signed') {
        /* istanbul ignore next */
        cov_1pdpooe1pu().b[3][0]++;
        cov_1pdpooe1pu().s[32]++;
        throw new Error(`Contract already signed: ${contractId}`);
      } else
      /* istanbul ignore next */
      {
        cov_1pdpooe1pu().b[3][1]++;
      }
      cov_1pdpooe1pu().s[33]++;
      contract.status = 'signed';
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[34]++;
      contract.signedAt = new Date();
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[35]++;
      contract.signatureData = {
        signedBy,
        timestamp: new Date(),
        ipAddress,
        signatureHash: this.generateSignatureHash(contractId, signedBy)
      };
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[36]++;
      contract.updatedAt = new Date();
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[37]++;
      this.contracts.set(contractId, contract);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[38]++;
      this.logger.info(`Contract signed: ${contractId}`);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[39]++;
      return contract;
    } catch (error) {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[40]++;
      this.logger.error('Error signing contract:', error);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[41]++;
      throw error;
    }
  }

  /**
   * Reject contract
   */
  async rejectContract(contractId, reason) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[6]++;
    cov_1pdpooe1pu().s[42]++;
    try {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[43]++;
      this.logger.info(`Rejecting contract: ${contractId}, reason: ${reason}`);
      const contract =
      /* istanbul ignore next */
      (cov_1pdpooe1pu().s[44]++, this.contracts.get(contractId));
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[45]++;
      if (!contract) {
        /* istanbul ignore next */
        cov_1pdpooe1pu().b[4][0]++;
        cov_1pdpooe1pu().s[46]++;
        throw new Error(`Contract not found: ${contractId}`);
      } else
      /* istanbul ignore next */
      {
        cov_1pdpooe1pu().b[4][1]++;
      }
      cov_1pdpooe1pu().s[47]++;
      contract.status = 'rejected';
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[48]++;
      contract.updatedAt = new Date();
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[49]++;
      this.contracts.set(contractId, contract);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[50]++;
      this.logger.info(`Contract rejected: ${contractId}`);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[51]++;
      return contract;
    } catch (error) {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[52]++;
      this.logger.error('Error rejecting contract:', error);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[53]++;
      throw error;
    }
  }

  /**
   * Verify contract signature
   */
  async verifySignature(contractId) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[7]++;
    cov_1pdpooe1pu().s[54]++;
    try {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[55]++;
      this.logger.info(`Verifying signature for contract: ${contractId}`);
      const contract =
      /* istanbul ignore next */
      (cov_1pdpooe1pu().s[56]++, this.contracts.get(contractId));
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[57]++;
      if (!contract) {
        /* istanbul ignore next */
        cov_1pdpooe1pu().b[5][0]++;
        cov_1pdpooe1pu().s[58]++;
        throw new Error(`Contract not found: ${contractId}`);
      } else
      /* istanbul ignore next */
      {
        cov_1pdpooe1pu().b[5][1]++;
      }
      cov_1pdpooe1pu().s[59]++;
      if (
      /* istanbul ignore next */
      (cov_1pdpooe1pu().b[7][0]++, contract.status !== 'signed') ||
      /* istanbul ignore next */
      (cov_1pdpooe1pu().b[7][1]++, !contract.signatureData)) {
        /* istanbul ignore next */
        cov_1pdpooe1pu().b[6][0]++;
        cov_1pdpooe1pu().s[60]++;
        return false;
      } else
      /* istanbul ignore next */
      {
        cov_1pdpooe1pu().b[6][1]++;
      }

      // In production, would verify actual signature
      // For now, just check that signature data exists
      cov_1pdpooe1pu().s[61]++;
      return !!contract.signatureData.signatureHash;
    } catch (error) {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[62]++;
      this.logger.error('Error verifying signature:', error);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[63]++;
      throw error;
    }
  }

  /**
   * Get signed contracts for user
   */
  async getSignedContracts(userId) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[8]++;
    cov_1pdpooe1pu().s[64]++;
    try {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[65]++;
      this.logger.info(`Getting signed contracts for user: ${userId}`);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[66]++;
      return Array.from(this.contracts.values()).filter(c => {
        /* istanbul ignore next */
        cov_1pdpooe1pu().f[9]++;
        cov_1pdpooe1pu().s[67]++;
        return /* istanbul ignore next */(cov_1pdpooe1pu().b[8][0]++, c.userId === userId) &&
        /* istanbul ignore next */
        (cov_1pdpooe1pu().b[8][1]++, c.status === 'signed');
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[68]++;
      this.logger.error('Error getting signed contracts:', error);
      /* istanbul ignore next */
      cov_1pdpooe1pu().s[69]++;
      throw error;
    }
  }

  // Private helper methods

  generateContractContent(userType) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[10]++;
    const baseContent =
    /* istanbul ignore next */
    (cov_1pdpooe1pu().s[70]++, `
# ${this.contractTemplates[userType]}

## Terms and Conditions

This agreement ("Agreement") is entered into as of the date of acceptance.

### 1. Services
The platform provides services tailored for ${userType} users.

### 2. User Responsibilities
User agrees to comply with all applicable laws and regulations.

### 3. Intellectual Property
All content and materials are protected by intellectual property laws.

### 4. Limitation of Liability
The platform is provided "as is" without warranties.

### 5. Termination
Either party may terminate this agreement with written notice.

### 6. Governing Law
This agreement is governed by applicable laws.

### 7. Entire Agreement
This constitutes the entire agreement between parties.

By signing below, you acknowledge that you have read, understood, and agree to be bound by these terms.
    `);
    /* istanbul ignore next */
    cov_1pdpooe1pu().s[71]++;
    return baseContent;
  }
  generateSignatureHash(contractId, signedBy) {
    /* istanbul ignore next */
    cov_1pdpooe1pu().f[11]++;
    // In production, would generate actual cryptographic hash
    // For now, generate a simple hash
    const data =
    /* istanbul ignore next */
    (cov_1pdpooe1pu().s[72]++, `${contractId}:${signedBy}:${Date.now()}`);
    /* istanbul ignore next */
    cov_1pdpooe1pu().s[73]++;
    return Buffer.from(data).toString('base64');
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXBkcG9vZTFwdSIsImFjdHVhbENvdmVyYWdlIiwiRWxhcmFMb2dnZXIiLCJDb250cmFjdFNlcnZpY2UiLCJjb250cmFjdHMiLCJzIiwiTWFwIiwiY29udHJhY3RUZW1wbGF0ZXMiLCJmb3VuZGVyIiwic3R1ZGVudCIsInRlYWNoZXIiLCJyZXNlYXJjaGVyIiwicHJvZmVzc2lvbmFsIiwiZW50ZXJwcmlzZSIsImdvdmVybm1lbnQiLCJjb25zdHJ1Y3RvciIsImYiLCJsb2dnZXIiLCJnZW5lcmF0ZUNvbnRyYWN0IiwidXNlcklkIiwidXNlclR5cGUiLCJpbmZvIiwiY29udHJhY3RJZCIsIkRhdGUiLCJub3ciLCJ0ZW1wbGF0ZSIsImIiLCJFcnJvciIsImNvbnRyYWN0IiwiaWQiLCJjb250cmFjdFR5cGUiLCJzdGF0dXMiLCJjb250ZW50IiwiZ2VuZXJhdGVDb250cmFjdENvbnRlbnQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJzZXQiLCJlcnJvciIsImdldENvbnRyYWN0IiwiZ2V0IiwiZ2V0VXNlckNvbnRyYWN0cyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImZpbHRlciIsImMiLCJzaWduQ29udHJhY3QiLCJzaWduZWRCeSIsImlwQWRkcmVzcyIsInNpZ25lZEF0Iiwic2lnbmF0dXJlRGF0YSIsInRpbWVzdGFtcCIsInNpZ25hdHVyZUhhc2giLCJnZW5lcmF0ZVNpZ25hdHVyZUhhc2giLCJyZWplY3RDb250cmFjdCIsInJlYXNvbiIsInZlcmlmeVNpZ25hdHVyZSIsImdldFNpZ25lZENvbnRyYWN0cyIsImJhc2VDb250ZW50IiwiZGF0YSIsIkJ1ZmZlciIsInRvU3RyaW5nIl0sInNvdXJjZXMiOlsiY29udHJhY3Quc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnRyYWN0IFNlcnZpY2VcbiAqIFxuICogTWFuYWdlcyBjb250cmFjdCBnZW5lcmF0aW9uIGFuZCBlLXNpZ25hdHVyZSB3b3JrZmxvd3NcbiAqL1xuXG5pbXBvcnQgeyBFbGFyYUxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgeyBVc2VyVHlwZSB9IGZyb20gJy4vdXNlci10eXBlLWRldGVjdGlvbi5zZXJ2aWNlJztcblxuZXhwb3J0IGludGVyZmFjZSBDb250cmFjdCB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICB1c2VyVHlwZTogVXNlclR5cGU7XG4gIGNvbnRyYWN0VHlwZTogc3RyaW5nO1xuICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdzZW50JyB8ICdzaWduZWQnIHwgJ3JlamVjdGVkJztcbiAgY29udGVudDogc3RyaW5nO1xuICBzaWduZWRBdD86IERhdGU7XG4gIHNpZ25hdHVyZURhdGE/OiBTaWduYXR1cmVEYXRhO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaWduYXR1cmVEYXRhIHtcbiAgc2lnbmVkQnk6IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBpcEFkZHJlc3M/OiBzdHJpbmc7XG4gIHNpZ25hdHVyZUhhc2g/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBDb250cmFjdFNlcnZpY2Uge1xuICBwcml2YXRlIGxvZ2dlcjogRWxhcmFMb2dnZXI7XG4gIHByaXZhdGUgY29udHJhY3RzOiBNYXA8c3RyaW5nLCBDb250cmFjdD4gPSBuZXcgTWFwKCk7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBjb250cmFjdFRlbXBsYXRlczogUmVjb3JkPFVzZXJUeXBlLCBzdHJpbmc+ID0ge1xuICAgIGZvdW5kZXI6ICdGb3VuZGVyIFRlcm1zIGFuZCBDb25kaXRpb25zIC0gQ3JlYXRvciBBZ3JlZW1lbnQnLFxuICAgIHN0dWRlbnQ6ICdTdHVkZW50IFRlcm1zIGFuZCBDb25kaXRpb25zIC0gRWR1Y2F0aW9uYWwgQWNjZXNzIEFncmVlbWVudCcsXG4gICAgdGVhY2hlcjogJ0VkdWNhdG9yIFRlcm1zIGFuZCBDb25kaXRpb25zIC0gVGVhY2hpbmcgQWdyZWVtZW50JyxcbiAgICByZXNlYXJjaGVyOiAnUmVzZWFyY2hlciBUZXJtcyBhbmQgQ29uZGl0aW9ucyAtIFJlc2VhcmNoIEFncmVlbWVudCcsXG4gICAgcHJvZmVzc2lvbmFsOiAnUHJvZmVzc2lvbmFsIFRlcm1zIGFuZCBDb25kaXRpb25zIC0gUHJvZmVzc2lvbmFsIFNlcnZpY2VzIEFncmVlbWVudCcsXG4gICAgZW50ZXJwcmlzZTogJ0VudGVycHJpc2UgVGVybXMgYW5kIENvbmRpdGlvbnMgLSBFbnRlcnByaXNlIExpY2Vuc2UgQWdyZWVtZW50JyxcbiAgICAnbm9uLXByb2ZpdCc6ICdOb24tUHJvZml0IFRlcm1zIGFuZCBDb25kaXRpb25zIC0gTm9uLVByb2ZpdCBBZ3JlZW1lbnQnLFxuICAgIGdvdmVybm1lbnQ6ICdHb3Zlcm5tZW50IFRlcm1zIGFuZCBDb25kaXRpb25zIC0gR292ZXJubWVudCBTZXJ2aWNlcyBBZ3JlZW1lbnQnLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubG9nZ2VyID0gbmV3IEVsYXJhTG9nZ2VyKCdDb250cmFjdFNlcnZpY2UnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb250cmFjdCBmb3IgdXNlclxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVDb250cmFjdCh1c2VySWQ6IHN0cmluZywgdXNlclR5cGU6IFVzZXJUeXBlKTogUHJvbWlzZTxDb250cmFjdD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKGBHZW5lcmF0aW5nIGNvbnRyYWN0IGZvciB1c2VyOiAke3VzZXJJZH0sIHR5cGU6ICR7dXNlclR5cGV9YCk7XG5cbiAgICAgIGNvbnN0IGNvbnRyYWN0SWQgPSBgY29udHJhY3RfJHt1c2VySWR9XyR7RGF0ZS5ub3coKX1gO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmNvbnRyYWN0VGVtcGxhdGVzW3VzZXJUeXBlXTtcblxuICAgICAgaWYgKCF0ZW1wbGF0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGNvbnRyYWN0IHRlbXBsYXRlIGZvciB1c2VyIHR5cGU6ICR7dXNlclR5cGV9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbnRyYWN0OiBDb250cmFjdCA9IHtcbiAgICAgICAgaWQ6IGNvbnRyYWN0SWQsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdXNlclR5cGUsXG4gICAgICAgIGNvbnRyYWN0VHlwZTogdGVtcGxhdGUsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICBjb250ZW50OiB0aGlzLmdlbmVyYXRlQ29udHJhY3RDb250ZW50KHVzZXJUeXBlKSxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmNvbnRyYWN0cy5zZXQoY29udHJhY3RJZCwgY29udHJhY3QpO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhgQ29udHJhY3QgZ2VuZXJhdGVkOiAke2NvbnRyYWN0SWR9YCk7XG5cbiAgICAgIHJldHVybiBjb250cmFjdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgY29udHJhY3Q6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb250cmFjdCBieSBJRFxuICAgKi9cbiAgYXN5bmMgZ2V0Q29udHJhY3QoY29udHJhY3RJZDogc3RyaW5nKTogUHJvbWlzZTxDb250cmFjdCB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhgR2V0dGluZyBjb250cmFjdDogJHtjb250cmFjdElkfWApO1xuICAgICAgcmV0dXJuIHRoaXMuY29udHJhY3RzLmdldChjb250cmFjdElkKSB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyBjb250cmFjdDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbnRyYWN0cyBmb3IgdXNlclxuICAgKi9cbiAgYXN5bmMgZ2V0VXNlckNvbnRyYWN0cyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8Q29udHJhY3RbXT4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKGBHZXR0aW5nIGNvbnRyYWN0cyBmb3IgdXNlcjogJHt1c2VySWR9YCk7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNvbnRyYWN0cy52YWx1ZXMoKSkuZmlsdGVyKGMgPT4gYy51c2VySWQgPT09IHVzZXJJZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgY29udHJhY3RzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaWduIGNvbnRyYWN0XG4gICAqL1xuICBhc3luYyBzaWduQ29udHJhY3QoY29udHJhY3RJZDogc3RyaW5nLCBzaWduZWRCeTogc3RyaW5nLCBpcEFkZHJlc3M/OiBzdHJpbmcpOiBQcm9taXNlPENvbnRyYWN0PiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oYFNpZ25pbmcgY29udHJhY3Q6ICR7Y29udHJhY3RJZH1gKTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSB0aGlzLmNvbnRyYWN0cy5nZXQoY29udHJhY3RJZCk7XG4gICAgICBpZiAoIWNvbnRyYWN0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udHJhY3Qgbm90IGZvdW5kOiAke2NvbnRyYWN0SWR9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb250cmFjdC5zdGF0dXMgPT09ICdzaWduZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udHJhY3QgYWxyZWFkeSBzaWduZWQ6ICR7Y29udHJhY3RJZH1gKTtcbiAgICAgIH1cblxuICAgICAgY29udHJhY3Quc3RhdHVzID0gJ3NpZ25lZCc7XG4gICAgICBjb250cmFjdC5zaWduZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgICBjb250cmFjdC5zaWduYXR1cmVEYXRhID0ge1xuICAgICAgICBzaWduZWRCeSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgIHNpZ25hdHVyZUhhc2g6IHRoaXMuZ2VuZXJhdGVTaWduYXR1cmVIYXNoKGNvbnRyYWN0SWQsIHNpZ25lZEJ5KSxcbiAgICAgIH07XG4gICAgICBjb250cmFjdC51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICB0aGlzLmNvbnRyYWN0cy5zZXQoY29udHJhY3RJZCwgY29udHJhY3QpO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhgQ29udHJhY3Qgc2lnbmVkOiAke2NvbnRyYWN0SWR9YCk7XG5cbiAgICAgIHJldHVybiBjb250cmFjdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ0Vycm9yIHNpZ25pbmcgY29udHJhY3Q6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlamVjdCBjb250cmFjdFxuICAgKi9cbiAgYXN5bmMgcmVqZWN0Q29udHJhY3QoY29udHJhY3RJZDogc3RyaW5nLCByZWFzb246IHN0cmluZyk6IFByb21pc2U8Q29udHJhY3Q+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhgUmVqZWN0aW5nIGNvbnRyYWN0OiAke2NvbnRyYWN0SWR9LCByZWFzb246ICR7cmVhc29ufWApO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IHRoaXMuY29udHJhY3RzLmdldChjb250cmFjdElkKTtcbiAgICAgIGlmICghY29udHJhY3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb250cmFjdCBub3QgZm91bmQ6ICR7Y29udHJhY3RJZH1gKTtcbiAgICAgIH1cblxuICAgICAgY29udHJhY3Quc3RhdHVzID0gJ3JlamVjdGVkJztcbiAgICAgIGNvbnRyYWN0LnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XG5cbiAgICAgIHRoaXMuY29udHJhY3RzLnNldChjb250cmFjdElkLCBjb250cmFjdCk7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKGBDb250cmFjdCByZWplY3RlZDogJHtjb250cmFjdElkfWApO1xuXG4gICAgICByZXR1cm4gY29udHJhY3Q7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdFcnJvciByZWplY3RpbmcgY29udHJhY3Q6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmeSBjb250cmFjdCBzaWduYXR1cmVcbiAgICovXG4gIGFzeW5jIHZlcmlmeVNpZ25hdHVyZShjb250cmFjdElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhgVmVyaWZ5aW5nIHNpZ25hdHVyZSBmb3IgY29udHJhY3Q6ICR7Y29udHJhY3RJZH1gKTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSB0aGlzLmNvbnRyYWN0cy5nZXQoY29udHJhY3RJZCk7XG4gICAgICBpZiAoIWNvbnRyYWN0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udHJhY3Qgbm90IGZvdW5kOiAke2NvbnRyYWN0SWR9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb250cmFjdC5zdGF0dXMgIT09ICdzaWduZWQnIHx8ICFjb250cmFjdC5zaWduYXR1cmVEYXRhKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gSW4gcHJvZHVjdGlvbiwgd291bGQgdmVyaWZ5IGFjdHVhbCBzaWduYXR1cmVcbiAgICAgIC8vIEZvciBub3csIGp1c3QgY2hlY2sgdGhhdCBzaWduYXR1cmUgZGF0YSBleGlzdHNcbiAgICAgIHJldHVybiAhIWNvbnRyYWN0LnNpZ25hdHVyZURhdGEuc2lnbmF0dXJlSGFzaDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyBzaWduYXR1cmU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzaWduZWQgY29udHJhY3RzIGZvciB1c2VyXG4gICAqL1xuICBhc3luYyBnZXRTaWduZWRDb250cmFjdHModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRyYWN0W10+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhgR2V0dGluZyBzaWduZWQgY29udHJhY3RzIGZvciB1c2VyOiAke3VzZXJJZH1gKTtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29udHJhY3RzLnZhbHVlcygpKS5maWx0ZXIoXG4gICAgICAgIGMgPT4gYy51c2VySWQgPT09IHVzZXJJZCAmJiBjLnN0YXR1cyA9PT0gJ3NpZ25lZCdcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdFcnJvciBnZXR0aW5nIHNpZ25lZCBjb250cmFjdHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gUHJpdmF0ZSBoZWxwZXIgbWV0aG9kc1xuXG4gIHByaXZhdGUgZ2VuZXJhdGVDb250cmFjdENvbnRlbnQodXNlclR5cGU6IFVzZXJUeXBlKTogc3RyaW5nIHtcbiAgICBjb25zdCBiYXNlQ29udGVudCA9IGBcbiMgJHt0aGlzLmNvbnRyYWN0VGVtcGxhdGVzW3VzZXJUeXBlXX1cblxuIyMgVGVybXMgYW5kIENvbmRpdGlvbnNcblxuVGhpcyBhZ3JlZW1lbnQgKFwiQWdyZWVtZW50XCIpIGlzIGVudGVyZWQgaW50byBhcyBvZiB0aGUgZGF0ZSBvZiBhY2NlcHRhbmNlLlxuXG4jIyMgMS4gU2VydmljZXNcblRoZSBwbGF0Zm9ybSBwcm92aWRlcyBzZXJ2aWNlcyB0YWlsb3JlZCBmb3IgJHt1c2VyVHlwZX0gdXNlcnMuXG5cbiMjIyAyLiBVc2VyIFJlc3BvbnNpYmlsaXRpZXNcblVzZXIgYWdyZWVzIHRvIGNvbXBseSB3aXRoIGFsbCBhcHBsaWNhYmxlIGxhd3MgYW5kIHJlZ3VsYXRpb25zLlxuXG4jIyMgMy4gSW50ZWxsZWN0dWFsIFByb3BlcnR5XG5BbGwgY29udGVudCBhbmQgbWF0ZXJpYWxzIGFyZSBwcm90ZWN0ZWQgYnkgaW50ZWxsZWN0dWFsIHByb3BlcnR5IGxhd3MuXG5cbiMjIyA0LiBMaW1pdGF0aW9uIG9mIExpYWJpbGl0eVxuVGhlIHBsYXRmb3JtIGlzIHByb3ZpZGVkIFwiYXMgaXNcIiB3aXRob3V0IHdhcnJhbnRpZXMuXG5cbiMjIyA1LiBUZXJtaW5hdGlvblxuRWl0aGVyIHBhcnR5IG1heSB0ZXJtaW5hdGUgdGhpcyBhZ3JlZW1lbnQgd2l0aCB3cml0dGVuIG5vdGljZS5cblxuIyMjIDYuIEdvdmVybmluZyBMYXdcblRoaXMgYWdyZWVtZW50IGlzIGdvdmVybmVkIGJ5IGFwcGxpY2FibGUgbGF3cy5cblxuIyMjIDcuIEVudGlyZSBBZ3JlZW1lbnRcblRoaXMgY29uc3RpdHV0ZXMgdGhlIGVudGlyZSBhZ3JlZW1lbnQgYmV0d2VlbiBwYXJ0aWVzLlxuXG5CeSBzaWduaW5nIGJlbG93LCB5b3UgYWNrbm93bGVkZ2UgdGhhdCB5b3UgaGF2ZSByZWFkLCB1bmRlcnN0b29kLCBhbmQgYWdyZWUgdG8gYmUgYm91bmQgYnkgdGhlc2UgdGVybXMuXG4gICAgYDtcbiAgICByZXR1cm4gYmFzZUNvbnRlbnQ7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlU2lnbmF0dXJlSGFzaChjb250cmFjdElkOiBzdHJpbmcsIHNpZ25lZEJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIEluIHByb2R1Y3Rpb24sIHdvdWxkIGdlbmVyYXRlIGFjdHVhbCBjcnlwdG9ncmFwaGljIGhhc2hcbiAgICAvLyBGb3Igbm93LCBnZW5lcmF0ZSBhIHNpbXBsZSBoYXNoXG4gICAgY29uc3QgZGF0YSA9IGAke2NvbnRyYWN0SWR9OiR7c2lnbmVkQnl9OiR7RGF0ZS5ub3coKX1gO1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShkYXRhKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBZVk7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTtBQWZa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