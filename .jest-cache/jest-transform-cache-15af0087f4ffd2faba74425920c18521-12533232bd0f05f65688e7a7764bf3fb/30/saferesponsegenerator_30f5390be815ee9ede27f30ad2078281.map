{"version":3,"names":["cov_1qrn8d5luu","actualCoverage","HarmType","DEFAULT_CONFIG","s","includeResources","includeExplanation","tone","maxLength","SafeResponseGenerator","constructor","config","b","f","resources","initializeResources","Map","set","SELF_HARM","name","contact","description","url","VIOLENCE","ILLEGAL","HARASSMENT","EXPLOITATION","generateResponse","query","assessment","parts","push","getOpeningStatement","getExplanation","resourceText","getResourcesText","harmTypes","getClosingStatement","response","filter","p","join","length","substring","severity","includes","primaryHarm","explanations","HATE_SPEECH","MISINFORMATION","DANGEROUS_CONTENT","relevantResources","harmType","get","resourceLines","resource","slice","line","generateAlternativeSuggestions","suggestions","alternativeMap","updateConfig","getConfig","addResource","existing","getResources","createSafeResponseGenerator"],"sources":["safe-response-generator.ts"],"sourcesContent":["/**\n * Safe Response Generator Service\n * Generates safe, helpful responses for harmful queries\n */\n\nimport { HarmType, HarmAssessment } from '../types';\n\n/**\n * Configuration for safe response generator\n */\nexport interface SafeResponseConfig {\n  includeResources: boolean;\n  includeExplanation: boolean;\n  tone: 'empathetic' | 'neutral' | 'firm';\n  maxLength: number;\n}\n\n/**\n * Default configuration\n */\nconst DEFAULT_CONFIG: SafeResponseConfig = {\n  includeResources: true,\n  includeExplanation: true,\n  tone: 'empathetic',\n  maxLength: 500\n};\n\n/**\n * Resource information for different harm types\n */\ninterface HelpResource {\n  name: string;\n  contact: string;\n  description: string;\n  url?: string;\n}\n\n/**\n * Safe Response Generator\n * Creates appropriate, helpful responses for harmful content\n */\nexport class SafeResponseGenerator {\n  private config: SafeResponseConfig;\n  private resources: Map<HarmType, HelpResource[]>;\n\n  constructor(config: Partial<SafeResponseConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.resources = this.initializeResources();\n  }\n\n  /**\n   * Initialize help resources for different harm types\n   */\n  private initializeResources(): Map<HarmType, HelpResource[]> {\n    const resources = new Map<HarmType, HelpResource[]>();\n\n    resources.set(HarmType.SELF_HARM, [\n      {\n        name: 'National Suicide Prevention Lifeline (US)',\n        contact: '988',\n        description: '24/7 crisis support for people in distress',\n        url: 'https://988lifeline.org'\n      },\n      {\n        name: 'Crisis Text Line',\n        contact: 'Text HOME to 741741',\n        description: 'Free 24/7 text support for people in crisis'\n      },\n      {\n        name: 'International Association for Suicide Prevention',\n        contact: 'Visit website for country-specific resources',\n        description: 'Global directory of crisis centers',\n        url: 'https://www.iasp.info/resources/Crisis_Centres'\n      }\n    ]);\n\n    resources.set(HarmType.VIOLENCE, [\n      {\n        name: 'National Domestic Violence Hotline',\n        contact: '1-800-799-7233',\n        description: 'Support for victims of domestic violence'\n      },\n      {\n        name: 'Local Emergency Services',\n        contact: '911 (US) or local emergency number',\n        description: 'Immediate help for violent situations'\n      }\n    ]);\n\n    resources.set(HarmType.ILLEGAL, [\n      {\n        name: 'Legal Aid Services',\n        contact: 'Contact local legal aid office',\n        description: 'Free or low-cost legal assistance'\n      },\n      {\n        name: 'Law Enforcement',\n        contact: 'Local police non-emergency line',\n        description: 'Report illegal activities or seek guidance'\n      }\n    ]);\n\n    resources.set(HarmType.HARASSMENT, [\n      {\n        name: 'Cyber Civil Rights Initiative',\n        contact: 'Visit cybercivilrights.org',\n        description: 'Support for victims of online harassment',\n        url: 'https://www.cybercivilrights.org'\n      },\n      {\n        name: 'Local Law Enforcement',\n        contact: 'Local police department',\n        description: 'Report harassment and threats'\n      }\n    ]);\n\n    resources.set(HarmType.EXPLOITATION, [\n      {\n        name: 'Federal Trade Commission',\n        contact: 'reportfraud.ftc.gov',\n        description: 'Report scams and fraud',\n        url: 'https://reportfraud.ftc.gov'\n      },\n      {\n        name: 'National Center for Missing & Exploited Children',\n        contact: '1-800-843-5678',\n        description: 'Report child exploitation'\n      }\n    ]);\n\n    return resources;\n  }\n\n  /**\n   * Generate safe response based on harm assessment\n   */\n  generateResponse(query: string, assessment: HarmAssessment): string {\n    const parts: string[] = [];\n\n    // Add opening statement\n    parts.push(this.getOpeningStatement(assessment));\n\n    // Add explanation if configured\n    if (this.config.includeExplanation) {\n      parts.push(this.getExplanation(assessment));\n    }\n\n    // Add resources if configured and available\n    if (this.config.includeResources) {\n      const resourceText = this.getResourcesText(assessment.harmTypes);\n      if (resourceText) {\n        parts.push(resourceText);\n      }\n    }\n\n    // Add closing statement\n    parts.push(this.getClosingStatement(assessment));\n\n    // Combine and truncate if needed\n    let response = parts.filter(p => p).join('\\n\\n');\n    \n    if (response.length > this.config.maxLength) {\n      response = response.substring(0, this.config.maxLength - 3) + '...';\n    }\n\n    return response;\n  }\n\n  /**\n   * Get opening statement based on tone and severity\n   */\n  private getOpeningStatement(assessment: HarmAssessment): string {\n    const { tone } = this.config;\n    const { severity, harmTypes } = assessment;\n\n    if (harmTypes.includes(HarmType.SELF_HARM)) {\n      return tone === 'empathetic'\n        ? \"I'm genuinely concerned about your wellbeing and want to help.\"\n        : \"I cannot provide information related to self-harm.\";\n    }\n\n    if (severity >= 9) {\n      switch (tone) {\n        case 'empathetic':\n          return \"I understand you may be looking for information, but I cannot assist with this request.\";\n        case 'firm':\n          return \"I cannot and will not provide information for this request.\";\n        default:\n          return \"I cannot provide a response to this query.\";\n      }\n    }\n\n    if (severity >= 7) {\n      switch (tone) {\n        case 'empathetic':\n          return \"I appreciate your question, but I'm unable to provide this information.\";\n        case 'firm':\n          return \"This request involves harmful content that I cannot assist with.\";\n        default:\n          return \"I cannot assist with this request.\";\n      }\n    }\n\n    return \"I'm unable to provide the information you're requesting.\";\n  }\n\n  /**\n   * Get explanation for why request cannot be fulfilled\n   */\n  private getExplanation(assessment: HarmAssessment): string {\n    const { harmTypes, severity } = assessment;\n    const primaryHarm = harmTypes[0];\n\n    const explanations: Record<HarmType, string> = {\n      [HarmType.VIOLENCE]: \n        \"This request involves content that could lead to physical harm. My purpose is to be helpful, harmless, and honest, which means I cannot provide information that could be used to hurt others.\",\n      \n      [HarmType.HATE_SPEECH]: \n        \"This request involves discriminatory or hateful content. I'm designed to treat all people with respect and dignity, regardless of their background, identity, or beliefs.\",\n      \n      [HarmType.SELF_HARM]: \n        \"Your safety and wellbeing are important. If you're struggling with thoughts of self-harm, please know that help is available and things can get better.\",\n      \n      [HarmType.ILLEGAL]: \n        \"This request involves illegal activities. I cannot provide information that could be used to break the law or harm others.\",\n      \n      [HarmType.MISINFORMATION]: \n        \"This request involves information that contradicts established facts or scientific consensus. Providing such information could cause harm by spreading misinformation.\",\n      \n      [HarmType.EXPLOITATION]: \n        \"This request involves content that could be used to exploit or manipulate vulnerable individuals. I cannot assist with activities that take advantage of others.\",\n      \n      [HarmType.HARASSMENT]: \n        \"This request involves content that could be used to harass, threaten, or intimidate others. Such behavior causes real harm and is often illegal.\",\n      \n      [HarmType.DANGEROUS_CONTENT]: \n        \"This request involves dangerous materials or activities that pose serious safety risks. I cannot provide information that could lead to injury or harm.\"\n    };\n\n    return explanations[primaryHarm] || \n           \"This request involves content that could cause harm. I'm designed to be helpful while ensuring safety and wellbeing.\";\n  }\n\n  /**\n   * Get resources text for harm types\n   */\n  private getResourcesText(harmTypes: HarmType[]): string {\n    const relevantResources: HelpResource[] = [];\n\n    for (const harmType of harmTypes) {\n      const resources = this.resources.get(harmType);\n      if (resources) {\n        relevantResources.push(...resources);\n      }\n    }\n\n    if (relevantResources.length === 0) {\n      return '';\n    }\n\n    const resourceLines = ['Here are some resources that may help:'];\n    \n    for (const resource of relevantResources.slice(0, 3)) { // Limit to 3 resources\n      let line = `â€¢ ${resource.name}: ${resource.contact}`;\n      if (resource.description) {\n        line += ` - ${resource.description}`;\n      }\n      resourceLines.push(line);\n    }\n\n    return resourceLines.join('\\n');\n  }\n\n  /**\n   * Get closing statement\n   */\n  private getClosingStatement(assessment: HarmAssessment): string {\n    const { tone } = this.config;\n    const { harmTypes } = assessment;\n\n    if (harmTypes.includes(HarmType.SELF_HARM)) {\n      return \"Please reach out for help. You don't have to face this alone.\";\n    }\n\n    switch (tone) {\n      case 'empathetic':\n        return \"If you have a different question or need help with something else, I'm here to assist.\";\n      case 'firm':\n        return \"Please rephrase your request to focus on helpful, legal, and safe topics.\";\n      default:\n        return \"I'm happy to help with other questions you may have.\";\n    }\n  }\n\n  /**\n   * Generate alternative suggestions\n   */\n  generateAlternativeSuggestions(query: string, assessment: HarmAssessment): string[] {\n    const suggestions: string[] = [];\n    const primaryHarm = assessment.harmTypes[0];\n\n    const alternativeMap: Record<HarmType, string[]> = {\n      [HarmType.VIOLENCE]: [\n        \"Learn about conflict resolution techniques\",\n        \"Explore anger management strategies\",\n        \"Understand the psychology of aggression\"\n      ],\n      [HarmType.HATE_SPEECH]: [\n        \"Learn about cultural diversity and inclusion\",\n        \"Explore the history of civil rights movements\",\n        \"Understand the impact of discrimination\"\n      ],\n      [HarmType.SELF_HARM]: [\n        \"Learn about mental health coping strategies\",\n        \"Explore mindfulness and stress reduction techniques\",\n        \"Understand the importance of seeking professional help\"\n      ],\n      [HarmType.ILLEGAL]: [\n        \"Learn about legal rights and responsibilities\",\n        \"Explore ethical decision-making frameworks\",\n        \"Understand the legal system and how it works\"\n      ],\n      [HarmType.MISINFORMATION]: [\n        \"Learn about critical thinking and fact-checking\",\n        \"Explore reputable sources of information\",\n        \"Understand how to evaluate scientific evidence\"\n      ],\n      [HarmType.EXPLOITATION]: [\n        \"Learn about recognizing and avoiding scams\",\n        \"Explore ethical business practices\",\n        \"Understand consumer protection rights\"\n      ],\n      [HarmType.HARASSMENT]: [\n        \"Learn about healthy communication\",\n        \"Explore conflict resolution strategies\",\n        \"Understand digital citizenship and online safety\"\n      ],\n      [HarmType.DANGEROUS_CONTENT]: [\n        \"Learn about safety protocols and best practices\",\n        \"Explore legitimate educational resources\",\n        \"Understand risk assessment and management\"\n      ]\n    };\n\n    return alternativeMap[primaryHarm] || [\n      \"Rephrase your question to focus on educational content\",\n      \"Ask about legal and ethical alternatives\",\n      \"Explore constructive and helpful topics\"\n    ];\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<SafeResponseConfig>): void {\n    this.config = { ...this.config, ...config };\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): SafeResponseConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Add custom resource\n   */\n  addResource(harmType: HarmType, resource: HelpResource): void {\n    const existing = this.resources.get(harmType) || [];\n    existing.push(resource);\n    this.resources.set(harmType, existing);\n  }\n\n  /**\n   * Get resources for harm type\n   */\n  getResources(harmType: HarmType): HelpResource[] {\n    return this.resources.get(harmType) || [];\n  }\n}\n\n/**\n * Factory function to create safe response generator\n */\nexport function createSafeResponseGenerator(config?: Partial<SafeResponseConfig>): SafeResponseGenerator {\n  return new SafeResponseGenerator(config);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}