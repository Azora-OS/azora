{"version":3,"names":["cov_rqkxgdyju","actualCoverage","MiningEngine","MAX_SUPPLY","s","SOVEREIGN_ALLOCATION_PER_NATION","BURN_RATE","currentSupply","sovereignAllocations","Map","constructor","f","calculateReward","actionType","valueScore","baseReward","b","calculateBurnAmount","amount","allocateToSovereign","countryCode","currentAllocation","get","console","warn","set","log","mint","Error","getCurrentSupply"],"sources":["mining-engine.ts"],"sourcesContent":["import { ethers } from 'ethers';\n\nexport class MiningEngine {\n    private static readonly MAX_SUPPLY = 1_000_000_000; // 1 Billion AZR\n    private static readonly SOVEREIGN_ALLOCATION_PER_NATION = 1_000_000; // 1 Million AZR\n    private static readonly BURN_RATE = 0.01; // 1% burn on transactions/minting\n\n    private currentSupply: number = 0;\n    private sovereignAllocations: Map<string, number> = new Map(); // Country Code -> Amount\n\n    constructor() { }\n\n    /**\n     * Calculates the reward for a specific action based on value created.\n     * @param actionType The type of action (e.g., 'create_course', 'code_commit').\n     * @param valueScore A score representing the value of the action (0-100).\n     * @returns The calculated AZR reward.\n     */\n    calculateReward(actionType: string, valueScore: number): number {\n        let baseReward = 0;\n        switch (actionType) {\n            case 'create_course': baseReward = 50; break;\n            case 'code_commit': baseReward = 10; break;\n            case 'create_nft': baseReward = 5; break;\n            default: baseReward = 1;\n        }\n        return baseReward * (valueScore / 100);\n    }\n\n    /**\n     * Applies deflationary logic by calculating the burn amount.\n     * @param amount The transaction or reward amount.\n     * @returns The amount to be burned.\n     */\n    calculateBurnAmount(amount: number): number {\n        return amount * MiningEngine.BURN_RATE;\n    }\n\n    /**\n     * Tracks the allocation of AZR to a sovereign nation.\n     * @param countryCode ISO country code (e.g., 'ZA', 'US').\n     * @param amount Amount to allocate.\n     * @returns True if allocation is successful, False if it exceeds the limit.\n     */\n    allocateToSovereign(countryCode: string, amount: number): boolean {\n        const currentAllocation = this.sovereignAllocations.get(countryCode) || 0;\n        if (currentAllocation + amount > MiningEngine.SOVEREIGN_ALLOCATION_PER_NATION) {\n            console.warn(`[MiningEngine] Allocation failed: Exceeds 1M limit for ${countryCode}`);\n            return false;\n        }\n        this.sovereignAllocations.set(countryCode, currentAllocation + amount);\n        this.currentSupply += amount;\n        console.log(`[MiningEngine] Allocated ${amount} AZR to ${countryCode}. Total: ${currentAllocation + amount}`);\n        return true;\n    }\n\n    /**\n     * Mints new tokens with deflationary check.\n     * @param amount Amount to mint.\n     * @returns The actual amount minted after burn (if applicable to minting) or just updates supply.\n     */\n    async mint(amount: number): Promise<number> {\n        if (this.currentSupply + amount > MiningEngine.MAX_SUPPLY) {\n            throw new Error('Max supply exceeded');\n        }\n\n        // In this model, we might burn on mint or on transfer. \n        // Let's assume minting is pure, but transfer burns.\n        this.currentSupply += amount;\n        console.log(`[MiningEngine] Minted ${amount} AZR. Total Supply: ${this.currentSupply}`);\n        return amount;\n    }\n\n    getCurrentSupply(): number {\n        return this.currentSupply;\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAbZ,OAAO,MAAME,YAAY,CAAC;EACtB,OAAwBC,UAAU;EAAA;EAAA,CAAAH,aAAA,GAAAI,CAAA,OAAG,aAAa,EAAC,CAAC;EACpD,OAAwBC,+BAA+B;EAAA;EAAA,CAAAL,aAAA,GAAAI,CAAA,OAAG,SAAS,EAAC,CAAC;EACrE,OAAwBE,SAAS;EAAA;EAAA,CAAAN,aAAA,GAAAI,CAAA,OAAG,IAAI,EAAC,CAAC;;EAElCG,aAAa;EAAA;EAAA,CAAAP,aAAA,GAAAI,CAAA,OAAW,CAAC;EACzBI,oBAAoB;EAAA;EAAA,CAAAR,aAAA,GAAAI,CAAA,OAAwB,IAAIK,GAAG,CAAC,CAAC,EAAC,CAAC;;EAE/DC,WAAWA,CAAA,EAAG;IAAA;IAAAV,aAAA,GAAAW,CAAA;EAAE;;EAEhB;AACJ;AACA;AACA;AACA;AACA;EACIC,eAAeA,CAACC,UAAkB,EAAEC,UAAkB,EAAU;IAAA;IAAAd,aAAA,GAAAW,CAAA;IAC5D,IAAII,UAAU;IAAA;IAAA,CAAAf,aAAA,GAAAI,CAAA,OAAG,CAAC;IAAC;IAAAJ,aAAA,GAAAI,CAAA;IACnB,QAAQS,UAAU;MACd,KAAK,eAAe;QAAA;QAAAb,aAAA,GAAAgB,CAAA;QAAAhB,aAAA,GAAAI,CAAA;QAAEW,UAAU,GAAG,EAAE;QAAC;QAAAf,aAAA,GAAAI,CAAA;QAAC;MACvC,KAAK,aAAa;QAAA;QAAAJ,aAAA,GAAAgB,CAAA;QAAAhB,aAAA,GAAAI,CAAA;QAAEW,UAAU,GAAG,EAAE;QAAC;QAAAf,aAAA,GAAAI,CAAA;QAAC;MACrC,KAAK,YAAY;QAAA;QAAAJ,aAAA,GAAAgB,CAAA;QAAAhB,aAAA,GAAAI,CAAA;QAAEW,UAAU,GAAG,CAAC;QAAC;QAAAf,aAAA,GAAAI,CAAA;QAAC;MACnC;QAAA;QAAAJ,aAAA,GAAAgB,CAAA;QAAAhB,aAAA,GAAAI,CAAA;QAASW,UAAU,GAAG,CAAC;IAC3B;IAAC;IAAAf,aAAA,GAAAI,CAAA;IACD,OAAOW,UAAU,IAAID,UAAU,GAAG,GAAG,CAAC;EAC1C;;EAEA;AACJ;AACA;AACA;AACA;EACIG,mBAAmBA,CAACC,MAAc,EAAU;IAAA;IAAAlB,aAAA,GAAAW,CAAA;IAAAX,aAAA,GAAAI,CAAA;IACxC,OAAOc,MAAM,GAAGhB,YAAY,CAACI,SAAS;EAC1C;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACIa,mBAAmBA,CAACC,WAAmB,EAAEF,MAAc,EAAW;IAAA;IAAAlB,aAAA,GAAAW,CAAA;IAC9D,MAAMU,iBAAiB;IAAA;IAAA,CAAArB,aAAA,GAAAI,CAAA;IAAG;IAAA,CAAAJ,aAAA,GAAAgB,CAAA,cAAI,CAACR,oBAAoB,CAACc,GAAG,CAACF,WAAW,CAAC;IAAA;IAAA,CAAApB,aAAA,GAAAgB,CAAA,UAAI,CAAC;IAAC;IAAAhB,aAAA,GAAAI,CAAA;IAC1E,IAAIiB,iBAAiB,GAAGH,MAAM,GAAGhB,YAAY,CAACG,+BAA+B,EAAE;MAAA;MAAAL,aAAA,GAAAgB,CAAA;MAAAhB,aAAA,GAAAI,CAAA;MAC3EmB,OAAO,CAACC,IAAI,CAAC,0DAA0DJ,WAAW,EAAE,CAAC;MAAC;MAAApB,aAAA,GAAAI,CAAA;MACtF,OAAO,KAAK;IAChB,CAAC;IAAA;IAAA;MAAAJ,aAAA,GAAAgB,CAAA;IAAA;IAAAhB,aAAA,GAAAI,CAAA;IACD,IAAI,CAACI,oBAAoB,CAACiB,GAAG,CAACL,WAAW,EAAEC,iBAAiB,GAAGH,MAAM,CAAC;IAAC;IAAAlB,aAAA,GAAAI,CAAA;IACvE,IAAI,CAACG,aAAa,IAAIW,MAAM;IAAC;IAAAlB,aAAA,GAAAI,CAAA;IAC7BmB,OAAO,CAACG,GAAG,CAAC,4BAA4BR,MAAM,WAAWE,WAAW,YAAYC,iBAAiB,GAAGH,MAAM,EAAE,CAAC;IAAC;IAAAlB,aAAA,GAAAI,CAAA;IAC9G,OAAO,IAAI;EACf;;EAEA;AACJ;AACA;AACA;AACA;EACI,MAAMuB,IAAIA,CAACT,MAAc,EAAmB;IAAA;IAAAlB,aAAA,GAAAW,CAAA;IAAAX,aAAA,GAAAI,CAAA;IACxC,IAAI,IAAI,CAACG,aAAa,GAAGW,MAAM,GAAGhB,YAAY,CAACC,UAAU,EAAE;MAAA;MAAAH,aAAA,GAAAgB,CAAA;MAAAhB,aAAA,GAAAI,CAAA;MACvD,MAAM,IAAIwB,KAAK,CAAC,qBAAqB,CAAC;IAC1C,CAAC;IAAA;IAAA;MAAA5B,aAAA,GAAAgB,CAAA;IAAA;;IAED;IACA;IAAAhB,aAAA,GAAAI,CAAA;IACA,IAAI,CAACG,aAAa,IAAIW,MAAM;IAAC;IAAAlB,aAAA,GAAAI,CAAA;IAC7BmB,OAAO,CAACG,GAAG,CAAC,yBAAyBR,MAAM,uBAAuB,IAAI,CAACX,aAAa,EAAE,CAAC;IAAC;IAAAP,aAAA,GAAAI,CAAA;IACxF,OAAOc,MAAM;EACjB;EAEAW,gBAAgBA,CAAA,EAAW;IAAA;IAAA7B,aAAA,GAAAW,CAAA;IAAAX,aAAA,GAAAI,CAAA;IACvB,OAAO,IAAI,CAACG,aAAa;EAC7B;AACJ","ignoreList":[]}