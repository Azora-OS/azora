{"version":3,"names":["cov_qucl21ird","actualCoverage","checkEnrollmentEligibility","userEmail","courseId","prisma","f","violations","s","existing","enrollment","findFirst","where","b","push","course","findUnique","id","include","skills","length","learnerSkills","skillProgress","findMany","studentId","learnerSkillMap","Map","map","skillId","proficiencyLevel","skill","proficiency","get","name","toFixed","pathway","consent","consentRecord","consentType","consentGiven","parentConsent","parentConsentRequired","parentConsentGiven","passed","evidence","skillCount","prerequisitesChecked","undefined","timestamp","Date","toISOString","error","console","String","checkAssessmentEligibility","learnerEmail","assessmentId","assessment","previousAttempts","assessmentAttempt","lastAttempt","completedAt","hoursSinceLastAttempt","now","getTime","Math","ceil","integrityLevel","checkAssessmentIntegrity","attemptId","responses","integritySignals","browserTabSwitches","averageResponseTime","attempt","difficulty","score","responsesText","e","integritySignalsCount","Object","keys","violationsDetected","checkCredentialValidity","userId","type","assessmentScore","existingCredentials","credential","user","evidenceFields","existingCredentialsCount","checkTutoringAlignment","sessionId","tutorResponse","sourceReferences","ref","lesson","lessonId","responseLength","sourceCount","groundedInCourseContent","constitutionalCheck","checkType","req","res","next","result","email","body","params","constitutionalCheckType","constitutionalCheckResult","status","json","code","message","join","constitutionalConcern"],"sources":["constitutional.ts"],"sourcesContent":["/**\n * Constitutional Validation Middleware\n * \n * Enforces DIVINE_LAW_PRINCIPLES on Sapiens actions:\n * - Enrollment: Verify learner capacity, prerequisites, age/consent\n * - Assessment: Verify integrity controls, previous attempts, prerequisites\n * - Credential: Verify evidence, issuer authority, learner achievement\n * - Tutoring: Verify learner grounding, source quality, hallucination checks\n * \n * Pre/post check pattern:\n * - Pre-check: Validate action eligibility before state change\n * - Post-check: Validate action alignment with principles after execution\n */\n\nimport { Request, Response, NextFunction } from 'express';\nimport axios from 'axios';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface ConstitutionalCheckResult {\n  passed: boolean;\n  evidence: Record<string, any>;\n  violations?: string[];\n  timestamp: string;\n}\n\n// ============================================================================\n// Constitutional Checks by Action Type\n// ============================================================================\n\n/**\n * Pre-check for enrollment:\n * - Verify learner is not already enrolled\n * - Check prerequisite skills are mastered\n * - Verify age/consent if required\n * - Check capacity (cohort max learners)\n */\nasync function checkEnrollmentEligibility(\n  userEmail: string,\n  courseId: string,\n  prisma: any\n): Promise<ConstitutionalCheckResult> {\n  const violations: string[] = [];\n\n  try {\n    // Check existing enrollment\n    const existing = await prisma.enrollment.findFirst({\n      where: { userEmail, courseId }\n    });\n    if (existing) {\n      violations.push('ALREADY_ENROLLED');\n    }\n\n    // Check course prerequisites (if defined in curriculum edges)\n    const course = await prisma.course.findUnique({\n      where: { id: courseId },\n      include: { skills: true }\n    });\n\n    if (course?.skills && course.skills.length > 0) {\n      // Get learner's current skill proficiency\n      const learnerSkills = await prisma.skillProgress.findMany({\n        where: { studentId: userEmail }\n      });\n\n      const learnerSkillMap = new Map(\n        learnerSkills.map((s) => [s.skillId, s.proficiencyLevel])\n      );\n\n      // Check if all prerequisite skills are mastered (>= 0.8 proficiency)\n      for (const skill of course.skills) {\n        const proficiency = learnerSkillMap.get(skill.id) || 0;\n        if (proficiency < 0.8) {\n          violations.push(\n            `PREREQUISITE_NOT_MET:${skill.name}:${(proficiency * 100).toFixed(0)}%`\n          );\n        }\n      }\n    }\n\n    // Verify age/consent if course is for minors (K-12)\n    if (course?.pathway === 'k12') {\n      const consent = await prisma.consentRecord.findFirst({\n        where: {\n          userEmail,\n          consentType: 'data_processing',\n          consentGiven: true\n        }\n      });\n\n      if (!consent) {\n        violations.push('CONSENT_REQUIRED');\n      }\n\n      if (course.pathway === 'k12') {\n        const parentConsent = await prisma.consentRecord.findFirst({\n          where: {\n            userEmail,\n            consentType: 'data_processing',\n            parentConsentRequired: true,\n            parentConsentGiven: true\n          }\n        });\n\n        if (!parentConsent) {\n          violations.push('PARENT_CONSENT_REQUIRED');\n        }\n      }\n    }\n\n    return {\n      passed: violations.length === 0,\n      evidence: {\n        courseId,\n        pathway: course?.pathway,\n        skillCount: course?.skills.length || 0,\n        prerequisitesChecked: true\n      },\n      violations: violations.length > 0 ? violations : undefined,\n      timestamp: new Date().toISOString()\n    };\n  } catch (error) {\n    console.error('[ConstitutionalCheck] Enrollment eligibility error:', error);\n    return {\n      passed: false,\n      evidence: { error: String(error) },\n      violations: ['CONSTITUTIONAL_CHECK_ERROR'],\n      timestamp: new Date().toISOString()\n    };\n  }\n}\n\n/**\n * Pre-check for assessment:\n * - Verify learner is enrolled in course\n * - Check previous attempts (respect attempt limits)\n * - Verify assessment is valid/active\n */\nasync function checkAssessmentEligibility(\n  learnerEmail: string,\n  assessmentId: string,\n  prisma: any\n): Promise<ConstitutionalCheckResult> {\n  const violations: string[] = [];\n\n  try {\n    const assessment = await prisma.assessment.findUnique({\n      where: { id: assessmentId }\n    });\n\n    if (!assessment) {\n      violations.push('ASSESSMENT_NOT_FOUND');\n      return {\n        passed: false,\n        evidence: { assessmentId },\n        violations,\n        timestamp: new Date().toISOString()\n      };\n    }\n\n    // Check enrollment in course\n    const enrollment = await prisma.enrollment.findFirst({\n      where: { userEmail: learnerEmail, courseId: assessment.courseId }\n    });\n\n    if (!enrollment) {\n      violations.push('NOT_ENROLLED_IN_COURSE');\n    }\n\n    // Check attempt limit (max 3 attempts per assessment)\n    const previousAttempts = await prisma.assessmentAttempt.findMany({\n      where: { assessmentId, learnerEmail }\n    });\n\n    if (previousAttempts.length >= 3) {\n      violations.push('MAX_ATTEMPTS_EXCEEDED');\n    }\n\n    // Check if recently attempted (cooldown: 24 hours between attempts)\n    const lastAttempt = previousAttempts[previousAttempts.length - 1];\n    if (lastAttempt?.completedAt) {\n      const hoursSinceLastAttempt =\n        (Date.now() - lastAttempt.completedAt.getTime()) / (1000 * 60 * 60);\n      if (hoursSinceLastAttempt < 24) {\n        violations.push(`COOLDOWN_PERIOD:${Math.ceil(24 - hoursSinceLastAttempt)}h`);\n      }\n    }\n\n    return {\n      passed: violations.length === 0,\n      evidence: {\n        assessmentId,\n        previousAttempts: previousAttempts.length,\n        integrityLevel: assessment.integrityLevel\n      },\n      violations: violations.length > 0 ? violations : undefined,\n      timestamp: new Date().toISOString()\n    };\n  } catch (error) {\n    console.error('[ConstitutionalCheck] Assessment eligibility error:', error);\n    return {\n      passed: false,\n      evidence: { error: String(error) },\n      violations: ['CONSTITUTIONAL_CHECK_ERROR'],\n      timestamp: new Date().toISOString()\n    };\n  }\n}\n\n/**\n * Post-check for assessment submission:\n * - Verify integrity signals (no excessive browser switches, etc.)\n * - Check for plagiarism/suspicious patterns\n * - Validate score is within expected range\n */\nasync function checkAssessmentIntegrity(\n  attemptId: string,\n  responses: Record<string, any>,\n  integritySignals: Record<string, any>,\n  prisma: any\n): Promise<ConstitutionalCheckResult> {\n  const violations: string[] = [];\n\n  try {\n    // Check excessive browser tab switches\n    if (integritySignals.browserTabSwitches > 3) {\n      violations.push(`EXCESSIVE_TAB_SWITCHES:${integritySignals.browserTabSwitches}`);\n    }\n\n    // Check for copying behavior (high velocity response times)\n    if (integritySignals.averageResponseTime < 5) {\n      violations.push('SUSPICIOUS_RESPONSE_TIME');\n    }\n\n    // Check for unusual patterns (e.g., perfect score on advanced test)\n    const attempt = await prisma.assessmentAttempt.findUnique({\n      where: { id: attemptId },\n      include: { assessment: true }\n    });\n\n    if (attempt?.assessment.difficulty === 'expert' && attempt.score === 100) {\n      violations.push('SUSPICIOUS_SCORE_DISTRIBUTION');\n    }\n\n    // Call Constitutional AI Monitor for plagiarism check\n    // (if response text can be analyzed)\n    if (integritySignals.responsesText && integritySignals.responsesText.length > 100) {\n      try {\n        // TODO: Call external plagiarism detection service\n        // const plagiarismResult = await callPlagiarismDetector(integritySignals.responsesText);\n        // if (plagiarismResult.probability > 0.7) {\n        //   violations.push('PLAGIARISM_DETECTED');\n        // }\n      } catch (e) {\n        console.error('[ConstitutionalCheck] Plagiarism check error:', e);\n      }\n    }\n\n    return {\n      passed: violations.length === 0,\n      evidence: {\n        attemptId,\n        integritySignalsCount: Object.keys(integritySignals).length,\n        violationsDetected: violations.length\n      },\n      violations: violations.length > 0 ? violations : undefined,\n      timestamp: new Date().toISOString()\n    };\n  } catch (error) {\n    console.error('[ConstitutionalCheck] Assessment integrity error:', error);\n    return {\n      passed: false,\n      evidence: { error: String(error) },\n      violations: ['CONSTITUTIONAL_CHECK_ERROR'],\n      timestamp: new Date().toISOString()\n    };\n  }\n}\n\n/**\n * Post-check for credential issuance:\n * - Verify learner has required evidence (assessment scores, completion)\n * - Verify issuer has authority to issue credential\n * - Check for credential inflation (issuing same credential multiple times)\n */\nasync function checkCredentialValidity(\n  userId: string,\n  type: string,\n  evidence: Record<string, any>,\n  prisma: any\n): Promise<ConstitutionalCheckResult> {\n  const violations: string[] = [];\n\n  try {\n    // Check required evidence\n    if (!evidence || Object.keys(evidence).length === 0) {\n      violations.push('NO_EVIDENCE_PROVIDED');\n    }\n\n    // Check completion status\n    if (evidence.assessmentScore && evidence.assessmentScore < 70) {\n      violations.push('INSUFFICIENT_SCORE');\n    }\n\n    // Check for duplicate credentials (prevent credential inflation)\n    const existingCredentials = await prisma.credential.findMany({\n      where: { userId, type }\n    });\n\n    if (existingCredentials.length > 0) {\n      violations.push('DUPLICATE_CREDENTIAL');\n    }\n\n    // Verify learner identity (additional check if needed)\n    const user = await prisma.user.findUnique({\n      where: { id: userId }\n    });\n\n    if (!user) {\n      violations.push('USER_NOT_FOUND');\n    }\n\n    return {\n      passed: violations.length === 0,\n      evidence: {\n        userId,\n        type,\n        evidenceFields: Object.keys(evidence || {}),\n        existingCredentialsCount: existingCredentials.length\n      },\n      violations: violations.length > 0 ? violations : undefined,\n      timestamp: new Date().toISOString()\n    };\n  } catch (error) {\n    console.error('[ConstitutionalCheck] Credential validity error:', error);\n    return {\n      passed: false,\n      evidence: { error: String(error) },\n      violations: ['CONSTITUTIONAL_CHECK_ERROR'],\n      timestamp: new Date().toISOString()\n    };\n  }\n}\n\n/**\n * Post-check for tutoring message:\n * - Verify tutor response is grounded in course material\n * - Check alignment score (confidence in accuracy)\n * - Verify no hallucinations or false claims\n */\nasync function checkTutoringAlignment(\n  sessionId: string,\n  tutorResponse: string,\n  sourceReferences: Array<{ lessonId: string }>,\n  prisma: any\n): Promise<ConstitutionalCheckResult> {\n  const violations: string[] = [];\n\n  try {\n    // Check that response is grounded (has source references)\n    if (!sourceReferences || sourceReferences.length === 0) {\n      violations.push('NOT_GROUNDED');\n    }\n\n    // TODO: Call Constitutional AI Monitor to check alignment\n    // const alignmentResult = await callAlignmentChecker(tutorResponse, sourceReferences);\n    // if (alignmentResult.alignmentScore < 0.7) {\n    //   violations.push('LOW_ALIGNMENT_SCORE');\n    // }\n\n    // Verify source lessons are valid\n    if (sourceReferences && sourceReferences.length > 0) {\n      for (const ref of sourceReferences) {\n        const lesson = await prisma.lesson.findUnique({\n          where: { id: ref.lessonId }\n        });\n        if (!lesson) {\n          violations.push(`INVALID_SOURCE:${ref.lessonId}`);\n        }\n      }\n    }\n\n    return {\n      passed: violations.length === 0,\n      evidence: {\n        sessionId,\n        responseLength: tutorResponse.length,\n        sourceCount: sourceReferences?.length || 0,\n        groundedInCourseContent: (sourceReferences?.length || 0) > 0\n      },\n      violations: violations.length > 0 ? violations : undefined,\n      timestamp: new Date().toISOString()\n    };\n  } catch (error) {\n    console.error('[ConstitutionalCheck] Tutoring alignment error:', error);\n    return {\n      passed: false,\n      evidence: { error: String(error) },\n      violations: ['CONSTITUTIONAL_CHECK_ERROR'],\n      timestamp: new Date().toISOString()\n    };\n  }\n}\n\n// ============================================================================\n// Middleware Factory\n// ============================================================================\n\n/**\n * Factory middleware for constitutional checks\n * Usage: router.post('/enrollments', constitutionalCheck('enrollment'), ...)\n */\nexport function constitutionalCheck(checkType: string) {\n  return async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      let result: ConstitutionalCheckResult | null = null;\n\n      switch (checkType) {\n        case 'enrollment':\n          result = await checkEnrollmentEligibility(\n            req.user?.email!,\n            req.body.courseId,\n            (req as any).prisma\n          );\n          break;\n\n        case 'assessment':\n          result = await checkAssessmentEligibility(\n            req.user?.email!,\n            req.body.assessmentId,\n            (req as any).prisma\n          );\n          break;\n\n        case 'assessment_submit':\n          result = await checkAssessmentIntegrity(\n            req.params.attemptId,\n            req.body.responses,\n            req.body.integritySignals || {},\n            (req as any).prisma\n          );\n          break;\n\n        case 'credential_issue':\n          result = await checkCredentialValidity(\n            req.body.userId,\n            req.body.type,\n            req.body.evidence || {},\n            (req as any).prisma\n          );\n          break;\n\n        case 'tutoring':\n        case 'tutoring_message':\n          // Store check for post-action verification\n          (req as any).constitutionalCheckType = checkType;\n          return next();\n\n        default:\n          // Unknown check type, skip\n          return next();\n      }\n\n      // Store result in request for later logging\n      (req as any).constitutionalCheckResult = result;\n\n      // If check failed, reject immediately\n      if (result && !result.passed) {\n        return res.status(403).json({\n          error: {\n            code: 'CONSTITUTIONAL_VIOLATION',\n            message: `Constitutional check failed: ${result.violations?.join(', ')}`,\n            violations: result.violations,\n            constitutionalConcern: true\n          }\n        });\n      }\n\n      next();\n    } catch (error) {\n      console.error('[ConstitutionalCheck] Middleware error:', error);\n      res.status(500).json({\n        error: {\n          code: 'CONSTITUTIONAL_CHECK_ERROR',\n          message: 'Constitutional validation system error'\n        }\n      });\n    }\n  };\n}\n\nexport {\n  checkEnrollmentEligibility,\n  checkAssessmentEligibility,\n  checkAssessmentIntegrity,\n  checkCredentialValidity,\n  checkTutoringAlignment\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}