{"version":3,"names":["cov_wvq4m4nrk","actualCoverage","businessService","revenueService","paymentService","fundService","allocationService","legalService","notificationService","auditService","elaraAIService","AppError","ServiceOrchestrator","createBusinessWithLegalSetup","userId","businessData","f","s","business","createBusiness","guidance","getBusinessGuidance","businessType","legalDocs","generateBusinessDocuments","id","businessName","ownerName","userOwnership","citadelFundShare","logAction","action","details","timestamp","Date","sendNotification","type","title","message","legalDocuments","error","processRevenueWithAllocation","businessId","revenueData","transaction","recordTransaction","allocation","allocateRevenue","amount","ownerPayment","createPayment","businessOwnerAmount","paymentMethod","recordContribution","citadelFundAmount","toFixed","processPaymentWithNotification","paymentId","payment","confirmPayment","signBusinessDocuments","documentIds","signatureData","signedDocuments","docId","signedDoc","signDocument","documentId","signatureHash","push","length","distributeCitadelFund","distributionAmount","distributionType","fund","getFundBalance","balance","b","distribution","distributeFromFund","getBusinessDashboardData","revenue","payments","mentorship","Promise","all","getBusinessById","getStatistics","getPaymentHistory","getMentorshipSessions","serviceOrchestrator"],"sources":["service-orchestrator.ts"],"sourcesContent":["import { businessService } from '../services/business.service.js';\nimport { revenueService } from '../services/revenue.service.js';\nimport { paymentService } from '../services/payment.service.js';\nimport { fundService } from '../services/fund.service.js';\nimport { allocationService } from '../services/allocation.service.js';\nimport { legalService } from '../services/legal.service.js';\nimport { documentGenerationService } from '../services/document-generation.service.js';\nimport { notificationService } from '../services/notification.service.js';\nimport { auditService } from '../services/audit.service.js';\nimport { elaraAIService } from '../services/elara-ai.service.js';\nimport { AppError } from '../middleware/errorHandler.js';\n\n/**\n * Service Orchestrator - Coordinates all services for complex workflows\n */\nexport class ServiceOrchestrator {\n  /**\n   * Complete business creation workflow\n   * Integrates: Business, Legal, Elara AI, Audit\n   */\n  async createBusinessWithLegalSetup(\n    userId: string,\n    businessData: {\n      businessName: string;\n      businessType: string;\n      templateId: string;\n    }\n  ) {\n    try {\n      // 1. Create business\n      const business = await businessService.createBusiness(userId, businessData);\n\n      // 2. Get Elara AI guidance\n      const guidance = await elaraAIService.getBusinessGuidance(\n        businessData.businessType,\n        'business_creation'\n      );\n\n      // 3. Generate legal documents\n      const legalDocs = await legalService.generateBusinessDocuments(business.id, {\n        businessName: business.businessName,\n        ownerName: userId,\n        userOwnership: 90,\n        citadelFundShare: 10,\n      });\n\n      // 4. Log audit trail\n      await auditService.logAction({\n        action: 'BUSINESS_CREATED',\n        userId,\n        details: `Business ${business.businessName} created with legal documents`,\n        timestamp: new Date(),\n      });\n\n      // 5. Send notification\n      await notificationService.sendNotification(userId, {\n        type: 'business_created',\n        title: 'Business Created Successfully',\n        message: `Your business ${business.businessName} has been created. Please review and sign the legal documents.`,\n      });\n\n      return {\n        business,\n        legalDocuments: legalDocs,\n        guidance,\n      };\n    } catch (error) {\n      await auditService.logAction({\n        action: 'BUSINESS_CREATION_FAILED',\n        userId,\n        details: `Failed to create business: ${error}`,\n        timestamp: new Date(),\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Complete revenue processing workflow\n   * Integrates: Revenue, Payment, Fund, Allocation, Notification, Audit\n   */\n  async processRevenueWithAllocation(\n    businessId: string,\n    revenueData: {\n      amount: number;\n      currency: string;\n      source: string;\n    }\n  ) {\n    try {\n      // 1. Record revenue transaction\n      const transaction = await revenueService.recordTransaction(businessId, revenueData);\n\n      // 2. Calculate allocation (90/10 split)\n      const allocation = await allocationService.allocateRevenue(\n        transaction.id,\n        transaction.amount\n      );\n\n      // 3. Create payment for business owner (90%)\n      const ownerPayment = await paymentService.createPayment(businessId, '', {\n        amount: allocation.businessOwnerAmount,\n        type: 'revenue',\n        paymentMethod: 'automatic',\n      });\n\n      // 4. Record Citadel Fund contribution (10%)\n      await fundService.recordContribution(allocation.citadelFundAmount, businessId);\n\n      // 5. Log audit trail\n      await auditService.logAction({\n        action: 'REVENUE_PROCESSED',\n        userId: businessId,\n        details: `Revenue ${revenueData.amount} processed with allocation`,\n        timestamp: new Date(),\n      });\n\n      // 6. Send notifications\n      await notificationService.sendNotification(businessId, {\n        type: 'revenue_received',\n        title: 'Revenue Received',\n        message: `Revenue of $${revenueData.amount} received. Your share: $${allocation.businessOwnerAmount.toFixed(2)}`,\n      });\n\n      return {\n        transaction,\n        allocation,\n        ownerPayment,\n      };\n    } catch (error) {\n      await auditService.logAction({\n        action: 'REVENUE_PROCESSING_FAILED',\n        userId: businessId,\n        details: `Failed to process revenue: ${error}`,\n        timestamp: new Date(),\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Complete payment processing workflow\n   * Integrates: Payment, Notification, Audit\n   */\n  async processPaymentWithNotification(\n    businessId: string,\n    paymentId: string,\n    userId: string\n  ) {\n    try {\n      // 1. Confirm payment\n      const payment = await paymentService.confirmPayment(paymentId, userId);\n\n      // 2. Log audit trail\n      await auditService.logAction({\n        action: 'PAYMENT_CONFIRMED',\n        userId,\n        details: `Payment ${paymentId} confirmed for $${payment.amount}`,\n        timestamp: new Date(),\n      });\n\n      // 3. Send notification\n      await notificationService.sendNotification(userId, {\n        type: 'payment_confirmed',\n        title: 'Payment Confirmed',\n        message: `Payment of $${payment.amount} has been confirmed and processed.`,\n      });\n\n      return payment;\n    } catch (error) {\n      await auditService.logAction({\n        action: 'PAYMENT_CONFIRMATION_FAILED',\n        userId,\n        details: `Failed to confirm payment: ${error}`,\n        timestamp: new Date(),\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Complete document signing workflow\n   * Integrates: Legal, Document Generation, Audit, Notification\n   */\n  async signBusinessDocuments(\n    businessId: string,\n    userId: string,\n    documentIds: string[],\n    signatureData: {\n      signatureHash: string;\n      ipAddress: string;\n      userAgent: string;\n    }\n  ) {\n    try {\n      const signedDocuments = [];\n\n      // 1. Sign each document\n      for (const docId of documentIds) {\n        const signedDoc = await legalService.signDocument(businessId, docId, {\n          documentId: docId,\n          signatureHash: signatureData.signatureHash,\n        });\n        signedDocuments.push(signedDoc);\n      }\n\n      // 2. Log audit trail\n      await auditService.logAction({\n        action: 'DOCUMENTS_SIGNED',\n        userId,\n        details: `${documentIds.length} documents signed for business ${businessId}`,\n        timestamp: new Date(),\n      });\n\n      // 3. Send notification\n      await notificationService.sendNotification(userId, {\n        type: 'documents_signed',\n        title: 'Documents Signed',\n        message: `${documentIds.length} legal documents have been successfully signed.`,\n      });\n\n      return signedDocuments;\n    } catch (error) {\n      await auditService.logAction({\n        action: 'DOCUMENT_SIGNING_FAILED',\n        userId,\n        details: `Failed to sign documents: ${error}`,\n        timestamp: new Date(),\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Complete Citadel Fund distribution workflow\n   * Integrates: Fund, Payment, Notification, Audit\n   */\n  async distributeCitadelFund(\n    distributionAmount: number,\n    distributionType: 'scholarship' | 'project' | 'community_initiative'\n  ) {\n    try {\n      // 1. Check fund balance\n      const fund = await fundService.getFundBalance();\n      if (fund.balance < distributionAmount) {\n        throw new AppError(400, 'Insufficient fund balance');\n      }\n\n      // 2. Process distribution\n      const distribution = await fundService.distributeFromFund(\n        distributionAmount,\n        distributionType\n      );\n\n      // 3. Log audit trail\n      await auditService.logAction({\n        action: 'FUND_DISTRIBUTED',\n        userId: 'admin',\n        details: `Citadel Fund distribution of $${distributionAmount} for ${distributionType}`,\n        timestamp: new Date(),\n      });\n\n      // 4. Send notification to admins\n      await notificationService.sendNotification('admin', {\n        type: 'fund_distributed',\n        title: 'Citadel Fund Distributed',\n        message: `$${distributionAmount} distributed for ${distributionType}`,\n      });\n\n      return distribution;\n    } catch (error) {\n      await auditService.logAction({\n        action: 'FUND_DISTRIBUTION_FAILED',\n        userId: 'admin',\n        details: `Failed to distribute fund: ${error}`,\n        timestamp: new Date(),\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Get complete business dashboard data\n   * Integrates: Business, Revenue, Payment, Fund, Elara AI\n   */\n  async getBusinessDashboardData(businessId: string) {\n    try {\n      const [business, revenue, payments, fund, mentorship] = await Promise.all([\n        businessService.getBusinessById(businessId),\n        revenueService.getStatistics(businessId),\n        paymentService.getPaymentHistory(businessId),\n        fundService.getFundBalance(),\n        elaraAIService.getMentorshipSessions(businessId),\n      ]);\n\n      return {\n        business,\n        revenue,\n        payments,\n        fund,\n        mentorship,\n      };\n    } catch (error) {\n      throw new AppError(500, `Failed to get dashboard data: ${error}`);\n    }\n  }\n}\n\nexport const serviceOrchestrator = new ServiceOrchestrator();\n"],"mappings":"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","ignoreList":[]}