e72fb8ab70c2836df3081bdd05c2de85
/* istanbul ignore next */
function cov_wvq4m4nrk() {
  var path = "/workspaces/azora/services/elara-incubator/src/integration/service-orchestrator.ts";
  var hash = "f02b19a9a5f059af12e8fbf42780bb527c2a58f7";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/elara-incubator/src/integration/service-orchestrator.ts",
    statementMap: {
      "0": {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 75,
          column: 5
        }
      },
      "1": {
        start: {
          line: 31,
          column: 23
        },
        end: {
          line: 31,
          column: 81
        }
      },
      "2": {
        start: {
          line: 34,
          column: 23
        },
        end: {
          line: 37,
          column: 7
        }
      },
      "3": {
        start: {
          line: 40,
          column: 24
        },
        end: {
          line: 45,
          column: 8
        }
      },
      "4": {
        start: {
          line: 48,
          column: 6
        },
        end: {
          line: 53,
          column: 9
        }
      },
      "5": {
        start: {
          line: 56,
          column: 6
        },
        end: {
          line: 60,
          column: 9
        }
      },
      "6": {
        start: {
          line: 62,
          column: 6
        },
        end: {
          line: 66,
          column: 8
        }
      },
      "7": {
        start: {
          line: 68,
          column: 6
        },
        end: {
          line: 73,
          column: 9
        }
      },
      "8": {
        start: {
          line: 74,
          column: 6
        },
        end: {
          line: 74,
          column: 18
        }
      },
      "9": {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 138,
          column: 5
        }
      },
      "10": {
        start: {
          line: 92,
          column: 26
        },
        end: {
          line: 92,
          column: 89
        }
      },
      "11": {
        start: {
          line: 95,
          column: 25
        },
        end: {
          line: 98,
          column: 7
        }
      },
      "12": {
        start: {
          line: 101,
          column: 27
        },
        end: {
          line: 105,
          column: 8
        }
      },
      "13": {
        start: {
          line: 108,
          column: 6
        },
        end: {
          line: 108,
          column: 85
        }
      },
      "14": {
        start: {
          line: 111,
          column: 6
        },
        end: {
          line: 116,
          column: 9
        }
      },
      "15": {
        start: {
          line: 119,
          column: 6
        },
        end: {
          line: 123,
          column: 9
        }
      },
      "16": {
        start: {
          line: 125,
          column: 6
        },
        end: {
          line: 129,
          column: 8
        }
      },
      "17": {
        start: {
          line: 131,
          column: 6
        },
        end: {
          line: 136,
          column: 9
        }
      },
      "18": {
        start: {
          line: 137,
          column: 6
        },
        end: {
          line: 137,
          column: 18
        }
      },
      "19": {
        start: {
          line: 150,
          column: 4
        },
        end: {
          line: 178,
          column: 5
        }
      },
      "20": {
        start: {
          line: 152,
          column: 22
        },
        end: {
          line: 152,
          column: 76
        }
      },
      "21": {
        start: {
          line: 155,
          column: 6
        },
        end: {
          line: 160,
          column: 9
        }
      },
      "22": {
        start: {
          line: 163,
          column: 6
        },
        end: {
          line: 167,
          column: 9
        }
      },
      "23": {
        start: {
          line: 169,
          column: 6
        },
        end: {
          line: 169,
          column: 21
        }
      },
      "24": {
        start: {
          line: 171,
          column: 6
        },
        end: {
          line: 176,
          column: 9
        }
      },
      "25": {
        start: {
          line: 177,
          column: 6
        },
        end: {
          line: 177,
          column: 18
        }
      },
      "26": {
        start: {
          line: 195,
          column: 4
        },
        end: {
          line: 231,
          column: 5
        }
      },
      "27": {
        start: {
          line: 196,
          column: 30
        },
        end: {
          line: 196,
          column: 32
        }
      },
      "28": {
        start: {
          line: 199,
          column: 6
        },
        end: {
          line: 205,
          column: 7
        }
      },
      "29": {
        start: {
          line: 200,
          column: 26
        },
        end: {
          line: 203,
          column: 10
        }
      },
      "30": {
        start: {
          line: 204,
          column: 8
        },
        end: {
          line: 204,
          column: 40
        }
      },
      "31": {
        start: {
          line: 208,
          column: 6
        },
        end: {
          line: 213,
          column: 9
        }
      },
      "32": {
        start: {
          line: 216,
          column: 6
        },
        end: {
          line: 220,
          column: 9
        }
      },
      "33": {
        start: {
          line: 222,
          column: 6
        },
        end: {
          line: 222,
          column: 29
        }
      },
      "34": {
        start: {
          line: 224,
          column: 6
        },
        end: {
          line: 229,
          column: 9
        }
      },
      "35": {
        start: {
          line: 230,
          column: 6
        },
        end: {
          line: 230,
          column: 18
        }
      },
      "36": {
        start: {
          line: 242,
          column: 4
        },
        end: {
          line: 279,
          column: 5
        }
      },
      "37": {
        start: {
          line: 244,
          column: 19
        },
        end: {
          line: 244,
          column: 53
        }
      },
      "38": {
        start: {
          line: 245,
          column: 6
        },
        end: {
          line: 247,
          column: 7
        }
      },
      "39": {
        start: {
          line: 246,
          column: 8
        },
        end: {
          line: 246,
          column: 61
        }
      },
      "40": {
        start: {
          line: 250,
          column: 27
        },
        end: {
          line: 253,
          column: 7
        }
      },
      "41": {
        start: {
          line: 256,
          column: 6
        },
        end: {
          line: 261,
          column: 9
        }
      },
      "42": {
        start: {
          line: 264,
          column: 6
        },
        end: {
          line: 268,
          column: 9
        }
      },
      "43": {
        start: {
          line: 270,
          column: 6
        },
        end: {
          line: 270,
          column: 26
        }
      },
      "44": {
        start: {
          line: 272,
          column: 6
        },
        end: {
          line: 277,
          column: 9
        }
      },
      "45": {
        start: {
          line: 278,
          column: 6
        },
        end: {
          line: 278,
          column: 18
        }
      },
      "46": {
        start: {
          line: 287,
          column: 4
        },
        end: {
          line: 305,
          column: 5
        }
      },
      "47": {
        start: {
          line: 288,
          column: 62
        },
        end: {
          line: 294,
          column: 8
        }
      },
      "48": {
        start: {
          line: 296,
          column: 6
        },
        end: {
          line: 302,
          column: 8
        }
      },
      "49": {
        start: {
          line: 304,
          column: 6
        },
        end: {
          line: 304,
          column: 72
        }
      },
      "50": {
        start: {
          line: 309,
          column: 35
        },
        end: {
          line: 309,
          column: 60
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 21,
            column: 2
          },
          end: {
            line: 21,
            column: 3
          }
        },
        loc: {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 76,
            column: 3
          }
        },
        line: 28
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 82,
            column: 3
          }
        },
        loc: {
          start: {
            line: 89,
            column: 4
          },
          end: {
            line: 139,
            column: 3
          }
        },
        line: 89
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 145,
            column: 2
          },
          end: {
            line: 145,
            column: 3
          }
        },
        loc: {
          start: {
            line: 149,
            column: 4
          },
          end: {
            line: 179,
            column: 3
          }
        },
        line: 149
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 185,
            column: 2
          },
          end: {
            line: 185,
            column: 3
          }
        },
        loc: {
          start: {
            line: 194,
            column: 4
          },
          end: {
            line: 232,
            column: 3
          }
        },
        line: 194
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 238,
            column: 2
          },
          end: {
            line: 238,
            column: 3
          }
        },
        loc: {
          start: {
            line: 241,
            column: 4
          },
          end: {
            line: 280,
            column: 3
          }
        },
        line: 241
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 286,
            column: 2
          },
          end: {
            line: 286,
            column: 3
          }
        },
        loc: {
          start: {
            line: 286,
            column: 53
          },
          end: {
            line: 306,
            column: 3
          }
        },
        line: 286
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 245,
            column: 6
          },
          end: {
            line: 247,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 245,
            column: 6
          },
          end: {
            line: 247,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 245
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "f02b19a9a5f059af12e8fbf42780bb527c2a58f7"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_wvq4m4nrk = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_wvq4m4nrk();
import { businessService } from '../services/business.service.js';
import { revenueService } from '../services/revenue.service.js';
import { paymentService } from '../services/payment.service.js';
import { fundService } from '../services/fund.service.js';
import { allocationService } from '../services/allocation.service.js';
import { legalService } from '../services/legal.service.js';
import { notificationService } from '../services/notification.service.js';
import { auditService } from '../services/audit.service.js';
import { elaraAIService } from '../services/elara-ai.service.js';
import { AppError } from '../middleware/errorHandler.js';

/**
 * Service Orchestrator - Coordinates all services for complex workflows
 */
export class ServiceOrchestrator {
  /**
   * Complete business creation workflow
   * Integrates: Business, Legal, Elara AI, Audit
   */
  async createBusinessWithLegalSetup(userId, businessData) {
    /* istanbul ignore next */
    cov_wvq4m4nrk().f[0]++;
    cov_wvq4m4nrk().s[0]++;
    try {
      // 1. Create business
      const business =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[1]++, await businessService.createBusiness(userId, businessData));

      // 2. Get Elara AI guidance
      const guidance =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[2]++, await elaraAIService.getBusinessGuidance(businessData.businessType, 'business_creation'));

      // 3. Generate legal documents
      const legalDocs =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[3]++, await legalService.generateBusinessDocuments(business.id, {
        businessName: business.businessName,
        ownerName: userId,
        userOwnership: 90,
        citadelFundShare: 10
      }));

      // 4. Log audit trail
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[4]++;
      await auditService.logAction({
        action: 'BUSINESS_CREATED',
        userId,
        details: `Business ${business.businessName} created with legal documents`,
        timestamp: new Date()
      });

      // 5. Send notification
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[5]++;
      await notificationService.sendNotification(userId, {
        type: 'business_created',
        title: 'Business Created Successfully',
        message: `Your business ${business.businessName} has been created. Please review and sign the legal documents.`
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[6]++;
      return {
        business,
        legalDocuments: legalDocs,
        guidance
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[7]++;
      await auditService.logAction({
        action: 'BUSINESS_CREATION_FAILED',
        userId,
        details: `Failed to create business: ${error}`,
        timestamp: new Date()
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[8]++;
      throw error;
    }
  }

  /**
   * Complete revenue processing workflow
   * Integrates: Revenue, Payment, Fund, Allocation, Notification, Audit
   */
  async processRevenueWithAllocation(businessId, revenueData) {
    /* istanbul ignore next */
    cov_wvq4m4nrk().f[1]++;
    cov_wvq4m4nrk().s[9]++;
    try {
      // 1. Record revenue transaction
      const transaction =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[10]++, await revenueService.recordTransaction(businessId, revenueData));

      // 2. Calculate allocation (90/10 split)
      const allocation =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[11]++, await allocationService.allocateRevenue(transaction.id, transaction.amount));

      // 3. Create payment for business owner (90%)
      const ownerPayment =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[12]++, await paymentService.createPayment(businessId, '', {
        amount: allocation.businessOwnerAmount,
        type: 'revenue',
        paymentMethod: 'automatic'
      }));

      // 4. Record Citadel Fund contribution (10%)
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[13]++;
      await fundService.recordContribution(allocation.citadelFundAmount, businessId);

      // 5. Log audit trail
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[14]++;
      await auditService.logAction({
        action: 'REVENUE_PROCESSED',
        userId: businessId,
        details: `Revenue ${revenueData.amount} processed with allocation`,
        timestamp: new Date()
      });

      // 6. Send notifications
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[15]++;
      await notificationService.sendNotification(businessId, {
        type: 'revenue_received',
        title: 'Revenue Received',
        message: `Revenue of $${revenueData.amount} received. Your share: $${allocation.businessOwnerAmount.toFixed(2)}`
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[16]++;
      return {
        transaction,
        allocation,
        ownerPayment
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[17]++;
      await auditService.logAction({
        action: 'REVENUE_PROCESSING_FAILED',
        userId: businessId,
        details: `Failed to process revenue: ${error}`,
        timestamp: new Date()
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[18]++;
      throw error;
    }
  }

  /**
   * Complete payment processing workflow
   * Integrates: Payment, Notification, Audit
   */
  async processPaymentWithNotification(businessId, paymentId, userId) {
    /* istanbul ignore next */
    cov_wvq4m4nrk().f[2]++;
    cov_wvq4m4nrk().s[19]++;
    try {
      // 1. Confirm payment
      const payment =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[20]++, await paymentService.confirmPayment(paymentId, userId));

      // 2. Log audit trail
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[21]++;
      await auditService.logAction({
        action: 'PAYMENT_CONFIRMED',
        userId,
        details: `Payment ${paymentId} confirmed for $${payment.amount}`,
        timestamp: new Date()
      });

      // 3. Send notification
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[22]++;
      await notificationService.sendNotification(userId, {
        type: 'payment_confirmed',
        title: 'Payment Confirmed',
        message: `Payment of $${payment.amount} has been confirmed and processed.`
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[23]++;
      return payment;
    } catch (error) {
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[24]++;
      await auditService.logAction({
        action: 'PAYMENT_CONFIRMATION_FAILED',
        userId,
        details: `Failed to confirm payment: ${error}`,
        timestamp: new Date()
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[25]++;
      throw error;
    }
  }

  /**
   * Complete document signing workflow
   * Integrates: Legal, Document Generation, Audit, Notification
   */
  async signBusinessDocuments(businessId, userId, documentIds, signatureData) {
    /* istanbul ignore next */
    cov_wvq4m4nrk().f[3]++;
    cov_wvq4m4nrk().s[26]++;
    try {
      const signedDocuments =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[27]++, []);

      // 1. Sign each document
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[28]++;
      for (const docId of documentIds) {
        const signedDoc =
        /* istanbul ignore next */
        (cov_wvq4m4nrk().s[29]++, await legalService.signDocument(businessId, docId, {
          documentId: docId,
          signatureHash: signatureData.signatureHash
        }));
        /* istanbul ignore next */
        cov_wvq4m4nrk().s[30]++;
        signedDocuments.push(signedDoc);
      }

      // 2. Log audit trail
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[31]++;
      await auditService.logAction({
        action: 'DOCUMENTS_SIGNED',
        userId,
        details: `${documentIds.length} documents signed for business ${businessId}`,
        timestamp: new Date()
      });

      // 3. Send notification
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[32]++;
      await notificationService.sendNotification(userId, {
        type: 'documents_signed',
        title: 'Documents Signed',
        message: `${documentIds.length} legal documents have been successfully signed.`
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[33]++;
      return signedDocuments;
    } catch (error) {
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[34]++;
      await auditService.logAction({
        action: 'DOCUMENT_SIGNING_FAILED',
        userId,
        details: `Failed to sign documents: ${error}`,
        timestamp: new Date()
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[35]++;
      throw error;
    }
  }

  /**
   * Complete Citadel Fund distribution workflow
   * Integrates: Fund, Payment, Notification, Audit
   */
  async distributeCitadelFund(distributionAmount, distributionType) {
    /* istanbul ignore next */
    cov_wvq4m4nrk().f[4]++;
    cov_wvq4m4nrk().s[36]++;
    try {
      // 1. Check fund balance
      const fund =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[37]++, await fundService.getFundBalance());
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[38]++;
      if (fund.balance < distributionAmount) {
        /* istanbul ignore next */
        cov_wvq4m4nrk().b[0][0]++;
        cov_wvq4m4nrk().s[39]++;
        throw new AppError(400, 'Insufficient fund balance');
      } else
      /* istanbul ignore next */
      {
        cov_wvq4m4nrk().b[0][1]++;
      }

      // 2. Process distribution
      const distribution =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[40]++, await fundService.distributeFromFund(distributionAmount, distributionType));

      // 3. Log audit trail
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[41]++;
      await auditService.logAction({
        action: 'FUND_DISTRIBUTED',
        userId: 'admin',
        details: `Citadel Fund distribution of $${distributionAmount} for ${distributionType}`,
        timestamp: new Date()
      });

      // 4. Send notification to admins
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[42]++;
      await notificationService.sendNotification('admin', {
        type: 'fund_distributed',
        title: 'Citadel Fund Distributed',
        message: `$${distributionAmount} distributed for ${distributionType}`
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[43]++;
      return distribution;
    } catch (error) {
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[44]++;
      await auditService.logAction({
        action: 'FUND_DISTRIBUTION_FAILED',
        userId: 'admin',
        details: `Failed to distribute fund: ${error}`,
        timestamp: new Date()
      });
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[45]++;
      throw error;
    }
  }

  /**
   * Get complete business dashboard data
   * Integrates: Business, Revenue, Payment, Fund, Elara AI
   */
  async getBusinessDashboardData(businessId) {
    /* istanbul ignore next */
    cov_wvq4m4nrk().f[5]++;
    cov_wvq4m4nrk().s[46]++;
    try {
      const [business, revenue, payments, fund, mentorship] =
      /* istanbul ignore next */
      (cov_wvq4m4nrk().s[47]++, await Promise.all([businessService.getBusinessById(businessId), revenueService.getStatistics(businessId), paymentService.getPaymentHistory(businessId), fundService.getFundBalance(), elaraAIService.getMentorshipSessions(businessId)]));
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[48]++;
      return {
        business,
        revenue,
        payments,
        fund,
        mentorship
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_wvq4m4nrk().s[49]++;
      throw new AppError(500, `Failed to get dashboard data: ${error}`);
    }
  }
}
export const serviceOrchestrator =
/* istanbul ignore next */
(cov_wvq4m4nrk().s[50]++, new ServiceOrchestrator());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfd3ZxNG00bnJrIiwiYWN0dWFsQ292ZXJhZ2UiLCJidXNpbmVzc1NlcnZpY2UiLCJyZXZlbnVlU2VydmljZSIsInBheW1lbnRTZXJ2aWNlIiwiZnVuZFNlcnZpY2UiLCJhbGxvY2F0aW9uU2VydmljZSIsImxlZ2FsU2VydmljZSIsIm5vdGlmaWNhdGlvblNlcnZpY2UiLCJhdWRpdFNlcnZpY2UiLCJlbGFyYUFJU2VydmljZSIsIkFwcEVycm9yIiwiU2VydmljZU9yY2hlc3RyYXRvciIsImNyZWF0ZUJ1c2luZXNzV2l0aExlZ2FsU2V0dXAiLCJ1c2VySWQiLCJidXNpbmVzc0RhdGEiLCJmIiwicyIsImJ1c2luZXNzIiwiY3JlYXRlQnVzaW5lc3MiLCJndWlkYW5jZSIsImdldEJ1c2luZXNzR3VpZGFuY2UiLCJidXNpbmVzc1R5cGUiLCJsZWdhbERvY3MiLCJnZW5lcmF0ZUJ1c2luZXNzRG9jdW1lbnRzIiwiaWQiLCJidXNpbmVzc05hbWUiLCJvd25lck5hbWUiLCJ1c2VyT3duZXJzaGlwIiwiY2l0YWRlbEZ1bmRTaGFyZSIsImxvZ0FjdGlvbiIsImFjdGlvbiIsImRldGFpbHMiLCJ0aW1lc3RhbXAiLCJEYXRlIiwic2VuZE5vdGlmaWNhdGlvbiIsInR5cGUiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJsZWdhbERvY3VtZW50cyIsImVycm9yIiwicHJvY2Vzc1JldmVudWVXaXRoQWxsb2NhdGlvbiIsImJ1c2luZXNzSWQiLCJyZXZlbnVlRGF0YSIsInRyYW5zYWN0aW9uIiwicmVjb3JkVHJhbnNhY3Rpb24iLCJhbGxvY2F0aW9uIiwiYWxsb2NhdGVSZXZlbnVlIiwiYW1vdW50Iiwib3duZXJQYXltZW50IiwiY3JlYXRlUGF5bWVudCIsImJ1c2luZXNzT3duZXJBbW91bnQiLCJwYXltZW50TWV0aG9kIiwicmVjb3JkQ29udHJpYnV0aW9uIiwiY2l0YWRlbEZ1bmRBbW91bnQiLCJ0b0ZpeGVkIiwicHJvY2Vzc1BheW1lbnRXaXRoTm90aWZpY2F0aW9uIiwicGF5bWVudElkIiwicGF5bWVudCIsImNvbmZpcm1QYXltZW50Iiwic2lnbkJ1c2luZXNzRG9jdW1lbnRzIiwiZG9jdW1lbnRJZHMiLCJzaWduYXR1cmVEYXRhIiwic2lnbmVkRG9jdW1lbnRzIiwiZG9jSWQiLCJzaWduZWREb2MiLCJzaWduRG9jdW1lbnQiLCJkb2N1bWVudElkIiwic2lnbmF0dXJlSGFzaCIsInB1c2giLCJsZW5ndGgiLCJkaXN0cmlidXRlQ2l0YWRlbEZ1bmQiLCJkaXN0cmlidXRpb25BbW91bnQiLCJkaXN0cmlidXRpb25UeXBlIiwiZnVuZCIsImdldEZ1bmRCYWxhbmNlIiwiYmFsYW5jZSIsImIiLCJkaXN0cmlidXRpb24iLCJkaXN0cmlidXRlRnJvbUZ1bmQiLCJnZXRCdXNpbmVzc0Rhc2hib2FyZERhdGEiLCJyZXZlbnVlIiwicGF5bWVudHMiLCJtZW50b3JzaGlwIiwiUHJvbWlzZSIsImFsbCIsImdldEJ1c2luZXNzQnlJZCIsImdldFN0YXRpc3RpY3MiLCJnZXRQYXltZW50SGlzdG9yeSIsImdldE1lbnRvcnNoaXBTZXNzaW9ucyIsInNlcnZpY2VPcmNoZXN0cmF0b3IiXSwic291cmNlcyI6WyJzZXJ2aWNlLW9yY2hlc3RyYXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidXNpbmVzc1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9idXNpbmVzcy5zZXJ2aWNlLmpzJztcbmltcG9ydCB7IHJldmVudWVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvcmV2ZW51ZS5zZXJ2aWNlLmpzJztcbmltcG9ydCB7IHBheW1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvcGF5bWVudC5zZXJ2aWNlLmpzJztcbmltcG9ydCB7IGZ1bmRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvZnVuZC5zZXJ2aWNlLmpzJztcbmltcG9ydCB7IGFsbG9jYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvYWxsb2NhdGlvbi5zZXJ2aWNlLmpzJztcbmltcG9ydCB7IGxlZ2FsU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2xlZ2FsLnNlcnZpY2UuanMnO1xuaW1wb3J0IHsgZG9jdW1lbnRHZW5lcmF0aW9uU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2RvY3VtZW50LWdlbmVyYXRpb24uc2VydmljZS5qcyc7XG5pbXBvcnQgeyBub3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbm90aWZpY2F0aW9uLnNlcnZpY2UuanMnO1xuaW1wb3J0IHsgYXVkaXRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvYXVkaXQuc2VydmljZS5qcyc7XG5pbXBvcnQgeyBlbGFyYUFJU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2VsYXJhLWFpLnNlcnZpY2UuanMnO1xuaW1wb3J0IHsgQXBwRXJyb3IgfSBmcm9tICcuLi9taWRkbGV3YXJlL2Vycm9ySGFuZGxlci5qcyc7XG5cbi8qKlxuICogU2VydmljZSBPcmNoZXN0cmF0b3IgLSBDb29yZGluYXRlcyBhbGwgc2VydmljZXMgZm9yIGNvbXBsZXggd29ya2Zsb3dzXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlT3JjaGVzdHJhdG9yIHtcbiAgLyoqXG4gICAqIENvbXBsZXRlIGJ1c2luZXNzIGNyZWF0aW9uIHdvcmtmbG93XG4gICAqIEludGVncmF0ZXM6IEJ1c2luZXNzLCBMZWdhbCwgRWxhcmEgQUksIEF1ZGl0XG4gICAqL1xuICBhc3luYyBjcmVhdGVCdXNpbmVzc1dpdGhMZWdhbFNldHVwKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIGJ1c2luZXNzRGF0YToge1xuICAgICAgYnVzaW5lc3NOYW1lOiBzdHJpbmc7XG4gICAgICBidXNpbmVzc1R5cGU6IHN0cmluZztcbiAgICAgIHRlbXBsYXRlSWQ6IHN0cmluZztcbiAgICB9XG4gICkge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBDcmVhdGUgYnVzaW5lc3NcbiAgICAgIGNvbnN0IGJ1c2luZXNzID0gYXdhaXQgYnVzaW5lc3NTZXJ2aWNlLmNyZWF0ZUJ1c2luZXNzKHVzZXJJZCwgYnVzaW5lc3NEYXRhKTtcblxuICAgICAgLy8gMi4gR2V0IEVsYXJhIEFJIGd1aWRhbmNlXG4gICAgICBjb25zdCBndWlkYW5jZSA9IGF3YWl0IGVsYXJhQUlTZXJ2aWNlLmdldEJ1c2luZXNzR3VpZGFuY2UoXG4gICAgICAgIGJ1c2luZXNzRGF0YS5idXNpbmVzc1R5cGUsXG4gICAgICAgICdidXNpbmVzc19jcmVhdGlvbidcbiAgICAgICk7XG5cbiAgICAgIC8vIDMuIEdlbmVyYXRlIGxlZ2FsIGRvY3VtZW50c1xuICAgICAgY29uc3QgbGVnYWxEb2NzID0gYXdhaXQgbGVnYWxTZXJ2aWNlLmdlbmVyYXRlQnVzaW5lc3NEb2N1bWVudHMoYnVzaW5lc3MuaWQsIHtcbiAgICAgICAgYnVzaW5lc3NOYW1lOiBidXNpbmVzcy5idXNpbmVzc05hbWUsXG4gICAgICAgIG93bmVyTmFtZTogdXNlcklkLFxuICAgICAgICB1c2VyT3duZXJzaGlwOiA5MCxcbiAgICAgICAgY2l0YWRlbEZ1bmRTaGFyZTogMTAsXG4gICAgICB9KTtcblxuICAgICAgLy8gNC4gTG9nIGF1ZGl0IHRyYWlsXG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nQWN0aW9uKHtcbiAgICAgICAgYWN0aW9uOiAnQlVTSU5FU1NfQ1JFQVRFRCcsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgZGV0YWlsczogYEJ1c2luZXNzICR7YnVzaW5lc3MuYnVzaW5lc3NOYW1lfSBjcmVhdGVkIHdpdGggbGVnYWwgZG9jdW1lbnRzYCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDUuIFNlbmQgbm90aWZpY2F0aW9uXG4gICAgICBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLnNlbmROb3RpZmljYXRpb24odXNlcklkLCB7XG4gICAgICAgIHR5cGU6ICdidXNpbmVzc19jcmVhdGVkJyxcbiAgICAgICAgdGl0bGU6ICdCdXNpbmVzcyBDcmVhdGVkIFN1Y2Nlc3NmdWxseScsXG4gICAgICAgIG1lc3NhZ2U6IGBZb3VyIGJ1c2luZXNzICR7YnVzaW5lc3MuYnVzaW5lc3NOYW1lfSBoYXMgYmVlbiBjcmVhdGVkLiBQbGVhc2UgcmV2aWV3IGFuZCBzaWduIHRoZSBsZWdhbCBkb2N1bWVudHMuYCxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBidXNpbmVzcyxcbiAgICAgICAgbGVnYWxEb2N1bWVudHM6IGxlZ2FsRG9jcyxcbiAgICAgICAgZ3VpZGFuY2UsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nQWN0aW9uKHtcbiAgICAgICAgYWN0aW9uOiAnQlVTSU5FU1NfQ1JFQVRJT05fRkFJTEVEJyxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBkZXRhaWxzOiBgRmFpbGVkIHRvIGNyZWF0ZSBidXNpbmVzczogJHtlcnJvcn1gLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV0ZSByZXZlbnVlIHByb2Nlc3Npbmcgd29ya2Zsb3dcbiAgICogSW50ZWdyYXRlczogUmV2ZW51ZSwgUGF5bWVudCwgRnVuZCwgQWxsb2NhdGlvbiwgTm90aWZpY2F0aW9uLCBBdWRpdFxuICAgKi9cbiAgYXN5bmMgcHJvY2Vzc1JldmVudWVXaXRoQWxsb2NhdGlvbihcbiAgICBidXNpbmVzc0lkOiBzdHJpbmcsXG4gICAgcmV2ZW51ZURhdGE6IHtcbiAgICAgIGFtb3VudDogbnVtYmVyO1xuICAgICAgY3VycmVuY3k6IHN0cmluZztcbiAgICAgIHNvdXJjZTogc3RyaW5nO1xuICAgIH1cbiAgKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIFJlY29yZCByZXZlbnVlIHRyYW5zYWN0aW9uXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHJldmVudWVTZXJ2aWNlLnJlY29yZFRyYW5zYWN0aW9uKGJ1c2luZXNzSWQsIHJldmVudWVEYXRhKTtcblxuICAgICAgLy8gMi4gQ2FsY3VsYXRlIGFsbG9jYXRpb24gKDkwLzEwIHNwbGl0KVxuICAgICAgY29uc3QgYWxsb2NhdGlvbiA9IGF3YWl0IGFsbG9jYXRpb25TZXJ2aWNlLmFsbG9jYXRlUmV2ZW51ZShcbiAgICAgICAgdHJhbnNhY3Rpb24uaWQsXG4gICAgICAgIHRyYW5zYWN0aW9uLmFtb3VudFxuICAgICAgKTtcblxuICAgICAgLy8gMy4gQ3JlYXRlIHBheW1lbnQgZm9yIGJ1c2luZXNzIG93bmVyICg5MCUpXG4gICAgICBjb25zdCBvd25lclBheW1lbnQgPSBhd2FpdCBwYXltZW50U2VydmljZS5jcmVhdGVQYXltZW50KGJ1c2luZXNzSWQsICcnLCB7XG4gICAgICAgIGFtb3VudDogYWxsb2NhdGlvbi5idXNpbmVzc093bmVyQW1vdW50LFxuICAgICAgICB0eXBlOiAncmV2ZW51ZScsXG4gICAgICAgIHBheW1lbnRNZXRob2Q6ICdhdXRvbWF0aWMnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDQuIFJlY29yZCBDaXRhZGVsIEZ1bmQgY29udHJpYnV0aW9uICgxMCUpXG4gICAgICBhd2FpdCBmdW5kU2VydmljZS5yZWNvcmRDb250cmlidXRpb24oYWxsb2NhdGlvbi5jaXRhZGVsRnVuZEFtb3VudCwgYnVzaW5lc3NJZCk7XG5cbiAgICAgIC8vIDUuIExvZyBhdWRpdCB0cmFpbFxuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ0FjdGlvbih7XG4gICAgICAgIGFjdGlvbjogJ1JFVkVOVUVfUFJPQ0VTU0VEJyxcbiAgICAgICAgdXNlcklkOiBidXNpbmVzc0lkLFxuICAgICAgICBkZXRhaWxzOiBgUmV2ZW51ZSAke3JldmVudWVEYXRhLmFtb3VudH0gcHJvY2Vzc2VkIHdpdGggYWxsb2NhdGlvbmAsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyA2LiBTZW5kIG5vdGlmaWNhdGlvbnNcbiAgICAgIGF3YWl0IG5vdGlmaWNhdGlvblNlcnZpY2Uuc2VuZE5vdGlmaWNhdGlvbihidXNpbmVzc0lkLCB7XG4gICAgICAgIHR5cGU6ICdyZXZlbnVlX3JlY2VpdmVkJyxcbiAgICAgICAgdGl0bGU6ICdSZXZlbnVlIFJlY2VpdmVkJyxcbiAgICAgICAgbWVzc2FnZTogYFJldmVudWUgb2YgJCR7cmV2ZW51ZURhdGEuYW1vdW50fSByZWNlaXZlZC4gWW91ciBzaGFyZTogJCR7YWxsb2NhdGlvbi5idXNpbmVzc093bmVyQW1vdW50LnRvRml4ZWQoMil9YCxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0cmFuc2FjdGlvbixcbiAgICAgICAgYWxsb2NhdGlvbixcbiAgICAgICAgb3duZXJQYXltZW50LFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ0FjdGlvbih7XG4gICAgICAgIGFjdGlvbjogJ1JFVkVOVUVfUFJPQ0VTU0lOR19GQUlMRUQnLFxuICAgICAgICB1c2VySWQ6IGJ1c2luZXNzSWQsXG4gICAgICAgIGRldGFpbHM6IGBGYWlsZWQgdG8gcHJvY2VzcyByZXZlbnVlOiAke2Vycm9yfWAsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbXBsZXRlIHBheW1lbnQgcHJvY2Vzc2luZyB3b3JrZmxvd1xuICAgKiBJbnRlZ3JhdGVzOiBQYXltZW50LCBOb3RpZmljYXRpb24sIEF1ZGl0XG4gICAqL1xuICBhc3luYyBwcm9jZXNzUGF5bWVudFdpdGhOb3RpZmljYXRpb24oXG4gICAgYnVzaW5lc3NJZDogc3RyaW5nLFxuICAgIHBheW1lbnRJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nXG4gICkge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBDb25maXJtIHBheW1lbnRcbiAgICAgIGNvbnN0IHBheW1lbnQgPSBhd2FpdCBwYXltZW50U2VydmljZS5jb25maXJtUGF5bWVudChwYXltZW50SWQsIHVzZXJJZCk7XG5cbiAgICAgIC8vIDIuIExvZyBhdWRpdCB0cmFpbFxuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ0FjdGlvbih7XG4gICAgICAgIGFjdGlvbjogJ1BBWU1FTlRfQ09ORklSTUVEJyxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBkZXRhaWxzOiBgUGF5bWVudCAke3BheW1lbnRJZH0gY29uZmlybWVkIGZvciAkJHtwYXltZW50LmFtb3VudH1gLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9KTtcblxuICAgICAgLy8gMy4gU2VuZCBub3RpZmljYXRpb25cbiAgICAgIGF3YWl0IG5vdGlmaWNhdGlvblNlcnZpY2Uuc2VuZE5vdGlmaWNhdGlvbih1c2VySWQsIHtcbiAgICAgICAgdHlwZTogJ3BheW1lbnRfY29uZmlybWVkJyxcbiAgICAgICAgdGl0bGU6ICdQYXltZW50IENvbmZpcm1lZCcsXG4gICAgICAgIG1lc3NhZ2U6IGBQYXltZW50IG9mICQke3BheW1lbnQuYW1vdW50fSBoYXMgYmVlbiBjb25maXJtZWQgYW5kIHByb2Nlc3NlZC5gLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBwYXltZW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UubG9nQWN0aW9uKHtcbiAgICAgICAgYWN0aW9uOiAnUEFZTUVOVF9DT05GSVJNQVRJT05fRkFJTEVEJyxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBkZXRhaWxzOiBgRmFpbGVkIHRvIGNvbmZpcm0gcGF5bWVudDogJHtlcnJvcn1gLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV0ZSBkb2N1bWVudCBzaWduaW5nIHdvcmtmbG93XG4gICAqIEludGVncmF0ZXM6IExlZ2FsLCBEb2N1bWVudCBHZW5lcmF0aW9uLCBBdWRpdCwgTm90aWZpY2F0aW9uXG4gICAqL1xuICBhc3luYyBzaWduQnVzaW5lc3NEb2N1bWVudHMoXG4gICAgYnVzaW5lc3NJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIGRvY3VtZW50SWRzOiBzdHJpbmdbXSxcbiAgICBzaWduYXR1cmVEYXRhOiB7XG4gICAgICBzaWduYXR1cmVIYXNoOiBzdHJpbmc7XG4gICAgICBpcEFkZHJlc3M6IHN0cmluZztcbiAgICAgIHVzZXJBZ2VudDogc3RyaW5nO1xuICAgIH1cbiAgKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNpZ25lZERvY3VtZW50cyA9IFtdO1xuXG4gICAgICAvLyAxLiBTaWduIGVhY2ggZG9jdW1lbnRcbiAgICAgIGZvciAoY29uc3QgZG9jSWQgb2YgZG9jdW1lbnRJZHMpIHtcbiAgICAgICAgY29uc3Qgc2lnbmVkRG9jID0gYXdhaXQgbGVnYWxTZXJ2aWNlLnNpZ25Eb2N1bWVudChidXNpbmVzc0lkLCBkb2NJZCwge1xuICAgICAgICAgIGRvY3VtZW50SWQ6IGRvY0lkLFxuICAgICAgICAgIHNpZ25hdHVyZUhhc2g6IHNpZ25hdHVyZURhdGEuc2lnbmF0dXJlSGFzaCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNpZ25lZERvY3VtZW50cy5wdXNoKHNpZ25lZERvYyk7XG4gICAgICB9XG5cbiAgICAgIC8vIDIuIExvZyBhdWRpdCB0cmFpbFxuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ0FjdGlvbih7XG4gICAgICAgIGFjdGlvbjogJ0RPQ1VNRU5UU19TSUdORUQnLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGRldGFpbHM6IGAke2RvY3VtZW50SWRzLmxlbmd0aH0gZG9jdW1lbnRzIHNpZ25lZCBmb3IgYnVzaW5lc3MgJHtidXNpbmVzc0lkfWAsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAzLiBTZW5kIG5vdGlmaWNhdGlvblxuICAgICAgYXdhaXQgbm90aWZpY2F0aW9uU2VydmljZS5zZW5kTm90aWZpY2F0aW9uKHVzZXJJZCwge1xuICAgICAgICB0eXBlOiAnZG9jdW1lbnRzX3NpZ25lZCcsXG4gICAgICAgIHRpdGxlOiAnRG9jdW1lbnRzIFNpZ25lZCcsXG4gICAgICAgIG1lc3NhZ2U6IGAke2RvY3VtZW50SWRzLmxlbmd0aH0gbGVnYWwgZG9jdW1lbnRzIGhhdmUgYmVlbiBzdWNjZXNzZnVsbHkgc2lnbmVkLmAsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNpZ25lZERvY3VtZW50cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ0FjdGlvbih7XG4gICAgICAgIGFjdGlvbjogJ0RPQ1VNRU5UX1NJR05JTkdfRkFJTEVEJyxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBkZXRhaWxzOiBgRmFpbGVkIHRvIHNpZ24gZG9jdW1lbnRzOiAke2Vycm9yfWAsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbXBsZXRlIENpdGFkZWwgRnVuZCBkaXN0cmlidXRpb24gd29ya2Zsb3dcbiAgICogSW50ZWdyYXRlczogRnVuZCwgUGF5bWVudCwgTm90aWZpY2F0aW9uLCBBdWRpdFxuICAgKi9cbiAgYXN5bmMgZGlzdHJpYnV0ZUNpdGFkZWxGdW5kKFxuICAgIGRpc3RyaWJ1dGlvbkFtb3VudDogbnVtYmVyLFxuICAgIGRpc3RyaWJ1dGlvblR5cGU6ICdzY2hvbGFyc2hpcCcgfCAncHJvamVjdCcgfCAnY29tbXVuaXR5X2luaXRpYXRpdmUnXG4gICkge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBDaGVjayBmdW5kIGJhbGFuY2VcbiAgICAgIGNvbnN0IGZ1bmQgPSBhd2FpdCBmdW5kU2VydmljZS5nZXRGdW5kQmFsYW5jZSgpO1xuICAgICAgaWYgKGZ1bmQuYmFsYW5jZSA8IGRpc3RyaWJ1dGlvbkFtb3VudCkge1xuICAgICAgICB0aHJvdyBuZXcgQXBwRXJyb3IoNDAwLCAnSW5zdWZmaWNpZW50IGZ1bmQgYmFsYW5jZScpO1xuICAgICAgfVxuXG4gICAgICAvLyAyLiBQcm9jZXNzIGRpc3RyaWJ1dGlvblxuICAgICAgY29uc3QgZGlzdHJpYnV0aW9uID0gYXdhaXQgZnVuZFNlcnZpY2UuZGlzdHJpYnV0ZUZyb21GdW5kKFxuICAgICAgICBkaXN0cmlidXRpb25BbW91bnQsXG4gICAgICAgIGRpc3RyaWJ1dGlvblR5cGVcbiAgICAgICk7XG5cbiAgICAgIC8vIDMuIExvZyBhdWRpdCB0cmFpbFxuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmxvZ0FjdGlvbih7XG4gICAgICAgIGFjdGlvbjogJ0ZVTkRfRElTVFJJQlVURUQnLFxuICAgICAgICB1c2VySWQ6ICdhZG1pbicsXG4gICAgICAgIGRldGFpbHM6IGBDaXRhZGVsIEZ1bmQgZGlzdHJpYnV0aW9uIG9mICQke2Rpc3RyaWJ1dGlvbkFtb3VudH0gZm9yICR7ZGlzdHJpYnV0aW9uVHlwZX1gLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9KTtcblxuICAgICAgLy8gNC4gU2VuZCBub3RpZmljYXRpb24gdG8gYWRtaW5zXG4gICAgICBhd2FpdCBub3RpZmljYXRpb25TZXJ2aWNlLnNlbmROb3RpZmljYXRpb24oJ2FkbWluJywge1xuICAgICAgICB0eXBlOiAnZnVuZF9kaXN0cmlidXRlZCcsXG4gICAgICAgIHRpdGxlOiAnQ2l0YWRlbCBGdW5kIERpc3RyaWJ1dGVkJyxcbiAgICAgICAgbWVzc2FnZTogYCQke2Rpc3RyaWJ1dGlvbkFtb3VudH0gZGlzdHJpYnV0ZWQgZm9yICR7ZGlzdHJpYnV0aW9uVHlwZX1gLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkaXN0cmlidXRpb247XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5sb2dBY3Rpb24oe1xuICAgICAgICBhY3Rpb246ICdGVU5EX0RJU1RSSUJVVElPTl9GQUlMRUQnLFxuICAgICAgICB1c2VySWQ6ICdhZG1pbicsXG4gICAgICAgIGRldGFpbHM6IGBGYWlsZWQgdG8gZGlzdHJpYnV0ZSBmdW5kOiAke2Vycm9yfWAsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb21wbGV0ZSBidXNpbmVzcyBkYXNoYm9hcmQgZGF0YVxuICAgKiBJbnRlZ3JhdGVzOiBCdXNpbmVzcywgUmV2ZW51ZSwgUGF5bWVudCwgRnVuZCwgRWxhcmEgQUlcbiAgICovXG4gIGFzeW5jIGdldEJ1c2luZXNzRGFzaGJvYXJkRGF0YShidXNpbmVzc0lkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW2J1c2luZXNzLCByZXZlbnVlLCBwYXltZW50cywgZnVuZCwgbWVudG9yc2hpcF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGJ1c2luZXNzU2VydmljZS5nZXRCdXNpbmVzc0J5SWQoYnVzaW5lc3NJZCksXG4gICAgICAgIHJldmVudWVTZXJ2aWNlLmdldFN0YXRpc3RpY3MoYnVzaW5lc3NJZCksXG4gICAgICAgIHBheW1lbnRTZXJ2aWNlLmdldFBheW1lbnRIaXN0b3J5KGJ1c2luZXNzSWQpLFxuICAgICAgICBmdW5kU2VydmljZS5nZXRGdW5kQmFsYW5jZSgpLFxuICAgICAgICBlbGFyYUFJU2VydmljZS5nZXRNZW50b3JzaGlwU2Vzc2lvbnMoYnVzaW5lc3NJZCksXG4gICAgICBdKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnVzaW5lc3MsXG4gICAgICAgIHJldmVudWUsXG4gICAgICAgIHBheW1lbnRzLFxuICAgICAgICBmdW5kLFxuICAgICAgICBtZW50b3JzaGlwLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKDUwMCwgYEZhaWxlZCB0byBnZXQgZGFzaGJvYXJkIGRhdGE6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZXJ2aWNlT3JjaGVzdHJhdG9yID0gbmV3IFNlcnZpY2VPcmNoZXN0cmF0b3IoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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