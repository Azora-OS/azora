{"version":3,"names":["cov_2c9zwpcfim","actualCoverage","express","s","require","app","use","json","stakes","pools","standard","apr","premium","post","req","res","f","userId","amount","pool","b","body","status","error","reward","staked","get","params","penalty","unstaked","PORT","listen","console","log"],"sources":["staking.js"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nconst express = require('express');\nconst app = express();\napp.use(express.json());\n\n/**\n * Advanced Staking Service for AZR.\n * Supports multiple staking pools, rewards, and unstaking with penalties.\n */\nlet stakes = {};\nlet pools = { standard: { apr: 0.1 }, premium: { apr: 0.2 } };\n\napp.post('/api/staking/stake', (req, res) => {\n  const { userId, amount, pool = 'standard' } = req.body;\n  if (!pools[pool]) return res.status(400).json({ error: 'Invalid pool' });\n  \n  stakes[userId] = stakes[userId] || {};\n  stakes[userId][pool] = (stakes[userId][pool] || 0) + amount;\n  \n  const reward = amount * pools[pool].apr;\n  res.json({ staked: stakes[userId][pool], reward, pool });\n});\n\napp.get('/api/staking/balance/:userId', (req, res) => {\n  const { userId } = req.params;\n  res.json({ staked: stakes[userId] || {} });\n});\n\napp.post('/api/staking/unstake', (req, res) => {\n  const { userId, pool, amount } = req.body;\n  if (!stakes[userId] || !stakes[userId][pool] || stakes[userId][pool] < amount) {\n    return res.status(400).json({ error: 'Insufficient stake' });\n  }\n  \n  stakes[userId][pool] -= amount;\n  const penalty = amount * 0.05; // 5% penalty\n  res.json({ unstaked: amount - penalty, penalty });\n});\n\nconst PORT = 4116;\napp.listen(PORT, () => console.log(`ðŸ”’ Advanced Staking Service running on port ${PORT}`));\n"],"mappings":"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","ignoreList":[]}