b5e5aac20da26014632e7eb068b57a60
/* istanbul ignore next */
function cov_tys43tlxb() {
  var path = "/workspaces/azora/services/azora-sapiens/src/sources/news.ts";
  var hash = "38167137dd83c9bfc83236eaf5c92c6e8edb0d77";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-sapiens/src/sources/news.ts",
    statementMap: {
      "0": {
        start: {
          line: 17,
          column: 20
        },
        end: {
          line: 17,
          column: 44
        }
      },
      "1": {
        start: {
          line: 20,
          column: 4
        },
        end: {
          line: 20,
          column: 25
        }
      },
      "2": {
        start: {
          line: 34,
          column: 72
        },
        end: {
          line: 34,
          column: 79
        }
      },
      "3": {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 51,
          column: 5
        }
      },
      "4": {
        start: {
          line: 37,
          column: 23
        },
        end: {
          line: 45,
          column: 8
        }
      },
      "5": {
        start: {
          line: 47,
          column: 6
        },
        end: {
          line: 47,
          column: 42
        }
      },
      "6": {
        start: {
          line: 49,
          column: 6
        },
        end: {
          line: 49,
          column: 51
        }
      },
      "7": {
        start: {
          line: 50,
          column: 6
        },
        end: {
          line: 50,
          column: 18
        }
      },
      "8": {
        start: {
          line: 64,
          column: 57
        },
        end: {
          line: 64,
          column: 64
        }
      },
      "9": {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 83,
          column: 5
        }
      },
      "10": {
        start: {
          line: 67,
          column: 46
        },
        end: {
          line: 71,
          column: 7
        }
      },
      "11": {
        start: {
          line: 73,
          column: 6
        },
        end: {
          line: 75,
          column: 7
        }
      },
      "12": {
        start: {
          line: 74,
          column: 8
        },
        end: {
          line: 74,
          column: 35
        }
      },
      "13": {
        start: {
          line: 77,
          column: 23
        },
        end: {
          line: 77,
          column: 83
        }
      },
      "14": {
        start: {
          line: 79,
          column: 6
        },
        end: {
          line: 79,
          column: 42
        }
      },
      "15": {
        start: {
          line: 81,
          column: 6
        },
        end: {
          line: 81,
          column: 60
        }
      },
      "16": {
        start: {
          line: 82,
          column: 6
        },
        end: {
          line: 82,
          column: 18
        }
      },
      "17": {
        start: {
          line: 93,
          column: 4
        },
        end: {
          line: 106,
          column: 6
        }
      },
      "18": {
        start: {
          line: 120,
          column: 21
        },
        end: {
          line: 120,
          column: 57
        }
      },
      "19": {
        start: {
          line: 121,
          column: 4
        },
        end: {
          line: 121,
          column: 77
        }
      },
      "20": {
        start: {
          line: 121,
          column: 37
        },
        end: {
          line: 121,
          column: 75
        }
      },
      "21": {
        start: {
          line: 134,
          column: 21
        },
        end: {
          line: 134,
          column: 58
        }
      },
      "22": {
        start: {
          line: 135,
          column: 4
        },
        end: {
          line: 135,
          column: 77
        }
      },
      "23": {
        start: {
          line: 135,
          column: 37
        },
        end: {
          line: 135,
          column: 75
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 19,
            column: 2
          },
          end: {
            line: 19,
            column: 3
          }
        },
        loc: {
          start: {
            line: 19,
            column: 30
          },
          end: {
            line: 21,
            column: 3
          }
        },
        line: 19
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 26,
            column: 2
          },
          end: {
            line: 26,
            column: 3
          }
        },
        loc: {
          start: {
            line: 33,
            column: 28
          },
          end: {
            line: 52,
            column: 3
          }
        },
        line: 33
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 57,
            column: 2
          },
          end: {
            line: 57,
            column: 3
          }
        },
        loc: {
          start: {
            line: 63,
            column: 28
          },
          end: {
            line: 84,
            column: 3
          }
        },
        line: 63
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 89,
            column: 2
          },
          end: {
            line: 89,
            column: 3
          }
        },
        loc: {
          start: {
            line: 92,
            column: 4
          },
          end: {
            line: 107,
            column: 3
          }
        },
        line: 92
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 112,
            column: 2
          },
          end: {
            line: 112,
            column: 3
          }
        },
        loc: {
          start: {
            line: 119,
            column: 86
          },
          end: {
            line: 122,
            column: 3
          }
        },
        line: 119
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 121,
            column: 24
          },
          end: {
            line: 121,
            column: 25
          }
        },
        loc: {
          start: {
            line: 121,
            column: 37
          },
          end: {
            line: 121,
            column: 75
          }
        },
        line: 121
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 127,
            column: 2
          },
          end: {
            line: 127,
            column: 3
          }
        },
        loc: {
          start: {
            line: 133,
            column: 86
          },
          end: {
            line: 136,
            column: 3
          }
        },
        line: 133
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 135,
            column: 24
          },
          end: {
            line: 135,
            column: 25
          }
        },
        loc: {
          start: {
            line: 135,
            column: 37
          },
          end: {
            line: 135,
            column: 75
          }
        },
        line: 135
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 32,
            column: 10
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 32,
            column: 8
          },
          end: {
            line: 32,
            column: 10
          }
        }],
        line: 28
      },
      "1": {
        loc: {
          start: {
            line: 34,
            column: 12
          },
          end: {
            line: 34,
            column: 27
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 34,
            column: 23
          },
          end: {
            line: 34,
            column: 27
          }
        }],
        line: 34
      },
      "2": {
        loc: {
          start: {
            line: 34,
            column: 29
          },
          end: {
            line: 34,
            column: 51
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 34,
            column: 38
          },
          end: {
            line: 34,
            column: 51
          }
        }],
        line: 34
      },
      "3": {
        loc: {
          start: {
            line: 34,
            column: 53
          },
          end: {
            line: 34,
            column: 67
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 34,
            column: 64
          },
          end: {
            line: 34,
            column: 67
          }
        }],
        line: 34
      },
      "4": {
        loc: {
          start: {
            line: 47,
            column: 13
          },
          end: {
            line: 47,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 47,
            column: 13
          },
          end: {
            line: 47,
            column: 35
          }
        }, {
          start: {
            line: 47,
            column: 39
          },
          end: {
            line: 47,
            column: 41
          }
        }],
        line: 47
      },
      "5": {
        loc: {
          start: {
            line: 58,
            column: 4
          },
          end: {
            line: 62,
            column: 10
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 62,
            column: 10
          }
        }],
        line: 58
      },
      "6": {
        loc: {
          start: {
            line: 64,
            column: 12
          },
          end: {
            line: 64,
            column: 26
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 64,
            column: 22
          },
          end: {
            line: 64,
            column: 26
          }
        }],
        line: 64
      },
      "7": {
        loc: {
          start: {
            line: 64,
            column: 38
          },
          end: {
            line: 64,
            column: 52
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 64,
            column: 49
          },
          end: {
            line: 64,
            column: 52
          }
        }],
        line: 64
      },
      "8": {
        loc: {
          start: {
            line: 73,
            column: 6
          },
          end: {
            line: 75,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 73,
            column: 6
          },
          end: {
            line: 75,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 73
      },
      "9": {
        loc: {
          start: {
            line: 79,
            column: 13
          },
          end: {
            line: 79,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 79,
            column: 13
          },
          end: {
            line: 79,
            column: 35
          }
        }, {
          start: {
            line: 79,
            column: 39
          },
          end: {
            line: 79,
            column: 41
          }
        }],
        line: 79
      },
      "10": {
        loc: {
          start: {
            line: 114,
            column: 4
          },
          end: {
            line: 118,
            column: 10
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 118,
            column: 8
          },
          end: {
            line: 118,
            column: 10
          }
        }],
        line: 114
      },
      "11": {
        loc: {
          start: {
            line: 128,
            column: 4
          },
          end: {
            line: 132,
            column: 10
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 132,
            column: 8
          },
          end: {
            line: 132,
            column: 10
          }
        }],
        line: 128
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0
    },
    b: {
      "0": [0],
      "1": [0],
      "2": [0],
      "3": [0],
      "4": [0, 0],
      "5": [0],
      "6": [0],
      "7": [0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0],
      "11": [0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "38167137dd83c9bfc83236eaf5c92c6e8edb0d77"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_tys43tlxb = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_tys43tlxb();
import axios from 'axios';
export class NewsDataSource {
  baseUrl =
  /* istanbul ignore next */
  (cov_tys43tlxb().s[0]++, 'https://newsapi.org/v2');
  constructor(apiKey) {
    /* istanbul ignore next */
    cov_tys43tlxb().f[0]++;
    cov_tys43tlxb().s[1]++;
    this.apiKey = apiKey;
  }

  /**
   * Fetch news articles from NewsAPI
   */
  async fetchNews(query, options =
  /* istanbul ignore next */
  (cov_tys43tlxb().b[0][0]++, {})) {
    /* istanbul ignore next */
    cov_tys43tlxb().f[1]++;
    const {
      language =
      /* istanbul ignore next */
      (cov_tys43tlxb().b[1][0]++, 'en'),
      sortBy =
      /* istanbul ignore next */
      (cov_tys43tlxb().b[2][0]++, 'publishedAt'),
      pageSize =
      /* istanbul ignore next */
      (cov_tys43tlxb().b[3][0]++, 100)
    } =
    /* istanbul ignore next */
    (cov_tys43tlxb().s[2]++, options);
    /* istanbul ignore next */
    cov_tys43tlxb().s[3]++;
    try {
      const response =
      /* istanbul ignore next */
      (cov_tys43tlxb().s[4]++, await axios.get(`${this.baseUrl}/everything`, {
        params: {
          q: query,
          language,
          sortBy,
          pageSize,
          apiKey: this.apiKey
        }
      }));
      /* istanbul ignore next */
      cov_tys43tlxb().s[5]++;
      return /* istanbul ignore next */(cov_tys43tlxb().b[4][0]++, response.data.articles) ||
      /* istanbul ignore next */
      (cov_tys43tlxb().b[4][1]++, []);
    } catch (error) {
      /* istanbul ignore next */
      cov_tys43tlxb().s[6]++;
      console.error('Error fetching news:', error);
      /* istanbul ignore next */
      cov_tys43tlxb().s[7]++;
      throw error;
    }
  }

  /**
   * Fetch top headlines
   */
  async fetchTopHeadlines(options =
  /* istanbul ignore next */
  (cov_tys43tlxb().b[5][0]++, {})) {
    /* istanbul ignore next */
    cov_tys43tlxb().f[2]++;
    const {
      country =
      /* istanbul ignore next */
      (cov_tys43tlxb().b[6][0]++, 'us'),
      category,
      pageSize =
      /* istanbul ignore next */
      (cov_tys43tlxb().b[7][0]++, 100)
    } =
    /* istanbul ignore next */
    (cov_tys43tlxb().s[8]++, options);
    /* istanbul ignore next */
    cov_tys43tlxb().s[9]++;
    try {
      const params =
      /* istanbul ignore next */
      (cov_tys43tlxb().s[10]++, {
        country,
        pageSize,
        apiKey: this.apiKey
      });
      /* istanbul ignore next */
      cov_tys43tlxb().s[11]++;
      if (category) {
        /* istanbul ignore next */
        cov_tys43tlxb().b[8][0]++;
        cov_tys43tlxb().s[12]++;
        params.category = category;
      } else
      /* istanbul ignore next */
      {
        cov_tys43tlxb().b[8][1]++;
      }
      const response =
      /* istanbul ignore next */
      (cov_tys43tlxb().s[13]++, await axios.get(`${this.baseUrl}/top-headlines`, {
        params
      }));
      /* istanbul ignore next */
      cov_tys43tlxb().s[14]++;
      return /* istanbul ignore next */(cov_tys43tlxb().b[9][0]++, response.data.articles) ||
      /* istanbul ignore next */
      (cov_tys43tlxb().b[9][1]++, []);
    } catch (error) {
      /* istanbul ignore next */
      cov_tys43tlxb().s[15]++;
      console.error('Error fetching top headlines:', error);
      /* istanbul ignore next */
      cov_tys43tlxb().s[16]++;
      throw error;
    }
  }

  /**
   * Convert news article to KnowledgeSource
   */
  convertToKnowledgeSource(article) {
    /* istanbul ignore next */
    cov_tys43tlxb().f[3]++;
    cov_tys43tlxb().s[17]++;
    return {
      type: 'news',
      source: article.source.name,
      url: article.url,
      title: article.title,
      content: `${article.title}\n\n${article.description}\n\n${article.content}`,
      metadata: {
        date: article.publishedAt,
        category: 'news',
        verified: true,
        relevance: 0.8,
        tags: ['news', 'current-events']
      }
    };
  }

  /**
   * Fetch and convert news articles
   */
  async fetchAndConvert(query, options =
  /* istanbul ignore next */
  (cov_tys43tlxb().b[10][0]++, {})) {
    /* istanbul ignore next */
    cov_tys43tlxb().f[4]++;
    const articles =
    /* istanbul ignore next */
    (cov_tys43tlxb().s[18]++, await this.fetchNews(query, options));
    /* istanbul ignore next */
    cov_tys43tlxb().s[19]++;
    return articles.map(article => {
      /* istanbul ignore next */
      cov_tys43tlxb().f[5]++;
      cov_tys43tlxb().s[20]++;
      return this.convertToKnowledgeSource(article);
    });
  }

  /**
   * Fetch and convert top headlines
   */
  async fetchAndConvertHeadlines(options =
  /* istanbul ignore next */
  (cov_tys43tlxb().b[11][0]++, {})) {
    /* istanbul ignore next */
    cov_tys43tlxb().f[6]++;
    const articles =
    /* istanbul ignore next */
    (cov_tys43tlxb().s[21]++, await this.fetchTopHeadlines(options));
    /* istanbul ignore next */
    cov_tys43tlxb().s[22]++;
    return articles.map(article => {
      /* istanbul ignore next */
      cov_tys43tlxb().f[7]++;
      cov_tys43tlxb().s[23]++;
      return this.convertToKnowledgeSource(article);
    });
  }
}
export default NewsDataSource;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfdHlzNDN0bHhiIiwiYWN0dWFsQ292ZXJhZ2UiLCJheGlvcyIsIk5ld3NEYXRhU291cmNlIiwiYmFzZVVybCIsInMiLCJjb25zdHJ1Y3RvciIsImFwaUtleSIsImYiLCJmZXRjaE5ld3MiLCJxdWVyeSIsIm9wdGlvbnMiLCJiIiwibGFuZ3VhZ2UiLCJzb3J0QnkiLCJwYWdlU2l6ZSIsInJlc3BvbnNlIiwiZ2V0IiwicGFyYW1zIiwicSIsImRhdGEiLCJhcnRpY2xlcyIsImVycm9yIiwiY29uc29sZSIsImZldGNoVG9wSGVhZGxpbmVzIiwiY291bnRyeSIsImNhdGVnb3J5IiwiY29udmVydFRvS25vd2xlZGdlU291cmNlIiwiYXJ0aWNsZSIsInR5cGUiLCJzb3VyY2UiLCJuYW1lIiwidXJsIiwidGl0bGUiLCJjb250ZW50IiwiZGVzY3JpcHRpb24iLCJtZXRhZGF0YSIsImRhdGUiLCJwdWJsaXNoZWRBdCIsInZlcmlmaWVkIiwicmVsZXZhbmNlIiwidGFncyIsImZldGNoQW5kQ29udmVydCIsIm1hcCIsImZldGNoQW5kQ29udmVydEhlYWRsaW5lcyJdLCJzb3VyY2VzIjpbIm5ld3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IEtub3dsZWRnZVNvdXJjZSB9IGZyb20gJy4uL2tub3dsZWRnZS1vY2Vhbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTmV3c0FydGljbGUge1xuICBzb3VyY2U6IHsgaWQ6IHN0cmluZyB8IG51bGw7IG5hbWU6IHN0cmluZyB9O1xuICBhdXRob3I6IHN0cmluZyB8IG51bGw7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICB1cmxUb0ltYWdlOiBzdHJpbmcgfCBudWxsO1xuICBwdWJsaXNoZWRBdDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBOZXdzRGF0YVNvdXJjZSB7XG4gIHByaXZhdGUgYXBpS2V5OiBzdHJpbmc7XG4gIHByaXZhdGUgYmFzZVVybCA9ICdodHRwczovL25ld3NhcGkub3JnL3YyJztcblxuICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZykge1xuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIG5ld3MgYXJ0aWNsZXMgZnJvbSBOZXdzQVBJXG4gICAqL1xuICBhc3luYyBmZXRjaE5ld3MoXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7XG4gICAgICBsYW5ndWFnZT86IHN0cmluZztcbiAgICAgIHNvcnRCeT86ICdyZWxldmFuY3knIHwgJ3BvcHVsYXJpdHknIHwgJ3B1Ymxpc2hlZEF0JztcbiAgICAgIHBhZ2VTaXplPzogbnVtYmVyO1xuICAgIH0gPSB7fVxuICApOiBQcm9taXNlPE5ld3NBcnRpY2xlW10+IHtcbiAgICBjb25zdCB7IGxhbmd1YWdlID0gJ2VuJywgc29ydEJ5ID0gJ3B1Ymxpc2hlZEF0JywgcGFnZVNpemUgPSAxMDAgfSA9IG9wdGlvbnM7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYCR7dGhpcy5iYXNlVXJsfS9ldmVyeXRoaW5nYCwge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBxOiBxdWVyeSxcbiAgICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgICBzb3J0QnksXG4gICAgICAgICAgcGFnZVNpemUsXG4gICAgICAgICAgYXBpS2V5OiB0aGlzLmFwaUtleSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5hcnRpY2xlcyB8fCBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbmV3czonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggdG9wIGhlYWRsaW5lc1xuICAgKi9cbiAgYXN5bmMgZmV0Y2hUb3BIZWFkbGluZXMoXG4gICAgb3B0aW9uczoge1xuICAgICAgY291bnRyeT86IHN0cmluZztcbiAgICAgIGNhdGVnb3J5Pzogc3RyaW5nO1xuICAgICAgcGFnZVNpemU/OiBudW1iZXI7XG4gICAgfSA9IHt9XG4gICk6IFByb21pc2U8TmV3c0FydGljbGVbXT4ge1xuICAgIGNvbnN0IHsgY291bnRyeSA9ICd1cycsIGNhdGVnb3J5LCBwYWdlU2l6ZSA9IDEwMCB9ID0gb3B0aW9ucztcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgICAgICBjb3VudHJ5LFxuICAgICAgICBwYWdlU2l6ZSxcbiAgICAgICAgYXBpS2V5OiB0aGlzLmFwaUtleSxcbiAgICAgIH07XG5cbiAgICAgIGlmIChjYXRlZ29yeSkge1xuICAgICAgICBwYXJhbXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYCR7dGhpcy5iYXNlVXJsfS90b3AtaGVhZGxpbmVzYCwgeyBwYXJhbXMgfSk7XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmFydGljbGVzIHx8IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB0b3AgaGVhZGxpbmVzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IG5ld3MgYXJ0aWNsZSB0byBLbm93bGVkZ2VTb3VyY2VcbiAgICovXG4gIGNvbnZlcnRUb0tub3dsZWRnZVNvdXJjZShhcnRpY2xlOiBOZXdzQXJ0aWNsZSk6IE9taXQ8XG4gICAgS25vd2xlZGdlU291cmNlLFxuICAgICdpZCcgfCAnZW1iZWRkaW5nJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCdcbiAgPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICduZXdzJyxcbiAgICAgIHNvdXJjZTogYXJ0aWNsZS5zb3VyY2UubmFtZSxcbiAgICAgIHVybDogYXJ0aWNsZS51cmwsXG4gICAgICB0aXRsZTogYXJ0aWNsZS50aXRsZSxcbiAgICAgIGNvbnRlbnQ6IGAke2FydGljbGUudGl0bGV9XFxuXFxuJHthcnRpY2xlLmRlc2NyaXB0aW9ufVxcblxcbiR7YXJ0aWNsZS5jb250ZW50fWAsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBkYXRlOiBhcnRpY2xlLnB1Ymxpc2hlZEF0LFxuICAgICAgICBjYXRlZ29yeTogJ25ld3MnLFxuICAgICAgICB2ZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgcmVsZXZhbmNlOiAwLjgsXG4gICAgICAgIHRhZ3M6IFsnbmV3cycsICdjdXJyZW50LWV2ZW50cyddLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFuZCBjb252ZXJ0IG5ld3MgYXJ0aWNsZXNcbiAgICovXG4gIGFzeW5jIGZldGNoQW5kQ29udmVydChcbiAgICBxdWVyeTogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGxhbmd1YWdlPzogc3RyaW5nO1xuICAgICAgc29ydEJ5PzogJ3JlbGV2YW5jeScgfCAncG9wdWxhcml0eScgfCAncHVibGlzaGVkQXQnO1xuICAgICAgcGFnZVNpemU/OiBudW1iZXI7XG4gICAgfSA9IHt9XG4gICk6IFByb21pc2U8T21pdDxLbm93bGVkZ2VTb3VyY2UsICdpZCcgfCAnZW1iZWRkaW5nJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+W10+IHtcbiAgICBjb25zdCBhcnRpY2xlcyA9IGF3YWl0IHRoaXMuZmV0Y2hOZXdzKHF1ZXJ5LCBvcHRpb25zKTtcbiAgICByZXR1cm4gYXJ0aWNsZXMubWFwKChhcnRpY2xlKSA9PiB0aGlzLmNvbnZlcnRUb0tub3dsZWRnZVNvdXJjZShhcnRpY2xlKSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYW5kIGNvbnZlcnQgdG9wIGhlYWRsaW5lc1xuICAgKi9cbiAgYXN5bmMgZmV0Y2hBbmRDb252ZXJ0SGVhZGxpbmVzKFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGNvdW50cnk/OiBzdHJpbmc7XG4gICAgICBjYXRlZ29yeT86IHN0cmluZztcbiAgICAgIHBhZ2VTaXplPzogbnVtYmVyO1xuICAgIH0gPSB7fVxuICApOiBQcm9taXNlPE9taXQ8S25vd2xlZGdlU291cmNlLCAnaWQnIHwgJ2VtYmVkZGluZycgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPltdPiB7XG4gICAgY29uc3QgYXJ0aWNsZXMgPSBhd2FpdCB0aGlzLmZldGNoVG9wSGVhZGxpbmVzKG9wdGlvbnMpO1xuICAgIHJldHVybiBhcnRpY2xlcy5tYXAoKGFydGljbGUpID0+IHRoaXMuY29udmVydFRvS25vd2xlZGdlU291cmNlKGFydGljbGUpKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZXdzRGF0YVNvdXJjZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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