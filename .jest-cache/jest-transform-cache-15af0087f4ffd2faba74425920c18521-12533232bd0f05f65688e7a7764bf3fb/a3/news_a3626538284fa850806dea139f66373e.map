{"version":3,"names":["cov_tys43tlxb","actualCoverage","axios","NewsDataSource","baseUrl","s","constructor","apiKey","f","fetchNews","query","options","b","language","sortBy","pageSize","response","get","params","q","data","articles","error","console","fetchTopHeadlines","country","category","convertToKnowledgeSource","article","type","source","name","url","title","content","description","metadata","date","publishedAt","verified","relevance","tags","fetchAndConvert","map","fetchAndConvertHeadlines"],"sources":["news.ts"],"sourcesContent":["import axios from 'axios';\nimport { KnowledgeSource } from '../knowledge-ocean';\n\nexport interface NewsArticle {\n  source: { id: string | null; name: string };\n  author: string | null;\n  title: string;\n  description: string;\n  url: string;\n  urlToImage: string | null;\n  publishedAt: string;\n  content: string;\n}\n\nexport class NewsDataSource {\n  private apiKey: string;\n  private baseUrl = 'https://newsapi.org/v2';\n\n  constructor(apiKey: string) {\n    this.apiKey = apiKey;\n  }\n\n  /**\n   * Fetch news articles from NewsAPI\n   */\n  async fetchNews(\n    query: string,\n    options: {\n      language?: string;\n      sortBy?: 'relevancy' | 'popularity' | 'publishedAt';\n      pageSize?: number;\n    } = {}\n  ): Promise<NewsArticle[]> {\n    const { language = 'en', sortBy = 'publishedAt', pageSize = 100 } = options;\n\n    try {\n      const response = await axios.get(`${this.baseUrl}/everything`, {\n        params: {\n          q: query,\n          language,\n          sortBy,\n          pageSize,\n          apiKey: this.apiKey,\n        },\n      });\n\n      return response.data.articles || [];\n    } catch (error) {\n      console.error('Error fetching news:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch top headlines\n   */\n  async fetchTopHeadlines(\n    options: {\n      country?: string;\n      category?: string;\n      pageSize?: number;\n    } = {}\n  ): Promise<NewsArticle[]> {\n    const { country = 'us', category, pageSize = 100 } = options;\n\n    try {\n      const params: Record<string, unknown> = {\n        country,\n        pageSize,\n        apiKey: this.apiKey,\n      };\n\n      if (category) {\n        params.category = category;\n      }\n\n      const response = await axios.get(`${this.baseUrl}/top-headlines`, { params });\n\n      return response.data.articles || [];\n    } catch (error) {\n      console.error('Error fetching top headlines:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Convert news article to KnowledgeSource\n   */\n  convertToKnowledgeSource(article: NewsArticle): Omit<\n    KnowledgeSource,\n    'id' | 'embedding' | 'createdAt' | 'updatedAt'\n  > {\n    return {\n      type: 'news',\n      source: article.source.name,\n      url: article.url,\n      title: article.title,\n      content: `${article.title}\\n\\n${article.description}\\n\\n${article.content}`,\n      metadata: {\n        date: article.publishedAt,\n        category: 'news',\n        verified: true,\n        relevance: 0.8,\n        tags: ['news', 'current-events'],\n      },\n    };\n  }\n\n  /**\n   * Fetch and convert news articles\n   */\n  async fetchAndConvert(\n    query: string,\n    options: {\n      language?: string;\n      sortBy?: 'relevancy' | 'popularity' | 'publishedAt';\n      pageSize?: number;\n    } = {}\n  ): Promise<Omit<KnowledgeSource, 'id' | 'embedding' | 'createdAt' | 'updatedAt'>[]> {\n    const articles = await this.fetchNews(query, options);\n    return articles.map((article) => this.convertToKnowledgeSource(article));\n  }\n\n  /**\n   * Fetch and convert top headlines\n   */\n  async fetchAndConvertHeadlines(\n    options: {\n      country?: string;\n      category?: string;\n      pageSize?: number;\n    } = {}\n  ): Promise<Omit<KnowledgeSource, 'id' | 'embedding' | 'createdAt' | 'updatedAt'>[]> {\n    const articles = await this.fetchTopHeadlines(options);\n    return articles.map((article) => this.convertToKnowledgeSource(article));\n  }\n}\n\nexport default NewsDataSource;\n"],"mappings":"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","ignoreList":[]}