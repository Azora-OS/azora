{"version":3,"names":["cov_1hahhlsgko","actualCoverage","express","MarketplaceService","router","s","Router","post","req","res","f","userId","item","price","body","b","undefined","status","json","error","listing","createListing","listed","id","err","details","get","listings","getListings","listingId","buyerId","transaction","purchaseListing","purchased","transactionId","errorMessage","message"],"sources":["marketplaceApi.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport express from 'express';\nimport { MarketplaceService } from './marketplaceService';\n\nconst router = express.Router();\n\nrouter.post('/list', async (req, res) => {\n  const { userId, item, price } = req.body;\n  if (!userId || !item || price === undefined) {return res.status(400).json({ error: 'Missing fields' });}\n  try {\n    const listing = await MarketplaceService.createListing(userId, item, price);\n    res.json({ listed: true, id: listing.id });\n  } catch (err) {\n    res.status(500).json({ error: 'Failed to list item', details: err });\n  }\n});\n\nrouter.get('/listings', async (req, res) => {\n  try {\n    const listings = await MarketplaceService.getListings();\n    res.json({ listings });\n  } catch (err) {\n    res.status(500).json({ error: 'Failed to get listings', details: err });\n  }\n});\n\nrouter.post('/purchase', async (req, res) => {\n  const { listingId, buyerId } = req.body;\n  if (!listingId || !buyerId) {return res.status(400).json({ error: 'Missing fields' });}\n  try {\n    const transaction = await MarketplaceService.purchaseListing(listingId, buyerId);\n    res.json({ purchased: true, transactionId: transaction.id });\n  } catch (err) {\n    const errorMessage = typeof err === 'object' && err !== null && 'message' in err ? (err as { message: string }).message : 'Failed to purchase listing';\n    res.status(500).json({ error: errorMessage, details: err });\n  }\n});\n\nexport default router;"],"mappings":"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","ignoreList":[]}