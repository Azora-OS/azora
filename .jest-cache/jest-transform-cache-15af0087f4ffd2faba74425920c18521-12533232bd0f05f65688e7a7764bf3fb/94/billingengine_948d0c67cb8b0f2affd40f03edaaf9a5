cd5f2cf3436f75498709bc86c8903e35
/* istanbul ignore next */
function cov_25yexfsfie() {
  var path = "/workspaces/azora/services/billing-service/src/billing-engine.ts";
  var hash = "2f539b06c9ce815ad917319576e9cda824c785af";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/billing-service/src/billing-engine.ts",
    statementMap: {
      "0": {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 25
        }
      },
      "1": {
        start: {
          line: 55,
          column: 4
        },
        end: {
          line: 55,
          column: 37
        }
      },
      "2": {
        start: {
          line: 56,
          column: 4
        },
        end: {
          line: 56,
          column: 83
        }
      },
      "3": {
        start: {
          line: 67,
          column: 4
        },
        end: {
          line: 109,
          column: 6
        }
      },
      "4": {
        start: {
          line: 72,
          column: 25
        },
        end: {
          line: 72,
          column: 90
        }
      },
      "5": {
        start: {
          line: 72,
          column: 53
        },
        end: {
          line: 72,
          column: 86
        }
      },
      "6": {
        start: {
          line: 73,
          column: 20
        },
        end: {
          line: 73,
          column: 50
        }
      },
      "7": {
        start: {
          line: 74,
          column: 22
        },
        end: {
          line: 74,
          column: 36
        }
      },
      "8": {
        start: {
          line: 77,
          column: 24
        },
        end: {
          line: 95,
          column: 10
        }
      },
      "9": {
        start: {
          line: 86,
          column: 43
        },
        end: {
          line: 91,
          column: 15
        }
      },
      "10": {
        start: {
          line: 97,
          column: 8
        },
        end: {
          line: 107,
          column: 10
        }
      },
      "11": {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 138,
          column: 6
        }
      },
      "12": {
        start: {
          line: 120,
          column: 24
        },
        end: {
          line: 123,
          column: 10
        }
      },
      "13": {
        start: {
          line: 125,
          column: 8
        },
        end: {
          line: 127,
          column: 9
        }
      },
      "14": {
        start: {
          line: 126,
          column: 10
        },
        end: {
          line: 126,
          column: 47
        }
      },
      "15": {
        start: {
          line: 130,
          column: 8
        },
        end: {
          line: 133,
          column: 11
        }
      },
      "16": {
        start: {
          line: 136,
          column: 8
        },
        end: {
          line: 136,
          column: 74
        }
      },
      "17": {
        start: {
          line: 148,
          column: 4
        },
        end: {
          line: 206,
          column: 6
        }
      },
      "18": {
        start: {
          line: 152,
          column: 24
        },
        end: {
          line: 155,
          column: 10
        }
      },
      "19": {
        start: {
          line: 157,
          column: 8
        },
        end: {
          line: 159,
          column: 9
        }
      },
      "20": {
        start: {
          line: 158,
          column: 10
        },
        end: {
          line: 158,
          column: 64
        }
      },
      "21": {
        start: {
          line: 161,
          column: 8
        },
        end: {
          line: 163,
          column: 9
        }
      },
      "22": {
        start: {
          line: 162,
          column: 10
        },
        end: {
          line: 162,
          column: 67
        }
      },
      "23": {
        start: {
          line: 165,
          column: 8
        },
        end: {
          line: 204,
          column: 9
        }
      },
      "24": {
        start: {
          line: 167,
          column: 32
        },
        end: {
          line: 176,
          column: 12
        }
      },
      "25": {
        start: {
          line: 178,
          column: 10
        },
        end: {
          line: 198,
          column: 11
        }
      },
      "26": {
        start: {
          line: 180,
          column: 12
        },
        end: {
          line: 187,
          column: 15
        }
      },
      "27": {
        start: {
          line: 189,
          column: 12
        },
        end: {
          line: 192,
          column: 14
        }
      },
      "28": {
        start: {
          line: 194,
          column: 12
        },
        end: {
          line: 197,
          column: 14
        }
      },
      "29": {
        start: {
          line: 200,
          column: 10
        },
        end: {
          line: 203,
          column: 12
        }
      },
      "30": {
        start: {
          line: 216,
          column: 4
        },
        end: {
          line: 244,
          column: 6
        }
      },
      "31": {
        start: {
          line: 220,
          column: 25
        },
        end: {
          line: 227,
          column: 10
        }
      },
      "32": {
        start: {
          line: 229,
          column: 29
        },
        end: {
          line: 229,
          column: 76
        }
      },
      "33": {
        start: {
          line: 229,
          column: 54
        },
        end: {
          line: 229,
          column: 75
        }
      },
      "34": {
        start: {
          line: 230,
          column: 29
        },
        end: {
          line: 230,
          column: 82
        }
      },
      "35": {
        start: {
          line: 230,
          column: 63
        },
        end: {
          line: 230,
          column: 78
        }
      },
      "36": {
        start: {
          line: 231,
          column: 34
        },
        end: {
          line: 233,
          column: 51
        }
      },
      "37": {
        start: {
          line: 232,
          column: 27
        },
        end: {
          line: 232,
          column: 78
        }
      },
      "38": {
        start: {
          line: 233,
          column: 32
        },
        end: {
          line: 233,
          column: 47
        }
      },
      "39": {
        start: {
          line: 235,
          column: 8
        },
        end: {
          line: 242,
          column: 10
        }
      },
      "40": {
        start: {
          line: 251,
          column: 20
        },
        end: {
          line: 254,
          column: 6
        }
      },
      "41": {
        start: {
          line: 256,
          column: 4
        },
        end: {
          line: 256,
          column: 32
        }
      },
      "42": {
        start: {
          line: 256,
          column: 19
        },
        end: {
          line: 256,
          column: 31
        }
      },
      "43": {
        start: {
          line: 258,
          column: 4
        },
        end: {
          line: 269,
          column: 6
        }
      },
      "44": {
        start: {
          line: 276,
          column: 21
        },
        end: {
          line: 280,
          column: 6
        }
      },
      "45": {
        start: {
          line: 282,
          column: 4
        },
        end: {
          line: 293,
          column: 8
        }
      },
      "46": {
        start: {
          line: 282,
          column: 38
        },
        end: {
          line: 293,
          column: 5
        }
      },
      "47": {
        start: {
          line: 300,
          column: 4
        },
        end: {
          line: 303,
          column: 7
        }
      },
      "48": {
        start: {
          line: 310,
          column: 4
        },
        end: {
          line: 347,
          column: 6
        }
      },
      "49": {
        start: {
          line: 314,
          column: 24
        },
        end: {
          line: 316,
          column: 10
        }
      },
      "50": {
        start: {
          line: 318,
          column: 8
        },
        end: {
          line: 320,
          column: 9
        }
      },
      "51": {
        start: {
          line: 319,
          column: 10
        },
        end: {
          line: 319,
          column: 64
        }
      },
      "52": {
        start: {
          line: 322,
          column: 8
        },
        end: {
          line: 324,
          column: 9
        }
      },
      "53": {
        start: {
          line: 323,
          column: 10
        },
        end: {
          line: 323,
          column: 66
        }
      },
      "54": {
        start: {
          line: 326,
          column: 8
        },
        end: {
          line: 345,
          column: 9
        }
      },
      "55": {
        start: {
          line: 328,
          column: 25
        },
        end: {
          line: 330,
          column: 12
        }
      },
      "56": {
        start: {
          line: 332,
          column: 10
        },
        end: {
          line: 342,
          column: 11
        }
      },
      "57": {
        start: {
          line: 334,
          column: 12
        },
        end: {
          line: 337,
          column: 15
        }
      },
      "58": {
        start: {
          line: 339,
          column: 12
        },
        end: {
          line: 339,
          column: 37
        }
      },
      "59": {
        start: {
          line: 341,
          column: 12
        },
        end: {
          line: 341,
          column: 80
        }
      },
      "60": {
        start: {
          line: 344,
          column: 10
        },
        end: {
          line: 344,
          column: 58
        }
      },
      "61": {
        start: {
          line: 354,
          column: 4
        },
        end: {
          line: 354,
          column: 36
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 53,
            column: 3
          }
        },
        loc: {
          start: {
            line: 53,
            column: 37
          },
          end: {
            line: 57,
            column: 3
          }
        },
        line: 53
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 62,
            column: 2
          },
          end: {
            line: 62,
            column: 3
          }
        },
        loc: {
          start: {
            line: 66,
            column: 22
          },
          end: {
            line: 110,
            column: 3
          }
        },
        line: 66
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 70,
            column: 6
          },
          end: {
            line: 70,
            column: 7
          }
        },
        loc: {
          start: {
            line: 70,
            column: 18
          },
          end: {
            line: 108,
            column: 7
          }
        },
        line: 70
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 72,
            column: 38
          },
          end: {
            line: 72,
            column: 39
          }
        },
        loc: {
          start: {
            line: 72,
            column: 53
          },
          end: {
            line: 72,
            column: 86
          }
        },
        line: 72
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 86,
            column: 32
          },
          end: {
            line: 86,
            column: 33
          }
        },
        loc: {
          start: {
            line: 86,
            column: 43
          },
          end: {
            line: 91,
            column: 15
          }
        },
        line: 86
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 115,
            column: 2
          },
          end: {
            line: 115,
            column: 3
          }
        },
        loc: {
          start: {
            line: 115,
            column: 54
          },
          end: {
            line: 139,
            column: 3
          }
        },
        line: 115
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 119,
            column: 6
          },
          end: {
            line: 119,
            column: 7
          }
        },
        loc: {
          start: {
            line: 119,
            column: 18
          },
          end: {
            line: 137,
            column: 7
          }
        },
        line: 119
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 144,
            column: 2
          },
          end: {
            line: 144,
            column: 3
          }
        },
        loc: {
          start: {
            line: 147,
            column: 75
          },
          end: {
            line: 207,
            column: 3
          }
        },
        line: 147
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 151,
            column: 6
          },
          end: {
            line: 151,
            column: 7
          }
        },
        loc: {
          start: {
            line: 151,
            column: 18
          },
          end: {
            line: 205,
            column: 7
          }
        },
        line: 151
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 212,
            column: 2
          },
          end: {
            line: 212,
            column: 3
          }
        },
        loc: {
          start: {
            line: 215,
            column: 28
          },
          end: {
            line: 245,
            column: 3
          }
        },
        line: 215
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 219,
            column: 6
          },
          end: {
            line: 219,
            column: 7
          }
        },
        loc: {
          start: {
            line: 219,
            column: 18
          },
          end: {
            line: 243,
            column: 7
          }
        },
        line: 219
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 229,
            column: 45
          },
          end: {
            line: 229,
            column: 46
          }
        },
        loc: {
          start: {
            line: 229,
            column: 54
          },
          end: {
            line: 229,
            column: 75
          }
        },
        line: 229
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 230,
            column: 49
          },
          end: {
            line: 230,
            column: 50
          }
        },
        loc: {
          start: {
            line: 230,
            column: 63
          },
          end: {
            line: 230,
            column: 78
          }
        },
        line: 230
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 232,
            column: 18
          },
          end: {
            line: 232,
            column: 19
          }
        },
        loc: {
          start: {
            line: 232,
            column: 27
          },
          end: {
            line: 232,
            column: 78
          }
        },
        line: 232
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 233,
            column: 18
          },
          end: {
            line: 233,
            column: 19
          }
        },
        loc: {
          start: {
            line: 233,
            column: 32
          },
          end: {
            line: 233,
            column: 47
          }
        },
        line: 233
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 250,
            column: 2
          },
          end: {
            line: 250,
            column: 3
          }
        },
        loc: {
          start: {
            line: 250,
            column: 63
          },
          end: {
            line: 270,
            column: 3
          }
        },
        line: 250
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 275,
            column: 2
          },
          end: {
            line: 275,
            column: 3
          }
        },
        loc: {
          start: {
            line: 275,
            column: 60
          },
          end: {
            line: 294,
            column: 3
          }
        },
        line: 275
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 282,
            column: 24
          },
          end: {
            line: 282,
            column: 25
          }
        },
        loc: {
          start: {
            line: 282,
            column: 38
          },
          end: {
            line: 293,
            column: 5
          }
        },
        line: 282
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 299,
            column: 2
          },
          end: {
            line: 299,
            column: 3
          }
        },
        loc: {
          start: {
            line: 299,
            column: 56
          },
          end: {
            line: 304,
            column: 3
          }
        },
        line: 299
      },
      "19": {
        name: "(anonymous_19)",
        decl: {
          start: {
            line: 309,
            column: 2
          },
          end: {
            line: 309,
            column: 3
          }
        },
        loc: {
          start: {
            line: 309,
            column: 88
          },
          end: {
            line: 348,
            column: 3
          }
        },
        line: 309
      },
      "20": {
        name: "(anonymous_20)",
        decl: {
          start: {
            line: 313,
            column: 6
          },
          end: {
            line: 313,
            column: 7
          }
        },
        loc: {
          start: {
            line: 313,
            column: 18
          },
          end: {
            line: 346,
            column: 7
          }
        },
        line: 313
      },
      "21": {
        name: "(anonymous_21)",
        decl: {
          start: {
            line: 353,
            column: 2
          },
          end: {
            line: 353,
            column: 3
          }
        },
        loc: {
          start: {
            line: 353,
            column: 21
          },
          end: {
            line: 355,
            column: 3
          }
        },
        line: 353
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 125,
            column: 8
          },
          end: {
            line: 127,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 125,
            column: 8
          },
          end: {
            line: 127,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 125
      },
      "1": {
        loc: {
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 159,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 157,
            column: 8
          },
          end: {
            line: 159,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 157
      },
      "2": {
        loc: {
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 163,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 163,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 161
      },
      "3": {
        loc: {
          start: {
            line: 178,
            column: 10
          },
          end: {
            line: 198,
            column: 11
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 178,
            column: 10
          },
          end: {
            line: 198,
            column: 11
          }
        }, {
          start: {
            line: 193,
            column: 17
          },
          end: {
            line: 198,
            column: 11
          }
        }],
        line: 178
      },
      "4": {
        loc: {
          start: {
            line: 232,
            column: 27
          },
          end: {
            line: 232,
            column: 78
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 232,
            column: 27
          },
          end: {
            line: 232,
            column: 48
          }
        }, {
          start: {
            line: 232,
            column: 52
          },
          end: {
            line: 232,
            column: 78
          }
        }],
        line: 232
      },
      "5": {
        loc: {
          start: {
            line: 241,
            column: 31
          },
          end: {
            line: 241,
            column: 87
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 241,
            column: 53
          },
          end: {
            line: 241,
            column: 83
          }
        }, {
          start: {
            line: 241,
            column: 86
          },
          end: {
            line: 241,
            column: 87
          }
        }],
        line: 241
      },
      "6": {
        loc: {
          start: {
            line: 256,
            column: 4
          },
          end: {
            line: 256,
            column: 32
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 256,
            column: 4
          },
          end: {
            line: 256,
            column: 32
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 256
      },
      "7": {
        loc: {
          start: {
            line: 268,
            column: 14
          },
          end: {
            line: 268,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 268,
            column: 14
          },
          end: {
            line: 268,
            column: 28
          }
        }, {
          start: {
            line: 268,
            column: 32
          },
          end: {
            line: 268,
            column: 41
          }
        }],
        line: 268
      },
      "8": {
        loc: {
          start: {
            line: 292,
            column: 14
          },
          end: {
            line: 292,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 292,
            column: 14
          },
          end: {
            line: 292,
            column: 28
          }
        }, {
          start: {
            line: 292,
            column: 32
          },
          end: {
            line: 292,
            column: 41
          }
        }],
        line: 292
      },
      "9": {
        loc: {
          start: {
            line: 318,
            column: 8
          },
          end: {
            line: 320,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 318,
            column: 8
          },
          end: {
            line: 320,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 318
      },
      "10": {
        loc: {
          start: {
            line: 322,
            column: 8
          },
          end: {
            line: 324,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 322,
            column: 8
          },
          end: {
            line: 324,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 322
      },
      "11": {
        loc: {
          start: {
            line: 332,
            column: 10
          },
          end: {
            line: 342,
            column: 11
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 332,
            column: 10
          },
          end: {
            line: 342,
            column: 11
          }
        }, {
          start: {
            line: 340,
            column: 17
          },
          end: {
            line: 342,
            column: 11
          }
        }],
        line: 332
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "2f539b06c9ce815ad917319576e9cda824c785af"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_25yexfsfie = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_25yexfsfie();
/**
 * Billing Engine
 * Handles invoice generation, payment processing, and billing reports
 */

import { PrismaClient } from '@prisma/client';
import Stripe from 'stripe';
import { BusinessLogicTracing } from '../../shared/observability/distributed-tracing';
/**
 * Billing Engine Implementation
 */
export class BillingEngine {
  constructor(config) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[0]++;
    cov_25yexfsfie().s[0]++;
    this.config = config;
    /* istanbul ignore next */
    cov_25yexfsfie().s[1]++;
    this.prisma = new PrismaClient();
    /* istanbul ignore next */
    cov_25yexfsfie().s[2]++;
    this.stripe = new Stripe(config.stripeSecretKey, {
      apiVersion: '2023-10-16'
    });
  }

  /**
   * Create invoice
   */
  async createInvoice(userId, items, dueDate) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[1]++;
    cov_25yexfsfie().s[3]++;
    return BusinessLogicTracing.traceOperation('billing.create_invoice', {
      userId,
      itemCount: items.length
    }, async () => {
      /* istanbul ignore next */
      cov_25yexfsfie().f[2]++;
      // Calculate totals
      const subtotal =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[4]++, items.reduce((sum, item) => {
        /* istanbul ignore next */
        cov_25yexfsfie().f[3]++;
        cov_25yexfsfie().s[5]++;
        return sum + item.amount * item.quantity;
      }, 0));
      const tax =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[6]++, subtotal * this.config.taxRate);
      const total =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[7]++, subtotal + tax);

      // Create invoice in database
      const invoice =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[8]++, await this.prisma.invoice.create({
        data: {
          userId,
          subtotal,
          tax,
          total,
          status: 'draft',
          dueDate,
          items: {
            create: items.map(item => {
              /* istanbul ignore next */
              cov_25yexfsfie().f[4]++;
              cov_25yexfsfie().s[9]++;
              return {
                description: item.description,
                amount: item.amount,
                quantity: item.quantity,
                unitPrice: item.unitPrice
              };
            })
          }
        },
        include: {
          items: true
        }
      }));
      /* istanbul ignore next */
      cov_25yexfsfie().s[10]++;
      return {
        id: invoice.id,
        userId: invoice.userId,
        items: invoice.items,
        subtotal: invoice.subtotal,
        tax: invoice.tax,
        total: invoice.total,
        status: invoice.status,
        dueDate: invoice.dueDate,
        createdAt: invoice.createdAt
      };
    });
  }

  /**
   * Send invoice
   */
  async sendInvoice(invoiceId) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[5]++;
    cov_25yexfsfie().s[11]++;
    return BusinessLogicTracing.traceOperation('billing.send_invoice', {
      invoiceId
    }, async () => {
      /* istanbul ignore next */
      cov_25yexfsfie().f[6]++;
      const invoice =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[12]++, await this.prisma.invoice.findUnique({
        where: {
          id: invoiceId
        },
        include: {
          user: true
        }
      }));
      /* istanbul ignore next */
      cov_25yexfsfie().s[13]++;
      if (!invoice) {
        /* istanbul ignore next */
        cov_25yexfsfie().b[0][0]++;
        cov_25yexfsfie().s[14]++;
        throw new Error('Invoice not found');
      } else
      /* istanbul ignore next */
      {
        cov_25yexfsfie().b[0][1]++;
      }

      // Update status
      cov_25yexfsfie().s[15]++;
      await this.prisma.invoice.update({
        where: {
          id: invoiceId
        },
        data: {
          status: 'sent'
        }
      });

      // Send email (implementation would use email service)
      /* istanbul ignore next */
      cov_25yexfsfie().s[16]++;
      console.log(`Invoice ${invoiceId} sent to ${invoice.user.email}`);
    });
  }

  /**
   * Process payment
   */
  async processPayment(invoiceId, paymentMethodId) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[7]++;
    cov_25yexfsfie().s[17]++;
    return BusinessLogicTracing.traceOperation('billing.process_payment', {
      invoiceId,
      paymentMethodId
    }, async () => {
      /* istanbul ignore next */
      cov_25yexfsfie().f[8]++;
      const invoice =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[18]++, await this.prisma.invoice.findUnique({
        where: {
          id: invoiceId
        },
        include: {
          user: true
        }
      }));
      /* istanbul ignore next */
      cov_25yexfsfie().s[19]++;
      if (!invoice) {
        /* istanbul ignore next */
        cov_25yexfsfie().b[1][0]++;
        cov_25yexfsfie().s[20]++;
        return {
          success: false,
          error: 'Invoice not found'
        };
      } else
      /* istanbul ignore next */
      {
        cov_25yexfsfie().b[1][1]++;
      }
      cov_25yexfsfie().s[21]++;
      if (invoice.status === 'paid') {
        /* istanbul ignore next */
        cov_25yexfsfie().b[2][0]++;
        cov_25yexfsfie().s[22]++;
        return {
          success: false,
          error: 'Invoice already paid'
        };
      } else
      /* istanbul ignore next */
      {
        cov_25yexfsfie().b[2][1]++;
      }
      cov_25yexfsfie().s[23]++;
      try {
        // Create payment intent with Stripe
        const paymentIntent =
        /* istanbul ignore next */
        (cov_25yexfsfie().s[24]++, await this.stripe.paymentIntents.create({
          amount: Math.round(invoice.total * 100),
          // Convert to cents
          currency: this.config.currency.toLowerCase(),
          payment_method: paymentMethodId,
          confirm: true,
          metadata: {
            invoiceId,
            userId: invoice.userId
          }
        }));
        /* istanbul ignore next */
        cov_25yexfsfie().s[25]++;
        if (paymentIntent.status === 'succeeded') {
          /* istanbul ignore next */
          cov_25yexfsfie().b[3][0]++;
          cov_25yexfsfie().s[26]++;
          // Update invoice status
          await this.prisma.invoice.update({
            where: {
              id: invoiceId
            },
            data: {
              status: 'paid',
              paidAt: new Date(),
              transactionId: paymentIntent.id
            }
          });
          /* istanbul ignore next */
          cov_25yexfsfie().s[27]++;
          return {
            success: true,
            transactionId: paymentIntent.id
          };
        } else {
          /* istanbul ignore next */
          cov_25yexfsfie().b[3][1]++;
          cov_25yexfsfie().s[28]++;
          return {
            success: false,
            error: `Payment failed: ${paymentIntent.status}`
          };
        }
      } catch (error) {
        /* istanbul ignore next */
        cov_25yexfsfie().s[29]++;
        return {
          success: false,
          error: error.message
        };
      }
    });
  }

  /**
   * Generate billing report
   */
  async generateBillingReport(startDate, endDate) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[9]++;
    cov_25yexfsfie().s[30]++;
    return BusinessLogicTracing.traceOperation('billing.generate_report', {
      startDate,
      endDate
    }, async () => {
      /* istanbul ignore next */
      cov_25yexfsfie().f[10]++;
      const invoices =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[31]++, await this.prisma.invoice.findMany({
        where: {
          createdAt: {
            gte: startDate,
            lte: endDate
          }
        }
      }));
      const paidInvoices =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[32]++, invoices.filter(inv => {
        /* istanbul ignore next */
        cov_25yexfsfie().f[11]++;
        cov_25yexfsfie().s[33]++;
        return inv.status === 'paid';
      }));
      const totalRevenue =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[34]++, paidInvoices.reduce((sum, inv) => {
        /* istanbul ignore next */
        cov_25yexfsfie().f[12]++;
        cov_25yexfsfie().s[35]++;
        return sum + inv.total;
      }, 0));
      const outstandingAmount =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[36]++, invoices.filter(inv => {
        /* istanbul ignore next */
        cov_25yexfsfie().f[13]++;
        cov_25yexfsfie().s[37]++;
        return /* istanbul ignore next */(cov_25yexfsfie().b[4][0]++, inv.status !== 'paid') &&
        /* istanbul ignore next */
        (cov_25yexfsfie().b[4][1]++, inv.status !== 'cancelled');
      }).reduce((sum, inv) => {
        /* istanbul ignore next */
        cov_25yexfsfie().f[14]++;
        cov_25yexfsfie().s[38]++;
        return sum + inv.total;
      }, 0));
      /* istanbul ignore next */
      cov_25yexfsfie().s[39]++;
      return {
        period: `${startDate.toISOString().split('T')[0]} to ${endDate.toISOString().split('T')[0]}`,
        totalRevenue,
        totalInvoices: invoices.length,
        paidInvoices: paidInvoices.length,
        outstandingAmount,
        averageInvoiceValue: invoices.length > 0 ?
        /* istanbul ignore next */
        (cov_25yexfsfie().b[5][0]++, totalRevenue / invoices.length) :
        /* istanbul ignore next */
        (cov_25yexfsfie().b[5][1]++, 0)
      };
    });
  }

  /**
   * Get invoice
   */
  async getInvoice(invoiceId) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[15]++;
    const invoice =
    /* istanbul ignore next */
    (cov_25yexfsfie().s[40]++, await this.prisma.invoice.findUnique({
      where: {
        id: invoiceId
      },
      include: {
        items: true
      }
    }));
    /* istanbul ignore next */
    cov_25yexfsfie().s[41]++;
    if (!invoice) {
      /* istanbul ignore next */
      cov_25yexfsfie().b[6][0]++;
      cov_25yexfsfie().s[42]++;
      return null;
    } else
    /* istanbul ignore next */
    {
      cov_25yexfsfie().b[6][1]++;
    }
    cov_25yexfsfie().s[43]++;
    return {
      id: invoice.id,
      userId: invoice.userId,
      items: invoice.items,
      subtotal: invoice.subtotal,
      tax: invoice.tax,
      total: invoice.total,
      status: invoice.status,
      dueDate: invoice.dueDate,
      createdAt: invoice.createdAt,
      paidAt:
      /* istanbul ignore next */
      (cov_25yexfsfie().b[7][0]++, invoice.paidAt) ||
      /* istanbul ignore next */
      (cov_25yexfsfie().b[7][1]++, undefined)
    };
  }

  /**
   * Get user invoices
   */
  async getUserInvoices(userId) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[16]++;
    const invoices =
    /* istanbul ignore next */
    (cov_25yexfsfie().s[44]++, await this.prisma.invoice.findMany({
      where: {
        userId
      },
      include: {
        items: true
      },
      orderBy: {
        createdAt: 'desc'
      }
    }));
    /* istanbul ignore next */
    cov_25yexfsfie().s[45]++;
    return invoices.map(invoice => {
      /* istanbul ignore next */
      cov_25yexfsfie().f[17]++;
      cov_25yexfsfie().s[46]++;
      return {
        id: invoice.id,
        userId: invoice.userId,
        items: invoice.items,
        subtotal: invoice.subtotal,
        tax: invoice.tax,
        total: invoice.total,
        status: invoice.status,
        dueDate: invoice.dueDate,
        createdAt: invoice.createdAt,
        paidAt:
        /* istanbul ignore next */
        (cov_25yexfsfie().b[8][0]++, invoice.paidAt) ||
        /* istanbul ignore next */
        (cov_25yexfsfie().b[8][1]++, undefined)
      };
    });
  }

  /**
   * Cancel invoice
   */
  async cancelInvoice(invoiceId) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[18]++;
    cov_25yexfsfie().s[47]++;
    await this.prisma.invoice.update({
      where: {
        id: invoiceId
      },
      data: {
        status: 'cancelled'
      }
    });
  }

  /**
   * Refund payment
   */
  async refundPayment(invoiceId) {
    /* istanbul ignore next */
    cov_25yexfsfie().f[19]++;
    cov_25yexfsfie().s[48]++;
    return BusinessLogicTracing.traceOperation('billing.refund_payment', {
      invoiceId
    }, async () => {
      /* istanbul ignore next */
      cov_25yexfsfie().f[20]++;
      const invoice =
      /* istanbul ignore next */
      (cov_25yexfsfie().s[49]++, await this.prisma.invoice.findUnique({
        where: {
          id: invoiceId
        }
      }));
      /* istanbul ignore next */
      cov_25yexfsfie().s[50]++;
      if (!invoice) {
        /* istanbul ignore next */
        cov_25yexfsfie().b[9][0]++;
        cov_25yexfsfie().s[51]++;
        return {
          success: false,
          error: 'Invoice not found'
        };
      } else
      /* istanbul ignore next */
      {
        cov_25yexfsfie().b[9][1]++;
      }
      cov_25yexfsfie().s[52]++;
      if (invoice.status !== 'paid') {
        /* istanbul ignore next */
        cov_25yexfsfie().b[10][0]++;
        cov_25yexfsfie().s[53]++;
        return {
          success: false,
          error: 'Invoice is not paid'
        };
      } else
      /* istanbul ignore next */
      {
        cov_25yexfsfie().b[10][1]++;
      }
      cov_25yexfsfie().s[54]++;
      try {
        // Refund with Stripe
        const refund =
        /* istanbul ignore next */
        (cov_25yexfsfie().s[55]++, await this.stripe.refunds.create({
          payment_intent: invoice.transactionId
        }));
        /* istanbul ignore next */
        cov_25yexfsfie().s[56]++;
        if (refund.status === 'succeeded') {
          /* istanbul ignore next */
          cov_25yexfsfie().b[11][0]++;
          cov_25yexfsfie().s[57]++;
          // Update invoice status
          await this.prisma.invoice.update({
            where: {
              id: invoiceId
            },
            data: {
              status: 'cancelled'
            }
          });
          /* istanbul ignore next */
          cov_25yexfsfie().s[58]++;
          return {
            success: true
          };
        } else {
          /* istanbul ignore next */
          cov_25yexfsfie().b[11][1]++;
          cov_25yexfsfie().s[59]++;
          return {
            success: false,
            error: `Refund failed: ${refund.status}`
          };
        }
      } catch (error) {
        /* istanbul ignore next */
        cov_25yexfsfie().s[60]++;
        return {
          success: false,
          error: error.message
        };
      }
    });
  }

  /**
   * Cleanup
   */
  async disconnect() {
    /* istanbul ignore next */
    cov_25yexfsfie().f[21]++;
    cov_25yexfsfie().s[61]++;
    await this.prisma.$disconnect();
  }
}
export default BillingEngine;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjV5ZXhmc2ZpZSIsImFjdHVhbENvdmVyYWdlIiwiUHJpc21hQ2xpZW50IiwiU3RyaXBlIiwiQnVzaW5lc3NMb2dpY1RyYWNpbmciLCJCaWxsaW5nRW5naW5lIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJmIiwicyIsInByaXNtYSIsInN0cmlwZSIsInN0cmlwZVNlY3JldEtleSIsImFwaVZlcnNpb24iLCJjcmVhdGVJbnZvaWNlIiwidXNlcklkIiwiaXRlbXMiLCJkdWVEYXRlIiwidHJhY2VPcGVyYXRpb24iLCJpdGVtQ291bnQiLCJsZW5ndGgiLCJzdWJ0b3RhbCIsInJlZHVjZSIsInN1bSIsIml0ZW0iLCJhbW91bnQiLCJxdWFudGl0eSIsInRheCIsInRheFJhdGUiLCJ0b3RhbCIsImludm9pY2UiLCJjcmVhdGUiLCJkYXRhIiwic3RhdHVzIiwibWFwIiwiZGVzY3JpcHRpb24iLCJ1bml0UHJpY2UiLCJpbmNsdWRlIiwiaWQiLCJjcmVhdGVkQXQiLCJzZW5kSW52b2ljZSIsImludm9pY2VJZCIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInVzZXIiLCJiIiwiRXJyb3IiLCJ1cGRhdGUiLCJjb25zb2xlIiwibG9nIiwiZW1haWwiLCJwcm9jZXNzUGF5bWVudCIsInBheW1lbnRNZXRob2RJZCIsInN1Y2Nlc3MiLCJlcnJvciIsInBheW1lbnRJbnRlbnQiLCJwYXltZW50SW50ZW50cyIsIk1hdGgiLCJyb3VuZCIsImN1cnJlbmN5IiwidG9Mb3dlckNhc2UiLCJwYXltZW50X21ldGhvZCIsImNvbmZpcm0iLCJtZXRhZGF0YSIsInBhaWRBdCIsIkRhdGUiLCJ0cmFuc2FjdGlvbklkIiwibWVzc2FnZSIsImdlbmVyYXRlQmlsbGluZ1JlcG9ydCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJpbnZvaWNlcyIsImZpbmRNYW55IiwiZ3RlIiwibHRlIiwicGFpZEludm9pY2VzIiwiZmlsdGVyIiwiaW52IiwidG90YWxSZXZlbnVlIiwib3V0c3RhbmRpbmdBbW91bnQiLCJwZXJpb2QiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwidG90YWxJbnZvaWNlcyIsImF2ZXJhZ2VJbnZvaWNlVmFsdWUiLCJnZXRJbnZvaWNlIiwidW5kZWZpbmVkIiwiZ2V0VXNlckludm9pY2VzIiwib3JkZXJCeSIsImNhbmNlbEludm9pY2UiLCJyZWZ1bmRQYXltZW50IiwicmVmdW5kIiwicmVmdW5kcyIsInBheW1lbnRfaW50ZW50IiwiZGlzY29ubmVjdCIsIiRkaXNjb25uZWN0Il0sInNvdXJjZXMiOlsiYmlsbGluZy1lbmdpbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCaWxsaW5nIEVuZ2luZVxuICogSGFuZGxlcyBpbnZvaWNlIGdlbmVyYXRpb24sIHBheW1lbnQgcHJvY2Vzc2luZywgYW5kIGJpbGxpbmcgcmVwb3J0c1xuICovXG5cbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCBTdHJpcGUgZnJvbSAnc3RyaXBlJztcbmltcG9ydCB7IEJ1c2luZXNzTG9naWNUcmFjaW5nIH0gZnJvbSAnLi4vLi4vc2hhcmVkL29ic2VydmFiaWxpdHkvZGlzdHJpYnV0ZWQtdHJhY2luZyc7XG5cbmludGVyZmFjZSBCaWxsaW5nQ29uZmlnIHtcbiAgc3RyaXBlU2VjcmV0S2V5OiBzdHJpbmc7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIHRheFJhdGU6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEludm9pY2VJdGVtIHtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYW1vdW50OiBudW1iZXI7XG4gIHF1YW50aXR5OiBudW1iZXI7XG4gIHVuaXRQcmljZTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgSW52b2ljZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBpdGVtczogSW52b2ljZUl0ZW1bXTtcbiAgc3VidG90YWw6IG51bWJlcjtcbiAgdGF4OiBudW1iZXI7XG4gIHRvdGFsOiBudW1iZXI7XG4gIHN0YXR1czogJ2RyYWZ0JyB8ICdzZW50JyB8ICdwYWlkJyB8ICdvdmVyZHVlJyB8ICdjYW5jZWxsZWQnO1xuICBkdWVEYXRlOiBEYXRlO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHBhaWRBdD86IERhdGU7XG59XG5cbmludGVyZmFjZSBCaWxsaW5nUmVwb3J0IHtcbiAgcGVyaW9kOiBzdHJpbmc7XG4gIHRvdGFsUmV2ZW51ZTogbnVtYmVyO1xuICB0b3RhbEludm9pY2VzOiBudW1iZXI7XG4gIHBhaWRJbnZvaWNlczogbnVtYmVyO1xuICBvdXRzdGFuZGluZ0Ftb3VudDogbnVtYmVyO1xuICBhdmVyYWdlSW52b2ljZVZhbHVlOiBudW1iZXI7XG59XG5cbi8qKlxuICogQmlsbGluZyBFbmdpbmUgSW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIEJpbGxpbmdFbmdpbmUge1xuICBwcml2YXRlIHByaXNtYTogUHJpc21hQ2xpZW50O1xuICBwcml2YXRlIHN0cmlwZTogU3RyaXBlO1xuICBwcml2YXRlIGNvbmZpZzogQmlsbGluZ0NvbmZpZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEJpbGxpbmdDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcbiAgICB0aGlzLnN0cmlwZSA9IG5ldyBTdHJpcGUoY29uZmlnLnN0cmlwZVNlY3JldEtleSwgeyBhcGlWZXJzaW9uOiAnMjAyMy0xMC0xNicgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGludm9pY2VcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUludm9pY2UoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgaXRlbXM6IEludm9pY2VJdGVtW10sXG4gICAgZHVlRGF0ZTogRGF0ZVxuICApOiBQcm9taXNlPEludm9pY2U+IHtcbiAgICByZXR1cm4gQnVzaW5lc3NMb2dpY1RyYWNpbmcudHJhY2VPcGVyYXRpb24oXG4gICAgICAnYmlsbGluZy5jcmVhdGVfaW52b2ljZScsXG4gICAgICB7IHVzZXJJZCwgaXRlbUNvdW50OiBpdGVtcy5sZW5ndGggfSxcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsc1xuICAgICAgICBjb25zdCBzdWJ0b3RhbCA9IGl0ZW1zLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyBpdGVtLmFtb3VudCAqIGl0ZW0ucXVhbnRpdHksIDApO1xuICAgICAgICBjb25zdCB0YXggPSBzdWJ0b3RhbCAqIHRoaXMuY29uZmlnLnRheFJhdGU7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gc3VidG90YWwgKyB0YXg7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGludm9pY2UgaW4gZGF0YWJhc2VcbiAgICAgICAgY29uc3QgaW52b2ljZSA9IGF3YWl0IHRoaXMucHJpc21hLmludm9pY2UuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBzdWJ0b3RhbCxcbiAgICAgICAgICAgIHRheCxcbiAgICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgICAgc3RhdHVzOiAnZHJhZnQnLFxuICAgICAgICAgICAgZHVlRGF0ZSxcbiAgICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogaXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGFtb3VudDogaXRlbS5hbW91bnQsXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXG4gICAgICAgICAgICAgICAgdW5pdFByaWNlOiBpdGVtLnVuaXRQcmljZSxcbiAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluY2x1ZGU6IHsgaXRlbXM6IHRydWUgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogaW52b2ljZS5pZCxcbiAgICAgICAgICB1c2VySWQ6IGludm9pY2UudXNlcklkLFxuICAgICAgICAgIGl0ZW1zOiBpbnZvaWNlLml0ZW1zIGFzIEludm9pY2VJdGVtW10sXG4gICAgICAgICAgc3VidG90YWw6IGludm9pY2Uuc3VidG90YWwsXG4gICAgICAgICAgdGF4OiBpbnZvaWNlLnRheCxcbiAgICAgICAgICB0b3RhbDogaW52b2ljZS50b3RhbCxcbiAgICAgICAgICBzdGF0dXM6IGludm9pY2Uuc3RhdHVzIGFzIGFueSxcbiAgICAgICAgICBkdWVEYXRlOiBpbnZvaWNlLmR1ZURhdGUsXG4gICAgICAgICAgY3JlYXRlZEF0OiBpbnZvaWNlLmNyZWF0ZWRBdCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgaW52b2ljZVxuICAgKi9cbiAgYXN5bmMgc2VuZEludm9pY2UoaW52b2ljZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gQnVzaW5lc3NMb2dpY1RyYWNpbmcudHJhY2VPcGVyYXRpb24oXG4gICAgICAnYmlsbGluZy5zZW5kX2ludm9pY2UnLFxuICAgICAgeyBpbnZvaWNlSWQgfSxcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW52b2ljZSA9IGF3YWl0IHRoaXMucHJpc21hLmludm9pY2UuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGludm9pY2VJZCB9LFxuICAgICAgICAgIGluY2x1ZGU6IHsgdXNlcjogdHJ1ZSB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWludm9pY2UpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludm9pY2Ugbm90IGZvdW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgc3RhdHVzXG4gICAgICAgIGF3YWl0IHRoaXMucHJpc21hLmludm9pY2UudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogaW52b2ljZUlkIH0sXG4gICAgICAgICAgZGF0YTogeyBzdGF0dXM6ICdzZW50JyB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTZW5kIGVtYWlsIChpbXBsZW1lbnRhdGlvbiB3b3VsZCB1c2UgZW1haWwgc2VydmljZSlcbiAgICAgICAgY29uc29sZS5sb2coYEludm9pY2UgJHtpbnZvaWNlSWR9IHNlbnQgdG8gJHtpbnZvaWNlLnVzZXIuZW1haWx9YCk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIHBheW1lbnRcbiAgICovXG4gIGFzeW5jIHByb2Nlc3NQYXltZW50KFxuICAgIGludm9pY2VJZDogc3RyaW5nLFxuICAgIHBheW1lbnRNZXRob2RJZDogc3RyaW5nXG4gICk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyB0cmFuc2FjdGlvbklkPzogc3RyaW5nOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgcmV0dXJuIEJ1c2luZXNzTG9naWNUcmFjaW5nLnRyYWNlT3BlcmF0aW9uKFxuICAgICAgJ2JpbGxpbmcucHJvY2Vzc19wYXltZW50JyxcbiAgICAgIHsgaW52b2ljZUlkLCBwYXltZW50TWV0aG9kSWQgfSxcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW52b2ljZSA9IGF3YWl0IHRoaXMucHJpc21hLmludm9pY2UuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGludm9pY2VJZCB9LFxuICAgICAgICAgIGluY2x1ZGU6IHsgdXNlcjogdHJ1ZSB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWludm9pY2UpIHtcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZvaWNlIG5vdCBmb3VuZCcgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnZvaWNlLnN0YXR1cyA9PT0gJ3BhaWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52b2ljZSBhbHJlYWR5IHBhaWQnIH07XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIENyZWF0ZSBwYXltZW50IGludGVudCB3aXRoIFN0cmlwZVxuICAgICAgICAgIGNvbnN0IHBheW1lbnRJbnRlbnQgPSBhd2FpdCB0aGlzLnN0cmlwZS5wYXltZW50SW50ZW50cy5jcmVhdGUoe1xuICAgICAgICAgICAgYW1vdW50OiBNYXRoLnJvdW5kKGludm9pY2UudG90YWwgKiAxMDApLCAvLyBDb252ZXJ0IHRvIGNlbnRzXG4gICAgICAgICAgICBjdXJyZW5jeTogdGhpcy5jb25maWcuY3VycmVuY3kudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHBheW1lbnRfbWV0aG9kOiBwYXltZW50TWV0aG9kSWQsXG4gICAgICAgICAgICBjb25maXJtOiB0cnVlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgaW52b2ljZUlkLFxuICAgICAgICAgICAgICB1c2VySWQ6IGludm9pY2UudXNlcklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChwYXltZW50SW50ZW50LnN0YXR1cyA9PT0gJ3N1Y2NlZWRlZCcpIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbnZvaWNlIHN0YXR1c1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcmlzbWEuaW52b2ljZS51cGRhdGUoe1xuICAgICAgICAgICAgICB3aGVyZTogeyBpZDogaW52b2ljZUlkIH0sXG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdwYWlkJyxcbiAgICAgICAgICAgICAgICBwYWlkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JZDogcGF5bWVudEludGVudC5pZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICB0cmFuc2FjdGlvbklkOiBwYXltZW50SW50ZW50LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIGVycm9yOiBgUGF5bWVudCBmYWlsZWQ6ICR7cGF5bWVudEludGVudC5zdGF0dXN9YCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgYmlsbGluZyByZXBvcnRcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlQmlsbGluZ1JlcG9ydChcbiAgICBzdGFydERhdGU6IERhdGUsXG4gICAgZW5kRGF0ZTogRGF0ZVxuICApOiBQcm9taXNlPEJpbGxpbmdSZXBvcnQ+IHtcbiAgICByZXR1cm4gQnVzaW5lc3NMb2dpY1RyYWNpbmcudHJhY2VPcGVyYXRpb24oXG4gICAgICAnYmlsbGluZy5nZW5lcmF0ZV9yZXBvcnQnLFxuICAgICAgeyBzdGFydERhdGUsIGVuZERhdGUgfSxcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW52b2ljZXMgPSBhd2FpdCB0aGlzLnByaXNtYS5pbnZvaWNlLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICAgIGd0ZTogc3RhcnREYXRlLFxuICAgICAgICAgICAgICBsdGU6IGVuZERhdGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHBhaWRJbnZvaWNlcyA9IGludm9pY2VzLmZpbHRlcigoaW52KSA9PiBpbnYuc3RhdHVzID09PSAncGFpZCcpO1xuICAgICAgICBjb25zdCB0b3RhbFJldmVudWUgPSBwYWlkSW52b2ljZXMucmVkdWNlKChzdW0sIGludikgPT4gc3VtICsgaW52LnRvdGFsLCAwKTtcbiAgICAgICAgY29uc3Qgb3V0c3RhbmRpbmdBbW91bnQgPSBpbnZvaWNlc1xuICAgICAgICAgIC5maWx0ZXIoKGludikgPT4gaW52LnN0YXR1cyAhPT0gJ3BhaWQnICYmIGludi5zdGF0dXMgIT09ICdjYW5jZWxsZWQnKVxuICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgaW52KSA9PiBzdW0gKyBpbnYudG90YWwsIDApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGVyaW9kOiBgJHtzdGFydERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfSB0byAke2VuZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfWAsXG4gICAgICAgICAgdG90YWxSZXZlbnVlLFxuICAgICAgICAgIHRvdGFsSW52b2ljZXM6IGludm9pY2VzLmxlbmd0aCxcbiAgICAgICAgICBwYWlkSW52b2ljZXM6IHBhaWRJbnZvaWNlcy5sZW5ndGgsXG4gICAgICAgICAgb3V0c3RhbmRpbmdBbW91bnQsXG4gICAgICAgICAgYXZlcmFnZUludm9pY2VWYWx1ZTogaW52b2ljZXMubGVuZ3RoID4gMCA/IHRvdGFsUmV2ZW51ZSAvIGludm9pY2VzLmxlbmd0aCA6IDAsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgaW52b2ljZVxuICAgKi9cbiAgYXN5bmMgZ2V0SW52b2ljZShpbnZvaWNlSWQ6IHN0cmluZyk6IFByb21pc2U8SW52b2ljZSB8IG51bGw+IHtcbiAgICBjb25zdCBpbnZvaWNlID0gYXdhaXQgdGhpcy5wcmlzbWEuaW52b2ljZS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBpbnZvaWNlSWQgfSxcbiAgICAgIGluY2x1ZGU6IHsgaXRlbXM6IHRydWUgfSxcbiAgICB9KTtcblxuICAgIGlmICghaW52b2ljZSkge3JldHVybiBudWxsO31cblxuICAgIHJldHVybiB7XG4gICAgICBpZDogaW52b2ljZS5pZCxcbiAgICAgIHVzZXJJZDogaW52b2ljZS51c2VySWQsXG4gICAgICBpdGVtczogaW52b2ljZS5pdGVtcyBhcyBJbnZvaWNlSXRlbVtdLFxuICAgICAgc3VidG90YWw6IGludm9pY2Uuc3VidG90YWwsXG4gICAgICB0YXg6IGludm9pY2UudGF4LFxuICAgICAgdG90YWw6IGludm9pY2UudG90YWwsXG4gICAgICBzdGF0dXM6IGludm9pY2Uuc3RhdHVzIGFzIGFueSxcbiAgICAgIGR1ZURhdGU6IGludm9pY2UuZHVlRGF0ZSxcbiAgICAgIGNyZWF0ZWRBdDogaW52b2ljZS5jcmVhdGVkQXQsXG4gICAgICBwYWlkQXQ6IGludm9pY2UucGFpZEF0IHx8IHVuZGVmaW5lZCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB1c2VyIGludm9pY2VzXG4gICAqL1xuICBhc3luYyBnZXRVc2VySW52b2ljZXModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEludm9pY2VbXT4ge1xuICAgIGNvbnN0IGludm9pY2VzID0gYXdhaXQgdGhpcy5wcmlzbWEuaW52b2ljZS5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICAgIGluY2x1ZGU6IHsgaXRlbXM6IHRydWUgfSxcbiAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBpbnZvaWNlcy5tYXAoKGludm9pY2UpID0+ICh7XG4gICAgICBpZDogaW52b2ljZS5pZCxcbiAgICAgIHVzZXJJZDogaW52b2ljZS51c2VySWQsXG4gICAgICBpdGVtczogaW52b2ljZS5pdGVtcyBhcyBJbnZvaWNlSXRlbVtdLFxuICAgICAgc3VidG90YWw6IGludm9pY2Uuc3VidG90YWwsXG4gICAgICB0YXg6IGludm9pY2UudGF4LFxuICAgICAgdG90YWw6IGludm9pY2UudG90YWwsXG4gICAgICBzdGF0dXM6IGludm9pY2Uuc3RhdHVzIGFzIGFueSxcbiAgICAgIGR1ZURhdGU6IGludm9pY2UuZHVlRGF0ZSxcbiAgICAgIGNyZWF0ZWRBdDogaW52b2ljZS5jcmVhdGVkQXQsXG4gICAgICBwYWlkQXQ6IGludm9pY2UucGFpZEF0IHx8IHVuZGVmaW5lZCxcbiAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VsIGludm9pY2VcbiAgICovXG4gIGFzeW5jIGNhbmNlbEludm9pY2UoaW52b2ljZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnByaXNtYS5pbnZvaWNlLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogaW52b2ljZUlkIH0sXG4gICAgICBkYXRhOiB7IHN0YXR1czogJ2NhbmNlbGxlZCcgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZ1bmQgcGF5bWVudFxuICAgKi9cbiAgYXN5bmMgcmVmdW5kUGF5bWVudChpbnZvaWNlSWQ6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgcmV0dXJuIEJ1c2luZXNzTG9naWNUcmFjaW5nLnRyYWNlT3BlcmF0aW9uKFxuICAgICAgJ2JpbGxpbmcucmVmdW5kX3BheW1lbnQnLFxuICAgICAgeyBpbnZvaWNlSWQgfSxcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW52b2ljZSA9IGF3YWl0IHRoaXMucHJpc21hLmludm9pY2UuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGludm9pY2VJZCB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWludm9pY2UpIHtcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZvaWNlIG5vdCBmb3VuZCcgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnZvaWNlLnN0YXR1cyAhPT0gJ3BhaWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52b2ljZSBpcyBub3QgcGFpZCcgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gUmVmdW5kIHdpdGggU3RyaXBlXG4gICAgICAgICAgY29uc3QgcmVmdW5kID0gYXdhaXQgdGhpcy5zdHJpcGUucmVmdW5kcy5jcmVhdGUoe1xuICAgICAgICAgICAgcGF5bWVudF9pbnRlbnQ6IGludm9pY2UudHJhbnNhY3Rpb25JZCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChyZWZ1bmQuc3RhdHVzID09PSAnc3VjY2VlZGVkJykge1xuICAgICAgICAgICAgLy8gVXBkYXRlIGludm9pY2Ugc3RhdHVzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnByaXNtYS5pbnZvaWNlLnVwZGF0ZSh7XG4gICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpbnZvaWNlSWQgfSxcbiAgICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6ICdjYW5jZWxsZWQnIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBSZWZ1bmQgZmFpbGVkOiAke3JlZnVuZC5zdGF0dXN9YCB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnVwXG4gICAqL1xuICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgIGF3YWl0IHRoaXMucHJpc21hLiRkaXNjb25uZWN0KCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmlsbGluZ0VuZ2luZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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