{"version":3,"names":["cov_63fo5f65l","actualCoverage","logger","DatabaseOptimization","queryMetrics","s","slowQueryThreshold","constructor","prisma","b","f","RECOMMENDED_INDEXES","table","columns","unique","getCreateIndexSQL","map","index","indexName","name","toLowerCase","join","trackQuery","query","duration","rowsAffected","metric","timestamp","Date","push","warn","substring","getOptimizationReport","slowQueries","filter","m","totalDuration","reduce","sum","averageQueryTime","length","slowestQueries","sort","a","slice","recommendations","generateRecommendations","totalQueries","selectQueries","q","includes","joinQueries","whereQueries","avgDuration","some","resetMetrics","getQueryStatistics","stats","averageDuration","minDuration","maxDuration","slowQueryCount","slowQueryPercentage","Math","min","max","paginateQuery","queryFn","page","pageSize","skip","take","data","hasMore","batchInsert","items","batchSize","insertFn","i","batch","debug","floor","eagerLoadRelations","relationFn","ids","item","id","relations","getDatabaseSize","result","$queryRaw","error","getTableStatistics","tableName","explainQuery","vacuumAndAnalyze","$executeRaw","info","getSlowQueryLog","limit","exportMetrics","report","toISOString","statistics","dbOptimization","initializeDatabaseOptimization","getDatabaseOptimization","Error"],"sources":["database-optimization.ts"],"sourcesContent":["/**\n * Database Optimization Utilities\n * Provides query optimization, indexing strategies, and performance monitoring\n */\n\nimport { PrismaClient } from '@prisma/client';\nimport { logger } from './logger';\n\nexport interface QueryMetrics {\n  query: string;\n  duration: number;\n  rowsAffected: number;\n  timestamp: Date;\n}\n\nexport interface IndexDefinition {\n  table: string;\n  columns: string[];\n  unique?: boolean;\n  name?: string;\n}\n\nexport interface OptimizationReport {\n  totalQueries: number;\n  slowQueries: number;\n  averageQueryTime: number;\n  slowestQueries: QueryMetrics[];\n  recommendations: string[];\n}\n\n/**\n * Database Optimization Service\n */\nexport class DatabaseOptimization {\n  private prisma: PrismaClient;\n  private queryMetrics: QueryMetrics[] = [];\n  private slowQueryThreshold: number = 100; // ms\n\n  constructor(prisma: PrismaClient, slowQueryThreshold: number = 100) {\n    this.prisma = prisma;\n    this.slowQueryThreshold = slowQueryThreshold;\n  }\n\n  /**\n   * Recommended indexes for Education Revenue Engine\n   */\n  static readonly RECOMMENDED_INDEXES: IndexDefinition[] = [\n    // User indexes\n    { table: 'User', columns: ['email'], unique: true },\n    { table: 'User', columns: ['createdAt'] },\n    { table: 'User', columns: ['tier'] },\n\n    // Course indexes\n    { table: 'Course', columns: ['instructorId'] },\n    { table: 'Course', columns: ['tier'] },\n    { table: 'Course', columns: ['category'] },\n    { table: 'Course', columns: ['createdAt'] },\n    { table: 'Course', columns: ['status'] },\n\n    // Enrollment indexes\n    { table: 'Enrollment', columns: ['studentId'] },\n    { table: 'Enrollment', columns: ['courseId'] },\n    { table: 'Enrollment', columns: ['status'] },\n    { table: 'Enrollment', columns: ['enrolledAt'] },\n    { table: 'Enrollment', columns: ['studentId', 'courseId'], unique: true },\n\n    // Progress indexes\n    { table: 'Progress', columns: ['enrollmentId'] },\n    { table: 'Progress', columns: ['moduleId'] },\n    { table: 'Progress', columns: ['updatedAt'] },\n\n    // Assessment indexes\n    { table: 'Assessment', columns: ['courseId'] },\n    { table: 'Assessment', columns: ['enrollmentId'] },\n    { table: 'Assessment', columns: ['submittedAt'] },\n\n    // Payment indexes\n    { table: 'Payment', columns: ['userId'] },\n    { table: 'Payment', columns: ['status'] },\n    { table: 'Payment', columns: ['createdAt'] },\n    { table: 'Payment', columns: ['courseId'] },\n\n    // Learning Outcome indexes\n    { table: 'LearningOutcome', columns: ['studentId'] },\n    { table: 'LearningOutcome', columns: ['courseId'] },\n    { table: 'LearningOutcome', columns: ['status'] },\n\n    // Certificate indexes\n    { table: 'Certificate', columns: ['studentId'] },\n    { table: 'Certificate', columns: ['courseId'] },\n    { table: 'Certificate', columns: ['issuedAt'] },\n\n    // Conversion Event indexes\n    { table: 'ConversionEvent', columns: ['studentId'] },\n    { table: 'ConversionEvent', columns: ['eventType'] },\n    { table: 'ConversionEvent', columns: ['createdAt'] },\n  ];\n\n  /**\n   * Get SQL for creating recommended indexes\n   */\n  static getCreateIndexSQL(): string[] {\n    return this.RECOMMENDED_INDEXES.map(index => {\n      const indexName = index.name || `idx_${index.table.toLowerCase()}_${index.columns.join('_')}`;\n      const unique = index.unique ? 'UNIQUE' : '';\n      const columns = index.columns.join(', ');\n      return `CREATE ${unique} INDEX ${indexName} ON \"${index.table}\" (${columns});`;\n    });\n  }\n\n  /**\n   * Track query performance\n   */\n  trackQuery(query: string, duration: number, rowsAffected: number = 0): void {\n    const metric: QueryMetrics = {\n      query,\n      duration,\n      rowsAffected,\n      timestamp: new Date()\n    };\n\n    this.queryMetrics.push(metric);\n\n    if (duration > this.slowQueryThreshold) {\n      logger.warn(`Slow query detected (${duration}ms): ${query.substring(0, 100)}`);\n    }\n  }\n\n  /**\n   * Get optimization report\n   */\n  getOptimizationReport(): OptimizationReport {\n    const slowQueries = this.queryMetrics.filter(m => m.duration > this.slowQueryThreshold);\n    const totalDuration = this.queryMetrics.reduce((sum, m) => sum + m.duration, 0);\n    const averageQueryTime = this.queryMetrics.length > 0 ? totalDuration / this.queryMetrics.length : 0;\n\n    const slowestQueries = [...this.queryMetrics]\n      .sort((a, b) => b.duration - a.duration)\n      .slice(0, 10);\n\n    const recommendations = this.generateRecommendations(slowestQueries);\n\n    return {\n      totalQueries: this.queryMetrics.length,\n      slowQueries: slowQueries.length,\n      averageQueryTime,\n      slowestQueries,\n      recommendations\n    };\n  }\n\n  /**\n   * Generate optimization recommendations\n   */\n  private generateRecommendations(slowestQueries: QueryMetrics[]): string[] {\n    const recommendations: string[] = [];\n\n    if (slowestQueries.length === 0) {\n      return ['No slow queries detected'];\n    }\n\n    // Analyze patterns\n    const selectQueries = slowestQueries.filter(q => q.query.includes('SELECT')).length;\n    const joinQueries = slowestQueries.filter(q => q.query.includes('JOIN')).length;\n    const whereQueries = slowestQueries.filter(q => q.query.includes('WHERE')).length;\n\n    if (selectQueries > slowestQueries.length * 0.7) {\n      recommendations.push('Consider adding indexes on frequently queried columns');\n    }\n\n    if (joinQueries > slowestQueries.length * 0.5) {\n      recommendations.push('Optimize JOIN operations - consider denormalization or caching');\n    }\n\n    if (whereQueries > slowestQueries.length * 0.8) {\n      recommendations.push('Add indexes on WHERE clause columns');\n    }\n\n    const avgDuration = slowestQueries.reduce((sum, q) => sum + q.duration, 0) / slowestQueries.length;\n    if (avgDuration > 500) {\n      recommendations.push('Consider implementing query result caching');\n    }\n\n    if (slowestQueries.some(q => q.rowsAffected > 10000)) {\n      recommendations.push('Implement pagination for large result sets');\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * Reset metrics\n   */\n  resetMetrics(): void {\n    this.queryMetrics = [];\n  }\n\n  /**\n   * Get query statistics\n   */\n  getQueryStatistics() {\n    const stats = {\n      totalQueries: this.queryMetrics.length,\n      totalDuration: this.queryMetrics.reduce((sum, m) => sum + m.duration, 0),\n      averageDuration: 0,\n      minDuration: 0,\n      maxDuration: 0,\n      slowQueryCount: 0,\n      slowQueryPercentage: 0\n    };\n\n    if (this.queryMetrics.length === 0) {\n      return stats;\n    }\n\n    stats.averageDuration = stats.totalDuration / this.queryMetrics.length;\n    stats.minDuration = Math.min(...this.queryMetrics.map(m => m.duration));\n    stats.maxDuration = Math.max(...this.queryMetrics.map(m => m.duration));\n    stats.slowQueryCount = this.queryMetrics.filter(m => m.duration > this.slowQueryThreshold).length;\n    stats.slowQueryPercentage = (stats.slowQueryCount / this.queryMetrics.length) * 100;\n\n    return stats;\n  }\n\n  /**\n   * Optimize Prisma queries with pagination\n   */\n  async paginateQuery<T>(\n    queryFn: (skip: number, take: number) => Promise<T[]>,\n    page: number = 1,\n    pageSize: number = 20\n  ): Promise<{ data: T[]; page: number; pageSize: number; hasMore: boolean }> {\n    const skip = (page - 1) * pageSize;\n    const take = pageSize + 1; // Fetch one extra to check if there are more\n\n    const data = await queryFn(skip, take);\n    const hasMore = data.length > pageSize;\n\n    return {\n      data: data.slice(0, pageSize),\n      page,\n      pageSize,\n      hasMore\n    };\n  }\n\n  /**\n   * Batch operations for better performance\n   */\n  async batchInsert<T>(\n    items: T[],\n    batchSize: number = 100,\n    insertFn: (batch: T[]) => Promise<void>\n  ): Promise<void> {\n    for (let i = 0; i < items.length; i += batchSize) {\n      const batch = items.slice(i, i + batchSize);\n      await insertFn(batch);\n      logger.debug(`Inserted batch ${Math.floor(i / batchSize) + 1}`);\n    }\n  }\n\n  /**\n   * Optimize N+1 query problem with eager loading\n   */\n  async eagerLoadRelations<T extends Record<string, any>>(\n    items: T[],\n    relationFn: (ids: string[]) => Promise<Record<string, any>>\n  ): Promise<T[]> {\n    if (items.length === 0) {\n      return items;\n    }\n\n    const ids = items.map(item => item.id);\n    const relations = await relationFn(ids);\n\n    return items.map(item => ({\n      ...item,\n      ...relations[item.id]\n    }));\n  }\n\n  /**\n   * Get database size information\n   */\n  async getDatabaseSize(): Promise<{ tableName: string; size: string }[]> {\n    try {\n      const result = await this.prisma.$queryRaw`\n        SELECT \n          schemaname,\n          tablename,\n          pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size\n        FROM pg_tables\n        WHERE schemaname NOT IN ('pg_catalog', 'information_schema')\n        ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC\n      `;\n      return result as any;\n    } catch (error) {\n      logger.error('Error getting database size:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Get table statistics\n   */\n  async getTableStatistics(tableName: string): Promise<any> {\n    try {\n      const result = await this.prisma.$queryRaw`\n        SELECT \n          schemaname,\n          tablename,\n          n_live_tup as live_rows,\n          n_dead_tup as dead_rows,\n          last_vacuum,\n          last_autovacuum\n        FROM pg_stat_user_tables\n        WHERE tablename = ${tableName}\n      `;\n      return result;\n    } catch (error) {\n      logger.error(`Error getting statistics for table ${tableName}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Analyze query execution plan\n   */\n  async explainQuery(query: string): Promise<any> {\n    try {\n      const result = await this.prisma.$queryRaw`EXPLAIN ANALYZE ${query}`;\n      return result;\n    } catch (error) {\n      logger.error('Error explaining query:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Vacuum and analyze tables\n   */\n  async vacuumAndAnalyze(tableName?: string): Promise<void> {\n    try {\n      if (tableName) {\n        await this.prisma.$executeRaw`VACUUM ANALYZE ${tableName}`;\n        logger.info(`Vacuumed and analyzed table: ${tableName}`);\n      } else {\n        await this.prisma.$executeRaw`VACUUM ANALYZE`;\n        logger.info('Vacuumed and analyzed all tables');\n      }\n    } catch (error) {\n      logger.error('Error during vacuum and analyze:', error);\n    }\n  }\n\n  /**\n   * Get slow query log\n   */\n  getSlowQueryLog(limit: number = 20): QueryMetrics[] {\n    return this.queryMetrics\n      .filter(m => m.duration > this.slowQueryThreshold)\n      .sort((a, b) => b.duration - a.duration)\n      .slice(0, limit);\n  }\n\n  /**\n   * Export metrics for monitoring\n   */\n  exportMetrics() {\n    const stats = this.getQueryStatistics();\n    const report = this.getOptimizationReport();\n\n    return {\n      timestamp: new Date().toISOString(),\n      statistics: stats,\n      report,\n      slowQueries: this.getSlowQueryLog(10)\n    };\n  }\n}\n\n// Singleton instance\nlet dbOptimization: DatabaseOptimization | null = null;\n\n/**\n * Initialize database optimization\n */\nexport function initializeDatabaseOptimization(\n  prisma: PrismaClient,\n  slowQueryThreshold: number = 100\n): DatabaseOptimization {\n  if (!dbOptimization) {\n    dbOptimization = new DatabaseOptimization(prisma, slowQueryThreshold);\n  }\n  return dbOptimization;\n}\n\n/**\n * Get database optimization instance\n */\nexport function getDatabaseOptimization(): DatabaseOptimization {\n  if (!dbOptimization) {\n    throw new Error('Database optimization not initialized');\n  }\n  return dbOptimization;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}