{"version":3,"names":["cov_jakbqm5z2","actualCoverage","generateUUID","AppError","mentorshipSessions","s","Map","recommendations","ElaraAIService","getMentorshipGuidance","businessId","userId","stepName","userPrompt","f","sessionId","now","Date","aiResponse","generateAIResponse","session","id","topic","prompt","response","createdAt","set","getMentorshipSession","get","b","getBusinessMentorshipSessions","page","pageSize","businessSessions","Array","from","values","filter","sort","a","getTime","total","length","totalPages","Math","ceil","start","end","sessions","slice","getRecommendations","r","priorityOrder","high","medium","low","priority","generateRecommendation","type","context","recommendationId","recommendation","createRecommendation","getRecommendationById","validateRecommendation","issues","suggestions","containsHarmfulContent","description","push","containsBias","containsPrivacyConcerns","valid","getMentorshipMetrics","topicsDiscussed","totalLength","forEach","lastSession","engagementScore","min","totalSessions","averageSessionLength","lastSessionDate","mockResponses","Ideation","Planning","Prototype","Legal","Launch","Tracking","market_research","title","actionItems","financial_planning","team_building","text","harmfulKeywords","some","keyword","toLowerCase","includes","biasKeywords","privacyKeywords","elaraAIService"],"sources":["elara-ai.service.ts"],"sourcesContent":["import { generateUUID } from '../utils/uuid.js';\nimport { AppError } from '../middleware/errorHandler.js';\n\n// Mock Elara AI orchestrator client\ninterface MentorshipSession {\n  id: string;\n  businessId: string;\n  userId: string;\n  topic: string;\n  prompt: string;\n  response: string;\n  createdAt: Date;\n}\n\ninterface AIRecommendation {\n  id: string;\n  businessId: string;\n  type: string;\n  title: string;\n  description: string;\n  actionItems: string[];\n  priority: 'high' | 'medium' | 'low';\n  createdAt: Date;\n}\n\n// Mock database\nconst mentorshipSessions: Map<string, MentorshipSession> = new Map();\nconst recommendations: Map<string, AIRecommendation> = new Map();\n\nexport class ElaraAIService {\n  /**\n   * Get mentorship guidance for a wizard step\n   * Requirements: 1.2, 1.3\n   */\n  async getMentorshipGuidance(\n    businessId: string,\n    userId: string,\n    stepName: string,\n    userPrompt: string\n  ): Promise<MentorshipSession> {\n    const sessionId = generateUUID();\n    const now = new Date();\n\n    // Mock AI response - in production, call Elara orchestrator\n    const aiResponse = await this.generateAIResponse(stepName, userPrompt);\n\n    const session: MentorshipSession = {\n      id: sessionId,\n      businessId,\n      userId,\n      topic: stepName,\n      prompt: userPrompt,\n      response: aiResponse,\n      createdAt: now,\n    };\n\n    mentorshipSessions.set(sessionId, session);\n\n    return session;\n  }\n\n  /**\n   * Get mentorship session by ID\n   * Requirements: 1.2, 1.3\n   */\n  async getMentorshipSession(sessionId: string): Promise<MentorshipSession> {\n    const session = mentorshipSessions.get(sessionId);\n\n    if (!session) {\n      throw new AppError(404, 'Mentorship session not found');\n    }\n\n    return session;\n  }\n\n  /**\n   * Get all mentorship sessions for a business\n   * Requirements: 1.2, 1.3\n   */\n  async getBusinessMentorshipSessions(\n    businessId: string,\n    page: number = 1,\n    pageSize: number = 10\n  ): Promise<{\n    sessions: MentorshipSession[];\n    total: number;\n    page: number;\n    pageSize: number;\n    totalPages: number;\n  }> {\n    const businessSessions = Array.from(mentorshipSessions.values())\n      .filter((s) => s.businessId === businessId)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n\n    const total = businessSessions.length;\n    const totalPages = Math.ceil(total / pageSize);\n    const start = (page - 1) * pageSize;\n    const end = start + pageSize;\n\n    return {\n      sessions: businessSessions.slice(start, end),\n      total,\n      page,\n      pageSize,\n      totalPages,\n    };\n  }\n\n  /**\n   * Get AI recommendations for a business\n   * Requirements: 1.2, 1.3\n   */\n  async getRecommendations(businessId: string): Promise<AIRecommendation[]> {\n    return Array.from(recommendations.values())\n      .filter((r) => r.businessId === businessId)\n      .sort((a, b) => {\n        const priorityOrder = { high: 0, medium: 1, low: 2 };\n        return priorityOrder[a.priority] - priorityOrder[b.priority];\n      });\n  }\n\n  /**\n   * Generate AI recommendation\n   * Requirements: 1.2, 1.3\n   */\n  async generateRecommendation(\n    businessId: string,\n    type: string,\n    context: Record<string, any>\n  ): Promise<AIRecommendation> {\n    const recommendationId = generateUUID();\n    const now = new Date();\n\n    // Mock recommendation generation - in production, call Elara orchestrator\n    const recommendation = await this.createRecommendation(\n      recommendationId,\n      businessId,\n      type,\n      context\n    );\n\n    recommendations.set(recommendationId, recommendation);\n\n    return recommendation;\n  }\n\n  /**\n   * Get recommendation by ID\n   * Requirements: 1.2, 1.3\n   */\n  async getRecommendationById(recommendationId: string): Promise<AIRecommendation> {\n    const recommendation = recommendations.get(recommendationId);\n\n    if (!recommendation) {\n      throw new AppError(404, 'Recommendation not found');\n    }\n\n    return recommendation;\n  }\n\n  /**\n   * Validate AI recommendation with Constitutional AI\n   * Requirements: 1.2, 1.3, 7.5\n   */\n  async validateRecommendation(recommendation: AIRecommendation): Promise<{\n    valid: boolean;\n    issues: string[];\n    suggestions: string[];\n  }> {\n    const issues: string[] = [];\n    const suggestions: string[] = [];\n\n    // Mock Constitutional AI validation\n    // In production, integrate with Constitutional AI service\n\n    // Check for harmful content\n    if (this.containsHarmfulContent(recommendation.description)) {\n      issues.push('Recommendation contains potentially harmful content');\n    }\n\n    // Check for bias\n    if (this.containsBias(recommendation.description)) {\n      suggestions.push('Consider reviewing for potential bias');\n    }\n\n    // Check for privacy concerns\n    if (this.containsPrivacyConcerns(recommendation.description)) {\n      issues.push('Recommendation may have privacy implications');\n    }\n\n    return {\n      valid: issues.length === 0,\n      issues,\n      suggestions,\n    };\n  }\n\n  /**\n   * Get mentorship engagement metrics\n   * Requirements: 1.2, 1.3\n   */\n  async getMentorshipMetrics(businessId: string): Promise<{\n    totalSessions: number;\n    averageSessionLength: number;\n    topicsDiscussed: Record<string, number>;\n    lastSessionDate: Date | null;\n    engagementScore: number;\n  }> {\n    const sessions = Array.from(mentorshipSessions.values()).filter(\n      (s) => s.businessId === businessId\n    );\n\n    const topicsDiscussed: Record<string, number> = {};\n    let totalLength = 0;\n\n    sessions.forEach((s) => {\n      topicsDiscussed[s.topic] = (topicsDiscussed[s.topic] || 0) + 1;\n      totalLength += s.response.length;\n    });\n\n    const lastSession = sessions.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())[0];\n\n    // Calculate engagement score (0-100)\n    const engagementScore = Math.min(100, sessions.length * 10);\n\n    return {\n      totalSessions: sessions.length,\n      averageSessionLength: sessions.length > 0 ? totalLength / sessions.length : 0,\n      topicsDiscussed,\n      lastSessionDate: lastSession?.createdAt || null,\n      engagementScore,\n    };\n  }\n\n  /**\n   * Generate AI response (mock implementation)\n   * Requirements: 1.2, 1.3\n   */\n  private async generateAIResponse(stepName: string, userPrompt: string): Promise<string> {\n    // Mock responses based on step\n    const mockResponses: Record<string, string> = {\n      Ideation: `Based on your input about \"${userPrompt}\", here are some key considerations for your business idea:\n        1. Market validation - Ensure there's real demand for your solution\n        2. Competitive analysis - Understand your competitive landscape\n        3. Value proposition - Clearly articulate what makes your solution unique\n        4. Target customer - Define your ideal customer profile\n        5. Revenue model - Plan how you'll generate revenue`,\n\n      Planning: `For your business plan, consider these elements:\n        1. Executive summary - Brief overview of your business\n        2. Market analysis - Size, growth, and trends\n        3. Financial projections - Revenue, expenses, profitability\n        4. Marketing strategy - How you'll acquire customers\n        5. Operations plan - How you'll deliver your product/service\n        6. Team - Key roles and responsibilities`,\n\n      Prototype: `To build and test your MVP effectively:\n        1. Define core features - Focus on essential functionality\n        2. Build quickly - Use no-code or low-code tools if possible\n        3. Get user feedback - Test with real users early\n        4. Iterate based on feedback - Continuously improve\n        5. Measure key metrics - Track what matters most`,\n\n      Legal: `Important legal considerations:\n        1. Business structure - Choose appropriate legal entity\n        2. Contracts - Have clear terms with customers/partners\n        3. Compliance - Understand regulatory requirements\n        4. Insurance - Protect your business with appropriate coverage\n        5. IP protection - Protect your intellectual property`,\n\n      Launch: `For a successful launch:\n        1. Pre-launch buzz - Build anticipation\n        2. Marketing campaign - Execute your marketing plan\n        3. Customer support - Be ready to help customers\n        4. Monitor metrics - Track key performance indicators\n        5. Iterate quickly - Be ready to adjust based on feedback`,\n\n      Tracking: `Set up effective tracking:\n        1. Define KPIs - What metrics matter most?\n        2. Analytics setup - Implement tracking tools\n        3. Regular reporting - Monitor progress regularly\n        4. Dashboards - Visualize key metrics\n        5. Adjust strategy - Use data to inform decisions`,\n    };\n\n    return (\n      mockResponses[stepName] ||\n      `I can help you with \"${userPrompt}\". Please provide more context about your business for more specific guidance.`\n    );\n  }\n\n  /**\n   * Create recommendation (mock implementation)\n   * Requirements: 1.2, 1.3\n   */\n  private async createRecommendation(\n    id: string,\n    businessId: string,\n    type: string,\n    context: Record<string, any>\n  ): Promise<AIRecommendation> {\n    const recommendations: Record<string, AIRecommendation> = {\n      market_research: {\n        id,\n        businessId,\n        type,\n        title: 'Conduct Market Research',\n        description: 'Validate your market opportunity through customer interviews and surveys',\n        actionItems: [\n          'Interview 20+ potential customers',\n          'Analyze competitor offerings',\n          'Estimate market size',\n          'Identify key market trends',\n        ],\n        priority: 'high',\n        createdAt: new Date(),\n      },\n      financial_planning: {\n        id,\n        businessId,\n        type,\n        title: 'Create Financial Projections',\n        description: 'Develop realistic financial forecasts for your business',\n        actionItems: [\n          'Project revenue for 3 years',\n          'Estimate operating expenses',\n          'Calculate break-even point',\n          'Plan for cash flow management',\n        ],\n        priority: 'high',\n        createdAt: new Date(),\n      },\n      team_building: {\n        id,\n        businessId,\n        type,\n        title: 'Build Your Team',\n        description: 'Identify key roles and recruit talented team members',\n        actionItems: [\n          'Define key roles needed',\n          'Create job descriptions',\n          'Recruit team members',\n          'Establish company culture',\n        ],\n        priority: 'medium',\n        createdAt: new Date(),\n      },\n    };\n\n    return (\n      recommendations[type] || {\n        id,\n        businessId,\n        type,\n        title: 'General Recommendation',\n        description: 'Continue building your business',\n        actionItems: ['Focus on execution', 'Gather customer feedback', 'Iterate quickly'],\n        priority: 'medium',\n        createdAt: new Date(),\n      }\n    );\n  }\n\n  /**\n   * Check for harmful content\n   * Requirements: 7.5\n   */\n  private containsHarmfulContent(text: string): boolean {\n    // Mock implementation - in production, use Constitutional AI\n    const harmfulKeywords = ['illegal', 'dangerous', 'harmful', 'unethical'];\n    return harmfulKeywords.some((keyword) => text.toLowerCase().includes(keyword));\n  }\n\n  /**\n   * Check for bias\n   * Requirements: 7.5\n   */\n  private containsBias(text: string): boolean {\n    // Mock implementation - in production, use Constitutional AI\n    const biasKeywords = ['always', 'never', 'everyone', 'nobody'];\n    return biasKeywords.some((keyword) => text.toLowerCase().includes(keyword));\n  }\n\n  /**\n   * Check for privacy concerns\n   * Requirements: 7.5\n   */\n  private containsPrivacyConcerns(text: string): boolean {\n    // Mock implementation - in production, use Constitutional AI\n    const privacyKeywords = ['personal data', 'private information', 'confidential'];\n    return privacyKeywords.some((keyword) => text.toLowerCase().includes(keyword));\n  }\n}\n\nexport const elaraAIService = new ElaraAIService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}