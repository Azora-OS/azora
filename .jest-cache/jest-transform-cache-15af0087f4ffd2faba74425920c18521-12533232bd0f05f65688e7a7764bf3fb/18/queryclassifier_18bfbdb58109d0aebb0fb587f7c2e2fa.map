{"version":3,"names":["cov_2k971a95e","actualCoverage","QueryComplexity","RoutingTier","QueryClassifier","classificationStats","s","Map","constructor","thresholds","f","simpleThreshold","moderateThreshold","complexThreshold","minConfidence","set","SIMPLE","MODERATE","COMPLEX","classify","query","score","calculateComplexityScore","complexity","determineComplexity","confidence","calculateConfidence","current","b","get","id","Date","now","classifiedAs","routedTo","mapComplexityToTier","reasoning","generateReasoning","metadata","queryLength","length","wordCount","split","userId","complexityPatterns","pattern","weight","matches","match","simplePatterns","complexPatterns","test","Math","min","LOCAL_LLM","RAP_SYSTEM","EXTERNAL_LLM","reasons","push","toFixed","join","getClassificationMetrics","resetStats","clear"],"sources":["query-classifier.ts"],"sourcesContent":["/**\n * Query Classifier Service\n * Classifies incoming queries by complexity and determines optimal routing\n */\n\nimport { AIQuery, QueryClassificationResult, QueryComplexity, IQueryClassifier, ClassificationThresholds, RoutingTier } from './types';\n\nexport class QueryClassifier implements IQueryClassifier {\n  private thresholds: ClassificationThresholds;\n  private classificationStats: Map<QueryComplexity, number> = new Map();\n\n  constructor(thresholds?: Partial<ClassificationThresholds>) {\n    this.thresholds = {\n      simpleThreshold: 50,      // queries with score < 50 are SIMPLE\n      moderateThreshold: 120,   // queries with score < 120 are MODERATE\n      complexThreshold: 120,    // queries with score >= 120 are COMPLEX\n      minConfidence: 0.6,       // minimum 60% confidence\n      ...thresholds\n    };\n\n    // Initialize stats\n    this.classificationStats.set(QueryComplexity.SIMPLE, 0);\n    this.classificationStats.set(QueryComplexity.MODERATE, 0);\n    this.classificationStats.set(QueryComplexity.COMPLEX, 0);\n  }\n\n  /**\n   * Classify a query by complexity\n   */\n  async classify(query: AIQuery): Promise<QueryClassificationResult> {\n    const score = this.calculateComplexityScore(query.query);\n    const complexity = this.determineComplexity(score);\n    const confidence = this.calculateConfidence(query.query, complexity);\n\n    // Update stats\n    const current = this.classificationStats.get(complexity) || 0;\n    this.classificationStats.set(complexity, current + 1);\n\n    return {\n      id: `classification-${Date.now()}`,\n      query: query.query,\n      classifiedAs: complexity,\n      confidence,\n      routedTo: this.mapComplexityToTier(complexity),\n      reasoning: this.generateReasoning(query.query, complexity, score),\n      metadata: {\n        score,\n        queryLength: query.query.length,\n        wordCount: query.query.split(/\\s+/).length,\n        userId: query.userId\n      }\n    };\n  }\n\n  /**\n   * Calculate complexity score based on query characteristics\n   */\n  private calculateComplexityScore(query: string): number {\n    let score = 0;\n\n    // Length factor (longer queries tend to be more complex)\n    score += query.length / 10;\n\n    // Word count factor\n    const wordCount = query.split(/\\s+/).length;\n    score += wordCount * 2;\n\n    // Complexity indicators\n    const complexityPatterns = [\n      { pattern: /\\b(analyze|compare|evaluate|synthesize|explain|why|how)\\b/i, weight: 15 },\n      { pattern: /\\b(multiple|several|various|different)\\b/i, weight: 10 },\n      { pattern: /\\b(strategic|complex|advanced|sophisticated)\\b/i, weight: 20 },\n      { pattern: /\\b(and|or|but|however|therefore)\\b/i, weight: 5 },\n      { pattern: /\\?/g, weight: 5 }, // Question marks\n      { pattern: /[,;:]/g, weight: 3 } // Punctuation\n    ];\n\n    for (const { pattern, weight } of complexityPatterns) {\n      const matches = query.match(pattern);\n      if (matches) {\n        score += matches.length * weight;\n      }\n    }\n\n    return score;\n  }\n\n  /**\n   * Determine complexity level based on score\n   */\n  private determineComplexity(score: number): QueryComplexity {\n    if (score < this.thresholds.simpleThreshold) {\n      return QueryComplexity.SIMPLE;\n    } else if (score < this.thresholds.moderateThreshold) {\n      return QueryComplexity.MODERATE;\n    } else {\n      return QueryComplexity.COMPLEX;\n    }\n  }\n\n  /**\n   * Calculate confidence score for classification\n   */\n  private calculateConfidence(query: string, complexity: QueryComplexity): number {\n    let confidence = 0.7; // Base confidence\n\n    // Increase confidence for clear patterns\n    const simplePatterns = /^(hello|hi|hey|what|who|when|where|which)\\b/i;\n    const complexPatterns = /\\b(analyze|compare|evaluate|synthesize|strategic)\\b/i;\n\n    if (complexity === QueryComplexity.SIMPLE && simplePatterns.test(query)) {\n      confidence += 0.2;\n    } else if (complexity === QueryComplexity.COMPLEX && complexPatterns.test(query)) {\n      confidence += 0.2;\n    }\n\n    // Normalize to 0-1 range\n    return Math.min(confidence, 1.0);\n  }\n\n  /**\n   * Map complexity to routing tier\n   */\n  private mapComplexityToTier(complexity: QueryComplexity): RoutingTier {\n    switch (complexity) {\n      case QueryComplexity.SIMPLE:\n        return RoutingTier.LOCAL_LLM;\n      case QueryComplexity.MODERATE:\n        return RoutingTier.RAP_SYSTEM;\n      case QueryComplexity.COMPLEX:\n        return RoutingTier.EXTERNAL_LLM;\n    }\n  }\n\n  /**\n   * Generate reasoning for classification\n   */\n  private generateReasoning(query: string, complexity: QueryComplexity, score: number): string {\n    const reasons: string[] = [];\n\n    if (query.length > 200) {\n      reasons.push('Long query');\n    }\n\n    const wordCount = query.split(/\\s+/).length;\n    if (wordCount > 20) {\n      reasons.push('Multiple concepts');\n    }\n\n    if (/\\b(analyze|compare|evaluate|synthesize)\\b/i.test(query)) {\n      reasons.push('Analytical keywords detected');\n    }\n\n    if (/\\b(simple|basic|quick|fast)\\b/i.test(query)) {\n      reasons.push('Simple request indicators');\n    }\n\n    return `Classified as ${complexity} (score: ${score.toFixed(1)}). ${reasons.join('. ')}`;\n  }\n\n  /**\n   * Get classification metrics\n   */\n  async getClassificationMetrics(): Promise<Record<QueryComplexity, number>> {\n    return {\n      [QueryComplexity.SIMPLE]: this.classificationStats.get(QueryComplexity.SIMPLE) || 0,\n      [QueryComplexity.MODERATE]: this.classificationStats.get(QueryComplexity.MODERATE) || 0,\n      [QueryComplexity.COMPLEX]: this.classificationStats.get(QueryComplexity.COMPLEX) || 0\n    };\n  }\n\n  /**\n   * Reset classification statistics\n   */\n  resetStats(): void {\n    this.classificationStats.clear();\n    this.classificationStats.set(QueryComplexity.SIMPLE, 0);\n    this.classificationStats.set(QueryComplexity.MODERATE, 0);\n    this.classificationStats.set(QueryComplexity.COMPLEX, 0);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}