{"version":3,"names":["cov_6re5584yd","actualCoverage","PrismaClient","logger","prisma","s","TeacherCourseBuilderService","createCourse","instructorId","courseData","f","course","create","data","title","b","description","tier","language","modules","prerequisites","include","info","courseId","id","error","updateCourse","update","where","deleteCourse","delete","addModule","module","newModule","content","order","estimatedTime","moduleId","publishCourse","findUnique","Error","success","message","teacherCourseBuilderService"],"sources":["teacher-course-builder.service.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\nimport { logger } from '../utils/logger';\n\nconst prisma = new PrismaClient();\n\nexport interface CourseModule {\n  id: string;\n  title: string;\n  content: string;\n  order: number;\n  estimatedTime: number;\n}\n\nexport interface CourseContent {\n  id: string;\n  title: string;\n  description: string;\n  modules: CourseModule[];\n  tier: 'free' | 'premium' | 'pro';\n  language: string;\n}\n\nexport class TeacherCourseBuilderService {\n  async createCourse(instructorId: string, courseData: Partial<CourseContent>): Promise<CourseContent> {\n    try {\n      const course = await prisma.course.create({\n        data: {\n          title: courseData.title || 'Untitled Course',\n          description: courseData.description || '',\n          instructorId,\n          tier: courseData.tier || 'free',\n          language: courseData.language || 'en',\n          modules: { create: courseData.modules || [] },\n          prerequisites: [],\n        },\n        include: { modules: true },\n      });\n\n      logger.info('Course created', { courseId: course.id, instructorId });\n      return { id: course.id, title: course.title, description: course.description, modules: course.modules, tier: course.tier as any, language: course.language };\n    } catch (error) {\n      logger.error('Error creating course', { error, instructorId });\n      throw error;\n    }\n  }\n\n  async updateCourse(courseId: string, courseData: Partial<CourseContent>): Promise<CourseContent> {\n    try {\n      const course = await prisma.course.update({\n        where: { id: courseId },\n        data: {\n          title: courseData.title,\n          description: courseData.description,\n          tier: courseData.tier,\n          language: courseData.language,\n        },\n        include: { modules: true },\n      });\n\n      logger.info('Course updated', { courseId });\n      return { id: course.id, title: course.title, description: course.description, modules: course.modules, tier: course.tier as any, language: course.language };\n    } catch (error) {\n      logger.error('Error updating course', { error, courseId });\n      throw error;\n    }\n  }\n\n  async deleteCourse(courseId: string): Promise<void> {\n    try {\n      await prisma.course.delete({ where: { id: courseId } });\n      logger.info('Course deleted', { courseId });\n    } catch (error) {\n      logger.error('Error deleting course', { error, courseId });\n      throw error;\n    }\n  }\n\n  async addModule(courseId: string, module: CourseModule): Promise<CourseModule> {\n    try {\n      const newModule = await prisma.module.create({\n        data: {\n          courseId,\n          title: module.title,\n          content: module.content,\n          order: module.order,\n          estimatedTime: module.estimatedTime,\n        },\n      });\n\n      logger.info('Module added', { courseId, moduleId: newModule.id });\n      return newModule as any;\n    } catch (error) {\n      logger.error('Error adding module', { error, courseId });\n      throw error;\n    }\n  }\n\n  async publishCourse(courseId: string): Promise<{ success: boolean; message: string }> {\n    try {\n      const course = await prisma.course.findUnique({ where: { id: courseId } });\n      if (!course) {throw new Error('Course not found');}\n\n      logger.info('Course published', { courseId });\n      return { success: true, message: 'Course published successfully' };\n    } catch (error) {\n      logger.error('Error publishing course', { error, courseId });\n      throw error;\n    }\n  }\n}\n\nexport const teacherCourseBuilderService = new TeacherCourseBuilderService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAfZ,SAASE,YAAY,QAAQ,gBAAgB;AAC7C,SAASC,MAAM,QAAQ,iBAAiB;AAExC,MAAMC,MAAM;AAAA;AAAA,CAAAJ,aAAA,GAAAK,CAAA,OAAG,IAAIH,YAAY,CAAC,CAAC;AAmBjC,OAAO,MAAMI,2BAA2B,CAAC;EACvC,MAAMC,YAAYA,CAACC,YAAoB,EAAEC,UAAkC,EAA0B;IAAA;IAAAT,aAAA,GAAAU,CAAA;IAAAV,aAAA,GAAAK,CAAA;IACnG,IAAI;MACF,MAAMM,MAAM;MAAA;MAAA,CAAAX,aAAA,GAAAK,CAAA,OAAG,MAAMD,MAAM,CAACO,MAAM,CAACC,MAAM,CAAC;QACxCC,IAAI,EAAE;UACJC,KAAK;UAAE;UAAA,CAAAd,aAAA,GAAAe,CAAA,UAAAN,UAAU,CAACK,KAAK;UAAA;UAAA,CAAAd,aAAA,GAAAe,CAAA,UAAI,iBAAiB;UAC5CC,WAAW;UAAE;UAAA,CAAAhB,aAAA,GAAAe,CAAA,UAAAN,UAAU,CAACO,WAAW;UAAA;UAAA,CAAAhB,aAAA,GAAAe,CAAA,UAAI,EAAE;UACzCP,YAAY;UACZS,IAAI;UAAE;UAAA,CAAAjB,aAAA,GAAAe,CAAA,UAAAN,UAAU,CAACQ,IAAI;UAAA;UAAA,CAAAjB,aAAA,GAAAe,CAAA,UAAI,MAAM;UAC/BG,QAAQ;UAAE;UAAA,CAAAlB,aAAA,GAAAe,CAAA,UAAAN,UAAU,CAACS,QAAQ;UAAA;UAAA,CAAAlB,aAAA,GAAAe,CAAA,UAAI,IAAI;UACrCI,OAAO,EAAE;YAAEP,MAAM;YAAE;YAAA,CAAAZ,aAAA,GAAAe,CAAA,UAAAN,UAAU,CAACU,OAAO;YAAA;YAAA,CAAAnB,aAAA,GAAAe,CAAA,UAAI,EAAE;UAAC,CAAC;UAC7CK,aAAa,EAAE;QACjB,CAAC;QACDC,OAAO,EAAE;UAAEF,OAAO,EAAE;QAAK;MAC3B,CAAC,CAAC;MAAC;MAAAnB,aAAA,GAAAK,CAAA;MAEHF,MAAM,CAACmB,IAAI,CAAC,gBAAgB,EAAE;QAAEC,QAAQ,EAAEZ,MAAM,CAACa,EAAE;QAAEhB;MAAa,CAAC,CAAC;MAAC;MAAAR,aAAA,GAAAK,CAAA;MACrE,OAAO;QAAEmB,EAAE,EAAEb,MAAM,CAACa,EAAE;QAAEV,KAAK,EAAEH,MAAM,CAACG,KAAK;QAAEE,WAAW,EAAEL,MAAM,CAACK,WAAW;QAAEG,OAAO,EAAER,MAAM,CAACQ,OAAO;QAAEF,IAAI,EAAEN,MAAM,CAACM,IAAW;QAAEC,QAAQ,EAAEP,MAAM,CAACO;MAAS,CAAC;IAC9J,CAAC,CAAC,OAAOO,KAAK,EAAE;MAAA;MAAAzB,aAAA,GAAAK,CAAA;MACdF,MAAM,CAACsB,KAAK,CAAC,uBAAuB,EAAE;QAAEA,KAAK;QAAEjB;MAAa,CAAC,CAAC;MAAC;MAAAR,aAAA,GAAAK,CAAA;MAC/D,MAAMoB,KAAK;IACb;EACF;EAEA,MAAMC,YAAYA,CAACH,QAAgB,EAAEd,UAAkC,EAA0B;IAAA;IAAAT,aAAA,GAAAU,CAAA;IAAAV,aAAA,GAAAK,CAAA;IAC/F,IAAI;MACF,MAAMM,MAAM;MAAA;MAAA,CAAAX,aAAA,GAAAK,CAAA,OAAG,MAAMD,MAAM,CAACO,MAAM,CAACgB,MAAM,CAAC;QACxCC,KAAK,EAAE;UAAEJ,EAAE,EAAED;QAAS,CAAC;QACvBV,IAAI,EAAE;UACJC,KAAK,EAAEL,UAAU,CAACK,KAAK;UACvBE,WAAW,EAAEP,UAAU,CAACO,WAAW;UACnCC,IAAI,EAAER,UAAU,CAACQ,IAAI;UACrBC,QAAQ,EAAET,UAAU,CAACS;QACvB,CAAC;QACDG,OAAO,EAAE;UAAEF,OAAO,EAAE;QAAK;MAC3B,CAAC,CAAC;MAAC;MAAAnB,aAAA,GAAAK,CAAA;MAEHF,MAAM,CAACmB,IAAI,CAAC,gBAAgB,EAAE;QAAEC;MAAS,CAAC,CAAC;MAAC;MAAAvB,aAAA,GAAAK,CAAA;MAC5C,OAAO;QAAEmB,EAAE,EAAEb,MAAM,CAACa,EAAE;QAAEV,KAAK,EAAEH,MAAM,CAACG,KAAK;QAAEE,WAAW,EAAEL,MAAM,CAACK,WAAW;QAAEG,OAAO,EAAER,MAAM,CAACQ,OAAO;QAAEF,IAAI,EAAEN,MAAM,CAACM,IAAW;QAAEC,QAAQ,EAAEP,MAAM,CAACO;MAAS,CAAC;IAC9J,CAAC,CAAC,OAAOO,KAAK,EAAE;MAAA;MAAAzB,aAAA,GAAAK,CAAA;MACdF,MAAM,CAACsB,KAAK,CAAC,uBAAuB,EAAE;QAAEA,KAAK;QAAEF;MAAS,CAAC,CAAC;MAAC;MAAAvB,aAAA,GAAAK,CAAA;MAC3D,MAAMoB,KAAK;IACb;EACF;EAEA,MAAMI,YAAYA,CAACN,QAAgB,EAAiB;IAAA;IAAAvB,aAAA,GAAAU,CAAA;IAAAV,aAAA,GAAAK,CAAA;IAClD,IAAI;MAAA;MAAAL,aAAA,GAAAK,CAAA;MACF,MAAMD,MAAM,CAACO,MAAM,CAACmB,MAAM,CAAC;QAAEF,KAAK,EAAE;UAAEJ,EAAE,EAAED;QAAS;MAAE,CAAC,CAAC;MAAC;MAAAvB,aAAA,GAAAK,CAAA;MACxDF,MAAM,CAACmB,IAAI,CAAC,gBAAgB,EAAE;QAAEC;MAAS,CAAC,CAAC;IAC7C,CAAC,CAAC,OAAOE,KAAK,EAAE;MAAA;MAAAzB,aAAA,GAAAK,CAAA;MACdF,MAAM,CAACsB,KAAK,CAAC,uBAAuB,EAAE;QAAEA,KAAK;QAAEF;MAAS,CAAC,CAAC;MAAC;MAAAvB,aAAA,GAAAK,CAAA;MAC3D,MAAMoB,KAAK;IACb;EACF;EAEA,MAAMM,SAASA,CAACR,QAAgB,EAAES,MAAoB,EAAyB;IAAA;IAAAhC,aAAA,GAAAU,CAAA;IAAAV,aAAA,GAAAK,CAAA;IAC7E,IAAI;MACF,MAAM4B,SAAS;MAAA;MAAA,CAAAjC,aAAA,GAAAK,CAAA,QAAG,MAAMD,MAAM,CAAC4B,MAAM,CAACpB,MAAM,CAAC;QAC3CC,IAAI,EAAE;UACJU,QAAQ;UACRT,KAAK,EAAEkB,MAAM,CAAClB,KAAK;UACnBoB,OAAO,EAAEF,MAAM,CAACE,OAAO;UACvBC,KAAK,EAAEH,MAAM,CAACG,KAAK;UACnBC,aAAa,EAAEJ,MAAM,CAACI;QACxB;MACF,CAAC,CAAC;MAAC;MAAApC,aAAA,GAAAK,CAAA;MAEHF,MAAM,CAACmB,IAAI,CAAC,cAAc,EAAE;QAAEC,QAAQ;QAAEc,QAAQ,EAAEJ,SAAS,CAACT;MAAG,CAAC,CAAC;MAAC;MAAAxB,aAAA,GAAAK,CAAA;MAClE,OAAO4B,SAAS;IAClB,CAAC,CAAC,OAAOR,KAAK,EAAE;MAAA;MAAAzB,aAAA,GAAAK,CAAA;MACdF,MAAM,CAACsB,KAAK,CAAC,qBAAqB,EAAE;QAAEA,KAAK;QAAEF;MAAS,CAAC,CAAC;MAAC;MAAAvB,aAAA,GAAAK,CAAA;MACzD,MAAMoB,KAAK;IACb;EACF;EAEA,MAAMa,aAAaA,CAACf,QAAgB,EAAkD;IAAA;IAAAvB,aAAA,GAAAU,CAAA;IAAAV,aAAA,GAAAK,CAAA;IACpF,IAAI;MACF,MAAMM,MAAM;MAAA;MAAA,CAAAX,aAAA,GAAAK,CAAA,QAAG,MAAMD,MAAM,CAACO,MAAM,CAAC4B,UAAU,CAAC;QAAEX,KAAK,EAAE;UAAEJ,EAAE,EAAED;QAAS;MAAE,CAAC,CAAC;MAAC;MAAAvB,aAAA,GAAAK,CAAA;MAC3E,IAAI,CAACM,MAAM,EAAE;QAAA;QAAAX,aAAA,GAAAe,CAAA;QAAAf,aAAA,GAAAK,CAAA;QAAC,MAAM,IAAImC,KAAK,CAAC,kBAAkB,CAAC;MAAC,CAAC;MAAA;MAAA;QAAAxC,aAAA,GAAAe,CAAA;MAAA;MAAAf,aAAA,GAAAK,CAAA;MAEnDF,MAAM,CAACmB,IAAI,CAAC,kBAAkB,EAAE;QAAEC;MAAS,CAAC,CAAC;MAAC;MAAAvB,aAAA,GAAAK,CAAA;MAC9C,OAAO;QAAEoC,OAAO,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAgC,CAAC;IACpE,CAAC,CAAC,OAAOjB,KAAK,EAAE;MAAA;MAAAzB,aAAA,GAAAK,CAAA;MACdF,MAAM,CAACsB,KAAK,CAAC,yBAAyB,EAAE;QAAEA,KAAK;QAAEF;MAAS,CAAC,CAAC;MAAC;MAAAvB,aAAA,GAAAK,CAAA;MAC7D,MAAMoB,KAAK;IACb;EACF;AACF;AAEA,OAAO,MAAMkB,2BAA2B;AAAA;AAAA,CAAA3C,aAAA,GAAAK,CAAA,QAAG,IAAIC,2BAA2B,CAAC,CAAC","ignoreList":[]}