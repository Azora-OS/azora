{"version":3,"names":["cov_1ziwv147x8","actualCoverage","express","s","require","compression","cors","helmet","app","PORT","b","process","env","use","json","limit","auditRoutes","get","req","res","f","status","service","timestamp","Date","toISOString","message","endpoints","error","next","console","listen","log","module","exports"],"sources":["server.js"],"sourcesContent":["const express = require('express');\nconst compression = require('compression');\nconst cors = require('cors');\nconst helmet = require('helmet');\n\nconst app = express();\nconst PORT = process.env.PORT || 3005;\n\n// Security middleware\napp.use(helmet());\napp.use(cors());\napp.use(compression());\napp.use(express.json({ limit: '10mb' }));\n\n// Import routes\nconst auditRoutes = require('./api/routes');\n\n// Routes\napp.use('/api/audit', auditRoutes);\n\n// Health check endpoint\napp.get('/api/health', (req, res) => {\n  res.json({\n    status: 'OK',\n    service: 'Audit Logging Service',\n    timestamp: new Date().toISOString()\n  });\n});\n\n// Root endpoint\napp.get('/', (req, res) => {\n  res.json({\n    message: 'Welcome to the Azora Audit Logging Service API',\n    endpoints: {\n      'POST /api/audit/security': 'Log a security event',\n      'POST /api/audit/user-action': 'Log a user action',\n      'POST /api/audit/system': 'Log a system event',\n      'POST /api/audit/data-access': 'Log a data access event',\n      'GET /api/audit/logs': 'Get audit logs with filtering',\n      'GET /api/audit/security/stats': 'Get security statistics',\n      'DELETE /api/audit/logs/old': 'Clear old audit logs',\n      'GET /api/health': 'Health check endpoint'\n    }\n  });\n});\n\n// 404 handler\napp.use((req, res) => {\n  res.status(404).json({ error: 'Endpoint not found' });\n});\n\n// Error handling middleware\napp.use((error, req, res, next) => {\n  console.error('Server error:', error);\n  res.status(500).json({ error: 'Internal server error' });\n});\n\n// Start server\napp.listen(PORT, () => {\n  console.log(`üîç Audit Logging Service running on port ${PORT}`);\n  console.log(`üîó Health check: http://localhost:${PORT}/api/health`);\n  console.log(`üìö API docs: http://localhost:${PORT}`);\n});\n\nmodule.exports = app;\n"],"mappings":"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","ignoreList":[]}