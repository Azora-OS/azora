3ddea1cc3ada1fb0a3ae55884ad88ae2
/* istanbul ignore next */
function cov_1cnylsi5r2() {
  var path = "/workspaces/azora/services/shared/security/initialize.ts";
  var hash = "97f0715fac45be9b249163f0389707e3927e23dd";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/shared/security/initialize.ts",
    statementMap: {
      "0": {
        start: {
          line: 48,
          column: 2
        },
        end: {
          line: 93,
          column: 3
        }
      },
      "1": {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 49,
          column: 56
        }
      },
      "2": {
        start: {
          line: 52,
          column: 4
        },
        end: {
          line: 52,
          column: 63
        }
      },
      "3": {
        start: {
          line: 53,
          column: 26
        },
        end: {
          line: 58,
          column: 5
        }
      },
      "4": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 61
        }
      },
      "5": {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 62,
          column: 67
        }
      },
      "6": {
        start: {
          line: 63,
          column: 30
        },
        end: {
          line: 69,
          column: 5
        }
      },
      "7": {
        start: {
          line: 70,
          column: 4
        },
        end: {
          line: 70,
          column: 65
        }
      },
      "8": {
        start: {
          line: 73,
          column: 4
        },
        end: {
          line: 73,
          column: 64
        }
      },
      "9": {
        start: {
          line: 74,
          column: 27
        },
        end: {
          line: 80,
          column: 5
        }
      },
      "10": {
        start: {
          line: 81,
          column: 4
        },
        end: {
          line: 81,
          column: 62
        }
      },
      "11": {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 70
        }
      },
      "12": {
        start: {
          line: 85,
          column: 4
        },
        end: {
          line: 89,
          column: 6
        }
      },
      "13": {
        start: {
          line: 91,
          column: 4
        },
        end: {
          line: 91,
          column: 70
        }
      },
      "14": {
        start: {
          line: 92,
          column: 4
        },
        end: {
          line: 92,
          column: 16
        }
      },
      "15": {
        start: {
          line: 100,
          column: 2
        },
        end: {
          line: 134,
          column: 3
        }
      },
      "16": {
        start: {
          line: 101,
          column: 4
        },
        end: {
          line: 101,
          column: 56
        }
      },
      "17": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 108,
          column: 26
        }
      },
      "18": {
        start: {
          line: 111,
          column: 4
        },
        end: {
          line: 111,
          column: 44
        }
      },
      "19": {
        start: {
          line: 112,
          column: 4
        },
        end: {
          line: 112,
          column: 23
        }
      },
      "20": {
        start: {
          line: 113,
          column: 4
        },
        end: {
          line: 113,
          column: 42
        }
      },
      "21": {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 116,
          column: 56
        }
      },
      "22": {
        start: {
          line: 117,
          column: 4
        },
        end: {
          line: 117,
          column: 34
        }
      },
      "23": {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 118,
          column: 54
        }
      },
      "24": {
        start: {
          line: 121,
          column: 4
        },
        end: {
          line: 121,
          column: 53
        }
      },
      "25": {
        start: {
          line: 122,
          column: 4
        },
        end: {
          line: 122,
          column: 31
        }
      },
      "26": {
        start: {
          line: 123,
          column: 4
        },
        end: {
          line: 123,
          column: 51
        }
      },
      "27": {
        start: {
          line: 126,
          column: 4
        },
        end: {
          line: 126,
          column: 57
        }
      },
      "28": {
        start: {
          line: 127,
          column: 4
        },
        end: {
          line: 127,
          column: 31
        }
      },
      "29": {
        start: {
          line: 128,
          column: 4
        },
        end: {
          line: 128,
          column: 55
        }
      },
      "30": {
        start: {
          line: 130,
          column: 4
        },
        end: {
          line: 130,
          column: 58
        }
      },
      "31": {
        start: {
          line: 132,
          column: 4
        },
        end: {
          line: 132,
          column: 67
        }
      },
      "32": {
        start: {
          line: 133,
          column: 4
        },
        end: {
          line: 133,
          column: 16
        }
      },
      "33": {
        start: {
          line: 144,
          column: 2
        },
        end: {
          line: 161,
          column: 3
        }
      },
      "34": {
        start: {
          line: 145,
          column: 4
        },
        end: {
          line: 145,
          column: 60
        }
      },
      "35": {
        start: {
          line: 147,
          column: 4
        },
        end: {
          line: 155,
          column: 5
        }
      },
      "36": {
        start: {
          line: 148,
          column: 26
        },
        end: {
          line: 148,
          column: 49
        }
      },
      "37": {
        start: {
          line: 149,
          column: 6
        },
        end: {
          line: 154,
          column: 7
        }
      },
      "38": {
        start: {
          line: 150,
          column: 8
        },
        end: {
          line: 152,
          column: 11
        }
      },
      "39": {
        start: {
          line: 153,
          column: 8
        },
        end: {
          line: 153,
          column: 53
        }
      },
      "40": {
        start: {
          line: 157,
          column: 4
        },
        end: {
          line: 157,
          column: 50
        }
      },
      "41": {
        start: {
          line: 159,
          column: 4
        },
        end: {
          line: 159,
          column: 57
        }
      },
      "42": {
        start: {
          line: 160,
          column: 4
        },
        end: {
          line: 160,
          column: 16
        }
      },
      "43": {
        start: {
          line: 171,
          column: 2
        },
        end: {
          line: 184,
          column: 3
        }
      },
      "44": {
        start: {
          line: 172,
          column: 4
        },
        end: {
          line: 172,
          column: 52
        }
      },
      "45": {
        start: {
          line: 174,
          column: 4
        },
        end: {
          line: 178,
          column: 5
        }
      },
      "46": {
        start: {
          line: 175,
          column: 20
        },
        end: {
          line: 175,
          column: 36
        }
      },
      "47": {
        start: {
          line: 176,
          column: 6
        },
        end: {
          line: 176,
          column: 60
        }
      },
      "48": {
        start: {
          line: 177,
          column: 6
        },
        end: {
          line: 177,
          column: 57
        }
      },
      "49": {
        start: {
          line: 180,
          column: 4
        },
        end: {
          line: 180,
          column: 59
        }
      },
      "50": {
        start: {
          line: 182,
          column: 4
        },
        end: {
          line: 182,
          column: 66
        }
      },
      "51": {
        start: {
          line: 183,
          column: 4
        },
        end: {
          line: 183,
          column: 16
        }
      },
      "52": {
        start: {
          line: 193,
          column: 2
        },
        end: {
          line: 241,
          column: 3
        }
      },
      "53": {
        start: {
          line: 194,
          column: 4
        },
        end: {
          line: 194,
          column: 55
        }
      },
      "54": {
        start: {
          line: 197,
          column: 4
        },
        end: {
          line: 197,
          column: 62
        }
      },
      "55": {
        start: {
          line: 198,
          column: 4
        },
        end: {
          line: 212,
          column: 6
        }
      },
      "56": {
        start: {
          line: 213,
          column: 4
        },
        end: {
          line: 213,
          column: 60
        }
      },
      "57": {
        start: {
          line: 216,
          column: 4
        },
        end: {
          line: 216,
          column: 62
        }
      },
      "58": {
        start: {
          line: 217,
          column: 4
        },
        end: {
          line: 234,
          column: 6
        }
      },
      "59": {
        start: {
          line: 235,
          column: 4
        },
        end: {
          line: 235,
          column: 60
        }
      },
      "60": {
        start: {
          line: 237,
          column: 4
        },
        end: {
          line: 237,
          column: 57
        }
      },
      "61": {
        start: {
          line: 239,
          column: 4
        },
        end: {
          line: 239,
          column: 66
        }
      },
      "62": {
        start: {
          line: 240,
          column: 4
        },
        end: {
          line: 240,
          column: 16
        }
      },
      "63": {
        start: {
          line: 248,
          column: 2
        },
        end: {
          line: 289,
          column: 3
        }
      },
      "64": {
        start: {
          line: 249,
          column: 4
        },
        end: {
          line: 249,
          column: 81
        }
      },
      "65": {
        start: {
          line: 252,
          column: 21
        },
        end: {
          line: 252,
          column: 57
        }
      },
      "66": {
        start: {
          line: 255,
          column: 4
        },
        end: {
          line: 255,
          column: 33
        }
      },
      "67": {
        start: {
          line: 258,
          column: 4
        },
        end: {
          line: 263,
          column: 7
        }
      },
      "68": {
        start: {
          line: 266,
          column: 4
        },
        end: {
          line: 272,
          column: 7
        }
      },
      "69": {
        start: {
          line: 275,
          column: 4
        },
        end: {
          line: 275,
          column: 58
        }
      },
      "70": {
        start: {
          line: 277,
          column: 4
        },
        end: {
          line: 277,
          column: 78
        }
      },
      "71": {
        start: {
          line: 278,
          column: 4
        },
        end: {
          line: 278,
          column: 31
        }
      },
      "72": {
        start: {
          line: 279,
          column: 4
        },
        end: {
          line: 279,
          column: 58
        }
      },
      "73": {
        start: {
          line: 280,
          column: 4
        },
        end: {
          line: 280,
          column: 62
        }
      },
      "74": {
        start: {
          line: 281,
          column: 4
        },
        end: {
          line: 281,
          column: 59
        }
      },
      "75": {
        start: {
          line: 282,
          column: 4
        },
        end: {
          line: 282,
          column: 54
        }
      },
      "76": {
        start: {
          line: 283,
          column: 4
        },
        end: {
          line: 283,
          column: 49
        }
      },
      "77": {
        start: {
          line: 284,
          column: 4
        },
        end: {
          line: 284,
          column: 57
        }
      },
      "78": {
        start: {
          line: 285,
          column: 4
        },
        end: {
          line: 285,
          column: 52
        }
      },
      "79": {
        start: {
          line: 287,
          column: 4
        },
        end: {
          line: 287,
          column: 61
        }
      },
      "80": {
        start: {
          line: 288,
          column: 4
        },
        end: {
          line: 288,
          column: 16
        }
      }
    },
    fnMap: {
      "0": {
        name: "initializeSecurityServices",
        decl: {
          start: {
            line: 43,
            column: 22
          },
          end: {
            line: 43,
            column: 48
          }
        },
        loc: {
          start: {
            line: 47,
            column: 3
          },
          end: {
            line: 94,
            column: 1
          }
        },
        line: 47
      },
      "1": {
        name: "setupSecurityMiddleware",
        decl: {
          start: {
            line: 99,
            column: 16
          },
          end: {
            line: 99,
            column: 39
          }
        },
        loc: {
          start: {
            line: 99,
            column: 56
          },
          end: {
            line: 135,
            column: 1
          }
        },
        line: 99
      },
      "2": {
        name: "migrateSecretsFromEnvironment",
        decl: {
          start: {
            line: 140,
            column: 22
          },
          end: {
            line: 140,
            column: 51
          }
        },
        loc: {
          start: {
            line: 143,
            column: 17
          },
          end: {
            line: 162,
            column: 1
          }
        },
        line: 143
      },
      "3": {
        name: "generateEncryptionKeys",
        decl: {
          start: {
            line: 167,
            column: 22
          },
          end: {
            line: 167,
            column: 44
          }
        },
        loc: {
          start: {
            line: 170,
            column: 17
          },
          end: {
            line: 185,
            column: 1
          }
        },
        line: 170
      },
      "4": {
        name: "setupGDPRDocumentation",
        decl: {
          start: {
            line: 190,
            column: 22
          },
          end: {
            line: 190,
            column: 44
          }
        },
        loc: {
          start: {
            line: 192,
            column: 17
          },
          end: {
            line: 242,
            column: 1
          }
        },
        line: 192
      },
      "5": {
        name: "implementPhase1Security",
        decl: {
          start: {
            line: 247,
            column: 22
          },
          end: {
            line: 247,
            column: 45
          }
        },
        loc: {
          start: {
            line: 247,
            column: 71
          },
          end: {
            line: 290,
            column: 1
          }
        },
        line: 247
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 54,
            column: 6
          },
          end: {
            line: 57,
            column: 7
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 54,
            column: 6
          },
          end: {
            line: 54,
            column: 26
          }
        }, {
          start: {
            line: 54,
            column: 30
          },
          end: {
            line: 57,
            column: 7
          }
        }],
        line: 54
      },
      "1": {
        loc: {
          start: {
            line: 55,
            column: 18
          },
          end: {
            line: 55,
            column: 71
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 55,
            column: 18
          },
          end: {
            line: 55,
            column: 60
          }
        }, {
          start: {
            line: 55,
            column: 64
          },
          end: {
            line: 55,
            column: 71
          }
        }],
        line: 55
      },
      "2": {
        loc: {
          start: {
            line: 64,
            column: 6
          },
          end: {
            line: 68,
            column: 7
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 64,
            column: 6
          },
          end: {
            line: 64,
            column: 30
          }
        }, {
          start: {
            line: 64,
            column: 34
          },
          end: {
            line: 68,
            column: 7
          }
        }],
        line: 64
      },
      "3": {
        loc: {
          start: {
            line: 65,
            column: 18
          },
          end: {
            line: 65,
            column: 64
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 65,
            column: 18
          },
          end: {
            line: 65,
            column: 53
          }
        }, {
          start: {
            line: 65,
            column: 57
          },
          end: {
            line: 65,
            column: 64
          }
        }],
        line: 65
      },
      "4": {
        loc: {
          start: {
            line: 75,
            column: 6
          },
          end: {
            line: 79,
            column: 7
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 75,
            column: 6
          },
          end: {
            line: 75,
            column: 27
          }
        }, {
          start: {
            line: 75,
            column: 31
          },
          end: {
            line: 79,
            column: 7
          }
        }],
        line: 75
      },
      "5": {
        loc: {
          start: {
            line: 76,
            column: 26
          },
          end: {
            line: 76,
            column: 69
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 76,
            column: 26
          },
          end: {
            line: 76,
            column: 55
          }
        }, {
          start: {
            line: 76,
            column: 59
          },
          end: {
            line: 76,
            column: 69
          }
        }],
        line: 76
      },
      "6": {
        loc: {
          start: {
            line: 149,
            column: 6
          },
          end: {
            line: 154,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 149,
            column: 6
          },
          end: {
            line: 154,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 149
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "97f0715fac45be9b249163f0389707e3927e23dd"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1cnylsi5r2 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1cnylsi5r2();
/**
 * Security Services Initialization
 * Initializes all security services for Phase 1 implementation
 */

import { initializeKeyManagement, initializeSecretsManagement, initializeGDPRCompliance } from './index';
/**
 * Initialize all security services
 */
export async function initializeSecurityServices(config) {
  /* istanbul ignore next */
  cov_1cnylsi5r2().f[0]++;
  cov_1cnylsi5r2().s[0]++;
  try {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[1]++;
    console.log('üîê Initializing Security Services...');

    // Initialize Key Management
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[2]++;
    console.log('  ‚îú‚îÄ Initializing Key Management Service...');
    const keyManagement =
    /* istanbul ignore next */
    (cov_1cnylsi5r2().s[3]++, initializeKeyManagement(
    /* istanbul ignore next */
    (cov_1cnylsi5r2().b[0][0]++, config.keyManagement) ||
    /* istanbul ignore next */
    (cov_1cnylsi5r2().b[0][1]++, {
      provider:
      /* istanbul ignore next */
      (cov_1cnylsi5r2().b[1][0]++, process.env.KEY_MANAGEMENT_PROVIDER) ||
      /* istanbul ignore next */
      (cov_1cnylsi5r2().b[1][1]++, 'local'),
      rotationIntervalDays: 90
    })));
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[4]++;
    console.log('  ‚îú‚îÄ ‚úÖ Key Management Service initialized');

    // Initialize Secrets Management
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[5]++;
    console.log('  ‚îú‚îÄ Initializing Secrets Management Service...');
    const secretsManagement =
    /* istanbul ignore next */
    (cov_1cnylsi5r2().s[6]++, initializeSecretsManagement(
    /* istanbul ignore next */
    (cov_1cnylsi5r2().b[2][0]++, config.secretsManagement) ||
    /* istanbul ignore next */
    (cov_1cnylsi5r2().b[2][1]++, {
      provider:
      /* istanbul ignore next */
      (cov_1cnylsi5r2().b[3][0]++, process.env.SECRETS_PROVIDER) ||
      /* istanbul ignore next */
      (cov_1cnylsi5r2().b[3][1]++, 'local'),
      rotationIntervalDays: 30,
      encryptionKey: process.env.ENCRYPTION_KEY
    })));
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[7]++;
    console.log('  ‚îú‚îÄ ‚úÖ Secrets Management Service initialized');

    // Initialize GDPR Compliance
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[8]++;
    console.log('  ‚îú‚îÄ Initializing GDPR Compliance Service...');
    const gdprCompliance =
    /* istanbul ignore next */
    (cov_1cnylsi5r2().s[9]++, initializeGDPRCompliance(
    /* istanbul ignore next */
    (cov_1cnylsi5r2().b[4][0]++, config.gdprCompliance) ||
    /* istanbul ignore next */
    (cov_1cnylsi5r2().b[4][1]++, {
      organizationName:
      /* istanbul ignore next */
      (cov_1cnylsi5r2().b[5][0]++, process.env.ORGANIZATION_NAME) ||
      /* istanbul ignore next */
      (cov_1cnylsi5r2().b[5][1]++, 'Azora OS'),
      dataProtectionOfficer: process.env.DPO_EMAIL,
      privacyPolicyUrl: process.env.PRIVACY_POLICY_URL
    })));
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[10]++;
    console.log('  ‚îú‚îÄ ‚úÖ GDPR Compliance Service initialized');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[11]++;
    console.log('‚úÖ All Security Services initialized successfully\n');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[12]++;
    return {
      keyManagement,
      secretsManagement,
      gdprCompliance
    };
  } catch (error) {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[13]++;
    console.error('‚ùå Failed to initialize security services:', error);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[14]++;
    throw error;
  }
}

/**
 * Setup security middleware for Express app
 */
export function setupSecurityMiddleware(app) {
  /* istanbul ignore next */
  cov_1cnylsi5r2().f[1]++;
  cov_1cnylsi5r2().s[15]++;
  try {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[16]++;
    console.log('üîí Setting up Security Middleware...');
    const {
      configureSecurityHeaders,
      configureRateLimiting,
      configureSanitization,
      configureCORS
    } =
    /* istanbul ignore next */
    (cov_1cnylsi5r2().s[17]++, require('./index'));

    // Configure CORS
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[18]++;
    console.log('  ‚îú‚îÄ Configuring CORS...');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[19]++;
    configureCORS(app);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[20]++;
    console.log('  ‚îú‚îÄ ‚úÖ CORS configured');

    // Configure Security Headers
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[21]++;
    console.log('  ‚îú‚îÄ Configuring Security Headers...');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[22]++;
    configureSecurityHeaders(app);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[23]++;
    console.log('  ‚îú‚îÄ ‚úÖ Security Headers configured');

    // Configure Rate Limiting
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[24]++;
    console.log('  ‚îú‚îÄ Configuring Rate Limiting...');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[25]++;
    configureRateLimiting(app);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[26]++;
    console.log('  ‚îú‚îÄ ‚úÖ Rate Limiting configured');

    // Configure Data Sanitization
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[27]++;
    console.log('  ‚îú‚îÄ Configuring Data Sanitization...');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[28]++;
    configureSanitization(app);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[29]++;
    console.log('  ‚îú‚îÄ ‚úÖ Data Sanitization configured');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[30]++;
    console.log('‚úÖ Security Middleware setup complete\n');
  } catch (error) {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[31]++;
    console.error('‚ùå Failed to setup security middleware:', error);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[32]++;
    throw error;
  }
}

/**
 * Migrate secrets from environment to secrets management
 */
export async function migrateSecretsFromEnvironment(secretsManagement, secretNames) {
  /* istanbul ignore next */
  cov_1cnylsi5r2().f[2]++;
  cov_1cnylsi5r2().s[33]++;
  try {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[34]++;
    console.log('üîÑ Migrating Secrets from Environment...');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[35]++;
    for (const secretName of secretNames) {
      const secretValue =
      /* istanbul ignore next */
      (cov_1cnylsi5r2().s[36]++, process.env[secretName]);
      /* istanbul ignore next */
      cov_1cnylsi5r2().s[37]++;
      if (secretValue) {
        /* istanbul ignore next */
        cov_1cnylsi5r2().b[6][0]++;
        cov_1cnylsi5r2().s[38]++;
        await secretsManagement.storeSecret(secretName, secretValue, {
          metadata: {
            migratedAt: new Date()
          }
        });
        /* istanbul ignore next */
        cov_1cnylsi5r2().s[39]++;
        console.log(`  ‚îú‚îÄ ‚úÖ Migrated ${secretName}`);
      } else
      /* istanbul ignore next */
      {
        cov_1cnylsi5r2().b[6][1]++;
      }
    }
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[40]++;
    console.log('‚úÖ Secrets migration complete\n');
  } catch (error) {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[41]++;
    console.error('‚ùå Failed to migrate secrets:', error);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[42]++;
    throw error;
  }
}

/**
 * Generate encryption keys for services
 */
export async function generateEncryptionKeys(keyManagement, services) {
  /* istanbul ignore next */
  cov_1cnylsi5r2().f[3]++;
  cov_1cnylsi5r2().s[43]++;
  try {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[44]++;
    console.log('üîë Generating Encryption Keys...');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[45]++;
    for (const service of services) {
      const keyId =
      /* istanbul ignore next */
      (cov_1cnylsi5r2().s[46]++, `${service}-key`);
      /* istanbul ignore next */
      cov_1cnylsi5r2().s[47]++;
      await keyManagement.generateKey(keyId, 'aes-256-gcm');
      /* istanbul ignore next */
      cov_1cnylsi5r2().s[48]++;
      console.log(`  ‚îú‚îÄ ‚úÖ Generated key for ${service}`);
    }
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[49]++;
    console.log('‚úÖ Encryption keys generation complete\n');
  } catch (error) {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[50]++;
    console.error('‚ùå Failed to generate encryption keys:', error);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[51]++;
    throw error;
  }
}

/**
 * Setup GDPR compliance documentation
 */
export async function setupGDPRDocumentation(gdprCompliance) {
  /* istanbul ignore next */
  cov_1cnylsi5r2().f[4]++;
  cov_1cnylsi5r2().s[52]++;
  try {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[53]++;
    console.log('üìã Setting up GDPR Documentation...');

    // Create Data Processing Agreement
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[54]++;
    console.log('  ‚îú‚îÄ Creating Data Processing Agreement...');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[55]++;
    await gdprCompliance.createDPA('Azora OS', 'Data Processors', {
      processingPurpose: 'Provide educational and financial services',
      dataCategories: ['Personal Identification Data', 'Contact Information', 'Educational Records', 'Financial Information'],
      recipients: ['Internal Services', 'Third-party Processors'],
      retentionPeriod: 365
    });
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[56]++;
    console.log('  ‚îú‚îÄ ‚úÖ Data Processing Agreement created');

    // Create Privacy Impact Assessment
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[57]++;
    console.log('  ‚îú‚îÄ Creating Privacy Impact Assessment...');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[58]++;
    await gdprCompliance.createPIA('User Data Processing', {
      description: 'Assessment of user data processing activities',
      dataCategories: ['Personal Identification Data', 'Contact Information', 'Educational Records'],
      riskLevel: 'medium',
      mitigationMeasures: ['Encryption at rest and in transit', 'Access control and authentication', 'Regular security audits', 'Data minimization practices']
    });
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[59]++;
    console.log('  ‚îú‚îÄ ‚úÖ Privacy Impact Assessment created');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[60]++;
    console.log('‚úÖ GDPR documentation setup complete\n');
  } catch (error) {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[61]++;
    console.error('‚ùå Failed to setup GDPR documentation:', error);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[62]++;
    throw error;
  }
}

/**
 * Complete Phase 1 security implementation
 */
export async function implementPhase1Security(app) {
  /* istanbul ignore next */
  cov_1cnylsi5r2().f[5]++;
  cov_1cnylsi5r2().s[63]++;
  try {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[64]++;
    console.log('\nüöÄ Starting Phase 1: Security & Compliance Implementation\n');

    // Initialize security services
    const services =
    /* istanbul ignore next */
    (cov_1cnylsi5r2().s[65]++, await initializeSecurityServices({}));

    // Setup security middleware
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[66]++;
    setupSecurityMiddleware(app);

    // Generate encryption keys
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[67]++;
    await generateEncryptionKeys(services.keyManagement, ['auth-service', 'api-gateway', 'database', 'cache']);

    // Migrate secrets from environment
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[68]++;
    await migrateSecretsFromEnvironment(services.secretsManagement, ['JWT_SECRET', 'DATABASE_URL', 'REDIS_URL', 'API_KEY', 'ENCRYPTION_KEY']);

    // Setup GDPR documentation
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[69]++;
    await setupGDPRDocumentation(services.gdprCompliance);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[70]++;
    console.log('‚úÖ Phase 1 Security & Compliance Implementation Complete!\n');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[71]++;
    console.log('üìä Summary:');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[72]++;
    console.log('  ‚úÖ Key Management Service initialized');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[73]++;
    console.log('  ‚úÖ Secrets Management Service initialized');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[74]++;
    console.log('  ‚úÖ GDPR Compliance Service initialized');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[75]++;
    console.log('  ‚úÖ Security Middleware configured');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[76]++;
    console.log('  ‚úÖ Encryption keys generated');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[77]++;
    console.log('  ‚úÖ Secrets migrated from environment');
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[78]++;
    console.log('  ‚úÖ GDPR documentation created\n');
  } catch (error) {
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[79]++;
    console.error('‚ùå Phase 1 implementation failed:', error);
    /* istanbul ignore next */
    cov_1cnylsi5r2().s[80]++;
    throw error;
  }
}
export default {
  initializeSecurityServices,
  setupSecurityMiddleware,
  migrateSecretsFromEnvironment,
  generateEncryptionKeys,
  setupGDPRDocumentation,
  implementPhase1Security
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWNueWxzaTVyMiIsImFjdHVhbENvdmVyYWdlIiwiaW5pdGlhbGl6ZUtleU1hbmFnZW1lbnQiLCJpbml0aWFsaXplU2VjcmV0c01hbmFnZW1lbnQiLCJpbml0aWFsaXplR0RQUkNvbXBsaWFuY2UiLCJpbml0aWFsaXplU2VjdXJpdHlTZXJ2aWNlcyIsImNvbmZpZyIsImYiLCJzIiwiY29uc29sZSIsImxvZyIsImtleU1hbmFnZW1lbnQiLCJiIiwicHJvdmlkZXIiLCJwcm9jZXNzIiwiZW52IiwiS0VZX01BTkFHRU1FTlRfUFJPVklERVIiLCJyb3RhdGlvbkludGVydmFsRGF5cyIsInNlY3JldHNNYW5hZ2VtZW50IiwiU0VDUkVUU19QUk9WSURFUiIsImVuY3J5cHRpb25LZXkiLCJFTkNSWVBUSU9OX0tFWSIsImdkcHJDb21wbGlhbmNlIiwib3JnYW5pemF0aW9uTmFtZSIsIk9SR0FOSVpBVElPTl9OQU1FIiwiZGF0YVByb3RlY3Rpb25PZmZpY2VyIiwiRFBPX0VNQUlMIiwicHJpdmFjeVBvbGljeVVybCIsIlBSSVZBQ1lfUE9MSUNZX1VSTCIsImVycm9yIiwic2V0dXBTZWN1cml0eU1pZGRsZXdhcmUiLCJhcHAiLCJjb25maWd1cmVTZWN1cml0eUhlYWRlcnMiLCJjb25maWd1cmVSYXRlTGltaXRpbmciLCJjb25maWd1cmVTYW5pdGl6YXRpb24iLCJjb25maWd1cmVDT1JTIiwicmVxdWlyZSIsIm1pZ3JhdGVTZWNyZXRzRnJvbUVudmlyb25tZW50Iiwic2VjcmV0TmFtZXMiLCJzZWNyZXROYW1lIiwic2VjcmV0VmFsdWUiLCJzdG9yZVNlY3JldCIsIm1ldGFkYXRhIiwibWlncmF0ZWRBdCIsIkRhdGUiLCJnZW5lcmF0ZUVuY3J5cHRpb25LZXlzIiwic2VydmljZXMiLCJzZXJ2aWNlIiwia2V5SWQiLCJnZW5lcmF0ZUtleSIsInNldHVwR0RQUkRvY3VtZW50YXRpb24iLCJjcmVhdGVEUEEiLCJwcm9jZXNzaW5nUHVycG9zZSIsImRhdGFDYXRlZ29yaWVzIiwicmVjaXBpZW50cyIsInJldGVudGlvblBlcmlvZCIsImNyZWF0ZVBJQSIsImRlc2NyaXB0aW9uIiwicmlza0xldmVsIiwibWl0aWdhdGlvbk1lYXN1cmVzIiwiaW1wbGVtZW50UGhhc2UxU2VjdXJpdHkiXSwic291cmNlcyI6WyJpbml0aWFsaXplLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2VjdXJpdHkgU2VydmljZXMgSW5pdGlhbGl6YXRpb25cbiAqIEluaXRpYWxpemVzIGFsbCBzZWN1cml0eSBzZXJ2aWNlcyBmb3IgUGhhc2UgMSBpbXBsZW1lbnRhdGlvblxuICovXG5cbmltcG9ydCB7XG4gIGluaXRpYWxpemVLZXlNYW5hZ2VtZW50LFxuICBpbml0aWFsaXplU2VjcmV0c01hbmFnZW1lbnQsXG4gIGluaXRpYWxpemVHRFBSQ29tcGxpYW5jZVxufSBmcm9tICcuL2luZGV4JztcblxuaW50ZXJmYWNlIFNlY3VyaXR5Q29uZmlnIHtcbiAgLy8gS2V5IE1hbmFnZW1lbnRcbiAga2V5TWFuYWdlbWVudD86IHtcbiAgICBwcm92aWRlcjogJ2ttcycgfCAndmF1bHQnIHwgJ2xvY2FsJztcbiAgICBrbXNSZWdpb24/OiBzdHJpbmc7XG4gICAgdmF1bHRBZGRyPzogc3RyaW5nO1xuICAgIHZhdWx0VG9rZW4/OiBzdHJpbmc7XG4gICAgcm90YXRpb25JbnRlcnZhbERheXM/OiBudW1iZXI7XG4gIH07XG5cbiAgLy8gU2VjcmV0cyBNYW5hZ2VtZW50XG4gIHNlY3JldHNNYW5hZ2VtZW50Pzoge1xuICAgIHByb3ZpZGVyOiAndmF1bHQnIHwgJ2F3cy1zZWNyZXRzLW1hbmFnZXInIHwgJ2xvY2FsJztcbiAgICB2YXVsdEFkZHI/OiBzdHJpbmc7XG4gICAgdmF1bHRUb2tlbj86IHN0cmluZztcbiAgICBhd3NSZWdpb24/OiBzdHJpbmc7XG4gICAgcm90YXRpb25JbnRlcnZhbERheXM/OiBudW1iZXI7XG4gICAgZW5jcnlwdGlvbktleT86IHN0cmluZztcbiAgfTtcblxuICAvLyBHRFBSIENvbXBsaWFuY2VcbiAgZ2RwckNvbXBsaWFuY2U/OiB7XG4gICAgb3JnYW5pemF0aW9uTmFtZTogc3RyaW5nO1xuICAgIGRhdGFQcm90ZWN0aW9uT2ZmaWNlcj86IHN0cmluZztcbiAgICBwcml2YWN5UG9saWN5VXJsPzogc3RyaW5nO1xuICB9O1xufVxuXG4vKipcbiAqIEluaXRpYWxpemUgYWxsIHNlY3VyaXR5IHNlcnZpY2VzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplU2VjdXJpdHlTZXJ2aWNlcyhjb25maWc6IFNlY3VyaXR5Q29uZmlnKTogUHJvbWlzZTx7XG4gIGtleU1hbmFnZW1lbnQ6IGFueTtcbiAgc2VjcmV0c01hbmFnZW1lbnQ6IGFueTtcbiAgZ2RwckNvbXBsaWFuY2U6IGFueTtcbn0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+UkCBJbml0aWFsaXppbmcgU2VjdXJpdHkgU2VydmljZXMuLi4nKTtcblxuICAgIC8vIEluaXRpYWxpemUgS2V5IE1hbmFnZW1lbnRcbiAgICBjb25zb2xlLmxvZygnICDilJzilIAgSW5pdGlhbGl6aW5nIEtleSBNYW5hZ2VtZW50IFNlcnZpY2UuLi4nKTtcbiAgICBjb25zdCBrZXlNYW5hZ2VtZW50ID0gaW5pdGlhbGl6ZUtleU1hbmFnZW1lbnQoXG4gICAgICBjb25maWcua2V5TWFuYWdlbWVudCB8fCB7XG4gICAgICAgIHByb3ZpZGVyOiBwcm9jZXNzLmVudi5LRVlfTUFOQUdFTUVOVF9QUk9WSURFUiBhcyBhbnkgfHwgJ2xvY2FsJyxcbiAgICAgICAgcm90YXRpb25JbnRlcnZhbERheXM6IDkwXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zb2xlLmxvZygnICDilJzilIAg4pyFIEtleSBNYW5hZ2VtZW50IFNlcnZpY2UgaW5pdGlhbGl6ZWQnKTtcblxuICAgIC8vIEluaXRpYWxpemUgU2VjcmV0cyBNYW5hZ2VtZW50XG4gICAgY29uc29sZS5sb2coJyAg4pSc4pSAIEluaXRpYWxpemluZyBTZWNyZXRzIE1hbmFnZW1lbnQgU2VydmljZS4uLicpO1xuICAgIGNvbnN0IHNlY3JldHNNYW5hZ2VtZW50ID0gaW5pdGlhbGl6ZVNlY3JldHNNYW5hZ2VtZW50KFxuICAgICAgY29uZmlnLnNlY3JldHNNYW5hZ2VtZW50IHx8IHtcbiAgICAgICAgcHJvdmlkZXI6IHByb2Nlc3MuZW52LlNFQ1JFVFNfUFJPVklERVIgYXMgYW55IHx8ICdsb2NhbCcsXG4gICAgICAgIHJvdGF0aW9uSW50ZXJ2YWxEYXlzOiAzMCxcbiAgICAgICAgZW5jcnlwdGlvbktleTogcHJvY2Vzcy5lbnYuRU5DUllQVElPTl9LRVlcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnNvbGUubG9nKCcgIOKUnOKUgCDinIUgU2VjcmV0cyBNYW5hZ2VtZW50IFNlcnZpY2UgaW5pdGlhbGl6ZWQnKTtcblxuICAgIC8vIEluaXRpYWxpemUgR0RQUiBDb21wbGlhbmNlXG4gICAgY29uc29sZS5sb2coJyAg4pSc4pSAIEluaXRpYWxpemluZyBHRFBSIENvbXBsaWFuY2UgU2VydmljZS4uLicpO1xuICAgIGNvbnN0IGdkcHJDb21wbGlhbmNlID0gaW5pdGlhbGl6ZUdEUFJDb21wbGlhbmNlKFxuICAgICAgY29uZmlnLmdkcHJDb21wbGlhbmNlIHx8IHtcbiAgICAgICAgb3JnYW5pemF0aW9uTmFtZTogcHJvY2Vzcy5lbnYuT1JHQU5JWkFUSU9OX05BTUUgfHwgJ0F6b3JhIE9TJyxcbiAgICAgICAgZGF0YVByb3RlY3Rpb25PZmZpY2VyOiBwcm9jZXNzLmVudi5EUE9fRU1BSUwsXG4gICAgICAgIHByaXZhY3lQb2xpY3lVcmw6IHByb2Nlc3MuZW52LlBSSVZBQ1lfUE9MSUNZX1VSTFxuICAgICAgfVxuICAgICk7XG4gICAgY29uc29sZS5sb2coJyAg4pSc4pSAIOKchSBHRFBSIENvbXBsaWFuY2UgU2VydmljZSBpbml0aWFsaXplZCcpO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBBbGwgU2VjdXJpdHkgU2VydmljZXMgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XFxuJyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAga2V5TWFuYWdlbWVudCxcbiAgICAgIHNlY3JldHNNYW5hZ2VtZW50LFxuICAgICAgZ2RwckNvbXBsaWFuY2VcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBzZWN1cml0eSBzZXJ2aWNlczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXR1cCBzZWN1cml0eSBtaWRkbGV3YXJlIGZvciBFeHByZXNzIGFwcFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTZWN1cml0eU1pZGRsZXdhcmUoYXBwOiBhbnkpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+UkiBTZXR0aW5nIHVwIFNlY3VyaXR5IE1pZGRsZXdhcmUuLi4nKTtcblxuICAgIGNvbnN0IHtcbiAgICAgIGNvbmZpZ3VyZVNlY3VyaXR5SGVhZGVycyxcbiAgICAgIGNvbmZpZ3VyZVJhdGVMaW1pdGluZyxcbiAgICAgIGNvbmZpZ3VyZVNhbml0aXphdGlvbixcbiAgICAgIGNvbmZpZ3VyZUNPUlNcbiAgICB9ID0gcmVxdWlyZSgnLi9pbmRleCcpO1xuXG4gICAgLy8gQ29uZmlndXJlIENPUlNcbiAgICBjb25zb2xlLmxvZygnICDilJzilIAgQ29uZmlndXJpbmcgQ09SUy4uLicpO1xuICAgIGNvbmZpZ3VyZUNPUlMoYXBwKTtcbiAgICBjb25zb2xlLmxvZygnICDilJzilIAg4pyFIENPUlMgY29uZmlndXJlZCcpO1xuXG4gICAgLy8gQ29uZmlndXJlIFNlY3VyaXR5IEhlYWRlcnNcbiAgICBjb25zb2xlLmxvZygnICDilJzilIAgQ29uZmlndXJpbmcgU2VjdXJpdHkgSGVhZGVycy4uLicpO1xuICAgIGNvbmZpZ3VyZVNlY3VyaXR5SGVhZGVycyhhcHApO1xuICAgIGNvbnNvbGUubG9nKCcgIOKUnOKUgCDinIUgU2VjdXJpdHkgSGVhZGVycyBjb25maWd1cmVkJyk7XG5cbiAgICAvLyBDb25maWd1cmUgUmF0ZSBMaW1pdGluZ1xuICAgIGNvbnNvbGUubG9nKCcgIOKUnOKUgCBDb25maWd1cmluZyBSYXRlIExpbWl0aW5nLi4uJyk7XG4gICAgY29uZmlndXJlUmF0ZUxpbWl0aW5nKGFwcCk7XG4gICAgY29uc29sZS5sb2coJyAg4pSc4pSAIOKchSBSYXRlIExpbWl0aW5nIGNvbmZpZ3VyZWQnKTtcblxuICAgIC8vIENvbmZpZ3VyZSBEYXRhIFNhbml0aXphdGlvblxuICAgIGNvbnNvbGUubG9nKCcgIOKUnOKUgCBDb25maWd1cmluZyBEYXRhIFNhbml0aXphdGlvbi4uLicpO1xuICAgIGNvbmZpZ3VyZVNhbml0aXphdGlvbihhcHApO1xuICAgIGNvbnNvbGUubG9nKCcgIOKUnOKUgCDinIUgRGF0YSBTYW5pdGl6YXRpb24gY29uZmlndXJlZCcpO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBTZWN1cml0eSBNaWRkbGV3YXJlIHNldHVwIGNvbXBsZXRlXFxuJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBzZXR1cCBzZWN1cml0eSBtaWRkbGV3YXJlOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIE1pZ3JhdGUgc2VjcmV0cyBmcm9tIGVudmlyb25tZW50IHRvIHNlY3JldHMgbWFuYWdlbWVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlncmF0ZVNlY3JldHNGcm9tRW52aXJvbm1lbnQoXG4gIHNlY3JldHNNYW5hZ2VtZW50OiBhbnksXG4gIHNlY3JldE5hbWVzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CflIQgTWlncmF0aW5nIFNlY3JldHMgZnJvbSBFbnZpcm9ubWVudC4uLicpO1xuXG4gICAgZm9yIChjb25zdCBzZWNyZXROYW1lIG9mIHNlY3JldE5hbWVzKSB7XG4gICAgICBjb25zdCBzZWNyZXRWYWx1ZSA9IHByb2Nlc3MuZW52W3NlY3JldE5hbWVdO1xuICAgICAgaWYgKHNlY3JldFZhbHVlKSB7XG4gICAgICAgIGF3YWl0IHNlY3JldHNNYW5hZ2VtZW50LnN0b3JlU2VjcmV0KHNlY3JldE5hbWUsIHNlY3JldFZhbHVlLCB7XG4gICAgICAgICAgbWV0YWRhdGE6IHsgbWlncmF0ZWRBdDogbmV3IERhdGUoKSB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhgICDilJzilIAg4pyFIE1pZ3JhdGVkICR7c2VjcmV0TmFtZX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIFNlY3JldHMgbWlncmF0aW9uIGNvbXBsZXRlXFxuJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBtaWdyYXRlIHNlY3JldHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogR2VuZXJhdGUgZW5jcnlwdGlvbiBrZXlzIGZvciBzZXJ2aWNlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVFbmNyeXB0aW9uS2V5cyhcbiAga2V5TWFuYWdlbWVudDogYW55LFxuICBzZXJ2aWNlczogc3RyaW5nW11cbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SRIEdlbmVyYXRpbmcgRW5jcnlwdGlvbiBLZXlzLi4uJyk7XG5cbiAgICBmb3IgKGNvbnN0IHNlcnZpY2Ugb2Ygc2VydmljZXMpIHtcbiAgICAgIGNvbnN0IGtleUlkID0gYCR7c2VydmljZX0ta2V5YDtcbiAgICAgIGF3YWl0IGtleU1hbmFnZW1lbnQuZ2VuZXJhdGVLZXkoa2V5SWQsICdhZXMtMjU2LWdjbScpO1xuICAgICAgY29uc29sZS5sb2coYCAg4pSc4pSAIOKchSBHZW5lcmF0ZWQga2V5IGZvciAke3NlcnZpY2V9YCk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ+KchSBFbmNyeXB0aW9uIGtleXMgZ2VuZXJhdGlvbiBjb21wbGV0ZVxcbicpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gZ2VuZXJhdGUgZW5jcnlwdGlvbiBrZXlzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIFNldHVwIEdEUFIgY29tcGxpYW5jZSBkb2N1bWVudGF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXR1cEdEUFJEb2N1bWVudGF0aW9uKFxuICBnZHByQ29tcGxpYW5jZTogYW55XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+TiyBTZXR0aW5nIHVwIEdEUFIgRG9jdW1lbnRhdGlvbi4uLicpO1xuXG4gICAgLy8gQ3JlYXRlIERhdGEgUHJvY2Vzc2luZyBBZ3JlZW1lbnRcbiAgICBjb25zb2xlLmxvZygnICDilJzilIAgQ3JlYXRpbmcgRGF0YSBQcm9jZXNzaW5nIEFncmVlbWVudC4uLicpO1xuICAgIGF3YWl0IGdkcHJDb21wbGlhbmNlLmNyZWF0ZURQQShcbiAgICAgICdBem9yYSBPUycsXG4gICAgICAnRGF0YSBQcm9jZXNzb3JzJyxcbiAgICAgIHtcbiAgICAgICAgcHJvY2Vzc2luZ1B1cnBvc2U6ICdQcm92aWRlIGVkdWNhdGlvbmFsIGFuZCBmaW5hbmNpYWwgc2VydmljZXMnLFxuICAgICAgICBkYXRhQ2F0ZWdvcmllczogW1xuICAgICAgICAgICdQZXJzb25hbCBJZGVudGlmaWNhdGlvbiBEYXRhJyxcbiAgICAgICAgICAnQ29udGFjdCBJbmZvcm1hdGlvbicsXG4gICAgICAgICAgJ0VkdWNhdGlvbmFsIFJlY29yZHMnLFxuICAgICAgICAgICdGaW5hbmNpYWwgSW5mb3JtYXRpb24nXG4gICAgICAgIF0sXG4gICAgICAgIHJlY2lwaWVudHM6IFsnSW50ZXJuYWwgU2VydmljZXMnLCAnVGhpcmQtcGFydHkgUHJvY2Vzc29ycyddLFxuICAgICAgICByZXRlbnRpb25QZXJpb2Q6IDM2NVxuICAgICAgfVxuICAgICk7XG4gICAgY29uc29sZS5sb2coJyAg4pSc4pSAIOKchSBEYXRhIFByb2Nlc3NpbmcgQWdyZWVtZW50IGNyZWF0ZWQnKTtcblxuICAgIC8vIENyZWF0ZSBQcml2YWN5IEltcGFjdCBBc3Nlc3NtZW50XG4gICAgY29uc29sZS5sb2coJyAg4pSc4pSAIENyZWF0aW5nIFByaXZhY3kgSW1wYWN0IEFzc2Vzc21lbnQuLi4nKTtcbiAgICBhd2FpdCBnZHByQ29tcGxpYW5jZS5jcmVhdGVQSUEoXG4gICAgICAnVXNlciBEYXRhIFByb2Nlc3NpbmcnLFxuICAgICAge1xuICAgICAgICBkZXNjcmlwdGlvbjogJ0Fzc2Vzc21lbnQgb2YgdXNlciBkYXRhIHByb2Nlc3NpbmcgYWN0aXZpdGllcycsXG4gICAgICAgIGRhdGFDYXRlZ29yaWVzOiBbXG4gICAgICAgICAgJ1BlcnNvbmFsIElkZW50aWZpY2F0aW9uIERhdGEnLFxuICAgICAgICAgICdDb250YWN0IEluZm9ybWF0aW9uJyxcbiAgICAgICAgICAnRWR1Y2F0aW9uYWwgUmVjb3JkcydcbiAgICAgICAgXSxcbiAgICAgICAgcmlza0xldmVsOiAnbWVkaXVtJyxcbiAgICAgICAgbWl0aWdhdGlvbk1lYXN1cmVzOiBbXG4gICAgICAgICAgJ0VuY3J5cHRpb24gYXQgcmVzdCBhbmQgaW4gdHJhbnNpdCcsXG4gICAgICAgICAgJ0FjY2VzcyBjb250cm9sIGFuZCBhdXRoZW50aWNhdGlvbicsXG4gICAgICAgICAgJ1JlZ3VsYXIgc2VjdXJpdHkgYXVkaXRzJyxcbiAgICAgICAgICAnRGF0YSBtaW5pbWl6YXRpb24gcHJhY3RpY2VzJ1xuICAgICAgICBdXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zb2xlLmxvZygnICDilJzilIAg4pyFIFByaXZhY3kgSW1wYWN0IEFzc2Vzc21lbnQgY3JlYXRlZCcpO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBHRFBSIGRvY3VtZW50YXRpb24gc2V0dXAgY29tcGxldGVcXG4nKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIHNldHVwIEdEUFIgZG9jdW1lbnRhdGlvbjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21wbGV0ZSBQaGFzZSAxIHNlY3VyaXR5IGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbXBsZW1lbnRQaGFzZTFTZWN1cml0eShhcHA6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdcXG7wn5qAIFN0YXJ0aW5nIFBoYXNlIDE6IFNlY3VyaXR5ICYgQ29tcGxpYW5jZSBJbXBsZW1lbnRhdGlvblxcbicpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBzZWN1cml0eSBzZXJ2aWNlc1xuICAgIGNvbnN0IHNlcnZpY2VzID0gYXdhaXQgaW5pdGlhbGl6ZVNlY3VyaXR5U2VydmljZXMoe30pO1xuXG4gICAgLy8gU2V0dXAgc2VjdXJpdHkgbWlkZGxld2FyZVxuICAgIHNldHVwU2VjdXJpdHlNaWRkbGV3YXJlKGFwcCk7XG5cbiAgICAvLyBHZW5lcmF0ZSBlbmNyeXB0aW9uIGtleXNcbiAgICBhd2FpdCBnZW5lcmF0ZUVuY3J5cHRpb25LZXlzKHNlcnZpY2VzLmtleU1hbmFnZW1lbnQsIFtcbiAgICAgICdhdXRoLXNlcnZpY2UnLFxuICAgICAgJ2FwaS1nYXRld2F5JyxcbiAgICAgICdkYXRhYmFzZScsXG4gICAgICAnY2FjaGUnXG4gICAgXSk7XG5cbiAgICAvLyBNaWdyYXRlIHNlY3JldHMgZnJvbSBlbnZpcm9ubWVudFxuICAgIGF3YWl0IG1pZ3JhdGVTZWNyZXRzRnJvbUVudmlyb25tZW50KHNlcnZpY2VzLnNlY3JldHNNYW5hZ2VtZW50LCBbXG4gICAgICAnSldUX1NFQ1JFVCcsXG4gICAgICAnREFUQUJBU0VfVVJMJyxcbiAgICAgICdSRURJU19VUkwnLFxuICAgICAgJ0FQSV9LRVknLFxuICAgICAgJ0VOQ1JZUFRJT05fS0VZJ1xuICAgIF0pO1xuXG4gICAgLy8gU2V0dXAgR0RQUiBkb2N1bWVudGF0aW9uXG4gICAgYXdhaXQgc2V0dXBHRFBSRG9jdW1lbnRhdGlvbihzZXJ2aWNlcy5nZHByQ29tcGxpYW5jZSk7XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIFBoYXNlIDEgU2VjdXJpdHkgJiBDb21wbGlhbmNlIEltcGxlbWVudGF0aW9uIENvbXBsZXRlIVxcbicpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OKIFN1bW1hcnk6Jyk7XG4gICAgY29uc29sZS5sb2coJyAg4pyFIEtleSBNYW5hZ2VtZW50IFNlcnZpY2UgaW5pdGlhbGl6ZWQnKTtcbiAgICBjb25zb2xlLmxvZygnICDinIUgU2VjcmV0cyBNYW5hZ2VtZW50IFNlcnZpY2UgaW5pdGlhbGl6ZWQnKTtcbiAgICBjb25zb2xlLmxvZygnICDinIUgR0RQUiBDb21wbGlhbmNlIFNlcnZpY2UgaW5pdGlhbGl6ZWQnKTtcbiAgICBjb25zb2xlLmxvZygnICDinIUgU2VjdXJpdHkgTWlkZGxld2FyZSBjb25maWd1cmVkJyk7XG4gICAgY29uc29sZS5sb2coJyAg4pyFIEVuY3J5cHRpb24ga2V5cyBnZW5lcmF0ZWQnKTtcbiAgICBjb25zb2xlLmxvZygnICDinIUgU2VjcmV0cyBtaWdyYXRlZCBmcm9tIGVudmlyb25tZW50Jyk7XG4gICAgY29uc29sZS5sb2coJyAg4pyFIEdEUFIgZG9jdW1lbnRhdGlvbiBjcmVhdGVkXFxuJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFBoYXNlIDEgaW1wbGVtZW50YXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGluaXRpYWxpemVTZWN1cml0eVNlcnZpY2VzLFxuICBzZXR1cFNlY3VyaXR5TWlkZGxld2FyZSxcbiAgbWlncmF0ZVNlY3JldHNGcm9tRW52aXJvbm1lbnQsXG4gIGdlbmVyYXRlRW5jcnlwdGlvbktleXMsXG4gIHNldHVwR0RQUkRvY3VtZW50YXRpb24sXG4gIGltcGxlbWVudFBoYXNlMVNlY3VyaXR5XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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