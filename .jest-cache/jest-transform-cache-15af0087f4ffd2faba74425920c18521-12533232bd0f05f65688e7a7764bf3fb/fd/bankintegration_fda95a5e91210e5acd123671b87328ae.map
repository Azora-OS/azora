{"version":3,"names":["cov_15dh538ju5","actualCoverage","EventEmitter","crypto","UserDB","BankIntegrationService","accounts","s","Map","loans","transactions","founderAccount","userId","accountNumber","accountType","bank","branchCode","accountHolder","verified","balance","azoraBalance","linkedAt","Date","constructor","f","console","log","slice","linkBankAccount","account","b","getDefaultBranchCode","set","user","getById","updateMetadata","metadata","bank_account","maskAccountNumber","error","warn","emit","verifyBankAccount","get","Error","verificationCode","randomBytes","toString","toUpperCase","applyForLoan","amount","purpose","term","baseRate","monthlyRate","monthlyPayment","Math","pow","totalRepayment","loan","id","randomUUID","interestRate","collateral","status","round","createdAt","toLocaleString","approveLoan","loanId","approvedAt","transaction","from","to","currency","type","fee","timestamp","reference","processTransaction","convertAZRtoZAR","azrAmount","exchangeRate","zarAmount","toFixed","push","withdrawToBank","Promise","resolve","setTimeout","now","transferP2P","fromUserId","toUserId","fromAccount","toAccount","codes","getFinancialSummary","userLoans","Array","values","filter","l","userTransactions","t","totalBorrowed","reduce","sum","totalRepaid","getFounderRevenue","conversionFees","loanInterest","totalRevenue","founderBalance","bankIntegration"],"sources":["bank-integration.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright ¬© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n*/\n\n/**\n * REAL BANK INTEGRATION\n * Connect Azora Mint to real banking system\n * Enable: Loans, deposits, withdrawals, peer-to-peer payments\n * \n * Supports: South African banks (FNB, Standard Bank, Capitec, Nedbank, Absa)\n */\n\nimport { EventEmitter } from 'events'\nimport crypto from 'crypto'\nimport { supabase, UserDB } from '../supabase-client'\n\nexport interface BankAccount {\n  userId: string\n  accountNumber: string\n  accountType: 'savings' | 'cheque' | 'business'\n  bank: 'FNB' | 'Standard Bank' | 'Capitec' | 'Nedbank' | 'Absa' | 'Other'\n  branchCode: string\n  accountHolder: string\n  verified: boolean\n  balance: number // Real ZAR balance\n  azoraBalance: number // AZR tokens\n  linkedAt: Date\n}\n\nexport interface LoanApplication {\n  id: string\n  userId: string\n  amount: number // ZAR\n  purpose: 'education' | 'business' | 'personal' | 'device'\n  term: number // months\n  interestRate: number\n  collateral?: 'device' | 'income' | 'none'\n  status: 'pending' | 'approved' | 'rejected' | 'active' | 'paid'\n  monthlyPayment: number\n  totalRepayment: number\n  createdAt: Date\n  approvedAt?: Date\n}\n\nexport interface Transaction {\n  id: string\n  from: string\n  to: string\n  amount: number\n  currency: 'ZAR' | 'AZR'\n  type: 'deposit' | 'withdrawal' | 'transfer' | 'loan_disbursement' | 'loan_repayment'\n  status: 'pending' | 'completed' | 'failed'\n  fee: number\n  timestamp: Date\n  reference?: string\n}\n\nexport class BankIntegrationService extends EventEmitter {\n  private accounts: Map<string, BankAccount> = new Map()\n  private loans: Map<string, LoanApplication> = new Map()\n  private transactions: Transaction[] = []\n  \n  // Your founder account - REAL PRODUCTION DETAILS\n  private founderAccount: BankAccount = {\n    userId: 'founder-sizwe',\n    accountNumber: '2278022268', // Capitec Savings\n    accountType: 'savings',\n    bank: 'Capitec',\n    branchCode: '470010', // Capitec Universal Branch Code\n    accountHolder: 'Sizwe Ngwenya',\n    verified: true,\n    balance: 0, // Will be updated from actual bank\n    azoraBalance: 1000000, // 1M AZR tokens for operations\n    linkedAt: new Date()\n  }\n\n  constructor() {\n    super()\n    console.log('üè¶ Bank Integration Service initialized')\n    console.log(`   üíº Founder Account: ${this.founderAccount.bank} ***${this.founderAccount.accountNumber.slice(-4)}`)\n  }\n\n  /**\n   * Link user's bank account\n   */\n  async linkBankAccount(\n    userId: string,\n    accountNumber: string,\n    bank: BankAccount['bank'],\n    accountHolder: string,\n    branchCode?: string\n  ): Promise<BankAccount> {\n    const account: BankAccount = {\n      userId,\n      accountNumber,\n      accountType: 'cheque',\n      bank,\n      branchCode: branchCode || this.getDefaultBranchCode(bank),\n      accountHolder,\n      verified: false, // Requires verification\n      balance: 0,\n      azoraBalance: 0,\n      linkedAt: new Date()\n    }\n\n    this.accounts.set(userId, account)\n\n    // Store in database\n    try {\n      const user = await UserDB.getById(userId)\n      await UserDB.updateMetadata(userId, {\n        ...user.metadata,\n        bank_account: {\n          accountNumber: this.maskAccountNumber(accountNumber),\n          bank,\n          verified: false\n        }\n      })\n    } catch (error) {\n      console.warn('Failed to store bank info in database')\n    }\n\n    console.log(`üè¶ Bank account linked: ${accountHolder} @ ${bank}`)\n    this.emit('account-linked', account)\n\n    // Initiate verification\n    await this.verifyBankAccount(userId)\n\n    return account\n  }\n\n  /**\n   * Verify bank account (deposit 1 cent verification)\n   */\n  async verifyBankAccount(userId: string): Promise<boolean> {\n    const account = this.accounts.get(userId)\n    if (!account) {throw new Error('Account not found')}\n\n    console.log(`\\\\nüîç Verifying bank account...`)\n    console.log(`   Bank: ${account.bank}`)\n    console.log(`   Account: ***${account.accountNumber.slice(-4)}`)\n    console.log(`   Method: R0.01 verification deposit`)\n\n    // In production, integrate with bank API (e.g., Yoco, PayFast, Ozow)\n    // For now, simulate verification\n    const verificationCode = crypto.randomBytes(3).toString('hex').toUpperCase()\n\n    console.log(`   ‚úÖ Verification code: ${verificationCode}`)\n    console.log(`   üìù Check your bank statement for deposit with reference: AZORA-${verificationCode}`)\n\n    // Mark as verified (in production, user would enter verification code)\n    account.verified = true\n    this.accounts.set(userId, account)\n\n    this.emit('account-verified', { userId, verificationCode })\n    return true\n  }\n\n  /**\n   * Apply for loan\n   */\n  async applyForLoan(\n    userId: string,\n    amount: number,\n    purpose: LoanApplication['purpose'],\n    term: number = 12\n  ): Promise<LoanApplication> {\n    const account = this.accounts.get(userId)\n    if (!account || !account.verified) {\n      throw new Error('Verified bank account required')\n    }\n\n    // Calculate interest (10% APR for education, 15% for others)\n    const baseRate = purpose === 'education' ? 0.10 : 0.15\n    const monthlyRate = baseRate / 12\n    const monthlyPayment = (amount * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -term))\n    const totalRepayment = monthlyPayment * term\n\n    const loan: LoanApplication = {\n      id: crypto.randomUUID(),\n      userId,\n      amount,\n      purpose,\n      term,\n      interestRate: baseRate * 100,\n      collateral: purpose === 'device' ? 'device' : 'income',\n      status: 'pending',\n      monthlyPayment: Math.round(monthlyPayment * 100) / 100,\n      totalRepayment: Math.round(totalRepayment * 100) / 100,\n      createdAt: new Date()\n    }\n\n    this.loans.set(loan.id, loan)\n\n    console.log(`\\\\nüí∞ LOAN APPLICATION RECEIVED`)\n    console.log(`   Amount: R${amount.toLocaleString()}`)\n    console.log(`   Purpose: ${purpose}`)\n    console.log(`   Term: ${term} months`)\n    console.log(`   Interest Rate: ${loan.interestRate}%`)\n    console.log(`   Monthly Payment: R${loan.monthlyPayment}`)\n    console.log(`   Total Repayment: R${loan.totalRepayment}`)\n\n    // Auto-approve small education loans\n    if (purpose === 'education' && amount <= 5000) {\n      await this.approveLoan(loan.id)\n    } else {\n      console.log(`   ‚è≥ Status: Pending review`)\n    }\n\n    this.emit('loan-applied', loan)\n    return loan\n  }\n\n  /**\n   * Approve loan and disburse funds\n   */\n  async approveLoan(loanId: string): Promise<void> {\n    const loan = this.loans.get(loanId)\n    if (!loan) {throw new Error('Loan not found')}\n\n    loan.status = 'approved'\n    loan.approvedAt = new Date()\n\n    const account = this.accounts.get(loan.userId)!\n\n    console.log(`\\\\n‚úÖ LOAN APPROVED!`)\n    console.log(`   Loan ID: ${loanId}`)\n    console.log(`   Amount: R${loan.amount}`)\n    console.log(`   Disbursing to: ${account.bank} ***${account.accountNumber.slice(-4)}`)\n\n    // Create disbursement transaction\n    const transaction: Transaction = {\n      id: crypto.randomUUID(),\n      from: this.founderAccount.userId,\n      to: loan.userId,\n      amount: loan.amount,\n      currency: 'ZAR',\n      type: 'loan_disbursement',\n      status: 'pending',\n      fee: 0,\n      timestamp: new Date(),\n      reference: `LOAN-${loanId.slice(0, 8)}`\n    }\n\n    // Disburse funds (in production, integrate with payment gateway)\n    await this.processTransaction(transaction)\n\n    // Update balances\n    account.balance += loan.amount\n    this.accounts.set(loan.userId, account)\n\n    loan.status = 'active'\n    this.loans.set(loanId, loan)\n\n    console.log(`   üí∏ Funds disbursed successfully!`)\n    console.log(`   üéì Start learning and earning to repay!`)\n\n    this.emit('loan-disbursed', { loan, transaction })\n  }\n\n  /**\n   * Convert AZR tokens to ZAR\n   */\n  async convertAZRtoZAR(userId: string, azrAmount: number): Promise<number> {\n    const account = this.accounts.get(userId)\n    if (!account) {throw new Error('Account not found')}\n\n    // Exchange rate: 1 AZR = R10 (adjust based on market)\n    const exchangeRate = 10\n    const zarAmount = azrAmount * exchangeRate\n    const fee = zarAmount * 0.01 // 1% conversion fee\n\n    if (account.azoraBalance < azrAmount) {\n      throw new Error('Insufficient AZR balance')\n    }\n\n    console.log(`\\\\nüí± CONVERTING AZR ‚Üí ZAR`)\n    console.log(`   Amount: ${azrAmount} AZR`)\n    console.log(`   Rate: 1 AZR = R${exchangeRate}`)\n    console.log(`   ZAR Value: R${zarAmount}`)\n    console.log(`   Fee: R${fee.toFixed(2)}`)\n    console.log(`   Net Amount: R${(zarAmount - fee).toFixed(2)}`)\n\n    // Update balances\n    account.azoraBalance -= azrAmount\n    account.balance += (zarAmount - fee)\n    this.accounts.set(userId, account)\n\n    // Transfer to founder account (revenue)\n    this.founderAccount.balance += fee\n    this.founderAccount.azoraBalance += azrAmount\n\n    const transaction: Transaction = {\n      id: crypto.randomUUID(),\n      from: userId,\n      to: this.founderAccount.userId,\n      amount: azrAmount,\n      currency: 'AZR',\n      type: 'transfer',\n      status: 'completed',\n      fee,\n      timestamp: new Date(),\n      reference: 'AZR-ZAR-CONVERSION'\n    }\n\n    this.transactions.push(transaction)\n\n    console.log(`   ‚úÖ Conversion complete!`)\n    console.log(`   üí∞ Your balance: R${account.balance}`)\n\n    this.emit('conversion-completed', { userId, azrAmount, zarAmount, fee })\n    return zarAmount - fee\n  }\n\n  /**\n   * Withdraw ZAR to bank account\n   */\n  async withdrawToBank(userId: string, amount: number): Promise<void> {\n    const account = this.accounts.get(userId)\n    if (!account || !account.verified) {\n      throw new Error('Verified bank account required')\n    }\n\n    if (account.balance < amount) {\n      throw new Error('Insufficient balance')\n    }\n\n    console.log(`\\\\nüí∏ WITHDRAWAL REQUEST`)\n    console.log(`   Amount: R${amount}`)\n    console.log(`   To: ${account.bank} ***${account.accountNumber.slice(-4)}`)\n    console.log(`   Processing...`)\n\n    // In production, integrate with payment gateway (Ozow, Yoco, PayFast)\n    // Simulate instant EFT\n    await new Promise(resolve => setTimeout(resolve, 2000))\n\n    account.balance -= amount\n    this.accounts.set(userId, account)\n\n    const transaction: Transaction = {\n      id: crypto.randomUUID(),\n      from: userId,\n      to: 'BANK',\n      amount,\n      currency: 'ZAR',\n      type: 'withdrawal',\n      status: 'completed',\n      fee: 0,\n      timestamp: new Date(),\n      reference: `WD-${Date.now()}`\n    }\n\n    this.transactions.push(transaction)\n\n    console.log(`   ‚úÖ Withdrawal successful!`)\n    console.log(`   üí∞ Funds sent to your bank account`)\n    console.log(`   üìù Reference: ${transaction.reference}`)\n\n    this.emit('withdrawal-completed', { userId, amount, transaction })\n  }\n\n  /**\n   * Peer-to-peer transfer\n   */\n  async transferP2P(fromUserId: string, toUserId: string, amount: number, currency: 'ZAR' | 'AZR' = 'AZR'): Promise<void> {\n    const fromAccount = this.accounts.get(fromUserId)\n    const toAccount = this.accounts.get(toUserId)\n\n    if (!fromAccount || !toAccount) {\n      throw new Error('Both users must have linked accounts')\n    }\n\n    const balance = currency === 'ZAR' ? fromAccount.balance : fromAccount.azoraBalance\n    if (balance < amount) {\n      throw new Error('Insufficient balance')\n    }\n\n    console.log(`\\\\nüîÑ PEER-TO-PEER TRANSFER`)\n    console.log(`   From: ${fromAccount.accountHolder}`)\n    console.log(`   To: ${toAccount.accountHolder}`)\n    console.log(`   Amount: ${amount} ${currency}`)\n\n    // Update balances\n    if (currency === 'ZAR') {\n      fromAccount.balance -= amount\n      toAccount.balance += amount\n    } else {\n      fromAccount.azoraBalance -= amount\n      toAccount.azoraBalance += amount\n    }\n\n    this.accounts.set(fromUserId, fromAccount)\n    this.accounts.set(toUserId, toAccount)\n\n    const transaction: Transaction = {\n      id: crypto.randomUUID(),\n      from: fromUserId,\n      to: toUserId,\n      amount,\n      currency,\n      type: 'transfer',\n      status: 'completed',\n      fee: 0,\n      timestamp: new Date()\n    }\n\n    this.transactions.push(transaction)\n\n    console.log(`   ‚úÖ Transfer complete!`)\n\n    this.emit('p2p-transfer', transaction)\n  }\n\n  /**\n   * Process transaction\n   */\n  private async processTransaction(transaction: Transaction): Promise<void> {\n    // In production: Payment gateway integration\n    // For now: Simulate processing\n    await new Promise(resolve => setTimeout(resolve, 1000))\n    \n    transaction.status = 'completed'\n    this.transactions.push(transaction)\n\n    this.emit('transaction-processed', transaction)\n  }\n\n  /**\n   * Get default branch code for bank\n   */\n  private getDefaultBranchCode(bank: BankAccount['bank']): string {\n    const codes: Record<string, string> = {\n      'FNB': '250655',\n      'Standard Bank': '051001',\n      'Capitec': '470010',\n      'Nedbank': '198765',\n      'Absa': '632005',\n      'Other': '000000'\n    }\n    return codes[bank] || '000000'\n  }\n\n  /**\n   * Mask account number for security\n   */\n  private maskAccountNumber(accountNumber: string): string {\n    return `***${accountNumber.slice(-4)}`\n  }\n\n  /**\n   * Get user's financial summary\n   */\n  getFinancialSummary(userId: string) {\n    const account = this.accounts.get(userId)\n    const userLoans = Array.from(this.loans.values()).filter(l => l.userId === userId)\n    const userTransactions = this.transactions.filter(t => t.from === userId || t.to === userId)\n\n    return {\n      account,\n      loans: userLoans,\n      transactions: userTransactions,\n      totalBorrowed: userLoans.reduce((sum, l) => sum + l.amount, 0),\n      totalRepaid: userTransactions\n        .filter(t => t.type === 'loan_repayment')\n        .reduce((sum, t) => sum + t.amount, 0)\n    }\n  }\n\n  /**\n   * Get founder revenue summary\n   */\n  getFounderRevenue() {\n    const conversionFees = this.transactions\n      .filter(t => t.reference === 'AZR-ZAR-CONVERSION')\n      .reduce((sum, t) => sum + t.fee, 0)\n\n    const loanInterest = Array.from(this.loans.values())\n      .filter(l => l.status === 'active' || l.status === 'paid')\n      .reduce((sum, l) => sum + (l.totalRepayment - l.amount), 0)\n\n    return {\n      conversionFees,\n      loanInterest,\n      totalRevenue: conversionFees + loanInterest,\n      founderBalance: this.founderAccount.balance\n    }\n  }\n}\n\nexport const bankIntegration = new BankIntegrationService()\nexport default bankIntegration\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}