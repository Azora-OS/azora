791e693bccff33bbf5216abbfdadfe60
/* istanbul ignore next */
function cov_193j0vqjdt() {
  var path = "/workspaces/azora/services/azora-cloud/azora-mint/stripe-integration.ts";
  var hash = "15f4f153dd4b4bf706384a79c8d94adc4df4ef77";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-cloud/azora-mint/stripe-integration.ts",
    statementMap: {
      "0": {
        start: {
          line: 5,
          column: 15
        },
        end: {
          line: 7,
          column: 2
        }
      },
      "1": {
        start: {
          line: 12,
          column: 4
        },
        end: {
          line: 40,
          column: 5
        }
      },
      "2": {
        start: {
          line: 13,
          column: 28
        },
        end: {
          line: 17,
          column: 8
        }
      },
      "3": {
        start: {
          line: 20,
          column: 6
        },
        end: {
          line: 31,
          column: 8
        }
      },
      "4": {
        start: {
          line: 33,
          column: 6
        },
        end: {
          line: 36,
          column: 7
        }
      },
      "5": {
        start: {
          line: 38,
          column: 6
        },
        end: {
          line: 38,
          column: 79
        }
      },
      "6": {
        start: {
          line: 39,
          column: 6
        },
        end: {
          line: 39,
          column: 17
        }
      },
      "7": {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 65,
          column: 5
        }
      },
      "8": {
        start: {
          line: 46,
          column: 20
        },
        end: {
          line: 50,
          column: 7
        }
      },
      "9": {
        start: {
          line: 52,
          column: 6
        },
        end: {
          line: 59,
          column: 7
        }
      },
      "10": {
        start: {
          line: 54,
          column: 10
        },
        end: {
          line: 54,
          column: 60
        }
      },
      "11": {
        start: {
          line: 55,
          column: 10
        },
        end: {
          line: 55,
          column: 15
        }
      },
      "12": {
        start: {
          line: 57,
          column: 10
        },
        end: {
          line: 57,
          column: 60
        }
      },
      "13": {
        start: {
          line: 58,
          column: 10
        },
        end: {
          line: 58,
          column: 15
        }
      },
      "14": {
        start: {
          line: 61,
          column: 6
        },
        end: {
          line: 61,
          column: 31
        }
      },
      "15": {
        start: {
          line: 63,
          column: 6
        },
        end: {
          line: 63,
          column: 56
        }
      },
      "16": {
        start: {
          line: 64,
          column: 6
        },
        end: {
          line: 64,
          column: 17
        }
      },
      "17": {
        start: {
          line: 69,
          column: 4
        },
        end: {
          line: 72,
          column: 6
        }
      },
      "18": {
        start: {
          line: 75,
          column: 19
        },
        end: {
          line: 75,
          column: 48
        }
      },
      "19": {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 85,
          column: 5
        }
      },
      "20": {
        start: {
          line: 77,
          column: 6
        },
        end: {
          line: 84,
          column: 8
        }
      },
      "21": {
        start: {
          line: 89,
          column: 4
        },
        end: {
          line: 92,
          column: 6
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 11,
            column: 2
          },
          end: {
            line: 11,
            column: 3
          }
        },
        loc: {
          start: {
            line: 11,
            column: 78
          },
          end: {
            line: 41,
            column: 3
          }
        },
        line: 11
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 44,
            column: 2
          },
          end: {
            line: 44,
            column: 3
          }
        },
        loc: {
          start: {
            line: 44,
            column: 55
          },
          end: {
            line: 66,
            column: 3
          }
        },
        line: 44
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 68,
            column: 2
          },
          end: {
            line: 68,
            column: 3
          }
        },
        loc: {
          start: {
            line: 68,
            column: 74
          },
          end: {
            line: 86,
            column: 3
          }
        },
        line: 68
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 88,
            column: 2
          },
          end: {
            line: 88,
            column: 3
          }
        },
        loc: {
          start: {
            line: 88,
            column: 74
          },
          end: {
            line: 93,
            column: 3
          }
        },
        line: 88
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 52,
            column: 6
          },
          end: {
            line: 59,
            column: 7
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 53,
            column: 8
          },
          end: {
            line: 55,
            column: 15
          }
        }, {
          start: {
            line: 56,
            column: 8
          },
          end: {
            line: 58,
            column: 15
          }
        }],
        line: 52
      },
      "1": {
        loc: {
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 85,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 85,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 76
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "15f4f153dd4b4bf706384a79c8d94adc4df4ef77"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_193j0vqjdt = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_193j0vqjdt();
import Stripe from 'stripe';
import { prisma } from '../../infrastructure/database/prisma-config';
import { logger } from '../../infrastructure/monitoring/logger';
const stripe =
/* istanbul ignore next */
(cov_193j0vqjdt().s[0]++, new Stripe(process.env.STRIPE_SECRET_KEY, {
  apiVersion: '2023-10-16'
}));
export class StripePaymentProcessor {
  // Create payment intent
  async createPaymentIntent(amount, currency, userId) {
    /* istanbul ignore next */
    cov_193j0vqjdt().f[0]++;
    cov_193j0vqjdt().s[1]++;
    try {
      const paymentIntent =
      /* istanbul ignore next */
      (cov_193j0vqjdt().s[2]++, await stripe.paymentIntents.create({
        amount: Math.round(amount * 100),
        // Convert to cents
        currency: currency.toLowerCase(),
        metadata: {
          userId
        }
      }));

      // Store in database
      /* istanbul ignore next */
      cov_193j0vqjdt().s[3]++;
      await prisma.transaction.create({
        data: {
          type: 'PAYMENT',
          status: 'PENDING',
          amount,
          coinType: currency,
          usdEquivalent: amount,
          hash: paymentIntent.id,
          externalTxnId: paymentIntent.id,
          senderId: userId
        }
      });
      /* istanbul ignore next */
      cov_193j0vqjdt().s[4]++;
      return {
        clientSecret: paymentIntent.client_secret,
        paymentIntentId: paymentIntent.id
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_193j0vqjdt().s[5]++;
      logger.error('Payment intent creation failed', {
        error,
        userId,
        amount
      });
      /* istanbul ignore next */
      cov_193j0vqjdt().s[6]++;
      throw error;
    }
  }

  // Handle webhook events
  async handleWebhook(body, signature) {
    /* istanbul ignore next */
    cov_193j0vqjdt().f[1]++;
    cov_193j0vqjdt().s[7]++;
    try {
      const event =
      /* istanbul ignore next */
      (cov_193j0vqjdt().s[8]++, stripe.webhooks.constructEvent(body, signature, process.env.STRIPE_WEBHOOK_SECRET));
      /* istanbul ignore next */
      cov_193j0vqjdt().s[9]++;
      switch (event.type) {
        case 'payment_intent.succeeded':
          /* istanbul ignore next */
          cov_193j0vqjdt().b[0][0]++;
          cov_193j0vqjdt().s[10]++;
          await this.handlePaymentSuccess(event.data.object);
          /* istanbul ignore next */
          cov_193j0vqjdt().s[11]++;
          break;
        case 'payment_intent.payment_failed':
          /* istanbul ignore next */
          cov_193j0vqjdt().b[0][1]++;
          cov_193j0vqjdt().s[12]++;
          await this.handlePaymentFailure(event.data.object);
          /* istanbul ignore next */
          cov_193j0vqjdt().s[13]++;
          break;
      }
      /* istanbul ignore next */
      cov_193j0vqjdt().s[14]++;
      return {
        received: true
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_193j0vqjdt().s[15]++;
      logger.error('Webhook handling failed', {
        error
      });
      /* istanbul ignore next */
      cov_193j0vqjdt().s[16]++;
      throw error;
    }
  }
  async handlePaymentSuccess(paymentIntent) {
    /* istanbul ignore next */
    cov_193j0vqjdt().f[2]++;
    cov_193j0vqjdt().s[17]++;
    await prisma.transaction.updateMany({
      where: {
        externalTxnId: paymentIntent.id
      },
      data: {
        status: 'COMPLETED'
      }
    });

    // Update user wallet
    const userId =
    /* istanbul ignore next */
    (cov_193j0vqjdt().s[18]++, paymentIntent.metadata.userId);
    /* istanbul ignore next */
    cov_193j0vqjdt().s[19]++;
    if (userId) {
      /* istanbul ignore next */
      cov_193j0vqjdt().b[1][0]++;
      cov_193j0vqjdt().s[20]++;
      await prisma.wallet.update({
        where: {
          userId
        },
        data: {
          balance: {
            increment: paymentIntent.amount / 100
          }
        }
      });
    } else
    /* istanbul ignore next */
    {
      cov_193j0vqjdt().b[1][1]++;
    }
  }
  async handlePaymentFailure(paymentIntent) {
    /* istanbul ignore next */
    cov_193j0vqjdt().f[3]++;
    cov_193j0vqjdt().s[21]++;
    await prisma.transaction.updateMany({
      where: {
        externalTxnId: paymentIntent.id
      },
      data: {
        status: 'FAILED'
      }
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTkzajB2cWpkdCIsImFjdHVhbENvdmVyYWdlIiwiU3RyaXBlIiwicHJpc21hIiwibG9nZ2VyIiwic3RyaXBlIiwicyIsInByb2Nlc3MiLCJlbnYiLCJTVFJJUEVfU0VDUkVUX0tFWSIsImFwaVZlcnNpb24iLCJTdHJpcGVQYXltZW50UHJvY2Vzc29yIiwiY3JlYXRlUGF5bWVudEludGVudCIsImFtb3VudCIsImN1cnJlbmN5IiwidXNlcklkIiwiZiIsInBheW1lbnRJbnRlbnQiLCJwYXltZW50SW50ZW50cyIsImNyZWF0ZSIsIk1hdGgiLCJyb3VuZCIsInRvTG93ZXJDYXNlIiwibWV0YWRhdGEiLCJ0cmFuc2FjdGlvbiIsImRhdGEiLCJ0eXBlIiwic3RhdHVzIiwiY29pblR5cGUiLCJ1c2RFcXVpdmFsZW50IiwiaGFzaCIsImlkIiwiZXh0ZXJuYWxUeG5JZCIsInNlbmRlcklkIiwiY2xpZW50U2VjcmV0IiwiY2xpZW50X3NlY3JldCIsInBheW1lbnRJbnRlbnRJZCIsImVycm9yIiwiaGFuZGxlV2ViaG9vayIsImJvZHkiLCJzaWduYXR1cmUiLCJldmVudCIsIndlYmhvb2tzIiwiY29uc3RydWN0RXZlbnQiLCJTVFJJUEVfV0VCSE9PS19TRUNSRVQiLCJiIiwiaGFuZGxlUGF5bWVudFN1Y2Nlc3MiLCJvYmplY3QiLCJoYW5kbGVQYXltZW50RmFpbHVyZSIsInJlY2VpdmVkIiwidXBkYXRlTWFueSIsIndoZXJlIiwid2FsbGV0IiwidXBkYXRlIiwiYmFsYW5jZSIsImluY3JlbWVudCJdLCJzb3VyY2VzIjpbInN0cmlwZS1pbnRlZ3JhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RyaXBlIGZyb20gJ3N0cmlwZSdcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4uLy4uL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL3ByaXNtYS1jb25maWcnXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi8uLi9pbmZyYXN0cnVjdHVyZS9tb25pdG9yaW5nL2xvZ2dlcidcblxuY29uc3Qgc3RyaXBlID0gbmV3IFN0cmlwZShwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSEsIHtcbiAgYXBpVmVyc2lvbjogJzIwMjMtMTAtMTYnXG59KVxuXG5leHBvcnQgY2xhc3MgU3RyaXBlUGF5bWVudFByb2Nlc3NvciB7XG4gIC8vIENyZWF0ZSBwYXltZW50IGludGVudFxuICBhc3luYyBjcmVhdGVQYXltZW50SW50ZW50KGFtb3VudDogbnVtYmVyLCBjdXJyZW5jeTogc3RyaW5nLCB1c2VySWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXltZW50SW50ZW50ID0gYXdhaXQgc3RyaXBlLnBheW1lbnRJbnRlbnRzLmNyZWF0ZSh7XG4gICAgICAgIGFtb3VudDogTWF0aC5yb3VuZChhbW91bnQgKiAxMDApLCAvLyBDb252ZXJ0IHRvIGNlbnRzXG4gICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICBtZXRhZGF0YTogeyB1c2VySWQgfVxuICAgICAgfSlcblxuICAgICAgLy8gU3RvcmUgaW4gZGF0YWJhc2VcbiAgICAgIGF3YWl0IHByaXNtYS50cmFuc2FjdGlvbi5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdHlwZTogJ1BBWU1FTlQnLFxuICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICBjb2luVHlwZTogY3VycmVuY3kgYXMgYW55LFxuICAgICAgICAgIHVzZEVxdWl2YWxlbnQ6IGFtb3VudCxcbiAgICAgICAgICBoYXNoOiBwYXltZW50SW50ZW50LmlkLFxuICAgICAgICAgIGV4dGVybmFsVHhuSWQ6IHBheW1lbnRJbnRlbnQuaWQsXG4gICAgICAgICAgc2VuZGVySWQ6IHVzZXJJZFxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjbGllbnRTZWNyZXQ6IHBheW1lbnRJbnRlbnQuY2xpZW50X3NlY3JldCxcbiAgICAgICAgcGF5bWVudEludGVudElkOiBwYXltZW50SW50ZW50LmlkXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignUGF5bWVudCBpbnRlbnQgY3JlYXRpb24gZmFpbGVkJywgeyBlcnJvciwgdXNlcklkLCBhbW91bnQgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHdlYmhvb2sgZXZlbnRzXG4gIGFzeW5jIGhhbmRsZVdlYmhvb2soYm9keTogc3RyaW5nLCBzaWduYXR1cmU6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBldmVudCA9IHN0cmlwZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChcbiAgICAgICAgYm9keSxcbiAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICBwcm9jZXNzLmVudi5TVFJJUEVfV0VCSE9PS19TRUNSRVQhXG4gICAgICApXG5cbiAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgICBjYXNlICdwYXltZW50X2ludGVudC5zdWNjZWVkZWQnOlxuICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlUGF5bWVudFN1Y2Nlc3MoZXZlbnQuZGF0YS5vYmplY3QpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncGF5bWVudF9pbnRlbnQucGF5bWVudF9mYWlsZWQnOlxuICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlUGF5bWVudEZhaWx1cmUoZXZlbnQuZGF0YS5vYmplY3QpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgcmVjZWl2ZWQ6IHRydWUgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1dlYmhvb2sgaGFuZGxpbmcgZmFpbGVkJywgeyBlcnJvciB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVBheW1lbnRTdWNjZXNzKHBheW1lbnRJbnRlbnQ6IFN0cmlwZS5QYXltZW50SW50ZW50KSB7XG4gICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHsgZXh0ZXJuYWxUeG5JZDogcGF5bWVudEludGVudC5pZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6ICdDT01QTEVURUQnIH1cbiAgICB9KVxuXG4gICAgLy8gVXBkYXRlIHVzZXIgd2FsbGV0XG4gICAgY29uc3QgdXNlcklkID0gcGF5bWVudEludGVudC5tZXRhZGF0YS51c2VySWRcbiAgICBpZiAodXNlcklkKSB7XG4gICAgICBhd2FpdCBwcmlzbWEud2FsbGV0LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgYmFsYW5jZToge1xuICAgICAgICAgICAgaW5jcmVtZW50OiBwYXltZW50SW50ZW50LmFtb3VudCAvIDEwMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVBheW1lbnRGYWlsdXJlKHBheW1lbnRJbnRlbnQ6IFN0cmlwZS5QYXltZW50SW50ZW50KSB7XG4gICAgYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uLnVwZGF0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHsgZXh0ZXJuYWxUeG5JZDogcGF5bWVudEludGVudC5pZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6ICdGQUlMRUQnIH1cbiAgICB9KVxuICB9XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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