6c476a85ec8f80749ac4f1c0929c8148
/* istanbul ignore next */
function cov_2e3p2r2inc() {
  var path = "/workspaces/azora/services/azora-sapiens/routes/tutor.js";
  var hash = "d405a6ac176eb9ca97e5410f7d04056abc5add10";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-sapiens/routes/tutor.js",
    statementMap: {
      "0": {
        start: {
          line: 1,
          column: 16
        },
        end: {
          line: 1,
          column: 34
        }
      },
      "1": {
        start: {
          line: 2,
          column: 51
        },
        end: {
          line: 2,
          column: 84
        }
      },
      "2": {
        start: {
          line: 4,
          column: 15
        },
        end: {
          line: 4,
          column: 31
        }
      },
      "3": {
        start: {
          line: 6,
          column: 0
        },
        end: {
          line: 14,
          column: 3
        }
      },
      "4": {
        start: {
          line: 7,
          column: 2
        },
        end: {
          line: 13,
          column: 3
        }
      },
      "5": {
        start: {
          line: 8,
          column: 34
        },
        end: {
          line: 8,
          column: 42
        }
      },
      "6": {
        start: {
          line: 9,
          column: 21
        },
        end: {
          line: 9,
          column: 62
        }
      },
      "7": {
        start: {
          line: 10,
          column: 4
        },
        end: {
          line: 10,
          column: 50
        }
      },
      "8": {
        start: {
          line: 12,
          column: 4
        },
        end: {
          line: 12,
          column: 51
        }
      },
      "9": {
        start: {
          line: 16,
          column: 0
        },
        end: {
          line: 24,
          column: 3
        }
      },
      "10": {
        start: {
          line: 17,
          column: 2
        },
        end: {
          line: 23,
          column: 3
        }
      },
      "11": {
        start: {
          line: 18,
          column: 38
        },
        end: {
          line: 18,
          column: 46
        }
      },
      "12": {
        start: {
          line: 19,
          column: 17
        },
        end: {
          line: 19,
          column: 66
        }
      },
      "13": {
        start: {
          line: 20,
          column: 4
        },
        end: {
          line: 20,
          column: 38
        }
      },
      "14": {
        start: {
          line: 22,
          column: 4
        },
        end: {
          line: 22,
          column: 51
        }
      },
      "15": {
        start: {
          line: 26,
          column: 0
        },
        end: {
          line: 26,
          column: 24
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 6,
            column: 20
          },
          end: {
            line: 6,
            column: 21
          }
        },
        loc: {
          start: {
            line: 6,
            column: 40
          },
          end: {
            line: 14,
            column: 1
          }
        },
        line: 6
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 16,
            column: 30
          },
          end: {
            line: 16,
            column: 31
          }
        },
        loc: {
          start: {
            line: 16,
            column: 50
          },
          end: {
            line: 24,
            column: 1
          }
        },
        line: 16
      }
    },
    branchMap: {},
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {},
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "d405a6ac176eb9ca97e5410f7d04056abc5add10"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2e3p2r2inc = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2e3p2r2inc();
const express =
/* istanbul ignore next */
(cov_2e3p2r2inc().s[0]++, require('express'));
const {
  getTutorResponse,
  generateLearningPath
} =
/* istanbul ignore next */
(cov_2e3p2r2inc().s[1]++, require('../src/ai-tutor-openai'));
const router =
/* istanbul ignore next */
(cov_2e3p2r2inc().s[2]++, express.Router());
/* istanbul ignore next */
cov_2e3p2r2inc().s[3]++;
router.post('/ask', async (req, res) => {
  /* istanbul ignore next */
  cov_2e3p2r2inc().f[0]++;
  cov_2e3p2r2inc().s[4]++;
  try {
    const {
      question,
      context
    } =
    /* istanbul ignore next */
    (cov_2e3p2r2inc().s[5]++, req.body);
    const response =
    /* istanbul ignore next */
    (cov_2e3p2r2inc().s[6]++, await getTutorResponse(question, context));
    /* istanbul ignore next */
    cov_2e3p2r2inc().s[7]++;
    res.json({
      answer: response,
      success: true
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_2e3p2r2inc().s[8]++;
    res.status(500).json({
      error: error.message
    });
  }
});
/* istanbul ignore next */
cov_2e3p2r2inc().s[9]++;
router.post('/learning-path', async (req, res) => {
  /* istanbul ignore next */
  cov_2e3p2r2inc().f[1]++;
  cov_2e3p2r2inc().s[10]++;
  try {
    const {
      subject,
      level,
      goals
    } =
    /* istanbul ignore next */
    (cov_2e3p2r2inc().s[11]++, req.body);
    const path =
    /* istanbul ignore next */
    (cov_2e3p2r2inc().s[12]++, await generateLearningPath(subject, level, goals));
    /* istanbul ignore next */
    cov_2e3p2r2inc().s[13]++;
    res.json({
      path,
      success: true
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_2e3p2r2inc().s[14]++;
    res.status(500).json({
      error: error.message
    });
  }
});
/* istanbul ignore next */
cov_2e3p2r2inc().s[15]++;
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmUzcDJyMmluYyIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwiZ2V0VHV0b3JSZXNwb25zZSIsImdlbmVyYXRlTGVhcm5pbmdQYXRoIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsInJlcSIsInJlcyIsImYiLCJxdWVzdGlvbiIsImNvbnRleHQiLCJib2R5IiwicmVzcG9uc2UiLCJqc29uIiwiYW5zd2VyIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwibWVzc2FnZSIsInN1YmplY3QiLCJsZXZlbCIsImdvYWxzIiwicGF0aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ0dXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgeyBnZXRUdXRvclJlc3BvbnNlLCBnZW5lcmF0ZUxlYXJuaW5nUGF0aCB9ID0gcmVxdWlyZSgnLi4vc3JjL2FpLXR1dG9yLW9wZW5haScpO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIucG9zdCgnL2FzaycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcXVlc3Rpb24sIGNvbnRleHQgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0VHV0b3JSZXNwb25zZShxdWVzdGlvbiwgY29udGV4dCk7XG4gICAgcmVzLmpzb24oeyBhbnN3ZXI6IHJlc3BvbnNlLCBzdWNjZXNzOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG5yb3V0ZXIucG9zdCgnL2xlYXJuaW5nLXBhdGgnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHN1YmplY3QsIGxldmVsLCBnb2FscyB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgcGF0aCA9IGF3YWl0IGdlbmVyYXRlTGVhcm5pbmdQYXRoKHN1YmplY3QsIGxldmVsLCBnb2Fscyk7XG4gICAgcmVzLmpzb24oeyBwYXRoLCBzdWNjZXNzOiB0cnVlIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFmWixNQUFNRSxPQUFPO0FBQUE7QUFBQSxDQUFBRixjQUFBLEdBQUFHLENBQUEsT0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVDLGdCQUFnQjtFQUFFQztBQUFxQixDQUFDO0FBQUE7QUFBQSxDQUFBTixjQUFBLEdBQUFHLENBQUEsT0FBR0MsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBRXBGLE1BQU1HLE1BQU07QUFBQTtBQUFBLENBQUFQLGNBQUEsR0FBQUcsQ0FBQSxPQUFHRCxPQUFPLENBQUNNLE1BQU0sQ0FBQyxDQUFDO0FBQUM7QUFBQVIsY0FBQSxHQUFBRyxDQUFBO0FBRWhDSSxNQUFNLENBQUNFLElBQUksQ0FBQyxNQUFNLEVBQUUsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFBQTtFQUFBWCxjQUFBLEdBQUFZLENBQUE7RUFBQVosY0FBQSxHQUFBRyxDQUFBO0VBQ3RDLElBQUk7SUFDRixNQUFNO01BQUVVLFFBQVE7TUFBRUM7SUFBUSxDQUFDO0lBQUE7SUFBQSxDQUFBZCxjQUFBLEdBQUFHLENBQUEsT0FBR08sR0FBRyxDQUFDSyxJQUFJO0lBQ3RDLE1BQU1DLFFBQVE7SUFBQTtJQUFBLENBQUFoQixjQUFBLEdBQUFHLENBQUEsT0FBRyxNQUFNRSxnQkFBZ0IsQ0FBQ1EsUUFBUSxFQUFFQyxPQUFPLENBQUM7SUFBQztJQUFBZCxjQUFBLEdBQUFHLENBQUE7SUFDM0RRLEdBQUcsQ0FBQ00sSUFBSSxDQUFDO01BQUVDLE1BQU0sRUFBRUYsUUFBUTtNQUFFRyxPQUFPLEVBQUU7SUFBSyxDQUFDLENBQUM7RUFDL0MsQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtJQUFBO0lBQUFwQixjQUFBLEdBQUFHLENBQUE7SUFDZFEsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNKLElBQUksQ0FBQztNQUFFRyxLQUFLLEVBQUVBLEtBQUssQ0FBQ0U7SUFBUSxDQUFDLENBQUM7RUFDaEQ7QUFDRixDQUFDLENBQUM7QUFBQztBQUFBdEIsY0FBQSxHQUFBRyxDQUFBO0FBRUhJLE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLGdCQUFnQixFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQUE7RUFBQVgsY0FBQSxHQUFBWSxDQUFBO0VBQUFaLGNBQUEsR0FBQUcsQ0FBQTtFQUNoRCxJQUFJO0lBQ0YsTUFBTTtNQUFFb0IsT0FBTztNQUFFQyxLQUFLO01BQUVDO0lBQU0sQ0FBQztJQUFBO0lBQUEsQ0FBQXpCLGNBQUEsR0FBQUcsQ0FBQSxRQUFHTyxHQUFHLENBQUNLLElBQUk7SUFDMUMsTUFBTVcsSUFBSTtJQUFBO0lBQUEsQ0FBQTFCLGNBQUEsR0FBQUcsQ0FBQSxRQUFHLE1BQU1HLG9CQUFvQixDQUFDaUIsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLEtBQUssQ0FBQztJQUFDO0lBQUF6QixjQUFBLEdBQUFHLENBQUE7SUFDL0RRLEdBQUcsQ0FBQ00sSUFBSSxDQUFDO01BQUVTLElBQUk7TUFBRVAsT0FBTyxFQUFFO0lBQUssQ0FBQyxDQUFDO0VBQ25DLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFBQTtJQUFBcEIsY0FBQSxHQUFBRyxDQUFBO0lBQ2RRLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDSixJQUFJLENBQUM7TUFBRUcsS0FBSyxFQUFFQSxLQUFLLENBQUNFO0lBQVEsQ0FBQyxDQUFDO0VBQ2hEO0FBQ0YsQ0FBQyxDQUFDO0FBQUM7QUFBQXRCLGNBQUEsR0FBQUcsQ0FBQTtBQUVId0IsTUFBTSxDQUFDQyxPQUFPLEdBQUdyQixNQUFNIiwiaWdub3JlTGlzdCI6W119