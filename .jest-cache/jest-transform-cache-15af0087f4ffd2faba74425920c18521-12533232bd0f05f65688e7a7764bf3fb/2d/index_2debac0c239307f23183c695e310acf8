4d755a0dff0a38e3ceba2aad0e04cdae
/* istanbul ignore next */
function cov_2nl6kc2y2y() {
  var path = "/workspaces/azora/packages/input-validation/index.js";
  var hash = "80845f1f367bdf542dd05dd6a83822d12716e9cb";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/packages/input-validation/index.js",
    statementMap: {
      "0": {
        start: {
          line: 1,
          column: 14
        },
        end: {
          line: 1,
          column: 28
        }
      },
      "1": {
        start: {
          line: 4,
          column: 16
        },
        end: {
          line: 50,
          column: 1
        }
      },
      "2": {
        start: {
          line: 53,
          column: 17
        },
        end: {
          line: 64,
          column: 1
        }
      },
      "3": {
        start: {
          line: 53,
          column: 29
        },
        end: {
          line: 64,
          column: 1
        }
      },
      "4": {
        start: {
          line: 54,
          column: 2
        },
        end: {
          line: 63,
          column: 3
        }
      },
      "5": {
        start: {
          line: 55,
          column: 4
        },
        end: {
          line: 55,
          column: 27
        }
      },
      "6": {
        start: {
          line: 56,
          column: 4
        },
        end: {
          line: 56,
          column: 11
        }
      },
      "7": {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 62,
          column: 7
        }
      },
      "8": {
        start: {
          line: 66,
          column: 0
        },
        end: {
          line: 66,
          column: 39
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 53,
            column: 17
          },
          end: {
            line: 53,
            column: 18
          }
        },
        loc: {
          start: {
            line: 53,
            column: 29
          },
          end: {
            line: 64,
            column: 1
          }
        },
        line: 53
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 53,
            column: 29
          },
          end: {
            line: 53,
            column: 30
          }
        },
        loc: {
          start: {
            line: 53,
            column: 49
          },
          end: {
            line: 64,
            column: 1
          }
        },
        line: 53
      }
    },
    branchMap: {},
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {},
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "80845f1f367bdf542dd05dd6a83822d12716e9cb"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2nl6kc2y2y = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2nl6kc2y2y();
const {
  z
} =
/* istanbul ignore next */
(cov_2nl6kc2y2y().s[0]++, require('zod'));

// Common schemas
const schemas =
/* istanbul ignore next */
(cov_2nl6kc2y2y().s[1]++, {
  user: {
    create: z.object({
      email: z.string().email(),
      password: z.string().min(8),
      name: z.string().min(2).max(100)
    }),
    login: z.object({
      email: z.string().email(),
      password: z.string()
    })
  },
  course: {
    create: z.object({
      title: z.string().min(3).max(200),
      description: z.string().max(2000),
      category: z.string().optional(),
      level: z.enum(['beginner', 'intermediate', 'advanced']).optional()
    })
  },
  job: {
    create: z.object({
      title: z.string().min(3).max(200),
      company: z.string().min(2).max(200),
      requirements: z.array(z.string()).optional(),
      salary: z.number().positive().optional(),
      location: z.string().optional()
    }),
    apply: z.object({
      userId: z.string().uuid(),
      coverLetter: z.string().max(5000).optional()
    })
  },
  wallet: {
    create: z.object({
      userId: z.string().uuid()
    }),
    transfer: z.object({
      from: z.string(),
      to: z.string(),
      amount: z.number().positive()
    })
  }
});

// Validation middleware
/* istanbul ignore next */
cov_2nl6kc2y2y().s[2]++;
const validate = schema => {
  /* istanbul ignore next */
  cov_2nl6kc2y2y().f[0]++;
  cov_2nl6kc2y2y().s[3]++;
  return (req, res, next) => {
    /* istanbul ignore next */
    cov_2nl6kc2y2y().f[1]++;
    cov_2nl6kc2y2y().s[4]++;
    try {
      /* istanbul ignore next */
      cov_2nl6kc2y2y().s[5]++;
      schema.parse(req.body);
      /* istanbul ignore next */
      cov_2nl6kc2y2y().s[6]++;
      next();
    } catch (err) {
      /* istanbul ignore next */
      cov_2nl6kc2y2y().s[7]++;
      res.status(400).json({
        success: false,
        error: 'Validation failed',
        details: err.errors
      });
    }
  };
};
/* istanbul ignore next */
cov_2nl6kc2y2y().s[8]++;
module.exports = {
  schemas,
  validate
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMm5sNmtjMnkyeSIsImFjdHVhbENvdmVyYWdlIiwieiIsInMiLCJyZXF1aXJlIiwic2NoZW1hcyIsInVzZXIiLCJjcmVhdGUiLCJvYmplY3QiLCJlbWFpbCIsInN0cmluZyIsInBhc3N3b3JkIiwibWluIiwibmFtZSIsIm1heCIsImxvZ2luIiwiY291cnNlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5Iiwib3B0aW9uYWwiLCJsZXZlbCIsImVudW0iLCJqb2IiLCJjb21wYW55IiwicmVxdWlyZW1lbnRzIiwiYXJyYXkiLCJzYWxhcnkiLCJudW1iZXIiLCJwb3NpdGl2ZSIsImxvY2F0aW9uIiwiYXBwbHkiLCJ1c2VySWQiLCJ1dWlkIiwiY292ZXJMZXR0ZXIiLCJ3YWxsZXQiLCJ0cmFuc2ZlciIsImZyb20iLCJ0byIsImFtb3VudCIsInZhbGlkYXRlIiwic2NoZW1hIiwiZiIsInJlcSIsInJlcyIsIm5leHQiLCJwYXJzZSIsImJvZHkiLCJlcnIiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwiZGV0YWlscyIsImVycm9ycyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHogfSA9IHJlcXVpcmUoJ3pvZCcpO1xuXG4vLyBDb21tb24gc2NoZW1hc1xuY29uc3Qgc2NoZW1hcyA9IHtcbiAgdXNlcjoge1xuICAgIGNyZWF0ZTogei5vYmplY3Qoe1xuICAgICAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoKSxcbiAgICAgIHBhc3N3b3JkOiB6LnN0cmluZygpLm1pbig4KSxcbiAgICAgIG5hbWU6IHouc3RyaW5nKCkubWluKDIpLm1heCgxMDApXG4gICAgfSksXG4gICAgbG9naW46IHoub2JqZWN0KHtcbiAgICAgIGVtYWlsOiB6LnN0cmluZygpLmVtYWlsKCksXG4gICAgICBwYXNzd29yZDogei5zdHJpbmcoKVxuICAgIH0pXG4gIH0sXG4gIFxuICBjb3Vyc2U6IHtcbiAgICBjcmVhdGU6IHoub2JqZWN0KHtcbiAgICAgIHRpdGxlOiB6LnN0cmluZygpLm1pbigzKS5tYXgoMjAwKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm1heCgyMDAwKSxcbiAgICAgIGNhdGVnb3J5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBsZXZlbDogei5lbnVtKFsnYmVnaW5uZXInLCAnaW50ZXJtZWRpYXRlJywgJ2FkdmFuY2VkJ10pLm9wdGlvbmFsKClcbiAgICB9KVxuICB9LFxuICBcbiAgam9iOiB7XG4gICAgY3JlYXRlOiB6Lm9iamVjdCh7XG4gICAgICB0aXRsZTogei5zdHJpbmcoKS5taW4oMykubWF4KDIwMCksXG4gICAgICBjb21wYW55OiB6LnN0cmluZygpLm1pbigyKS5tYXgoMjAwKSxcbiAgICAgIHJlcXVpcmVtZW50czogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAgICAgc2FsYXJ5OiB6Lm51bWJlcigpLnBvc2l0aXZlKCkub3B0aW9uYWwoKSxcbiAgICAgIGxvY2F0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICB9KSxcbiAgICBhcHBseTogei5vYmplY3Qoe1xuICAgICAgdXNlcklkOiB6LnN0cmluZygpLnV1aWQoKSxcbiAgICAgIGNvdmVyTGV0dGVyOiB6LnN0cmluZygpLm1heCg1MDAwKS5vcHRpb25hbCgpXG4gICAgfSlcbiAgfSxcbiAgXG4gIHdhbGxldDoge1xuICAgIGNyZWF0ZTogei5vYmplY3Qoe1xuICAgICAgdXNlcklkOiB6LnN0cmluZygpLnV1aWQoKVxuICAgIH0pLFxuICAgIHRyYW5zZmVyOiB6Lm9iamVjdCh7XG4gICAgICBmcm9tOiB6LnN0cmluZygpLFxuICAgICAgdG86IHouc3RyaW5nKCksXG4gICAgICBhbW91bnQ6IHoubnVtYmVyKCkucG9zaXRpdmUoKVxuICAgIH0pXG4gIH1cbn07XG5cbi8vIFZhbGlkYXRpb24gbWlkZGxld2FyZVxuY29uc3QgdmFsaWRhdGUgPSAoc2NoZW1hKSA9PiAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBzY2hlbWEucGFyc2UocmVxLmJvZHkpO1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsIFxuICAgICAgZGV0YWlsczogZXJyLmVycm9ycyBcbiAgICB9KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IHNjaGVtYXMsIHZhbGlkYXRlIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBZVk7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTtBQWZaLE1BQU07RUFBRUU7QUFBRSxDQUFDO0FBQUE7QUFBQSxDQUFBRixjQUFBLEdBQUFHLENBQUEsT0FBR0MsT0FBTyxDQUFDLEtBQUssQ0FBQzs7QUFFNUI7QUFDQSxNQUFNQyxPQUFPO0FBQUE7QUFBQSxDQUFBTCxjQUFBLEdBQUFHLENBQUEsT0FBRztFQUNkRyxJQUFJLEVBQUU7SUFDSkMsTUFBTSxFQUFFTCxDQUFDLENBQUNNLE1BQU0sQ0FBQztNQUNmQyxLQUFLLEVBQUVQLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLENBQUMsQ0FBQ0QsS0FBSyxDQUFDLENBQUM7TUFDekJFLFFBQVEsRUFBRVQsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDRSxHQUFHLENBQUMsQ0FBQyxDQUFDO01BQzNCQyxJQUFJLEVBQUVYLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLENBQUMsQ0FBQ0UsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDRSxHQUFHLENBQUMsR0FBRztJQUNqQyxDQUFDLENBQUM7SUFDRkMsS0FBSyxFQUFFYixDQUFDLENBQUNNLE1BQU0sQ0FBQztNQUNkQyxLQUFLLEVBQUVQLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLENBQUMsQ0FBQ0QsS0FBSyxDQUFDLENBQUM7TUFDekJFLFFBQVEsRUFBRVQsQ0FBQyxDQUFDUSxNQUFNLENBQUM7SUFDckIsQ0FBQztFQUNILENBQUM7RUFFRE0sTUFBTSxFQUFFO0lBQ05ULE1BQU0sRUFBRUwsQ0FBQyxDQUFDTSxNQUFNLENBQUM7TUFDZlMsS0FBSyxFQUFFZixDQUFDLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUNFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQ0UsR0FBRyxDQUFDLEdBQUcsQ0FBQztNQUNqQ0ksV0FBVyxFQUFFaEIsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDSSxHQUFHLENBQUMsSUFBSSxDQUFDO01BQ2pDSyxRQUFRLEVBQUVqQixDQUFDLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUNVLFFBQVEsQ0FBQyxDQUFDO01BQy9CQyxLQUFLLEVBQUVuQixDQUFDLENBQUNvQixJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUUsY0FBYyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUNGLFFBQVEsQ0FBQztJQUNuRSxDQUFDO0VBQ0gsQ0FBQztFQUVERyxHQUFHLEVBQUU7SUFDSGhCLE1BQU0sRUFBRUwsQ0FBQyxDQUFDTSxNQUFNLENBQUM7TUFDZlMsS0FBSyxFQUFFZixDQUFDLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUNFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQ0UsR0FBRyxDQUFDLEdBQUcsQ0FBQztNQUNqQ1UsT0FBTyxFQUFFdEIsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNFLEdBQUcsQ0FBQyxHQUFHLENBQUM7TUFDbkNXLFlBQVksRUFBRXZCLENBQUMsQ0FBQ3dCLEtBQUssQ0FBQ3hCLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDVSxRQUFRLENBQUMsQ0FBQztNQUM1Q08sTUFBTSxFQUFFekIsQ0FBQyxDQUFDMEIsTUFBTSxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUMsQ0FBQ1QsUUFBUSxDQUFDLENBQUM7TUFDeENVLFFBQVEsRUFBRTVCLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLENBQUMsQ0FBQ1UsUUFBUSxDQUFDO0lBQ2hDLENBQUMsQ0FBQztJQUNGVyxLQUFLLEVBQUU3QixDQUFDLENBQUNNLE1BQU0sQ0FBQztNQUNkd0IsTUFBTSxFQUFFOUIsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDdUIsSUFBSSxDQUFDLENBQUM7TUFDekJDLFdBQVcsRUFBRWhDLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLENBQUMsQ0FBQ0ksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDTSxRQUFRLENBQUM7SUFDN0MsQ0FBQztFQUNILENBQUM7RUFFRGUsTUFBTSxFQUFFO0lBQ041QixNQUFNLEVBQUVMLENBQUMsQ0FBQ00sTUFBTSxDQUFDO01BQ2Z3QixNQUFNLEVBQUU5QixDQUFDLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUN1QixJQUFJLENBQUM7SUFDMUIsQ0FBQyxDQUFDO0lBQ0ZHLFFBQVEsRUFBRWxDLENBQUMsQ0FBQ00sTUFBTSxDQUFDO01BQ2pCNkIsSUFBSSxFQUFFbkMsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQztNQUNoQjRCLEVBQUUsRUFBRXBDLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLENBQUM7TUFDZDZCLE1BQU0sRUFBRXJDLENBQUMsQ0FBQzBCLE1BQU0sQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FBQztJQUM5QixDQUFDO0VBQ0g7QUFDRixDQUFDOztBQUVEO0FBQUE7QUFBQTdCLGNBQUEsR0FBQUcsQ0FBQTtBQUNBLE1BQU1xQyxRQUFRLEdBQUlDLE1BQU0sSUFBSztFQUFBO0VBQUF6QyxjQUFBLEdBQUEwQyxDQUFBO0VBQUExQyxjQUFBLEdBQUFHLENBQUE7RUFBQSxRQUFDd0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUFBO0lBQUE3QyxjQUFBLEdBQUEwQyxDQUFBO0lBQUExQyxjQUFBLEdBQUFHLENBQUE7SUFDL0MsSUFBSTtNQUFBO01BQUFILGNBQUEsR0FBQUcsQ0FBQTtNQUNGc0MsTUFBTSxDQUFDSyxLQUFLLENBQUNILEdBQUcsQ0FBQ0ksSUFBSSxDQUFDO01BQUM7TUFBQS9DLGNBQUEsR0FBQUcsQ0FBQTtNQUN2QjBDLElBQUksQ0FBQyxDQUFDO0lBQ1IsQ0FBQyxDQUFDLE9BQU9HLEdBQUcsRUFBRTtNQUFBO01BQUFoRCxjQUFBLEdBQUFHLENBQUE7TUFDWnlDLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDbkJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRSxtQkFBbUI7UUFDMUJDLE9BQU8sRUFBRUwsR0FBRyxDQUFDTTtNQUNmLENBQUMsQ0FBQztJQUNKO0VBQ0YsQ0FBQztBQUFELENBQUM7QUFBQztBQUFBdEQsY0FBQSxHQUFBRyxDQUFBO0FBRUZvRCxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUFFbkQsT0FBTztFQUFFbUM7QUFBUyxDQUFDIiwiaWdub3JlTGlzdCI6W119