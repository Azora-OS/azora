e8eb2a731271221f7ff252ba34a17742
/* istanbul ignore next */
function cov_rdy900is4() {
  var path = "/workspaces/azora/services/shared/tracing/index.ts";
  var hash = "b70a252b73c56c1f0e8ebc35cef9b85dc8cb6a12";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/shared/tracing/index.ts",
    statementMap: {
      "0": {
        start: {
          line: 21,
          column: 25
        },
        end: {
          line: 23,
          column: 4
        }
      },
      "1": {
        start: {
          line: 25,
          column: 25
        },
        end: {
          line: 32,
          column: 4
        }
      },
      "2": {
        start: {
          line: 34,
          column: 2
        },
        end: {
          line: 34,
          column: 74
        }
      },
      "3": {
        start: {
          line: 35,
          column: 2
        },
        end: {
          line: 35,
          column: 28
        }
      },
      "4": {
        start: {
          line: 38,
          column: 2
        },
        end: {
          line: 40,
          column: 5
        }
      },
      "5": {
        start: {
          line: 42,
          column: 2
        },
        end: {
          line: 42,
          column: 24
        }
      },
      "6": {
        start: {
          line: 49,
          column: 2
        },
        end: {
          line: 49,
          column: 31
        }
      },
      "7": {
        start: {
          line: 56,
          column: 2
        },
        end: {
          line: 93,
          column: 4
        }
      },
      "8": {
        start: {
          line: 57,
          column: 19
        },
        end: {
          line: 57,
          column: 39
        }
      },
      "9": {
        start: {
          line: 58,
          column: 17
        },
        end: {
          line: 58,
          column: 62
        }
      },
      "10": {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 68,
          column: 7
        }
      },
      "11": {
        start: {
          line: 71,
          column: 4
        },
        end: {
          line: 71,
          column: 45
        }
      },
      "12": {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 72,
          column: 43
        }
      },
      "13": {
        start: {
          line: 75,
          column: 25
        },
        end: {
          line: 75,
          column: 33
        }
      },
      "14": {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 87,
          column: 6
        }
      },
      "15": {
        start: {
          line: 77,
          column: 6
        },
        end: {
          line: 79,
          column: 9
        }
      },
      "16": {
        start: {
          line: 81,
          column: 6
        },
        end: {
          line: 83,
          column: 7
        }
      },
      "17": {
        start: {
          line: 82,
          column: 8
        },
        end: {
          line: 82,
          column: 55
        }
      },
      "18": {
        start: {
          line: 85,
          column: 6
        },
        end: {
          line: 85,
          column: 17
        }
      },
      "19": {
        start: {
          line: 86,
          column: 6
        },
        end: {
          line: 86,
          column: 43
        }
      },
      "20": {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 92,
          column: 7
        }
      },
      "21": {
        start: {
          line: 91,
          column: 6
        },
        end: {
          line: 91,
          column: 13
        }
      },
      "22": {
        start: {
          line: 100,
          column: 17
        },
        end: {
          line: 100,
          column: 38
        }
      },
      "23": {
        start: {
          line: 101,
          column: 15
        },
        end: {
          line: 101,
          column: 50
        }
      },
      "24": {
        start: {
          line: 103,
          column: 2
        },
        end: {
          line: 106,
          column: 5
        }
      },
      "25": {
        start: {
          line: 108,
          column: 2
        },
        end: {
          line: 108,
          column: 14
        }
      },
      "26": {
        start: {
          line: 115,
          column: 17
        },
        end: {
          line: 115,
          column: 41
        }
      },
      "27": {
        start: {
          line: 116,
          column: 15
        },
        end: {
          line: 116,
          column: 59
        }
      },
      "28": {
        start: {
          line: 118,
          column: 2
        },
        end: {
          line: 122,
          column: 5
        }
      },
      "29": {
        start: {
          line: 124,
          column: 2
        },
        end: {
          line: 124,
          column: 14
        }
      },
      "30": {
        start: {
          line: 131,
          column: 15
        },
        end: {
          line: 131,
          column: 36
        }
      },
      "31": {
        start: {
          line: 132,
          column: 2
        },
        end: {
          line: 135,
          column: 3
        }
      },
      "32": {
        start: {
          line: 133,
          column: 4
        },
        end: {
          line: 133,
          column: 32
        }
      },
      "33": {
        start: {
          line: 134,
          column: 4
        },
        end: {
          line: 134,
          column: 51
        }
      }
    },
    fnMap: {
      "0": {
        name: "initializeTracing",
        decl: {
          start: {
            line: 20,
            column: 16
          },
          end: {
            line: 20,
            column: 33
          }
        },
        loc: {
          start: {
            line: 20,
            column: 55
          },
          end: {
            line: 43,
            column: 1
          }
        },
        line: 20
      },
      "1": {
        name: "getTracer",
        decl: {
          start: {
            line: 48,
            column: 16
          },
          end: {
            line: 48,
            column: 25
          }
        },
        loc: {
          start: {
            line: 48,
            column: 40
          },
          end: {
            line: 50,
            column: 1
          }
        },
        line: 48
      },
      "2": {
        name: "tracingMiddleware",
        decl: {
          start: {
            line: 55,
            column: 16
          },
          end: {
            line: 55,
            column: 33
          }
        },
        loc: {
          start: {
            line: 55,
            column: 36
          },
          end: {
            line: 94,
            column: 1
          }
        },
        line: 55
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 56,
            column: 9
          },
          end: {
            line: 56,
            column: 10
          }
        },
        loc: {
          start: {
            line: 56,
            column: 44
          },
          end: {
            line: 93,
            column: 3
          }
        },
        line: 56
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 76,
            column: 15
          },
          end: {
            line: 76,
            column: 16
          }
        },
        loc: {
          start: {
            line: 76,
            column: 36
          },
          end: {
            line: 87,
            column: 5
          }
        },
        line: 76
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 90,
            column: 56
          },
          end: {
            line: 90,
            column: 57
          }
        },
        loc: {
          start: {
            line: 90,
            column: 62
          },
          end: {
            line: 92,
            column: 5
          }
        },
        line: 90
      },
      "6": {
        name: "createDatabaseSpan",
        decl: {
          start: {
            line: 99,
            column: 16
          },
          end: {
            line: 99,
            column: 34
          }
        },
        loc: {
          start: {
            line: 99,
            column: 69
          },
          end: {
            line: 109,
            column: 1
          }
        },
        line: 99
      },
      "7": {
        name: "createServiceSpan",
        decl: {
          start: {
            line: 114,
            column: 16
          },
          end: {
            line: 114,
            column: 33
          }
        },
        loc: {
          start: {
            line: 114,
            column: 85
          },
          end: {
            line: 125,
            column: 1
          }
        },
        line: 114
      },
      "8": {
        name: "recordError",
        decl: {
          start: {
            line: 130,
            column: 16
          },
          end: {
            line: 130,
            column: 27
          }
        },
        loc: {
          start: {
            line: 130,
            column: 42
          },
          end: {
            line: 136,
            column: 1
          }
        },
        line: 130
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 22,
            column: 14
          },
          end: {
            line: 22,
            column: 80
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 22,
            column: 14
          },
          end: {
            line: 22,
            column: 41
          }
        }, {
          start: {
            line: 22,
            column: 45
          },
          end: {
            line: 22,
            column: 80
          }
        }],
        line: 22
      },
      "1": {
        loc: {
          start: {
            line: 29,
            column: 54
          },
          end: {
            line: 29,
            column: 92
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 29,
            column: 54
          },
          end: {
            line: 29,
            column: 81
          }
        }, {
          start: {
            line: 29,
            column: 85
          },
          end: {
            line: 29,
            column: 92
          }
        }],
        line: 29
      },
      "2": {
        loc: {
          start: {
            line: 81,
            column: 6
          },
          end: {
            line: 83,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 81,
            column: 6
          },
          end: {
            line: 83,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 81
      },
      "3": {
        loc: {
          start: {
            line: 132,
            column: 2
          },
          end: {
            line: 135,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 132,
            column: 2
          },
          end: {
            line: 135,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 132
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "b70a252b73c56c1f0e8ebc35cef9b85dc8cb6a12"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_rdy900is4 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_rdy900is4();
/**
 * OpenTelemetry Distributed Tracing Setup
 * Provides centralized tracing configuration for all Azora services
 */

import { NodeTracerProvider } from '@opentelemetry/node';
import { getNodeAutoInstrumentations } from '@opentelemetry/auto-instrumentations-node';
import { registerInstrumentations } from '@opentelemetry/instrumentation';
import { JaegerExporter } from '@opentelemetry/exporter-jaeger-http';
import { BatchSpanProcessor } from '@opentelemetry/sdk-trace-node';
import { Resource } from '@opentelemetry/resources';
import { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';
import { trace, context, SpanStatusCode } from '@opentelemetry/api';

/**
 * Initialize OpenTelemetry tracing for a service
 */
export function initializeTracing(serviceName) {
  /* istanbul ignore next */
  cov_rdy900is4().f[0]++;
  const jaegerExporter =
  /* istanbul ignore next */
  (cov_rdy900is4().s[0]++, new JaegerExporter({
    endpoint:
    /* istanbul ignore next */
    (cov_rdy900is4().b[0][0]++, process.env.JAEGER_ENDPOINT) ||
    /* istanbul ignore next */
    (cov_rdy900is4().b[0][1]++, 'http://localhost:14268/api/traces')
  }));
  const tracerProvider =
  /* istanbul ignore next */
  (cov_rdy900is4().s[1]++, new NodeTracerProvider({
    resource: Resource.default().merge(new Resource({
      [SemanticResourceAttributes.SERVICE_NAME]: serviceName,
      [SemanticResourceAttributes.SERVICE_VERSION]:
      /* istanbul ignore next */
      (cov_rdy900is4().b[1][0]++, process.env.SERVICE_VERSION) ||
      /* istanbul ignore next */
      (cov_rdy900is4().b[1][1]++, '1.0.0')
    }))
  }));
  /* istanbul ignore next */
  cov_rdy900is4().s[2]++;
  tracerProvider.addSpanProcessor(new BatchSpanProcessor(jaegerExporter));
  /* istanbul ignore next */
  cov_rdy900is4().s[3]++;
  tracerProvider.register();

  // Register auto-instrumentations
  /* istanbul ignore next */
  cov_rdy900is4().s[4]++;
  registerInstrumentations({
    instrumentations: [getNodeAutoInstrumentations()]
  });
  /* istanbul ignore next */
  cov_rdy900is4().s[5]++;
  return tracerProvider;
}

/**
 * Get the global tracer instance
 */
export function getTracer(name) {
  /* istanbul ignore next */
  cov_rdy900is4().f[1]++;
  cov_rdy900is4().s[6]++;
  return trace.getTracer(name);
}

/**
 * Express middleware for automatic request tracing
 */
export function tracingMiddleware() {
  /* istanbul ignore next */
  cov_rdy900is4().f[2]++;
  cov_rdy900is4().s[7]++;
  return (req, res, next) => {
    /* istanbul ignore next */
    cov_rdy900is4().f[3]++;
    const tracer =
    /* istanbul ignore next */
    (cov_rdy900is4().s[8]++, getTracer('express'));
    const span =
    /* istanbul ignore next */
    (cov_rdy900is4().s[9]++, tracer.startSpan(`${req.method} ${req.path}`));

    // Set span attributes
    /* istanbul ignore next */
    cov_rdy900is4().s[10]++;
    span.setAttributes({
      'http.method': req.method,
      'http.url': req.url,
      'http.target': req.path,
      'http.host': req.hostname,
      'http.scheme': req.protocol,
      'http.client_ip': req.ip
    });

    // Add trace ID to request for logging
    /* istanbul ignore next */
    cov_rdy900is4().s[11]++;
    req.traceId = span.spanContext().traceId;
    /* istanbul ignore next */
    cov_rdy900is4().s[12]++;
    req.spanId = span.spanContext().spanId;

    // Wrap response to capture status
    const originalSend =
    /* istanbul ignore next */
    (cov_rdy900is4().s[13]++, res.send);
    /* istanbul ignore next */
    cov_rdy900is4().s[14]++;
    res.send = function (data) {
      /* istanbul ignore next */
      cov_rdy900is4().f[4]++;
      cov_rdy900is4().s[15]++;
      span.setAttributes({
        'http.status_code': res.statusCode
      });
      /* istanbul ignore next */
      cov_rdy900is4().s[16]++;
      if (res.statusCode >= 400) {
        /* istanbul ignore next */
        cov_rdy900is4().b[2][0]++;
        cov_rdy900is4().s[17]++;
        span.setStatus({
          code: SpanStatusCode.ERROR
        });
      } else
      /* istanbul ignore next */
      {
        cov_rdy900is4().b[2][1]++;
      }
      cov_rdy900is4().s[18]++;
      span.end();
      /* istanbul ignore next */
      cov_rdy900is4().s[19]++;
      return originalSend.call(this, data);
    };

    // Run handler in span context
    /* istanbul ignore next */
    cov_rdy900is4().s[20]++;
    context.with(trace.setSpan(context.active(), span), () => {
      /* istanbul ignore next */
      cov_rdy900is4().f[5]++;
      cov_rdy900is4().s[21]++;
      next();
    });
  };
}

/**
 * Create a child span for database operations
 */
export function createDatabaseSpan(operation, query) {
  /* istanbul ignore next */
  cov_rdy900is4().f[6]++;
  const tracer =
  /* istanbul ignore next */
  (cov_rdy900is4().s[22]++, getTracer('database'));
  const span =
  /* istanbul ignore next */
  (cov_rdy900is4().s[23]++, tracer.startSpan(`db.${operation}`));
  /* istanbul ignore next */
  cov_rdy900is4().s[24]++;
  span.setAttributes({
    'db.operation': operation,
    'db.statement': query
  });
  /* istanbul ignore next */
  cov_rdy900is4().s[25]++;
  return span;
}

/**
 * Create a child span for external service calls
 */
export function createServiceSpan(serviceName, method, path) {
  /* istanbul ignore next */
  cov_rdy900is4().f[7]++;
  const tracer =
  /* istanbul ignore next */
  (cov_rdy900is4().s[26]++, getTracer('http-client'));
  const span =
  /* istanbul ignore next */
  (cov_rdy900is4().s[27]++, tracer.startSpan(`${serviceName}.${method}`));
  /* istanbul ignore next */
  cov_rdy900is4().s[28]++;
  span.setAttributes({
    'http.method': method,
    'http.url': path,
    'peer.service': serviceName
  });
  /* istanbul ignore next */
  cov_rdy900is4().s[29]++;
  return span;
}

/**
 * Record an error in the current span
 */
export function recordError(error) {
  /* istanbul ignore next */
  cov_rdy900is4().f[8]++;
  const span =
  /* istanbul ignore next */
  (cov_rdy900is4().s[30]++, trace.getActiveSpan());
  /* istanbul ignore next */
  cov_rdy900is4().s[31]++;
  if (span) {
    /* istanbul ignore next */
    cov_rdy900is4().b[3][0]++;
    cov_rdy900is4().s[32]++;
    span.recordException(error);
    /* istanbul ignore next */
    cov_rdy900is4().s[33]++;
    span.setStatus({
      code: SpanStatusCode.ERROR
    });
  } else
  /* istanbul ignore next */
  {
    cov_rdy900is4().b[3][1]++;
  }
}
export default {
  initializeTracing,
  getTracer,
  tracingMiddleware,
  createDatabaseSpan,
  createServiceSpan,
  recordError
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfcmR5OTAwaXM0IiwiYWN0dWFsQ292ZXJhZ2UiLCJOb2RlVHJhY2VyUHJvdmlkZXIiLCJnZXROb2RlQXV0b0luc3RydW1lbnRhdGlvbnMiLCJyZWdpc3Rlckluc3RydW1lbnRhdGlvbnMiLCJKYWVnZXJFeHBvcnRlciIsIkJhdGNoU3BhblByb2Nlc3NvciIsIlJlc291cmNlIiwiU2VtYW50aWNSZXNvdXJjZUF0dHJpYnV0ZXMiLCJ0cmFjZSIsImNvbnRleHQiLCJTcGFuU3RhdHVzQ29kZSIsImluaXRpYWxpemVUcmFjaW5nIiwic2VydmljZU5hbWUiLCJmIiwiamFlZ2VyRXhwb3J0ZXIiLCJzIiwiZW5kcG9pbnQiLCJiIiwicHJvY2VzcyIsImVudiIsIkpBRUdFUl9FTkRQT0lOVCIsInRyYWNlclByb3ZpZGVyIiwicmVzb3VyY2UiLCJkZWZhdWx0IiwibWVyZ2UiLCJTRVJWSUNFX05BTUUiLCJTRVJWSUNFX1ZFUlNJT04iLCJhZGRTcGFuUHJvY2Vzc29yIiwicmVnaXN0ZXIiLCJpbnN0cnVtZW50YXRpb25zIiwiZ2V0VHJhY2VyIiwibmFtZSIsInRyYWNpbmdNaWRkbGV3YXJlIiwicmVxIiwicmVzIiwibmV4dCIsInRyYWNlciIsInNwYW4iLCJzdGFydFNwYW4iLCJtZXRob2QiLCJwYXRoIiwic2V0QXR0cmlidXRlcyIsInVybCIsImhvc3RuYW1lIiwicHJvdG9jb2wiLCJpcCIsInRyYWNlSWQiLCJzcGFuQ29udGV4dCIsInNwYW5JZCIsIm9yaWdpbmFsU2VuZCIsInNlbmQiLCJkYXRhIiwic3RhdHVzQ29kZSIsInNldFN0YXR1cyIsImNvZGUiLCJFUlJPUiIsImVuZCIsImNhbGwiLCJ3aXRoIiwic2V0U3BhbiIsImFjdGl2ZSIsImNyZWF0ZURhdGFiYXNlU3BhbiIsIm9wZXJhdGlvbiIsInF1ZXJ5IiwiY3JlYXRlU2VydmljZVNwYW4iLCJyZWNvcmRFcnJvciIsImVycm9yIiwiZ2V0QWN0aXZlU3BhbiIsInJlY29yZEV4Y2VwdGlvbiJdLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogT3BlblRlbGVtZXRyeSBEaXN0cmlidXRlZCBUcmFjaW5nIFNldHVwXG4gKiBQcm92aWRlcyBjZW50cmFsaXplZCB0cmFjaW5nIGNvbmZpZ3VyYXRpb24gZm9yIGFsbCBBem9yYSBzZXJ2aWNlc1xuICovXG5cbmltcG9ydCB7IE5vZGVUcmFjZXJQcm92aWRlciB9IGZyb20gJ0BvcGVudGVsZW1ldHJ5L25vZGUnO1xuaW1wb3J0IHsgZ2V0Tm9kZUF1dG9JbnN0cnVtZW50YXRpb25zIH0gZnJvbSAnQG9wZW50ZWxlbWV0cnkvYXV0by1pbnN0cnVtZW50YXRpb25zLW5vZGUnO1xuaW1wb3J0IHsgcmVnaXN0ZXJJbnN0cnVtZW50YXRpb25zIH0gZnJvbSAnQG9wZW50ZWxlbWV0cnkvaW5zdHJ1bWVudGF0aW9uJztcbmltcG9ydCB7IEphZWdlckV4cG9ydGVyIH0gZnJvbSAnQG9wZW50ZWxlbWV0cnkvZXhwb3J0ZXItamFlZ2VyLWh0dHAnO1xuaW1wb3J0IHsgQmF0Y2hTcGFuUHJvY2Vzc29yIH0gZnJvbSAnQG9wZW50ZWxlbWV0cnkvc2RrLXRyYWNlLW5vZGUnO1xuaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICdAb3BlbnRlbGVtZXRyeS9yZXNvdXJjZXMnO1xuaW1wb3J0IHsgU2VtYW50aWNSZXNvdXJjZUF0dHJpYnV0ZXMgfSBmcm9tICdAb3BlbnRlbGVtZXRyeS9zZW1hbnRpYy1jb252ZW50aW9ucyc7XG5pbXBvcnQgeyBXM0NUcmFjZUNvbnRleHRQcm9wYWdhdG9yIH0gZnJvbSAnQG9wZW50ZWxlbWV0cnkvY29yZSc7XG5pbXBvcnQgeyBDb21wb3NpdGVQcm9wYWdhdG9yLCBIdHRwVHJhY2VDb250ZXh0UHJvcGFnYXRvciB9IGZyb20gJ0BvcGVudGVsZW1ldHJ5L2NvcmUnO1xuaW1wb3J0IHsgdHJhY2UsIGNvbnRleHQsIFNwYW5TdGF0dXNDb2RlIH0gZnJvbSAnQG9wZW50ZWxlbWV0cnkvYXBpJztcblxuLyoqXG4gKiBJbml0aWFsaXplIE9wZW5UZWxlbWV0cnkgdHJhY2luZyBmb3IgYSBzZXJ2aWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplVHJhY2luZyhzZXJ2aWNlTmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IGphZWdlckV4cG9ydGVyID0gbmV3IEphZWdlckV4cG9ydGVyKHtcbiAgICBlbmRwb2ludDogcHJvY2Vzcy5lbnYuSkFFR0VSX0VORFBPSU5UIHx8ICdodHRwOi8vbG9jYWxob3N0OjE0MjY4L2FwaS90cmFjZXMnLFxuICB9KTtcblxuICBjb25zdCB0cmFjZXJQcm92aWRlciA9IG5ldyBOb2RlVHJhY2VyUHJvdmlkZXIoe1xuICAgIHJlc291cmNlOiBSZXNvdXJjZS5kZWZhdWx0KCkubWVyZ2UoXG4gICAgICBuZXcgUmVzb3VyY2Uoe1xuICAgICAgICBbU2VtYW50aWNSZXNvdXJjZUF0dHJpYnV0ZXMuU0VSVklDRV9OQU1FXTogc2VydmljZU5hbWUsXG4gICAgICAgIFtTZW1hbnRpY1Jlc291cmNlQXR0cmlidXRlcy5TRVJWSUNFX1ZFUlNJT05dOiBwcm9jZXNzLmVudi5TRVJWSUNFX1ZFUlNJT04gfHwgJzEuMC4wJyxcbiAgICAgIH0pLFxuICAgICksXG4gIH0pO1xuXG4gIHRyYWNlclByb3ZpZGVyLmFkZFNwYW5Qcm9jZXNzb3IobmV3IEJhdGNoU3BhblByb2Nlc3NvcihqYWVnZXJFeHBvcnRlcikpO1xuICB0cmFjZXJQcm92aWRlci5yZWdpc3RlcigpO1xuXG4gIC8vIFJlZ2lzdGVyIGF1dG8taW5zdHJ1bWVudGF0aW9uc1xuICByZWdpc3Rlckluc3RydW1lbnRhdGlvbnMoe1xuICAgIGluc3RydW1lbnRhdGlvbnM6IFtnZXROb2RlQXV0b0luc3RydW1lbnRhdGlvbnMoKV0sXG4gIH0pO1xuXG4gIHJldHVybiB0cmFjZXJQcm92aWRlcjtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGdsb2JhbCB0cmFjZXIgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYWNlcihuYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHRyYWNlLmdldFRyYWNlcihuYW1lKTtcbn1cblxuLyoqXG4gKiBFeHByZXNzIG1pZGRsZXdhcmUgZm9yIGF1dG9tYXRpYyByZXF1ZXN0IHRyYWNpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYWNpbmdNaWRkbGV3YXJlKCkge1xuICByZXR1cm4gKHJlcTogYW55LCByZXM6IGFueSwgbmV4dDogYW55KSA9PiB7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCdleHByZXNzJyk7XG4gICAgY29uc3Qgc3BhbiA9IHRyYWNlci5zdGFydFNwYW4oYCR7cmVxLm1ldGhvZH0gJHtyZXEucGF0aH1gKTtcblxuICAgIC8vIFNldCBzcGFuIGF0dHJpYnV0ZXNcbiAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgJ2h0dHAubWV0aG9kJzogcmVxLm1ldGhvZCxcbiAgICAgICdodHRwLnVybCc6IHJlcS51cmwsXG4gICAgICAnaHR0cC50YXJnZXQnOiByZXEucGF0aCxcbiAgICAgICdodHRwLmhvc3QnOiByZXEuaG9zdG5hbWUsXG4gICAgICAnaHR0cC5zY2hlbWUnOiByZXEucHJvdG9jb2wsXG4gICAgICAnaHR0cC5jbGllbnRfaXAnOiByZXEuaXAsXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgdHJhY2UgSUQgdG8gcmVxdWVzdCBmb3IgbG9nZ2luZ1xuICAgIHJlcS50cmFjZUlkID0gc3Bhbi5zcGFuQ29udGV4dCgpLnRyYWNlSWQ7XG4gICAgcmVxLnNwYW5JZCA9IHNwYW4uc3BhbkNvbnRleHQoKS5zcGFuSWQ7XG5cbiAgICAvLyBXcmFwIHJlc3BvbnNlIHRvIGNhcHR1cmUgc3RhdHVzXG4gICAgY29uc3Qgb3JpZ2luYWxTZW5kID0gcmVzLnNlbmQ7XG4gICAgcmVzLnNlbmQgPSBmdW5jdGlvbiAoZGF0YTogYW55KSB7XG4gICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgICAgc3Bhbi5zZXRTdGF0dXMoeyBjb2RlOiBTcGFuU3RhdHVzQ29kZS5FUlJPUiB9KTtcbiAgICAgIH1cblxuICAgICAgc3Bhbi5lbmQoKTtcbiAgICAgIHJldHVybiBvcmlnaW5hbFNlbmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICB9O1xuXG4gICAgLy8gUnVuIGhhbmRsZXIgaW4gc3BhbiBjb250ZXh0XG4gICAgY29udGV4dC53aXRoKHRyYWNlLnNldFNwYW4oY29udGV4dC5hY3RpdmUoKSwgc3BhbiksICgpID0+IHtcbiAgICAgIG5leHQoKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjaGlsZCBzcGFuIGZvciBkYXRhYmFzZSBvcGVyYXRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEYXRhYmFzZVNwYW4ob3BlcmF0aW9uOiBzdHJpbmcsIHF1ZXJ5OiBzdHJpbmcpIHtcbiAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCdkYXRhYmFzZScpO1xuICBjb25zdCBzcGFuID0gdHJhY2VyLnN0YXJ0U3BhbihgZGIuJHtvcGVyYXRpb259YCk7XG5cbiAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAnZGIub3BlcmF0aW9uJzogb3BlcmF0aW9uLFxuICAgICdkYi5zdGF0ZW1lbnQnOiBxdWVyeSxcbiAgfSk7XG5cbiAgcmV0dXJuIHNwYW47XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgY2hpbGQgc3BhbiBmb3IgZXh0ZXJuYWwgc2VydmljZSBjYWxsc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VydmljZVNwYW4oc2VydmljZU5hbWU6IHN0cmluZywgbWV0aG9kOiBzdHJpbmcsIHBhdGg6IHN0cmluZykge1xuICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoJ2h0dHAtY2xpZW50Jyk7XG4gIGNvbnN0IHNwYW4gPSB0cmFjZXIuc3RhcnRTcGFuKGAke3NlcnZpY2VOYW1lfS4ke21ldGhvZH1gKTtcblxuICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAnaHR0cC51cmwnOiBwYXRoLFxuICAgICdwZWVyLnNlcnZpY2UnOiBzZXJ2aWNlTmFtZSxcbiAgfSk7XG5cbiAgcmV0dXJuIHNwYW47XG59XG5cbi8qKlxuICogUmVjb3JkIGFuIGVycm9yIGluIHRoZSBjdXJyZW50IHNwYW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY29yZEVycm9yKGVycm9yOiBFcnJvcikge1xuICBjb25zdCBzcGFuID0gdHJhY2UuZ2V0QWN0aXZlU3BhbigpO1xuICBpZiAoc3Bhbikge1xuICAgIHNwYW4ucmVjb3JkRXhjZXB0aW9uKGVycm9yKTtcbiAgICBzcGFuLnNldFN0YXR1cyh7IGNvZGU6IFNwYW5TdGF0dXNDb2RlLkVSUk9SIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaW5pdGlhbGl6ZVRyYWNpbmcsXG4gIGdldFRyYWNlcixcbiAgdHJhY2luZ01pZGRsZXdhcmUsXG4gIGNyZWF0ZURhdGFiYXNlU3BhbixcbiAgY3JlYXRlU2VydmljZVNwYW4sXG4gIHJlY29yZEVycm9yLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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