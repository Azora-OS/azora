{"version":3,"names":["cov_2nn151hlmf","actualCoverage","ethers","config","BlockchainService","wallet","s","constructor","f","provider","JsonRpcProvider","rpcUrl","privateKey","b","Wallet","getBlockNumber","getBalance","address","balance","formatEther","getWallet","Error","getProvider","getContract","abi","Contract"],"sources":["blockchain-service.ts"],"sourcesContent":["import { ethers } from 'ethers';\nimport { config } from './config';\n\nexport class BlockchainService {\n    private provider: ethers.JsonRpcProvider;\n    private wallet: ethers.Wallet | null = null;\n\n    constructor() {\n        this.provider = new ethers.JsonRpcProvider(config.rpcUrl);\n        if (config.privateKey) {\n            this.wallet = new ethers.Wallet(config.privateKey, this.provider);\n        }\n    }\n\n    async getBlockNumber(): Promise<number> {\n        return await this.provider.getBlockNumber();\n    }\n\n    async getBalance(address: string): Promise<string> {\n        const balance = await this.provider.getBalance(address);\n        return ethers.formatEther(balance);\n    }\n\n    getWallet(): ethers.Wallet {\n        if (!this.wallet) {\n            throw new Error('Wallet not initialized. Provide BLOCKCHAIN_PRIVATE_KEY in .env');\n        }\n        return this.wallet;\n    }\n\n    getProvider(): ethers.JsonRpcProvider {\n        return this.provider;\n    }\n\n    async getContract(address: string, abi: any): Promise<ethers.Contract> {\n        if (this.wallet) {\n            return new ethers.Contract(address, abi, this.wallet);\n        }\n        return new ethers.Contract(address, abi, this.provider);\n    }\n}\n"],"mappings":"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","ignoreList":[]}