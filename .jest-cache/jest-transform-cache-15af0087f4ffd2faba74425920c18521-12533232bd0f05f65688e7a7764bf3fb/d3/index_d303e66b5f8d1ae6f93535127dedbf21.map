{"version":3,"names":["cov_9wcuzo9bq","actualCoverage","csrf","s","require","jwt","rateLimit","helmet","z","csrfProtection","cookie","httpOnly","secure","process","env","NODE_ENV","sameSite","authenticate","req","res","next","f","token","headers","authorization","split","b","status","json","error","decoded","verify","JWT_SECRET","user","err","authorize","roles","includes","role","secureCors","origin","callback","allowedOrigins","ALLOWED_ORIGINS","Error","credentials","methods","allowedHeaders","createRateLimiter","windowMs","max","message","standardHeaders","legacyHeaders","rateLimiters","standard","strict","auth","financial","secureHeaders","contentSecurityPolicy","directives","defaultSrc","connectSrc","styleSrc","scriptSrc","imgSrc","fontSrc","objectSrc","upgradeInsecureRequests","hsts","maxAge","includeSubDomains","preload","noSniff","xssFilter","referrerPolicy","policy","validateInput","schema","parse","body","details","errors","sanitizeInput","sanitize","obj","replace","char","entities","Array","isArray","map","Object","keys","reduce","acc","key","query","params","errorHandler","console","code","name","statusCode","stack","module","exports"],"sources":["index.js"],"sourcesContent":["const csrf = require('csurf');\nconst jwt = require('jsonwebtoken');\nconst rateLimit = require('express-rate-limit');\nconst helmet = require('helmet');\nconst { z } = require('zod');\n\n// CSRF Protection\nconst csrfProtection = csrf({ \n  cookie: { \n    httpOnly: true, \n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'strict'\n  } \n});\n\n// Authentication\nconst authenticate = (req, res, next) => {\n  const token = req.headers.authorization?.split(' ')[1];\n  if (!token) {return res.status(401).json({ error: 'Authentication required' });}\n\n  try {\n    const decoded = jwt.verify(token, process.env.JWT_SECRET || 'azora-secret-key');\n    req.user = decoded;\n    next();\n  } catch (err) {\n    res.status(401).json({ error: 'Invalid token' });\n  }\n};\n\n// Authorization\nconst authorize = (...roles) => (req, res, next) => {\n  if (!req.user) {return res.status(401).json({ error: 'Authentication required' });}\n  if (!roles.includes(req.user.role)) {return res.status(403).json({ error: 'Insufficient permissions' });}\n  next();\n};\n\n// Secure CORS\nconst secureCors = require('cors')({\n  origin: (origin, callback) => {\n    const allowedOrigins = process.env.ALLOWED_ORIGINS?.split(',') || [\n      'http://localhost:3000',\n      'http://localhost:3001',\n      'http://localhost:3002',\n      'http://localhost:3003'\n    ];\n    if (!origin || allowedOrigins.includes(origin)) {\n      callback(null, true);\n    } else {\n      callback(new Error('Not allowed by CORS'));\n    }\n  },\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-CSRF-Token']\n});\n\n// Rate Limiters\nconst createRateLimiter = (windowMs = 15 * 60 * 1000, max = 100) => rateLimit({\n  windowMs,\n  max,\n  message: { error: 'Too many requests, please try again later' },\n  standardHeaders: true,\n  legacyHeaders: false\n});\n\nconst rateLimiters = {\n  standard: createRateLimiter(15 * 60 * 1000, 100),\n  strict: createRateLimiter(15 * 60 * 1000, 50),\n  auth: createRateLimiter(15 * 60 * 1000, 5),\n  financial: createRateLimiter(15 * 60 * 1000, 20)\n};\n\n// Helmet Security Headers\nconst secureHeaders = helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      connectSrc: [\"'self'\", \"http://localhost:*\", \"ws://localhost:*\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      scriptSrc: [\"'self'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      fontSrc: [\"'self'\", \"data:\"],\n      objectSrc: [\"'none'\"],\n      upgradeInsecureRequests: []\n    }\n  },\n  hsts: { maxAge: 31536000, includeSubDomains: true, preload: true },\n  noSniff: true,\n  xssFilter: true,\n  referrerPolicy: { policy: 'strict-origin-when-cross-origin' }\n});\n\n// Input Validation\nconst validateInput = (schema) => (req, res, next) => {\n  try {\n    schema.parse(req.body);\n    next();\n  } catch (err) {\n    res.status(400).json({ error: 'Invalid input', details: err.errors });\n  }\n};\n\n// Sanitize Input\nconst sanitizeInput = (req, res, next) => {\n  const sanitize = (obj) => {\n    if (typeof obj === 'string') {\n      return obj.replace(/[<>\"'&]/g, (char) => {\n        const entities = { '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#x27;', '&': '&amp;' };\n        return entities[char];\n      });\n    }\n    if (Array.isArray(obj)) {return obj.map(sanitize);}\n    if (obj && typeof obj === 'object') {\n      return Object.keys(obj).reduce((acc, key) => {\n        acc[key] = sanitize(obj[key]);\n        return acc;\n      }, {});\n    }\n    return obj;\n  };\n  \n  if (req.body) {req.body = sanitize(req.body);}\n  if (req.query) {req.query = sanitize(req.query);}\n  if (req.params) {req.params = sanitize(req.params);}\n  next();\n};\n\n// Error Handler\nconst errorHandler = (err, req, res, next) => {\n  console.error('Error:', err);\n  \n  if (err.code === 'EBADCSRFTOKEN') {\n    return res.status(403).json({ error: 'Invalid CSRF token' });\n  }\n  \n  if (err.name === 'ValidationError') {\n    return res.status(400).json({ error: 'Validation failed', details: err.message });\n  }\n  \n  if (err.name === 'UnauthorizedError') {\n    return res.status(401).json({ error: 'Unauthorized' });\n  }\n  \n  const statusCode = err.status || err.statusCode || 500;\n  const message = process.env.NODE_ENV === 'production' ? 'Internal server error' : err.message;\n  \n  res.status(statusCode).json({ \n    error: message,\n    ...(process.env.NODE_ENV !== 'production' && { stack: err.stack })\n  });\n};\n\nmodule.exports = { \n  csrfProtection, \n  authenticate, \n  authorize, \n  secureCors, \n  secureHeaders,\n  rateLimiters,\n  validateInput,\n  sanitizeInput,\n  errorHandler \n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}