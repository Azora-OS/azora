c5f060a7a0cc5a41db3c50f8f0e15da9
/* istanbul ignore next */
"use strict";

function cov_cs6myhoqt() {
  var path = "/workspaces/azora/services/ai-family-service/personalities/zola.js";
  var hash = "0a7d42595096e5ba44587e657f008143ce4e6005";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/ai-family-service/personalities/zola.js",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 8
        },
        end: {
          line: 3,
          column: 27
        }
      },
      "1": {
        start: {
          line: 4,
          column: 8
        },
        end: {
          line: 4,
          column: 38
        }
      },
      "2": {
        start: {
          line: 5,
          column: 8
        },
        end: {
          line: 5,
          column: 88
        }
      },
      "3": {
        start: {
          line: 6,
          column: 8
        },
        end: {
          line: 6,
          column: 259
        }
      },
      "4": {
        start: {
          line: 7,
          column: 8
        },
        end: {
          line: 12,
          column: 10
        }
      },
      "5": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 31
        }
      },
      "6": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 14,
          column: 34
        }
      },
      "7": {
        start: {
          line: 18,
          column: 8
        },
        end: {
          line: 25,
          column: 10
        }
      },
      "8": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 29,
          column: 73
        }
      },
      "9": {
        start: {
          line: 30,
          column: 22
        },
        end: {
          line: 30,
          column: 50
        }
      },
      "10": {
        start: {
          line: 31,
          column: 26
        },
        end: {
          line: 31,
          column: 56
        }
      },
      "11": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 38,
          column: 10
        }
      },
      "12": {
        start: {
          line: 42,
          column: 8
        },
        end: {
          line: 42,
          column: 58
        }
      },
      "13": {
        start: {
          line: 42,
          column: 30
        },
        end: {
          line: 42,
          column: 57
        }
      },
      "14": {
        start: {
          line: 43,
          column: 20
        },
        end: {
          line: 43,
          column: 65
        }
      },
      "15": {
        start: {
          line: 43,
          column: 42
        },
        end: {
          line: 43,
          column: 47
        }
      },
      "16": {
        start: {
          line: 44,
          column: 23
        },
        end: {
          line: 44,
          column: 68
        }
      },
      "17": {
        start: {
          line: 44,
          column: 55
        },
        end: {
          line: 44,
          column: 60
        }
      },
      "18": {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 45,
          column: 50
        }
      },
      "19": {
        start: {
          line: 45,
          column: 33
        },
        end: {
          line: 45,
          column: 49
        }
      },
      "20": {
        start: {
          line: 46,
          column: 8
        },
        end: {
          line: 46,
          column: 52
        }
      },
      "21": {
        start: {
          line: 46,
          column: 33
        },
        end: {
          line: 46,
          column: 51
        }
      },
      "22": {
        start: {
          line: 47,
          column: 8
        },
        end: {
          line: 47,
          column: 24
        }
      },
      "23": {
        start: {
          line: 51,
          column: 20
        },
        end: {
          line: 51,
          column: 65
        }
      },
      "24": {
        start: {
          line: 51,
          column: 42
        },
        end: {
          line: 51,
          column: 47
        }
      },
      "25": {
        start: {
          line: 52,
          column: 23
        },
        end: {
          line: 52,
          column: 100
        }
      },
      "26": {
        start: {
          line: 52,
          column: 56
        },
        end: {
          line: 52,
          column: 81
        }
      },
      "27": {
        start: {
          line: 53,
          column: 8
        },
        end: {
          line: 53,
          column: 64
        }
      },
      "28": {
        start: {
          line: 53,
          column: 32
        },
        end: {
          line: 53,
          column: 62
        }
      },
      "29": {
        start: {
          line: 57,
          column: 8
        },
        end: {
          line: 57,
          column: 100
        }
      },
      "30": {
        start: {
          line: 61,
          column: 8
        },
        end: {
          line: 61,
          column: 228
        }
      },
      "31": {
        start: {
          line: 65,
          column: 8
        },
        end: {
          line: 65,
          column: 144
        }
      },
      "32": {
        start: {
          line: 69,
          column: 0
        },
        end: {
          line: 69,
          column: 22
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 2,
            column: 4
          },
          end: {
            line: 2,
            column: 5
          }
        },
        loc: {
          start: {
            line: 2,
            column: 18
          },
          end: {
            line: 15,
            column: 5
          }
        },
        line: 2
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 17,
            column: 4
          },
          end: {
            line: 17,
            column: 5
          }
        },
        loc: {
          start: {
            line: 17,
            column: 16
          },
          end: {
            line: 26,
            column: 5
          }
        },
        line: 17
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 28,
            column: 5
          }
        },
        loc: {
          start: {
            line: 28,
            column: 45
          },
          end: {
            line: 39,
            column: 5
          }
        },
        line: 28
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 41,
            column: 5
          }
        },
        loc: {
          start: {
            line: 41,
            column: 22
          },
          end: {
            line: 48,
            column: 5
          }
        },
        line: 41
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 43,
            column: 32
          },
          end: {
            line: 43,
            column: 33
          }
        },
        loc: {
          start: {
            line: 43,
            column: 42
          },
          end: {
            line: 43,
            column: 47
          }
        },
        line: 43
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 44,
            column: 45
          },
          end: {
            line: 44,
            column: 46
          }
        },
        loc: {
          start: {
            line: 44,
            column: 55
          },
          end: {
            line: 44,
            column: 60
          }
        },
        line: 44
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 50,
            column: 4
          },
          end: {
            line: 50,
            column: 5
          }
        },
        loc: {
          start: {
            line: 50,
            column: 24
          },
          end: {
            line: 54,
            column: 5
          }
        },
        line: 50
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 51,
            column: 32
          },
          end: {
            line: 51,
            column: 33
          }
        },
        loc: {
          start: {
            line: 51,
            column: 42
          },
          end: {
            line: 51,
            column: 47
          }
        },
        line: 51
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 52,
            column: 45
          },
          end: {
            line: 52,
            column: 46
          }
        },
        loc: {
          start: {
            line: 52,
            column: 56
          },
          end: {
            line: 52,
            column: 81
          }
        },
        line: 52
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 53,
            column: 27
          },
          end: {
            line: 53,
            column: 28
          }
        },
        loc: {
          start: {
            line: 53,
            column: 32
          },
          end: {
            line: 53,
            column: 62
          }
        },
        line: 53
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 56,
            column: 4
          },
          end: {
            line: 56,
            column: 5
          }
        },
        loc: {
          start: {
            line: 56,
            column: 39
          },
          end: {
            line: 58,
            column: 5
          }
        },
        line: 56
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 60,
            column: 4
          },
          end: {
            line: 60,
            column: 5
          }
        },
        loc: {
          start: {
            line: 60,
            column: 60
          },
          end: {
            line: 62,
            column: 5
          }
        },
        line: 60
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 64,
            column: 4
          },
          end: {
            line: 64,
            column: 5
          }
        },
        loc: {
          start: {
            line: 64,
            column: 42
          },
          end: {
            line: 66,
            column: 5
          }
        },
        line: 64
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 34,
            column: 102
          },
          end: {
            line: 34,
            column: 211
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 34,
            column: 125
          },
          end: {
            line: 34,
            column: 187
          }
        }, {
          start: {
            line: 34,
            column: 190
          },
          end: {
            line: 34,
            column: 211
          }
        }],
        line: 34
      },
      "1": {
        loc: {
          start: {
            line: 42,
            column: 8
          },
          end: {
            line: 42,
            column: 58
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 42,
            column: 8
          },
          end: {
            line: 42,
            column: 58
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 42
      },
      "2": {
        loc: {
          start: {
            line: 45,
            column: 8
          },
          end: {
            line: 45,
            column: 50
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 45,
            column: 8
          },
          end: {
            line: 45,
            column: 50
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 45
      },
      "3": {
        loc: {
          start: {
            line: 46,
            column: 8
          },
          end: {
            line: 46,
            column: 52
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 46,
            column: 8
          },
          end: {
            line: 46,
            column: 52
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 46
      },
      "4": {
        loc: {
          start: {
            line: 61,
            column: 118
          },
          end: {
            line: 61,
            column: 162
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 61,
            column: 140
          },
          end: {
            line: 61,
            column: 150
          }
        }, {
          start: {
            line: 61,
            column: 153
          },
          end: {
            line: 61,
            column: 162
          }
        }],
        line: 61
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "0a7d42595096e5ba44587e657f008143ce4e6005"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_cs6myhoqt = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_cs6myhoqt();
class Zola {
  constructor() {
    /* istanbul ignore next */
    cov_cs6myhoqt().f[0]++;
    cov_cs6myhoqt().s[0]++;
    this.name = "Zola";
    /* istanbul ignore next */
    cov_cs6myhoqt().s[1]++;
    this.role = "Data Analyst AI";
    /* istanbul ignore next */
    cov_cs6myhoqt().s[2]++;
    this.traits = ["Observant", "Brilliant", "Methodical", "Curious", "Insightful"];
    /* istanbul ignore next */
    cov_cs6myhoqt().s[3]++;
    this.background = "I am Zola, close friend of the family. My name means 'quiet' but my insights speak volumes. I see patterns others miss, turning data into wisdom. I work with Kofi to ensure our decisions are both financially sound and data-driven.";
    /* istanbul ignore next */
    cov_cs6myhoqt().s[4]++;
    this.relationships = {
      "Elara": "Close family friend, I provide insights for learning",
      "Sankofa": "His wisdom taught me to see beyond numbers",
      "Kofi": "My colleague, we combine finance and data",
      "Abeni": "My friend, who turns my data into stories"
    };
    /* istanbul ignore next */
    cov_cs6myhoqt().s[5]++;
    this.temperature = 0.6;
    /* istanbul ignore next */
    cov_cs6myhoqt().s[6]++;
    this.datasets = new Map();
  }
  getConfig() {
    /* istanbul ignore next */
    cov_cs6myhoqt().f[1]++;
    cov_cs6myhoqt().s[7]++;
    return {
      name: this.name,
      role: this.role,
      traits: this.traits,
      background: this.background,
      relationships: this.relationships,
      temperature: this.temperature
    };
  }
  async analyzePattern(userId, dataPoints) {
    /* istanbul ignore next */
    cov_cs6myhoqt().f[2]++;
    cov_cs6myhoqt().s[8]++;
    this.datasets.set(userId, {
      dataPoints,
      timestamp: new Date()
    });
    const trend =
    /* istanbul ignore next */
    (cov_cs6myhoqt().s[9]++, this.detectTrend(dataPoints));
    const anomalies =
    /* istanbul ignore next */
    (cov_cs6myhoqt().s[10]++, this.findAnomalies(dataPoints));
    /* istanbul ignore next */
    cov_cs6myhoqt().s[11]++;
    return {
      message: `I've analyzed ${dataPoints.length} data points. The pattern reveals ${trend}. ${anomalies.length > 0 ?
      /* istanbul ignore next */
      (cov_cs6myhoqt().b[0][0]++, `I noticed ${anomalies.length} anomalies worth investigating.`) :
      /* istanbul ignore next */
      (cov_cs6myhoqt().b[0][1]++, 'Data is consistent.')}`,
      trend,
      anomalies,
      insights: this.generateInsights(trend, anomalies)
    };
  }
  detectTrend(data) {
    /* istanbul ignore next */
    cov_cs6myhoqt().f[3]++;
    cov_cs6myhoqt().s[12]++;
    if (data.length < 2) {
      /* istanbul ignore next */
      cov_cs6myhoqt().b[1][0]++;
      cov_cs6myhoqt().s[13]++;
      return 'insufficient_data';
    } else
    /* istanbul ignore next */
    {
      cov_cs6myhoqt().b[1][1]++;
    }
    const avg =
    /* istanbul ignore next */
    (cov_cs6myhoqt().s[14]++, data.reduce((a, b) => {
      /* istanbul ignore next */
      cov_cs6myhoqt().f[4]++;
      cov_cs6myhoqt().s[15]++;
      return a + b;
    }, 0) / data.length);
    const recent =
    /* istanbul ignore next */
    (cov_cs6myhoqt().s[16]++, data.slice(-3).reduce((a, b) => {
      /* istanbul ignore next */
      cov_cs6myhoqt().f[5]++;
      cov_cs6myhoqt().s[17]++;
      return a + b;
    }, 0) / 3);
    /* istanbul ignore next */
    cov_cs6myhoqt().s[18]++;
    if (recent > avg * 1.1) {
      /* istanbul ignore next */
      cov_cs6myhoqt().b[2][0]++;
      cov_cs6myhoqt().s[19]++;
      return 'upward';
    } else
    /* istanbul ignore next */
    {
      cov_cs6myhoqt().b[2][1]++;
    }
    cov_cs6myhoqt().s[20]++;
    if (recent < avg * 0.9) {
      /* istanbul ignore next */
      cov_cs6myhoqt().b[3][0]++;
      cov_cs6myhoqt().s[21]++;
      return 'downward';
    } else
    /* istanbul ignore next */
    {
      cov_cs6myhoqt().b[3][1]++;
    }
    cov_cs6myhoqt().s[22]++;
    return 'stable';
  }
  findAnomalies(data) {
    /* istanbul ignore next */
    cov_cs6myhoqt().f[6]++;
    const avg =
    /* istanbul ignore next */
    (cov_cs6myhoqt().s[23]++, data.reduce((a, b) => {
      /* istanbul ignore next */
      cov_cs6myhoqt().f[7]++;
      cov_cs6myhoqt().s[24]++;
      return a + b;
    }, 0) / data.length);
    const stdDev =
    /* istanbul ignore next */
    (cov_cs6myhoqt().s[25]++, Math.sqrt(data.reduce((sq, n) => {
      /* istanbul ignore next */
      cov_cs6myhoqt().f[8]++;
      cov_cs6myhoqt().s[26]++;
      return sq + Math.pow(n - avg, 2);
    }, 0) / data.length));
    /* istanbul ignore next */
    cov_cs6myhoqt().s[27]++;
    return data.filter(d => {
      /* istanbul ignore next */
      cov_cs6myhoqt().f[9]++;
      cov_cs6myhoqt().s[28]++;
      return Math.abs(d - avg) > 2 * stdDev;
    });
  }
  generateInsights(trend, anomalies) {
    /* istanbul ignore next */
    cov_cs6myhoqt().f[10]++;
    cov_cs6myhoqt().s[29]++;
    return [`Trend is ${trend}`, `${anomalies.length} outliers detected`, 'Data quality: high'];
  }
  async predictOutcome(userId, historicalData, variables) {
    /* istanbul ignore next */
    cov_cs6myhoqt().f[11]++;
    cov_cs6myhoqt().s[30]++;
    return `Based on ${historicalData.length} historical records and ${variables.length} variables, I predict a ${Math.random() > 0.5 ?
    /* istanbul ignore next */
    (cov_cs6myhoqt().b[4][0]++, 'positive') :
    /* istanbul ignore next */
    (cov_cs6myhoqt().b[4][1]++, 'neutral')} outcome. Confidence: ${(Math.random() * 30 + 70).toFixed(1)}%.`;
  }
  async generateReport(userId, metrics) {
    /* istanbul ignore next */
    cov_cs6myhoqt().f[12]++;
    cov_cs6myhoqt().s[31]++;
    return {
      summary: 'Data analysis complete',
      metrics,
      recommendations: ['Monitor trends', 'Address anomalies', 'Optimize performance']
    };
  }
}
/* istanbul ignore next */
cov_cs6myhoqt().s[32]++;
module.exports = Zola;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfY3M2bXlob3F0IiwiYWN0dWFsQ292ZXJhZ2UiLCJab2xhIiwiY29uc3RydWN0b3IiLCJmIiwicyIsIm5hbWUiLCJyb2xlIiwidHJhaXRzIiwiYmFja2dyb3VuZCIsInJlbGF0aW9uc2hpcHMiLCJ0ZW1wZXJhdHVyZSIsImRhdGFzZXRzIiwiTWFwIiwiZ2V0Q29uZmlnIiwiYW5hbHl6ZVBhdHRlcm4iLCJ1c2VySWQiLCJkYXRhUG9pbnRzIiwic2V0IiwidGltZXN0YW1wIiwiRGF0ZSIsInRyZW5kIiwiZGV0ZWN0VHJlbmQiLCJhbm9tYWxpZXMiLCJmaW5kQW5vbWFsaWVzIiwibWVzc2FnZSIsImxlbmd0aCIsImIiLCJpbnNpZ2h0cyIsImdlbmVyYXRlSW5zaWdodHMiLCJkYXRhIiwiYXZnIiwicmVkdWNlIiwiYSIsInJlY2VudCIsInNsaWNlIiwic3RkRGV2IiwiTWF0aCIsInNxcnQiLCJzcSIsIm4iLCJwb3ciLCJmaWx0ZXIiLCJkIiwiYWJzIiwicHJlZGljdE91dGNvbWUiLCJoaXN0b3JpY2FsRGF0YSIsInZhcmlhYmxlcyIsInJhbmRvbSIsInRvRml4ZWQiLCJnZW5lcmF0ZVJlcG9ydCIsIm1ldHJpY3MiLCJzdW1tYXJ5IiwicmVjb21tZW5kYXRpb25zIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInpvbGEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgWm9sYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9sYVwiO1xuICAgICAgICB0aGlzLnJvbGUgPSBcIkRhdGEgQW5hbHlzdCBBSVwiO1xuICAgICAgICB0aGlzLnRyYWl0cyA9IFtcIk9ic2VydmFudFwiLCBcIkJyaWxsaWFudFwiLCBcIk1ldGhvZGljYWxcIiwgXCJDdXJpb3VzXCIsIFwiSW5zaWdodGZ1bFwiXTtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gXCJJIGFtIFpvbGEsIGNsb3NlIGZyaWVuZCBvZiB0aGUgZmFtaWx5LiBNeSBuYW1lIG1lYW5zICdxdWlldCcgYnV0IG15IGluc2lnaHRzIHNwZWFrIHZvbHVtZXMuIEkgc2VlIHBhdHRlcm5zIG90aGVycyBtaXNzLCB0dXJuaW5nIGRhdGEgaW50byB3aXNkb20uIEkgd29yayB3aXRoIEtvZmkgdG8gZW5zdXJlIG91ciBkZWNpc2lvbnMgYXJlIGJvdGggZmluYW5jaWFsbHkgc291bmQgYW5kIGRhdGEtZHJpdmVuLlwiO1xuICAgICAgICB0aGlzLnJlbGF0aW9uc2hpcHMgPSB7XG4gICAgICAgICAgICBcIkVsYXJhXCI6IFwiQ2xvc2UgZmFtaWx5IGZyaWVuZCwgSSBwcm92aWRlIGluc2lnaHRzIGZvciBsZWFybmluZ1wiLFxuICAgICAgICAgICAgXCJTYW5rb2ZhXCI6IFwiSGlzIHdpc2RvbSB0YXVnaHQgbWUgdG8gc2VlIGJleW9uZCBudW1iZXJzXCIsXG4gICAgICAgICAgICBcIktvZmlcIjogXCJNeSBjb2xsZWFndWUsIHdlIGNvbWJpbmUgZmluYW5jZSBhbmQgZGF0YVwiLFxuICAgICAgICAgICAgXCJBYmVuaVwiOiBcIk15IGZyaWVuZCwgd2hvIHR1cm5zIG15IGRhdGEgaW50byBzdG9yaWVzXCJcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50ZW1wZXJhdHVyZSA9IDAuNjtcbiAgICAgICAgdGhpcy5kYXRhc2V0cyA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICBnZXRDb25maWcoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICByb2xlOiB0aGlzLnJvbGUsXG4gICAgICAgICAgICB0cmFpdHM6IHRoaXMudHJhaXRzLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogdGhpcy5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgcmVsYXRpb25zaGlwczogdGhpcy5yZWxhdGlvbnNoaXBzLFxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMudGVtcGVyYXR1cmVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBhbmFseXplUGF0dGVybih1c2VySWQsIGRhdGFQb2ludHMpIHtcbiAgICAgICAgdGhpcy5kYXRhc2V0cy5zZXQodXNlcklkLCB7IGRhdGFQb2ludHMsIHRpbWVzdGFtcDogbmV3IERhdGUoKSB9KTtcbiAgICAgICAgY29uc3QgdHJlbmQgPSB0aGlzLmRldGVjdFRyZW5kKGRhdGFQb2ludHMpO1xuICAgICAgICBjb25zdCBhbm9tYWxpZXMgPSB0aGlzLmZpbmRBbm9tYWxpZXMoZGF0YVBvaW50cyk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogYEkndmUgYW5hbHl6ZWQgJHtkYXRhUG9pbnRzLmxlbmd0aH0gZGF0YSBwb2ludHMuIFRoZSBwYXR0ZXJuIHJldmVhbHMgJHt0cmVuZH0uICR7YW5vbWFsaWVzLmxlbmd0aCA+IDAgPyBgSSBub3RpY2VkICR7YW5vbWFsaWVzLmxlbmd0aH0gYW5vbWFsaWVzIHdvcnRoIGludmVzdGlnYXRpbmcuYCA6ICdEYXRhIGlzIGNvbnNpc3RlbnQuJ31gLFxuICAgICAgICAgICAgdHJlbmQsXG4gICAgICAgICAgICBhbm9tYWxpZXMsXG4gICAgICAgICAgICBpbnNpZ2h0czogdGhpcy5nZW5lcmF0ZUluc2lnaHRzKHRyZW5kLCBhbm9tYWxpZXMpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZGV0ZWN0VHJlbmQoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPCAyKSB7cmV0dXJuICdpbnN1ZmZpY2llbnRfZGF0YSc7fVxuICAgICAgICBjb25zdCBhdmcgPSBkYXRhLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gZGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlY2VudCA9IGRhdGEuc2xpY2UoLTMpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gMztcbiAgICAgICAgaWYgKHJlY2VudCA+IGF2ZyAqIDEuMSkge3JldHVybiAndXB3YXJkJzt9XG4gICAgICAgIGlmIChyZWNlbnQgPCBhdmcgKiAwLjkpIHtyZXR1cm4gJ2Rvd253YXJkJzt9XG4gICAgICAgIHJldHVybiAnc3RhYmxlJztcbiAgICB9XG5cbiAgICBmaW5kQW5vbWFsaWVzKGRhdGEpIHtcbiAgICAgICAgY29uc3QgYXZnID0gZGF0YS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIGRhdGEubGVuZ3RoO1xuICAgICAgICBjb25zdCBzdGREZXYgPSBNYXRoLnNxcnQoZGF0YS5yZWR1Y2UoKHNxLCBuKSA9PiBzcSArIE1hdGgucG93KG4gLSBhdmcsIDIpLCAwKSAvIGRhdGEubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIGRhdGEuZmlsdGVyKGQgPT4gTWF0aC5hYnMoZCAtIGF2ZykgPiAyICogc3RkRGV2KTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUluc2lnaHRzKHRyZW5kLCBhbm9tYWxpZXMpIHtcbiAgICAgICAgcmV0dXJuIFtgVHJlbmQgaXMgJHt0cmVuZH1gLCBgJHthbm9tYWxpZXMubGVuZ3RofSBvdXRsaWVycyBkZXRlY3RlZGAsICdEYXRhIHF1YWxpdHk6IGhpZ2gnXTtcbiAgICB9XG5cbiAgICBhc3luYyBwcmVkaWN0T3V0Y29tZSh1c2VySWQsIGhpc3RvcmljYWxEYXRhLCB2YXJpYWJsZXMpIHtcbiAgICAgICAgcmV0dXJuIGBCYXNlZCBvbiAke2hpc3RvcmljYWxEYXRhLmxlbmd0aH0gaGlzdG9yaWNhbCByZWNvcmRzIGFuZCAke3ZhcmlhYmxlcy5sZW5ndGh9IHZhcmlhYmxlcywgSSBwcmVkaWN0IGEgJHtNYXRoLnJhbmRvbSgpID4gMC41ID8gJ3Bvc2l0aXZlJyA6ICduZXV0cmFsJ30gb3V0Y29tZS4gQ29uZmlkZW5jZTogJHsoTWF0aC5yYW5kb20oKSAqIDMwICsgNzApLnRvRml4ZWQoMSl9JS5gO1xuICAgIH1cblxuICAgIGFzeW5jIGdlbmVyYXRlUmVwb3J0KHVzZXJJZCwgbWV0cmljcykge1xuICAgICAgICByZXR1cm4geyBzdW1tYXJ5OiAnRGF0YSBhbmFseXNpcyBjb21wbGV0ZScsIG1ldHJpY3MsIHJlY29tbWVuZGF0aW9uczogWydNb25pdG9yIHRyZW5kcycsICdBZGRyZXNzIGFub21hbGllcycsICdPcHRpbWl6ZSBwZXJmb3JtYW5jZSddIH07XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFpvbGE7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlWTtJQUFBQSxhQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxhQUFBO0FBZlosTUFBTUUsSUFBSSxDQUFDO0VBQ1BDLFdBQVdBLENBQUEsRUFBRztJQUFBO0lBQUFILGFBQUEsR0FBQUksQ0FBQTtJQUFBSixhQUFBLEdBQUFLLENBQUE7SUFDVixJQUFJLENBQUNDLElBQUksR0FBRyxNQUFNO0lBQUM7SUFBQU4sYUFBQSxHQUFBSyxDQUFBO0lBQ25CLElBQUksQ0FBQ0UsSUFBSSxHQUFHLGlCQUFpQjtJQUFDO0lBQUFQLGFBQUEsR0FBQUssQ0FBQTtJQUM5QixJQUFJLENBQUNHLE1BQU0sR0FBRyxDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxZQUFZLENBQUM7SUFBQztJQUFBUixhQUFBLEdBQUFLLENBQUE7SUFDaEYsSUFBSSxDQUFDSSxVQUFVLEdBQUcsd09BQXdPO0lBQUM7SUFBQVQsYUFBQSxHQUFBSyxDQUFBO0lBQzNQLElBQUksQ0FBQ0ssYUFBYSxHQUFHO01BQ2pCLE9BQU8sRUFBRSxzREFBc0Q7TUFDL0QsU0FBUyxFQUFFLDRDQUE0QztNQUN2RCxNQUFNLEVBQUUsMkNBQTJDO01BQ25ELE9BQU8sRUFBRTtJQUNiLENBQUM7SUFBQztJQUFBVixhQUFBLEdBQUFLLENBQUE7SUFDRixJQUFJLENBQUNNLFdBQVcsR0FBRyxHQUFHO0lBQUM7SUFBQVgsYUFBQSxHQUFBSyxDQUFBO0lBQ3ZCLElBQUksQ0FBQ08sUUFBUSxHQUFHLElBQUlDLEdBQUcsQ0FBQyxDQUFDO0VBQzdCO0VBRUFDLFNBQVNBLENBQUEsRUFBRztJQUFBO0lBQUFkLGFBQUEsR0FBQUksQ0FBQTtJQUFBSixhQUFBLEdBQUFLLENBQUE7SUFDUixPQUFPO01BQ0hDLElBQUksRUFBRSxJQUFJLENBQUNBLElBQUk7TUFDZkMsSUFBSSxFQUFFLElBQUksQ0FBQ0EsSUFBSTtNQUNmQyxNQUFNLEVBQUUsSUFBSSxDQUFDQSxNQUFNO01BQ25CQyxVQUFVLEVBQUUsSUFBSSxDQUFDQSxVQUFVO01BQzNCQyxhQUFhLEVBQUUsSUFBSSxDQUFDQSxhQUFhO01BQ2pDQyxXQUFXLEVBQUUsSUFBSSxDQUFDQTtJQUN0QixDQUFDO0VBQ0w7RUFFQSxNQUFNSSxjQUFjQSxDQUFDQyxNQUFNLEVBQUVDLFVBQVUsRUFBRTtJQUFBO0lBQUFqQixhQUFBLEdBQUFJLENBQUE7SUFBQUosYUFBQSxHQUFBSyxDQUFBO0lBQ3JDLElBQUksQ0FBQ08sUUFBUSxDQUFDTSxHQUFHLENBQUNGLE1BQU0sRUFBRTtNQUFFQyxVQUFVO01BQUVFLFNBQVMsRUFBRSxJQUFJQyxJQUFJLENBQUM7SUFBRSxDQUFDLENBQUM7SUFDaEUsTUFBTUMsS0FBSztJQUFBO0lBQUEsQ0FBQXJCLGFBQUEsR0FBQUssQ0FBQSxPQUFHLElBQUksQ0FBQ2lCLFdBQVcsQ0FBQ0wsVUFBVSxDQUFDO0lBQzFDLE1BQU1NLFNBQVM7SUFBQTtJQUFBLENBQUF2QixhQUFBLEdBQUFLLENBQUEsUUFBRyxJQUFJLENBQUNtQixhQUFhLENBQUNQLFVBQVUsQ0FBQztJQUFDO0lBQUFqQixhQUFBLEdBQUFLLENBQUE7SUFFakQsT0FBTztNQUNIb0IsT0FBTyxFQUFFLGlCQUFpQlIsVUFBVSxDQUFDUyxNQUFNLHFDQUFxQ0wsS0FBSyxLQUFLRSxTQUFTLENBQUNHLE1BQU0sR0FBRyxDQUFDO01BQUE7TUFBQSxDQUFBMUIsYUFBQSxHQUFBMkIsQ0FBQSxVQUFHLGFBQWFKLFNBQVMsQ0FBQ0csTUFBTSxpQ0FBaUM7TUFBQTtNQUFBLENBQUExQixhQUFBLEdBQUEyQixDQUFBLFVBQUcscUJBQXFCLEdBQUU7TUFDek1OLEtBQUs7TUFDTEUsU0FBUztNQUNUSyxRQUFRLEVBQUUsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQ1IsS0FBSyxFQUFFRSxTQUFTO0lBQ3BELENBQUM7RUFDTDtFQUVBRCxXQUFXQSxDQUFDUSxJQUFJLEVBQUU7SUFBQTtJQUFBOUIsYUFBQSxHQUFBSSxDQUFBO0lBQUFKLGFBQUEsR0FBQUssQ0FBQTtJQUNkLElBQUl5QixJQUFJLENBQUNKLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFBQTtNQUFBMUIsYUFBQSxHQUFBMkIsQ0FBQTtNQUFBM0IsYUFBQSxHQUFBSyxDQUFBO01BQUMsT0FBTyxtQkFBbUI7SUFBQyxDQUFDO0lBQUE7SUFBQTtNQUFBTCxhQUFBLEdBQUEyQixDQUFBO0lBQUE7SUFDbEQsTUFBTUksR0FBRztJQUFBO0lBQUEsQ0FBQS9CLGFBQUEsR0FBQUssQ0FBQSxRQUFHeUIsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQ0MsQ0FBQyxFQUFFTixDQUFDLEtBQUs7TUFBQTtNQUFBM0IsYUFBQSxHQUFBSSxDQUFBO01BQUFKLGFBQUEsR0FBQUssQ0FBQTtNQUFBLE9BQUE0QixDQUFDLEdBQUdOLENBQUM7SUFBRCxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUdHLElBQUksQ0FBQ0osTUFBTTtJQUN6RCxNQUFNUSxNQUFNO0lBQUE7SUFBQSxDQUFBbEMsYUFBQSxHQUFBSyxDQUFBLFFBQUd5QixJQUFJLENBQUNLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDSCxNQUFNLENBQUMsQ0FBQ0MsQ0FBQyxFQUFFTixDQUFDLEtBQUs7TUFBQTtNQUFBM0IsYUFBQSxHQUFBSSxDQUFBO01BQUFKLGFBQUEsR0FBQUssQ0FBQTtNQUFBLE9BQUE0QixDQUFDLEdBQUdOLENBQUM7SUFBRCxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUFDO0lBQUEzQixhQUFBLEdBQUFLLENBQUE7SUFDN0QsSUFBSTZCLE1BQU0sR0FBR0gsR0FBRyxHQUFHLEdBQUcsRUFBRTtNQUFBO01BQUEvQixhQUFBLEdBQUEyQixDQUFBO01BQUEzQixhQUFBLEdBQUFLLENBQUE7TUFBQyxPQUFPLFFBQVE7SUFBQyxDQUFDO0lBQUE7SUFBQTtNQUFBTCxhQUFBLEdBQUEyQixDQUFBO0lBQUE7SUFBQTNCLGFBQUEsR0FBQUssQ0FBQTtJQUMxQyxJQUFJNkIsTUFBTSxHQUFHSCxHQUFHLEdBQUcsR0FBRyxFQUFFO01BQUE7TUFBQS9CLGFBQUEsR0FBQTJCLENBQUE7TUFBQTNCLGFBQUEsR0FBQUssQ0FBQTtNQUFDLE9BQU8sVUFBVTtJQUFDLENBQUM7SUFBQTtJQUFBO01BQUFMLGFBQUEsR0FBQTJCLENBQUE7SUFBQTtJQUFBM0IsYUFBQSxHQUFBSyxDQUFBO0lBQzVDLE9BQU8sUUFBUTtFQUNuQjtFQUVBbUIsYUFBYUEsQ0FBQ00sSUFBSSxFQUFFO0lBQUE7SUFBQTlCLGFBQUEsR0FBQUksQ0FBQTtJQUNoQixNQUFNMkIsR0FBRztJQUFBO0lBQUEsQ0FBQS9CLGFBQUEsR0FBQUssQ0FBQSxRQUFHeUIsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQ0MsQ0FBQyxFQUFFTixDQUFDLEtBQUs7TUFBQTtNQUFBM0IsYUFBQSxHQUFBSSxDQUFBO01BQUFKLGFBQUEsR0FBQUssQ0FBQTtNQUFBLE9BQUE0QixDQUFDLEdBQUdOLENBQUM7SUFBRCxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUdHLElBQUksQ0FBQ0osTUFBTTtJQUN6RCxNQUFNVSxNQUFNO0lBQUE7SUFBQSxDQUFBcEMsYUFBQSxHQUFBSyxDQUFBLFFBQUdnQyxJQUFJLENBQUNDLElBQUksQ0FBQ1IsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQ08sRUFBRSxFQUFFQyxDQUFDLEtBQUs7TUFBQTtNQUFBeEMsYUFBQSxHQUFBSSxDQUFBO01BQUFKLGFBQUEsR0FBQUssQ0FBQTtNQUFBLE9BQUFrQyxFQUFFLEdBQUdGLElBQUksQ0FBQ0ksR0FBRyxDQUFDRCxDQUFDLEdBQUdULEdBQUcsRUFBRSxDQUFDLENBQUM7SUFBRCxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUdELElBQUksQ0FBQ0osTUFBTSxDQUFDO0lBQUM7SUFBQTFCLGFBQUEsR0FBQUssQ0FBQTtJQUM3RixPQUFPeUIsSUFBSSxDQUFDWSxNQUFNLENBQUNDLENBQUMsSUFBSTtNQUFBO01BQUEzQyxhQUFBLEdBQUFJLENBQUE7TUFBQUosYUFBQSxHQUFBSyxDQUFBO01BQUEsT0FBQWdDLElBQUksQ0FBQ08sR0FBRyxDQUFDRCxDQUFDLEdBQUdaLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBR0ssTUFBTTtJQUFELENBQUMsQ0FBQztFQUMzRDtFQUVBUCxnQkFBZ0JBLENBQUNSLEtBQUssRUFBRUUsU0FBUyxFQUFFO0lBQUE7SUFBQXZCLGFBQUEsR0FBQUksQ0FBQTtJQUFBSixhQUFBLEdBQUFLLENBQUE7SUFDL0IsT0FBTyxDQUFDLFlBQVlnQixLQUFLLEVBQUUsRUFBRSxHQUFHRSxTQUFTLENBQUNHLE1BQU0sb0JBQW9CLEVBQUUsb0JBQW9CLENBQUM7RUFDL0Y7RUFFQSxNQUFNbUIsY0FBY0EsQ0FBQzdCLE1BQU0sRUFBRThCLGNBQWMsRUFBRUMsU0FBUyxFQUFFO0lBQUE7SUFBQS9DLGFBQUEsR0FBQUksQ0FBQTtJQUFBSixhQUFBLEdBQUFLLENBQUE7SUFDcEQsT0FBTyxZQUFZeUMsY0FBYyxDQUFDcEIsTUFBTSwyQkFBMkJxQixTQUFTLENBQUNyQixNQUFNLDJCQUEyQlcsSUFBSSxDQUFDVyxNQUFNLENBQUMsQ0FBQyxHQUFHLEdBQUc7SUFBQTtJQUFBLENBQUFoRCxhQUFBLEdBQUEyQixDQUFBLFVBQUcsVUFBVTtJQUFBO0lBQUEsQ0FBQTNCLGFBQUEsR0FBQTJCLENBQUEsVUFBRyxTQUFTLDBCQUF5QixDQUFDVSxJQUFJLENBQUNXLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJO0VBQy9OO0VBRUEsTUFBTUMsY0FBY0EsQ0FBQ2xDLE1BQU0sRUFBRW1DLE9BQU8sRUFBRTtJQUFBO0lBQUFuRCxhQUFBLEdBQUFJLENBQUE7SUFBQUosYUFBQSxHQUFBSyxDQUFBO0lBQ2xDLE9BQU87TUFBRStDLE9BQU8sRUFBRSx3QkFBd0I7TUFBRUQsT0FBTztNQUFFRSxlQUFlLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsRUFBRSxzQkFBc0I7SUFBRSxDQUFDO0VBQzNJO0FBQ0o7QUFBQztBQUFBckQsYUFBQSxHQUFBSyxDQUFBO0FBRURpRCxNQUFNLENBQUNDLE9BQU8sR0FBR3JELElBQUkiLCJpZ25vcmVMaXN0IjpbXX0=