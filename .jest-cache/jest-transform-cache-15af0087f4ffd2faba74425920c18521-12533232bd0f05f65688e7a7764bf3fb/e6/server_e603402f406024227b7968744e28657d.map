{"version":3,"names":["cov_lzocegcu6","actualCoverage","express","s","require","cors","helmet","compression","rateLimit","jwt","app","use","origin","b","process","env","ALLOWED_ORIGINS","split","credentials","optionsSuccessStatus","validateInput","req","res","next","f","body","Object","keys","forEach","key","replace","json","limit","console","log","enterprises","Map","licenses","whiteLabels","get","status","service","ubuntu","size","timestamp","Date","toISOString","post","name","domain","features","tier","enterprise","id","now","createdAt","set","success","message","data","error","enterpriseId","type","maxUsers","license","issuedAt","expiresAt","branding","customDomain","whiteLabel","PORT","listen","module","exports"],"sources":["server.js"],"sourcesContent":["const express = require('express');\nconst cors = require('cors');\nconst helmet = require('helmet');\nconst compression = require('compression');\nconst rateLimit = require('express-rate-limit');\nconst jwt = require('jsonwebtoken');\n\nconst app = express();\n\napp.use(helmet());\napp.use(cors({\n  origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000'],\n  credentials: true,\n  optionsSuccessStatus: 200\n}));\napp.use(compression());\n\n// Input validation middleware\nconst validateInput = (req, res, next) => {\n  if (req.body) {\n    Object.keys(req.body).forEach(key => {\n      if (typeof req.body[key] === 'string') {\n        req.body[key] = req.body[key].replace(/<script[^>]*>.*?<\\/script>/gi, '');\n        req.body[key] = req.body[key].replace(/javascript:/gi, '');\n      }\n    });\n  }\n  next();\n};\napp.use(validateInput);\n\napp.use(express.json({ limit: '10mb' }));\n\n// üè¢ AZORA ENTERPRISE - WHITE-LABEL SOLUTIONS\nconsole.log('üåü Azora Enterprise Solutions - Initializing...');\n\n// Enterprise features storage\nconst enterprises = new Map();\nconst licenses = new Map();\nconst whiteLabels = new Map();\n\n// üéØ API ROUTES\napp.get('/api/health', (req, res) => {\n  res.json({\n    status: 'healthy',\n    service: 'azora-enterprise',\n    ubuntu: 'I serve because we prosper together',\n    enterprises: enterprises.size,\n    licenses: licenses.size,\n    timestamp: new Date().toISOString()\n  });\n});\n\n// Enterprise Management\napp.post('/api/enterprises', (req, res) => {\n  try {\n    const { name, domain, features, tier } = req.body;\n    \n    const enterprise = {\n      id: `ent_${Date.now()}`,\n      name,\n      domain,\n      features: features || ['basic'],\n      tier: tier || 'STARTER',\n      status: 'ACTIVE',\n      createdAt: new Date().toISOString()\n    };\n    \n    enterprises.set(enterprise.id, enterprise);\n    \n    res.status(201).json({\n      success: true,\n      message: 'Enterprise created successfully',\n      data: enterprise\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to create enterprise' });\n  }\n});\n\n// License Management\napp.post('/api/licenses', (req, res) => {\n  try {\n    const { enterpriseId, type, features, maxUsers } = req.body;\n    \n    const license = {\n      id: `lic_${Date.now()}`,\n      enterpriseId,\n      type: type || 'STANDARD',\n      features: features || [],\n      maxUsers: maxUsers || 100,\n      status: 'ACTIVE',\n      issuedAt: new Date().toISOString(),\n      expiresAt: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString()\n    };\n    \n    licenses.set(license.id, license);\n    \n    res.status(201).json({\n      success: true,\n      message: 'License created successfully',\n      data: license\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to create license' });\n  }\n});\n\n// White-label Configuration\napp.post('/api/white-label', (req, res) => {\n  try {\n    const { enterpriseId, branding, customDomain, features } = req.body;\n    \n    const whiteLabel = {\n      id: `wl_${Date.now()}`,\n      enterpriseId,\n      branding: branding || {},\n      customDomain,\n      features: features || [],\n      status: 'ACTIVE',\n      createdAt: new Date().toISOString()\n    };\n    \n    whiteLabels.set(whiteLabel.id, whiteLabel);\n    \n    res.status(201).json({\n      success: true,\n      message: 'White-label configuration created',\n      data: whiteLabel\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to create white-label config' });\n  }\n});\n\nconst PORT = process.env.PORT || 3023;\napp.listen(PORT, () => {\n  console.log('üåü Azora Enterprise running on port', PORT);\n  console.log('üè¢ Features: White-label, Licensing, Enterprise Management');\n});\n\nmodule.exports = app;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAfZ,MAAME,OAAO;AAAA;AAAA,CAAAF,aAAA,GAAAG,CAAA,OAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,IAAI;AAAA;AAAA,CAAAL,aAAA,GAAAG,CAAA,OAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,MAAM;AAAA;AAAA,CAAAN,aAAA,GAAAG,CAAA,OAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMG,WAAW;AAAA;AAAA,CAAAP,aAAA,GAAAG,CAAA,OAAGC,OAAO,CAAC,aAAa,CAAC;AAC1C,MAAMI,SAAS;AAAA;AAAA,CAAAR,aAAA,GAAAG,CAAA,OAAGC,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAMK,GAAG;AAAA;AAAA,CAAAT,aAAA,GAAAG,CAAA,OAAGC,OAAO,CAAC,cAAc,CAAC;AAEnC,MAAMM,GAAG;AAAA;AAAA,CAAAV,aAAA,GAAAG,CAAA,OAAGD,OAAO,CAAC,CAAC;AAAC;AAAAF,aAAA,GAAAG,CAAA;AAEtBO,GAAG,CAACC,GAAG,CAACL,MAAM,CAAC,CAAC,CAAC;AAAC;AAAAN,aAAA,GAAAG,CAAA;AAClBO,GAAG,CAACC,GAAG,CAACN,IAAI,CAAC;EACXO,MAAM;EAAE;EAAA,CAAAZ,aAAA,GAAAa,CAAA,UAAAC,OAAO,CAACC,GAAG,CAACC,eAAe,EAAEC,KAAK,CAAC,GAAG,CAAC;EAAA;EAAA,CAAAjB,aAAA,GAAAa,CAAA,UAAI,CAAC,uBAAuB,CAAC;EAC5EK,WAAW,EAAE,IAAI;EACjBC,oBAAoB,EAAE;AACxB,CAAC,CAAC,CAAC;AAAC;AAAAnB,aAAA,GAAAG,CAAA;AACJO,GAAG,CAACC,GAAG,CAACJ,WAAW,CAAC,CAAC,CAAC;;AAEtB;AAAA;AAAAP,aAAA,GAAAG,CAAA;AACA,MAAMiB,aAAa,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAAA;EAAAvB,aAAA,GAAAwB,CAAA;EAAAxB,aAAA,GAAAG,CAAA;EACxC,IAAIkB,GAAG,CAACI,IAAI,EAAE;IAAA;IAAAzB,aAAA,GAAAa,CAAA;IAAAb,aAAA,GAAAG,CAAA;IACZuB,MAAM,CAACC,IAAI,CAACN,GAAG,CAACI,IAAI,CAAC,CAACG,OAAO,CAACC,GAAG,IAAI;MAAA;MAAA7B,aAAA,GAAAwB,CAAA;MAAAxB,aAAA,GAAAG,CAAA;MACnC,IAAI,OAAOkB,GAAG,CAACI,IAAI,CAACI,GAAG,CAAC,KAAK,QAAQ,EAAE;QAAA;QAAA7B,aAAA,GAAAa,CAAA;QAAAb,aAAA,GAAAG,CAAA;QACrCkB,GAAG,CAACI,IAAI,CAACI,GAAG,CAAC,GAAGR,GAAG,CAACI,IAAI,CAACI,GAAG,CAAC,CAACC,OAAO,CAAC,8BAA8B,EAAE,EAAE,CAAC;QAAC;QAAA9B,aAAA,GAAAG,CAAA;QAC1EkB,GAAG,CAACI,IAAI,CAACI,GAAG,CAAC,GAAGR,GAAG,CAACI,IAAI,CAACI,GAAG,CAAC,CAACC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC;MAC5D,CAAC;MAAA;MAAA;QAAA9B,aAAA,GAAAa,CAAA;MAAA;IACH,CAAC,CAAC;EACJ,CAAC;EAAA;EAAA;IAAAb,aAAA,GAAAa,CAAA;EAAA;EAAAb,aAAA,GAAAG,CAAA;EACDoB,IAAI,CAAC,CAAC;AACR,CAAC;AAAC;AAAAvB,aAAA,GAAAG,CAAA;AACFO,GAAG,CAACC,GAAG,CAACS,aAAa,CAAC;AAAC;AAAApB,aAAA,GAAAG,CAAA;AAEvBO,GAAG,CAACC,GAAG,CAACT,OAAO,CAAC6B,IAAI,CAAC;EAAEC,KAAK,EAAE;AAAO,CAAC,CAAC,CAAC;;AAExC;AAAA;AAAAhC,aAAA,GAAAG,CAAA;AACA8B,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC;;AAE9D;AACA,MAAMC,WAAW;AAAA;AAAA,CAAAnC,aAAA,GAAAG,CAAA,QAAG,IAAIiC,GAAG,CAAC,CAAC;AAC7B,MAAMC,QAAQ;AAAA;AAAA,CAAArC,aAAA,GAAAG,CAAA,QAAG,IAAIiC,GAAG,CAAC,CAAC;AAC1B,MAAME,WAAW;AAAA;AAAA,CAAAtC,aAAA,GAAAG,CAAA,QAAG,IAAIiC,GAAG,CAAC,CAAC;;AAE7B;AAAA;AAAApC,aAAA,GAAAG,CAAA;AACAO,GAAG,CAAC6B,GAAG,CAAC,aAAa,EAAE,CAAClB,GAAG,EAAEC,GAAG,KAAK;EAAA;EAAAtB,aAAA,GAAAwB,CAAA;EAAAxB,aAAA,GAAAG,CAAA;EACnCmB,GAAG,CAACS,IAAI,CAAC;IACPS,MAAM,EAAE,SAAS;IACjBC,OAAO,EAAE,kBAAkB;IAC3BC,MAAM,EAAE,qCAAqC;IAC7CP,WAAW,EAAEA,WAAW,CAACQ,IAAI;IAC7BN,QAAQ,EAAEA,QAAQ,CAACM,IAAI;IACvBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;EACpC,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEF;AAAA;AAAA9C,aAAA,GAAAG,CAAA;AACAO,GAAG,CAACqC,IAAI,CAAC,kBAAkB,EAAE,CAAC1B,GAAG,EAAEC,GAAG,KAAK;EAAA;EAAAtB,aAAA,GAAAwB,CAAA;EAAAxB,aAAA,GAAAG,CAAA;EACzC,IAAI;IACF,MAAM;MAAE6C,IAAI;MAAEC,MAAM;MAAEC,QAAQ;MAAEC;IAAK,CAAC;IAAA;IAAA,CAAAnD,aAAA,GAAAG,CAAA,QAAGkB,GAAG,CAACI,IAAI;IAEjD,MAAM2B,UAAU;IAAA;IAAA,CAAApD,aAAA,GAAAG,CAAA,QAAG;MACjBkD,EAAE,EAAE,OAAOR,IAAI,CAACS,GAAG,CAAC,CAAC,EAAE;MACvBN,IAAI;MACJC,MAAM;MACNC,QAAQ;MAAE;MAAA,CAAAlD,aAAA,GAAAa,CAAA,UAAAqC,QAAQ;MAAA;MAAA,CAAAlD,aAAA,GAAAa,CAAA,UAAI,CAAC,OAAO,CAAC;MAC/BsC,IAAI;MAAE;MAAA,CAAAnD,aAAA,GAAAa,CAAA,UAAAsC,IAAI;MAAA;MAAA,CAAAnD,aAAA,GAAAa,CAAA,UAAI,SAAS;MACvB2B,MAAM,EAAE,QAAQ;MAChBe,SAAS,EAAE,IAAIV,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;IACpC,CAAC;IAAC;IAAA9C,aAAA,GAAAG,CAAA;IAEFgC,WAAW,CAACqB,GAAG,CAACJ,UAAU,CAACC,EAAE,EAAED,UAAU,CAAC;IAAC;IAAApD,aAAA,GAAAG,CAAA;IAE3CmB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;MACnB0B,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,iCAAiC;MAC1CC,IAAI,EAAEP;IACR,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOQ,KAAK,EAAE;IAAA;IAAA5D,aAAA,GAAAG,CAAA;IACdmB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;MAAE6B,KAAK,EAAE;IAA8B,CAAC,CAAC;EAChE;AACF,CAAC,CAAC;;AAEF;AAAA;AAAA5D,aAAA,GAAAG,CAAA;AACAO,GAAG,CAACqC,IAAI,CAAC,eAAe,EAAE,CAAC1B,GAAG,EAAEC,GAAG,KAAK;EAAA;EAAAtB,aAAA,GAAAwB,CAAA;EAAAxB,aAAA,GAAAG,CAAA;EACtC,IAAI;IACF,MAAM;MAAE0D,YAAY;MAAEC,IAAI;MAAEZ,QAAQ;MAAEa;IAAS,CAAC;IAAA;IAAA,CAAA/D,aAAA,GAAAG,CAAA,QAAGkB,GAAG,CAACI,IAAI;IAE3D,MAAMuC,OAAO;IAAA;IAAA,CAAAhE,aAAA,GAAAG,CAAA,QAAG;MACdkD,EAAE,EAAE,OAAOR,IAAI,CAACS,GAAG,CAAC,CAAC,EAAE;MACvBO,YAAY;MACZC,IAAI;MAAE;MAAA,CAAA9D,aAAA,GAAAa,CAAA,UAAAiD,IAAI;MAAA;MAAA,CAAA9D,aAAA,GAAAa,CAAA,UAAI,UAAU;MACxBqC,QAAQ;MAAE;MAAA,CAAAlD,aAAA,GAAAa,CAAA,UAAAqC,QAAQ;MAAA;MAAA,CAAAlD,aAAA,GAAAa,CAAA,UAAI,EAAE;MACxBkD,QAAQ;MAAE;MAAA,CAAA/D,aAAA,GAAAa,CAAA,UAAAkD,QAAQ;MAAA;MAAA,CAAA/D,aAAA,GAAAa,CAAA,UAAI,GAAG;MACzB2B,MAAM,EAAE,QAAQ;MAChByB,QAAQ,EAAE,IAAIpB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MAClCoB,SAAS,EAAE,IAAIrB,IAAI,CAACA,IAAI,CAACS,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAACR,WAAW,CAAC;IAC1E,CAAC;IAAC;IAAA9C,aAAA,GAAAG,CAAA;IAEFkC,QAAQ,CAACmB,GAAG,CAACQ,OAAO,CAACX,EAAE,EAAEW,OAAO,CAAC;IAAC;IAAAhE,aAAA,GAAAG,CAAA;IAElCmB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;MACnB0B,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,8BAA8B;MACvCC,IAAI,EAAEK;IACR,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOJ,KAAK,EAAE;IAAA;IAAA5D,aAAA,GAAAG,CAAA;IACdmB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;MAAE6B,KAAK,EAAE;IAA2B,CAAC,CAAC;EAC7D;AACF,CAAC,CAAC;;AAEF;AAAA;AAAA5D,aAAA,GAAAG,CAAA;AACAO,GAAG,CAACqC,IAAI,CAAC,kBAAkB,EAAE,CAAC1B,GAAG,EAAEC,GAAG,KAAK;EAAA;EAAAtB,aAAA,GAAAwB,CAAA;EAAAxB,aAAA,GAAAG,CAAA;EACzC,IAAI;IACF,MAAM;MAAE0D,YAAY;MAAEM,QAAQ;MAAEC,YAAY;MAAElB;IAAS,CAAC;IAAA;IAAA,CAAAlD,aAAA,GAAAG,CAAA,QAAGkB,GAAG,CAACI,IAAI;IAEnE,MAAM4C,UAAU;IAAA;IAAA,CAAArE,aAAA,GAAAG,CAAA,QAAG;MACjBkD,EAAE,EAAE,MAAMR,IAAI,CAACS,GAAG,CAAC,CAAC,EAAE;MACtBO,YAAY;MACZM,QAAQ;MAAE;MAAA,CAAAnE,aAAA,GAAAa,CAAA,UAAAsD,QAAQ;MAAA;MAAA,CAAAnE,aAAA,GAAAa,CAAA,UAAI,CAAC,CAAC;MACxBuD,YAAY;MACZlB,QAAQ;MAAE;MAAA,CAAAlD,aAAA,GAAAa,CAAA,UAAAqC,QAAQ;MAAA;MAAA,CAAAlD,aAAA,GAAAa,CAAA,UAAI,EAAE;MACxB2B,MAAM,EAAE,QAAQ;MAChBe,SAAS,EAAE,IAAIV,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;IACpC,CAAC;IAAC;IAAA9C,aAAA,GAAAG,CAAA;IAEFmC,WAAW,CAACkB,GAAG,CAACa,UAAU,CAAChB,EAAE,EAAEgB,UAAU,CAAC;IAAC;IAAArE,aAAA,GAAAG,CAAA;IAE3CmB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;MACnB0B,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,mCAAmC;MAC5CC,IAAI,EAAEU;IACR,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOT,KAAK,EAAE;IAAA;IAAA5D,aAAA,GAAAG,CAAA;IACdmB,GAAG,CAACkB,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;MAAE6B,KAAK,EAAE;IAAsC,CAAC,CAAC;EACxE;AACF,CAAC,CAAC;AAEF,MAAMU,IAAI;AAAA;AAAA,CAAAtE,aAAA,GAAAG,CAAA;AAAG;AAAA,CAAAH,aAAA,GAAAa,CAAA,WAAAC,OAAO,CAACC,GAAG,CAACuD,IAAI;AAAA;AAAA,CAAAtE,aAAA,GAAAa,CAAA,WAAI,IAAI;AAAC;AAAAb,aAAA,GAAAG,CAAA;AACtCO,GAAG,CAAC6D,MAAM,CAACD,IAAI,EAAE,MAAM;EAAA;EAAAtE,aAAA,GAAAwB,CAAA;EAAAxB,aAAA,GAAAG,CAAA;EACrB8B,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEoC,IAAI,CAAC;EAAC;EAAAtE,aAAA,GAAAG,CAAA;EACzD8B,OAAO,CAACC,GAAG,CAAC,4DAA4D,CAAC;AAC3E,CAAC,CAAC;AAAC;AAAAlC,aAAA,GAAAG,CAAA;AAEHqE,MAAM,CAACC,OAAO,GAAG/D,GAAG","ignoreList":[]}