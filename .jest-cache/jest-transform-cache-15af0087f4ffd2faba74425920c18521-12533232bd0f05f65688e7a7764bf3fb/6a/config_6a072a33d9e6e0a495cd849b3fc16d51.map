{"version":3,"names":["cov_12lfe1pjvg","actualCoverage","loadConfig","f","s","pinecone","apiKey","b","process","env","PINECONE_API_KEY","environment","PINECONE_ENVIRONMENT","indexName","PINECONE_INDEX_NAME","openai","OPENAI_API_KEY","embeddingModel","OPENAI_EMBEDDING_MODEL","retrieval","internalRatio","parseFloat","KNOWLEDGE_OCEAN_INTERNAL_RATIO","externalRatio","KNOWLEDGE_OCEAN_EXTERNAL_RATIO","minRelevanceScore","KNOWLEDGE_OCEAN_MIN_RELEVANCE_SCORE","maxResults","parseInt","KNOWLEDGE_OCEAN_MAX_RESULTS","performance","cacheTTL","KNOWLEDGE_OCEAN_CACHE_TTL","batchSize","KNOWLEDGE_OCEAN_BATCH_SIZE","timeoutMs","KNOWLEDGE_OCEAN_TIMEOUT_MS","maxRetries","KNOWLEDGE_OCEAN_MAX_RETRIES","features","enableCache","KNOWLEDGE_OCEAN_ENABLE_CACHE","enableMetrics","KNOWLEDGE_OCEAN_ENABLE_METRICS","enableLogging","KNOWLEDGE_OCEAN_ENABLE_LOGGING","validateConfig","config","errors","push","totalRatio","Math","abs","length","Error","join","getConfig","DEFAULT_CONFIG"],"sources":["config.ts"],"sourcesContent":["/**\n * Knowledge Ocean Configuration\n * Centralized configuration for all Knowledge Ocean components\n */\n\nexport interface KnowledgeOceanConfig {\n  // Pinecone settings\n  pinecone: {\n    apiKey: string;\n    environment: string;\n    indexName: string;\n  };\n\n  // OpenAI settings\n  openai: {\n    apiKey: string;\n    embeddingModel: string;\n  };\n\n  // 70/30 rule settings\n  retrieval: {\n    internalRatio: number;\n    externalRatio: number;\n    minRelevanceScore: number;\n    maxResults: number;\n  };\n\n  // Performance settings\n  performance: {\n    cacheTTL: number;\n    batchSize: number;\n    timeoutMs: number;\n    maxRetries: number;\n  };\n\n  // Feature flags\n  features: {\n    enableCache: boolean;\n    enableMetrics: boolean;\n    enableLogging: boolean;\n  };\n}\n\n/**\n * Load configuration from environment variables\n */\nexport function loadConfig(): KnowledgeOceanConfig {\n  return {\n    pinecone: {\n      apiKey: process.env.PINECONE_API_KEY || '',\n      environment: process.env.PINECONE_ENVIRONMENT || 'us-east-1',\n      indexName: process.env.PINECONE_INDEX_NAME || 'azora-knowledge-ocean'\n    },\n\n    openai: {\n      apiKey: process.env.OPENAI_API_KEY || '',\n      embeddingModel: process.env.OPENAI_EMBEDDING_MODEL || 'text-embedding-ada-002'\n    },\n\n    retrieval: {\n      internalRatio: parseFloat(process.env.KNOWLEDGE_OCEAN_INTERNAL_RATIO || '0.7'),\n      externalRatio: parseFloat(process.env.KNOWLEDGE_OCEAN_EXTERNAL_RATIO || '0.3'),\n      minRelevanceScore: parseFloat(process.env.KNOWLEDGE_OCEAN_MIN_RELEVANCE_SCORE || '0.7'),\n      maxResults: parseInt(process.env.KNOWLEDGE_OCEAN_MAX_RESULTS || '10', 10)\n    },\n\n    performance: {\n      cacheTTL: parseInt(process.env.KNOWLEDGE_OCEAN_CACHE_TTL || '3600', 10),\n      batchSize: parseInt(process.env.KNOWLEDGE_OCEAN_BATCH_SIZE || '100', 10),\n      timeoutMs: parseInt(process.env.KNOWLEDGE_OCEAN_TIMEOUT_MS || '5000', 10),\n      maxRetries: parseInt(process.env.KNOWLEDGE_OCEAN_MAX_RETRIES || '3', 10)\n    },\n\n    features: {\n      enableCache: process.env.KNOWLEDGE_OCEAN_ENABLE_CACHE !== 'false',\n      enableMetrics: process.env.KNOWLEDGE_OCEAN_ENABLE_METRICS !== 'false',\n      enableLogging: process.env.KNOWLEDGE_OCEAN_ENABLE_LOGGING !== 'false'\n    }\n  };\n}\n\n/**\n * Validate configuration\n */\nexport function validateConfig(config: KnowledgeOceanConfig): void {\n  const errors: string[] = [];\n\n  // Validate Pinecone config\n  if (!config.pinecone.apiKey) {\n    errors.push('PINECONE_API_KEY is required');\n  }\n  if (!config.pinecone.indexName) {\n    errors.push('PINECONE_INDEX_NAME is required');\n  }\n\n  // Validate OpenAI config\n  if (!config.openai.apiKey) {\n    errors.push('OPENAI_API_KEY is required');\n  }\n\n  // Validate retrieval ratios\n  const totalRatio = config.retrieval.internalRatio + config.retrieval.externalRatio;\n  if (Math.abs(totalRatio - 1.0) > 0.01) {\n    errors.push(`Internal and external ratios must sum to 1.0 (got ${totalRatio})`);\n  }\n\n  if (config.retrieval.internalRatio < 0 || config.retrieval.internalRatio > 1) {\n    errors.push('Internal ratio must be between 0 and 1');\n  }\n\n  if (config.retrieval.minRelevanceScore < 0 || config.retrieval.minRelevanceScore > 1) {\n    errors.push('Min relevance score must be between 0 and 1');\n  }\n\n  if (config.retrieval.maxResults < 1) {\n    errors.push('Max results must be at least 1');\n  }\n\n  // Validate performance settings\n  if (config.performance.cacheTTL < 0) {\n    errors.push('Cache TTL must be non-negative');\n  }\n\n  if (config.performance.batchSize < 1) {\n    errors.push('Batch size must be at least 1');\n  }\n\n  if (config.performance.timeoutMs < 100) {\n    errors.push('Timeout must be at least 100ms');\n  }\n\n  if (errors.length > 0) {\n    throw new Error(`Configuration validation failed:\\n${errors.join('\\n')}`);\n  }\n}\n\n/**\n * Get validated configuration\n */\nexport function getConfig(): KnowledgeOceanConfig {\n  const config = loadConfig();\n  validateConfig(config);\n  return config;\n}\n\n/**\n * Default configuration (for testing)\n */\nexport const DEFAULT_CONFIG: KnowledgeOceanConfig = {\n  pinecone: {\n    apiKey: 'test-api-key',\n    environment: 'us-east-1',\n    indexName: 'test-index'\n  },\n  openai: {\n    apiKey: 'test-openai-key',\n    embeddingModel: 'text-embedding-ada-002'\n  },\n  retrieval: {\n    internalRatio: 0.7,\n    externalRatio: 0.3,\n    minRelevanceScore: 0.7,\n    maxResults: 10\n  },\n  performance: {\n    cacheTTL: 3600,\n    batchSize: 100,\n    timeoutMs: 5000,\n    maxRetries: 3\n  },\n  features: {\n    enableCache: true,\n    enableMetrics: true,\n    enableLogging: true\n  }\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}