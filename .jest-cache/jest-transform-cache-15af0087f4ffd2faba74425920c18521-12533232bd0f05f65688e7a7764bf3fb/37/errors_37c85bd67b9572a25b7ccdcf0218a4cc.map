{"version":3,"names":["cov_97ksulsmu","actualCoverage","AppError","Error","constructor","statusCode","code","message","details","f","s","name","Object","setPrototypeOf","prototype","BadRequestError","b","UnauthorizedError","ForbiddenError","NotFoundError","resource","id","ConflictError","InternalServerError","ServiceUnavailableError","service","BusinessLogicError","TierAccessError","requiredTier","userTier","EnrollmentError","AssessmentError","isAppError","error","toAppError","createErrorResponse","requestId","success","timestamp","Date"],"sources":["errors.ts"],"sourcesContent":["/**\n * Base application error class\n */\nexport class AppError extends Error {\n  constructor(\n    public statusCode: number,\n    public code: string,\n    message: string,\n    public details?: Record<string, any>\n  ) {\n    super(message);\n    this.name = 'AppError';\n    Object.setPrototypeOf(this, AppError.prototype);\n  }\n}\n\n/**\n * Validation error - 400 Bad Request\n */\nexport class BadRequestError extends AppError {\n  constructor(message: string, code: string = 'BAD_REQUEST', details?: Record<string, any>) {\n    super(400, code, message, details);\n    this.name = 'BadRequestError';\n    Object.setPrototypeOf(this, BadRequestError.prototype);\n  }\n}\n\n/**\n * Authentication error - 401 Unauthorized\n */\nexport class UnauthorizedError extends AppError {\n  constructor(message: string = 'Unauthorized', code: string = 'UNAUTHORIZED') {\n    super(401, code, message);\n    this.name = 'UnauthorizedError';\n    Object.setPrototypeOf(this, UnauthorizedError.prototype);\n  }\n}\n\n/**\n * Authorization error - 403 Forbidden\n */\nexport class ForbiddenError extends AppError {\n  constructor(message: string = 'Forbidden', code: string = 'FORBIDDEN') {\n    super(403, code, message);\n    this.name = 'ForbiddenError';\n    Object.setPrototypeOf(this, ForbiddenError.prototype);\n  }\n}\n\n/**\n * Not found error - 404 Not Found\n */\nexport class NotFoundError extends AppError {\n  constructor(resource: string, id?: string) {\n    const message = id ? `${resource} with ID ${id} not found` : `${resource} not found`;\n    super(404, 'NOT_FOUND', message);\n    this.name = 'NotFoundError';\n    Object.setPrototypeOf(this, NotFoundError.prototype);\n  }\n}\n\n/**\n * Conflict error - 409 Conflict\n */\nexport class ConflictError extends AppError {\n  constructor(message: string, code: string = 'CONFLICT') {\n    super(409, code, message);\n    this.name = 'ConflictError';\n    Object.setPrototypeOf(this, ConflictError.prototype);\n  }\n}\n\n/**\n * Internal server error - 500 Internal Server Error\n */\nexport class InternalServerError extends AppError {\n  constructor(message: string = 'Internal server error', code: string = 'INTERNAL_SERVER_ERROR') {\n    super(500, code, message);\n    this.name = 'InternalServerError';\n    Object.setPrototypeOf(this, InternalServerError.prototype);\n  }\n}\n\n/**\n * Service unavailable error - 503 Service Unavailable\n */\nexport class ServiceUnavailableError extends AppError {\n  constructor(service: string) {\n    super(503, 'SERVICE_UNAVAILABLE', `${service} is currently unavailable`);\n    this.name = 'ServiceUnavailableError';\n    Object.setPrototypeOf(this, ServiceUnavailableError.prototype);\n  }\n}\n\n/**\n * Business logic error - 422 Unprocessable Entity\n */\nexport class BusinessLogicError extends AppError {\n  constructor(message: string, code: string = 'BUSINESS_LOGIC_ERROR', details?: Record<string, any>) {\n    super(422, code, message, details);\n    this.name = 'BusinessLogicError';\n    Object.setPrototypeOf(this, BusinessLogicError.prototype);\n  }\n}\n\n/**\n * Tier access error - 403 Forbidden\n */\nexport class TierAccessError extends AppError {\n  constructor(requiredTier: string, userTier: string) {\n    const message = `This feature requires ${requiredTier} tier. You have ${userTier} tier.`;\n    super(403, 'TIER_ACCESS_DENIED', message, { requiredTier, userTier });\n    this.name = 'TierAccessError';\n    Object.setPrototypeOf(this, TierAccessError.prototype);\n  }\n}\n\n/**\n * Enrollment error - 422 Unprocessable Entity\n */\nexport class EnrollmentError extends AppError {\n  constructor(message: string, code: string = 'ENROLLMENT_ERROR') {\n    super(422, code, message);\n    this.name = 'EnrollmentError';\n    Object.setPrototypeOf(this, EnrollmentError.prototype);\n  }\n}\n\n/**\n * Assessment error - 422 Unprocessable Entity\n */\nexport class AssessmentError extends AppError {\n  constructor(message: string, code: string = 'ASSESSMENT_ERROR') {\n    super(422, code, message);\n    this.name = 'AssessmentError';\n    Object.setPrototypeOf(this, AssessmentError.prototype);\n  }\n}\n\n/**\n * Checks if an error is an AppError\n */\nexport function isAppError(error: any): error is AppError {\n  return error instanceof AppError;\n}\n\n/**\n * Converts any error to an AppError\n */\nexport function toAppError(error: any): AppError {\n  if (isAppError(error)) {\n    return error;\n  }\n\n  if (error instanceof Error) {\n    return new InternalServerError(error.message);\n  }\n\n  return new InternalServerError('An unexpected error occurred');\n}\n\n/**\n * Error response format\n */\nexport interface ErrorResponse {\n  success: false;\n  code: string;\n  message: string;\n  details?: Record<string, any>;\n  timestamp: Date;\n  requestId?: string;\n}\n\n/**\n * Creates a standardized error response\n */\nexport function createErrorResponse(\n  error: AppError,\n  requestId?: string\n): ErrorResponse {\n  return {\n    success: false,\n    code: error.code,\n    message: error.message,\n    details: error.details,\n    timestamp: new Date(),\n    requestId,\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}