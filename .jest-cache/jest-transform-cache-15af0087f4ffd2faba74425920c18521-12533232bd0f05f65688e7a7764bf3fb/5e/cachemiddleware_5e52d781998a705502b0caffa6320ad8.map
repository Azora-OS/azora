{"version":3,"names":["cov_1sqemp4m1s","actualCoverage","getCacheService","logger","generateCacheKey","req","f","method","path","query","s","queryString","Object","keys","sort","map","key","join","b","cacheMiddleware","options","ttl","keyGenerator","condition","res","next","cacheService","cacheKey","cached","get","debug","json","originalJson","bind","data","set","catch","err","error","cacheInvalidationMiddleware","getInvalidationKeys","includes","keysToInvalidate","pattern","deletePattern","delete","Cacheable","target","propertyKey","descriptor","originalMethod","value","args","constructor","name","JSON","stringify","result","apply","InvalidateCache"],"sources":["cache.middleware.ts"],"sourcesContent":["/**\n * Cache Middleware\n * Provides automatic caching for GET requests\n */\n\nimport { Request, Response, NextFunction } from 'express';\nimport { getCacheService } from '../services/cache.service';\nimport { logger } from '../utils/logger';\n\nexport interface CacheOptions {\n  ttl?: number;\n  keyGenerator?: (req: Request) => string;\n  condition?: (req: Request) => boolean;\n}\n\n/**\n * Generate cache key from request\n */\nfunction generateCacheKey(req: Request): string {\n  const { method, path, query } = req;\n  const queryString = Object.keys(query)\n    .sort()\n    .map(key => `${key}=${query[key]}`)\n    .join('&');\n  return `${method}:${path}${queryString ? `?${queryString}` : ''}`;\n}\n\n/**\n * Cache middleware for GET requests\n */\nexport function cacheMiddleware(options: CacheOptions = {}) {\n  const {\n    ttl = 5 * 60, // 5 minutes default\n    keyGenerator = generateCacheKey,\n    condition = (req) => req.method === 'GET'\n  } = options;\n\n  return async (req: Request, res: Response, next: NextFunction) => {\n    // Only cache GET requests by default\n    if (!condition(req)) {\n      return next();\n    }\n\n    const cacheService = getCacheService();\n    const cacheKey = keyGenerator(req);\n\n    try {\n      // Try to get from cache\n      const cached = await cacheService.get(cacheKey);\n      if (cached) {\n        logger.debug(`Cache hit: ${cacheKey}`);\n        return res.json(cached);\n      }\n\n      // Store original json method\n      const originalJson = res.json.bind(res);\n\n      // Override json method to cache response\n      res.json = function(data: any) {\n        // Cache the response\n        cacheService.set(cacheKey, data, ttl).catch(err => {\n          logger.error(`Failed to cache response for ${cacheKey}:`, err);\n        });\n\n        return originalJson(data);\n      };\n\n      next();\n    } catch (error) {\n      logger.error(`Cache middleware error for ${cacheKey}:`, error);\n      next();\n    }\n  };\n}\n\n/**\n * Cache invalidation middleware\n * Invalidates cache for POST, PUT, DELETE requests\n */\nexport function cacheInvalidationMiddleware(\n  getInvalidationKeys: (req: Request) => string[]\n) {\n  return async (req: Request, res: Response, next: NextFunction) => {\n    // Only invalidate for mutation requests\n    if (!['POST', 'PUT', 'DELETE', 'PATCH'].includes(req.method)) {\n      return next();\n    }\n\n    const cacheService = getCacheService();\n    const keysToInvalidate = getInvalidationKeys(req);\n\n    try {\n      for (const pattern of keysToInvalidate) {\n        if (pattern.includes('*')) {\n          // Pattern-based invalidation\n          await cacheService.deletePattern(pattern);\n        } else {\n          // Exact key invalidation\n          await cacheService.delete(pattern);\n        }\n      }\n\n      logger.debug(`Cache invalidated: ${keysToInvalidate.join(', ')}`);\n    } catch (error) {\n      logger.error('Cache invalidation error:', error);\n    }\n\n    next();\n  };\n}\n\n/**\n * Decorator for caching service methods\n */\nexport function Cacheable(ttl: number = 5 * 60) {\n  return function(\n    target: any,\n    propertyKey: string,\n    descriptor: PropertyDescriptor\n  ) {\n    const originalMethod = descriptor.value;\n\n    descriptor.value = async function(...args: any[]) {\n      const cacheService = getCacheService();\n      const cacheKey = `${target.constructor.name}:${propertyKey}:${JSON.stringify(args)}`;\n\n      try {\n        // Try to get from cache\n        const cached = await cacheService.get(cacheKey);\n        if (cached !== null) {\n          logger.debug(`Cache hit: ${cacheKey}`);\n          return cached;\n        }\n\n        // Cache miss - call original method\n        const result = await originalMethod.apply(this, args);\n\n        // Store in cache\n        await cacheService.set(cacheKey, result, ttl);\n\n        return result;\n      } catch (error) {\n        logger.error(`Cacheable decorator error for ${cacheKey}:`, error);\n        // Fall back to original method on cache error\n        return originalMethod.apply(this, args);\n      }\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * Decorator for cache invalidation\n */\nexport function InvalidateCache(\n  getInvalidationKeys: (args: any[]) => string[]\n) {\n  return function(\n    target: any,\n    propertyKey: string,\n    descriptor: PropertyDescriptor\n  ) {\n    const originalMethod = descriptor.value;\n\n    descriptor.value = async function(...args: any[]) {\n      const cacheService = getCacheService();\n      const keysToInvalidate = getInvalidationKeys(args);\n\n      try {\n        // Call original method first\n        const result = await originalMethod.apply(this, args);\n\n        // Then invalidate cache\n        for (const pattern of keysToInvalidate) {\n          if (pattern.includes('*')) {\n            await cacheService.deletePattern(pattern);\n          } else {\n            await cacheService.delete(pattern);\n          }\n        }\n\n        logger.debug(`Cache invalidated: ${keysToInvalidate.join(', ')}`);\n\n        return result;\n      } catch (error) {\n        logger.error(`InvalidateCache decorator error:`, error);\n        throw error;\n      }\n    };\n\n    return descriptor;\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}