516a1a56150e9f951587bfadbf1dc592
/* istanbul ignore next */
function cov_4sxewglen() {
  var path = "/workspaces/azora/packages/shared-ai/data-access.ts";
  var hash = "245ebc0ef5d8987dbe9a50488731c69941a0f350";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/packages/shared-ai/data-access.ts",
    statementMap: {
      "0": {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 61,
          column: 5
        }
      },
      "1": {
        start: {
          line: 37,
          column: 19
        },
        end: {
          line: 42,
          column: 8
        }
      },
      "2": {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 46,
          column: 7
        }
      },
      "3": {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 45,
          column: 20
        }
      },
      "4": {
        start: {
          line: 48,
          column: 6
        },
        end: {
          line: 57,
          column: 8
        }
      },
      "5": {
        start: {
          line: 59,
          column: 6
        },
        end: {
          line: 59,
          column: 58
        }
      },
      "6": {
        start: {
          line: 60,
          column: 6
        },
        end: {
          line: 60,
          column: 18
        }
      },
      "7": {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 99,
          column: 5
        }
      },
      "8": {
        start: {
          line: 69,
          column: 26
        },
        end: {
          line: 78,
          column: 8
        }
      },
      "9": {
        start: {
          line: 80,
          column: 31
        },
        end: {
          line: 80,
          column: 74
        }
      },
      "10": {
        start: {
          line: 80,
          column: 55
        },
        end: {
          line: 80,
          column: 66
        }
      },
      "11": {
        start: {
          line: 81,
          column: 32
        },
        end: {
          line: 81,
          column: 94
        }
      },
      "12": {
        start: {
          line: 81,
          column: 56
        },
        end: {
          line: 81,
          column: 86
        }
      },
      "13": {
        start: {
          line: 82,
          column: 28
        },
        end: {
          line: 82,
          column: 105
        }
      },
      "14": {
        start: {
          line: 82,
          column: 59
        },
        end: {
          line: 82,
          column: 75
        }
      },
      "15": {
        start: {
          line: 84,
          column: 6
        },
        end: {
          line: 95,
          column: 8
        }
      },
      "16": {
        start: {
          line: 89,
          column: 39
        },
        end: {
          line: 94,
          column: 9
        }
      },
      "17": {
        start: {
          line: 97,
          column: 6
        },
        end: {
          line: 97,
          column: 64
        }
      },
      "18": {
        start: {
          line: 98,
          column: 6
        },
        end: {
          line: 98,
          column: 18
        }
      },
      "19": {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 129,
          column: 5
        }
      },
      "20": {
        start: {
          line: 107,
          column: 22
        },
        end: {
          line: 115,
          column: 8
        }
      },
      "21": {
        start: {
          line: 117,
          column: 27
        },
        end: {
          line: 117,
          column: 81
        }
      },
      "22": {
        start: {
          line: 117,
          column: 54
        },
        end: {
          line: 117,
          column: 77
        }
      },
      "23": {
        start: {
          line: 118,
          column: 33
        },
        end: {
          line: 118,
          column: 82
        }
      },
      "24": {
        start: {
          line: 118,
          column: 54
        },
        end: {
          line: 118,
          column: 68
        }
      },
      "25": {
        start: {
          line: 120,
          column: 6
        },
        end: {
          line: 125,
          column: 8
        }
      },
      "26": {
        start: {
          line: 127,
          column: 6
        },
        end: {
          line: 127,
          column: 65
        }
      },
      "27": {
        start: {
          line: 128,
          column: 6
        },
        end: {
          line: 128,
          column: 18
        }
      },
      "28": {
        start: {
          line: 136,
          column: 4
        },
        end: {
          line: 162,
          column: 5
        }
      },
      "29": {
        start: {
          line: 137,
          column: 19
        },
        end: {
          line: 142,
          column: 8
        }
      },
      "30": {
        start: {
          line: 144,
          column: 27
        },
        end: {
          line: 149,
          column: 8
        }
      },
      "31": {
        start: {
          line: 151,
          column: 6
        },
        end: {
          line: 158,
          column: 8
        }
      },
      "32": {
        start: {
          line: 153,
          column: 37
        },
        end: {
          line: 153,
          column: 56
        }
      },
      "33": {
        start: {
          line: 155,
          column: 55
        },
        end: {
          line: 155,
          column: 78
        }
      },
      "34": {
        start: {
          line: 160,
          column: 6
        },
        end: {
          line: 160,
          column: 67
        }
      },
      "35": {
        start: {
          line: 161,
          column: 6
        },
        end: {
          line: 161,
          column: 18
        }
      },
      "36": {
        start: {
          line: 169,
          column: 72
        },
        end: {
          line: 174,
          column: 6
        }
      },
      "37": {
        start: {
          line: 176,
          column: 4
        },
        end: {
          line: 182,
          column: 6
        }
      },
      "38": {
        start: {
          line: 189,
          column: 4
        },
        end: {
          line: 205,
          column: 5
        }
      },
      "39": {
        start: {
          line: 201,
          column: 6
        },
        end: {
          line: 201,
          column: 16
        }
      },
      "40": {
        start: {
          line: 203,
          column: 6
        },
        end: {
          line: 203,
          column: 60
        }
      },
      "41": {
        start: {
          line: 204,
          column: 6
        },
        end: {
          line: 204,
          column: 16
        }
      },
      "42": {
        start: {
          line: 212,
          column: 4
        },
        end: {
          line: 233,
          column: 5
        }
      },
      "43": {
        start: {
          line: 213,
          column: 22
        },
        end: {
          line: 219,
          column: 8
        }
      },
      "44": {
        start: {
          line: 221,
          column: 6
        },
        end: {
          line: 229,
          column: 10
        }
      },
      "45": {
        start: {
          line: 221,
          column: 36
        },
        end: {
          line: 229,
          column: 7
        }
      },
      "46": {
        start: {
          line: 231,
          column: 6
        },
        end: {
          line: 231,
          column: 57
        }
      },
      "47": {
        start: {
          line: 232,
          column: 6
        },
        end: {
          line: 232,
          column: 16
        }
      },
      "48": {
        start: {
          line: 240,
          column: 4
        },
        end: {
          line: 270,
          column: 5
        }
      },
      "49": {
        start: {
          line: 241,
          column: 20
        },
        end: {
          line: 254,
          column: 8
        }
      },
      "50": {
        start: {
          line: 256,
          column: 6
        },
        end: {
          line: 266,
          column: 10
        }
      },
      "51": {
        start: {
          line: 256,
          column: 32
        },
        end: {
          line: 266,
          column: 7
        }
      },
      "52": {
        start: {
          line: 260,
          column: 48
        },
        end: {
          line: 265,
          column: 9
        }
      },
      "53": {
        start: {
          line: 268,
          column: 6
        },
        end: {
          line: 268,
          column: 58
        }
      },
      "54": {
        start: {
          line: 269,
          column: 6
        },
        end: {
          line: 269,
          column: 16
        }
      },
      "55": {
        start: {
          line: 277,
          column: 18
        },
        end: {
          line: 277,
          column: 41
        }
      },
      "56": {
        start: {
          line: 278,
          column: 21
        },
        end: {
          line: 278,
          column: 43
        }
      },
      "57": {
        start: {
          line: 280,
          column: 19
        },
        end: {
          line: 280,
          column: 44
        }
      },
      "58": {
        start: {
          line: 281,
          column: 4
        },
        end: {
          line: 283,
          column: 5
        }
      },
      "59": {
        start: {
          line: 282,
          column: 6
        },
        end: {
          line: 282,
          column: 20
        }
      },
      "60": {
        start: {
          line: 285,
          column: 20
        },
        end: {
          line: 285,
          column: 57
        }
      },
      "61": {
        start: {
          line: 286,
          column: 4
        },
        end: {
          line: 286,
          column: 51
        }
      },
      "62": {
        start: {
          line: 288,
          column: 4
        },
        end: {
          line: 288,
          column: 19
        }
      },
      "63": {
        start: {
          line: 295,
          column: 18
        },
        end: {
          line: 295,
          column: 41
        }
      },
      "64": {
        start: {
          line: 296,
          column: 4
        },
        end: {
          line: 296,
          column: 47
        }
      },
      "65": {
        start: {
          line: 301,
          column: 28
        },
        end: {
          line: 301,
          column: 53
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 35,
            column: 2
          },
          end: {
            line: 35,
            column: 3
          }
        },
        loc: {
          start: {
            line: 35,
            column: 68
          },
          end: {
            line: 62,
            column: 3
          }
        },
        line: 35
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 67,
            column: 2
          },
          end: {
            line: 67,
            column: 3
          }
        },
        loc: {
          start: {
            line: 67,
            column: 58
          },
          end: {
            line: 100,
            column: 3
          }
        },
        line: 67
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 80,
            column: 50
          },
          end: {
            line: 80,
            column: 51
          }
        },
        loc: {
          start: {
            line: 80,
            column: 55
          },
          end: {
            line: 80,
            column: 66
          }
        },
        line: 80
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 81,
            column: 51
          },
          end: {
            line: 81,
            column: 52
          }
        },
        loc: {
          start: {
            line: 81,
            column: 56
          },
          end: {
            line: 81,
            column: 86
          }
        },
        line: 81
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 82,
            column: 47
          },
          end: {
            line: 82,
            column: 48
          }
        },
        loc: {
          start: {
            line: 82,
            column: 59
          },
          end: {
            line: 82,
            column: 75
          }
        },
        line: 82
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 89,
            column: 33
          },
          end: {
            line: 89,
            column: 34
          }
        },
        loc: {
          start: {
            line: 89,
            column: 39
          },
          end: {
            line: 94,
            column: 9
          }
        },
        line: 89
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 105,
            column: 2
          },
          end: {
            line: 105,
            column: 3
          }
        },
        loc: {
          start: {
            line: 105,
            column: 59
          },
          end: {
            line: 130,
            column: 3
          }
        },
        line: 105
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 117,
            column: 42
          },
          end: {
            line: 117,
            column: 43
          }
        },
        loc: {
          start: {
            line: 117,
            column: 54
          },
          end: {
            line: 117,
            column: 77
          }
        },
        line: 117
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 118,
            column: 49
          },
          end: {
            line: 118,
            column: 50
          }
        },
        loc: {
          start: {
            line: 118,
            column: 54
          },
          end: {
            line: 118,
            column: 68
          }
        },
        line: 118
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 135,
            column: 2
          },
          end: {
            line: 135,
            column: 3
          }
        },
        loc: {
          start: {
            line: 135,
            column: 61
          },
          end: {
            line: 163,
            column: 3
          }
        },
        line: 135
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 153,
            column: 32
          },
          end: {
            line: 153,
            column: 33
          }
        },
        loc: {
          start: {
            line: 153,
            column: 37
          },
          end: {
            line: 153,
            column: 56
          }
        },
        line: 153
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 155,
            column: 50
          },
          end: {
            line: 155,
            column: 51
          }
        },
        loc: {
          start: {
            line: 155,
            column: 55
          },
          end: {
            line: 155,
            column: 78
          }
        },
        line: 155
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 168,
            column: 2
          },
          end: {
            line: 168,
            column: 3
          }
        },
        loc: {
          start: {
            line: 168,
            column: 57
          },
          end: {
            line: 183,
            column: 3
          }
        },
        line: 168
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 188,
            column: 2
          },
          end: {
            line: 188,
            column: 3
          }
        },
        loc: {
          start: {
            line: 188,
            column: 62
          },
          end: {
            line: 206,
            column: 3
          }
        },
        line: 188
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 211,
            column: 2
          },
          end: {
            line: 211,
            column: 3
          }
        },
        loc: {
          start: {
            line: 211,
            column: 53
          },
          end: {
            line: 234,
            column: 3
          }
        },
        line: 211
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 221,
            column: 25
          },
          end: {
            line: 221,
            column: 26
          }
        },
        loc: {
          start: {
            line: 221,
            column: 36
          },
          end: {
            line: 229,
            column: 7
          }
        },
        line: 221
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 239,
            column: 2
          },
          end: {
            line: 239,
            column: 3
          }
        },
        loc: {
          start: {
            line: 239,
            column: 54
          },
          end: {
            line: 271,
            column: 3
          }
        },
        line: 239
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 256,
            column: 23
          },
          end: {
            line: 256,
            column: 24
          }
        },
        loc: {
          start: {
            line: 256,
            column: 32
          },
          end: {
            line: 266,
            column: 7
          }
        },
        line: 256
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 260,
            column: 42
          },
          end: {
            line: 260,
            column: 43
          }
        },
        loc: {
          start: {
            line: 260,
            column: 48
          },
          end: {
            line: 265,
            column: 9
          }
        },
        line: 260
      },
      "19": {
        name: "(anonymous_19)",
        decl: {
          start: {
            line: 276,
            column: 2
          },
          end: {
            line: 276,
            column: 3
          }
        },
        loc: {
          start: {
            line: 276,
            column: 92
          },
          end: {
            line: 289,
            column: 3
          }
        },
        line: 276
      },
      "20": {
        name: "(anonymous_20)",
        decl: {
          start: {
            line: 294,
            column: 2
          },
          end: {
            line: 294,
            column: 3
          }
        },
        loc: {
          start: {
            line: 294,
            column: 61
          },
          end: {
            line: 297,
            column: 3
          }
        },
        line: 294
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 44,
            column: 6
          },
          end: {
            line: 46,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 44,
            column: 6
          },
          end: {
            line: 46,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 44
      },
      "1": {
        loc: {
          start: {
            line: 52,
            column: 17
          },
          end: {
            line: 56,
            column: 21
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 52,
            column: 32
          },
          end: {
            line: 56,
            column: 9
          }
        }, {
          start: {
            line: 56,
            column: 12
          },
          end: {
            line: 56,
            column: 21
          }
        }],
        line: 52
      },
      "2": {
        loc: {
          start: {
            line: 81,
            column: 56
          },
          end: {
            line: 81,
            column: 86
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 81,
            column: 56
          },
          end: {
            line: 81,
            column: 68
          }
        }, {
          start: {
            line: 81,
            column: 72
          },
          end: {
            line: 81,
            column: 86
          }
        }],
        line: 81
      },
      "3": {
        loc: {
          start: {
            line: 82,
            column: 28
          },
          end: {
            line: 82,
            column: 105
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 82,
            column: 28
          },
          end: {
            line: 82,
            column: 100
          }
        }, {
          start: {
            line: 82,
            column: 104
          },
          end: {
            line: 82,
            column: 105
          }
        }],
        line: 82
      },
      "4": {
        loc: {
          start: {
            line: 214,
            column: 15
          },
          end: {
            line: 214,
            column: 28
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 214,
            column: 15
          },
          end: {
            line: 214,
            column: 22
          }
        }, {
          start: {
            line: 214,
            column: 26
          },
          end: {
            line: 214,
            column: 28
          }
        }],
        line: 214
      },
      "5": {
        loc: {
          start: {
            line: 276,
            column: 45
          },
          end: {
            line: 276,
            column: 69
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 276,
            column: 66
          },
          end: {
            line: 276,
            column: 69
          }
        }],
        line: 276
      },
      "6": {
        loc: {
          start: {
            line: 281,
            column: 4
          },
          end: {
            line: 283,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 281,
            column: 4
          },
          end: {
            line: 283,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 281
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0],
      "6": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "245ebc0ef5d8987dbe9a50488731c69941a0f350"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_4sxewglen = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_4sxewglen();
/*
AZORA PROPRIETARY LICENSE
Copyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.

AI DATA ACCESS LAYER
Provides real data access for Claude/AI services with proper authentication and context
*/

import { prisma } from '@azora/shared-database/prisma';
import { getCacheService } from '@azora/shared-database/redis';

/**
 * User context for AI services
 */

/**
 * AI Data Access Service
 * Provides real data access for AI services
 */
export class AIDataAccessService {
  /**
   * Get user context for AI processing
   */
  async getUserContext(userId) {
    /* istanbul ignore next */
    cov_4sxewglen().f[0]++;
    cov_4sxewglen().s[0]++;
    try {
      const user =
      /* istanbul ignore next */
      (cov_4sxewglen().s[1]++, await prisma.user.findUnique({
        where: {
          id: userId
        },
        include: {
          profile: true
        }
      }));
      /* istanbul ignore next */
      cov_4sxewglen().s[2]++;
      if (!user) {
        /* istanbul ignore next */
        cov_4sxewglen().b[0][0]++;
        cov_4sxewglen().s[3]++;
        return null;
      } else
      /* istanbul ignore next */
      {
        cov_4sxewglen().b[0][1]++;
      }
      cov_4sxewglen().s[4]++;
      return {
        userId: user.id,
        email: user.email,
        role: user.role,
        profile: user.profile ?
        /* istanbul ignore next */
        (cov_4sxewglen().b[1][0]++, {
          firstName: user.profile.firstName,
          lastName: user.profile.lastName,
          preferences: {}
        }) :
        /* istanbul ignore next */
        (cov_4sxewglen().b[1][1]++, undefined)
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_4sxewglen().s[5]++;
      console.error('Error getting user context:', error);
      /* istanbul ignore next */
      cov_4sxewglen().s[6]++;
      return null;
    }
  }

  /**
   * Get user's learning data for AI recommendations
   */
  async getUserLearningData(userId) {
    /* istanbul ignore next */
    cov_4sxewglen().f[1]++;
    cov_4sxewglen().s[7]++;
    try {
      const enrollments =
      /* istanbul ignore next */
      (cov_4sxewglen().s[8]++, await prisma.enrollment.findMany({
        where: {
          userId
        },
        include: {
          course: {
            include: {
              lessons: true
            }
          }
        }
      }));
      const completedCourses =
      /* istanbul ignore next */
      (cov_4sxewglen().s[9]++, enrollments.filter(e => {
        /* istanbul ignore next */
        cov_4sxewglen().f[2]++;
        cov_4sxewglen().s[10]++;
        return e.completed;
      }).length);
      const inProgressCourses =
      /* istanbul ignore next */
      (cov_4sxewglen().s[11]++, enrollments.filter(e => {
        /* istanbul ignore next */
        cov_4sxewglen().f[3]++;
        cov_4sxewglen().s[12]++;
        return /* istanbul ignore next */(cov_4sxewglen().b[2][0]++, !e.completed) &&
        /* istanbul ignore next */
        (cov_4sxewglen().b[2][1]++, e.progress > 0);
      }).length);
      const totalProgress =
      /* istanbul ignore next */
      (cov_4sxewglen().s[13]++,
      /* istanbul ignore next */
      (cov_4sxewglen().b[3][0]++, enrollments.reduce((sum, e) => {
        /* istanbul ignore next */
        cov_4sxewglen().f[4]++;
        cov_4sxewglen().s[14]++;
        return sum + e.progress;
      }, 0) / enrollments.length) ||
      /* istanbul ignore next */
      (cov_4sxewglen().b[3][1]++, 0));
      /* istanbul ignore next */
      cov_4sxewglen().s[15]++;
      return {
        enrollments,
        completedCourses,
        inProgressCourses,
        totalProgress,
        courses: enrollments.map(e => {
          /* istanbul ignore next */
          cov_4sxewglen().f[5]++;
          cov_4sxewglen().s[16]++;
          return {
            id: e.course.id,
            title: e.course.title,
            progress: e.progress,
            completed: e.completed
          };
        })
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_4sxewglen().s[17]++;
      console.error('Error getting user learning data:', error);
      /* istanbul ignore next */
      cov_4sxewglen().s[18]++;
      return null;
    }
  }

  /**
   * Get user's transaction/wallet data for AI insights
   */
  async getUserFinancialData(userId) {
    /* istanbul ignore next */
    cov_4sxewglen().f[6]++;
    cov_4sxewglen().s[19]++;
    try {
      const wallets =
      /* istanbul ignore next */
      (cov_4sxewglen().s[20]++, await prisma.wallet.findMany({
        where: {
          userId
        },
        include: {
          transactions: {
            orderBy: {
              createdAt: 'desc'
            },
            take: 50
          }
        }
      }));
      const totalBalance =
      /* istanbul ignore next */
      (cov_4sxewglen().s[21]++, wallets.reduce((sum, w) => {
        /* istanbul ignore next */
        cov_4sxewglen().f[7]++;
        cov_4sxewglen().s[22]++;
        return sum + Number(w.balance);
      }, 0));
      const recentTransactions =
      /* istanbul ignore next */
      (cov_4sxewglen().s[23]++, wallets.flatMap(w => {
        /* istanbul ignore next */
        cov_4sxewglen().f[8]++;
        cov_4sxewglen().s[24]++;
        return w.transactions;
      }).slice(0, 20));
      /* istanbul ignore next */
      cov_4sxewglen().s[25]++;
      return {
        wallets,
        totalBalance,
        recentTransactions,
        transactionCount: recentTransactions.length
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_4sxewglen().s[26]++;
      console.error('Error getting user financial data:', error);
      /* istanbul ignore next */
      cov_4sxewglen().s[27]++;
      return null;
    }
  }

  /**
   * Get user's job/marketplace activity
   */
  async getUserMarketplaceData(userId) {
    /* istanbul ignore next */
    cov_4sxewglen().f[9]++;
    cov_4sxewglen().s[28]++;
    try {
      const jobs =
      /* istanbul ignore next */
      (cov_4sxewglen().s[29]++, await prisma.job.findMany({
        where: {
          userId
        },
        include: {
          applications: true
        }
      }));
      const applications =
      /* istanbul ignore next */
      (cov_4sxewglen().s[30]++, await prisma.application.findMany({
        where: {
          userId
        },
        include: {
          job: true
        }
      }));
      /* istanbul ignore next */
      cov_4sxewglen().s[31]++;
      return {
        postedJobs: jobs.length,
        activeJobs: jobs.filter(j => {
          /* istanbul ignore next */
          cov_4sxewglen().f[10]++;
          cov_4sxewglen().s[32]++;
          return j.status === 'OPEN';
        }).length,
        applications: applications.length,
        acceptedApplications: applications.filter(a => {
          /* istanbul ignore next */
          cov_4sxewglen().f[11]++;
          cov_4sxewglen().s[33]++;
          return a.status === 'ACCEPTED';
        }).length,
        jobs,
        applications
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_4sxewglen().s[34]++;
      console.error('Error getting user marketplace data:', error);
      /* istanbul ignore next */
      cov_4sxewglen().s[35]++;
      return null;
    }
  }

  /**
   * Get comprehensive user context for AI
   */
  async getFullUserContext(userId) {
    /* istanbul ignore next */
    cov_4sxewglen().f[12]++;
    const [userContext, learningData, financialData, marketplaceData] =
    /* istanbul ignore next */
    (cov_4sxewglen().s[36]++, await Promise.all([this.getUserContext(userId), this.getUserLearningData(userId), this.getUserFinancialData(userId), this.getUserMarketplaceData(userId)]));
    /* istanbul ignore next */
    cov_4sxewglen().s[37]++;
    return {
      user: userContext,
      learning: learningData,
      financial: financialData,
      marketplace: marketplaceData,
      timestamp: new Date()
    };
  }

  /**
   * Get inventory data for Retail AI
   */
  async getInventoryData(businessId) {
    /* istanbul ignore next */
    cov_4sxewglen().f[13]++;
    cov_4sxewglen().s[38]++;
    try {
      /* istanbul ignore next */
      cov_4sxewglen().s[39]++;
      // This would query actual inventory data
      // For now, we'll use a placeholder that can be extended
      // In production, this would query a products/inventory table

      // Example: If you have a Product model
      // const products = await prisma.product.findMany({
      //   where: businessId ? { businessId } : {},
      //   include: { inventory: true },
      // });

      // For now, return empty array - services should implement their own data models
      return [];
    } catch (error) {
      /* istanbul ignore next */
      cov_4sxewglen().s[40]++;
      console.error('Error getting inventory data:', error);
      /* istanbul ignore next */
      cov_4sxewglen().s[41]++;
      return [];
    }
  }

  /**
   * Get course data for LMS AI
   */
  async getCourseData(filters) {
    /* istanbul ignore next */
    cov_4sxewglen().f[14]++;
    cov_4sxewglen().s[42]++;
    try {
      const courses =
      /* istanbul ignore next */
      (cov_4sxewglen().s[43]++, await prisma.course.findMany({
        where:
        /* istanbul ignore next */
        (cov_4sxewglen().b[4][0]++, filters) ||
        /* istanbul ignore next */
        (cov_4sxewglen().b[4][1]++, {}),
        include: {
          lessons: true,
          enrollments: true
        }
      }));
      /* istanbul ignore next */
      cov_4sxewglen().s[44]++;
      return courses.map(course => {
        /* istanbul ignore next */
        cov_4sxewglen().f[15]++;
        cov_4sxewglen().s[45]++;
        return {
          id: course.id,
          title: course.title,
          description: course.description,
          price: course.price,
          published: course.published,
          lessonCount: course.lessons.length,
          enrollmentCount: course.enrollments.length
        };
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_4sxewglen().s[46]++;
      console.error('Error getting course data:', error);
      /* istanbul ignore next */
      cov_4sxewglen().s[47]++;
      return [];
    }
  }

  /**
   * Get student data for Institutional AI
   */
  async getStudentData(filters) {
    /* istanbul ignore next */
    cov_4sxewglen().f[16]++;
    cov_4sxewglen().s[48]++;
    try {
      const users =
      /* istanbul ignore next */
      (cov_4sxewglen().s[49]++, await prisma.user.findMany({
        where: {
          role: 'STUDENT',
          ...filters
        },
        include: {
          profile: true,
          enrollments: {
            include: {
              course: true
            }
          }
        }
      }));
      /* istanbul ignore next */
      cov_4sxewglen().s[50]++;
      return users.map(user => {
        /* istanbul ignore next */
        cov_4sxewglen().f[17]++;
        cov_4sxewglen().s[51]++;
        return {
          id: user.id,
          email: user.email,
          profile: user.profile,
          enrollments: user.enrollments.map(e => {
            /* istanbul ignore next */
            cov_4sxewglen().f[18]++;
            cov_4sxewglen().s[52]++;
            return {
              courseId: e.courseId,
              courseTitle: e.course.title,
              progress: e.progress,
              completed: e.completed
            };
          })
        };
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_4sxewglen().s[53]++;
      console.error('Error getting student data:', error);
      /* istanbul ignore next */
      cov_4sxewglen().s[54]++;
      return [];
    }
  }

  /**
   * Cache AI context for performance
   */
  async getCachedUserContext(userId, ttlSeconds =
  /* istanbul ignore next */
  (cov_4sxewglen().b[5][0]++, 300)) {
    /* istanbul ignore next */
    cov_4sxewglen().f[19]++;
    const cache =
    /* istanbul ignore next */
    (cov_4sxewglen().s[55]++, await getCacheService());
    const cacheKey =
    /* istanbul ignore next */
    (cov_4sxewglen().s[56]++, `ai:context:${userId}`);
    const cached =
    /* istanbul ignore next */
    (cov_4sxewglen().s[57]++, await cache.get(cacheKey));
    /* istanbul ignore next */
    cov_4sxewglen().s[58]++;
    if (cached) {
      /* istanbul ignore next */
      cov_4sxewglen().b[6][0]++;
      cov_4sxewglen().s[59]++;
      return cached;
    } else
    /* istanbul ignore next */
    {
      cov_4sxewglen().b[6][1]++;
    }
    const context =
    /* istanbul ignore next */
    (cov_4sxewglen().s[60]++, await this.getFullUserContext(userId));
    /* istanbul ignore next */
    cov_4sxewglen().s[61]++;
    await cache.set(cacheKey, context, ttlSeconds);
    /* istanbul ignore next */
    cov_4sxewglen().s[62]++;
    return context;
  }

  /**
   * Invalidate cached context
   */
  async invalidateUserContext(userId) {
    /* istanbul ignore next */
    cov_4sxewglen().f[20]++;
    const cache =
    /* istanbul ignore next */
    (cov_4sxewglen().s[63]++, await getCacheService());
    /* istanbul ignore next */
    cov_4sxewglen().s[64]++;
    await cache.delete(`ai:context:${userId}`);
  }
}

// Export singleton instance
export const aiDataAccess =
/* istanbul ignore next */
(cov_4sxewglen().s[65]++, new AIDataAccessService());
export default aiDataAccess;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfNHN4ZXdnbGVuIiwiYWN0dWFsQ292ZXJhZ2UiLCJwcmlzbWEiLCJnZXRDYWNoZVNlcnZpY2UiLCJBSURhdGFBY2Nlc3NTZXJ2aWNlIiwiZ2V0VXNlckNvbnRleHQiLCJ1c2VySWQiLCJmIiwicyIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImluY2x1ZGUiLCJwcm9maWxlIiwiYiIsImVtYWlsIiwicm9sZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicHJlZmVyZW5jZXMiLCJ1bmRlZmluZWQiLCJlcnJvciIsImNvbnNvbGUiLCJnZXRVc2VyTGVhcm5pbmdEYXRhIiwiZW5yb2xsbWVudHMiLCJlbnJvbGxtZW50IiwiZmluZE1hbnkiLCJjb3Vyc2UiLCJsZXNzb25zIiwiY29tcGxldGVkQ291cnNlcyIsImZpbHRlciIsImUiLCJjb21wbGV0ZWQiLCJsZW5ndGgiLCJpblByb2dyZXNzQ291cnNlcyIsInByb2dyZXNzIiwidG90YWxQcm9ncmVzcyIsInJlZHVjZSIsInN1bSIsImNvdXJzZXMiLCJtYXAiLCJ0aXRsZSIsImdldFVzZXJGaW5hbmNpYWxEYXRhIiwid2FsbGV0cyIsIndhbGxldCIsInRyYW5zYWN0aW9ucyIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ0YWtlIiwidG90YWxCYWxhbmNlIiwidyIsIk51bWJlciIsImJhbGFuY2UiLCJyZWNlbnRUcmFuc2FjdGlvbnMiLCJmbGF0TWFwIiwic2xpY2UiLCJ0cmFuc2FjdGlvbkNvdW50IiwiZ2V0VXNlck1hcmtldHBsYWNlRGF0YSIsImpvYnMiLCJqb2IiLCJhcHBsaWNhdGlvbnMiLCJhcHBsaWNhdGlvbiIsInBvc3RlZEpvYnMiLCJhY3RpdmVKb2JzIiwiaiIsInN0YXR1cyIsImFjY2VwdGVkQXBwbGljYXRpb25zIiwiYSIsImdldEZ1bGxVc2VyQ29udGV4dCIsInVzZXJDb250ZXh0IiwibGVhcm5pbmdEYXRhIiwiZmluYW5jaWFsRGF0YSIsIm1hcmtldHBsYWNlRGF0YSIsIlByb21pc2UiLCJhbGwiLCJsZWFybmluZyIsImZpbmFuY2lhbCIsIm1hcmtldHBsYWNlIiwidGltZXN0YW1wIiwiRGF0ZSIsImdldEludmVudG9yeURhdGEiLCJidXNpbmVzc0lkIiwiZ2V0Q291cnNlRGF0YSIsImZpbHRlcnMiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwicHVibGlzaGVkIiwibGVzc29uQ291bnQiLCJlbnJvbGxtZW50Q291bnQiLCJnZXRTdHVkZW50RGF0YSIsInVzZXJzIiwiY291cnNlSWQiLCJjb3Vyc2VUaXRsZSIsImdldENhY2hlZFVzZXJDb250ZXh0IiwidHRsU2Vjb25kcyIsImNhY2hlIiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJnZXQiLCJjb250ZXh0Iiwic2V0IiwiaW52YWxpZGF0ZVVzZXJDb250ZXh0IiwiZGVsZXRlIiwiYWlEYXRhQWNjZXNzIl0sInNvdXJjZXMiOlsiZGF0YS1hY2Nlc3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFaT1JBIFBST1BSSUVUQVJZIExJQ0VOU0VcbkNvcHlyaWdodCDCqSAyMDI1IEF6b3JhIEVTIChQdHkpIEx0ZC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuQUkgREFUQSBBQ0NFU1MgTEFZRVJcblByb3ZpZGVzIHJlYWwgZGF0YSBhY2Nlc3MgZm9yIENsYXVkZS9BSSBzZXJ2aWNlcyB3aXRoIHByb3BlciBhdXRoZW50aWNhdGlvbiBhbmQgY29udGV4dFxuKi9cblxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQGF6b3JhL3NoYXJlZC1kYXRhYmFzZS9wcmlzbWEnO1xuaW1wb3J0IHsgZ2V0Q2FjaGVTZXJ2aWNlIH0gZnJvbSAnQGF6b3JhL3NoYXJlZC1kYXRhYmFzZS9yZWRpcyc7XG5pbXBvcnQgeyBhdXRoZW50aWNhdGVTZXNzaW9uLCBBdXRoUmVxdWVzdCB9IGZyb20gJ0Bhem9yYS9zaGFyZWQtYXV0aC9taWRkbGV3YXJlJztcblxuLyoqXG4gKiBVc2VyIGNvbnRleHQgZm9yIEFJIHNlcnZpY2VzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckNvbnRleHQge1xuICB1c2VySWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogc3RyaW5nO1xuICBwcm9maWxlPzoge1xuICAgIGZpcnN0TmFtZT86IHN0cmluZztcbiAgICBsYXN0TmFtZT86IHN0cmluZztcbiAgICBwcmVmZXJlbmNlcz86IGFueTtcbiAgfTtcbn1cblxuLyoqXG4gKiBBSSBEYXRhIEFjY2VzcyBTZXJ2aWNlXG4gKiBQcm92aWRlcyByZWFsIGRhdGEgYWNjZXNzIGZvciBBSSBzZXJ2aWNlc1xuICovXG5leHBvcnQgY2xhc3MgQUlEYXRhQWNjZXNzU2VydmljZSB7XG4gIC8qKlxuICAgKiBHZXQgdXNlciBjb250ZXh0IGZvciBBSSBwcm9jZXNzaW5nXG4gICAqL1xuICBhc3luYyBnZXRVc2VyQ29udGV4dCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlckNvbnRleHQgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgcHJvZmlsZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgcHJvZmlsZTogdXNlci5wcm9maWxlID8ge1xuICAgICAgICAgIGZpcnN0TmFtZTogdXNlci5wcm9maWxlLmZpcnN0TmFtZSxcbiAgICAgICAgICBsYXN0TmFtZTogdXNlci5wcm9maWxlLmxhc3ROYW1lLFxuICAgICAgICAgIHByZWZlcmVuY2VzOiB7fSxcbiAgICAgICAgfSA6IHVuZGVmaW5lZCxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBjb250ZXh0OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdXNlcidzIGxlYXJuaW5nIGRhdGEgZm9yIEFJIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0VXNlckxlYXJuaW5nRGF0YSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVucm9sbG1lbnRzID0gYXdhaXQgcHJpc21hLmVucm9sbG1lbnQuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGNvdXJzZToge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBsZXNzb25zOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbXBsZXRlZENvdXJzZXMgPSBlbnJvbGxtZW50cy5maWx0ZXIoZSA9PiBlLmNvbXBsZXRlZCkubGVuZ3RoO1xuICAgICAgY29uc3QgaW5Qcm9ncmVzc0NvdXJzZXMgPSBlbnJvbGxtZW50cy5maWx0ZXIoZSA9PiAhZS5jb21wbGV0ZWQgJiYgZS5wcm9ncmVzcyA+IDApLmxlbmd0aDtcbiAgICAgIGNvbnN0IHRvdGFsUHJvZ3Jlc3MgPSBlbnJvbGxtZW50cy5yZWR1Y2UoKHN1bSwgZSkgPT4gc3VtICsgZS5wcm9ncmVzcywgMCkgLyBlbnJvbGxtZW50cy5sZW5ndGggfHwgMDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW5yb2xsbWVudHMsXG4gICAgICAgIGNvbXBsZXRlZENvdXJzZXMsXG4gICAgICAgIGluUHJvZ3Jlc3NDb3Vyc2VzLFxuICAgICAgICB0b3RhbFByb2dyZXNzLFxuICAgICAgICBjb3Vyc2VzOiBlbnJvbGxtZW50cy5tYXAoZSA9PiAoe1xuICAgICAgICAgIGlkOiBlLmNvdXJzZS5pZCxcbiAgICAgICAgICB0aXRsZTogZS5jb3Vyc2UudGl0bGUsXG4gICAgICAgICAgcHJvZ3Jlc3M6IGUucHJvZ3Jlc3MsXG4gICAgICAgICAgY29tcGxldGVkOiBlLmNvbXBsZXRlZCxcbiAgICAgICAgfSkpLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGxlYXJuaW5nIGRhdGE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB1c2VyJ3MgdHJhbnNhY3Rpb24vd2FsbGV0IGRhdGEgZm9yIEFJIGluc2lnaHRzXG4gICAqL1xuICBhc3luYyBnZXRVc2VyRmluYW5jaWFsRGF0YSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHdhbGxldHMgPSBhd2FpdCBwcmlzbWEud2FsbGV0LmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB0cmFuc2FjdGlvbnM6IHtcbiAgICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICAgIHRha2U6IDUwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdG90YWxCYWxhbmNlID0gd2FsbGV0cy5yZWR1Y2UoKHN1bSwgdykgPT4gc3VtICsgTnVtYmVyKHcuYmFsYW5jZSksIDApO1xuICAgICAgY29uc3QgcmVjZW50VHJhbnNhY3Rpb25zID0gd2FsbGV0cy5mbGF0TWFwKHcgPT4gdy50cmFuc2FjdGlvbnMpLnNsaWNlKDAsIDIwKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2FsbGV0cyxcbiAgICAgICAgdG90YWxCYWxhbmNlLFxuICAgICAgICByZWNlbnRUcmFuc2FjdGlvbnMsXG4gICAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IHJlY2VudFRyYW5zYWN0aW9ucy5sZW5ndGgsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgZmluYW5jaWFsIGRhdGE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB1c2VyJ3Mgam9iL21hcmtldHBsYWNlIGFjdGl2aXR5XG4gICAqL1xuICBhc3luYyBnZXRVc2VyTWFya2V0cGxhY2VEYXRhKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgam9icyA9IGF3YWl0IHByaXNtYS5qb2IuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGFwcGxpY2F0aW9uczogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhcHBsaWNhdGlvbnMgPSBhd2FpdCBwcmlzbWEuYXBwbGljYXRpb24uZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGpvYjogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb3N0ZWRKb2JzOiBqb2JzLmxlbmd0aCxcbiAgICAgICAgYWN0aXZlSm9iczogam9icy5maWx0ZXIoaiA9PiBqLnN0YXR1cyA9PT0gJ09QRU4nKS5sZW5ndGgsXG4gICAgICAgIGFwcGxpY2F0aW9uczogYXBwbGljYXRpb25zLmxlbmd0aCxcbiAgICAgICAgYWNjZXB0ZWRBcHBsaWNhdGlvbnM6IGFwcGxpY2F0aW9ucy5maWx0ZXIoYSA9PiBhLnN0YXR1cyA9PT0gJ0FDQ0VQVEVEJykubGVuZ3RoLFxuICAgICAgICBqb2JzLFxuICAgICAgICBhcHBsaWNhdGlvbnMsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgbWFya2V0cGxhY2UgZGF0YTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbXByZWhlbnNpdmUgdXNlciBjb250ZXh0IGZvciBBSVxuICAgKi9cbiAgYXN5bmMgZ2V0RnVsbFVzZXJDb250ZXh0KHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBbdXNlckNvbnRleHQsIGxlYXJuaW5nRGF0YSwgZmluYW5jaWFsRGF0YSwgbWFya2V0cGxhY2VEYXRhXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMuZ2V0VXNlckNvbnRleHQodXNlcklkKSxcbiAgICAgIHRoaXMuZ2V0VXNlckxlYXJuaW5nRGF0YSh1c2VySWQpLFxuICAgICAgdGhpcy5nZXRVc2VyRmluYW5jaWFsRGF0YSh1c2VySWQpLFxuICAgICAgdGhpcy5nZXRVc2VyTWFya2V0cGxhY2VEYXRhKHVzZXJJZCksXG4gICAgXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXNlcjogdXNlckNvbnRleHQsXG4gICAgICBsZWFybmluZzogbGVhcm5pbmdEYXRhLFxuICAgICAgZmluYW5jaWFsOiBmaW5hbmNpYWxEYXRhLFxuICAgICAgbWFya2V0cGxhY2U6IG1hcmtldHBsYWNlRGF0YSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBpbnZlbnRvcnkgZGF0YSBmb3IgUmV0YWlsIEFJXG4gICAqL1xuICBhc3luYyBnZXRJbnZlbnRvcnlEYXRhKGJ1c2luZXNzSWQ/OiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRoaXMgd291bGQgcXVlcnkgYWN0dWFsIGludmVudG9yeSBkYXRhXG4gICAgICAvLyBGb3Igbm93LCB3ZSdsbCB1c2UgYSBwbGFjZWhvbGRlciB0aGF0IGNhbiBiZSBleHRlbmRlZFxuICAgICAgLy8gSW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZCBxdWVyeSBhIHByb2R1Y3RzL2ludmVudG9yeSB0YWJsZVxuICAgICAgXG4gICAgICAvLyBFeGFtcGxlOiBJZiB5b3UgaGF2ZSBhIFByb2R1Y3QgbW9kZWxcbiAgICAgIC8vIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZE1hbnkoe1xuICAgICAgLy8gICB3aGVyZTogYnVzaW5lc3NJZCA/IHsgYnVzaW5lc3NJZCB9IDoge30sXG4gICAgICAvLyAgIGluY2x1ZGU6IHsgaW52ZW50b3J5OiB0cnVlIH0sXG4gICAgICAvLyB9KTtcbiAgICAgIFxuICAgICAgLy8gRm9yIG5vdywgcmV0dXJuIGVtcHR5IGFycmF5IC0gc2VydmljZXMgc2hvdWxkIGltcGxlbWVudCB0aGVpciBvd24gZGF0YSBtb2RlbHNcbiAgICAgIHJldHVybiBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBpbnZlbnRvcnkgZGF0YTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb3Vyc2UgZGF0YSBmb3IgTE1TIEFJXG4gICAqL1xuICBhc3luYyBnZXRDb3Vyc2VEYXRhKGZpbHRlcnM/OiBhbnkpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvdXJzZXMgPSBhd2FpdCBwcmlzbWEuY291cnNlLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IGZpbHRlcnMgfHwge30sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBsZXNzb25zOiB0cnVlLFxuICAgICAgICAgIGVucm9sbG1lbnRzOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjb3Vyc2VzLm1hcChjb3Vyc2UgPT4gKHtcbiAgICAgICAgaWQ6IGNvdXJzZS5pZCxcbiAgICAgICAgdGl0bGU6IGNvdXJzZS50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGNvdXJzZS5kZXNjcmlwdGlvbixcbiAgICAgICAgcHJpY2U6IGNvdXJzZS5wcmljZSxcbiAgICAgICAgcHVibGlzaGVkOiBjb3Vyc2UucHVibGlzaGVkLFxuICAgICAgICBsZXNzb25Db3VudDogY291cnNlLmxlc3NvbnMubGVuZ3RoLFxuICAgICAgICBlbnJvbGxtZW50Q291bnQ6IGNvdXJzZS5lbnJvbGxtZW50cy5sZW5ndGgsXG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY291cnNlIGRhdGE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3R1ZGVudCBkYXRhIGZvciBJbnN0aXR1dGlvbmFsIEFJXG4gICAqL1xuICBhc3luYyBnZXRTdHVkZW50RGF0YShmaWx0ZXJzPzogYW55KTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICByb2xlOiAnU1RVREVOVCcsXG4gICAgICAgICAgLi4uZmlsdGVycyxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHByb2ZpbGU6IHRydWUsXG4gICAgICAgICAgZW5yb2xsbWVudHM6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgY291cnNlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB1c2Vycy5tYXAodXNlciA9PiAoe1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIHByb2ZpbGU6IHVzZXIucHJvZmlsZSxcbiAgICAgICAgZW5yb2xsbWVudHM6IHVzZXIuZW5yb2xsbWVudHMubWFwKGUgPT4gKHtcbiAgICAgICAgICBjb3Vyc2VJZDogZS5jb3Vyc2VJZCxcbiAgICAgICAgICBjb3Vyc2VUaXRsZTogZS5jb3Vyc2UudGl0bGUsXG4gICAgICAgICAgcHJvZ3Jlc3M6IGUucHJvZ3Jlc3MsXG4gICAgICAgICAgY29tcGxldGVkOiBlLmNvbXBsZXRlZCxcbiAgICAgICAgfSkpLFxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHN0dWRlbnQgZGF0YTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhY2hlIEFJIGNvbnRleHQgZm9yIHBlcmZvcm1hbmNlXG4gICAqL1xuICBhc3luYyBnZXRDYWNoZWRVc2VyQ29udGV4dCh1c2VySWQ6IHN0cmluZywgdHRsU2Vjb25kczogbnVtYmVyID0gMzAwKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gICAgY29uc3QgY2FjaGUgPSBhd2FpdCBnZXRDYWNoZVNlcnZpY2UoKTtcbiAgICBjb25zdCBjYWNoZUtleSA9IGBhaTpjb250ZXh0OiR7dXNlcklkfWA7XG4gICAgXG4gICAgY29uc3QgY2FjaGVkID0gYXdhaXQgY2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCB0aGlzLmdldEZ1bGxVc2VyQ29udGV4dCh1c2VySWQpO1xuICAgIGF3YWl0IGNhY2hlLnNldChjYWNoZUtleSwgY29udGV4dCwgdHRsU2Vjb25kcyk7XG4gICAgXG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogSW52YWxpZGF0ZSBjYWNoZWQgY29udGV4dFxuICAgKi9cbiAgYXN5bmMgaW52YWxpZGF0ZVVzZXJDb250ZXh0KHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY2FjaGUgPSBhd2FpdCBnZXRDYWNoZVNlcnZpY2UoKTtcbiAgICBhd2FpdCBjYWNoZS5kZWxldGUoYGFpOmNvbnRleHQ6JHt1c2VySWR9YCk7XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGFpRGF0YUFjY2VzcyA9IG5ldyBBSURhdGFBY2Nlc3NTZXJ2aWNlKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFpRGF0YUFjY2VzcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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