{"version":3,"names":["cov_jz77pmpnb","actualCoverage","zlib","winston","logger","s","createLogger","defaultMeta","service","format","combine","timestamp","json","transports","Console","colorize","printf","level","message","meta","f","metaStr","Object","keys","length","b","JSON","stringify","PayloadOptimizer","compressionThreshold","compressPayload","data","encoding","jsonString","buffer","Buffer","from","Promise","resolve","reject","gzip","err","compressed","deflate","sendCompressed","res","originalSize","compressedSize","ratio","toFixed","set","toString","debug","send","error","selectFields","obj","fields","result","forEach","field","selectFieldsFromArray","items","map","item","removeNullValues","entries","key","value","undefined","truncateStrings","maxLength","substring","flattenObject","prefix","newKey","Array","isArray","assign","paginateArray","page","pageSize","start","end","slice","total","hasMore","getPayloadSize","getPayloadSizeFormatted","bytes","setCompressionThreshold","info","threshold","getCompressionThreshold","optimizeResponse","options","removeNull","maxStringLength","paginate","payloadOptimizer","fieldSelections","userBasic","userProfile","userFull","courseBasic","courseList","courseFull","jobBasic","jobList","jobFull","walletBasic","walletFull","responsePresets","minimal","standard","full"],"sources":["payload-optimizer.ts"],"sourcesContent":["import { Response } from 'express';\nimport zlib from 'zlib';\nimport winston from 'winston';\n\nconst logger = winston.createLogger({\n  defaultMeta: { service: 'payload-optimizer' },\n  format: winston.format.combine(\n    winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }),\n    winston.format.json()\n  ),\n  transports: [\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.printf(({ timestamp, level, message, ...meta }) => {\n          const metaStr = Object.keys(meta).length ? JSON.stringify(meta) : '';\n          return `${timestamp} [PAYLOAD] ${level}: ${message} ${metaStr}`;\n        })\n      ),\n    }),\n  ],\n});\n\n/**\n * Payload Optimizer for reducing response sizes\n * Implements compression and field selection strategies\n */\nexport class PayloadOptimizer {\n  private compressionThreshold: number = 1024; // 1KB - compress if larger\n\n  /**\n   * Compress response payload\n   */\n  async compressPayload(data: any, encoding: string = 'gzip'): Promise<Buffer> {\n    const jsonString = JSON.stringify(data);\n    const buffer = Buffer.from(jsonString, 'utf-8');\n\n    return new Promise((resolve, reject) => {\n      if (encoding === 'gzip') {\n        zlib.gzip(buffer, (err, compressed) => {\n          if (err) {reject(err);}\n          else {resolve(compressed);}\n        });\n      } else if (encoding === 'deflate') {\n        zlib.deflate(buffer, (err, compressed) => {\n          if (err) {reject(err);}\n          else {resolve(compressed);}\n        });\n      } else {\n        resolve(buffer);\n      }\n    });\n  }\n\n  /**\n   * Send compressed response\n   */\n  async sendCompressed(res: Response, data: any, encoding: string = 'gzip'): Promise<void> {\n    try {\n      const compressed = await this.compressPayload(data, encoding);\n      const originalSize = JSON.stringify(data).length;\n      const compressedSize = compressed.length;\n      const ratio = ((1 - compressedSize / originalSize) * 100).toFixed(2);\n\n      res.set('Content-Encoding', encoding);\n      res.set('Content-Type', 'application/json');\n      res.set('X-Original-Size', originalSize.toString());\n      res.set('X-Compressed-Size', compressedSize.toString());\n      res.set('X-Compression-Ratio', `${ratio}%`);\n\n      logger.debug('Payload compressed', {\n        originalSize,\n        compressedSize,\n        ratio: `${ratio}%`,\n        encoding,\n      });\n\n      res.send(compressed);\n    } catch (error) {\n      logger.error('Compression error', { error: (error as Error).message });\n      res.json(data);\n    }\n  }\n\n  /**\n   * Select specific fields from object\n   */\n  selectFields<T extends Record<string, any>>(obj: T, fields: string[]): Partial<T> {\n    const result: any = {};\n    fields.forEach(field => {\n      if (field in obj) {\n        result[field] = obj[field];\n      }\n    });\n    return result;\n  }\n\n  /**\n   * Select fields from array of objects\n   */\n  selectFieldsFromArray<T extends Record<string, any>>(\n    items: T[],\n    fields: string[]\n  ): Partial<T>[] {\n    return items.map(item => this.selectFields(item, fields));\n  }\n\n  /**\n   * Remove null/undefined values from object\n   */\n  removeNullValues<T extends Record<string, any>>(obj: T): Partial<T> {\n    const result: any = {};\n    Object.entries(obj).forEach(([key, value]) => {\n      if (value !== null && value !== undefined) {\n        result[key] = value;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * Truncate large strings\n   */\n  truncateStrings<T extends Record<string, any>>(\n    obj: T,\n    maxLength: number = 100\n  ): Partial<T> {\n    const result: any = {};\n    Object.entries(obj).forEach(([key, value]) => {\n      if (typeof value === 'string' && value.length > maxLength) {\n        result[key] = value.substring(0, maxLength) + '...';\n      } else {\n        result[key] = value;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * Flatten nested objects\n   */\n  flattenObject<T extends Record<string, any>>(\n    obj: T,\n    prefix: string = ''\n  ): Record<string, any> {\n    const result: Record<string, any> = {};\n\n    Object.entries(obj).forEach(([key, value]) => {\n      const newKey = prefix ? `${prefix}.${key}` : key;\n\n      if (value !== null && typeof value === 'object' && !Array.isArray(value)) {\n        Object.assign(result, this.flattenObject(value, newKey));\n      } else {\n        result[newKey] = value;\n      }\n    });\n\n    return result;\n  }\n\n  /**\n   * Paginate array response\n   */\n  paginateArray<T>(\n    items: T[],\n    page: number = 1,\n    pageSize: number = 20\n  ): { data: T[]; page: number; pageSize: number; total: number; hasMore: boolean } {\n    const start = (page - 1) * pageSize;\n    const end = start + pageSize;\n    const data = items.slice(start, end);\n    const total = items.length;\n    const hasMore = end < total;\n\n    return {\n      data,\n      page,\n      pageSize,\n      total,\n      hasMore,\n    };\n  }\n\n  /**\n   * Get payload size\n   */\n  getPayloadSize(data: any): number {\n    return JSON.stringify(data).length;\n  }\n\n  /**\n   * Get payload size in human readable format\n   */\n  getPayloadSizeFormatted(data: any): string {\n    const bytes = this.getPayloadSize(data);\n    if (bytes < 1024) {return `${bytes} B`;}\n    if (bytes < 1024 * 1024) {return `${(bytes / 1024).toFixed(2)} KB`;}\n    return `${(bytes / (1024 * 1024)).toFixed(2)} MB`;\n  }\n\n  /**\n   * Set compression threshold\n   */\n  setCompressionThreshold(bytes: number): void {\n    this.compressionThreshold = bytes;\n    logger.info('Compression threshold updated', { threshold: bytes });\n  }\n\n  /**\n   * Get compression threshold\n   */\n  getCompressionThreshold(): number {\n    return this.compressionThreshold;\n  }\n\n  /**\n   * Optimize response payload\n   */\n  optimizeResponse<T extends Record<string, any>>(\n    data: T,\n    options: {\n      fields?: string[];\n      removeNull?: boolean;\n      truncateStrings?: boolean;\n      maxStringLength?: number;\n      paginate?: boolean;\n      page?: number;\n      pageSize?: number;\n    } = {}\n  ): any {\n    let result: any = data;\n\n    // Select fields\n    if (options.fields) {\n      if (Array.isArray(result)) {\n        result = this.selectFieldsFromArray(result, options.fields);\n      } else {\n        result = this.selectFields(result, options.fields);\n      }\n    }\n\n    // Remove null values\n    if (options.removeNull) {\n      if (Array.isArray(result)) {\n        result = result.map(item => this.removeNullValues(item));\n      } else {\n        result = this.removeNullValues(result);\n      }\n    }\n\n    // Truncate strings\n    if (options.truncateStrings) {\n      const maxLength = options.maxStringLength || 100;\n      if (Array.isArray(result)) {\n        result = result.map(item => this.truncateStrings(item, maxLength));\n      } else {\n        result = this.truncateStrings(result, maxLength);\n      }\n    }\n\n    // Paginate\n    if (options.paginate && Array.isArray(result)) {\n      result = this.paginateArray(result, options.page, options.pageSize);\n    }\n\n    return result;\n  }\n}\n\n// Export singleton instance\nexport const payloadOptimizer = new PayloadOptimizer();\n\n/**\n * Common field selections for optimization\n */\nexport const fieldSelections = {\n  // User fields\n  userBasic: ['id', 'email', 'name', 'avatar'],\n  userProfile: ['id', 'email', 'name', 'avatar', 'bio', 'createdAt'],\n  userFull: ['id', 'email', 'name', 'avatar', 'bio', 'createdAt', 'updatedAt'],\n\n  // Course fields\n  courseBasic: ['id', 'title', 'category', 'thumbnail'],\n  courseList: ['id', 'title', 'category', 'thumbnail', 'instructor', 'rating', 'price'],\n  courseFull: ['id', 'title', 'description', 'category', 'thumbnail', 'instructor', 'rating', 'price', 'createdAt'],\n\n  // Job fields\n  jobBasic: ['id', 'title', 'company', 'location'],\n  jobList: ['id', 'title', 'company', 'location', 'salary', 'type', 'postedAt'],\n  jobFull: ['id', 'title', 'description', 'company', 'location', 'salary', 'type', 'requirements', 'postedAt'],\n\n  // Wallet fields\n  walletBasic: ['id', 'balance', 'currency'],\n  walletFull: ['id', 'balance', 'currency', 'lastUpdated', 'transactions'],\n};\n\n/**\n * Response optimization presets\n */\nexport const responsePresets = {\n  minimal: {\n    removeNull: true,\n    truncateStrings: true,\n    maxStringLength: 50,\n  },\n  standard: {\n    removeNull: true,\n    truncateStrings: true,\n    maxStringLength: 200,\n  },\n  full: {\n    removeNull: false,\n    truncateStrings: false,\n  },\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAdZ,OAAOE,IAAI,MAAM,MAAM;AACvB,OAAOC,OAAO,MAAM,SAAS;AAE7B,MAAMC,MAAM;AAAA;AAAA,CAAAJ,aAAA,GAAAK,CAAA,OAAGF,OAAO,CAACG,YAAY,CAAC;EAClCC,WAAW,EAAE;IAAEC,OAAO,EAAE;EAAoB,CAAC;EAC7CC,MAAM,EAAEN,OAAO,CAACM,MAAM,CAACC,OAAO,CAC5BP,OAAO,CAACM,MAAM,CAACE,SAAS,CAAC;IAAEF,MAAM,EAAE;EAAsB,CAAC,CAAC,EAC3DN,OAAO,CAACM,MAAM,CAACG,IAAI,CAAC,CACtB,CAAC;EACDC,UAAU,EAAE,CACV,IAAIV,OAAO,CAACU,UAAU,CAACC,OAAO,CAAC;IAC7BL,MAAM,EAAEN,OAAO,CAACM,MAAM,CAACC,OAAO,CAC5BP,OAAO,CAACM,MAAM,CAACM,QAAQ,CAAC,CAAC,EACzBZ,OAAO,CAACM,MAAM,CAACO,MAAM,CAAC,CAAC;MAAEL,SAAS;MAAEM,KAAK;MAAEC,OAAO;MAAE,GAAGC;IAAK,CAAC,KAAK;MAAA;MAAAnB,aAAA,GAAAoB,CAAA;MAChE,MAAMC,OAAO;MAAA;MAAA,CAAArB,aAAA,GAAAK,CAAA,OAAGiB,MAAM,CAACC,IAAI,CAACJ,IAAI,CAAC,CAACK,MAAM;MAAA;MAAA,CAAAxB,aAAA,GAAAyB,CAAA,UAAGC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC;MAAA;MAAA,CAAAnB,aAAA,GAAAyB,CAAA,UAAG,EAAE;MAAC;MAAAzB,aAAA,GAAAK,CAAA;MACrE,OAAO,GAAGM,SAAS,cAAcM,KAAK,KAAKC,OAAO,IAAIG,OAAO,EAAE;IACjE,CAAC,CACH;EACF,CAAC,CAAC;AAEN,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA,OAAO,MAAMO,gBAAgB,CAAC;EACpBC,oBAAoB;EAAA;EAAA,CAAA7B,aAAA,GAAAK,CAAA,OAAW,IAAI,EAAC,CAAC;;EAE7C;AACF;AACA;EACE,MAAMyB,eAAeA,CAACC,IAAS,EAAEC,QAAgB;EAAA;EAAA,CAAAhC,aAAA,GAAAyB,CAAA,UAAG,MAAM,GAAmB;IAAA;IAAAzB,aAAA,GAAAoB,CAAA;IAC3E,MAAMa,UAAU;IAAA;IAAA,CAAAjC,aAAA,GAAAK,CAAA,OAAGqB,IAAI,CAACC,SAAS,CAACI,IAAI,CAAC;IACvC,MAAMG,MAAM;IAAA;IAAA,CAAAlC,aAAA,GAAAK,CAAA,OAAG8B,MAAM,CAACC,IAAI,CAACH,UAAU,EAAE,OAAO,CAAC;IAAC;IAAAjC,aAAA,GAAAK,CAAA;IAEhD,OAAO,IAAIgC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MAAA;MAAAvC,aAAA,GAAAoB,CAAA;MAAApB,aAAA,GAAAK,CAAA;MACtC,IAAI2B,QAAQ,KAAK,MAAM,EAAE;QAAA;QAAAhC,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACvBH,IAAI,CAACsC,IAAI,CAACN,MAAM,EAAE,CAACO,GAAG,EAAEC,UAAU,KAAK;UAAA;UAAA1C,aAAA,GAAAoB,CAAA;UAAApB,aAAA,GAAAK,CAAA;UACrC,IAAIoC,GAAG,EAAE;YAAA;YAAAzC,aAAA,GAAAyB,CAAA;YAAAzB,aAAA,GAAAK,CAAA;YAACkC,MAAM,CAACE,GAAG,CAAC;UAAC,CAAC,MAClB;YAAA;YAAAzC,aAAA,GAAAyB,CAAA;YAAAzB,aAAA,GAAAK,CAAA;YAACiC,OAAO,CAACI,UAAU,CAAC;UAAC;QAC5B,CAAC,CAAC;MACJ,CAAC,MAAM;QAAA;QAAA1C,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QAAA,IAAI2B,QAAQ,KAAK,SAAS,EAAE;UAAA;UAAAhC,aAAA,GAAAyB,CAAA;UAAAzB,aAAA,GAAAK,CAAA;UACjCH,IAAI,CAACyC,OAAO,CAACT,MAAM,EAAE,CAACO,GAAG,EAAEC,UAAU,KAAK;YAAA;YAAA1C,aAAA,GAAAoB,CAAA;YAAApB,aAAA,GAAAK,CAAA;YACxC,IAAIoC,GAAG,EAAE;cAAA;cAAAzC,aAAA,GAAAyB,CAAA;cAAAzB,aAAA,GAAAK,CAAA;cAACkC,MAAM,CAACE,GAAG,CAAC;YAAC,CAAC,MAClB;cAAA;cAAAzC,aAAA,GAAAyB,CAAA;cAAAzB,aAAA,GAAAK,CAAA;cAACiC,OAAO,CAACI,UAAU,CAAC;YAAC;UAC5B,CAAC,CAAC;QACJ,CAAC,MAAM;UAAA;UAAA1C,aAAA,GAAAyB,CAAA;UAAAzB,aAAA,GAAAK,CAAA;UACLiC,OAAO,CAACJ,MAAM,CAAC;QACjB;MAAA;IACF,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;EACE,MAAMU,cAAcA,CAACC,GAAa,EAAEd,IAAS,EAAEC,QAAgB;EAAA;EAAA,CAAAhC,aAAA,GAAAyB,CAAA,UAAG,MAAM,GAAiB;IAAA;IAAAzB,aAAA,GAAAoB,CAAA;IAAApB,aAAA,GAAAK,CAAA;IACvF,IAAI;MACF,MAAMqC,UAAU;MAAA;MAAA,CAAA1C,aAAA,GAAAK,CAAA,QAAG,MAAM,IAAI,CAACyB,eAAe,CAACC,IAAI,EAAEC,QAAQ,CAAC;MAC7D,MAAMc,YAAY;MAAA;MAAA,CAAA9C,aAAA,GAAAK,CAAA,QAAGqB,IAAI,CAACC,SAAS,CAACI,IAAI,CAAC,CAACP,MAAM;MAChD,MAAMuB,cAAc;MAAA;MAAA,CAAA/C,aAAA,GAAAK,CAAA,QAAGqC,UAAU,CAAClB,MAAM;MACxC,MAAMwB,KAAK;MAAA;MAAA,CAAAhD,aAAA,GAAAK,CAAA,QAAG,CAAC,CAAC,CAAC,GAAG0C,cAAc,GAAGD,YAAY,IAAI,GAAG,EAAEG,OAAO,CAAC,CAAC,CAAC;MAAC;MAAAjD,aAAA,GAAAK,CAAA;MAErEwC,GAAG,CAACK,GAAG,CAAC,kBAAkB,EAAElB,QAAQ,CAAC;MAAC;MAAAhC,aAAA,GAAAK,CAAA;MACtCwC,GAAG,CAACK,GAAG,CAAC,cAAc,EAAE,kBAAkB,CAAC;MAAC;MAAAlD,aAAA,GAAAK,CAAA;MAC5CwC,GAAG,CAACK,GAAG,CAAC,iBAAiB,EAAEJ,YAAY,CAACK,QAAQ,CAAC,CAAC,CAAC;MAAC;MAAAnD,aAAA,GAAAK,CAAA;MACpDwC,GAAG,CAACK,GAAG,CAAC,mBAAmB,EAAEH,cAAc,CAACI,QAAQ,CAAC,CAAC,CAAC;MAAC;MAAAnD,aAAA,GAAAK,CAAA;MACxDwC,GAAG,CAACK,GAAG,CAAC,qBAAqB,EAAE,GAAGF,KAAK,GAAG,CAAC;MAAC;MAAAhD,aAAA,GAAAK,CAAA;MAE5CD,MAAM,CAACgD,KAAK,CAAC,oBAAoB,EAAE;QACjCN,YAAY;QACZC,cAAc;QACdC,KAAK,EAAE,GAAGA,KAAK,GAAG;QAClBhB;MACF,CAAC,CAAC;MAAC;MAAAhC,aAAA,GAAAK,CAAA;MAEHwC,GAAG,CAACQ,IAAI,CAACX,UAAU,CAAC;IACtB,CAAC,CAAC,OAAOY,KAAK,EAAE;MAAA;MAAAtD,aAAA,GAAAK,CAAA;MACdD,MAAM,CAACkD,KAAK,CAAC,mBAAmB,EAAE;QAAEA,KAAK,EAAGA,KAAK,CAAWpC;MAAQ,CAAC,CAAC;MAAC;MAAAlB,aAAA,GAAAK,CAAA;MACvEwC,GAAG,CAACjC,IAAI,CAACmB,IAAI,CAAC;IAChB;EACF;;EAEA;AACF;AACA;EACEwB,YAAYA,CAAgCC,GAAM,EAAEC,MAAgB,EAAc;IAAA;IAAAzD,aAAA,GAAAoB,CAAA;IAChF,MAAMsC,MAAW;IAAA;IAAA,CAAA1D,aAAA,GAAAK,CAAA,QAAG,CAAC,CAAC;IAAC;IAAAL,aAAA,GAAAK,CAAA;IACvBoD,MAAM,CAACE,OAAO,CAACC,KAAK,IAAI;MAAA;MAAA5D,aAAA,GAAAoB,CAAA;MAAApB,aAAA,GAAAK,CAAA;MACtB,IAAIuD,KAAK,IAAIJ,GAAG,EAAE;QAAA;QAAAxD,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QAChBqD,MAAM,CAACE,KAAK,CAAC,GAAGJ,GAAG,CAACI,KAAK,CAAC;MAC5B,CAAC;MAAA;MAAA;QAAA5D,aAAA,GAAAyB,CAAA;MAAA;IACH,CAAC,CAAC;IAAC;IAAAzB,aAAA,GAAAK,CAAA;IACH,OAAOqD,MAAM;EACf;;EAEA;AACF;AACA;EACEG,qBAAqBA,CACnBC,KAAU,EACVL,MAAgB,EACF;IAAA;IAAAzD,aAAA,GAAAoB,CAAA;IAAApB,aAAA,GAAAK,CAAA;IACd,OAAOyD,KAAK,CAACC,GAAG,CAACC,IAAI,IAAI;MAAA;MAAAhE,aAAA,GAAAoB,CAAA;MAAApB,aAAA,GAAAK,CAAA;MAAA,WAAI,CAACkD,YAAY,CAACS,IAAI,EAAEP,MAAM,CAAC;IAAD,CAAC,CAAC;EAC3D;;EAEA;AACF;AACA;EACEQ,gBAAgBA,CAAgCT,GAAM,EAAc;IAAA;IAAAxD,aAAA,GAAAoB,CAAA;IAClE,MAAMsC,MAAW;IAAA;IAAA,CAAA1D,aAAA,GAAAK,CAAA,QAAG,CAAC,CAAC;IAAC;IAAAL,aAAA,GAAAK,CAAA;IACvBiB,MAAM,CAAC4C,OAAO,CAACV,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACQ,GAAG,EAAEC,KAAK,CAAC,KAAK;MAAA;MAAApE,aAAA,GAAAoB,CAAA;MAAApB,aAAA,GAAAK,CAAA;MAC5C;MAAI;MAAA,CAAAL,aAAA,GAAAyB,CAAA,UAAA2C,KAAK,KAAK,IAAI;MAAA;MAAA,CAAApE,aAAA,GAAAyB,CAAA,UAAI2C,KAAK,KAAKC,SAAS,GAAE;QAAA;QAAArE,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACzCqD,MAAM,CAACS,GAAG,CAAC,GAAGC,KAAK;MACrB,CAAC;MAAA;MAAA;QAAApE,aAAA,GAAAyB,CAAA;MAAA;IACH,CAAC,CAAC;IAAC;IAAAzB,aAAA,GAAAK,CAAA;IACH,OAAOqD,MAAM;EACf;;EAEA;AACF;AACA;EACEY,eAAeA,CACbd,GAAM,EACNe,SAAiB;EAAA;EAAA,CAAAvE,aAAA,GAAAyB,CAAA,WAAG,GAAG,GACX;IAAA;IAAAzB,aAAA,GAAAoB,CAAA;IACZ,MAAMsC,MAAW;IAAA;IAAA,CAAA1D,aAAA,GAAAK,CAAA,QAAG,CAAC,CAAC;IAAC;IAAAL,aAAA,GAAAK,CAAA;IACvBiB,MAAM,CAAC4C,OAAO,CAACV,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACQ,GAAG,EAAEC,KAAK,CAAC,KAAK;MAAA;MAAApE,aAAA,GAAAoB,CAAA;MAAApB,aAAA,GAAAK,CAAA;MAC5C;MAAI;MAAA,CAAAL,aAAA,GAAAyB,CAAA,kBAAO2C,KAAK,KAAK,QAAQ;MAAA;MAAA,CAAApE,aAAA,GAAAyB,CAAA,WAAI2C,KAAK,CAAC5C,MAAM,GAAG+C,SAAS,GAAE;QAAA;QAAAvE,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACzDqD,MAAM,CAACS,GAAG,CAAC,GAAGC,KAAK,CAACI,SAAS,CAAC,CAAC,EAAED,SAAS,CAAC,GAAG,KAAK;MACrD,CAAC,MAAM;QAAA;QAAAvE,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACLqD,MAAM,CAACS,GAAG,CAAC,GAAGC,KAAK;MACrB;IACF,CAAC,CAAC;IAAC;IAAApE,aAAA,GAAAK,CAAA;IACH,OAAOqD,MAAM;EACf;;EAEA;AACF;AACA;EACEe,aAAaA,CACXjB,GAAM,EACNkB,MAAc;EAAA;EAAA,CAAA1E,aAAA,GAAAyB,CAAA,WAAG,EAAE,GACE;IAAA;IAAAzB,aAAA,GAAAoB,CAAA;IACrB,MAAMsC,MAA2B;IAAA;IAAA,CAAA1D,aAAA,GAAAK,CAAA,QAAG,CAAC,CAAC;IAAC;IAAAL,aAAA,GAAAK,CAAA;IAEvCiB,MAAM,CAAC4C,OAAO,CAACV,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC,CAACQ,GAAG,EAAEC,KAAK,CAAC,KAAK;MAAA;MAAApE,aAAA,GAAAoB,CAAA;MAC5C,MAAMuD,MAAM;MAAA;MAAA,CAAA3E,aAAA,GAAAK,CAAA,QAAGqE,MAAM;MAAA;MAAA,CAAA1E,aAAA,GAAAyB,CAAA,WAAG,GAAGiD,MAAM,IAAIP,GAAG,EAAE;MAAA;MAAA,CAAAnE,aAAA,GAAAyB,CAAA,WAAG0C,GAAG;MAAC;MAAAnE,aAAA,GAAAK,CAAA;MAEjD;MAAI;MAAA,CAAAL,aAAA,GAAAyB,CAAA,WAAA2C,KAAK,KAAK,IAAI;MAAA;MAAA,CAAApE,aAAA,GAAAyB,CAAA,WAAI,OAAO2C,KAAK,KAAK,QAAQ;MAAA;MAAA,CAAApE,aAAA,GAAAyB,CAAA,WAAI,CAACmD,KAAK,CAACC,OAAO,CAACT,KAAK,CAAC,GAAE;QAAA;QAAApE,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACxEiB,MAAM,CAACwD,MAAM,CAACpB,MAAM,EAAE,IAAI,CAACe,aAAa,CAACL,KAAK,EAAEO,MAAM,CAAC,CAAC;MAC1D,CAAC,MAAM;QAAA;QAAA3E,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACLqD,MAAM,CAACiB,MAAM,CAAC,GAAGP,KAAK;MACxB;IACF,CAAC,CAAC;IAAC;IAAApE,aAAA,GAAAK,CAAA;IAEH,OAAOqD,MAAM;EACf;;EAEA;AACF;AACA;EACEqB,aAAaA,CACXjB,KAAU,EACVkB,IAAY;EAAA;EAAA,CAAAhF,aAAA,GAAAyB,CAAA,WAAG,CAAC,GAChBwD,QAAgB;EAAA;EAAA,CAAAjF,aAAA,GAAAyB,CAAA,WAAG,EAAE,GAC2D;IAAA;IAAAzB,aAAA,GAAAoB,CAAA;IAChF,MAAM8D,KAAK;IAAA;IAAA,CAAAlF,aAAA,GAAAK,CAAA,QAAG,CAAC2E,IAAI,GAAG,CAAC,IAAIC,QAAQ;IACnC,MAAME,GAAG;IAAA;IAAA,CAAAnF,aAAA,GAAAK,CAAA,QAAG6E,KAAK,GAAGD,QAAQ;IAC5B,MAAMlD,IAAI;IAAA;IAAA,CAAA/B,aAAA,GAAAK,CAAA,QAAGyD,KAAK,CAACsB,KAAK,CAACF,KAAK,EAAEC,GAAG,CAAC;IACpC,MAAME,KAAK;IAAA;IAAA,CAAArF,aAAA,GAAAK,CAAA,QAAGyD,KAAK,CAACtC,MAAM;IAC1B,MAAM8D,OAAO;IAAA;IAAA,CAAAtF,aAAA,GAAAK,CAAA,QAAG8E,GAAG,GAAGE,KAAK;IAAC;IAAArF,aAAA,GAAAK,CAAA;IAE5B,OAAO;MACL0B,IAAI;MACJiD,IAAI;MACJC,QAAQ;MACRI,KAAK;MACLC;IACF,CAAC;EACH;;EAEA;AACF;AACA;EACEC,cAAcA,CAACxD,IAAS,EAAU;IAAA;IAAA/B,aAAA,GAAAoB,CAAA;IAAApB,aAAA,GAAAK,CAAA;IAChC,OAAOqB,IAAI,CAACC,SAAS,CAACI,IAAI,CAAC,CAACP,MAAM;EACpC;;EAEA;AACF;AACA;EACEgE,uBAAuBA,CAACzD,IAAS,EAAU;IAAA;IAAA/B,aAAA,GAAAoB,CAAA;IACzC,MAAMqE,KAAK;IAAA;IAAA,CAAAzF,aAAA,GAAAK,CAAA,QAAG,IAAI,CAACkF,cAAc,CAACxD,IAAI,CAAC;IAAC;IAAA/B,aAAA,GAAAK,CAAA;IACxC,IAAIoF,KAAK,GAAG,IAAI,EAAE;MAAA;MAAAzF,aAAA,GAAAyB,CAAA;MAAAzB,aAAA,GAAAK,CAAA;MAAC,OAAO,GAAGoF,KAAK,IAAI;IAAC,CAAC;IAAA;IAAA;MAAAzF,aAAA,GAAAyB,CAAA;IAAA;IAAAzB,aAAA,GAAAK,CAAA;IACxC,IAAIoF,KAAK,GAAG,IAAI,GAAG,IAAI,EAAE;MAAA;MAAAzF,aAAA,GAAAyB,CAAA;MAAAzB,aAAA,GAAAK,CAAA;MAAC,OAAO,GAAG,CAACoF,KAAK,GAAG,IAAI,EAAExC,OAAO,CAAC,CAAC,CAAC,KAAK;IAAC,CAAC;IAAA;IAAA;MAAAjD,aAAA,GAAAyB,CAAA;IAAA;IAAAzB,aAAA,GAAAK,CAAA;IACpE,OAAO,GAAG,CAACoF,KAAK,IAAI,IAAI,GAAG,IAAI,CAAC,EAAExC,OAAO,CAAC,CAAC,CAAC,KAAK;EACnD;;EAEA;AACF;AACA;EACEyC,uBAAuBA,CAACD,KAAa,EAAQ;IAAA;IAAAzF,aAAA,GAAAoB,CAAA;IAAApB,aAAA,GAAAK,CAAA;IAC3C,IAAI,CAACwB,oBAAoB,GAAG4D,KAAK;IAAC;IAAAzF,aAAA,GAAAK,CAAA;IAClCD,MAAM,CAACuF,IAAI,CAAC,+BAA+B,EAAE;MAAEC,SAAS,EAAEH;IAAM,CAAC,CAAC;EACpE;;EAEA;AACF;AACA;EACEI,uBAAuBA,CAAA,EAAW;IAAA;IAAA7F,aAAA,GAAAoB,CAAA;IAAApB,aAAA,GAAAK,CAAA;IAChC,OAAO,IAAI,CAACwB,oBAAoB;EAClC;;EAEA;AACF;AACA;EACEiE,gBAAgBA,CACd/D,IAAO,EACPgE,OAQC;EAAA;EAAA,CAAA/F,aAAA,GAAAyB,CAAA,WAAG,CAAC,CAAC,GACD;IAAA;IAAAzB,aAAA,GAAAoB,CAAA;IACL,IAAIsC,MAAW;IAAA;IAAA,CAAA1D,aAAA,GAAAK,CAAA,QAAG0B,IAAI;;IAEtB;IAAA;IAAA/B,aAAA,GAAAK,CAAA;IACA,IAAI0F,OAAO,CAACtC,MAAM,EAAE;MAAA;MAAAzD,aAAA,GAAAyB,CAAA;MAAAzB,aAAA,GAAAK,CAAA;MAClB,IAAIuE,KAAK,CAACC,OAAO,CAACnB,MAAM,CAAC,EAAE;QAAA;QAAA1D,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACzBqD,MAAM,GAAG,IAAI,CAACG,qBAAqB,CAACH,MAAM,EAAEqC,OAAO,CAACtC,MAAM,CAAC;MAC7D,CAAC,MAAM;QAAA;QAAAzD,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACLqD,MAAM,GAAG,IAAI,CAACH,YAAY,CAACG,MAAM,EAAEqC,OAAO,CAACtC,MAAM,CAAC;MACpD;IACF,CAAC;IAAA;IAAA;MAAAzD,aAAA,GAAAyB,CAAA;IAAA;;IAED;IAAAzB,aAAA,GAAAK,CAAA;IACA,IAAI0F,OAAO,CAACC,UAAU,EAAE;MAAA;MAAAhG,aAAA,GAAAyB,CAAA;MAAAzB,aAAA,GAAAK,CAAA;MACtB,IAAIuE,KAAK,CAACC,OAAO,CAACnB,MAAM,CAAC,EAAE;QAAA;QAAA1D,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACzBqD,MAAM,GAAGA,MAAM,CAACK,GAAG,CAACC,IAAI,IAAI;UAAA;UAAAhE,aAAA,GAAAoB,CAAA;UAAApB,aAAA,GAAAK,CAAA;UAAA,WAAI,CAAC4D,gBAAgB,CAACD,IAAI,CAAC;QAAD,CAAC,CAAC;MAC1D,CAAC,MAAM;QAAA;QAAAhE,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACLqD,MAAM,GAAG,IAAI,CAACO,gBAAgB,CAACP,MAAM,CAAC;MACxC;IACF,CAAC;IAAA;IAAA;MAAA1D,aAAA,GAAAyB,CAAA;IAAA;;IAED;IAAAzB,aAAA,GAAAK,CAAA;IACA,IAAI0F,OAAO,CAACzB,eAAe,EAAE;MAAA;MAAAtE,aAAA,GAAAyB,CAAA;MAC3B,MAAM8C,SAAS;MAAA;MAAA,CAAAvE,aAAA,GAAAK,CAAA;MAAG;MAAA,CAAAL,aAAA,GAAAyB,CAAA,WAAAsE,OAAO,CAACE,eAAe;MAAA;MAAA,CAAAjG,aAAA,GAAAyB,CAAA,WAAI,GAAG;MAAC;MAAAzB,aAAA,GAAAK,CAAA;MACjD,IAAIuE,KAAK,CAACC,OAAO,CAACnB,MAAM,CAAC,EAAE;QAAA;QAAA1D,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACzBqD,MAAM,GAAGA,MAAM,CAACK,GAAG,CAACC,IAAI,IAAI;UAAA;UAAAhE,aAAA,GAAAoB,CAAA;UAAApB,aAAA,GAAAK,CAAA;UAAA,WAAI,CAACiE,eAAe,CAACN,IAAI,EAAEO,SAAS,CAAC;QAAD,CAAC,CAAC;MACpE,CAAC,MAAM;QAAA;QAAAvE,aAAA,GAAAyB,CAAA;QAAAzB,aAAA,GAAAK,CAAA;QACLqD,MAAM,GAAG,IAAI,CAACY,eAAe,CAACZ,MAAM,EAAEa,SAAS,CAAC;MAClD;IACF,CAAC;IAAA;IAAA;MAAAvE,aAAA,GAAAyB,CAAA;IAAA;;IAED;IAAAzB,aAAA,GAAAK,CAAA;IACA;IAAI;IAAA,CAAAL,aAAA,GAAAyB,CAAA,WAAAsE,OAAO,CAACG,QAAQ;IAAA;IAAA,CAAAlG,aAAA,GAAAyB,CAAA,WAAImD,KAAK,CAACC,OAAO,CAACnB,MAAM,CAAC,GAAE;MAAA;MAAA1D,aAAA,GAAAyB,CAAA;MAAAzB,aAAA,GAAAK,CAAA;MAC7CqD,MAAM,GAAG,IAAI,CAACqB,aAAa,CAACrB,MAAM,EAAEqC,OAAO,CAACf,IAAI,EAAEe,OAAO,CAACd,QAAQ,CAAC;IACrE,CAAC;IAAA;IAAA;MAAAjF,aAAA,GAAAyB,CAAA;IAAA;IAAAzB,aAAA,GAAAK,CAAA;IAED,OAAOqD,MAAM;EACf;AACF;;AAEA;AACA,OAAO,MAAMyC,gBAAgB;AAAA;AAAA,CAAAnG,aAAA,GAAAK,CAAA,QAAG,IAAIuB,gBAAgB,CAAC,CAAC;;AAEtD;AACA;AACA;AACA,OAAO,MAAMwE,eAAe;AAAA;AAAA,CAAApG,aAAA,GAAAK,CAAA,QAAG;EAC7B;EACAgG,SAAS,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC;EAC5CC,WAAW,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,CAAC;EAClEC,QAAQ,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,CAAC;EAE5E;EACAC,WAAW,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,CAAC;EACrDC,UAAU,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,OAAO,CAAC;EACrFC,UAAU,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,OAAO,EAAE,WAAW,CAAC;EAEjH;EACAC,QAAQ,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,CAAC;EAChDC,OAAO,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,CAAC;EAC7EC,OAAO,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,EAAE,cAAc,EAAE,UAAU,CAAC;EAE5G;EACAC,WAAW,EAAE,CAAC,IAAI,EAAE,SAAS,EAAE,UAAU,CAAC;EAC1CC,UAAU,EAAE,CAAC,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,aAAa,EAAE,cAAc;AACzE,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,eAAe;AAAA;AAAA,CAAAhH,aAAA,GAAAK,CAAA,QAAG;EAC7B4G,OAAO,EAAE;IACPjB,UAAU,EAAE,IAAI;IAChB1B,eAAe,EAAE,IAAI;IACrB2B,eAAe,EAAE;EACnB,CAAC;EACDiB,QAAQ,EAAE;IACRlB,UAAU,EAAE,IAAI;IAChB1B,eAAe,EAAE,IAAI;IACrB2B,eAAe,EAAE;EACnB,CAAC;EACDkB,IAAI,EAAE;IACJnB,UAAU,EAAE,KAAK;IACjB1B,eAAe,EAAE;EACnB;AACF,CAAC","ignoreList":[]}