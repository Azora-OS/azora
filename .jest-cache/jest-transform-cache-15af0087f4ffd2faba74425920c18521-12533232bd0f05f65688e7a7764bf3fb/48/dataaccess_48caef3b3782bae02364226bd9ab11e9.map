{"version":3,"names":["cov_4sxewglen","actualCoverage","prisma","getCacheService","AIDataAccessService","getUserContext","userId","f","s","user","findUnique","where","id","include","profile","b","email","role","firstName","lastName","preferences","undefined","error","console","getUserLearningData","enrollments","enrollment","findMany","course","lessons","completedCourses","filter","e","completed","length","inProgressCourses","progress","totalProgress","reduce","sum","courses","map","title","getUserFinancialData","wallets","wallet","transactions","orderBy","createdAt","take","totalBalance","w","Number","balance","recentTransactions","flatMap","slice","transactionCount","getUserMarketplaceData","jobs","job","applications","application","postedJobs","activeJobs","j","status","acceptedApplications","a","getFullUserContext","userContext","learningData","financialData","marketplaceData","Promise","all","learning","financial","marketplace","timestamp","Date","getInventoryData","businessId","getCourseData","filters","description","price","published","lessonCount","enrollmentCount","getStudentData","users","courseId","courseTitle","getCachedUserContext","ttlSeconds","cache","cacheKey","cached","get","context","set","invalidateUserContext","delete","aiDataAccess"],"sources":["data-access.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nAI DATA ACCESS LAYER\nProvides real data access for Claude/AI services with proper authentication and context\n*/\n\nimport { prisma } from '@azora/shared-database/prisma';\nimport { getCacheService } from '@azora/shared-database/redis';\nimport { authenticateSession, AuthRequest } from '@azora/shared-auth/middleware';\n\n/**\n * User context for AI services\n */\nexport interface UserContext {\n  userId: string;\n  email: string;\n  role: string;\n  profile?: {\n    firstName?: string;\n    lastName?: string;\n    preferences?: any;\n  };\n}\n\n/**\n * AI Data Access Service\n * Provides real data access for AI services\n */\nexport class AIDataAccessService {\n  /**\n   * Get user context for AI processing\n   */\n  async getUserContext(userId: string): Promise<UserContext | null> {\n    try {\n      const user = await prisma.user.findUnique({\n        where: { id: userId },\n        include: {\n          profile: true,\n        },\n      });\n\n      if (!user) {\n        return null;\n      }\n\n      return {\n        userId: user.id,\n        email: user.email,\n        role: user.role,\n        profile: user.profile ? {\n          firstName: user.profile.firstName,\n          lastName: user.profile.lastName,\n          preferences: {},\n        } : undefined,\n      };\n    } catch (error) {\n      console.error('Error getting user context:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Get user's learning data for AI recommendations\n   */\n  async getUserLearningData(userId: string): Promise<any> {\n    try {\n      const enrollments = await prisma.enrollment.findMany({\n        where: { userId },\n        include: {\n          course: {\n            include: {\n              lessons: true,\n            },\n          },\n        },\n      });\n\n      const completedCourses = enrollments.filter(e => e.completed).length;\n      const inProgressCourses = enrollments.filter(e => !e.completed && e.progress > 0).length;\n      const totalProgress = enrollments.reduce((sum, e) => sum + e.progress, 0) / enrollments.length || 0;\n\n      return {\n        enrollments,\n        completedCourses,\n        inProgressCourses,\n        totalProgress,\n        courses: enrollments.map(e => ({\n          id: e.course.id,\n          title: e.course.title,\n          progress: e.progress,\n          completed: e.completed,\n        })),\n      };\n    } catch (error) {\n      console.error('Error getting user learning data:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Get user's transaction/wallet data for AI insights\n   */\n  async getUserFinancialData(userId: string): Promise<any> {\n    try {\n      const wallets = await prisma.wallet.findMany({\n        where: { userId },\n        include: {\n          transactions: {\n            orderBy: { createdAt: 'desc' },\n            take: 50,\n          },\n        },\n      });\n\n      const totalBalance = wallets.reduce((sum, w) => sum + Number(w.balance), 0);\n      const recentTransactions = wallets.flatMap(w => w.transactions).slice(0, 20);\n\n      return {\n        wallets,\n        totalBalance,\n        recentTransactions,\n        transactionCount: recentTransactions.length,\n      };\n    } catch (error) {\n      console.error('Error getting user financial data:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Get user's job/marketplace activity\n   */\n  async getUserMarketplaceData(userId: string): Promise<any> {\n    try {\n      const jobs = await prisma.job.findMany({\n        where: { userId },\n        include: {\n          applications: true,\n        },\n      });\n\n      const applications = await prisma.application.findMany({\n        where: { userId },\n        include: {\n          job: true,\n        },\n      });\n\n      return {\n        postedJobs: jobs.length,\n        activeJobs: jobs.filter(j => j.status === 'OPEN').length,\n        applications: applications.length,\n        acceptedApplications: applications.filter(a => a.status === 'ACCEPTED').length,\n        jobs,\n        applications,\n      };\n    } catch (error) {\n      console.error('Error getting user marketplace data:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Get comprehensive user context for AI\n   */\n  async getFullUserContext(userId: string): Promise<any> {\n    const [userContext, learningData, financialData, marketplaceData] = await Promise.all([\n      this.getUserContext(userId),\n      this.getUserLearningData(userId),\n      this.getUserFinancialData(userId),\n      this.getUserMarketplaceData(userId),\n    ]);\n\n    return {\n      user: userContext,\n      learning: learningData,\n      financial: financialData,\n      marketplace: marketplaceData,\n      timestamp: new Date(),\n    };\n  }\n\n  /**\n   * Get inventory data for Retail AI\n   */\n  async getInventoryData(businessId?: string): Promise<any[]> {\n    try {\n      // This would query actual inventory data\n      // For now, we'll use a placeholder that can be extended\n      // In production, this would query a products/inventory table\n      \n      // Example: If you have a Product model\n      // const products = await prisma.product.findMany({\n      //   where: businessId ? { businessId } : {},\n      //   include: { inventory: true },\n      // });\n      \n      // For now, return empty array - services should implement their own data models\n      return [];\n    } catch (error) {\n      console.error('Error getting inventory data:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Get course data for LMS AI\n   */\n  async getCourseData(filters?: any): Promise<any[]> {\n    try {\n      const courses = await prisma.course.findMany({\n        where: filters || {},\n        include: {\n          lessons: true,\n          enrollments: true,\n        },\n      });\n\n      return courses.map(course => ({\n        id: course.id,\n        title: course.title,\n        description: course.description,\n        price: course.price,\n        published: course.published,\n        lessonCount: course.lessons.length,\n        enrollmentCount: course.enrollments.length,\n      }));\n    } catch (error) {\n      console.error('Error getting course data:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Get student data for Institutional AI\n   */\n  async getStudentData(filters?: any): Promise<any[]> {\n    try {\n      const users = await prisma.user.findMany({\n        where: {\n          role: 'STUDENT',\n          ...filters,\n        },\n        include: {\n          profile: true,\n          enrollments: {\n            include: {\n              course: true,\n            },\n          },\n        },\n      });\n\n      return users.map(user => ({\n        id: user.id,\n        email: user.email,\n        profile: user.profile,\n        enrollments: user.enrollments.map(e => ({\n          courseId: e.courseId,\n          courseTitle: e.course.title,\n          progress: e.progress,\n          completed: e.completed,\n        })),\n      }));\n    } catch (error) {\n      console.error('Error getting student data:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Cache AI context for performance\n   */\n  async getCachedUserContext(userId: string, ttlSeconds: number = 300): Promise<any | null> {\n    const cache = await getCacheService();\n    const cacheKey = `ai:context:${userId}`;\n    \n    const cached = await cache.get(cacheKey);\n    if (cached) {\n      return cached;\n    }\n\n    const context = await this.getFullUserContext(userId);\n    await cache.set(cacheKey, context, ttlSeconds);\n    \n    return context;\n  }\n\n  /**\n   * Invalidate cached context\n   */\n  async invalidateUserContext(userId: string): Promise<void> {\n    const cache = await getCacheService();\n    await cache.delete(`ai:context:${userId}`);\n  }\n}\n\n// Export singleton instance\nexport const aiDataAccess = new AIDataAccessService();\n\nexport default aiDataAccess;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}