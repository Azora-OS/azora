{"version":3,"names":["cov_1a2dzz7wc3","actualCoverage","winston","levels","s","error","warn","info","http","debug","level","f","env","b","process","NODE_ENV","isDevelopment","colors","addColors","transports","Console","format","combine","timestamp","colorize","all","printf","message","File","filename","errors","stack","json","logger","createLogger","add","simple"],"sources":["logger.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport winston from 'winston';\n\n// Define log levels\nconst levels = {\n  error: 0,\n  warn: 1,\n  info: 2,\n  http: 3,\n  debug: 4,\n};\n\nconst level = () => {\n  const env = process.env.NODE_ENV || 'development';\n  const isDevelopment = env === 'development';\n  return isDevelopment ? 'debug' : 'warn';\n};\n\n// Define colors for each level\nconst colors = {\n  error: 'red',\n  warn: 'yellow',\n  info: 'green',\n  http: 'magenta',\n  debug: 'white',\n};\n\n// Tell winston that we want to link the colors\nwinston.addColors(colors);\n\n// Define which transports the logger must use\nconst transports = [\n  // Console transport for development\n  new winston.transports.Console({\n    level: level(),\n    format: winston.format.combine(\n      winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss:ms' }),\n      winston.format.colorize({ all: true }),\n      winston.format.printf(\n        (info) => `${info.timestamp} ${info.level}: ${info.message}`,\n      ),\n    ),\n  }),\n\n  // File transport for errors\n  new winston.transports.File({\n    filename: 'logs/error.log',\n    level: 'error',\n    format: winston.format.combine(\n      winston.format.timestamp(),\n      winston.format.errors({ stack: true }),\n      winston.format.json(),\n    ),\n  }),\n\n  // File transport for all logs\n  new winston.transports.File({\n    filename: 'logs/all.log',\n    format: winston.format.combine(\n      winston.format.timestamp(),\n      winston.format.json(),\n    ),\n  }),\n];\n\n// Create the logger\nconst logger = winston.createLogger({\n  level: level(),\n  levels,\n  transports,\n});\n\n// If we're not in production, log to the console with colors\nif (process.env.NODE_ENV !== 'production') {\n  logger.add(new winston.transports.Console({\n    format: winston.format.combine(\n      winston.format.colorize(),\n      winston.format.simple(),\n    ),\n  }));\n}\n\nexport default logger;"],"mappings":"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","ignoreList":[]}