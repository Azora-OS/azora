{"version":3,"names":["cov_2j6erxjbh0","actualCoverage","ConstitutionalEngine","EthicsMonitor","constructor","f","s","engine","monitorAction","action","console","log","type","result","validateAction","isAllowed","b","warn","critique","violations","join","score","monitorTransaction","amount","actorId","payload","context"],"sources":["monitor.ts"],"sourcesContent":["import { ConstitutionalEngine, Action } from '../../constitutional-ai/src/constitutional-engine';\n\nexport class EthicsMonitor {\n    private engine: ConstitutionalEngine;\n\n    constructor() {\n        this.engine = new ConstitutionalEngine();\n    }\n\n    /**\n     * Monitors an action for ethical compliance.\n     * @param action The action to monitor.\n     * @returns True if the action is allowed, False otherwise.\n     */\n    monitorAction(action: Action): boolean {\n        console.log(`[EthicsMonitor] Analyzing action: ${action.type}`);\n        const result = this.engine.validateAction(action);\n\n        if (!result.isAllowed) {\n            console.warn(`[EthicsMonitor] ðŸš¨ ACTION BLOCKED! Violation detected.`);\n            console.warn(`[EthicsMonitor] Critique: ${result.critique}`);\n            console.warn(`[EthicsMonitor] Violations: ${result.violations.join(', ')}`);\n            return false;\n        }\n\n        console.log(`[EthicsMonitor] âœ… Action allowed. Score: ${result.score}`);\n        return true;\n    }\n\n    /**\n     * Monitors a transaction for suspicious patterns (simplified).\n     * @param amount Transaction amount.\n     * @returns True if safe.\n     */\n    monitorTransaction(amount: number): boolean {\n        // Construct an action for the engine\n        const action: Action = {\n            type: 'mint_token',\n            actorId: 'system',\n            payload: { amount },\n            context: 'transaction_monitor'\n        };\n\n        return this.monitorAction(action);\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,SAASE,oBAAoB,QAAgB,mDAAmD;AAEhG,OAAO,MAAMC,aAAa,CAAC;EAGvBC,WAAWA,CAAA,EAAG;IAAA;IAAAJ,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAM,CAAA;IACV,IAAI,CAACC,MAAM,GAAG,IAAIL,oBAAoB,CAAC,CAAC;EAC5C;;EAEA;AACJ;AACA;AACA;AACA;EACIM,aAAaA,CAACC,MAAc,EAAW;IAAA;IAAAT,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAM,CAAA;IACnCI,OAAO,CAACC,GAAG,CAAC,qCAAqCF,MAAM,CAACG,IAAI,EAAE,CAAC;IAC/D,MAAMC,MAAM;IAAA;IAAA,CAAAb,cAAA,GAAAM,CAAA,OAAG,IAAI,CAACC,MAAM,CAACO,cAAc,CAACL,MAAM,CAAC;IAAC;IAAAT,cAAA,GAAAM,CAAA;IAElD,IAAI,CAACO,MAAM,CAACE,SAAS,EAAE;MAAA;MAAAf,cAAA,GAAAgB,CAAA;MAAAhB,cAAA,GAAAM,CAAA;MACnBI,OAAO,CAACO,IAAI,CAAC,wDAAwD,CAAC;MAAC;MAAAjB,cAAA,GAAAM,CAAA;MACvEI,OAAO,CAACO,IAAI,CAAC,6BAA6BJ,MAAM,CAACK,QAAQ,EAAE,CAAC;MAAC;MAAAlB,cAAA,GAAAM,CAAA;MAC7DI,OAAO,CAACO,IAAI,CAAC,+BAA+BJ,MAAM,CAACM,UAAU,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;MAAC;MAAApB,cAAA,GAAAM,CAAA;MAC5E,OAAO,KAAK;IAChB,CAAC;IAAA;IAAA;MAAAN,cAAA,GAAAgB,CAAA;IAAA;IAAAhB,cAAA,GAAAM,CAAA;IAEDI,OAAO,CAACC,GAAG,CAAC,4CAA4CE,MAAM,CAACQ,KAAK,EAAE,CAAC;IAAC;IAAArB,cAAA,GAAAM,CAAA;IACxE,OAAO,IAAI;EACf;;EAEA;AACJ;AACA;AACA;AACA;EACIgB,kBAAkBA,CAACC,MAAc,EAAW;IAAA;IAAAvB,cAAA,GAAAK,CAAA;IACxC;IACA,MAAMI,MAAc;IAAA;IAAA,CAAAT,cAAA,GAAAM,CAAA,QAAG;MACnBM,IAAI,EAAE,YAAY;MAClBY,OAAO,EAAE,QAAQ;MACjBC,OAAO,EAAE;QAAEF;MAAO,CAAC;MACnBG,OAAO,EAAE;IACb,CAAC;IAAC;IAAA1B,cAAA,GAAAM,CAAA;IAEF,OAAO,IAAI,CAACE,aAAa,CAACC,MAAM,CAAC;EACrC;AACJ","ignoreList":[]}