0c30560af9476345050f0c33dc9a1aba
/* istanbul ignore next */
function cov_2jk96ckr3u() {
  var path = "/workspaces/azora/services/azora-cloud/ai-routing/knowledge-ocean/rap-integration.ts";
  var hash = "7a047b5efb12550b2414f6bcc70afaaee99671dd";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-cloud/ai-routing/knowledge-ocean/rap-integration.ts",
    statementMap: {
      "0": {
        start: {
          line: 25,
          column: 4
        },
        end: {
          line: 25,
          column: 43
        }
      },
      "1": {
        start: {
          line: 26,
          column: 4
        },
        end: {
          line: 26,
          column: 31
        }
      },
      "2": {
        start: {
          line: 27,
          column: 4
        },
        end: {
          line: 27,
          column: 25
        }
      },
      "3": {
        start: {
          line: 42,
          column: 28
        },
        end: {
          line: 45,
          column: 6
        }
      },
      "4": {
        start: {
          line: 48,
          column: 26
        },
        end: {
          line: 48,
          column: 69
        }
      },
      "5": {
        start: {
          line: 51,
          column: 28
        },
        end: {
          line: 55,
          column: 5
        }
      },
      "6": {
        start: {
          line: 58,
          column: 25
        },
        end: {
          line: 58,
          column: 86
        }
      },
      "7": {
        start: {
          line: 59,
          column: 25
        },
        end: {
          line: 59,
          column: 75
        }
      },
      "8": {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 78,
          column: 6
        }
      },
      "9": {
        start: {
          line: 89,
          column: 19
        },
        end: {
          line: 93,
          column: 6
        }
      },
      "10": {
        start: {
          line: 95,
          column: 4
        },
        end: {
          line: 95,
          column: 34
        }
      },
      "11": {
        start: {
          line: 107,
          column: 4
        },
        end: {
          line: 107,
          column: 43
        }
      },
      "12": {
        start: {
          line: 121,
          column: 19
        },
        end: {
          line: 121,
          column: 85
        }
      },
      "13": {
        start: {
          line: 122,
          column: 18
        },
        end: {
          line: 122,
          column: 65
        }
      },
      "14": {
        start: {
          line: 124,
          column: 4
        },
        end: {
          line: 132,
          column: 6
        }
      },
      "15": {
        start: {
          line: 143,
          column: 4
        },
        end: {
          line: 143,
          column: 82
        }
      },
      "16": {
        start: {
          line: 157,
          column: 4
        },
        end: {
          line: 157,
          column: 73
        }
      },
      "17": {
        start: {
          line: 167,
          column: 4
        },
        end: {
          line: 167,
          column: 57
        }
      },
      "18": {
        start: {
          line: 174,
          column: 4
        },
        end: {
          line: 174,
          column: 59
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 20,
            column: 2
          },
          end: {
            line: 20,
            column: 3
          }
        },
        loc: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 28,
            column: 3
          }
        },
        line: 24
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 33,
            column: 2
          },
          end: {
            line: 33,
            column: 3
          }
        },
        loc: {
          start: {
            line: 40,
            column: 5
          },
          end: {
            line: 79,
            column: 3
          }
        },
        line: 40
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 84,
            column: 2
          },
          end: {
            line: 84,
            column: 3
          }
        },
        loc: {
          start: {
            line: 88,
            column: 21
          },
          end: {
            line: 96,
            column: 3
          }
        },
        line: 88
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 106,
            column: 2
          },
          end: {
            line: 106,
            column: 3
          }
        },
        loc: {
          start: {
            line: 106,
            column: 48
          },
          end: {
            line: 108,
            column: 3
          }
        },
        line: 106
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 113,
            column: 2
          },
          end: {
            line: 113,
            column: 3
          }
        },
        loc: {
          start: {
            line: 120,
            column: 4
          },
          end: {
            line: 133,
            column: 3
          }
        },
        line: 120
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 138,
            column: 2
          },
          end: {
            line: 138,
            column: 3
          }
        },
        loc: {
          start: {
            line: 142,
            column: 12
          },
          end: {
            line: 144,
            column: 3
          }
        },
        line: 142
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 149,
            column: 2
          },
          end: {
            line: 149,
            column: 3
          }
        },
        loc: {
          start: {
            line: 156,
            column: 4
          },
          end: {
            line: 158,
            column: 3
          }
        },
        line: 156
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 163,
            column: 2
          },
          end: {
            line: 163,
            column: 3
          }
        },
        loc: {
          start: {
            line: 166,
            column: 4
          },
          end: {
            line: 168,
            column: 3
          }
        },
        line: 166
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 173,
            column: 2
          },
          end: {
            line: 173,
            column: 3
          }
        },
        loc: {
          start: {
            line: 173,
            column: 46
          },
          end: {
            line: 175,
            column: 3
          }
        },
        line: 173
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 35,
            column: 4
          },
          end: {
            line: 35,
            column: 41
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 35,
            column: 39
          },
          end: {
            line: 35,
            column: 41
          }
        }],
        line: 35
      },
      "1": {
        loc: {
          start: {
            line: 86,
            column: 4
          },
          end: {
            line: 86,
            column: 54
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 86,
            column: 44
          },
          end: {
            line: 86,
            column: 54
          }
        }],
        line: 86
      },
      "2": {
        loc: {
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 87,
            column: 28
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 87,
            column: 24
          },
          end: {
            line: 87,
            column: 28
          }
        }],
        line: 87
      },
      "3": {
        loc: {
          start: {
            line: 116,
            column: 4
          },
          end: {
            line: 116,
            column: 41
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 116,
            column: 39
          },
          end: {
            line: 116,
            column: 41
          }
        }],
        line: 116
      },
      "4": {
        loc: {
          start: {
            line: 140,
            column: 4
          },
          end: {
            line: 140,
            column: 54
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 140,
            column: 44
          },
          end: {
            line: 140,
            column: 54
          }
        }],
        line: 140
      },
      "5": {
        loc: {
          start: {
            line: 141,
            column: 4
          },
          end: {
            line: 141,
            column: 35
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 141,
            column: 31
          },
          end: {
            line: 141,
            column: 35
          }
        }],
        line: 141
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0
    },
    b: {
      "0": [0],
      "1": [0],
      "2": [0],
      "3": [0],
      "4": [0],
      "5": [0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "7a047b5efb12550b2414f6bcc70afaaee99671dd"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2jk96ckr3u = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2jk96ckr3u();
/**
 * RAP Integration with Context Injector
 * Demonstrates how to integrate ContextInjector with RAP system
 */

/**
 * RAP Context Integration
 * Combines retrieval, ranking, and context injection for RAP system
 */
export class RAPContextIntegration {
  constructor(contextInjector, retriever, ranker) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[0]++;
    cov_2jk96ckr3u().s[0]++;
    this.contextInjector = contextInjector;
    /* istanbul ignore next */
    cov_2jk96ckr3u().s[1]++;
    this.retriever = retriever;
    /* istanbul ignore next */
    cov_2jk96ckr3u().s[2]++;
    this.ranker = ranker;
  }

  /**
   * Complete RAP pipeline: retrieve → rank → inject
   */
  async buildAugmentedPrompt(userQuery, options =
  /* istanbul ignore next */
  (cov_2jk96ckr3u().b[0][0]++, {})) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[1]++;
    // Step 1: Retrieve documents with 70/30 rule
    const retrievalResult =
    /* istanbul ignore next */
    (cov_2jk96ckr3u().s[3]++, await this.retriever.retrieve(userQuery, {
      topK: 10,
      enforceSeventyThirty: true
    }));

    // Step 2: Rank documents by relevance, diversity, and recency
    const rankingResult =
    /* istanbul ignore next */
    (cov_2jk96ckr3u().s[4]++, this.ranker.rank(retrievalResult.documents));

    // Step 3: Inject context into prompt
    const injectionResult =
    /* istanbul ignore next */
    (cov_2jk96ckr3u().s[5]++, this.contextInjector.injectContext(userQuery, rankingResult.documents, options));

    // Get statistics
    const contextStats =
    /* istanbul ignore next */
    (cov_2jk96ckr3u().s[6]++, this.contextInjector.getContextStats(rankingResult.documents));
    const rankingStats =
    /* istanbul ignore next */
    (cov_2jk96ckr3u().s[7]++, this.ranker.getStatistics(rankingResult.documents));
    /* istanbul ignore next */
    cov_2jk96ckr3u().s[8]++;
    return {
      augmentedPrompt: injectionResult.prompt,
      contextStats: {
        ...contextStats,
        ...rankingStats,
        tokensUsed: injectionResult.tokensUsed,
        truncated: injectionResult.truncated
      },
      retrievalStats: {
        totalDocuments: retrievalResult.documents.length,
        internalCount: retrievalResult.internalCount,
        externalCount: retrievalResult.externalCount,
        internalPercentage: retrievalResult.internalCount / retrievalResult.documents.length * 100,
        externalPercentage: retrievalResult.externalCount / retrievalResult.documents.length * 100,
        retrievalTime: retrievalResult.retrievalTime,
        totalRelevanceScore: retrievalResult.totalRelevanceScore
      }
    };
  }

  /**
   * Build augmented prompt with custom formatting
   */
  async buildAugmentedPromptWithFormat(userQuery, format =
  /* istanbul ignore next */
  (cov_2jk96ckr3u().b[1][0]++, 'markdown'), maxTokens =
  /* istanbul ignore next */
  (cov_2jk96ckr3u().b[2][0]++, 2000)) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[2]++;
    const result =
    /* istanbul ignore next */
    (cov_2jk96ckr3u().s[9]++, await this.buildAugmentedPrompt(userQuery, {
      format,
      maxTokens,
      includeMetadata: true
    }));
    /* istanbul ignore next */
    cov_2jk96ckr3u().s[10]++;
    return result.augmentedPrompt;
  }
}

/**
 * Context Injection Pipeline
 * Standalone pipeline for context injection without retrieval
 */
export class ContextInjectionPipeline {
  constructor(contextInjector) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[3]++;
    cov_2jk96ckr3u().s[11]++;
    this.contextInjector = contextInjector;
  }

  /**
   * Inject pre-retrieved documents into prompt
   */
  injectDocuments(userPrompt, documents, options =
  /* istanbul ignore next */
  (cov_2jk96ckr3u().b[3][0]++, {})) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[4]++;
    const result =
    /* istanbul ignore next */
    (cov_2jk96ckr3u().s[12]++, this.contextInjector.injectContext(userPrompt, documents, options));
    const stats =
    /* istanbul ignore next */
    (cov_2jk96ckr3u().s[13]++, this.contextInjector.getContextStats(documents));
    /* istanbul ignore next */
    cov_2jk96ckr3u().s[14]++;
    return {
      prompt: result.prompt,
      stats: {
        ...stats,
        tokensUsed: result.tokensUsed,
        truncated: result.truncated,
        contextLength: result.contextLength
      }
    };
  }

  /**
   * Format documents without injection
   */
  formatDocuments(documents, format =
  /* istanbul ignore next */
  (cov_2jk96ckr3u().b[4][0]++, 'markdown'), includeMetadata =
  /* istanbul ignore next */
  (cov_2jk96ckr3u().b[5][0]++, true)) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[5]++;
    cov_2jk96ckr3u().s[15]++;
    return this.contextInjector.formatContext(documents, format, includeMetadata);
  }

  /**
   * Truncate context to token limit
   */
  truncateContext(context, maxTokens) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[6]++;
    cov_2jk96ckr3u().s[16]++;
    return this.contextInjector.truncateToTokenLimit(context, maxTokens);
  }

  /**
   * Validate injection options
   */
  validateOptions(options) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[7]++;
    cov_2jk96ckr3u().s[17]++;
    return this.contextInjector.validateOptions(options);
  }

  /**
   * Get context statistics
   */
  getContextStats(documents) {
    /* istanbul ignore next */
    cov_2jk96ckr3u().f[8]++;
    cov_2jk96ckr3u().s[18]++;
    return this.contextInjector.getContextStats(documents);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmprOTZja3IzdSIsImFjdHVhbENvdmVyYWdlIiwiUkFQQ29udGV4dEludGVncmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb250ZXh0SW5qZWN0b3IiLCJyZXRyaWV2ZXIiLCJyYW5rZXIiLCJmIiwicyIsImJ1aWxkQXVnbWVudGVkUHJvbXB0IiwidXNlclF1ZXJ5Iiwib3B0aW9ucyIsImIiLCJyZXRyaWV2YWxSZXN1bHQiLCJyZXRyaWV2ZSIsInRvcEsiLCJlbmZvcmNlU2V2ZW50eVRoaXJ0eSIsInJhbmtpbmdSZXN1bHQiLCJyYW5rIiwiZG9jdW1lbnRzIiwiaW5qZWN0aW9uUmVzdWx0IiwiaW5qZWN0Q29udGV4dCIsImNvbnRleHRTdGF0cyIsImdldENvbnRleHRTdGF0cyIsInJhbmtpbmdTdGF0cyIsImdldFN0YXRpc3RpY3MiLCJhdWdtZW50ZWRQcm9tcHQiLCJwcm9tcHQiLCJ0b2tlbnNVc2VkIiwidHJ1bmNhdGVkIiwicmV0cmlldmFsU3RhdHMiLCJ0b3RhbERvY3VtZW50cyIsImxlbmd0aCIsImludGVybmFsQ291bnQiLCJleHRlcm5hbENvdW50IiwiaW50ZXJuYWxQZXJjZW50YWdlIiwiZXh0ZXJuYWxQZXJjZW50YWdlIiwicmV0cmlldmFsVGltZSIsInRvdGFsUmVsZXZhbmNlU2NvcmUiLCJidWlsZEF1Z21lbnRlZFByb21wdFdpdGhGb3JtYXQiLCJmb3JtYXQiLCJtYXhUb2tlbnMiLCJyZXN1bHQiLCJpbmNsdWRlTWV0YWRhdGEiLCJDb250ZXh0SW5qZWN0aW9uUGlwZWxpbmUiLCJpbmplY3REb2N1bWVudHMiLCJ1c2VyUHJvbXB0Iiwic3RhdHMiLCJjb250ZXh0TGVuZ3RoIiwiZm9ybWF0RG9jdW1lbnRzIiwiZm9ybWF0Q29udGV4dCIsInRydW5jYXRlQ29udGV4dCIsImNvbnRleHQiLCJ0cnVuY2F0ZVRvVG9rZW5MaW1pdCIsInZhbGlkYXRlT3B0aW9ucyJdLCJzb3VyY2VzIjpbInJhcC1pbnRlZ3JhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJBUCBJbnRlZ3JhdGlvbiB3aXRoIENvbnRleHQgSW5qZWN0b3JcbiAqIERlbW9uc3RyYXRlcyBob3cgdG8gaW50ZWdyYXRlIENvbnRleHRJbmplY3RvciB3aXRoIFJBUCBzeXN0ZW1cbiAqL1xuXG5pbXBvcnQgeyBDb250ZXh0SW5qZWN0b3IgfSBmcm9tICcuL2NvbnRleHQtaW5qZWN0b3InO1xuaW1wb3J0IHsgS25vd2xlZGdlT2NlYW5SZXRyaWV2ZXIgfSBmcm9tICcuL3JldHJpZXZlcic7XG5pbXBvcnQgeyBDb250ZXh0UmFua2VyIH0gZnJvbSAnLi9jb250ZXh0LXJhbmtlcic7XG5pbXBvcnQgeyBEb2N1bWVudCwgQ29udGV4dEluamVjdGlvbk9wdGlvbnMgfSBmcm9tICcuL3R5cGVzJztcblxuLyoqXG4gKiBSQVAgQ29udGV4dCBJbnRlZ3JhdGlvblxuICogQ29tYmluZXMgcmV0cmlldmFsLCByYW5raW5nLCBhbmQgY29udGV4dCBpbmplY3Rpb24gZm9yIFJBUCBzeXN0ZW1cbiAqL1xuZXhwb3J0IGNsYXNzIFJBUENvbnRleHRJbnRlZ3JhdGlvbiB7XG4gIHByaXZhdGUgY29udGV4dEluamVjdG9yOiBDb250ZXh0SW5qZWN0b3I7XG4gIHByaXZhdGUgcmV0cmlldmVyOiBLbm93bGVkZ2VPY2VhblJldHJpZXZlcjtcbiAgcHJpdmF0ZSByYW5rZXI6IENvbnRleHRSYW5rZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGV4dEluamVjdG9yOiBDb250ZXh0SW5qZWN0b3IsXG4gICAgcmV0cmlldmVyOiBLbm93bGVkZ2VPY2VhblJldHJpZXZlcixcbiAgICByYW5rZXI6IENvbnRleHRSYW5rZXJcbiAgKSB7XG4gICAgdGhpcy5jb250ZXh0SW5qZWN0b3IgPSBjb250ZXh0SW5qZWN0b3I7XG4gICAgdGhpcy5yZXRyaWV2ZXIgPSByZXRyaWV2ZXI7XG4gICAgdGhpcy5yYW5rZXIgPSByYW5rZXI7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGxldGUgUkFQIHBpcGVsaW5lOiByZXRyaWV2ZSDihpIgcmFuayDihpIgaW5qZWN0XG4gICAqL1xuICBhc3luYyBidWlsZEF1Z21lbnRlZFByb21wdChcbiAgICB1c2VyUXVlcnk6IHN0cmluZyxcbiAgICBvcHRpb25zOiBDb250ZXh0SW5qZWN0aW9uT3B0aW9ucyA9IHt9XG4gICk6IFByb21pc2U8e1xuICAgIGF1Z21lbnRlZFByb21wdDogc3RyaW5nO1xuICAgIGNvbnRleHRTdGF0czogYW55O1xuICAgIHJldHJpZXZhbFN0YXRzOiBhbnk7XG4gIH0+IHtcbiAgICAvLyBTdGVwIDE6IFJldHJpZXZlIGRvY3VtZW50cyB3aXRoIDcwLzMwIHJ1bGVcbiAgICBjb25zdCByZXRyaWV2YWxSZXN1bHQgPSBhd2FpdCB0aGlzLnJldHJpZXZlci5yZXRyaWV2ZSh1c2VyUXVlcnksIHtcbiAgICAgIHRvcEs6IDEwLFxuICAgICAgZW5mb3JjZVNldmVudHlUaGlydHk6IHRydWVcbiAgICB9KTtcblxuICAgIC8vIFN0ZXAgMjogUmFuayBkb2N1bWVudHMgYnkgcmVsZXZhbmNlLCBkaXZlcnNpdHksIGFuZCByZWNlbmN5XG4gICAgY29uc3QgcmFua2luZ1Jlc3VsdCA9IHRoaXMucmFua2VyLnJhbmsocmV0cmlldmFsUmVzdWx0LmRvY3VtZW50cyk7XG5cbiAgICAvLyBTdGVwIDM6IEluamVjdCBjb250ZXh0IGludG8gcHJvbXB0XG4gICAgY29uc3QgaW5qZWN0aW9uUmVzdWx0ID0gdGhpcy5jb250ZXh0SW5qZWN0b3IuaW5qZWN0Q29udGV4dChcbiAgICAgIHVzZXJRdWVyeSxcbiAgICAgIHJhbmtpbmdSZXN1bHQuZG9jdW1lbnRzLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG5cbiAgICAvLyBHZXQgc3RhdGlzdGljc1xuICAgIGNvbnN0IGNvbnRleHRTdGF0cyA9IHRoaXMuY29udGV4dEluamVjdG9yLmdldENvbnRleHRTdGF0cyhyYW5raW5nUmVzdWx0LmRvY3VtZW50cyk7XG4gICAgY29uc3QgcmFua2luZ1N0YXRzID0gdGhpcy5yYW5rZXIuZ2V0U3RhdGlzdGljcyhyYW5raW5nUmVzdWx0LmRvY3VtZW50cyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYXVnbWVudGVkUHJvbXB0OiBpbmplY3Rpb25SZXN1bHQucHJvbXB0LFxuICAgICAgY29udGV4dFN0YXRzOiB7XG4gICAgICAgIC4uLmNvbnRleHRTdGF0cyxcbiAgICAgICAgLi4ucmFua2luZ1N0YXRzLFxuICAgICAgICB0b2tlbnNVc2VkOiBpbmplY3Rpb25SZXN1bHQudG9rZW5zVXNlZCxcbiAgICAgICAgdHJ1bmNhdGVkOiBpbmplY3Rpb25SZXN1bHQudHJ1bmNhdGVkXG4gICAgICB9LFxuICAgICAgcmV0cmlldmFsU3RhdHM6IHtcbiAgICAgICAgdG90YWxEb2N1bWVudHM6IHJldHJpZXZhbFJlc3VsdC5kb2N1bWVudHMubGVuZ3RoLFxuICAgICAgICBpbnRlcm5hbENvdW50OiByZXRyaWV2YWxSZXN1bHQuaW50ZXJuYWxDb3VudCxcbiAgICAgICAgZXh0ZXJuYWxDb3VudDogcmV0cmlldmFsUmVzdWx0LmV4dGVybmFsQ291bnQsXG4gICAgICAgIGludGVybmFsUGVyY2VudGFnZTogKHJldHJpZXZhbFJlc3VsdC5pbnRlcm5hbENvdW50IC8gcmV0cmlldmFsUmVzdWx0LmRvY3VtZW50cy5sZW5ndGgpICogMTAwLFxuICAgICAgICBleHRlcm5hbFBlcmNlbnRhZ2U6IChyZXRyaWV2YWxSZXN1bHQuZXh0ZXJuYWxDb3VudCAvIHJldHJpZXZhbFJlc3VsdC5kb2N1bWVudHMubGVuZ3RoKSAqIDEwMCxcbiAgICAgICAgcmV0cmlldmFsVGltZTogcmV0cmlldmFsUmVzdWx0LnJldHJpZXZhbFRpbWUsXG4gICAgICAgIHRvdGFsUmVsZXZhbmNlU2NvcmU6IHJldHJpZXZhbFJlc3VsdC50b3RhbFJlbGV2YW5jZVNjb3JlXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBhdWdtZW50ZWQgcHJvbXB0IHdpdGggY3VzdG9tIGZvcm1hdHRpbmdcbiAgICovXG4gIGFzeW5jIGJ1aWxkQXVnbWVudGVkUHJvbXB0V2l0aEZvcm1hdChcbiAgICB1c2VyUXVlcnk6IHN0cmluZyxcbiAgICBmb3JtYXQ6ICdtYXJrZG93bicgfCAnanNvbicgfCAncGxhaW4nID0gJ21hcmtkb3duJyxcbiAgICBtYXhUb2tlbnM6IG51bWJlciA9IDIwMDBcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmJ1aWxkQXVnbWVudGVkUHJvbXB0KHVzZXJRdWVyeSwge1xuICAgICAgZm9ybWF0LFxuICAgICAgbWF4VG9rZW5zLFxuICAgICAgaW5jbHVkZU1ldGFkYXRhOiB0cnVlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0LmF1Z21lbnRlZFByb21wdDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnRleHQgSW5qZWN0aW9uIFBpcGVsaW5lXG4gKiBTdGFuZGFsb25lIHBpcGVsaW5lIGZvciBjb250ZXh0IGluamVjdGlvbiB3aXRob3V0IHJldHJpZXZhbFxuICovXG5leHBvcnQgY2xhc3MgQ29udGV4dEluamVjdGlvblBpcGVsaW5lIHtcbiAgcHJpdmF0ZSBjb250ZXh0SW5qZWN0b3I6IENvbnRleHRJbmplY3RvcjtcblxuICBjb25zdHJ1Y3Rvcihjb250ZXh0SW5qZWN0b3I6IENvbnRleHRJbmplY3Rvcikge1xuICAgIHRoaXMuY29udGV4dEluamVjdG9yID0gY29udGV4dEluamVjdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEluamVjdCBwcmUtcmV0cmlldmVkIGRvY3VtZW50cyBpbnRvIHByb21wdFxuICAgKi9cbiAgaW5qZWN0RG9jdW1lbnRzKFxuICAgIHVzZXJQcm9tcHQ6IHN0cmluZyxcbiAgICBkb2N1bWVudHM6IERvY3VtZW50W10sXG4gICAgb3B0aW9uczogQ29udGV4dEluamVjdGlvbk9wdGlvbnMgPSB7fVxuICApOiB7XG4gICAgcHJvbXB0OiBzdHJpbmc7XG4gICAgc3RhdHM6IGFueTtcbiAgfSB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jb250ZXh0SW5qZWN0b3IuaW5qZWN0Q29udGV4dCh1c2VyUHJvbXB0LCBkb2N1bWVudHMsIG9wdGlvbnMpO1xuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5jb250ZXh0SW5qZWN0b3IuZ2V0Q29udGV4dFN0YXRzKGRvY3VtZW50cyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJvbXB0OiByZXN1bHQucHJvbXB0LFxuICAgICAgc3RhdHM6IHtcbiAgICAgICAgLi4uc3RhdHMsXG4gICAgICAgIHRva2Vuc1VzZWQ6IHJlc3VsdC50b2tlbnNVc2VkLFxuICAgICAgICB0cnVuY2F0ZWQ6IHJlc3VsdC50cnVuY2F0ZWQsXG4gICAgICAgIGNvbnRleHRMZW5ndGg6IHJlc3VsdC5jb250ZXh0TGVuZ3RoXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgZG9jdW1lbnRzIHdpdGhvdXQgaW5qZWN0aW9uXG4gICAqL1xuICBmb3JtYXREb2N1bWVudHMoXG4gICAgZG9jdW1lbnRzOiBEb2N1bWVudFtdLFxuICAgIGZvcm1hdDogJ21hcmtkb3duJyB8ICdqc29uJyB8ICdwbGFpbicgPSAnbWFya2Rvd24nLFxuICAgIGluY2x1ZGVNZXRhZGF0YTogYm9vbGVhbiA9IHRydWVcbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0SW5qZWN0b3IuZm9ybWF0Q29udGV4dChkb2N1bWVudHMsIGZvcm1hdCwgaW5jbHVkZU1ldGFkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcnVuY2F0ZSBjb250ZXh0IHRvIHRva2VuIGxpbWl0XG4gICAqL1xuICB0cnVuY2F0ZUNvbnRleHQoXG4gICAgY29udGV4dDogc3RyaW5nLFxuICAgIG1heFRva2VuczogbnVtYmVyXG4gICk6IHtcbiAgICB0cnVuY2F0ZWRDb250ZXh0OiBzdHJpbmc7XG4gICAgdG9rZW5zVXNlZDogbnVtYmVyO1xuICAgIHRydW5jYXRlZDogYm9vbGVhbjtcbiAgfSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dEluamVjdG9yLnRydW5jYXRlVG9Ub2tlbkxpbWl0KGNvbnRleHQsIG1heFRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgaW5qZWN0aW9uIG9wdGlvbnNcbiAgICovXG4gIHZhbGlkYXRlT3B0aW9ucyhvcHRpb25zOiBDb250ZXh0SW5qZWN0aW9uT3B0aW9ucyk6IHtcbiAgICB2YWxpZDogYm9vbGVhbjtcbiAgICBlcnJvcnM6IHN0cmluZ1tdO1xuICB9IHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0SW5qZWN0b3IudmFsaWRhdGVPcHRpb25zKG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb250ZXh0IHN0YXRpc3RpY3NcbiAgICovXG4gIGdldENvbnRleHRTdGF0cyhkb2N1bWVudHM6IERvY3VtZW50W10pOiBhbnkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRJbmplY3Rvci5nZXRDb250ZXh0U3RhdHMoZG9jdW1lbnRzKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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