04c60346d9a03ff3136da8238957cc67
/* istanbul ignore next */
function cov_2j6erxjbh0() {
  var path = "/workspaces/azora/services/ai-ethics-monitor/src/monitor.ts";
  var hash = "1b4d1953ff9347e017844083d7e7bd1417b36d81";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/ai-ethics-monitor/src/monitor.ts",
    statementMap: {
      "0": {
        start: {
          line: 7,
          column: 8
        },
        end: {
          line: 7,
          column: 49
        }
      },
      "1": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 72
        }
      },
      "2": {
        start: {
          line: 17,
          column: 23
        },
        end: {
          line: 17,
          column: 57
        }
      },
      "3": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 24,
          column: 9
        }
      },
      "4": {
        start: {
          line: 20,
          column: 12
        },
        end: {
          line: 20,
          column: 83
        }
      },
      "5": {
        start: {
          line: 21,
          column: 12
        },
        end: {
          line: 21,
          column: 73
        }
      },
      "6": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 88
        }
      },
      "7": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 23,
          column: 25
        }
      },
      "8": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 26,
          column: 80
        }
      },
      "9": {
        start: {
          line: 27,
          column: 8
        },
        end: {
          line: 27,
          column: 20
        }
      },
      "10": {
        start: {
          line: 37,
          column: 31
        },
        end: {
          line: 42,
          column: 9
        }
      },
      "11": {
        start: {
          line: 44,
          column: 8
        },
        end: {
          line: 44,
          column: 42
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 6,
            column: 4
          },
          end: {
            line: 6,
            column: 5
          }
        },
        loc: {
          start: {
            line: 6,
            column: 18
          },
          end: {
            line: 8,
            column: 5
          }
        },
        line: 6
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 43
          },
          end: {
            line: 28,
            column: 5
          }
        },
        line: 15
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 35,
            column: 4
          },
          end: {
            line: 35,
            column: 5
          }
        },
        loc: {
          start: {
            line: 35,
            column: 48
          },
          end: {
            line: 45,
            column: 5
          }
        },
        line: 35
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 19,
            column: 8
          },
          end: {
            line: 24,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 19,
            column: 8
          },
          end: {
            line: 24,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 19
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "1b4d1953ff9347e017844083d7e7bd1417b36d81"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2j6erxjbh0 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2j6erxjbh0();
import { ConstitutionalEngine } from '../../constitutional-ai/src/constitutional-engine';
export class EthicsMonitor {
  constructor() {
    /* istanbul ignore next */
    cov_2j6erxjbh0().f[0]++;
    cov_2j6erxjbh0().s[0]++;
    this.engine = new ConstitutionalEngine();
  }

  /**
   * Monitors an action for ethical compliance.
   * @param action The action to monitor.
   * @returns True if the action is allowed, False otherwise.
   */
  monitorAction(action) {
    /* istanbul ignore next */
    cov_2j6erxjbh0().f[1]++;
    cov_2j6erxjbh0().s[1]++;
    console.log(`[EthicsMonitor] Analyzing action: ${action.type}`);
    const result =
    /* istanbul ignore next */
    (cov_2j6erxjbh0().s[2]++, this.engine.validateAction(action));
    /* istanbul ignore next */
    cov_2j6erxjbh0().s[3]++;
    if (!result.isAllowed) {
      /* istanbul ignore next */
      cov_2j6erxjbh0().b[0][0]++;
      cov_2j6erxjbh0().s[4]++;
      console.warn(`[EthicsMonitor] ðŸš¨ ACTION BLOCKED! Violation detected.`);
      /* istanbul ignore next */
      cov_2j6erxjbh0().s[5]++;
      console.warn(`[EthicsMonitor] Critique: ${result.critique}`);
      /* istanbul ignore next */
      cov_2j6erxjbh0().s[6]++;
      console.warn(`[EthicsMonitor] Violations: ${result.violations.join(', ')}`);
      /* istanbul ignore next */
      cov_2j6erxjbh0().s[7]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_2j6erxjbh0().b[0][1]++;
    }
    cov_2j6erxjbh0().s[8]++;
    console.log(`[EthicsMonitor] âœ… Action allowed. Score: ${result.score}`);
    /* istanbul ignore next */
    cov_2j6erxjbh0().s[9]++;
    return true;
  }

  /**
   * Monitors a transaction for suspicious patterns (simplified).
   * @param amount Transaction amount.
   * @returns True if safe.
   */
  monitorTransaction(amount) {
    /* istanbul ignore next */
    cov_2j6erxjbh0().f[2]++;
    // Construct an action for the engine
    const action =
    /* istanbul ignore next */
    (cov_2j6erxjbh0().s[10]++, {
      type: 'mint_token',
      actorId: 'system',
      payload: {
        amount
      },
      context: 'transaction_monitor'
    });
    /* istanbul ignore next */
    cov_2j6erxjbh0().s[11]++;
    return this.monitorAction(action);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmo2ZXJ4amJoMCIsImFjdHVhbENvdmVyYWdlIiwiQ29uc3RpdHV0aW9uYWxFbmdpbmUiLCJFdGhpY3NNb25pdG9yIiwiY29uc3RydWN0b3IiLCJmIiwicyIsImVuZ2luZSIsIm1vbml0b3JBY3Rpb24iLCJhY3Rpb24iLCJjb25zb2xlIiwibG9nIiwidHlwZSIsInJlc3VsdCIsInZhbGlkYXRlQWN0aW9uIiwiaXNBbGxvd2VkIiwiYiIsIndhcm4iLCJjcml0aXF1ZSIsInZpb2xhdGlvbnMiLCJqb2luIiwic2NvcmUiLCJtb25pdG9yVHJhbnNhY3Rpb24iLCJhbW91bnQiLCJhY3RvcklkIiwicGF5bG9hZCIsImNvbnRleHQiXSwic291cmNlcyI6WyJtb25pdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnN0aXR1dGlvbmFsRW5naW5lLCBBY3Rpb24gfSBmcm9tICcuLi8uLi9jb25zdGl0dXRpb25hbC1haS9zcmMvY29uc3RpdHV0aW9uYWwtZW5naW5lJztcblxuZXhwb3J0IGNsYXNzIEV0aGljc01vbml0b3Ige1xuICAgIHByaXZhdGUgZW5naW5lOiBDb25zdGl0dXRpb25hbEVuZ2luZTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmVuZ2luZSA9IG5ldyBDb25zdGl0dXRpb25hbEVuZ2luZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vbml0b3JzIGFuIGFjdGlvbiBmb3IgZXRoaWNhbCBjb21wbGlhbmNlLlxuICAgICAqIEBwYXJhbSBhY3Rpb24gVGhlIGFjdGlvbiB0byBtb25pdG9yLlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGFjdGlvbiBpcyBhbGxvd2VkLCBGYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgbW9uaXRvckFjdGlvbihhY3Rpb246IEFjdGlvbik6IGJvb2xlYW4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgW0V0aGljc01vbml0b3JdIEFuYWx5emluZyBhY3Rpb246ICR7YWN0aW9uLnR5cGV9YCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZW5naW5lLnZhbGlkYXRlQWN0aW9uKGFjdGlvbik7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQuaXNBbGxvd2VkKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtFdGhpY3NNb25pdG9yXSDwn5qoIEFDVElPTiBCTE9DS0VEISBWaW9sYXRpb24gZGV0ZWN0ZWQuYCk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtFdGhpY3NNb25pdG9yXSBDcml0aXF1ZTogJHtyZXN1bHQuY3JpdGlxdWV9YCk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtFdGhpY3NNb25pdG9yXSBWaW9sYXRpb25zOiAke3Jlc3VsdC52aW9sYXRpb25zLmpvaW4oJywgJyl9YCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhgW0V0aGljc01vbml0b3JdIOKchSBBY3Rpb24gYWxsb3dlZC4gU2NvcmU6ICR7cmVzdWx0LnNjb3JlfWApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb25pdG9ycyBhIHRyYW5zYWN0aW9uIGZvciBzdXNwaWNpb3VzIHBhdHRlcm5zIChzaW1wbGlmaWVkKS5cbiAgICAgKiBAcGFyYW0gYW1vdW50IFRyYW5zYWN0aW9uIGFtb3VudC5cbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHNhZmUuXG4gICAgICovXG4gICAgbW9uaXRvclRyYW5zYWN0aW9uKGFtb3VudDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhY3Rpb24gZm9yIHRoZSBlbmdpbmVcbiAgICAgICAgY29uc3QgYWN0aW9uOiBBY3Rpb24gPSB7XG4gICAgICAgICAgICB0eXBlOiAnbWludF90b2tlbicsXG4gICAgICAgICAgICBhY3RvcklkOiAnc3lzdGVtJyxcbiAgICAgICAgICAgIHBheWxvYWQ6IHsgYW1vdW50IH0sXG4gICAgICAgICAgICBjb250ZXh0OiAndHJhbnNhY3Rpb25fbW9uaXRvcidcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpcy5tb25pdG9yQWN0aW9uKGFjdGlvbik7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlWTtJQUFBQSxjQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxjQUFBO0FBZlosU0FBU0Usb0JBQW9CLFFBQWdCLG1EQUFtRDtBQUVoRyxPQUFPLE1BQU1DLGFBQWEsQ0FBQztFQUd2QkMsV0FBV0EsQ0FBQSxFQUFHO0lBQUE7SUFBQUosY0FBQSxHQUFBSyxDQUFBO0lBQUFMLGNBQUEsR0FBQU0sQ0FBQTtJQUNWLElBQUksQ0FBQ0MsTUFBTSxHQUFHLElBQUlMLG9CQUFvQixDQUFDLENBQUM7RUFDNUM7O0VBRUE7QUFDSjtBQUNBO0FBQ0E7QUFDQTtFQUNJTSxhQUFhQSxDQUFDQyxNQUFjLEVBQVc7SUFBQTtJQUFBVCxjQUFBLEdBQUFLLENBQUE7SUFBQUwsY0FBQSxHQUFBTSxDQUFBO0lBQ25DSSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQ0FBcUNGLE1BQU0sQ0FBQ0csSUFBSSxFQUFFLENBQUM7SUFDL0QsTUFBTUMsTUFBTTtJQUFBO0lBQUEsQ0FBQWIsY0FBQSxHQUFBTSxDQUFBLE9BQUcsSUFBSSxDQUFDQyxNQUFNLENBQUNPLGNBQWMsQ0FBQ0wsTUFBTSxDQUFDO0lBQUM7SUFBQVQsY0FBQSxHQUFBTSxDQUFBO0lBRWxELElBQUksQ0FBQ08sTUFBTSxDQUFDRSxTQUFTLEVBQUU7TUFBQTtNQUFBZixjQUFBLEdBQUFnQixDQUFBO01BQUFoQixjQUFBLEdBQUFNLENBQUE7TUFDbkJJLE9BQU8sQ0FBQ08sSUFBSSxDQUFDLHdEQUF3RCxDQUFDO01BQUM7TUFBQWpCLGNBQUEsR0FBQU0sQ0FBQTtNQUN2RUksT0FBTyxDQUFDTyxJQUFJLENBQUMsNkJBQTZCSixNQUFNLENBQUNLLFFBQVEsRUFBRSxDQUFDO01BQUM7TUFBQWxCLGNBQUEsR0FBQU0sQ0FBQTtNQUM3REksT0FBTyxDQUFDTyxJQUFJLENBQUMsK0JBQStCSixNQUFNLENBQUNNLFVBQVUsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7TUFBQztNQUFBcEIsY0FBQSxHQUFBTSxDQUFBO01BQzVFLE9BQU8sS0FBSztJQUNoQixDQUFDO0lBQUE7SUFBQTtNQUFBTixjQUFBLEdBQUFnQixDQUFBO0lBQUE7SUFBQWhCLGNBQUEsR0FBQU0sQ0FBQTtJQUVESSxPQUFPLENBQUNDLEdBQUcsQ0FBQyw0Q0FBNENFLE1BQU0sQ0FBQ1EsS0FBSyxFQUFFLENBQUM7SUFBQztJQUFBckIsY0FBQSxHQUFBTSxDQUFBO0lBQ3hFLE9BQU8sSUFBSTtFQUNmOztFQUVBO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7RUFDSWdCLGtCQUFrQkEsQ0FBQ0MsTUFBYyxFQUFXO0lBQUE7SUFBQXZCLGNBQUEsR0FBQUssQ0FBQTtJQUN4QztJQUNBLE1BQU1JLE1BQWM7SUFBQTtJQUFBLENBQUFULGNBQUEsR0FBQU0sQ0FBQSxRQUFHO01BQ25CTSxJQUFJLEVBQUUsWUFBWTtNQUNsQlksT0FBTyxFQUFFLFFBQVE7TUFDakJDLE9BQU8sRUFBRTtRQUFFRjtNQUFPLENBQUM7TUFDbkJHLE9BQU8sRUFBRTtJQUNiLENBQUM7SUFBQztJQUFBMUIsY0FBQSxHQUFBTSxDQUFBO0lBRUYsT0FBTyxJQUFJLENBQUNFLGFBQWEsQ0FBQ0MsTUFBTSxDQUFDO0VBQ3JDO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=