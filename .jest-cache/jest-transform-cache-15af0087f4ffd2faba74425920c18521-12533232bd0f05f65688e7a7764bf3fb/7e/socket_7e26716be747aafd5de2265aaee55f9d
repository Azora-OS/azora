801d033d606ef4584c1554eced280c21
/* istanbul ignore next */
function cov_1pu8d759zi() {
  var path = "/workspaces/azora/services/ai-orchestrator/src/socket.js";
  var hash = "fdfc36174a7924dbaa3f0f91ab4f5e6212b05fc7";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/ai-orchestrator/src/socket.js",
    statementMap: {
      "0": {
        start: {
          line: 1,
          column: 19
        },
        end: {
          line: 1,
          column: 39
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 11,
          column: 7
        }
      },
      "2": {
        start: {
          line: 13,
          column: 4
        },
        end: {
          line: 29,
          column: 7
        }
      },
      "3": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 14,
          column: 52
        }
      },
      "4": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 19,
          column: 11
        }
      },
      "5": {
        start: {
          line: 17,
          column: 12
        },
        end: {
          line: 17,
          column: 30
        }
      },
      "6": {
        start: {
          line: 18,
          column: 12
        },
        end: {
          line: 18,
          column: 66
        }
      },
      "7": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 24,
          column: 11
        }
      },
      "8": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 23,
          column: 63
        }
      },
      "9": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 28,
          column: 11
        }
      },
      "10": {
        start: {
          line: 27,
          column: 12
        },
        end: {
          line: 27,
          column: 59
        }
      },
      "11": {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 31,
          column: 14
        }
      },
      "12": {
        start: {
          line: 35,
          column: 4
        },
        end: {
          line: 37,
          column: 5
        }
      },
      "13": {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 36,
          column: 54
        }
      },
      "14": {
        start: {
          line: 38,
          column: 4
        },
        end: {
          line: 38,
          column: 14
        }
      },
      "15": {
        start: {
          line: 41,
          column: 0
        },
        end: {
          line: 41,
          column: 39
        }
      }
    },
    fnMap: {
      "0": {
        name: "initSocket",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 19
          }
        },
        loc: {
          start: {
            line: 5,
            column: 28
          },
          end: {
            line: 32,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 13,
            column: 24
          },
          end: {
            line: 13,
            column: 25
          }
        },
        loc: {
          start: {
            line: 13,
            column: 36
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 13
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 16,
            column: 31
          },
          end: {
            line: 16,
            column: 32
          }
        },
        loc: {
          start: {
            line: 16,
            column: 41
          },
          end: {
            line: 19,
            column: 9
          }
        },
        line: 16
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 21,
            column: 34
          },
          end: {
            line: 21,
            column: 35
          }
        },
        loc: {
          start: {
            line: 21,
            column: 44
          },
          end: {
            line: 24,
            column: 9
          }
        },
        line: 21
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 26,
            column: 32
          },
          end: {
            line: 26,
            column: 33
          }
        },
        loc: {
          start: {
            line: 26,
            column: 38
          },
          end: {
            line: 28,
            column: 9
          }
        },
        line: 26
      },
      "5": {
        name: "getIo",
        decl: {
          start: {
            line: 34,
            column: 9
          },
          end: {
            line: 34,
            column: 14
          }
        },
        loc: {
          start: {
            line: 34,
            column: 17
          },
          end: {
            line: 39,
            column: 1
          }
        },
        line: 34
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 35,
            column: 4
          },
          end: {
            line: 37,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 35,
            column: 4
          },
          end: {
            line: 37,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 35
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "fdfc36174a7924dbaa3f0f91ab4f5e6212b05fc7"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1pu8d759zi = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1pu8d759zi();
const {
  Server
} =
/* istanbul ignore next */
(cov_1pu8d759zi().s[0]++, require('socket.io'));
let io;
function initSocket(server) {
  /* istanbul ignore next */
  cov_1pu8d759zi().f[0]++;
  cov_1pu8d759zi().s[1]++;
  io = new Server(server, {
    cors: {
      origin: '*',
      // Allow all origins for now
      methods: ['GET', 'POST']
    }
  });
  /* istanbul ignore next */
  cov_1pu8d759zi().s[2]++;
  io.on('connection', socket => {
    /* istanbul ignore next */
    cov_1pu8d759zi().f[1]++;
    cov_1pu8d759zi().s[3]++;
    console.log('Client connected:', socket.id);
    /* istanbul ignore next */
    cov_1pu8d759zi().s[4]++;
    socket.on('join_room', room => {
      /* istanbul ignore next */
      cov_1pu8d759zi().f[2]++;
      cov_1pu8d759zi().s[5]++;
      socket.join(room);
      /* istanbul ignore next */
      cov_1pu8d759zi().s[6]++;
      console.log(`User ${socket.id} joined room: ${room}`);
    });
    /* istanbul ignore next */
    cov_1pu8d759zi().s[7]++;
    socket.on('send_message', data => {
      /* istanbul ignore next */
      cov_1pu8d759zi().f[3]++;
      cov_1pu8d759zi().s[8]++;
      // Broadcast to room
      socket.to(data.room).emit('receive_message', data);
    });
    /* istanbul ignore next */
    cov_1pu8d759zi().s[9]++;
    socket.on('disconnect', () => {
      /* istanbul ignore next */
      cov_1pu8d759zi().f[4]++;
      cov_1pu8d759zi().s[10]++;
      console.log('Client disconnected:', socket.id);
    });
  });
  /* istanbul ignore next */
  cov_1pu8d759zi().s[11]++;
  return io;
}
function getIo() {
  /* istanbul ignore next */
  cov_1pu8d759zi().f[5]++;
  cov_1pu8d759zi().s[12]++;
  if (!io) {
    /* istanbul ignore next */
    cov_1pu8d759zi().b[0][0]++;
    cov_1pu8d759zi().s[13]++;
    throw new Error('Socket.io not initialized!');
  } else
  /* istanbul ignore next */
  {
    cov_1pu8d759zi().b[0][1]++;
  }
  cov_1pu8d759zi().s[14]++;
  return io;
}
/* istanbul ignore next */
cov_1pu8d759zi().s[15]++;
module.exports = {
  initSocket,
  getIo
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXB1OGQ3NTl6aSIsImFjdHVhbENvdmVyYWdlIiwiU2VydmVyIiwicyIsInJlcXVpcmUiLCJpbyIsImluaXRTb2NrZXQiLCJzZXJ2ZXIiLCJmIiwiY29ycyIsIm9yaWdpbiIsIm1ldGhvZHMiLCJvbiIsInNvY2tldCIsImNvbnNvbGUiLCJsb2ciLCJpZCIsInJvb20iLCJqb2luIiwiZGF0YSIsInRvIiwiZW1pdCIsImdldElvIiwiYiIsIkVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInNvY2tldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFNlcnZlciB9ID0gcmVxdWlyZSgnc29ja2V0LmlvJyk7XG5cbmxldCBpbztcblxuZnVuY3Rpb24gaW5pdFNvY2tldChzZXJ2ZXIpIHtcbiAgICBpbyA9IG5ldyBTZXJ2ZXIoc2VydmVyLCB7XG4gICAgICAgIGNvcnM6IHtcbiAgICAgICAgICAgIG9yaWdpbjogJyonLCAvLyBBbGxvdyBhbGwgb3JpZ2lucyBmb3Igbm93XG4gICAgICAgICAgICBtZXRob2RzOiBbJ0dFVCcsICdQT1NUJ11cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaW8ub24oJ2Nvbm5lY3Rpb24nLCAoc29ja2V0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDbGllbnQgY29ubmVjdGVkOicsIHNvY2tldC5pZCk7XG5cbiAgICAgICAgc29ja2V0Lm9uKCdqb2luX3Jvb20nLCAocm9vbSkgPT4ge1xuICAgICAgICAgICAgc29ja2V0LmpvaW4ocm9vbSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVXNlciAke3NvY2tldC5pZH0gam9pbmVkIHJvb206ICR7cm9vbX1gKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0Lm9uKCdzZW5kX21lc3NhZ2UnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgLy8gQnJvYWRjYXN0IHRvIHJvb21cbiAgICAgICAgICAgIHNvY2tldC50byhkYXRhLnJvb20pLmVtaXQoJ3JlY2VpdmVfbWVzc2FnZScsIGRhdGEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ2xpZW50IGRpc2Nvbm5lY3RlZDonLCBzb2NrZXQuaWQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpbztcbn1cblxuZnVuY3Rpb24gZ2V0SW8oKSB7XG4gICAgaWYgKCFpbykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NvY2tldC5pbyBub3QgaW5pdGlhbGl6ZWQhJyk7XG4gICAgfVxuICAgIHJldHVybiBpbztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IGluaXRTb2NrZXQsIGdldElvIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBZVk7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTtBQWZaLE1BQU07RUFBRUU7QUFBTyxDQUFDO0FBQUE7QUFBQSxDQUFBRixjQUFBLEdBQUFH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