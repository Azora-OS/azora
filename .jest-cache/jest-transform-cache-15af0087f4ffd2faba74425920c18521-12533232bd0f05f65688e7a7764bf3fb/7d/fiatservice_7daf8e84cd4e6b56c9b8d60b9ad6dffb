9dd5d55fb50f01d69a61a2e54ecd5d81
/* istanbul ignore next */
function cov_20dam2thxj() {
  var path = "/workspaces/azora/services/azora-pay/src/fiat-service.ts";
  var hash = "940a997559e652efade5e0a36d6f1af700e9261e";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-pay/src/fiat-service.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 37
        },
        end: {
          line: 3,
          column: 41
        }
      },
      "1": {
        start: {
          line: 6,
          column: 8
        },
        end: {
          line: 6,
          column: 34
        }
      },
      "2": {
        start: {
          line: 10,
          column: 8
        },
        end: {
          line: 10,
          column: 86
        }
      },
      "3": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 64
        }
      },
      "4": {
        start: {
          line: 13,
          column: 37
        },
        end: {
          line: 13,
          column: 62
        }
      },
      "5": {
        start: {
          line: 15,
          column: 26
        },
        end: {
          line: 15,
          column: 56
        }
      },
      "6": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 25,
          column: 10
        }
      },
      "7": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 29,
          column: 82
        }
      },
      "8": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 32,
          column: 64
        }
      },
      "9": {
        start: {
          line: 32,
          column: 37
        },
        end: {
          line: 32,
          column: 62
        }
      },
      "10": {
        start: {
          line: 34,
          column: 26
        },
        end: {
          line: 34,
          column: 56
        }
      },
      "11": {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 44,
          column: 10
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 5,
            column: 4
          },
          end: {
            line: 5,
            column: 5
          }
        },
        loc: {
          start: {
            line: 5,
            column: 45
          },
          end: {
            line: 7,
            column: 5
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 9,
            column: 5
          }
        },
        loc: {
          start: {
            line: 9,
            column: 125
          },
          end: {
            line: 26,
            column: 5
          }
        },
        line: 9
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 13,
            column: 26
          },
          end: {
            line: 13,
            column: 27
          }
        },
        loc: {
          start: {
            line: 13,
            column: 37
          },
          end: {
            line: 13,
            column: 62
          }
        },
        line: 13
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 28,
            column: 5
          }
        },
        loc: {
          start: {
            line: 28,
            column: 124
          },
          end: {
            line: 45,
            column: 5
          }
        },
        line: 28
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 32,
            column: 26
          },
          end: {
            line: 32,
            column: 27
          }
        },
        loc: {
          start: {
            line: 32,
            column: 37
          },
          end: {
            line: 32,
            column: 62
          }
        },
        line: 32
      }
    },
    branchMap: {},
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {},
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "940a997559e652efade5e0a36d6f1af700e9261e"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_20dam2thxj = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_20dam2thxj();
export class FiatService {
  // Mock exchange rate: 1 AZR = $1.50 USD
  EXCHANGE_RATE =
  /* istanbul ignore next */
  (cov_20dam2thxj().s[0]++, 1.50);
  async getExchangeRate() {
    /* istanbul ignore next */
    cov_20dam2thxj().f[0]++;
    cov_20dam2thxj().s[1]++;
    return this.EXCHANGE_RATE;
  }
  async buyAZR(amountUSD, paymentMethodId) {
    /* istanbul ignore next */
    cov_20dam2thxj().f[1]++;
    cov_20dam2thxj().s[2]++;
    console.log(`Processing purchase of $${amountUSD} via ${paymentMethodId}...`);

    // Simulate API delay
    /* istanbul ignore next */
    cov_20dam2thxj().s[3]++;
    await new Promise(resolve => {
      /* istanbul ignore next */
      cov_20dam2thxj().f[2]++;
      cov_20dam2thxj().s[4]++;
      return setTimeout(resolve, 1500);
    });
    const azrAmount =
    /* istanbul ignore next */
    (cov_20dam2thxj().s[5]++, amountUSD / this.EXCHANGE_RATE);

    // In a real app, this would:
    // 1. Charge the user's card via Stripe
    // 2. Mint or transfer AZR to user's wallet
    /* istanbul ignore next */
    cov_20dam2thxj().s[6]++;
    return {
      success: true,
      azrAmount,
      txId: `tx_buy_${Date.now()}`
    };
  }
  async sellAZR(amountAZR, bankAccountId) {
    /* istanbul ignore next */
    cov_20dam2thxj().f[3]++;
    cov_20dam2thxj().s[7]++;
    console.log(`Processing sale of ${amountAZR} AZR to ${bankAccountId}...`);

    // Simulate API delay
    /* istanbul ignore next */
    cov_20dam2thxj().s[8]++;
    await new Promise(resolve => {
      /* istanbul ignore next */
      cov_20dam2thxj().f[4]++;
      cov_20dam2thxj().s[9]++;
      return setTimeout(resolve, 1500);
    });
    const usdAmount =
    /* istanbul ignore next */
    (cov_20dam2thxj().s[10]++, amountAZR * this.EXCHANGE_RATE);

    // In a real app, this would:
    // 1. Burn or transfer AZR from user's wallet
    // 2. Initiate bank transfer via Stripe Connect
    /* istanbul ignore next */
    cov_20dam2thxj().s[11]++;
    return {
      success: true,
      usdAmount,
      txId: `tx_sell_${Date.now()}`
    };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjBkYW0ydGh4aiIsImFjdHVhbENvdmVyYWdlIiwiRmlhdFNlcnZpY2UiLCJFWENIQU5HRV9SQVRFIiwicyIsImdldEV4Y2hhbmdlUmF0ZSIsImYiLCJidXlBWlIiLCJhbW91bnRVU0QiLCJwYXltZW50TWV0aG9kSWQiLCJjb25zb2xlIiwibG9nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiYXpyQW1vdW50Iiwic3VjY2VzcyIsInR4SWQiLCJEYXRlIiwibm93Iiwic2VsbEFaUiIsImFtb3VudEFaUiIsImJhbmtBY2NvdW50SWQiLCJ1c2RBbW91bnQiXSwic291cmNlcyI6WyJmaWF0LXNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEZpYXRTZXJ2aWNlIHtcbiAgICAvLyBNb2NrIGV4Y2hhbmdlIHJhdGU6IDEgQVpSID0gJDEuNTAgVVNEXG4gICAgcHJpdmF0ZSByZWFkb25seSBFWENIQU5HRV9SQVRFID0gMS41MDtcblxuICAgIGFzeW5jIGdldEV4Y2hhbmdlUmF0ZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5FWENIQU5HRV9SQVRFO1xuICAgIH1cblxuICAgIGFzeW5jIGJ1eUFaUihhbW91bnRVU0Q6IG51bWJlciwgcGF5bWVudE1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgYXpyQW1vdW50OiBudW1iZXI7IHR4SWQ6IHN0cmluZyB9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHB1cmNoYXNlIG9mICQke2Ftb3VudFVTRH0gdmlhICR7cGF5bWVudE1ldGhvZElkfS4uLmApO1xuXG4gICAgICAgIC8vIFNpbXVsYXRlIEFQSSBkZWxheVxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTUwMCkpO1xuXG4gICAgICAgIGNvbnN0IGF6ckFtb3VudCA9IGFtb3VudFVTRCAvIHRoaXMuRVhDSEFOR0VfUkFURTtcblxuICAgICAgICAvLyBJbiBhIHJlYWwgYXBwLCB0aGlzIHdvdWxkOlxuICAgICAgICAvLyAxLiBDaGFyZ2UgdGhlIHVzZXIncyBjYXJkIHZpYSBTdHJpcGVcbiAgICAgICAgLy8gMi4gTWludCBvciB0cmFuc2ZlciBBWlIgdG8gdXNlcidzIHdhbGxldFxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgYXpyQW1vdW50LFxuICAgICAgICAgICAgdHhJZDogYHR4X2J1eV8ke0RhdGUubm93KCl9YFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIHNlbGxBWlIoYW1vdW50QVpSOiBudW1iZXIsIGJhbmtBY2NvdW50SWQ6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyB1c2RBbW91bnQ6IG51bWJlcjsgdHhJZDogc3RyaW5nIH0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFByb2Nlc3Npbmcgc2FsZSBvZiAke2Ftb3VudEFaUn0gQVpSIHRvICR7YmFua0FjY291bnRJZH0uLi5gKTtcblxuICAgICAgICAvLyBTaW11bGF0ZSBBUEkgZGVsYXlcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDE1MDApKTtcblxuICAgICAgICBjb25zdCB1c2RBbW91bnQgPSBhbW91bnRBWlIgKiB0aGlzLkVYQ0hBTkdFX1JBVEU7XG5cbiAgICAgICAgLy8gSW4gYSByZWFsIGFwcCwgdGhpcyB3b3VsZDpcbiAgICAgICAgLy8gMS4gQnVybiBvciB0cmFuc2ZlciBBWlIgZnJvbSB1c2VyJ3Mgd2FsbGV0XG4gICAgICAgIC8vIDIuIEluaXRpYXRlIGJhbmsgdHJhbnNmZXIgdmlhIFN0cmlwZSBDb25uZWN0XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICB1c2RBbW91bnQsXG4gICAgICAgICAgICB0eElkOiBgdHhfc2VsbF8ke0RhdGUubm93KCl9YFxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlWTtJQUFBQSxjQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxjQUFBO0FBZlosT0FBTyxNQUFNRSxXQUFXLENBQUM7RUFDckI7RUFDaUJDLGFBQWE7RUFBQTtFQUFBLENBQUFILGNBQUEsR0FBQUksQ0FBQSxPQUFHLElBQUk7RUFFckMsTUFBTUMsZUFBZUEsQ0FBQSxFQUFvQjtJQUFBO0lBQUFMLGNBQUEsR0FBQU0sQ0FBQTtJQUFBTixjQUFBLEdBQUFJLENBQUE7SUFDckMsT0FBTyxJQUFJLENBQUNELGFBQWE7RUFDN0I7RUFFQSxNQUFNSSxNQUFNQSxDQUFDQyxTQUFpQixFQUFFQyxlQUF1QixFQUFrRTtJQUFBO0lBQUFULGNBQUEsR0FBQU0sQ0FBQTtJQUFBTixjQUFBLEdBQUFJLENBQUE7SUFDckhNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDJCQUEyQkgsU0FBUyxRQUFRQyxlQUFlLEtBQUssQ0FBQzs7SUFFN0U7SUFBQTtJQUFBVCxjQUFBLEdBQUFJLENBQUE7SUFDQSxNQUFNLElBQUlRLE9BQU8sQ0FBQ0MsT0FBTyxJQUFJO01BQUE7TUFBQWIsY0FBQSxHQUFBTSxDQUFBO01BQUFOLGNBQUEsR0FBQUksQ0FBQTtNQUFBLE9BQUFVLFVBQVUsQ0FBQ0QsT0FBTyxFQUFFLElBQUksQ0FBQztJQUFELENBQUMsQ0FBQztJQUV2RCxNQUFNRSxTQUFTO0lBQUE7SUFBQSxDQUFBZixjQUFBLEdBQUFJLENBQUEsT0FBR0ksU0FBUyxHQUFHLElBQUksQ0FBQ0wsYUFBYTs7SUFFaEQ7SUFDQTtJQUNBO0lBQUE7SUFBQUgsY0FBQSxHQUFBSSxDQUFBO0lBRUEsT0FBTztNQUNIWSxPQUFPLEVBQUUsSUFBSTtNQUNiRCxTQUFTO01BQ1RFLElBQUksRUFBRSxVQUFVQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0lBQzlCLENBQUM7RUFDTDtFQUVBLE1BQU1DLE9BQU9BLENBQUNDLFNBQWlCLEVBQUVDLGFBQXFCLEVBQWtFO0lBQUE7SUFBQXRCLGNBQUEsR0FBQU0sQ0FBQTtJQUFBTixjQUFBLEdBQUFJLENBQUE7SUFDcEhNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQlUsU0FBUyxXQUFXQyxhQUFhLEtBQUssQ0FBQzs7SUFFekU7SUFBQTtJQUFBdEIsY0FBQSxHQUFBSSxDQUFBO0lBQ0EsTUFBTSxJQUFJUSxPQUFPLENBQUNDLE9BQU8sSUFBSTtNQUFBO01BQUFiLGNBQUEsR0FBQU0sQ0FBQTtNQUFBTixjQUFBLEdBQUFJLENBQUE7TUFBQSxPQUFBVSxVQUFVLENBQUNELE9BQU8sRUFBRSxJQUFJLENBQUM7SUFBRCxDQUFDLENBQUM7SUFFdkQsTUFBTVUsU0FBUztJQUFBO0lBQUEsQ0FBQXZCLGNBQUEsR0FBQUksQ0FBQSxRQUFHaUIsU0FBUyxHQUFHLElBQUksQ0FBQ2xCLGFBQWE7O0lBRWhEO0lBQ0E7SUFDQTtJQUFBO0lBQUFILGNBQUEsR0FBQUksQ0FBQTtJQUVBLE9BQU87TUFDSFksT0FBTyxFQUFFLElBQUk7TUFDYk8sU0FBUztNQUNUTixJQUFJLEVBQUUsV0FBV0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQztJQUMvQixDQUFDO0VBQ0w7QUFDSiIsImlnbm9yZUxpc3QiOltdfQ==