{"version":3,"names":["cov_av4ewv0bc","actualCoverage","express","s","require","PrismaClient","helmet","compression","cors","config","prisma","app","PORT","b","process","env","SERVICE_NAME","use","json","limit","urlencoded","extended","req","res","next","f","console","log","Date","toISOString","method","path","get","$queryRaw","status","service","db","timestamp","uptime","error","message","version","description","endpoints","err","success","listen","module","exports"],"sources":["index.js"],"sourcesContent":["const express = require('express');\nconst { PrismaClient } = require('@prisma/client');\nconst helmet = require('helmet');\nconst compression = require('compression');\nconst cors = require('cors');\nrequire('dotenv').config();\n\nconst prisma = new PrismaClient();\nconst app = express();\nconst PORT = process.env.PORT || 3012;\nconst SERVICE_NAME = process.env.SERVICE_NAME || 'azora-ledger';\n\n// Middleware\napp.use(helmet());\napp.use(cors());\napp.use(compression());\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\n\n// Request logging\napp.use((req, res, next) => {\n  console.log(`[${new Date().toISOString()}] ${req.method} ${req.path}`);\n  next();\n});\n\n// Health check\napp.get('/health', async (req, res) => {\n  try {\n    await prisma.$queryRaw`SELECT 1`;\n    res.json({ \n      status: 'healthy', \n      service: SERVICE_NAME,\n      db: 'connected',\n      timestamp: new Date().toISOString(),\n      uptime: process.uptime()\n    });\n  } catch (error) {\n    res.status(503).json({ \n      status: 'unhealthy', \n      error: error.message,\n      service: SERVICE_NAME\n    });\n  }\n});\n\n// API Documentation\napp.get('/', (req, res) => {\n  res.json({ \n    service: SERVICE_NAME,\n    version: '1.0.0',\n    description: 'Azora Ledger Service - Financial transaction ledger',\n    endpoints: {\n      'GET /health': 'Service health check',\n      'POST /api/transactions': 'Create a new transaction',\n      'GET /api/transactions': 'Get all transactions',\n      'GET /api/transactions/:id': 'Get transaction by ID',\n      'PUT /api/transactions/:id': 'Update transaction',\n      'DELETE /api/transactions/:id': 'Delete transaction',\n      'GET /api/accounts/:accountId/transactions': 'Get transactions for account',\n      'GET /api/accounts/:accountId/balance': 'Get account balance',\n      'POST /api/accounts': 'Create a new account',\n      'GET /api/accounts': 'Get all accounts',\n      'GET /api/accounts/:id': 'Get account by ID',\n      'GET /api/reports/financial-summary': 'Get financial summary report',\n      'GET /api/reports/account-activity': 'Get account activity report'\n    }\n  });\n});\n\n// Error handling middleware\napp.use((err, req, res, next) => {\n  console.error('Error:', err);\n  res.status(500).json({ \n    success: false,\n    error: 'Internal server error',\n    message: err.message \n  });\n});\n\n// 404 handler\napp.use((req, res) => {\n  res.status(404).json({ \n    success: false,\n    error: 'Endpoint not found' \n  });\n});\n\n// Start server\napp.listen(PORT, () => {\n  console.log(`‚úÖ ${SERVICE_NAME} running on port ${PORT}`);\n  console.log(`üåç Health check: http://localhost:${PORT}/health`);\n});\n\nmodule.exports = app;"],"mappings":"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","ignoreList":[]}