{"version":3,"names":["cov_v2cu5rqkw","actualCoverage","winston","path","LogLevel","logFormat","s","format","combine","timestamp","errors","stack","splat","json","consoleFormat","colorize","printf","level","message","metadata","f","msg","Object","keys","length","b","JSON","stringify","logger","createLogger","process","env","LOG_LEVEL","defaultMeta","service","SERVICE_NAME","environment","NODE_ENV","transports","Console","logDir","LOG_DIR","add","File","filename","join","maxsize","maxFiles","log","error","args","warn","info","http","verbose","debug","silly"],"sources":["logger.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\n/**\n * Centralized Logging Utility\n * \n * Replaces console.log statements with structured logging using Winston\n * Provides consistent logging across all services\n */\n\nimport winston from 'winston';\nimport path from 'path';\n\nexport enum LogLevel {\n  ERROR = 'error',\n  WARN = 'warn',\n  INFO = 'info',\n  HTTP = 'http',\n  VERBOSE = 'verbose',\n  DEBUG = 'debug',\n  SILLY = 'silly',\n}\n\n// Define log format\nconst logFormat = winston.format.combine(\n  winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }),\n  winston.format.errors({ stack: true }),\n  winston.format.splat(),\n  winston.format.json()\n);\n\n// Console format for development\nconst consoleFormat = winston.format.combine(\n  winston.format.colorize(),\n  winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }),\n  winston.format.printf(({ timestamp, level, message, ...metadata }: winston.LogEntry) => {\n    let msg = `${timestamp} [${level}]: ${message}`;\n    if (Object.keys(metadata).length > 0) {\n      msg += ` ${JSON.stringify(metadata)}`;\n    }\n    return msg;\n  })\n);\n\n// Create logger instance\nconst logger = winston.createLogger({\n  level: process.env.LOG_LEVEL || 'info',\n  format: logFormat,\n  defaultMeta: {\n    service: process.env.SERVICE_NAME || 'azora-os',\n    environment: process.env.NODE_ENV || 'development',\n  },\n  transports: [\n    // Console transport\n    new winston.transports.Console({\n      format: process.env.NODE_ENV === 'production' ? logFormat : consoleFormat,\n    }),\n  ],\n});\n\n// Add file transport for production\nif (process.env.NODE_ENV === 'production') {\n  const logDir = process.env.LOG_DIR || './logs';\n  \n  // Error log file\n  logger.add(\n    new winston.transports.File({\n      filename: path.join(logDir, 'error.log'),\n      level: 'error',\n      maxsize: 5242880, // 5MB\n      maxFiles: 5,\n    })\n  );\n\n  // Combined log file\n  logger.add(\n    new winston.transports.File({\n      filename: path.join(logDir, 'combined.log'),\n      maxsize: 5242880, // 5MB\n      maxFiles: 5,\n    })\n  );\n}\n\n// Create convenience methods matching console API for easy migration\nexport const log = {\n  error: (message: string, ...args: unknown[]) => {\n    logger.error(message, ...args);\n  },\n  warn: (message: string, ...args: unknown[]) => {\n    logger.warn(message, ...args);\n  },\n  info: (message: string, ...args: unknown[]) => {\n    logger.info(message, ...args);\n  },\n  http: (message: string, ...args: unknown[]) => {\n    logger.http(message, ...args);\n  },\n  verbose: (message: string, ...args: unknown[]) => {\n    logger.verbose(message, ...args);\n  },\n  debug: (message: string, ...args: unknown[]) => {\n    logger.debug(message, ...args);\n  },\n  silly: (message: string, ...args: unknown[]) => {\n    logger.silly(message, ...args);\n  },\n};\n\n// Export winston logger for advanced usage\nexport { logger };\n\n// Default export for convenience\nexport default log;\n\n\n"],"mappings":"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","ignoreList":[]}