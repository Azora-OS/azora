fcb2c715e6990fd612ed88b20e9ec719
/* istanbul ignore next */
function cov_jwghr4lj2() {
  var path = "/workspaces/azora/services/education-revenue-engine/src/routes/assessment.routes.ts";
  var hash = "6e5340be7e828e14c2230471d0b23244425f65dd";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/education-revenue-engine/src/routes/assessment.routes.ts",
    statementMap: {
      "0": {
        start: {
          line: 4,
          column: 15
        },
        end: {
          line: 4,
          column: 23
        }
      },
      "1": {
        start: {
          line: 7,
          column: 0
        },
        end: {
          line: 26,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 2
        },
        end: {
          line: 25,
          column: 3
        }
      },
      "3": {
        start: {
          line: 9,
          column: 49
        },
        end: {
          line: 9,
          column: 57
        }
      },
      "4": {
        start: {
          line: 11,
          column: 19
        },
        end: {
          line: 16,
          column: 6
        }
      },
      "5": {
        start: {
          line: 18,
          column: 4
        },
        end: {
          line: 22,
          column: 7
        }
      },
      "6": {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 24,
          column: 16
        }
      },
      "7": {
        start: {
          line: 29,
          column: 0
        },
        end: {
          line: 41,
          column: 3
        }
      },
      "8": {
        start: {
          line: 30,
          column: 2
        },
        end: {
          line: 40,
          column: 3
        }
      },
      "9": {
        start: {
          line: 31,
          column: 20
        },
        end: {
          line: 31,
          column: 79
        }
      },
      "10": {
        start: {
          line: 33,
          column: 4
        },
        end: {
          line: 37,
          column: 7
        }
      },
      "11": {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 16
        }
      },
      "12": {
        start: {
          line: 44,
          column: 0
        },
        end: {
          line: 56,
          column: 3
        }
      },
      "13": {
        start: {
          line: 45,
          column: 2
        },
        end: {
          line: 55,
          column: 3
        }
      },
      "14": {
        start: {
          line: 46,
          column: 20
        },
        end: {
          line: 46,
          column: 93
        }
      },
      "15": {
        start: {
          line: 48,
          column: 4
        },
        end: {
          line: 52,
          column: 7
        }
      },
      "16": {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 16
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 27
          },
          end: {
            line: 7,
            column: 28
          }
        },
        loc: {
          start: {
            line: 7,
            column: 86
          },
          end: {
            line: 26,
            column: 1
          }
        },
        line: 7
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 29,
            column: 27
          },
          end: {
            line: 29,
            column: 28
          }
        },
        loc: {
          start: {
            line: 29,
            column: 86
          },
          end: {
            line: 41,
            column: 1
          }
        },
        line: 29
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 44,
            column: 42
          },
          end: {
            line: 44,
            column: 43
          }
        },
        loc: {
          start: {
            line: 44,
            column: 101
          },
          end: {
            line: 56,
            column: 1
          }
        },
        line: 44
      }
    },
    branchMap: {},
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {},
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "6e5340be7e828e14c2230471d0b23244425f65dd"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_jwghr4lj2 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_jwghr4lj2();
import { Router } from 'express';
import { assessmentService } from '../services/assessment.service';
const router =
/* istanbul ignore next */
(cov_jwghr4lj2().s[0]++, Router());

// POST /api/v1/assessments/:id/submit - Submit an assessment
/* istanbul ignore next */
cov_jwghr4lj2().s[1]++;
router.post('/:id/submit', async (req, res, next) => {
  /* istanbul ignore next */
  cov_jwghr4lj2().f[0]++;
  cov_jwghr4lj2().s[2]++;
  try {
    const {
      enrollmentId,
      answers,
      timeSpent
    } =
    /* istanbul ignore next */
    (cov_jwghr4lj2().s[3]++, req.body);
    const result =
    /* istanbul ignore next */
    (cov_jwghr4lj2().s[4]++, await assessmentService.submitAssessment({
      enrollmentId,
      assessmentId: req.params.id,
      answers,
      timeSpent
    }));
    /* istanbul ignore next */
    cov_jwghr4lj2().s[5]++;
    res.status(201).json({
      success: true,
      data: result,
      timestamp: new Date()
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_jwghr4lj2().s[6]++;
    next(error);
  }
});

// GET /api/v1/assessments/:id/results - Get assessment results
/* istanbul ignore next */
cov_jwghr4lj2().s[7]++;
router.get('/:id/results', async (req, res, next) => {
  /* istanbul ignore next */
  cov_jwghr4lj2().f[1]++;
  cov_jwghr4lj2().s[8]++;
  try {
    const results =
    /* istanbul ignore next */
    (cov_jwghr4lj2().s[9]++, await assessmentService.getAssessmentResults(req.params.id));
    /* istanbul ignore next */
    cov_jwghr4lj2().s[10]++;
    res.json({
      success: true,
      data: results,
      timestamp: new Date()
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_jwghr4lj2().s[11]++;
    next(error);
  }
});

// GET /api/v1/assessments/student/:studentId/history - Get student assessment history
/* istanbul ignore next */
cov_jwghr4lj2().s[12]++;
router.get('/student/:studentId/history', async (req, res, next) => {
  /* istanbul ignore next */
  cov_jwghr4lj2().f[2]++;
  cov_jwghr4lj2().s[13]++;
  try {
    const history =
    /* istanbul ignore next */
    (cov_jwghr4lj2().s[14]++, await assessmentService.getStudentAssessmentHistory(req.params.studentId));
    /* istanbul ignore next */
    cov_jwghr4lj2().s[15]++;
    res.json({
      success: true,
      data: history,
      timestamp: new Date()
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_jwghr4lj2().s[16]++;
    next(error);
  }
});
export default router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfandnaHI0bGoyIiwiYWN0dWFsQ292ZXJhZ2UiLCJSb3V0ZXIiLCJhc3Nlc3NtZW50U2VydmljZSIsInJvdXRlciIsInMiLCJwb3N0IiwicmVxIiwicmVzIiwibmV4dCIsImYiLCJlbnJvbGxtZW50SWQiLCJhbnN3ZXJzIiwidGltZVNwZW50IiwiYm9keSIsInJlc3VsdCIsInN1Ym1pdEFzc2Vzc21lbnQiLCJhc3Nlc3NtZW50SWQiLCJwYXJhbXMiLCJpZCIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsInRpbWVzdGFtcCIsIkRhdGUiLCJlcnJvciIsImdldCIsInJlc3VsdHMiLCJnZXRBc3Nlc3NtZW50UmVzdWx0cyIsImhpc3RvcnkiLCJnZXRTdHVkZW50QXNzZXNzbWVudEhpc3RvcnkiLCJzdHVkZW50SWQiXSwic291cmNlcyI6WyJhc3Nlc3NtZW50LnJvdXRlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIsIFJlcXVlc3QsIFJlc3BvbnNlLCBOZXh0RnVuY3Rpb24gfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGFzc2Vzc21lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvYXNzZXNzbWVudC5zZXJ2aWNlJztcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5cbi8vIFBPU1QgL2FwaS92MS9hc3Nlc3NtZW50cy86aWQvc3VibWl0IC0gU3VibWl0IGFuIGFzc2Vzc21lbnRcbnJvdXRlci5wb3N0KCcvOmlkL3N1Ym1pdCcsIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZW5yb2xsbWVudElkLCBhbnN3ZXJzLCB0aW1lU3BlbnQgfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXNzZXNzbWVudFNlcnZpY2Uuc3VibWl0QXNzZXNzbWVudCh7XG4gICAgICBlbnJvbGxtZW50SWQsXG4gICAgICBhc3Nlc3NtZW50SWQ6IHJlcS5wYXJhbXMuaWQsXG4gICAgICBhbnN3ZXJzLFxuICAgICAgdGltZVNwZW50LFxuICAgIH0pO1xuXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBuZXh0KGVycm9yKTtcbiAgfVxufSk7XG5cbi8vIEdFVCAvYXBpL3YxL2Fzc2Vzc21lbnRzLzppZC9yZXN1bHRzIC0gR2V0IGFzc2Vzc21lbnQgcmVzdWx0c1xucm91dGVyLmdldCgnLzppZC9yZXN1bHRzJywgYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGFzc2Vzc21lbnRTZXJ2aWNlLmdldEFzc2Vzc21lbnRSZXN1bHRzKHJlcS5wYXJhbXMuaWQpO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdHMsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbmV4dChlcnJvcik7XG4gIH1cbn0pO1xuXG4vLyBHRVQgL2FwaS92MS9hc3Nlc3NtZW50cy9zdHVkZW50LzpzdHVkZW50SWQvaGlzdG9yeSAtIEdldCBzdHVkZW50IGFzc2Vzc21lbnQgaGlzdG9yeVxucm91dGVyLmdldCgnL3N0dWRlbnQvOnN0dWRlbnRJZC9oaXN0b3J5JywgYXN5bmMgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGFzc2Vzc21lbnRTZXJ2aWNlLmdldFN0dWRlbnRBc3Nlc3NtZW50SGlzdG9yeShyZXEucGFyYW1zLnN0dWRlbnRJZCk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogaGlzdG9yeSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBuZXh0KGVycm9yKTtcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGFBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGFBQUE7QUFmWixTQUFTRSxNQUFNLFFBQXlDLFNBQVM7QUFDakUsU0FBU0MsaUJBQWlCLFFBQVEsZ0NBQWdDO0FBRWxFLE1BQU1DLE1BQU07QUFBQTtBQUFBLENBQUFKLGFBQUEsR0FBQUssQ0FBQSxPQUFHSCxNQUFNLENBQUMsQ0FBQzs7QUFFdkI7QUFBQTtBQUFBRixhQUFBLEdBQUFLLENBQUE7QUFDQUQsTUFBTSxDQUFDRSxJQUFJLENBQUMsYUFBYSxFQUFFLE9BQU9DLEdBQVksRUFBRUMsR0FBYSxFQUFFQyxJQUFrQixLQUFLO0VBQUE7RUFBQVQsYUFBQSxHQUFBVSxDQUFBO0VBQUFWLGFBQUEsR0FBQUssQ0FBQTtFQUNw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