{"version":3,"names":["cov_10m0as76i","actualCoverage","winston","trackDbQuery","logger","s","createLogger","defaultMeta","service","format","combine","timestamp","json","transports","Console","colorize","printf","level","message","meta","f","metaStr","Object","keys","length","b","JSON","stringify","QueryOptimizer","slowQueryThreshold","executeQuery","operation","model","queryFn","start","Date","now","result","duration","warn","threshold","error","batchExecute","queries","results","Promise","all","map","q","queryCount","avgDuration","toFixed","executePaginatedQuery","page","pageSize","skip","take","data","hasMore","slice","executeProjectedQuery","fields","setSlowQueryThreshold","ms","info","getSlowQueryThreshold","queryOptimizer","queryStrategies","paginate","selectFields","select","reduce","acc","field","includeRelations","relations","include","rel","orderBy","direction","filter","conditions","where","strategies","strategy","queryPatterns","getSingleOptimized","getListOptimized","getFilteredListOptimized","filters","getWithRelationsOptimized"],"sources":["query-optimizer.ts"],"sourcesContent":["import winston from 'winston';\nimport { trackDbQuery } from '../middleware/performance';\n\nconst logger = winston.createLogger({\n  defaultMeta: { service: 'query-optimizer' },\n  format: winston.format.combine(\n    winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }),\n    winston.format.json()\n  ),\n  transports: [\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.printf(({ timestamp, level, message, ...meta }) => {\n          const metaStr = Object.keys(meta).length ? JSON.stringify(meta) : '';\n          return `${timestamp} [QUERY] ${level}: ${message} ${metaStr}`;\n        })\n      ),\n    }),\n  ],\n});\n\n/**\n * Query Optimizer for database performance\n * Implements query optimization strategies and monitoring\n */\nexport class QueryOptimizer {\n  private slowQueryThreshold: number = 50; // ms\n\n  /**\n   * Execute query with performance tracking\n   */\n  async executeQuery<T>(\n    operation: string,\n    model: string,\n    queryFn: () => Promise<T>\n  ): Promise<T> {\n    const start = Date.now();\n    \n    try {\n      const result = await queryFn();\n      const duration = Date.now() - start;\n\n      // Track performance\n      trackDbQuery(operation, model, duration, 'success');\n\n      // Log slow queries\n      if (duration > this.slowQueryThreshold) {\n        logger.warn('Slow database query', {\n          operation,\n          model,\n          duration,\n          threshold: this.slowQueryThreshold,\n        });\n      }\n\n      return result;\n    } catch (error) {\n      const duration = Date.now() - start;\n      trackDbQuery(operation, model, duration, 'error');\n      \n      logger.error('Query execution error', {\n        operation,\n        model,\n        duration,\n        error: (error as Error).message,\n      });\n\n      throw error;\n    }\n  }\n\n  /**\n   * Batch execute queries for better performance\n   */\n  async batchExecute<T>(\n    operation: string,\n    model: string,\n    queries: Array<() => Promise<T>>\n  ): Promise<T[]> {\n    const start = Date.now();\n\n    try {\n      const results = await Promise.all(queries.map(q => q()));\n      const duration = Date.now() - start;\n\n      trackDbQuery(operation, model, duration, 'success');\n\n      if (duration > this.slowQueryThreshold) {\n        logger.warn('Slow batch query', {\n          operation,\n          model,\n          duration,\n          queryCount: queries.length,\n          avgDuration: (duration / queries.length).toFixed(2),\n        });\n      }\n\n      return results;\n    } catch (error) {\n      const duration = Date.now() - start;\n      trackDbQuery(operation, model, duration, 'error');\n\n      logger.error('Batch query execution error', {\n        operation,\n        model,\n        duration,\n        queryCount: queries.length,\n        error: (error as Error).message,\n      });\n\n      throw error;\n    }\n  }\n\n  /**\n   * Execute query with pagination for large result sets\n   */\n  async executePaginatedQuery<T>(\n    operation: string,\n    model: string,\n    queryFn: (skip: number, take: number) => Promise<T[]>,\n    page: number = 1,\n    pageSize: number = 20\n  ): Promise<{ data: T[]; page: number; pageSize: number; hasMore: boolean }> {\n    const skip = (page - 1) * pageSize;\n    const take = pageSize + 1; // Fetch one extra to determine if there are more\n\n    const data = await this.executeQuery(\n      `${operation}:paginated`,\n      model,\n      () => queryFn(skip, take)\n    );\n\n    const hasMore = data.length > pageSize;\n    const result = hasMore ? data.slice(0, pageSize) : data;\n\n    return {\n      data: result,\n      page,\n      pageSize,\n      hasMore,\n    };\n  }\n\n  /**\n   * Execute query with field projection to reduce payload\n   */\n  async executeProjectedQuery<T>(\n    operation: string,\n    model: string,\n    queryFn: (fields: string[]) => Promise<T[]>,\n    fields: string[]\n  ): Promise<T[]> {\n    return this.executeQuery(\n      `${operation}:projected`,\n      model,\n      () => queryFn(fields)\n    );\n  }\n\n  /**\n   * Set slow query threshold\n   */\n  setSlowQueryThreshold(ms: number): void {\n    this.slowQueryThreshold = ms;\n    logger.info('Slow query threshold updated', { threshold: ms });\n  }\n\n  /**\n   * Get slow query threshold\n   */\n  getSlowQueryThreshold(): number {\n    return this.slowQueryThreshold;\n  }\n}\n\n// Export singleton instance\nexport const queryOptimizer = new QueryOptimizer();\n\n/**\n * Query optimization strategies\n */\nexport const queryStrategies = {\n  /**\n   * Use pagination for large result sets\n   */\n  paginate: (page: number = 1, pageSize: number = 20) => ({\n    skip: (page - 1) * pageSize,\n    take: pageSize,\n  }),\n\n  /**\n   * Select specific fields to reduce payload\n   */\n  selectFields: (fields: string[]) => ({\n    select: fields.reduce((acc, field) => ({ ...acc, [field]: true }), {}),\n  }),\n\n  /**\n   * Include related data efficiently\n   */\n  includeRelations: (relations: string[]) => ({\n    include: relations.reduce((acc, rel) => ({ ...acc, [rel]: true }), {}),\n  }),\n\n  /**\n   * Order results for consistent pagination\n   */\n  orderBy: (field: string, direction: 'asc' | 'desc' = 'asc') => ({\n    orderBy: { [field]: direction },\n  }),\n\n  /**\n   * Filter results efficiently\n   */\n  filter: (conditions: Record<string, any>) => ({\n    where: conditions,\n  }),\n\n  /**\n   * Combine multiple strategies\n   */\n  combine: (...strategies: any[]) => {\n    return strategies.reduce((acc, strategy) => ({ ...acc, ...strategy }), {});\n  },\n};\n\n/**\n * Common query patterns for optimization\n */\nexport const queryPatterns = {\n  /**\n   * Get single item with specific fields\n   */\n  getSingleOptimized: (fields: string[]) => ({\n    ...queryStrategies.selectFields(fields),\n  }),\n\n  /**\n   * Get list with pagination and fields\n   */\n  getListOptimized: (page: number, pageSize: number, fields: string[]) => ({\n    ...queryStrategies.paginate(page, pageSize),\n    ...queryStrategies.selectFields(fields),\n  }),\n\n  /**\n   * Get filtered list with pagination\n   */\n  getFilteredListOptimized: (\n    filters: Record<string, any>,\n    page: number,\n    pageSize: number,\n    fields: string[]\n  ) => ({\n    ...queryStrategies.filter(filters),\n    ...queryStrategies.paginate(page, pageSize),\n    ...queryStrategies.selectFields(fields),\n  }),\n\n  /**\n   * Get with related data\n   */\n  getWithRelationsOptimized: (relations: string[], fields: string[]) => ({\n    ...queryStrategies.includeRelations(relations),\n    ...queryStrategies.selectFields(fields),\n  }),\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}