{"version":3,"names":["cov_1207dtyznm","actualCoverage","winston","Sentry","StructuredLogger","constructor","f","s","sentryEnabled","process","env","SENTRY_DSN","b","init","dsn","environment","NODE_ENV","tracesSampleRate","parseFloat","SENTRY_TRACE_SAMPLE_RATE","integrations","Integrations","Http","tracing","OnUncaughtException","OnUnhandledRejection","logger","createLogger","level","LOG_LEVEL","format","combine","timestamp","errors","stack","json","defaultMeta","service","transports","getTransports","Console","colorize","printf","message","meta","metaStr","Object","keys","length","JSON","stringify","File","filename","maxsize","maxFiles","ELK_HOST","ElasticsearchTransport","require","push","clientOpts","node","ELK_PORT","index","transformer","logData","Date","toISOString","severity","fields","info","context","metadata","warn","error","errorData","Error","code","undefined","captureException","tags","contexts","custom","extra","debug","logHttpRequest","method","path","statusCode","duration","logDbOperation","operation","table","rowsAffected","logAiOperation","engine","status","logFn","bind","logBusinessEvent","eventType","eventData","createChildLogger","ChildLogger","parent","structuredLogger"],"sources":["structured-logger.ts"],"sourcesContent":["/**\n * Structured Logging Service\n * Provides structured logging with support for ELK Stack, Sentry, and local file logging\n */\n\nimport winston from 'winston';\nimport * as Sentry from '@sentry/node';\n\nexport interface LogContext {\n  userId?: string;\n  courseId?: string;\n  enrollmentId?: string;\n  requestId?: string;\n  sessionId?: string;\n  [key: string]: any;\n}\n\nexport interface LogEntry {\n  timestamp: string;\n  level: string;\n  message: string;\n  context?: LogContext;\n  error?: {\n    message: string;\n    stack?: string;\n    code?: string;\n  };\n  metadata?: Record<string, any>;\n}\n\nclass StructuredLogger {\n  private logger: winston.Logger;\n  private sentryEnabled: boolean;\n\n  constructor() {\n    this.sentryEnabled = !!process.env.SENTRY_DSN;\n\n    // Initialize Sentry if DSN is provided\n    if (this.sentryEnabled) {\n      Sentry.init({\n        dsn: process.env.SENTRY_DSN,\n        environment: process.env.NODE_ENV || 'development',\n        tracesSampleRate: parseFloat(process.env.SENTRY_TRACE_SAMPLE_RATE || '0.1'),\n        integrations: [\n          new Sentry.Integrations.Http({ tracing: true }),\n          new Sentry.Integrations.OnUncaughtException(),\n          new Sentry.Integrations.OnUnhandledRejection(),\n        ],\n      });\n    }\n\n    // Create Winston logger with multiple transports\n    this.logger = winston.createLogger({\n      level: process.env.LOG_LEVEL || 'info',\n      format: winston.format.combine(\n        winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss.SSS' }),\n        winston.format.errors({ stack: true }),\n        winston.format.json(),\n      ),\n      defaultMeta: {\n        service: 'education-revenue-engine',\n        environment: process.env.NODE_ENV || 'development',\n      },\n      transports: this.getTransports(),\n    });\n  }\n\n  private getTransports(): winston.transport[] {\n    const transports: winston.transport[] = [\n      // Console transport for development\n      new winston.transports.Console({\n        format: winston.format.combine(\n          winston.format.colorize(),\n          winston.format.printf(({ timestamp, level, message, ...meta }) => {\n            const metaStr = Object.keys(meta).length ? JSON.stringify(meta, null, 2) : '';\n            return `${timestamp} [${level}] ${message} ${metaStr}`;\n          }),\n        ),\n      }),\n\n      // File transport for all logs\n      new winston.transports.File({\n        filename: 'logs/combined.log',\n        maxsize: 10485760, // 10MB\n        maxFiles: 10,\n      }),\n\n      // File transport for errors only\n      new winston.transports.File({\n        filename: 'logs/error.log',\n        level: 'error',\n        maxsize: 10485760, // 10MB\n        maxFiles: 10,\n      }),\n    ];\n\n    // Add HTTP transport for ELK Stack if configured\n    if (process.env.ELK_HOST) {\n      const ElasticsearchTransport = require('winston-elasticsearch');\n      transports.push(\n        new ElasticsearchTransport({\n          level: 'info',\n          clientOpts: {\n            node: `http://${process.env.ELK_HOST}:${process.env.ELK_PORT || 9200}`,\n          },\n          index: 'education-logs',\n          transformer: (logData: any) => ({\n            '@timestamp': new Date().toISOString(),\n            message: logData.message,\n            severity: logData.level,\n            fields: logData.meta,\n          }),\n        })\n      );\n    }\n\n    return transports;\n  }\n\n  /**\n   * Log info level message\n   */\n  info(message: string, context?: LogContext, metadata?: Record<string, any>): void {\n    this.logger.info(message, {\n      context,\n      metadata,\n    });\n  }\n\n  /**\n   * Log warning level message\n   */\n  warn(message: string, context?: LogContext, metadata?: Record<string, any>): void {\n    this.logger.warn(message, {\n      context,\n      metadata,\n    });\n  }\n\n  /**\n   * Log error level message\n   */\n  error(\n    message: string,\n    error?: Error | string,\n    context?: LogContext,\n    metadata?: Record<string, any>\n  ): void {\n    const errorData = typeof error === 'string' ? new Error(error) : error;\n\n    this.logger.error(message, {\n      context,\n      metadata,\n      error: errorData ? {\n        message: errorData.message,\n        stack: errorData.stack,\n        code: (errorData as any).code,\n      } : undefined,\n    });\n\n    // Send to Sentry if enabled\n    if (this.sentryEnabled && errorData) {\n      Sentry.captureException(errorData, {\n        tags: {\n          service: 'education-revenue-engine',\n        },\n        contexts: {\n          custom: context,\n        },\n        extra: metadata,\n      });\n    }\n  }\n\n  /**\n   * Log debug level message\n   */\n  debug(message: string, context?: LogContext, metadata?: Record<string, any>): void {\n    this.logger.debug(message, {\n      context,\n      metadata,\n    });\n  }\n\n  /**\n   * Log HTTP request\n   */\n  logHttpRequest(\n    method: string,\n    path: string,\n    statusCode: number,\n    duration: number,\n    context?: LogContext\n  ): void {\n    this.info(`HTTP ${method} ${path} ${statusCode}`, context, {\n      method,\n      path,\n      statusCode,\n      duration,\n    });\n  }\n\n  /**\n   * Log database operation\n   */\n  logDbOperation(\n    operation: string,\n    table: string,\n    duration: number,\n    rowsAffected?: number,\n    context?: LogContext\n  ): void {\n    this.debug(`DB ${operation} on ${table}`, context, {\n      operation,\n      table,\n      duration,\n      rowsAffected,\n    });\n  }\n\n  /**\n   * Log AI engine operation\n   */\n  logAiOperation(\n    engine: string,\n    operation: string,\n    duration: number,\n    status: 'success' | 'error',\n    context?: LogContext\n  ): void {\n    const level = status === 'error' ? 'warn' : 'debug';\n    const logFn = level === 'error' ? this.error.bind(this) : this.debug.bind(this);\n\n    logFn(`AI ${engine} ${operation} ${status}`, context, {\n      engine,\n      operation,\n      duration,\n      status,\n    });\n  }\n\n  /**\n   * Log business event\n   */\n  logBusinessEvent(\n    eventType: string,\n    eventData: Record<string, any>,\n    context?: LogContext\n  ): void {\n    this.info(`Business Event: ${eventType}`, context, eventData);\n  }\n\n  /**\n   * Create a child logger with additional context\n   */\n  createChildLogger(context: LogContext): ChildLogger {\n    return new ChildLogger(this, context);\n  }\n}\n\n/**\n * Child logger with pre-filled context\n */\nclass ChildLogger {\n  constructor(private parent: StructuredLogger, private context: LogContext) {}\n\n  info(message: string, metadata?: Record<string, any>): void {\n    this.parent.info(message, this.context, metadata);\n  }\n\n  warn(message: string, metadata?: Record<string, any>): void {\n    this.parent.warn(message, this.context, metadata);\n  }\n\n  error(message: string, error?: Error | string, metadata?: Record<string, any>): void {\n    this.parent.error(message, error, this.context, metadata);\n  }\n\n  debug(message: string, metadata?: Record<string, any>): void {\n    this.parent.debug(message, this.context, metadata);\n  }\n\n  logHttpRequest(\n    method: string,\n    path: string,\n    statusCode: number,\n    duration: number\n  ): void {\n    this.parent.logHttpRequest(method, path, statusCode, duration, this.context);\n  }\n\n  logDbOperation(\n    operation: string,\n    table: string,\n    duration: number,\n    rowsAffected?: number\n  ): void {\n    this.parent.logDbOperation(operation, table, duration, rowsAffected, this.context);\n  }\n\n  logAiOperation(\n    engine: string,\n    operation: string,\n    duration: number,\n    status: 'success' | 'error'\n  ): void {\n    this.parent.logAiOperation(engine, operation, duration, status, this.context);\n  }\n\n  logBusinessEvent(eventType: string, eventData: Record<string, any>): void {\n    this.parent.logBusinessEvent(eventType, eventData, this.context);\n  }\n}\n\n// Export singleton instance\nexport const structuredLogger = new StructuredLogger();\nexport { ChildLogger };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}