{"version":3,"names":["cov_119voi0qxp","actualCoverage","EventEmitter","crypto","SecretsManagementService","secrets","s","Map","rotationInterval","accessLog","constructor","config","f","initialize","logAccess","provider","rotationIntervalDays","b","startSecretRotationScheduler","storeSecret","name","value","options","trim","length","Error","encryptedValue","encryptSecret","secretConfig","createdAt","Date","rotatedAt","rotationPolicy","accessControl","metadata","expiresAt","set","emit","error","String","getSecret","accessor","get","reason","hasAccess","checkAccess","decryptedValue","decryptSecret","rotateSecret","newValue","deleteSecret","has","delete","intervalMs","setInterval","entries","enabled","daysSinceRotation","now","getTime","intervalDays","generateSecureValue","allowedServices","includes","allowedUsers","key","encryptionKey","iv","randomBytes","cipher","createCipheriv","scryptSync","encrypted","update","final","toString","ivHex","split","Buffer","from","decipher","createDecipheriv","decrypted","secretName","action","success","details","logEntry","timestamp","push","slice","getAccessLog","filter","logs","log","since","destroy","clearInterval","removeAllListeners","secretsManagementService","initializeSecretsManagement","getSecretsManagementService"],"sources":["secrets-management.ts"],"sourcesContent":["/**\n * Centralized Secrets Management Service\n * Implements HashiCorp Vault or AWS Secrets Manager integration\n * Handles secret storage, rotation, and access control\n */\n\nimport { EventEmitter } from 'events';\nimport crypto from 'crypto';\n\ninterface SecretConfig {\n  name: string;\n  value: string;\n  createdAt: Date;\n  rotatedAt: Date;\n  expiresAt?: Date;\n  rotationPolicy?: {\n    enabled: boolean;\n    intervalDays: number;\n  };\n  accessControl?: {\n    allowedServices: string[];\n    allowedUsers: string[];\n  };\n  metadata?: Record<string, any>;\n}\n\ninterface SecretAccessLog {\n  timestamp: Date;\n  secretName: string;\n  action: 'read' | 'write' | 'rotate' | 'delete';\n  accessor: string;\n  success: boolean;\n  details?: any;\n}\n\n/**\n * Secrets Management Service\n * Provides centralized secret management with rotation and audit logging\n */\nexport class SecretsManagementService extends EventEmitter {\n  private secrets: Map<string, SecretConfig> = new Map();\n  private rotationInterval: NodeJS.Timer | null = null;\n  private accessLog: SecretAccessLog[] = [];\n\n  constructor(private config: {\n    provider: 'vault' | 'aws-secrets-manager' | 'local';\n    vaultAddr?: string;\n    vaultToken?: string;\n    awsRegion?: string;\n    rotationIntervalDays?: number;\n    encryptionKey?: string;\n  }) {\n    super();\n    this.initialize();\n  }\n\n  /**\n   * Initialize secrets management service\n   */\n  private initialize(): void {\n    this.logAccess('SERVICE_INITIALIZED', 'system', 'write', true, {\n      provider: this.config.provider\n    });\n\n    // Start secret rotation scheduler\n    if (this.config.rotationIntervalDays) {\n      this.startSecretRotationScheduler();\n    }\n  }\n\n  /**\n   * Store a secret\n   */\n  async storeSecret(\n    name: string,\n    value: string,\n    options?: {\n      rotationPolicy?: { enabled: boolean; intervalDays: number };\n      accessControl?: { allowedServices: string[]; allowedUsers: string[] };\n      metadata?: Record<string, any>;\n      expiresAt?: Date;\n    }\n  ): Promise<SecretConfig> {\n    try {\n      // Validate secret name\n      if (!name || name.trim().length === 0) {\n        throw new Error('Secret name cannot be empty');\n      }\n\n      // Validate secret value\n      if (!value || value.trim().length === 0) {\n        throw new Error('Secret value cannot be empty');\n      }\n\n      // Encrypt secret value\n      const encryptedValue = this.encryptSecret(value);\n\n      const secretConfig: SecretConfig = {\n        name,\n        value: encryptedValue,\n        createdAt: new Date(),\n        rotatedAt: new Date(),\n        rotationPolicy: options?.rotationPolicy,\n        accessControl: options?.accessControl,\n        metadata: options?.metadata,\n        expiresAt: options?.expiresAt\n      };\n\n      this.secrets.set(name, secretConfig);\n      this.logAccess(name, 'system', 'write', true, { metadata: options?.metadata });\n      this.emit('secret:stored', { name, metadata: options?.metadata });\n\n      return secretConfig;\n    } catch (error) {\n      this.logAccess(name, 'system', 'write', false, { error: String(error) });\n      throw new Error(`Failed to store secret: ${error}`);\n    }\n  }\n\n  /**\n   * Retrieve a secret\n   */\n  async getSecret(name: string, accessor: string = 'system'): Promise<string> {\n    try {\n      const secretConfig = this.secrets.get(name);\n      if (!secretConfig) {\n        this.logAccess(name, accessor, 'read', false, { reason: 'Secret not found' });\n        throw new Error(`Secret not found: ${name}`);\n      }\n\n      // Check access control\n      if (secretConfig.accessControl) {\n        const hasAccess = this.checkAccess(accessor, secretConfig.accessControl);\n        if (!hasAccess) {\n          this.logAccess(name, accessor, 'read', false, { reason: 'Access denied' });\n          throw new Error(`Access denied to secret: ${name}`);\n        }\n      }\n\n      // Check expiration\n      if (secretConfig.expiresAt && secretConfig.expiresAt < new Date()) {\n        this.logAccess(name, accessor, 'read', false, { reason: 'Secret expired' });\n        throw new Error(`Secret has expired: ${name}`);\n      }\n\n      // Decrypt secret value\n      const decryptedValue = this.decryptSecret(secretConfig.value);\n      this.logAccess(name, accessor, 'read', true);\n      this.emit('secret:accessed', { name, accessor });\n\n      return decryptedValue;\n    } catch (error) {\n      this.logAccess(name, accessor, 'read', false, { error: String(error) });\n      throw new Error(`Failed to retrieve secret: ${error}`);\n    }\n  }\n\n  /**\n   * Rotate a secret\n   */\n  async rotateSecret(name: string, newValue: string): Promise<SecretConfig> {\n    try {\n      const secretConfig = this.secrets.get(name);\n      if (!secretConfig) {\n        throw new Error(`Secret not found: ${name}`);\n      }\n\n      // Validate new value\n      if (!newValue || newValue.trim().length === 0) {\n        throw new Error('New secret value cannot be empty');\n      }\n\n      // Encrypt new value\n      const encryptedValue = this.encryptSecret(newValue);\n\n      // Update secret\n      secretConfig.value = encryptedValue;\n      secretConfig.rotatedAt = new Date();\n\n      this.logAccess(name, 'system', 'rotate', true);\n      this.emit('secret:rotated', { name });\n\n      return secretConfig;\n    } catch (error) {\n      this.logAccess(name, 'system', 'rotate', false, { error: String(error) });\n      throw new Error(`Failed to rotate secret: ${error}`);\n    }\n  }\n\n  /**\n   * Delete a secret\n   */\n  async deleteSecret(name: string): Promise<void> {\n    try {\n      if (!this.secrets.has(name)) {\n        throw new Error(`Secret not found: ${name}`);\n      }\n\n      this.secrets.delete(name);\n      this.logAccess(name, 'system', 'delete', true);\n      this.emit('secret:deleted', { name });\n    } catch (error) {\n      this.logAccess(name, 'system', 'delete', false, { error: String(error) });\n      throw new Error(`Failed to delete secret: ${error}`);\n    }\n  }\n\n  /**\n   * Start automatic secret rotation scheduler\n   */\n  private startSecretRotationScheduler(): void {\n    const intervalMs = (this.config.rotationIntervalDays || 30) * 24 * 60 * 60 * 1000;\n\n    this.rotationInterval = setInterval(async () => {\n      try {\n        for (const [name, secretConfig] of this.secrets.entries()) {\n          if (secretConfig.rotationPolicy?.enabled) {\n            const daysSinceRotation = (Date.now() - secretConfig.rotatedAt.getTime()) / (24 * 60 * 60 * 1000);\n\n            if (daysSinceRotation >= secretConfig.rotationPolicy.intervalDays) {\n              // Generate new secret value\n              const newValue = this.generateSecureValue();\n              await this.rotateSecret(name, newValue);\n            }\n          }\n        }\n      } catch (error) {\n        this.logAccess('system', 'system', 'rotate', false, { error: String(error) });\n      }\n    }, intervalMs);\n  }\n\n  /**\n   * Check access control\n   */\n  private checkAccess(accessor: string, accessControl: SecretConfig['accessControl']): boolean {\n    if (!accessControl) {return true;}\n\n    if (accessControl.allowedServices && !accessControl.allowedServices.includes(accessor)) {\n      return false;\n    }\n\n    if (accessControl.allowedUsers && !accessControl.allowedUsers.includes(accessor)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Encrypt secret value\n   */\n  private encryptSecret(value: string): string {\n    try {\n      const key = this.config.encryptionKey || 'default-encryption-key';\n      const iv = crypto.randomBytes(16);\n      const cipher = crypto.createCipheriv('aes-256-cbc', crypto.scryptSync(key, 'salt', 32), iv);\n\n      let encrypted = cipher.update(value, 'utf8', 'hex');\n      encrypted += cipher.final('hex');\n\n      return `${iv.toString('hex')}:${encrypted}`;\n    } catch (error) {\n      throw new Error(`Encryption failed: ${error}`);\n    }\n  }\n\n  /**\n   * Decrypt secret value\n   */\n  private decryptSecret(encryptedValue: string): string {\n    try {\n      const key = this.config.encryptionKey || 'default-encryption-key';\n      const [ivHex, encrypted] = encryptedValue.split(':');\n      const iv = Buffer.from(ivHex, 'hex');\n      const decipher = crypto.createDecipheriv('aes-256-cbc', crypto.scryptSync(key, 'salt', 32), iv);\n\n      let decrypted = decipher.update(encrypted, 'hex', 'utf8');\n      decrypted += decipher.final('utf8');\n\n      return decrypted;\n    } catch (error) {\n      throw new Error(`Decryption failed: ${error}`);\n    }\n  }\n\n  /**\n   * Generate secure random value\n   */\n  private generateSecureValue(): string {\n    return crypto.randomBytes(32).toString('hex');\n  }\n\n  /**\n   * Log access event\n   */\n  private logAccess(\n    secretName: string,\n    accessor: string,\n    action: 'read' | 'write' | 'rotate' | 'delete',\n    success: boolean,\n    details?: any\n  ): void {\n    const logEntry: SecretAccessLog = {\n      timestamp: new Date(),\n      secretName,\n      action,\n      accessor,\n      success,\n      details\n    };\n\n    this.accessLog.push(logEntry);\n    this.emit('access:log', logEntry);\n\n    // Keep only last 10000 entries in memory\n    if (this.accessLog.length > 10000) {\n      this.accessLog = this.accessLog.slice(-10000);\n    }\n  }\n\n  /**\n   * Get access log\n   */\n  getAccessLog(filter?: {\n    secretName?: string;\n    accessor?: string;\n    action?: string;\n    since?: Date;\n  }): SecretAccessLog[] {\n    let logs = this.accessLog;\n\n    if (filter?.secretName) {\n      logs = logs.filter(log => log.secretName === filter.secretName);\n    }\n\n    if (filter?.accessor) {\n      logs = logs.filter(log => log.accessor === filter.accessor);\n    }\n\n    if (filter?.action) {\n      logs = logs.filter(log => log.action === filter.action);\n    }\n\n    if (filter?.since) {\n      logs = logs.filter(log => log.timestamp >= filter.since!);\n    }\n\n    return logs;\n  }\n\n  /**\n   * Cleanup resources\n   */\n  destroy(): void {\n    if (this.rotationInterval) {\n      clearInterval(this.rotationInterval);\n    }\n    this.removeAllListeners();\n  }\n}\n\n// Export singleton instance\nlet secretsManagementService: SecretsManagementService | null = null;\n\nexport function initializeSecretsManagement(config: {\n  provider: 'vault' | 'aws-secrets-manager' | 'local';\n  vaultAddr?: string;\n  vaultToken?: string;\n  awsRegion?: string;\n  rotationIntervalDays?: number;\n  encryptionKey?: string;\n}): SecretsManagementService {\n  if (!secretsManagementService) {\n    secretsManagementService = new SecretsManagementService(config);\n  }\n  return secretsManagementService;\n}\n\nexport function getSecretsManagementService(): SecretsManagementService {\n  if (!secretsManagementService) {\n    throw new Error('Secrets Management Service not initialized');\n  }\n  return secretsManagementService;\n}\n\nexport default SecretsManagementService;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}