{"version":3,"names":["cov_89lxhnkiv","actualCoverage","CitadelService","CITADEL_PERCENTAGE","s","PROVIDER_PERCENTAGE","ALLOCATION_PHYSICAL_INFRA","ALLOCATION_SCHOLARSHIPS","ALLOCATION_PUBLIC_GOODS","ALLOCATION_GRANTS","constructor","f","calculateRevenueSplit","amount","citadelAmount","providerAmount","allocateFunds","scholarships","grants","publicGoods","collectRevenue","source","split","console","log","allocation"],"sources":["citadel-service.ts"],"sourcesContent":["import { ethers } from 'ethers';\n\nexport class CitadelService {\n    private static readonly CITADEL_PERCENTAGE = 0.30; // 30% (Deep Reallocation)\n    private static readonly PROVIDER_PERCENTAGE = 0.70; // 70%\n\n    // Allocation percentages for the Citadel Fund\n    private static readonly ALLOCATION_PHYSICAL_INFRA = 0.40; // Citadel, Campuses, BuildSpaces\n    private static readonly ALLOCATION_SCHOLARSHIPS = 0.30;\n    private static readonly ALLOCATION_PUBLIC_GOODS = 0.20;\n    private static readonly ALLOCATION_GRANTS = 0.10;\n\n    constructor() { }\n\n    /**\n     * Calculates the split of revenue between the provider and the Citadel Fund.\n     * @param amount The total revenue amount.\n     * @returns An object containing the split amounts.\n     */\n    calculateRevenueSplit(amount: number): { providerAmount: number; citadelAmount: number } {\n        const citadelAmount = amount * CitadelService.CITADEL_PERCENTAGE;\n        const providerAmount = amount * CitadelService.PROVIDER_PERCENTAGE;\n        return { providerAmount, citadelAmount };\n    }\n\n    /**\n     * Allocates the Citadel Fund's portion into specific categories.\n     * @param citadelAmount The amount collected for the Citadel Fund.\n     * @returns An object containing the allocated amounts.\n     */\n    allocateFunds(citadelAmount: number): { scholarships: number; grants: number; publicGoods: number } {\n        return {\n            scholarships: citadelAmount * CitadelService.ALLOCATION_SCHOLARSHIPS,\n            grants: citadelAmount * CitadelService.ALLOCATION_GRANTS,\n            publicGoods: citadelAmount * CitadelService.ALLOCATION_PUBLIC_GOODS,\n        };\n    }\n\n    /**\n     * Simulates the collection of revenue. In a real scenario, this would interact with the blockchain.\n     * @param amount Total revenue amount.\n     * @param source Source of the revenue (e.g., 'Marketplace Transaction').\n     */\n    async collectRevenue(amount: number, source: string): Promise<void> {\n        const split = this.calculateRevenueSplit(amount);\n        console.log(`[CitadelFund] Collecting revenue from ${source}: Total=${amount}`);\n        console.log(`[CitadelFund] Provider receives: ${split.providerAmount}`);\n        console.log(`[CitadelFund] Citadel receives: ${split.citadelAmount}`);\n\n        const allocation = this.allocateFunds(split.citadelAmount);\n        console.log(`[CitadelFund] Allocating funds:`);\n        console.log(`  - Scholarships: ${allocation.scholarships}`);\n        console.log(`  - Grants: ${allocation.grants}`);\n        console.log(`  - Public Goods: ${allocation.publicGoods}`);\n\n        // TODO: Emit blockchain event or call smart contract\n    }\n}\n"],"mappings":"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","ignoreList":[]}