{"version":3,"names":["cov_1uujbvv0ge","actualCoverage","generateUUID","AppError","legalService","auditService","crypto","signingSessions","s","Map","signatureCaptures","SigningService","createSigningSession","documentId","userId","f","document","getDocumentById","status","b","sessionId","now","Date","expiresAt","getTime","session","id","createdAt","set","logDocumentAction","getSigningSession","get","captureSignature","ipAddress","userAgent","timestamp","signatureHash","generateSignatureHashWithContext","content","validateSignatureHash","captureId","capture","signatureData","algorithm","hashLength","verified","signatureTimestamp","substring","signDocument","signedDocument","signedAt","getSigningStatus","timeRemaining","Math","max","verifySignature","valid","signerId","getSigningHistory","auditTrail","getDocumentAuditTrail","auditEntries","extendSigningSession","cancelSigningSession","delete","getUserSigningSessions","Array","from","values","filter","sort","a","getSigningStats","allSessions","pendingSessions","length","signedSessions","expiredSessions","totalSigningTime","signedCount","forEach","averageSigningTime","totalSessions","timestampStr","toISOString","data","createHash","update","digest","generateSignatureHash","hash","test","verifySignatureIntegrity","verificationTimestamp","details","hashesMatch","getSignatureCapture","getDocumentSignatureCaptures","c","getSignedDocumentAuditTrail","sessions","enrichedTrail","map","entry","find","signatureVerification","isSigned","signedBy","exportAuditTrailAsCSV","trail","headers","rows","action","csv","row","cell","join","validateSessionSecurity","issues","recommendations","push","isSecure","cleanupExpiredSessions","deletedCount","entries","undefined","console","log","getSigningStatistics","allCaptures","sessionsWithIPLogging","sessionsWithUserAgent","sessionsWithTimestamp","totalSignatureCaptures","securityMetrics","signingService"],"sources":["signing.service.ts"],"sourcesContent":["import { generateUUID } from '../utils/uuid.js';\nimport { LegalDocument, DocumentSigningRequest, SignatureData } from '../types/index.js';\nimport { AppError } from '../middleware/errorHandler.js';\nimport { legalService } from './legal.service.js';\nimport { auditService } from './audit.service.js';\nimport crypto from 'crypto';\n\n// Mock database for signing sessions\ninterface SigningSession {\n  id: string;\n  documentId: string;\n  userId: string;\n  status: 'pending' | 'signed' | 'expired';\n  createdAt: Date;\n  expiresAt: Date;\n  signedAt?: Date;\n  ipAddress?: string;\n  userAgent?: string;\n  signatureHash?: string;\n  signatureTimestamp?: Date;\n}\n\ninterface SignatureCapture {\n  sessionId: string;\n  documentId: string;\n  userId: string;\n  signatureHash: string;\n  timestamp: Date;\n  ipAddress: string;\n  userAgent: string;\n  signatureData: {\n    algorithm: string;\n    hashLength: number;\n    verified: boolean;\n  };\n}\n\nconst signingSessions: Map<string, SigningSession> = new Map();\nconst signatureCaptures: Map<string, SignatureCapture> = new Map();\n\nexport class SigningService {\n  /**\n   * Create signing session\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async createSigningSession(documentId: string, userId: string): Promise<SigningSession> {\n    // Verify document exists\n    const document = await legalService.getDocumentById(documentId, userId);\n\n    if (document.status === 'signed') {\n      throw new AppError(400, 'Document is already signed');\n    }\n\n    if (document.status === 'archived') {\n      throw new AppError(400, 'Cannot sign archived document');\n    }\n\n    const sessionId = generateUUID();\n    const now = new Date();\n    const expiresAt = new Date(now.getTime() + 24 * 60 * 60 * 1000); // 24 hours\n\n    const session: SigningSession = {\n      id: sessionId,\n      documentId,\n      userId,\n      status: 'pending',\n      createdAt: now,\n      expiresAt,\n    };\n\n    signingSessions.set(sessionId, session);\n\n    // Log signing session creation\n    await auditService.logDocumentAction(\n      documentId,\n      'signing_session_created',\n      `Signing session created for user ${userId}`,\n      userId\n    );\n\n    return session;\n  }\n\n  /**\n   * Get signing session\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getSigningSession(sessionId: string): Promise<SigningSession> {\n    const session = signingSessions.get(sessionId);\n\n    if (!session) {\n      throw new AppError(404, 'Signing session not found');\n    }\n\n    // Check if session has expired\n    if (new Date() > session.expiresAt) {\n      session.status = 'expired';\n      signingSessions.set(sessionId, session);\n      throw new AppError(400, 'Signing session has expired');\n    }\n\n    return session;\n  }\n\n  /**\n   * Capture signature with timestamp and IP logging\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async captureSignature(\n    sessionId: string,\n    userId: string,\n    ipAddress: string,\n    userAgent: string\n  ): Promise<SignatureCapture> {\n    const session = await this.getSigningSession(sessionId);\n\n    if (session.userId !== userId) {\n      throw new AppError(403, 'Unauthorized to sign this document');\n    }\n\n    if (session.status !== 'pending') {\n      throw new AppError(400, 'Signing session is not pending');\n    }\n\n    // Get document\n    const document = await legalService.getDocumentById(session.documentId, userId);\n\n    // Generate signature hash with timestamp and IP\n    const timestamp = new Date();\n    const signatureHash = this.generateSignatureHashWithContext(\n      document.content,\n      userId,\n      ipAddress,\n      timestamp\n    );\n\n    // Validate signature hash format\n    if (!this.validateSignatureHash(signatureHash)) {\n      throw new AppError(500, 'Failed to generate valid signature hash');\n    }\n\n    // Create signature capture record\n    const captureId = generateUUID();\n    const capture: SignatureCapture = {\n      sessionId,\n      documentId: session.documentId,\n      userId,\n      signatureHash,\n      timestamp,\n      ipAddress,\n      userAgent,\n      signatureData: {\n        algorithm: 'SHA256',\n        hashLength: 64,\n        verified: true,\n      },\n    };\n\n    signatureCaptures.set(captureId, capture);\n\n    // Update session with signature info\n    session.signatureHash = signatureHash;\n    session.signatureTimestamp = timestamp;\n    session.ipAddress = ipAddress;\n    session.userAgent = userAgent;\n    signingSessions.set(sessionId, session);\n\n    // Log signature capture\n    await auditService.logDocumentAction(\n      session.documentId,\n      'signature_captured',\n      `Signature captured for document - Hash: ${signatureHash.substring(0, 16)}... IP: ${ipAddress}`,\n      userId,\n      ipAddress\n    );\n\n    return capture;\n  }\n\n  /**\n   * Sign document\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async signDocument(\n    sessionId: string,\n    userId: string,\n    ipAddress: string,\n    userAgent: string\n  ): Promise<LegalDocument> {\n    const session = await this.getSigningSession(sessionId);\n\n    if (session.userId !== userId) {\n      throw new AppError(403, 'Unauthorized to sign this document');\n    }\n\n    if (session.status !== 'pending') {\n      throw new AppError(400, 'Signing session is not pending');\n    }\n\n    // Get document\n    const document = await legalService.getDocumentById(session.documentId, userId);\n\n    // Generate signature hash\n    const signatureHash = this.generateSignatureHashWithContext(\n      document.content,\n      userId,\n      ipAddress,\n      new Date()\n    );\n\n    // Sign document\n    const signedDocument = await legalService.signDocument(\n      session.documentId,\n      userId,\n      {\n        documentId: session.documentId,\n        signatureHash,\n      },\n      ipAddress,\n      userAgent\n    );\n\n    // Update session\n    session.status = 'signed';\n    session.signedAt = new Date();\n    session.ipAddress = ipAddress;\n    session.userAgent = userAgent;\n    session.signatureHash = signatureHash;\n    signingSessions.set(sessionId, session);\n\n    // Log signing\n    await auditService.logDocumentAction(\n      session.documentId,\n      'document_signed',\n      `Document signed by user ${userId} from IP ${ipAddress}`,\n      userId,\n      ipAddress\n    );\n\n    return signedDocument;\n  }\n\n  /**\n   * Get signing status\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getSigningStatus(sessionId: string): Promise<{\n    sessionId: string;\n    status: string;\n    documentId: string;\n    createdAt: Date;\n    expiresAt: Date;\n    signedAt?: Date;\n    timeRemaining: number;\n  }> {\n    const session = await this.getSigningSession(sessionId);\n\n    const now = new Date();\n    const timeRemaining = Math.max(0, session.expiresAt.getTime() - now.getTime());\n\n    return {\n      sessionId,\n      status: session.status,\n      documentId: session.documentId,\n      createdAt: session.createdAt,\n      expiresAt: session.expiresAt,\n      signedAt: session.signedAt,\n      timeRemaining,\n    };\n  }\n\n  /**\n   * Verify signature\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async verifySignature(documentId: string, userId: string): Promise<{\n    valid: boolean;\n    signedAt?: Date;\n    signerId?: string;\n    ipAddress?: string;\n    userAgent?: string;\n  }> {\n    const document = await legalService.getDocumentById(documentId, userId);\n\n    if (document.status !== 'signed') {\n      return {\n        valid: false,\n      };\n    }\n\n    return {\n      valid: true,\n      signedAt: document.signedAt,\n      signerId: document.signerId,\n      ipAddress: document.ipAddress,\n      userAgent: document.userAgent,\n    };\n  }\n\n  /**\n   * Get signing history for a document\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getSigningHistory(documentId: string, userId: string): Promise<\n    Array<{\n      action: string;\n      timestamp: Date;\n      userId?: string;\n      ipAddress?: string;\n      details: string;\n    }>\n  > {\n    const auditTrail = await legalService.getDocumentAuditTrail(documentId, userId);\n    return auditTrail.auditEntries;\n  }\n\n  /**\n   * Extend signing session\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async extendSigningSession(sessionId: string, userId: string): Promise<SigningSession> {\n    const session = await this.getSigningSession(sessionId);\n\n    if (session.userId !== userId) {\n      throw new AppError(403, 'Unauthorized to extend this session');\n    }\n\n    if (session.status !== 'pending') {\n      throw new AppError(400, 'Can only extend pending sessions');\n    }\n\n    // Extend by 24 hours\n    session.expiresAt = new Date(session.expiresAt.getTime() + 24 * 60 * 60 * 1000);\n    signingSessions.set(sessionId, session);\n\n    // Log extension\n    await auditService.logDocumentAction(\n      session.documentId,\n      'signing_session_extended',\n      `Signing session extended for user ${userId}`,\n      userId\n    );\n\n    return session;\n  }\n\n  /**\n   * Cancel signing session\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async cancelSigningSession(sessionId: string, userId: string): Promise<void> {\n    const session = await this.getSigningSession(sessionId);\n\n    if (session.userId !== userId) {\n      throw new AppError(403, 'Unauthorized to cancel this session');\n    }\n\n    signingSessions.delete(sessionId);\n\n    // Log cancellation\n    await auditService.logDocumentAction(\n      session.documentId,\n      'signing_session_cancelled',\n      `Signing session cancelled by user ${userId}`,\n      userId\n    );\n  }\n\n  /**\n   * Get all signing sessions for a user\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getUserSigningSessions(userId: string): Promise<SigningSession[]> {\n    return Array.from(signingSessions.values())\n      .filter((s) => s.userId === userId)\n      .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n  }\n\n  /**\n   * Get signing statistics\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getSigningStats(): Promise<{\n    totalSessions: number;\n    pendingSessions: number;\n    signedSessions: number;\n    expiredSessions: number;\n    averageSigningTime: number;\n  }> {\n    const allSessions = Array.from(signingSessions.values());\n\n    const pendingSessions = allSessions.filter((s) => s.status === 'pending').length;\n    const signedSessions = allSessions.filter((s) => s.status === 'signed').length;\n    const expiredSessions = allSessions.filter((s) => s.status === 'expired').length;\n\n    let totalSigningTime = 0;\n    let signedCount = 0;\n\n    allSessions.forEach((s) => {\n      if (s.status === 'signed' && s.signedAt) {\n        totalSigningTime += s.signedAt.getTime() - s.createdAt.getTime();\n        signedCount++;\n      }\n    });\n\n    const averageSigningTime = signedCount > 0 ? totalSigningTime / signedCount : 0;\n\n    return {\n      totalSessions: allSessions.length,\n      pendingSessions,\n      signedSessions,\n      expiredSessions,\n      averageSigningTime,\n    };\n  }\n\n  /**\n   * Generate signature hash with context (timestamp and IP)\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  private generateSignatureHashWithContext(\n    content: string,\n    userId: string,\n    ipAddress: string,\n    timestamp: Date\n  ): string {\n    const timestampStr = timestamp.toISOString();\n    const data = `${content}${userId}${ipAddress}${timestampStr}`;\n    return crypto.createHash('sha256').update(data).digest('hex');\n  }\n\n  /**\n   * Generate signature hash\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  private generateSignatureHash(content: string, userId: string, ipAddress: string): string {\n    const timestamp = new Date().toISOString();\n    const data = `${content}${userId}${ipAddress}${timestamp}`;\n    return crypto.createHash('sha256').update(data).digest('hex');\n  }\n\n  /**\n   * Validate signature hash\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  validateSignatureHash(hash: string): boolean {\n    // Validate hash format (SHA256 produces 64 character hex string)\n    return /^[a-f0-9]{64}$/i.test(hash);\n  }\n\n  /**\n   * Verify signature integrity\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async verifySignatureIntegrity(\n    documentId: string,\n    userId: string,\n    signatureHash: string\n  ): Promise<{\n    valid: boolean;\n    documentId: string;\n    signatureHash: string;\n    verificationTimestamp: Date;\n    details: string;\n  }> {\n    const document = await legalService.getDocumentById(documentId, userId);\n\n    if (document.status !== 'signed') {\n      return {\n        valid: false,\n        documentId,\n        signatureHash,\n        verificationTimestamp: new Date(),\n        details: 'Document is not signed',\n      };\n    }\n\n    if (!document.signatureHash) {\n      return {\n        valid: false,\n        documentId,\n        signatureHash,\n        verificationTimestamp: new Date(),\n        details: 'Document has no signature hash',\n      };\n    }\n\n    const hashesMatch = document.signatureHash === signatureHash;\n\n    // Log verification\n    await auditService.logDocumentAction(\n      documentId,\n      'signature_verified',\n      `Signature verification ${hashesMatch ? 'successful' : 'failed'} for document`,\n      userId\n    );\n\n    return {\n      valid: hashesMatch,\n      documentId,\n      signatureHash,\n      verificationTimestamp: new Date(),\n      details: hashesMatch ? 'Signature is valid' : 'Signature hash mismatch',\n    };\n  }\n\n  /**\n   * Get signature capture details\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getSignatureCapture(captureId: string): Promise<SignatureCapture> {\n    const capture = signatureCaptures.get(captureId);\n\n    if (!capture) {\n      throw new AppError(404, 'Signature capture not found');\n    }\n\n    return capture;\n  }\n\n  /**\n   * Get all signature captures for a document\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getDocumentSignatureCaptures(documentId: string): Promise<SignatureCapture[]> {\n    return Array.from(signatureCaptures.values())\n      .filter((c) => c.documentId === documentId)\n      .sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\n  }\n\n  /**\n   * Get complete audit trail for signed document\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getSignedDocumentAuditTrail(documentId: string, userId: string): Promise<{\n    documentId: string;\n    auditTrail: Array<{\n      action: string;\n      timestamp: Date;\n      userId?: string;\n      ipAddress?: string;\n      details: string;\n      signatureHash?: string;\n    }>;\n    signatureVerification: {\n      isSigned: boolean;\n      signedAt?: Date;\n      signedBy?: string;\n      signatureHash?: string;\n      ipAddress?: string;\n      userAgent?: string;\n    };\n  }> {\n    const document = await legalService.getDocumentById(documentId, userId);\n    const auditTrail = await legalService.getDocumentAuditTrail(documentId, userId);\n\n    // Get all sessions for this document\n    const sessions = Array.from(signingSessions.values()).filter(\n      (s) => s.documentId === documentId\n    );\n\n    // Build comprehensive audit trail\n    const enrichedTrail = auditTrail.auditEntries.map((entry) => ({\n      ...entry,\n      signatureHash: sessions.find((s) => s.status === 'signed')?.signatureHash,\n    }));\n\n    return {\n      documentId,\n      auditTrail: enrichedTrail,\n      signatureVerification: {\n        isSigned: document.status === 'signed',\n        signedAt: document.signedAt,\n        signedBy: document.signerId,\n        signatureHash: document.signatureHash,\n        ipAddress: document.ipAddress,\n        userAgent: document.userAgent,\n      },\n    };\n  }\n\n  /**\n   * Export audit trail as CSV\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async exportAuditTrailAsCSV(documentId: string, userId: string): Promise<string> {\n    const trail = await this.getSignedDocumentAuditTrail(documentId, userId);\n\n    const headers = ['Action', 'Timestamp', 'User ID', 'IP Address', 'Details'];\n    const rows = trail.auditTrail.map((entry) => [\n      entry.action,\n      entry.timestamp.toISOString(),\n      entry.userId || 'N/A',\n      entry.ipAddress || 'N/A',\n      entry.details,\n    ]);\n\n    const csv = [headers, ...rows].map((row) => row.map((cell) => `\"${cell}\"`).join(',')).join('\\n');\n\n    return csv;\n  }\n\n  /**\n   * Validate signing session security\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async validateSessionSecurity(sessionId: string): Promise<{\n    sessionId: string;\n    isSecure: boolean;\n    issues: string[];\n    recommendations: string[];\n  }> {\n    const session = await this.getSigningSession(sessionId);\n    const issues: string[] = [];\n    const recommendations: string[] = [];\n\n    // Check if session is expired\n    if (new Date() > session.expiresAt) {\n      issues.push('Session has expired');\n      recommendations.push('Create a new signing session');\n    }\n\n    // Check if session is pending\n    if (session.status !== 'pending' && session.status !== 'signed') {\n      issues.push(`Session status is ${session.status}`);\n      recommendations.push('Verify session status before signing');\n    }\n\n    // Check if IP address is captured\n    if (!session.ipAddress) {\n      issues.push('IP address not captured');\n      recommendations.push('Ensure IP address is logged during signing');\n    }\n\n    // Check if user agent is captured\n    if (!session.userAgent) {\n      issues.push('User agent not captured');\n      recommendations.push('Ensure user agent is logged during signing');\n    }\n\n    return {\n      sessionId,\n      isSecure: issues.length === 0,\n      issues,\n      recommendations,\n    };\n  }\n\n  /**\n   * Clean up expired sessions\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async cleanupExpiredSessions(): Promise<number> {\n    const now = new Date();\n    let deletedCount = 0;\n\n    for (const [id, session] of signingSessions.entries()) {\n      if (now > session.expiresAt && session.status === 'pending') {\n        signingSessions.delete(id);\n        deletedCount++;\n\n        // Log cleanup\n        await auditService.logDocumentAction(\n          session.documentId,\n          'signing_session_expired_cleanup',\n          `Expired signing session cleaned up`,\n          undefined,\n          session.ipAddress\n        );\n      }\n    }\n\n    console.log(`[Signing] Cleaned up ${deletedCount} expired signing sessions`);\n\n    return deletedCount;\n  }\n\n  /**\n   * Get signing statistics\n   * Requirements: 3.4, 3.5, 7.1\n   */\n  async getSigningStatistics(): Promise<{\n    totalSessions: number;\n    pendingSessions: number;\n    signedSessions: number;\n    expiredSessions: number;\n    averageSigningTime: number;\n    totalSignatureCaptures: number;\n    securityMetrics: {\n      sessionsWithIPLogging: number;\n      sessionsWithUserAgent: number;\n      sessionsWithTimestamp: number;\n    };\n  }> {\n    const allSessions = Array.from(signingSessions.values());\n    const allCaptures = Array.from(signatureCaptures.values());\n\n    const pendingSessions = allSessions.filter((s) => s.status === 'pending').length;\n    const signedSessions = allSessions.filter((s) => s.status === 'signed').length;\n    const expiredSessions = allSessions.filter((s) => s.status === 'expired').length;\n\n    let totalSigningTime = 0;\n    let signedCount = 0;\n\n    allSessions.forEach((s) => {\n      if (s.status === 'signed' && s.signedAt) {\n        totalSigningTime += s.signedAt.getTime() - s.createdAt.getTime();\n        signedCount++;\n      }\n    });\n\n    const averageSigningTime = signedCount > 0 ? totalSigningTime / signedCount : 0;\n\n    // Security metrics\n    const sessionsWithIPLogging = allSessions.filter((s) => s.ipAddress).length;\n    const sessionsWithUserAgent = allSessions.filter((s) => s.userAgent).length;\n    const sessionsWithTimestamp = allSessions.filter((s) => s.signatureTimestamp).length;\n\n    return {\n      totalSessions: allSessions.length,\n      pendingSessions,\n      signedSessions,\n      expiredSessions,\n      averageSigningTime,\n      totalSignatureCaptures: allCaptures.length,\n      securityMetrics: {\n        sessionsWithIPLogging,\n        sessionsWithUserAgent,\n        sessionsWithTimestamp,\n      },\n    };\n  }\n}\n\nexport const signingService = new SigningService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}