{"version":3,"names":["cov_1qs3c5fclb","actualCoverage","v4","uuidv4","kycProfiles","s","Map","amlChecks","transactionMonitoring","createKYCProfile","userId","profileData","f","existing","Array","from","values","find","p","b","Error","firstName","lastName","dateOfBirth","age","Date","getFullYear","profile","kycId","status","riskLevel","createdAt","updatedAt","set","runAMLChecks","getKYCProfile","profiles","verifyKYCProfile","verificationMethod","verifiedAt","rejectKYCProfile","reason","rejectionReason","checks","sanctionsCheck","runSanctionsCheck","push","pepCheck","runPEPCheck","adverseMediaCheck","runAdverseMediaCheck","check","checkId","checkType","isSanctioned","result","matched","matchedLists","riskScore","details","isPEP","hasAdverseMedia","monitorTransaction","amount","currency","type","monitoring","transactionId","flags","recentTransactions","filter","t","getTime","length","getAMLChecks","c","getComplianceStatus","kycStatus","amlStatus","allChecksPassed","every","map"],"sources":["kyc-service.ts"],"sourcesContent":["/**\n * KYC/AML Compliance Service\n * Know Your Customer and Anti-Money Laundering compliance\n */\n\nimport { v4 as uuidv4 } from 'uuid';\n\nexport interface KYCProfile {\n  userId: string;\n  kycId: string;\n  firstName: string;\n  lastName: string;\n  dateOfBirth: Date;\n  ssn: string; // Last 4 digits only\n  address: {\n    street: string;\n    city: string;\n    state: string;\n    zipCode: string;\n    country: string;\n  };\n  phoneNumber: string;\n  email: string;\n  status: 'pending' | 'verified' | 'rejected' | 'suspended';\n  verificationMethod: 'document' | 'selfie' | 'manual';\n  documentType?: 'passport' | 'drivers_license' | 'national_id';\n  documentNumber?: string;\n  verifiedAt?: Date;\n  rejectionReason?: string;\n  riskLevel: 'low' | 'medium' | 'high';\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface AMLCheck {\n  checkId: string;\n  userId: string;\n  kycId: string;\n  checkType: 'sanctions' | 'pep' | 'adverse_media' | 'transaction_monitoring';\n  status: 'pending' | 'passed' | 'failed' | 'review_required';\n  result?: {\n    matched: boolean;\n    matchedLists: string[];\n    riskScore: number;\n    details: string;\n  };\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface TransactionMonitoring {\n  transactionId: string;\n  userId: string;\n  amount: number;\n  currency: string;\n  type: 'deposit' | 'withdrawal' | 'transfer';\n  status: 'normal' | 'flagged' | 'blocked';\n  riskScore: number;\n  flags: string[];\n  createdAt: Date;\n}\n\n/**\n * In-memory storage (use database in production)\n */\nconst kycProfiles = new Map<string, KYCProfile>();\nconst amlChecks = new Map<string, AMLCheck>();\nconst transactionMonitoring = new Map<string, TransactionMonitoring>();\n\n/**\n * Create KYC profile\n */\nexport async function createKYCProfile(\n  userId: string,\n  profileData: Omit<KYCProfile, 'kycId' | 'status' | 'verifiedAt' | 'riskLevel' | 'createdAt' | 'updatedAt'>\n): Promise<KYCProfile> {\n  // Check if profile already exists\n  const existing = Array.from(kycProfiles.values()).find((p) => p.userId === userId);\n  if (existing) {\n    throw new Error('KYC profile already exists for this user');\n  }\n\n  // Validate required fields\n  if (!profileData.firstName || !profileData.lastName) {\n    throw new Error('First and last name are required');\n  }\n\n  if (!profileData.dateOfBirth) {\n    throw new Error('Date of birth is required');\n  }\n\n  // Validate age (must be 18+)\n  const age = new Date().getFullYear() - new Date(profileData.dateOfBirth).getFullYear();\n  if (age < 18) {\n    throw new Error('Must be 18 years or older');\n  }\n\n  // Create profile\n  const profile: KYCProfile = {\n    ...profileData,\n    userId,\n    kycId: uuidv4(),\n    status: 'pending',\n    riskLevel: 'medium',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  kycProfiles.set(profile.kycId, profile);\n\n  // Trigger AML checks\n  await runAMLChecks(profile);\n\n  return profile;\n}\n\n/**\n * Get KYC profile\n */\nexport function getKYCProfile(userId: string): KYCProfile | null {\n  const profiles = Array.from(kycProfiles.values());\n  return profiles.find((p) => p.userId === userId) || null;\n}\n\n/**\n * Verify KYC profile\n */\nexport async function verifyKYCProfile(\n  userId: string,\n  verificationMethod: 'document' | 'selfie' | 'manual'\n): Promise<KYCProfile> {\n  const profile = getKYCProfile(userId);\n  if (!profile) {\n    throw new Error('KYC profile not found');\n  }\n\n  if (profile.status === 'verified') {\n    throw new Error('Profile is already verified');\n  }\n\n  // In production, verify against government databases or third-party services\n  // For now, simulate verification\n  profile.status = 'verified';\n  profile.verificationMethod = verificationMethod;\n  profile.verifiedAt = new Date();\n  profile.riskLevel = 'low';\n  profile.updatedAt = new Date();\n\n  return profile;\n}\n\n/**\n * Reject KYC profile\n */\nexport async function rejectKYCProfile(userId: string, reason: string): Promise<KYCProfile> {\n  const profile = getKYCProfile(userId);\n  if (!profile) {\n    throw new Error('KYC profile not found');\n  }\n\n  profile.status = 'rejected';\n  profile.rejectionReason = reason;\n  profile.updatedAt = new Date();\n\n  return profile;\n}\n\n/**\n * Run AML checks\n */\nexport async function runAMLChecks(profile: KYCProfile): Promise<AMLCheck[]> {\n  const checks: AMLCheck[] = [];\n\n  // Sanctions check\n  const sanctionsCheck = await runSanctionsCheck(profile);\n  checks.push(sanctionsCheck);\n\n  // PEP check\n  const pepCheck = await runPEPCheck(profile);\n  checks.push(pepCheck);\n\n  // Adverse media check\n  const adverseMediaCheck = await runAdverseMediaCheck(profile);\n  checks.push(adverseMediaCheck);\n\n  return checks;\n}\n\n/**\n * Run sanctions check\n */\nexport async function runSanctionsCheck(profile: KYCProfile): Promise<AMLCheck> {\n  const check: AMLCheck = {\n    checkId: uuidv4(),\n    userId: profile.userId,\n    kycId: profile.kycId,\n    checkType: 'sanctions',\n    status: 'pending',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  // In production, check against OFAC, UN, EU sanctions lists\n  // For now, simulate check\n  const isSanctioned = false; // Simulate no match\n\n  check.status = isSanctioned ? 'failed' : 'passed';\n  check.result = {\n    matched: isSanctioned,\n    matchedLists: isSanctioned ? ['OFAC'] : [],\n    riskScore: isSanctioned ? 100 : 0,\n    details: isSanctioned ? 'Match found on OFAC list' : 'No matches found',\n  };\n\n  amlChecks.set(check.checkId, check);\n  return check;\n}\n\n/**\n * Run PEP check (Politically Exposed Persons)\n */\nexport async function runPEPCheck(profile: KYCProfile): Promise<AMLCheck> {\n  const check: AMLCheck = {\n    checkId: uuidv4(),\n    userId: profile.userId,\n    kycId: profile.kycId,\n    checkType: 'pep',\n    status: 'pending',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  // In production, check against PEP databases\n  // For now, simulate check\n  const isPEP = false; // Simulate not a PEP\n\n  check.status = isPEP ? 'review_required' : 'passed';\n  check.result = {\n    matched: isPEP,\n    matchedLists: isPEP ? ['PEP_DATABASE'] : [],\n    riskScore: isPEP ? 75 : 0,\n    details: isPEP ? 'Potential PEP match - requires review' : 'No PEP matches found',\n  };\n\n  amlChecks.set(check.checkId, check);\n  return check;\n}\n\n/**\n * Run adverse media check\n */\nexport async function runAdverseMediaCheck(profile: KYCProfile): Promise<AMLCheck> {\n  const check: AMLCheck = {\n    checkId: uuidv4(),\n    userId: profile.userId,\n    kycId: profile.kycId,\n    checkType: 'adverse_media',\n    status: 'pending',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  // In production, check news sources and media databases\n  // For now, simulate check\n  const hasAdverseMedia = false; // Simulate no adverse media\n\n  check.status = hasAdverseMedia ? 'review_required' : 'passed';\n  check.result = {\n    matched: hasAdverseMedia,\n    matchedLists: hasAdverseMedia ? ['NEWS_SOURCES'] : [],\n    riskScore: hasAdverseMedia ? 50 : 0,\n    details: hasAdverseMedia ? 'Adverse media found - requires review' : 'No adverse media found',\n  };\n\n  amlChecks.set(check.checkId, check);\n  return check;\n}\n\n/**\n * Monitor transaction for AML\n */\nexport async function monitorTransaction(\n  userId: string,\n  amount: number,\n  currency: string,\n  type: 'deposit' | 'withdrawal' | 'transfer'\n): Promise<TransactionMonitoring> {\n  const profile = getKYCProfile(userId);\n  if (!profile) {\n    throw new Error('KYC profile not found');\n  }\n\n  const monitoring: TransactionMonitoring = {\n    transactionId: uuidv4(),\n    userId,\n    amount,\n    currency,\n    type,\n    status: 'normal',\n    riskScore: 0,\n    flags: [],\n    createdAt: new Date(),\n  };\n\n  // Check for suspicious patterns\n  const flags: string[] = [];\n  let riskScore = 0;\n\n  // Large transaction flag\n  if (amount > 10000) {\n    flags.push('large_transaction');\n    riskScore += 20;\n  }\n\n  // Rapid transactions flag\n  const recentTransactions = Array.from(transactionMonitoring.values()).filter(\n    (t) => t.userId === userId && new Date().getTime() - t.createdAt.getTime() < 60000 // Last minute\n  );\n\n  if (recentTransactions.length > 5) {\n    flags.push('rapid_transactions');\n    riskScore += 30;\n  }\n\n  // High-risk country flag (simulate)\n  if (currency !== 'USD') {\n    flags.push('non_usd_currency');\n    riskScore += 10;\n  }\n\n  monitoring.flags = flags;\n  monitoring.riskScore = riskScore;\n  monitoring.status = riskScore > 50 ? 'flagged' : riskScore > 75 ? 'blocked' : 'normal';\n\n  transactionMonitoring.set(monitoring.transactionId, monitoring);\n  return monitoring;\n}\n\n/**\n * Get AML checks for user\n */\nexport function getAMLChecks(userId: string): AMLCheck[] {\n  return Array.from(amlChecks.values()).filter((c) => c.userId === userId);\n}\n\n/**\n * Get compliance status\n */\nexport function getComplianceStatus(userId: string) {\n  const profile = getKYCProfile(userId);\n  const amlChecks = getAMLChecks(userId);\n\n  if (!profile) {\n    return {\n      status: 'not_started',\n      kycStatus: 'not_started',\n      amlStatus: 'not_started',\n    };\n  }\n\n  const allChecksPassed = amlChecks.every((c) => c.status === 'passed');\n\n  return {\n    status: profile.status === 'verified' && allChecksPassed ? 'compliant' : 'non_compliant',\n    kycStatus: profile.status,\n    amlStatus: allChecksPassed ? 'passed' : 'failed',\n    riskLevel: profile.riskLevel,\n    amlChecks: amlChecks.map((c) => ({\n      type: c.checkType,\n      status: c.status,\n    })),\n  };\n}\n\nexport default {\n  createKYCProfile,\n  getKYCProfile,\n  verifyKYCProfile,\n  rejectKYCProfile,\n  runAMLChecks,\n  runSanctionsCheck,\n  runPEPCheck,\n  runAdverseMediaCheck,\n  monitorTransaction,\n  getAMLChecks,\n  getComplianceStatus,\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}