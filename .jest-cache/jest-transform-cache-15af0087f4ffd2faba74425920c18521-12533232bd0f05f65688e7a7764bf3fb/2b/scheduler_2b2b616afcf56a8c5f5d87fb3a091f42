ca76fd47c37f1ad453e8878467b308b7
/* istanbul ignore next */
function cov_1e9qzn9cky() {
  var path = "/workspaces/azora/services/azora-sapiens/src/scheduler.ts";
  var hash = "e69baf28ec214c8c6d113db2960206d025135819";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-sapiens/src/scheduler.ts",
    statementMap: {
      "0": {
        start: {
          line: 24,
          column: 50
        },
        end: {
          line: 24,
          column: 59
        }
      },
      "1": {
        start: {
          line: 28,
          column: 4
        },
        end: {
          line: 28,
          column: 41
        }
      },
      "2": {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 29,
          column: 25
        }
      },
      "3": {
        start: {
          line: 30,
          column: 4
        },
        end: {
          line: 30,
          column: 60
        }
      },
      "4": {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 31,
          column: 90
        }
      },
      "5": {
        start: {
          line: 32,
          column: 4
        },
        end: {
          line: 32,
          column: 51
        }
      },
      "6": {
        start: {
          line: 33,
          column: 4
        },
        end: {
          line: 33,
          column: 48
        }
      },
      "7": {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 40,
          column: 56
        }
      },
      "8": {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 44,
          column: 5
        }
      },
      "9": {
        start: {
          line: 43,
          column: 6
        },
        end: {
          line: 43,
          column: 35
        }
      },
      "10": {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 48,
          column: 5
        }
      },
      "11": {
        start: {
          line: 47,
          column: 6
        },
        end: {
          line: 47,
          column: 37
        }
      },
      "12": {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 52,
          column: 5
        }
      },
      "13": {
        start: {
          line: 51,
          column: 6
        },
        end: {
          line: 51,
          column: 39
        }
      },
      "14": {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 56,
          column: 5
        }
      },
      "15": {
        start: {
          line: 55,
          column: 6
        },
        end: {
          line: 55,
          column: 42
        }
      },
      "16": {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 58,
          column: 52
        }
      },
      "17": {
        start: {
          line: 65,
          column: 16
        },
        end: {
          line: 92,
          column: 6
        }
      },
      "18": {
        start: {
          line: 66,
          column: 6
        },
        end: {
          line: 91,
          column: 7
        }
      },
      "19": {
        start: {
          line: 67,
          column: 8
        },
        end: {
          line: 67,
          column: 49
        }
      },
      "20": {
        start: {
          line: 68,
          column: 23
        },
        end: {
          line: 74,
          column: 9
        }
      },
      "21": {
        start: {
          line: 76,
          column: 8
        },
        end: {
          line: 86,
          column: 9
        }
      },
      "22": {
        start: {
          line: 77,
          column: 26
        },
        end: {
          line: 79,
          column: 12
        }
      },
      "23": {
        start: {
          line: 81,
          column: 10
        },
        end: {
          line: 85,
          column: 13
        }
      },
      "24": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 88,
          column: 48
        }
      },
      "25": {
        start: {
          line: 90,
          column: 8
        },
        end: {
          line: 90,
          column: 57
        }
      },
      "26": {
        start: {
          line: 94,
          column: 4
        },
        end: {
          line: 94,
          column: 31
        }
      },
      "27": {
        start: {
          line: 101,
          column: 16
        },
        end: {
          line: 137,
          column: 6
        }
      },
      "28": {
        start: {
          line: 102,
          column: 6
        },
        end: {
          line: 136,
          column: 7
        }
      },
      "29": {
        start: {
          line: 103,
          column: 8
        },
        end: {
          line: 103,
          column: 56
        }
      },
      "30": {
        start: {
          line: 104,
          column: 23
        },
        end: {
          line: 104,
          column: 56
        }
      },
      "31": {
        start: {
          line: 105,
          column: 24
        },
        end: {
          line: 105,
          column: 47
        }
      },
      "32": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 118,
          column: 9
        }
      },
      "33": {
        start: {
          line: 109,
          column: 10
        },
        end: {
          line: 117,
          column: 11
        }
      },
      "34": {
        start: {
          line: 110,
          column: 27
        },
        end: {
          line: 110,
          column: 78
        }
      },
      "35": {
        start: {
          line: 111,
          column: 12
        },
        end: {
          line: 114,
          column: 15
        }
      },
      "36": {
        start: {
          line: 116,
          column: 12
        },
        end: {
          line: 116,
          column: 67
        }
      },
      "37": {
        start: {
          line: 121,
          column: 8
        },
        end: {
          line: 131,
          column: 9
        }
      },
      "38": {
        start: {
          line: 122,
          column: 10
        },
        end: {
          line: 130,
          column: 11
        }
      },
      "39": {
        start: {
          line: 123,
          column: 27
        },
        end: {
          line: 123,
          column: 80
        }
      },
      "40": {
        start: {
          line: 124,
          column: 12
        },
        end: {
          line: 127,
          column: 15
        }
      },
      "41": {
        start: {
          line: 129,
          column: 12
        },
        end: {
          line: 129,
          column: 69
        }
      },
      "42": {
        start: {
          line: 133,
          column: 8
        },
        end: {
          line: 133,
          column: 55
        }
      },
      "43": {
        start: {
          line: 135,
          column: 8
        },
        end: {
          line: 135,
          column: 64
        }
      },
      "44": {
        start: {
          line: 139,
          column: 4
        },
        end: {
          line: 139,
          column: 33
        }
      },
      "45": {
        start: {
          line: 146,
          column: 16
        },
        end: {
          line: 172,
          column: 6
        }
      },
      "46": {
        start: {
          line: 147,
          column: 6
        },
        end: {
          line: 171,
          column: 7
        }
      },
      "47": {
        start: {
          line: 148,
          column: 8
        },
        end: {
          line: 148,
          column: 53
        }
      },
      "48": {
        start: {
          line: 149,
          column: 23
        },
        end: {
          line: 154,
          column: 9
        }
      },
      "49": {
        start: {
          line: 156,
          column: 8
        },
        end: {
          line: 166,
          column: 9
        }
      },
      "50": {
        start: {
          line: 157,
          column: 26
        },
        end: {
          line: 159,
          column: 12
        }
      },
      "51": {
        start: {
          line: 161,
          column: 10
        },
        end: {
          line: 165,
          column: 13
        }
      },
      "52": {
        start: {
          line: 168,
          column: 8
        },
        end: {
          line: 168,
          column: 52
        }
      },
      "53": {
        start: {
          line: 170,
          column: 8
        },
        end: {
          line: 170,
          column: 61
        }
      },
      "54": {
        start: {
          line: 174,
          column: 4
        },
        end: {
          line: 174,
          column: 35
        }
      },
      "55": {
        start: {
          line: 181,
          column: 16
        },
        end: {
          line: 217,
          column: 6
        }
      },
      "56": {
        start: {
          line: 182,
          column: 6
        },
        end: {
          line: 216,
          column: 7
        }
      },
      "57": {
        start: {
          line: 183,
          column: 8
        },
        end: {
          line: 183,
          column: 62
        }
      },
      "58": {
        start: {
          line: 186,
          column: 27
        },
        end: {
          line: 186,
          column: 63
        }
      },
      "59": {
        start: {
          line: 187,
          column: 8
        },
        end: {
          line: 197,
          column: 9
        }
      },
      "60": {
        start: {
          line: 188,
          column: 10
        },
        end: {
          line: 196,
          column: 11
        }
      },
      "61": {
        start: {
          line: 189,
          column: 28
        },
        end: {
          line: 189,
          column: 84
        }
      },
      "62": {
        start: {
          line: 190,
          column: 12
        },
        end: {
          line: 193,
          column: 15
        }
      },
      "63": {
        start: {
          line: 195,
          column: 12
        },
        end: {
          line: 195,
          column: 75
        }
      },
      "64": {
        start: {
          line: 200,
          column: 26
        },
        end: {
          line: 200,
          column: 54
        }
      },
      "65": {
        start: {
          line: 201,
          column: 8
        },
        end: {
          line: 211,
          column: 9
        }
      },
      "66": {
        start: {
          line: 202,
          column: 10
        },
        end: {
          line: 210,
          column: 11
        }
      },
      "67": {
        start: {
          line: 203,
          column: 27
        },
        end: {
          line: 203,
          column: 72
        }
      },
      "68": {
        start: {
          line: 204,
          column: 12
        },
        end: {
          line: 207,
          column: 15
        }
      },
      "69": {
        start: {
          line: 209,
          column: 12
        },
        end: {
          line: 209,
          column: 71
        }
      },
      "70": {
        start: {
          line: 213,
          column: 8
        },
        end: {
          line: 213,
          column: 61
        }
      },
      "71": {
        start: {
          line: 215,
          column: 8
        },
        end: {
          line: 215,
          column: 70
        }
      },
      "72": {
        start: {
          line: 219,
          column: 4
        },
        end: {
          line: 219,
          column: 39
        }
      },
      "73": {
        start: {
          line: 226,
          column: 4
        },
        end: {
          line: 229,
          column: 5
        }
      },
      "74": {
        start: {
          line: 227,
          column: 6
        },
        end: {
          line: 227,
          column: 17
        }
      },
      "75": {
        start: {
          line: 228,
          column: 6
        },
        end: {
          line: 228,
          column: 51
        }
      },
      "76": {
        start: {
          line: 230,
          column: 4
        },
        end: {
          line: 230,
          column: 22
        }
      },
      "77": {
        start: {
          line: 237,
          column: 16
        },
        end: {
          line: 237,
          column: 35
        }
      },
      "78": {
        start: {
          line: 238,
          column: 4
        },
        end: {
          line: 242,
          column: 5
        }
      },
      "79": {
        start: {
          line: 239,
          column: 6
        },
        end: {
          line: 239,
          column: 17
        }
      },
      "80": {
        start: {
          line: 240,
          column: 6
        },
        end: {
          line: 240,
          column: 29
        }
      },
      "81": {
        start: {
          line: 241,
          column: 6
        },
        end: {
          line: 241,
          column: 51
        }
      },
      "82": {
        start: {
          line: 249,
          column: 44
        },
        end: {
          line: 249,
          column: 46
        }
      },
      "83": {
        start: {
          line: 250,
          column: 4
        },
        end: {
          line: 252,
          column: 5
        }
      },
      "84": {
        start: {
          line: 251,
          column: 6
        },
        end: {
          line: 251,
          column: 34
        }
      },
      "85": {
        start: {
          line: 253,
          column: 4
        },
        end: {
          line: 253,
          column: 18
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 27,
            column: 3
          }
        },
        loc: {
          start: {
            line: 27,
            column: 71
          },
          end: {
            line: 34,
            column: 3
          }
        },
        line: 27
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 39,
            column: 2
          },
          end: {
            line: 39,
            column: 3
          }
        },
        loc: {
          start: {
            line: 39,
            column: 34
          },
          end: {
            line: 59,
            column: 3
          }
        },
        line: 39
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 64,
            column: 2
          },
          end: {
            line: 64,
            column: 3
          }
        },
        loc: {
          start: {
            line: 64,
            column: 40
          },
          end: {
            line: 95,
            column: 3
          }
        },
        line: 64
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 65,
            column: 43
          },
          end: {
            line: 65,
            column: 44
          }
        },
        loc: {
          start: {
            line: 65,
            column: 55
          },
          end: {
            line: 92,
            column: 5
          }
        },
        line: 65
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 100,
            column: 2
          },
          end: {
            line: 100,
            column: 3
          }
        },
        loc: {
          start: {
            line: 100,
            column: 42
          },
          end: {
            line: 140,
            column: 3
          }
        },
        line: 100
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 101,
            column: 43
          },
          end: {
            line: 101,
            column: 44
          }
        },
        loc: {
          start: {
            line: 101,
            column: 55
          },
          end: {
            line: 137,
            column: 5
          }
        },
        line: 101
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 145,
            column: 2
          },
          end: {
            line: 145,
            column: 3
          }
        },
        loc: {
          start: {
            line: 145,
            column: 44
          },
          end: {
            line: 175,
            column: 3
          }
        },
        line: 145
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 146,
            column: 45
          },
          end: {
            line: 146,
            column: 46
          }
        },
        loc: {
          start: {
            line: 146,
            column: 57
          },
          end: {
            line: 172,
            column: 5
          }
        },
        line: 146
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 180,
            column: 2
          },
          end: {
            line: 180,
            column: 3
          }
        },
        loc: {
          start: {
            line: 180,
            column: 47
          },
          end: {
            line: 220,
            column: 3
          }
        },
        line: 180
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 181,
            column: 45
          },
          end: {
            line: 181,
            column: 46
          }
        },
        loc: {
          start: {
            line: 181,
            column: 57
          },
          end: {
            line: 217,
            column: 5
          }
        },
        line: 181
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 225,
            column: 2
          },
          end: {
            line: 225,
            column: 3
          }
        },
        loc: {
          start: {
            line: 225,
            column: 18
          },
          end: {
            line: 231,
            column: 3
          }
        },
        line: 225
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 236,
            column: 2
          },
          end: {
            line: 236,
            column: 3
          }
        },
        loc: {
          start: {
            line: 236,
            column: 30
          },
          end: {
            line: 243,
            column: 3
          }
        },
        line: 236
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 248,
            column: 2
          },
          end: {
            line: 248,
            column: 3
          }
        },
        loc: {
          start: {
            line: 248,
            column: 42
          },
          end: {
            line: 254,
            column: 3
          }
        },
        line: 248
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 42,
            column: 4
          },
          end: {
            line: 44,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 42,
            column: 4
          },
          end: {
            line: 44,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 42
      },
      "1": {
        loc: {
          start: {
            line: 46,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 46,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 46
      },
      "2": {
        loc: {
          start: {
            line: 50,
            column: 4
          },
          end: {
            line: 52,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 50,
            column: 4
          },
          end: {
            line: 52,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 50
      },
      "3": {
        loc: {
          start: {
            line: 54,
            column: 4
          },
          end: {
            line: 56,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 54,
            column: 4
          },
          end: {
            line: 56,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 54
      },
      "4": {
        loc: {
          start: {
            line: 238,
            column: 4
          },
          end: {
            line: 242,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 238,
            column: 4
          },
          end: {
            line: 242,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 238
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "e69baf28ec214c8c6d113db2960206d025135819"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1e9qzn9cky = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1e9qzn9cky();
import cron from 'node-cron';
import NewsDataSource from './sources/news';
import MarketDataSource from './sources/market';
import ResearchDataSource from './sources/research';
import SouthAfricaDataSource from './sources/south-africa';
export class DataIngestionScheduler {
  jobs =
  /* istanbul ignore next */
  (cov_1e9qzn9cky().s[0]++, new Map());
  constructor(knowledgeOcean, config) {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[0]++;
    cov_1e9qzn9cky().s[1]++;
    this.knowledgeOcean = knowledgeOcean;
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[2]++;
    this.config = config;
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[3]++;
    this.newsSource = new NewsDataSource(config.newsApiKey);
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[4]++;
    this.marketSource = new MarketDataSource(config.alphaVantageKey, config.cryptoApiKey);
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[5]++;
    this.researchSource = new ResearchDataSource();
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[6]++;
    this.saSource = new SouthAfricaDataSource();
  }

  /**
   * Start all scheduled jobs
   */
  async startAll() {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[1]++;
    cov_1e9qzn9cky().s[7]++;
    console.log('Starting data ingestion scheduler...');
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[8]++;
    if (this.config.enableNews !== false) {
      /* istanbul ignore next */
      cov_1e9qzn9cky().b[0][0]++;
      cov_1e9qzn9cky().s[9]++;
      this.scheduleNewsIngestion();
    } else
    /* istanbul ignore next */
    {
      cov_1e9qzn9cky().b[0][1]++;
    }
    cov_1e9qzn9cky().s[10]++;
    if (this.config.enableMarket !== false) {
      /* istanbul ignore next */
      cov_1e9qzn9cky().b[1][0]++;
      cov_1e9qzn9cky().s[11]++;
      this.scheduleMarketIngestion();
    } else
    /* istanbul ignore next */
    {
      cov_1e9qzn9cky().b[1][1]++;
    }
    cov_1e9qzn9cky().s[12]++;
    if (this.config.enableResearch !== false) {
      /* istanbul ignore next */
      cov_1e9qzn9cky().b[2][0]++;
      cov_1e9qzn9cky().s[13]++;
      this.scheduleResearchIngestion();
    } else
    /* istanbul ignore next */
    {
      cov_1e9qzn9cky().b[2][1]++;
    }
    cov_1e9qzn9cky().s[14]++;
    if (this.config.enableSouthAfrica !== false) {
      /* istanbul ignore next */
      cov_1e9qzn9cky().b[3][0]++;
      cov_1e9qzn9cky().s[15]++;
      this.scheduleSouthAfricaIngestion();
    } else
    /* istanbul ignore next */
    {
      cov_1e9qzn9cky().b[3][1]++;
    }
    cov_1e9qzn9cky().s[16]++;
    console.log('Data ingestion scheduler started');
  }

  /**
   * Schedule news ingestion (hourly)
   */
  scheduleNewsIngestion() {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[2]++;
    const job =
    /* istanbul ignore next */
    (cov_1e9qzn9cky().s[17]++, cron.schedule('0 * * * *', async () => {
      /* istanbul ignore next */
      cov_1e9qzn9cky().f[3]++;
      cov_1e9qzn9cky().s[18]++;
      try {
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[19]++;
        console.log('Running news ingestion...');
        const topics =
        /* istanbul ignore next */
        (cov_1e9qzn9cky().s[20]++, ['technology', 'business', 'education', 'entrepreneurship', 'south africa']);
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[21]++;
        for (const topic of topics) {
          const sources =
          /* istanbul ignore next */
          (cov_1e9qzn9cky().s[22]++, await this.newsSource.fetchAndConvert(topic, {
            pageSize: 50
          }));
          /* istanbul ignore next */
          cov_1e9qzn9cky().s[23]++;
          await this.knowledgeOcean.ingestSourcesBatch(sources, {
            generateEmbedding: true,
            category: 'news',
            tags: [topic]
          });
        }
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[24]++;
        console.log('News ingestion completed');
      } catch (error) {
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[25]++;
        console.error('Error in news ingestion:', error);
      }
    }));
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[26]++;
    this.jobs.set('news', job);
  }

  /**
   * Schedule market data ingestion (every minute)
   */
  scheduleMarketIngestion() {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[4]++;
    const job =
    /* istanbul ignore next */
    (cov_1e9qzn9cky().s[27]++, cron.schedule('* * * * *', async () => {
      /* istanbul ignore next */
      cov_1e9qzn9cky().f[5]++;
      cov_1e9qzn9cky().s[28]++;
      try {
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[29]++;
        console.log('Running market data ingestion...');
        const stocks =
        /* istanbul ignore next */
        (cov_1e9qzn9cky().s[30]++, ['AAPL', 'GOOGL', 'MSFT', 'TSLA']);
        const cryptos =
        /* istanbul ignore next */
        (cov_1e9qzn9cky().s[31]++, ['bitcoin', 'ethereum']);

        // Fetch stocks
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[32]++;
        for (const stock of stocks) {
          /* istanbul ignore next */
          cov_1e9qzn9cky().s[33]++;
          try {
            const source =
            /* istanbul ignore next */
            (cov_1e9qzn9cky().s[34]++, await this.marketSource.fetchAndConvertStock(stock));
            /* istanbul ignore next */
            cov_1e9qzn9cky().s[35]++;
            await this.knowledgeOcean.ingestSource(source, {
              generateEmbedding: true,
              category: 'market-data'
            });
          } catch (error) {
            /* istanbul ignore next */
            cov_1e9qzn9cky().s[36]++;
            console.error(`Error fetching stock ${stock}:`, error);
          }
        }

        // Fetch cryptos
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[37]++;
        for (const crypto of cryptos) {
          /* istanbul ignore next */
          cov_1e9qzn9cky().s[38]++;
          try {
            const source =
            /* istanbul ignore next */
            (cov_1e9qzn9cky().s[39]++, await this.marketSource.fetchAndConvertCrypto(crypto));
            /* istanbul ignore next */
            cov_1e9qzn9cky().s[40]++;
            await this.knowledgeOcean.ingestSource(source, {
              generateEmbedding: true,
              category: 'market-data'
            });
          } catch (error) {
            /* istanbul ignore next */
            cov_1e9qzn9cky().s[41]++;
            console.error(`Error fetching crypto ${crypto}:`, error);
          }
        }
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[42]++;
        console.log('Market data ingestion completed');
      } catch (error) {
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[43]++;
        console.error('Error in market data ingestion:', error);
      }
    }));
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[44]++;
    this.jobs.set('market', job);
  }

  /**
   * Schedule research ingestion (every 6 hours)
   */
  scheduleResearchIngestion() {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[6]++;
    const job =
    /* istanbul ignore next */
    (cov_1e9qzn9cky().s[45]++, cron.schedule('0 */6 * * *', async () => {
      /* istanbul ignore next */
      cov_1e9qzn9cky().f[7]++;
      cov_1e9qzn9cky().s[46]++;
      try {
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[47]++;
        console.log('Running research ingestion...');
        const topics =
        /* istanbul ignore next */
        (cov_1e9qzn9cky().s[48]++, ['machine learning', 'education technology', 'entrepreneurship', 'business innovation']);
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[49]++;
        for (const topic of topics) {
          const sources =
          /* istanbul ignore next */
          (cov_1e9qzn9cky().s[50]++, await this.researchSource.searchAndConvert(topic, {
            maxResults: 20
          }));
          /* istanbul ignore next */
          cov_1e9qzn9cky().s[51]++;
          await this.knowledgeOcean.ingestSourcesBatch(sources, {
            generateEmbedding: true,
            category: 'research',
            tags: [topic]
          });
        }
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[52]++;
        console.log('Research ingestion completed');
      } catch (error) {
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[53]++;
        console.error('Error in research ingestion:', error);
      }
    }));
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[54]++;
    this.jobs.set('research', job);
  }

  /**
   * Schedule South Africa data ingestion (every 6 hours)
   */
  scheduleSouthAfricaIngestion() {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[8]++;
    const job =
    /* istanbul ignore next */
    (cov_1e9qzn9cky().s[55]++, cron.schedule('0 */6 * * *', async () => {
      /* istanbul ignore next */
      cov_1e9qzn9cky().f[9]++;
      cov_1e9qzn9cky().s[56]++;
      try {
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[57]++;
        console.log('Running South Africa data ingestion...');

        // Fetch economic indicators
        const indicators =
        /* istanbul ignore next */
        (cov_1e9qzn9cky().s[58]++, ['unemployment', 'gdp', 'inflation']);
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[59]++;
        for (const indicator of indicators) {
          /* istanbul ignore next */
          cov_1e9qzn9cky().s[60]++;
          try {
            const sources =
            /* istanbul ignore next */
            (cov_1e9qzn9cky().s[61]++, await this.saSource.fetchAndConvertIndicators(indicator));
            /* istanbul ignore next */
            cov_1e9qzn9cky().s[62]++;
            await this.knowledgeOcean.ingestSourcesBatch(sources, {
              generateEmbedding: true,
              category: 'south-africa'
            });
          } catch (error) {
            /* istanbul ignore next */
            cov_1e9qzn9cky().s[63]++;
            console.error(`Error fetching indicator ${indicator}:`, error);
          }
        }

        // Fetch JSE stocks
        const jseStocks =
        /* istanbul ignore next */
        (cov_1e9qzn9cky().s[64]++, ['NPN', 'AGL', 'BIL', 'MTN']);
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[65]++;
        for (const stock of jseStocks) {
          /* istanbul ignore next */
          cov_1e9qzn9cky().s[66]++;
          try {
            const source =
            /* istanbul ignore next */
            (cov_1e9qzn9cky().s[67]++, await this.saSource.fetchAndConvertJSE(stock));
            /* istanbul ignore next */
            cov_1e9qzn9cky().s[68]++;
            await this.knowledgeOcean.ingestSource(source, {
              generateEmbedding: true,
              category: 'south-africa'
            });
          } catch (error) {
            /* istanbul ignore next */
            cov_1e9qzn9cky().s[69]++;
            console.error(`Error fetching JSE stock ${stock}:`, error);
          }
        }
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[70]++;
        console.log('South Africa data ingestion completed');
      } catch (error) {
        /* istanbul ignore next */
        cov_1e9qzn9cky().s[71]++;
        console.error('Error in South Africa data ingestion:', error);
      }
    }));
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[72]++;
    this.jobs.set('south-africa', job);
  }

  /**
   * Stop all scheduled jobs
   */
  stopAll() {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[10]++;
    cov_1e9qzn9cky().s[73]++;
    for (const [name, job] of this.jobs) {
      /* istanbul ignore next */
      cov_1e9qzn9cky().s[74]++;
      job.stop();
      /* istanbul ignore next */
      cov_1e9qzn9cky().s[75]++;
      console.log(`Stopped ${name} ingestion job`);
    }
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[76]++;
    this.jobs.clear();
  }

  /**
   * Stop a specific job
   */
  stopJob(name) {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[11]++;
    const job =
    /* istanbul ignore next */
    (cov_1e9qzn9cky().s[77]++, this.jobs.get(name));
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[78]++;
    if (job) {
      /* istanbul ignore next */
      cov_1e9qzn9cky().b[4][0]++;
      cov_1e9qzn9cky().s[79]++;
      job.stop();
      /* istanbul ignore next */
      cov_1e9qzn9cky().s[80]++;
      this.jobs.delete(name);
      /* istanbul ignore next */
      cov_1e9qzn9cky().s[81]++;
      console.log(`Stopped ${name} ingestion job`);
    } else
    /* istanbul ignore next */
    {
      cov_1e9qzn9cky().b[4][1]++;
    }
  }

  /**
   * Get job status
   */
  getJobStatus() {
    /* istanbul ignore next */
    cov_1e9qzn9cky().f[12]++;
    const status =
    /* istanbul ignore next */
    (cov_1e9qzn9cky().s[82]++, {});
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[83]++;
    for (const [name, job] of this.jobs) {
      /* istanbul ignore next */
      cov_1e9qzn9cky().s[84]++;
      status[name] = !job.stopped;
    }
    /* istanbul ignore next */
    cov_1e9qzn9cky().s[85]++;
    return status;
  }
}
export default DataIngestionScheduler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWU5cXpuOWNreSIsImFjdHVhbENvdmVyYWdlIiwiY3JvbiIsIk5ld3NEYXRhU291cmNlIiwiTWFya2V0RGF0YVNvdXJjZSIsIlJlc2VhcmNoRGF0YVNvdXJjZSIsIlNvdXRoQWZyaWNhRGF0YVNvdXJjZSIsIkRhdGFJbmdlc3Rpb25TY2hlZHVsZXIiLCJqb2JzIiwicyIsIk1hcCIsImNvbnN0cnVjdG9yIiwia25vd2xlZGdlT2NlYW4iLCJjb25maWciLCJmIiwibmV3c1NvdXJjZSIsIm5ld3NBcGlLZXkiLCJtYXJrZXRTb3VyY2UiLCJhbHBoYVZhbnRhZ2VLZXkiLCJjcnlwdG9BcGlLZXkiLCJyZXNlYXJjaFNvdXJjZSIsInNhU291cmNlIiwic3RhcnRBbGwiLCJjb25zb2xlIiwibG9nIiwiZW5hYmxlTmV3cyIsImIiLCJzY2hlZHVsZU5ld3NJbmdlc3Rpb24iLCJlbmFibGVNYXJrZXQiLCJzY2hlZHVsZU1hcmtldEluZ2VzdGlvbiIsImVuYWJsZVJlc2VhcmNoIiwic2NoZWR1bGVSZXNlYXJjaEluZ2VzdGlvbiIsImVuYWJsZVNvdXRoQWZyaWNhIiwic2NoZWR1bGVTb3V0aEFmcmljYUluZ2VzdGlvbiIsImpvYiIsInNjaGVkdWxlIiwidG9waWNzIiwidG9waWMiLCJzb3VyY2VzIiwiZmV0Y2hBbmRDb252ZXJ0IiwicGFnZVNpemUiLCJpbmdlc3RTb3VyY2VzQmF0Y2giLCJnZW5lcmF0ZUVtYmVkZGluZyIsImNhdGVnb3J5IiwidGFncyIsImVycm9yIiwic2V0Iiwic3RvY2tzIiwiY3J5cHRvcyIsInN0b2NrIiwic291cmNlIiwiZmV0Y2hBbmRDb252ZXJ0U3RvY2siLCJpbmdlc3RTb3VyY2UiLCJjcnlwdG8iLCJmZXRjaEFuZENvbnZlcnRDcnlwdG8iLCJzZWFyY2hBbmRDb252ZXJ0IiwibWF4UmVzdWx0cyIsImluZGljYXRvcnMiLCJpbmRpY2F0b3IiLCJmZXRjaEFuZENvbnZlcnRJbmRpY2F0b3JzIiwianNlU3RvY2tzIiwiZmV0Y2hBbmRDb252ZXJ0SlNFIiwic3RvcEFsbCIsIm5hbWUiLCJzdG9wIiwiY2xlYXIiLCJzdG9wSm9iIiwiZ2V0IiwiZGVsZXRlIiwiZ2V0Sm9iU3RhdHVzIiwic3RhdHVzIiwic3RvcHBlZCJdLCJzb3VyY2VzIjpbInNjaGVkdWxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JvbiBmcm9tICdub2RlLWNyb24nO1xuaW1wb3J0IEtub3dsZWRnZU9jZWFuIGZyb20gJy4va25vd2xlZGdlLW9jZWFuJztcbmltcG9ydCBOZXdzRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvbmV3cyc7XG5pbXBvcnQgTWFya2V0RGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvbWFya2V0JztcbmltcG9ydCBSZXNlYXJjaERhdGFTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL3Jlc2VhcmNoJztcbmltcG9ydCBTb3V0aEFmcmljYURhdGFTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL3NvdXRoLWFmcmljYSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NoZWR1bGVyQ29uZmlnIHtcbiAgbmV3c0FwaUtleTogc3RyaW5nO1xuICBhbHBoYVZhbnRhZ2VLZXk6IHN0cmluZztcbiAgY3J5cHRvQXBpS2V5Pzogc3RyaW5nO1xuICBlbmFibGVOZXdzPzogYm9vbGVhbjtcbiAgZW5hYmxlTWFya2V0PzogYm9vbGVhbjtcbiAgZW5hYmxlUmVzZWFyY2g/OiBib29sZWFuO1xuICBlbmFibGVTb3V0aEFmcmljYT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRhSW5nZXN0aW9uU2NoZWR1bGVyIHtcbiAgcHJpdmF0ZSBrbm93bGVkZ2VPY2VhbjogS25vd2xlZGdlT2NlYW47XG4gIHByaXZhdGUgbmV3c1NvdXJjZTogTmV3c0RhdGFTb3VyY2U7XG4gIHByaXZhdGUgbWFya2V0U291cmNlOiBNYXJrZXREYXRhU291cmNlO1xuICBwcml2YXRlIHJlc2VhcmNoU291cmNlOiBSZXNlYXJjaERhdGFTb3VyY2U7XG4gIHByaXZhdGUgc2FTb3VyY2U6IFNvdXRoQWZyaWNhRGF0YVNvdXJjZTtcbiAgcHJpdmF0ZSBqb2JzOiBNYXA8c3RyaW5nLCBjcm9uLlNjaGVkdWxlZFRhc2s+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGNvbmZpZzogU2NoZWR1bGVyQ29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKGtub3dsZWRnZU9jZWFuOiBLbm93bGVkZ2VPY2VhbiwgY29uZmlnOiBTY2hlZHVsZXJDb25maWcpIHtcbiAgICB0aGlzLmtub3dsZWRnZU9jZWFuID0ga25vd2xlZGdlT2NlYW47XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5uZXdzU291cmNlID0gbmV3IE5ld3NEYXRhU291cmNlKGNvbmZpZy5uZXdzQXBpS2V5KTtcbiAgICB0aGlzLm1hcmtldFNvdXJjZSA9IG5ldyBNYXJrZXREYXRhU291cmNlKGNvbmZpZy5hbHBoYVZhbnRhZ2VLZXksIGNvbmZpZy5jcnlwdG9BcGlLZXkpO1xuICAgIHRoaXMucmVzZWFyY2hTb3VyY2UgPSBuZXcgUmVzZWFyY2hEYXRhU291cmNlKCk7XG4gICAgdGhpcy5zYVNvdXJjZSA9IG5ldyBTb3V0aEFmcmljYURhdGFTb3VyY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBhbGwgc2NoZWR1bGVkIGpvYnNcbiAgICovXG4gIGFzeW5jIHN0YXJ0QWxsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBkYXRhIGluZ2VzdGlvbiBzY2hlZHVsZXIuLi4nKTtcblxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVOZXdzICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5zY2hlZHVsZU5ld3NJbmdlc3Rpb24oKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlTWFya2V0ICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5zY2hlZHVsZU1hcmtldEluZ2VzdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVSZXNlYXJjaCAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVSZXNlYXJjaEluZ2VzdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVTb3V0aEFmcmljYSAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVTb3V0aEFmcmljYUluZ2VzdGlvbigpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdEYXRhIGluZ2VzdGlvbiBzY2hlZHVsZXIgc3RhcnRlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIG5ld3MgaW5nZXN0aW9uIChob3VybHkpXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlTmV3c0luZ2VzdGlvbigpOiB2b2lkIHtcbiAgICBjb25zdCBqb2IgPSBjcm9uLnNjaGVkdWxlKCcwICogKiAqIConLCBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnUnVubmluZyBuZXdzIGluZ2VzdGlvbi4uLicpO1xuICAgICAgICBjb25zdCB0b3BpY3MgPSBbXG4gICAgICAgICAgJ3RlY2hub2xvZ3knLFxuICAgICAgICAgICdidXNpbmVzcycsXG4gICAgICAgICAgJ2VkdWNhdGlvbicsXG4gICAgICAgICAgJ2VudHJlcHJlbmV1cnNoaXAnLFxuICAgICAgICAgICdzb3V0aCBhZnJpY2EnLFxuICAgICAgICBdO1xuXG4gICAgICAgIGZvciAoY29uc3QgdG9waWMgb2YgdG9waWNzKSB7XG4gICAgICAgICAgY29uc3Qgc291cmNlcyA9IGF3YWl0IHRoaXMubmV3c1NvdXJjZS5mZXRjaEFuZENvbnZlcnQodG9waWMsIHtcbiAgICAgICAgICAgIHBhZ2VTaXplOiA1MCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGF3YWl0IHRoaXMua25vd2xlZGdlT2NlYW4uaW5nZXN0U291cmNlc0JhdGNoKHNvdXJjZXMsIHtcbiAgICAgICAgICAgIGdlbmVyYXRlRW1iZWRkaW5nOiB0cnVlLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICduZXdzJyxcbiAgICAgICAgICAgIHRhZ3M6IFt0b3BpY10sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnTmV3cyBpbmdlc3Rpb24gY29tcGxldGVkJyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBuZXdzIGluZ2VzdGlvbjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmpvYnMuc2V0KCduZXdzJywgam9iKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSBtYXJrZXQgZGF0YSBpbmdlc3Rpb24gKGV2ZXJ5IG1pbnV0ZSlcbiAgICovXG4gIHByaXZhdGUgc2NoZWR1bGVNYXJrZXRJbmdlc3Rpb24oKTogdm9pZCB7XG4gICAgY29uc3Qgam9iID0gY3Jvbi5zY2hlZHVsZSgnKiAqICogKiAqJywgYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1J1bm5pbmcgbWFya2V0IGRhdGEgaW5nZXN0aW9uLi4uJyk7XG4gICAgICAgIGNvbnN0IHN0b2NrcyA9IFsnQUFQTCcsICdHT09HTCcsICdNU0ZUJywgJ1RTTEEnXTtcbiAgICAgICAgY29uc3QgY3J5cHRvcyA9IFsnYml0Y29pbicsICdldGhlcmV1bSddO1xuXG4gICAgICAgIC8vIEZldGNoIHN0b2Nrc1xuICAgICAgICBmb3IgKGNvbnN0IHN0b2NrIG9mIHN0b2Nrcykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLm1hcmtldFNvdXJjZS5mZXRjaEFuZENvbnZlcnRTdG9jayhzdG9jayk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmtub3dsZWRnZU9jZWFuLmluZ2VzdFNvdXJjZShzb3VyY2UsIHtcbiAgICAgICAgICAgICAgZ2VuZXJhdGVFbWJlZGRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiAnbWFya2V0LWRhdGEnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIHN0b2NrICR7c3RvY2t9OmAsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGZXRjaCBjcnlwdG9zXG4gICAgICAgIGZvciAoY29uc3QgY3J5cHRvIG9mIGNyeXB0b3MpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5tYXJrZXRTb3VyY2UuZmV0Y2hBbmRDb252ZXJ0Q3J5cHRvKGNyeXB0byk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmtub3dsZWRnZU9jZWFuLmluZ2VzdFNvdXJjZShzb3VyY2UsIHtcbiAgICAgICAgICAgICAgZ2VuZXJhdGVFbWJlZGRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiAnbWFya2V0LWRhdGEnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGNyeXB0byAke2NyeXB0b306YCwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdNYXJrZXQgZGF0YSBpbmdlc3Rpb24gY29tcGxldGVkJyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBtYXJrZXQgZGF0YSBpbmdlc3Rpb246JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5qb2JzLnNldCgnbWFya2V0Jywgam9iKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSByZXNlYXJjaCBpbmdlc3Rpb24gKGV2ZXJ5IDYgaG91cnMpXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlUmVzZWFyY2hJbmdlc3Rpb24oKTogdm9pZCB7XG4gICAgY29uc3Qgam9iID0gY3Jvbi5zY2hlZHVsZSgnMCAqLzYgKiAqIConLCBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnUnVubmluZyByZXNlYXJjaCBpbmdlc3Rpb24uLi4nKTtcbiAgICAgICAgY29uc3QgdG9waWNzID0gW1xuICAgICAgICAgICdtYWNoaW5lIGxlYXJuaW5nJyxcbiAgICAgICAgICAnZWR1Y2F0aW9uIHRlY2hub2xvZ3knLFxuICAgICAgICAgICdlbnRyZXByZW5ldXJzaGlwJyxcbiAgICAgICAgICAnYnVzaW5lc3MgaW5ub3ZhdGlvbicsXG4gICAgICAgIF07XG5cbiAgICAgICAgZm9yIChjb25zdCB0b3BpYyBvZiB0b3BpY3MpIHtcbiAgICAgICAgICBjb25zdCBzb3VyY2VzID0gYXdhaXQgdGhpcy5yZXNlYXJjaFNvdXJjZS5zZWFyY2hBbmRDb252ZXJ0KHRvcGljLCB7XG4gICAgICAgICAgICBtYXhSZXN1bHRzOiAyMCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGF3YWl0IHRoaXMua25vd2xlZGdlT2NlYW4uaW5nZXN0U291cmNlc0JhdGNoKHNvdXJjZXMsIHtcbiAgICAgICAgICAgIGdlbmVyYXRlRW1iZWRkaW5nOiB0cnVlLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdyZXNlYXJjaCcsXG4gICAgICAgICAgICB0YWdzOiBbdG9waWNdLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1Jlc2VhcmNoIGluZ2VzdGlvbiBjb21wbGV0ZWQnKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHJlc2VhcmNoIGluZ2VzdGlvbjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmpvYnMuc2V0KCdyZXNlYXJjaCcsIGpvYik7XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGUgU291dGggQWZyaWNhIGRhdGEgaW5nZXN0aW9uIChldmVyeSA2IGhvdXJzKVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZVNvdXRoQWZyaWNhSW5nZXN0aW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IGpvYiA9IGNyb24uc2NoZWR1bGUoJzAgKi82ICogKiAqJywgYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1J1bm5pbmcgU291dGggQWZyaWNhIGRhdGEgaW5nZXN0aW9uLi4uJyk7XG5cbiAgICAgICAgLy8gRmV0Y2ggZWNvbm9taWMgaW5kaWNhdG9yc1xuICAgICAgICBjb25zdCBpbmRpY2F0b3JzID0gWyd1bmVtcGxveW1lbnQnLCAnZ2RwJywgJ2luZmxhdGlvbiddO1xuICAgICAgICBmb3IgKGNvbnN0IGluZGljYXRvciBvZiBpbmRpY2F0b3JzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZXMgPSBhd2FpdCB0aGlzLnNhU291cmNlLmZldGNoQW5kQ29udmVydEluZGljYXRvcnMoaW5kaWNhdG9yKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMua25vd2xlZGdlT2NlYW4uaW5nZXN0U291cmNlc0JhdGNoKHNvdXJjZXMsIHtcbiAgICAgICAgICAgICAgZ2VuZXJhdGVFbWJlZGRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiAnc291dGgtYWZyaWNhJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBpbmRpY2F0b3IgJHtpbmRpY2F0b3J9OmAsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGZXRjaCBKU0Ugc3RvY2tzXG4gICAgICAgIGNvbnN0IGpzZVN0b2NrcyA9IFsnTlBOJywgJ0FHTCcsICdCSUwnLCAnTVROJ107XG4gICAgICAgIGZvciAoY29uc3Qgc3RvY2sgb2YganNlU3RvY2tzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IGF3YWl0IHRoaXMuc2FTb3VyY2UuZmV0Y2hBbmRDb252ZXJ0SlNFKHN0b2NrKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMua25vd2xlZGdlT2NlYW4uaW5nZXN0U291cmNlKHNvdXJjZSwge1xuICAgICAgICAgICAgICBnZW5lcmF0ZUVtYmVkZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdzb3V0aC1hZnJpY2EnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIEpTRSBzdG9jayAke3N0b2NrfTpgLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1NvdXRoIEFmcmljYSBkYXRhIGluZ2VzdGlvbiBjb21wbGV0ZWQnKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIFNvdXRoIEFmcmljYSBkYXRhIGluZ2VzdGlvbjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmpvYnMuc2V0KCdzb3V0aC1hZnJpY2EnLCBqb2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgYWxsIHNjaGVkdWxlZCBqb2JzXG4gICAqL1xuICBzdG9wQWxsKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgW25hbWUsIGpvYl0gb2YgdGhpcy5qb2JzKSB7XG4gICAgICBqb2Iuc3RvcCgpO1xuICAgICAgY29uc29sZS5sb2coYFN0b3BwZWQgJHtuYW1lfSBpbmdlc3Rpb24gam9iYCk7XG4gICAgfVxuICAgIHRoaXMuam9icy5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgYSBzcGVjaWZpYyBqb2JcbiAgICovXG4gIHN0b3BKb2IobmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgam9iID0gdGhpcy5qb2JzLmdldChuYW1lKTtcbiAgICBpZiAoam9iKSB7XG4gICAgICBqb2Iuc3RvcCgpO1xuICAgICAgdGhpcy5qb2JzLmRlbGV0ZShuYW1lKTtcbiAgICAgIGNvbnNvbGUubG9nKGBTdG9wcGVkICR7bmFtZX0gaW5nZXN0aW9uIGpvYmApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgam9iIHN0YXR1c1xuICAgKi9cbiAgZ2V0Sm9iU3RhdHVzKCk6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+IHtcbiAgICBjb25zdCBzdGF0dXM6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+ID0ge307XG4gICAgZm9yIChjb25zdCBbbmFtZSwgam9iXSBvZiB0aGlzLmpvYnMpIHtcbiAgICAgIHN0YXR1c1tuYW1lXSA9ICFqb2Iuc3RvcHBlZDtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXR1cztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhSW5nZXN0aW9uU2NoZWR1bGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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