{"version":3,"names":["cov_1e9qzn9cky","actualCoverage","cron","NewsDataSource","MarketDataSource","ResearchDataSource","SouthAfricaDataSource","DataIngestionScheduler","jobs","s","Map","constructor","knowledgeOcean","config","f","newsSource","newsApiKey","marketSource","alphaVantageKey","cryptoApiKey","researchSource","saSource","startAll","console","log","enableNews","b","scheduleNewsIngestion","enableMarket","scheduleMarketIngestion","enableResearch","scheduleResearchIngestion","enableSouthAfrica","scheduleSouthAfricaIngestion","job","schedule","topics","topic","sources","fetchAndConvert","pageSize","ingestSourcesBatch","generateEmbedding","category","tags","error","set","stocks","cryptos","stock","source","fetchAndConvertStock","ingestSource","crypto","fetchAndConvertCrypto","searchAndConvert","maxResults","indicators","indicator","fetchAndConvertIndicators","jseStocks","fetchAndConvertJSE","stopAll","name","stop","clear","stopJob","get","delete","getJobStatus","status","stopped"],"sources":["scheduler.ts"],"sourcesContent":["import cron from 'node-cron';\nimport KnowledgeOcean from './knowledge-ocean';\nimport NewsDataSource from './sources/news';\nimport MarketDataSource from './sources/market';\nimport ResearchDataSource from './sources/research';\nimport SouthAfricaDataSource from './sources/south-africa';\n\nexport interface SchedulerConfig {\n  newsApiKey: string;\n  alphaVantageKey: string;\n  cryptoApiKey?: string;\n  enableNews?: boolean;\n  enableMarket?: boolean;\n  enableResearch?: boolean;\n  enableSouthAfrica?: boolean;\n}\n\nexport class DataIngestionScheduler {\n  private knowledgeOcean: KnowledgeOcean;\n  private newsSource: NewsDataSource;\n  private marketSource: MarketDataSource;\n  private researchSource: ResearchDataSource;\n  private saSource: SouthAfricaDataSource;\n  private jobs: Map<string, cron.ScheduledTask> = new Map();\n  private config: SchedulerConfig;\n\n  constructor(knowledgeOcean: KnowledgeOcean, config: SchedulerConfig) {\n    this.knowledgeOcean = knowledgeOcean;\n    this.config = config;\n    this.newsSource = new NewsDataSource(config.newsApiKey);\n    this.marketSource = new MarketDataSource(config.alphaVantageKey, config.cryptoApiKey);\n    this.researchSource = new ResearchDataSource();\n    this.saSource = new SouthAfricaDataSource();\n  }\n\n  /**\n   * Start all scheduled jobs\n   */\n  async startAll(): Promise<void> {\n    console.log('Starting data ingestion scheduler...');\n\n    if (this.config.enableNews !== false) {\n      this.scheduleNewsIngestion();\n    }\n\n    if (this.config.enableMarket !== false) {\n      this.scheduleMarketIngestion();\n    }\n\n    if (this.config.enableResearch !== false) {\n      this.scheduleResearchIngestion();\n    }\n\n    if (this.config.enableSouthAfrica !== false) {\n      this.scheduleSouthAfricaIngestion();\n    }\n\n    console.log('Data ingestion scheduler started');\n  }\n\n  /**\n   * Schedule news ingestion (hourly)\n   */\n  private scheduleNewsIngestion(): void {\n    const job = cron.schedule('0 * * * *', async () => {\n      try {\n        console.log('Running news ingestion...');\n        const topics = [\n          'technology',\n          'business',\n          'education',\n          'entrepreneurship',\n          'south africa',\n        ];\n\n        for (const topic of topics) {\n          const sources = await this.newsSource.fetchAndConvert(topic, {\n            pageSize: 50,\n          });\n\n          await this.knowledgeOcean.ingestSourcesBatch(sources, {\n            generateEmbedding: true,\n            category: 'news',\n            tags: [topic],\n          });\n        }\n\n        console.log('News ingestion completed');\n      } catch (error) {\n        console.error('Error in news ingestion:', error);\n      }\n    });\n\n    this.jobs.set('news', job);\n  }\n\n  /**\n   * Schedule market data ingestion (every minute)\n   */\n  private scheduleMarketIngestion(): void {\n    const job = cron.schedule('* * * * *', async () => {\n      try {\n        console.log('Running market data ingestion...');\n        const stocks = ['AAPL', 'GOOGL', 'MSFT', 'TSLA'];\n        const cryptos = ['bitcoin', 'ethereum'];\n\n        // Fetch stocks\n        for (const stock of stocks) {\n          try {\n            const source = await this.marketSource.fetchAndConvertStock(stock);\n            await this.knowledgeOcean.ingestSource(source, {\n              generateEmbedding: true,\n              category: 'market-data',\n            });\n          } catch (error) {\n            console.error(`Error fetching stock ${stock}:`, error);\n          }\n        }\n\n        // Fetch cryptos\n        for (const crypto of cryptos) {\n          try {\n            const source = await this.marketSource.fetchAndConvertCrypto(crypto);\n            await this.knowledgeOcean.ingestSource(source, {\n              generateEmbedding: true,\n              category: 'market-data',\n            });\n          } catch (error) {\n            console.error(`Error fetching crypto ${crypto}:`, error);\n          }\n        }\n\n        console.log('Market data ingestion completed');\n      } catch (error) {\n        console.error('Error in market data ingestion:', error);\n      }\n    });\n\n    this.jobs.set('market', job);\n  }\n\n  /**\n   * Schedule research ingestion (every 6 hours)\n   */\n  private scheduleResearchIngestion(): void {\n    const job = cron.schedule('0 */6 * * *', async () => {\n      try {\n        console.log('Running research ingestion...');\n        const topics = [\n          'machine learning',\n          'education technology',\n          'entrepreneurship',\n          'business innovation',\n        ];\n\n        for (const topic of topics) {\n          const sources = await this.researchSource.searchAndConvert(topic, {\n            maxResults: 20,\n          });\n\n          await this.knowledgeOcean.ingestSourcesBatch(sources, {\n            generateEmbedding: true,\n            category: 'research',\n            tags: [topic],\n          });\n        }\n\n        console.log('Research ingestion completed');\n      } catch (error) {\n        console.error('Error in research ingestion:', error);\n      }\n    });\n\n    this.jobs.set('research', job);\n  }\n\n  /**\n   * Schedule South Africa data ingestion (every 6 hours)\n   */\n  private scheduleSouthAfricaIngestion(): void {\n    const job = cron.schedule('0 */6 * * *', async () => {\n      try {\n        console.log('Running South Africa data ingestion...');\n\n        // Fetch economic indicators\n        const indicators = ['unemployment', 'gdp', 'inflation'];\n        for (const indicator of indicators) {\n          try {\n            const sources = await this.saSource.fetchAndConvertIndicators(indicator);\n            await this.knowledgeOcean.ingestSourcesBatch(sources, {\n              generateEmbedding: true,\n              category: 'south-africa',\n            });\n          } catch (error) {\n            console.error(`Error fetching indicator ${indicator}:`, error);\n          }\n        }\n\n        // Fetch JSE stocks\n        const jseStocks = ['NPN', 'AGL', 'BIL', 'MTN'];\n        for (const stock of jseStocks) {\n          try {\n            const source = await this.saSource.fetchAndConvertJSE(stock);\n            await this.knowledgeOcean.ingestSource(source, {\n              generateEmbedding: true,\n              category: 'south-africa',\n            });\n          } catch (error) {\n            console.error(`Error fetching JSE stock ${stock}:`, error);\n          }\n        }\n\n        console.log('South Africa data ingestion completed');\n      } catch (error) {\n        console.error('Error in South Africa data ingestion:', error);\n      }\n    });\n\n    this.jobs.set('south-africa', job);\n  }\n\n  /**\n   * Stop all scheduled jobs\n   */\n  stopAll(): void {\n    for (const [name, job] of this.jobs) {\n      job.stop();\n      console.log(`Stopped ${name} ingestion job`);\n    }\n    this.jobs.clear();\n  }\n\n  /**\n   * Stop a specific job\n   */\n  stopJob(name: string): void {\n    const job = this.jobs.get(name);\n    if (job) {\n      job.stop();\n      this.jobs.delete(name);\n      console.log(`Stopped ${name} ingestion job`);\n    }\n  }\n\n  /**\n   * Get job status\n   */\n  getJobStatus(): Record<string, boolean> {\n    const status: Record<string, boolean> = {};\n    for (const [name, job] of this.jobs) {\n      status[name] = !job.stopped;\n    }\n    return status;\n  }\n}\n\nexport default DataIngestionScheduler;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}