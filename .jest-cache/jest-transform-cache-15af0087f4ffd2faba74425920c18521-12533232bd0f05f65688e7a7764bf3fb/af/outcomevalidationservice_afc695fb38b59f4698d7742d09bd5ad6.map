{"version":3,"names":["cov_28ire7rmk6","actualCoverage","PrismaClient","logger","prisma","s","OutcomeValidationService","validateOutcomes","courseId","f","outcomes","learningOutcome","findMany","where","enrollments","enrollment","avgScore","length","b","reduce","sum","o","assessmentScore","completionRate","filter","e","status","issues","push","info","flagged","error","recommendImprovements","validation","recommendations","some","i","includes","outcomeValidationService"],"sources":["outcome-validation.service.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\nimport { logger } from '../utils/logger';\n\nconst prisma = new PrismaClient();\n\nexport class OutcomeValidationService {\n  async validateOutcomes(courseId: string) {\n    try {\n      const outcomes = await prisma.learningOutcome.findMany({ where: { courseId } });\n      const enrollments = await prisma.enrollment.findMany({ where: { courseId } });\n\n      const avgScore = outcomes.length > 0\n        ? outcomes.reduce((sum, o) => sum + o.assessmentScore, 0) / outcomes.length\n        : 0;\n\n      const completionRate = enrollments.length > 0\n        ? (enrollments.filter(e => e.status === 'completed').length / enrollments.length) * 100\n        : 0;\n\n      const issues: string[] = [];\n      if (completionRate < 50) {issues.push('Low completion rate');}\n      if (avgScore < 70) {issues.push('Low average scores');}\n\n      logger.info('Outcomes validated', { courseId });\n      return { courseId, avgScore, completionRate, issues, flagged: issues.length > 0 };\n    } catch (error) {\n      logger.error('Error validating outcomes', { error, courseId });\n      throw error;\n    }\n  }\n\n  async recommendImprovements(courseId: string): Promise<string[]> {\n    try {\n      const validation = await this.validateOutcomes(courseId);\n      const recommendations: string[] = [];\n\n      if (validation.issues.some(i => i.includes('completion'))) {\n        recommendations.push('Review course difficulty and pacing');\n        recommendations.push('Add more interactive content');\n      }\n      if (validation.issues.some(i => i.includes('scores'))) {\n        recommendations.push('Clarify learning objectives');\n        recommendations.push('Provide more practice exercises');\n      }\n\n      logger.info('Improvements recommended', { courseId });\n      return recommendations;\n    } catch (error) {\n      logger.error('Error recommending improvements', { error, courseId });\n      throw error;\n    }\n  }\n}\n\nexport const outcomeValidationService = new OutcomeValidationService();\n"],"mappings":"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","ignoreList":[]}