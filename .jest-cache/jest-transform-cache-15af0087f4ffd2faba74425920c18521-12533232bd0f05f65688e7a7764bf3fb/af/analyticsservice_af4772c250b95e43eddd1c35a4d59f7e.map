{"version":3,"names":["cov_22ccbay2m6","actualCoverage","prisma","logger","AnalyticsService","getLearningAnalytics","studentId","courseId","f","s","outcomes","learningOutcome","findMany","where","enrollment","assessmentScores","map","o","assessmentScore","averageScore","length","b","reduce","a","findFirst","completionRate","progress","conceptsMastered","filter","conceptMastery","_","i","conceptsInProgress","conceptsStruggling","totalTimeSpent","sum","timeSpent","timeToMastery","skillProficiency","Map","Math","round","error","getCohortAnalytics","period","enrollments","include","student","totalEnrollments","completedEnrollments","e","status","allOutcomes","flatMap","timeToCompletion","riskStudents","Date","toISOString","slice","demographicBreakdown","getStudentAtRiskList","atRiskEnrollments","lt","select","getConversionFunnel","freeUsers","user","count","tier","premiumUsers","proUsers","freeToPremiumpct","premiumToProPct","getLifetimeValue","payments","payment","totalValue","p","Number","amount","analyticsService"],"sources":["analytics.service.ts"],"sourcesContent":["import { prisma } from '../index';\nimport { LearningAnalytics, CohortAnalytics } from '../types';\nimport { logger } from '../utils/logger';\n\nexport class AnalyticsService {\n  async getLearningAnalytics(studentId: string, courseId: string): Promise<LearningAnalytics> {\n    try {\n      const outcomes = await prisma.learningOutcome.findMany({\n        where: {\n          enrollment: {\n            studentId,\n            courseId,\n          },\n        },\n      });\n\n      const assessmentScores = outcomes.map(o => o.assessmentScore);\n      const averageScore = assessmentScores.length > 0\n        ? assessmentScores.reduce((a, b) => a + b, 0) / assessmentScores.length\n        : 0;\n\n      const enrollment = await prisma.enrollment.findFirst({\n        where: { studentId, courseId },\n      });\n\n      const completionRate = enrollment?.progress || 0;\n\n      // Simulate concept mastery tracking\n      const conceptsMastered = outcomes\n        .filter(o => o.conceptMastery >= 80)\n        .map((_, i) => `Concept ${i + 1}`);\n\n      const conceptsInProgress = outcomes\n        .filter(o => o.conceptMastery >= 50 && o.conceptMastery < 80)\n        .map((_, i) => `Concept ${i + 1}`);\n\n      const conceptsStruggling = outcomes\n        .filter(o => o.conceptMastery < 50)\n        .map((_, i) => `Concept ${i + 1}`);\n\n      const totalTimeSpent = outcomes.reduce((sum, o) => sum + o.timeSpent, 0);\n      const timeToMastery = totalTimeSpent / 3600; // Convert to hours\n\n      return {\n        studentId,\n        courseId,\n        completionRate,\n        timeToMastery,\n        skillProficiency: new Map(),\n        assessmentScores,\n        averageScore: Math.round(averageScore * 100) / 100,\n        conceptsMastered,\n        conceptsInProgress,\n        conceptsStruggling,\n      };\n    } catch (error) {\n      logger.error('Error getting learning analytics:', error);\n      throw error;\n    }\n  }\n\n  async getCohortAnalytics(courseId: string, period?: string): Promise<CohortAnalytics> {\n    try {\n      const enrollments = await prisma.enrollment.findMany({\n        where: { courseId },\n        include: {\n          student: true,\n          outcomes: true,\n        },\n      });\n\n      const totalEnrollments = enrollments.length;\n      const completedEnrollments = enrollments.filter(e => e.status === 'completed').length;\n      const completionRate = totalEnrollments > 0\n        ? (completedEnrollments / totalEnrollments) * 100\n        : 0;\n\n      const allOutcomes = enrollments.flatMap(e => e.outcomes);\n      const assessmentScores = allOutcomes.map(o => o.assessmentScore);\n      const averageScore = assessmentScores.length > 0\n        ? assessmentScores.reduce((a, b) => a + b, 0) / assessmentScores.length\n        : 0;\n\n      const totalTimeSpent = allOutcomes.reduce((sum, o) => sum + o.timeSpent, 0);\n      const timeToCompletion = totalTimeSpent / 3600; // Convert to hours\n\n      // Identify at-risk students (progress < 30%)\n      const riskStudents = enrollments\n        .filter(e => e.progress < 30 && e.status === 'active')\n        .map(e => e.studentId);\n\n      return {\n        courseId,\n        period: period || new Date().toISOString().slice(0, 7),\n        totalEnrollments,\n        completionRate: Math.round(completionRate * 100) / 100,\n        averageScore: Math.round(averageScore * 100) / 100,\n        timeToCompletion,\n        demographicBreakdown: [],\n        riskStudents,\n      };\n    } catch (error) {\n      logger.error('Error getting cohort analytics:', error);\n      throw error;\n    }\n  }\n\n  async getStudentAtRiskList(courseId: string): Promise<string[]> {\n    try {\n      const atRiskEnrollments = await prisma.enrollment.findMany({\n        where: {\n          courseId,\n          status: 'active',\n          progress: { lt: 30 },\n        },\n        select: { studentId: true },\n      });\n\n      return atRiskEnrollments.map(e => e.studentId);\n    } catch (error) {\n      logger.error('Error getting at-risk students:', error);\n      throw error;\n    }\n  }\n\n  async getConversionFunnel(): Promise<any> {\n    try {\n      const freeUsers = await prisma.user.count({ where: { tier: 'free' } });\n      const premiumUsers = await prisma.user.count({ where: { tier: 'premium' } });\n      const proUsers = await prisma.user.count({ where: { tier: 'pro' } });\n\n      const freeToPremiumpct = freeUsers > 0 ? (premiumUsers / freeUsers) * 100 : 0;\n      const premiumToProPct = premiumUsers > 0 ? (proUsers / premiumUsers) * 100 : 0;\n\n      return {\n        freeUsers,\n        premiumUsers,\n        proUsers,\n        freeToPremiumpct: Math.round(freeToPremiumpct * 100) / 100,\n        premiumToProPct: Math.round(premiumToProPct * 100) / 100,\n      };\n    } catch (error) {\n      logger.error('Error getting conversion funnel:', error);\n      throw error;\n    }\n  }\n\n  async getLifetimeValue(studentId: string): Promise<number> {\n    try {\n      const payments = await prisma.payment.findMany({\n        where: {\n          studentId,\n          status: 'completed',\n        },\n      });\n\n      const totalValue = payments.reduce((sum, p) => sum + Number(p.amount), 0);\n      return Math.round(totalValue * 100) / 100;\n    } catch (error) {\n      logger.error('Error calculating lifetime value:', error);\n      throw error;\n    }\n  }\n}\n\nexport const analyticsService = new AnalyticsService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}