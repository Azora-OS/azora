ff8e0ac253fab554be78c4f2a51d1f6e
/* istanbul ignore next */
function cov_1qw7sy9lnb() {
  var path = "/workspaces/azora/services/azora-forge/src/services/portfolioService.ts";
  var hash = "cb9372cd71dae67633005fcb0252be69ffa62df6";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-forge/src/services/portfolioService.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 15
        },
        end: {
          line: 3,
          column: 33
        }
      },
      "1": {
        start: {
          line: 13,
          column: 23
        },
        end: {
          line: 13,
          column: 51
        }
      },
      "2": {
        start: {
          line: 16,
          column: 22
        },
        end: {
          line: 16,
          column: 41
        }
      },
      "3": {
        start: {
          line: 17,
          column: 4
        },
        end: {
          line: 17,
          column: 43
        }
      },
      "4": {
        start: {
          line: 18,
          column: 4
        },
        end: {
          line: 18,
          column: 21
        }
      },
      "5": {
        start: {
          line: 22,
          column: 22
        },
        end: {
          line: 22,
          column: 49
        }
      },
      "6": {
        start: {
          line: 23,
          column: 4
        },
        end: {
          line: 23,
          column: 61
        }
      },
      "7": {
        start: {
          line: 23,
          column: 21
        },
        end: {
          line: 23,
          column: 60
        }
      },
      "8": {
        start: {
          line: 25,
          column: 17
        },
        end: {
          line: 28,
          column: 6
        }
      },
      "9": {
        start: {
          line: 30,
          column: 4
        },
        end: {
          line: 30,
          column: 34
        }
      },
      "10": {
        start: {
          line: 34,
          column: 22
        },
        end: {
          line: 34,
          column: 112
        }
      },
      "11": {
        start: {
          line: 35,
          column: 4
        },
        end: {
          line: 35,
          column: 37
        }
      },
      "12": {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 36,
          column: 43
        }
      },
      "13": {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 37,
          column: 21
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 15,
            column: 2
          },
          end: {
            line: 15,
            column: 3
          }
        },
        loc: {
          start: {
            line: 15,
            column: 73
          },
          end: {
            line: 19,
            column: 3
          }
        },
        line: 15
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 21,
            column: 2
          },
          end: {
            line: 21,
            column: 3
          }
        },
        loc: {
          start: {
            line: 21,
            column: 37
          },
          end: {
            line: 31,
            column: 3
          }
        },
        line: 21
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 33,
            column: 2
          },
          end: {
            line: 33,
            column: 3
          }
        },
        loc: {
          start: {
            line: 33,
            column: 70
          },
          end: {
            line: 38,
            column: 3
          }
        },
        line: 33
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 23,
            column: 61
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 23,
            column: 61
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 23
      },
      "1": {
        loc: {
          start: {
            line: 34,
            column: 22
          },
          end: {
            line: 34,
            column: 112
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 34,
            column: 22
          },
          end: {
            line: 34,
            column: 49
          }
        }, {
          start: {
            line: 34,
            column: 53
          },
          end: {
            line: 34,
            column: 112
          }
        }],
        line: 34
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "cb9372cd71dae67633005fcb0252be69ffa62df6"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1qw7sy9lnb = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1qw7sy9lnb();
import { PrismaClient } from '@prisma/client';
const prisma =
/* istanbul ignore next */
(cov_1qw7sy9lnb().s[0]++, new PrismaClient());
export class PortfolioService {
  portfolios =
  /* istanbul ignore next */
  (cov_1qw7sy9lnb().s[1]++, new Map());
  async createPortfolio(userId, data) {
    /* istanbul ignore next */
    cov_1qw7sy9lnb().f[0]++;
    const portfolio =
    /* istanbul ignore next */
    (cov_1qw7sy9lnb().s[2]++, {
      userId,
      ...data
    });
    /* istanbul ignore next */
    cov_1qw7sy9lnb().s[3]++;
    this.portfolios.set(userId, portfolio);
    /* istanbul ignore next */
    cov_1qw7sy9lnb().s[4]++;
    return portfolio;
  }
  async getPortfolio(userId) {
    /* istanbul ignore next */
    cov_1qw7sy9lnb().f[1]++;
    const portfolio =
    /* istanbul ignore next */
    (cov_1qw7sy9lnb().s[5]++, this.portfolios.get(userId));
    /* istanbul ignore next */
    cov_1qw7sy9lnb().s[6]++;
    if (!portfolio) {
      /* istanbul ignore next */
      cov_1qw7sy9lnb().b[0][0]++;
      cov_1qw7sy9lnb().s[7]++;
      throw new Error('Portfolio not found');
    } else
    /* istanbul ignore next */
    {
      cov_1qw7sy9lnb().b[0][1]++;
    }
    const user =
    /* istanbul ignore next */
    (cov_1qw7sy9lnb().s[8]++, await prisma.user.findUnique({
      where: {
        id: userId
      },
      include: {
        jobsAssigned: {
          where: {
            status: 'COMPLETED'
          }
        },
        reviews: true
      }
    }));
    /* istanbul ignore next */
    cov_1qw7sy9lnb().s[9]++;
    return {
      ...portfolio,
      user
    };
  }
  async addProject(userId, project) {
    /* istanbul ignore next */
    cov_1qw7sy9lnb().f[2]++;
    const portfolio =
    /* istanbul ignore next */
    (cov_1qw7sy9lnb().s[10]++,
    /* istanbul ignore next */
    (cov_1qw7sy9lnb().b[1][0]++, this.portfolios.get(userId)) ||
    /* istanbul ignore next */
    (cov_1qw7sy9lnb().b[1][1]++, {
      userId,
      projects: [],
      certifications: [],
      education: []
    }));
    /* istanbul ignore next */
    cov_1qw7sy9lnb().s[11]++;
    portfolio.projects.push(project);
    /* istanbul ignore next */
    cov_1qw7sy9lnb().s[12]++;
    this.portfolios.set(userId, portfolio);
    /* istanbul ignore next */
    cov_1qw7sy9lnb().s[13]++;
    return portfolio;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXF3N3N5OWxuYiIsImFjdHVhbENvdmVyYWdlIiwiUHJpc21hQ2xpZW50IiwicHJpc21hIiwicyIsIlBvcnRmb2xpb1NlcnZpY2UiLCJwb3J0Zm9saW9zIiwiTWFwIiwiY3JlYXRlUG9ydGZvbGlvIiwidXNlcklkIiwiZGF0YSIsImYiLCJwb3J0Zm9saW8iLCJzZXQiLCJnZXRQb3J0Zm9saW8iLCJnZXQiLCJiIiwiRXJyb3IiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJpbmNsdWRlIiwiam9ic0Fzc2lnbmVkIiwic3RhdHVzIiwicmV2aWV3cyIsImFkZFByb2plY3QiLCJwcm9qZWN0IiwicHJvamVjdHMiLCJjZXJ0aWZpY2F0aW9ucyIsImVkdWNhdGlvbiIsInB1c2giXSwic291cmNlcyI6WyJwb3J0Zm9saW9TZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xuXG5pbnRlcmZhY2UgUG9ydGZvbGlvIHtcbiAgdXNlcklkOiBzdHJpbmc7XG4gIHByb2plY3RzOiBBcnJheTx7IHRpdGxlOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmc7IHVybD86IHN0cmluZzsgaW1hZ2VzPzogc3RyaW5nW10gfT47XG4gIGNlcnRpZmljYXRpb25zOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgaXNzdWVyOiBzdHJpbmc7IGRhdGU6IERhdGUgfT47XG4gIGVkdWNhdGlvbjogQXJyYXk8eyBkZWdyZWU6IHN0cmluZzsgaW5zdGl0dXRpb246IHN0cmluZzsgeWVhcjogbnVtYmVyIH0+O1xufVxuXG5leHBvcnQgY2xhc3MgUG9ydGZvbGlvU2VydmljZSB7XG4gIHByaXZhdGUgcG9ydGZvbGlvcyA9IG5ldyBNYXA8c3RyaW5nLCBQb3J0Zm9saW8+KCk7XG5cbiAgYXN5bmMgY3JlYXRlUG9ydGZvbGlvKHVzZXJJZDogc3RyaW5nLCBkYXRhOiBPbWl0PFBvcnRmb2xpbywgJ3VzZXJJZCc+KSB7XG4gICAgY29uc3QgcG9ydGZvbGlvID0geyB1c2VySWQsIC4uLmRhdGEgfTtcbiAgICB0aGlzLnBvcnRmb2xpb3Muc2V0KHVzZXJJZCwgcG9ydGZvbGlvKTtcbiAgICByZXR1cm4gcG9ydGZvbGlvO1xuICB9XG5cbiAgYXN5bmMgZ2V0UG9ydGZvbGlvKHVzZXJJZDogc3RyaW5nKSB7XG4gICAgY29uc3QgcG9ydGZvbGlvID0gdGhpcy5wb3J0Zm9saW9zLmdldCh1c2VySWQpO1xuICAgIGlmICghcG9ydGZvbGlvKSB7dGhyb3cgbmV3IEVycm9yKCdQb3J0Zm9saW8gbm90IGZvdW5kJyk7fVxuICAgIFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIGluY2x1ZGU6IHsgam9ic0Fzc2lnbmVkOiB7IHdoZXJlOiB7IHN0YXR1czogJ0NPTVBMRVRFRCcgfSB9LCByZXZpZXdzOiB0cnVlIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB7IC4uLnBvcnRmb2xpbywgdXNlciB9O1xuICB9XG5cbiAgYXN5bmMgYWRkUHJvamVjdCh1c2VySWQ6IHN0cmluZywgcHJvamVjdDogUG9ydGZvbGlvWydwcm9qZWN0cyddWzBdKSB7XG4gICAgY29uc3QgcG9ydGZvbGlvID0gdGhpcy5wb3J0Zm9saW9zLmdldCh1c2VySWQpIHx8IHsgdXNlcklkLCBwcm9qZWN0czogW10sIGNlcnRpZmljYXRpb25zOiBbXSwgZWR1Y2F0aW9uOiBbXSB9O1xuICAgIHBvcnRmb2xpby5wcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuICAgIHRoaXMucG9ydGZvbGlvcy5zZXQodXNlcklkLCBwb3J0Zm9saW8pO1xuICAgIHJldHVybiBwb3J0Zm9saW87XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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