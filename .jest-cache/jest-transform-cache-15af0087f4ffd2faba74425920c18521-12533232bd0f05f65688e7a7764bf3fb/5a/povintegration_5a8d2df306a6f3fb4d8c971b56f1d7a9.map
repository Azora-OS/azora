{"version":3,"names":["cov_20qnu5s86t","actualCoverage","PrismaClient","blockchainService","axios","prisma","s","ProofOfValueIntegration","constructor","f","mintServiceUrl","b","process","env","MINT_SERVICE_URL","rewardMultiplier","parseFloat","POV_REWARD_MULTIPLIER","antiGamingEnabled","POV_ANTI_GAMING_ENABLED","maxDailyRewards","parseInt","POV_MAX_DAILY_REWARDS","processValueCreation","userId","activity","console","log","type","valueScore","calculateValueScore","isValid","validateActivity","success","reason","dailyTotal","getDailyRewardsTotal","rewardAmount","calculateReward","record","valueCreationRecord","create","data","activityType","metadata","status","txHash","mintReward","id","update","where","mintedAt","Date","recordId","error","errorMessage","message","baseScore","grade","loc","linesOfCode","complexity","reviews","positiveReviews","Math","min","upvotes","views","quality","qualityScore","engagement","engagementRate","complexity_score","complexityScore","satisfaction","satisfactionRating","peerReviewed","projectValue","impactScore","finalScore","max","round","baseReward","reward","log10","recentActivities","count","createdAt","gte","now","duplicateWindow","duplicate","findFirst","equals","avgScore","getAverageValueScore","verificationUrl","response","get","timeout","verified","startOfDay","setHours","result","aggregate","_sum","_avg","amount","user","findUnique","select","walletAddress","Error","mintTokens","processPendingRewards","pending","findMany","take","processed","failed","getUserTotalRewards","_count","total","getLeaderboard","timeframe","limit","startDate","leaderboard","groupBy","by","orderBy","userIds","map","entry","users","in","name","avatar","index","rank","find","u","totalRewards","totalValueScore","activityCount","povIntegration"],"sources":["pov-integration.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\nimport { blockchainService } from '../../azora-blockchain/src/blockchain-service';\nimport axios from 'axios';\n\nconst prisma = new PrismaClient();\n\n/**\n * Proof-of-Value Mining Integration\n * Connects value creation tracking to token minting\n */\nexport class ProofOfValueIntegration {\n  private readonly mintServiceUrl: string;\n  private readonly rewardMultiplier: number;\n  private readonly antiGamingEnabled: boolean;\n  private readonly maxDailyRewards: number;\n\n  constructor() {\n    this.mintServiceUrl = process.env.MINT_SERVICE_URL || 'http://localhost:3010';\n    this.rewardMultiplier = parseFloat(process.env.POV_REWARD_MULTIPLIER || '1.0');\n    this.antiGamingEnabled = process.env.POV_ANTI_GAMING_ENABLED === 'true';\n    this.maxDailyRewards = parseInt(process.env.POV_MAX_DAILY_REWARDS || '1000');\n  }\n\n  /**\n   * Calculate and distribute rewards for value creation\n   */\n  async processValueCreation(userId: string, activity: ValueActivity): Promise<RewardResult> {\n    console.log(`üéØ Processing value creation for user ${userId}: ${activity.type}`);\n\n    // Calculate value score\n    const valueScore = await this.calculateValueScore(activity);\n    \n    // Check anti-gaming rules\n    if (this.antiGamingEnabled) {\n      const isValid = await this.validateActivity(userId, activity, valueScore);\n      if (!isValid) {\n        console.log(`‚ö†Ô∏è  Activity flagged as potential gaming: ${activity.type}`);\n        return {\n          success: false,\n          reason: 'anti_gaming_check_failed',\n          valueScore,\n        };\n      }\n    }\n\n    // Check daily limits\n    const dailyTotal = await this.getDailyRewardsTotal(userId);\n    if (dailyTotal >= this.maxDailyRewards) {\n      console.log(`‚ö†Ô∏è  Daily reward limit reached for user ${userId}`);\n      return {\n        success: false,\n        reason: 'daily_limit_reached',\n        valueScore,\n        dailyTotal,\n      };\n    }\n\n    // Calculate reward amount\n    const rewardAmount = this.calculateReward(valueScore);\n    \n    // Record in database\n    const record = await prisma.valueCreationRecord.create({\n      data: {\n        userId,\n        activityType: activity.type,\n        valueScore,\n        rewardAmount,\n        metadata: activity.metadata,\n        status: 'pending',\n      },\n    });\n\n    // Mint tokens\n    try {\n      const txHash = await this.mintReward(userId, rewardAmount, record.id);\n      \n      // Update record\n      await prisma.valueCreationRecord.update({\n        where: { id: record.id },\n        data: {\n          status: 'completed',\n          txHash,\n          mintedAt: new Date(),\n        },\n      });\n\n      console.log(`‚úÖ Minted ${rewardAmount} AZR for ${activity.type} (txHash: ${txHash})`);\n\n      return {\n        success: true,\n        valueScore,\n        rewardAmount,\n        txHash,\n        recordId: record.id,\n      };\n    } catch (error: any) {\n      // Update record as failed\n      await prisma.valueCreationRecord.update({\n        where: { id: record.id },\n        data: {\n          status: 'failed',\n          errorMessage: error.message,\n        },\n      });\n\n      console.error(`‚ùå Minting failed:`, error);\n\n      return {\n        success: false,\n        reason: 'minting_failed',\n        valueScore,\n        error: error.message,\n      };\n    }\n  }\n\n  /**\n   * Calculate value score based on activity\n   */\n  private async calculateValueScore(activity: ValueActivity): Promise<number> {\n    let baseScore = 0;\n\n    switch (activity.type) {\n      case 'course_completion':\n        baseScore = 100;\n        // Bonus for high grades\n        if (activity.metadata.grade >= 90) baseScore *= 1.5;\n        break;\n\n      case 'code_contribution':\n        // Score based on lines of code, complexity, and reviews\n        const loc = activity.metadata.linesOfCode || 0;\n        const complexity = activity.metadata.complexity || 1;\n        const reviews = activity.metadata.positiveReviews || 0;\n        baseScore = Math.min((loc / 10) * complexity + (reviews * 20), 500);\n        break;\n\n      case 'knowledge_sharing':\n        // Score based on upvotes and engagement\n        const upvotes = activity.metadata.upvotes || 0;\n        const views = activity.metadata.views || 0;\n        baseScore = (upvotes * 10) + (views / 100);\n        break;\n\n      case 'content_creation':\n        // Score based on quality and engagement\n        const quality = activity.metadata.qualityScore || 0.5;\n        const engagement = activity.metadata.engagementRate || 0;\n        baseScore = quality * 100 + engagement * 200;\n        break;\n\n      case 'community_help':\n        // Score based on problem complexity and satisfaction\n        const complexity_score = activity.metadata.complexityScore || 1;\n        const satisfaction = activity.metadata.satisfactionRating || 0;\n        baseScore = complexity_score * 50 + satisfaction * 30;\n        break;\n\n      case 'research_publication':\n        // High score for research\n        baseScore = 500;\n        if (activity.metadata.peerReviewed) baseScore *= 2;\n        break;\n\n      case 'project_milestone':\n        // Score based on project value and impact\n        const projectValue = activity.metadata.projectValue || 0;\n        const impactScore = activity.metadata.impactScore || 1;\n        baseScore = projectValue * impactScore;\n        break;\n\n      default:\n        baseScore = 10; // Minimal score for unknown activities\n    }\n\n    // Apply multiplier from configuration\n    const finalScore = baseScore * this.rewardMultiplier;\n\n    return Math.max(1, Math.round(finalScore));\n  }\n\n  /**\n   * Calculate reward amount based on value score\n   */\n  private calculateReward(valueScore: number): number {\n    // Convert value score to AZR tokens\n    // Base formula: 1 AZR per 100 value points\n    const baseReward = valueScore / 100;\n    \n    // Apply reward curve (logarithmic to prevent inflation)\n    const reward = Math.log10(baseReward + 1) * 10;\n    \n    // Round to 2 decimal places\n    return Math.round(reward * 100) / 100;\n  }\n\n  /**\n   * Validate activity to prevent gaming\n   */\n  private async validateActivity(userId: string, activity: ValueActivity, valueScore: number): Promise<boolean> {\n    // Check for suspicious patterns\n    \n    // 1. Rate limiting - max activities per hour\n    const recentActivities = await prisma.valueCreationRecord.count({\n      where: {\n        userId,\n        createdAt: {\n          gte: new Date(Date.now() - 60 * 60 * 1000), // Last hour\n        },\n      },\n    });\n\n    if (recentActivities > 20) {\n      console.log(`‚ö†Ô∏è  Too many activities in last hour: ${recentActivities}`);\n      return false;\n    }\n\n    // 2. Check for duplicate activities\n    const duplicateWindow = 5 * 60 * 1000; // 5 minutes\n    const duplicate = await prisma.valueCreationRecord.findFirst({\n      where: {\n        userId,\n        activityType: activity.type,\n        createdAt: {\n          gte: new Date(Date.now() - duplicateWindow),\n        },\n        metadata: {\n          equals: activity.metadata,\n        },\n      },\n    });\n\n    if (duplicate) {\n      console.log(`‚ö†Ô∏è  Duplicate activity detected`);\n      return false;\n    }\n\n    // 3. Check for abnormally high value scores\n    const avgScore = await this.getAverageValueScore(activity.type);\n    if (valueScore > avgScore * 5) {\n      console.log(`‚ö†Ô∏è  Value score too high compared to average: ${valueScore} vs ${avgScore}`);\n      return false;\n    }\n\n    // 4. Verify activity authenticity (if verification endpoint exists)\n    if (activity.metadata.verificationUrl) {\n      try {\n        const response = await axios.get(activity.metadata.verificationUrl, { timeout: 5000 });\n        if (response.data.verified !== true) {\n          console.log(`‚ö†Ô∏è  Activity verification failed`);\n          return false;\n        }\n      } catch (error) {\n        console.log(`‚ö†Ô∏è  Could not verify activity`);\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Get total rewards for today\n   */\n  private async getDailyRewardsTotal(userId: string): Promise<number> {\n    const startOfDay = new Date();\n    startOfDay.setHours(0, 0, 0, 0);\n\n    const result = await prisma.valueCreationRecord.aggregate({\n      where: {\n        userId,\n        createdAt: {\n          gte: startOfDay,\n        },\n        status: 'completed',\n      },\n      _sum: {\n        rewardAmount: true,\n      },\n    });\n\n    return result._sum.rewardAmount || 0;\n  }\n\n  /**\n   * Get average value score for activity type\n   */\n  private async getAverageValueScore(activityType: string): Promise<number> {\n    const result = await prisma.valueCreationRecord.aggregate({\n      where: {\n        activityType,\n        status: 'completed',\n        createdAt: {\n          gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), // Last 30 days\n        },\n      },\n      _avg: {\n        valueScore: true,\n      },\n    });\n\n    return result._avg.valueScore || 100;\n  }\n\n  /**\n   * Mint reward tokens\n   */\n  private async mintReward(userId: string, amount: number, recordId: string): Promise<string> {\n    // Get user's wallet address\n    const user = await prisma.user.findUnique({\n      where: { id: userId },\n      select: { walletAddress: true },\n    });\n\n    if (!user?.walletAddress) {\n      throw new Error('User wallet address not found');\n    }\n\n    // Call blockchain service to mint\n    const txHash = await blockchainService.mintTokens(\n      user.walletAddress,\n      amount,\n      `Proof-of-Value reward: ${recordId}`\n    );\n\n    return txHash;\n  }\n\n  /**\n   * Batch process pending rewards (run via cron)\n   */\n  async processPendingRewards(): Promise<{ processed: number; failed: number }> {\n    console.log(`üîÑ Processing pending rewards...`);\n\n    const pending = await prisma.valueCreationRecord.findMany({\n      where: {\n        status: 'pending',\n        createdAt: {\n          gte: new Date(Date.now() - 24 * 60 * 60 * 1000), // Last 24 hours only\n        },\n      },\n      take: 100,\n    });\n\n    let processed = 0;\n    let failed = 0;\n\n    for (const record of pending) {\n      try {\n        const txHash = await this.mintReward(record.userId, record.rewardAmount, record.id);\n        \n        await prisma.valueCreationRecord.update({\n          where: { id: record.id },\n          data: {\n            status: 'completed',\n            txHash,\n            mintedAt: new Date(),\n          },\n        });\n\n        processed++;\n        console.log(`‚úÖ Processed reward ${record.id}`);\n      } catch (error: any) {\n        await prisma.valueCreationRecord.update({\n          where: { id: record.id },\n          data: {\n            status: 'failed',\n            errorMessage: error.message,\n          },\n        });\n\n        failed++;\n        console.error(`‚ùå Failed to process reward ${record.id}:`, error);\n      }\n    }\n\n    console.log(`üìä Batch complete: ${processed} processed, ${failed} failed`);\n\n    return { processed, failed };\n  }\n\n  /**\n   * Get user's total earned rewards\n   */\n  async getUserTotalRewards(userId: string): Promise<{ total: number; count: number }> {\n    const result = await prisma.valueCreationRecord.aggregate({\n      where: {\n        userId,\n        status: 'completed',\n      },\n      _sum: {\n        rewardAmount: true,\n      },\n      _count: true,\n    });\n\n    return {\n      total: result._sum.rewardAmount || 0,\n      count: result._count,\n    };\n  }\n\n  /**\n   * Get leaderboard\n   */\n  async getLeaderboard(timeframe: 'day' | 'week' | 'month' | 'all' = 'week', limit: number = 100): Promise<any[]> {\n    let startDate: Date;\n    \n    switch (timeframe) {\n      case 'day':\n        startDate = new Date(Date.now() - 24 * 60 * 60 * 1000);\n        break;\n      case 'week':\n        startDate = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\n        break;\n      case 'month':\n        startDate = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n        break;\n      default:\n        startDate = new Date(0);\n    }\n\n    const leaderboard = await prisma.valueCreationRecord.groupBy({\n      by: ['userId'],\n      where: {\n        status: 'completed',\n        createdAt: {\n          gte: startDate,\n        },\n      },\n      _sum: {\n        rewardAmount: true,\n        valueScore: true,\n      },\n      _count: true,\n      orderBy: {\n        _sum: {\n          rewardAmount: 'desc',\n        },\n      },\n      take: limit,\n    });\n\n    // Fetch user details\n    const userIds = leaderboard.map(entry => entry.userId);\n    const users = await prisma.user.findMany({\n      where: { id: { in: userIds } },\n      select: { id: true, name: true, avatar: true },\n    });\n\n    return leaderboard.map((entry, index) => ({\n      rank: index + 1,\n      user: users.find(u => u.id === entry.userId),\n      totalRewards: entry._sum.rewardAmount || 0,\n      totalValueScore: entry._sum.valueScore || 0,\n      activityCount: entry._count,\n    }));\n  }\n}\n\n// Types\ninterface ValueActivity {\n  type: 'course_completion' | 'code_contribution' | 'knowledge_sharing' | 'content_creation' | 'community_help' | 'research_publication' | 'project_milestone';\n  metadata: Record<string, any>;\n}\n\ninterface RewardResult {\n  success: boolean;\n  valueScore: number;\n  rewardAmount?: number;\n  txHash?: string;\n  recordId?: string;\n  reason?: string;\n  error?: string;\n  dailyTotal?: number;\n}\n\n// Export singleton\nexport const povIntegration = new ProofOfValueIntegration();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}