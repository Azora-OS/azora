dccffac6c9995100110890a502bb5e9c
/* istanbul ignore next */
function cov_10pwuqtdt7() {
  var path = "/workspaces/azora/services/azora-cloud/constitutional-ai/validators/privacy-filter.ts";
  var hash = "be1b3b2662dfae8ffcd840e754e57caa00024c2a";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-cloud/constitutional-ai/validators/privacy-filter.ts",
    statementMap: {
      "0": {
        start: {
          line: 17,
          column: 44
        },
        end: {
          line: 24,
          column: 1
        }
      },
      "1": {
        start: {
          line: 29,
          column: 46
        },
        end: {
          line: 40,
          column: 1
        }
      },
      "2": {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 49,
          column: 51
        }
      },
      "3": {
        start: {
          line: 56,
          column: 4
        },
        end: {
          line: 80,
          column: 5
        }
      },
      "4": {
        start: {
          line: 58,
          column: 22
        },
        end: {
          line: 58,
          column: 50
        }
      },
      "5": {
        start: {
          line: 61,
          column: 29
        },
        end: {
          line: 63,
          column: 16
        }
      },
      "6": {
        start: {
          line: 65,
          column: 6
        },
        end: {
          line: 70,
          column: 8
        }
      },
      "7": {
        start: {
          line: 72,
          column: 6
        },
        end: {
          line: 72,
          column: 52
        }
      },
      "8": {
        start: {
          line: 74,
          column: 6
        },
        end: {
          line: 79,
          column: 8
        }
      },
      "9": {
        start: {
          line: 87,
          column: 32
        },
        end: {
          line: 87,
          column: 34
        }
      },
      "10": {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 114,
          column: 5
        }
      },
      "11": {
        start: {
          line: 91,
          column: 22
        },
        end: {
          line: 91,
          column: 54
        }
      },
      "12": {
        start: {
          line: 92,
          column: 6
        },
        end: {
          line: 92,
          column: 31
        }
      },
      "13": {
        start: {
          line: 92,
          column: 21
        },
        end: {
          line: 92,
          column: 30
        }
      },
      "14": {
        start: {
          line: 95,
          column: 6
        },
        end: {
          line: 95,
          column: 28
        }
      },
      "15": {
        start: {
          line: 98,
          column: 6
        },
        end: {
          line: 113,
          column: 7
        }
      },
      "16": {
        start: {
          line: 100,
          column: 8
        },
        end: {
          line: 104,
          column: 9
        }
      },
      "17": {
        start: {
          line: 101,
          column: 10
        },
        end: {
          line: 103,
          column: 11
        }
      },
      "18": {
        start: {
          line: 102,
          column: 12
        },
        end: {
          line: 102,
          column: 21
        }
      },
      "19": {
        start: {
          line: 106,
          column: 8
        },
        end: {
          line: 112,
          column: 11
        }
      },
      "20": {
        start: {
          line: 117,
          column: 4
        },
        end: {
          line: 117,
          column: 63
        }
      },
      "21": {
        start: {
          line: 117,
          column: 34
        },
        end: {
          line: 117,
          column: 61
        }
      },
      "22": {
        start: {
          line: 124,
          column: 25
        },
        end: {
          line: 124,
          column: 31
        }
      },
      "23": {
        start: {
          line: 125,
          column: 17
        },
        end: {
          line: 125,
          column: 18
        }
      },
      "24": {
        start: {
          line: 128,
          column: 4
        },
        end: {
          line: 144,
          column: 5
        }
      },
      "25": {
        start: {
          line: 129,
          column: 28
        },
        end: {
          line: 129,
          column: 53
        }
      },
      "26": {
        start: {
          line: 130,
          column: 26
        },
        end: {
          line: 130,
          column: 49
        }
      },
      "27": {
        start: {
          line: 132,
          column: 28
        },
        end: {
          line: 134,
          column: 38
        }
      },
      "28": {
        start: {
          line: 137,
          column: 6
        },
        end: {
          line: 140,
          column: 46
        }
      },
      "29": {
        start: {
          line: 143,
          column: 6
        },
        end: {
          line: 143,
          column: 75
        }
      },
      "30": {
        start: {
          line: 146,
          column: 4
        },
        end: {
          line: 146,
          column: 26
        }
      },
      "31": {
        start: {
          line: 153,
          column: 4
        },
        end: {
          line: 172,
          column: 5
        }
      },
      "32": {
        start: {
          line: 155,
          column: 8
        },
        end: {
          line: 155,
          column: 34
        }
      },
      "33": {
        start: {
          line: 157,
          column: 8
        },
        end: {
          line: 157,
          column: 34
        }
      },
      "34": {
        start: {
          line: 159,
          column: 8
        },
        end: {
          line: 159,
          column: 29
        }
      },
      "35": {
        start: {
          line: 161,
          column: 8
        },
        end: {
          line: 161,
          column: 37
        }
      },
      "36": {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 163,
          column: 33
        }
      },
      "37": {
        start: {
          line: 165,
          column: 8
        },
        end: {
          line: 165,
          column: 28
        }
      },
      "38": {
        start: {
          line: 167,
          column: 8
        },
        end: {
          line: 167,
          column: 36
        }
      },
      "39": {
        start: {
          line: 169,
          column: 8
        },
        end: {
          line: 169,
          column: 33
        }
      },
      "40": {
        start: {
          line: 171,
          column: 8
        },
        end: {
          line: 171,
          column: 44
        }
      },
      "41": {
        start: {
          line: 180,
          column: 4
        },
        end: {
          line: 195,
          column: 5
        }
      },
      "42": {
        start: {
          line: 185,
          column: 8
        },
        end: {
          line: 185,
          column: 20
        }
      },
      "43": {
        start: {
          line: 188,
          column: 8
        },
        end: {
          line: 188,
          column: 20
        }
      },
      "44": {
        start: {
          line: 190,
          column: 8
        },
        end: {
          line: 190,
          column: 20
        }
      },
      "45": {
        start: {
          line: 192,
          column: 8
        },
        end: {
          line: 192,
          column: 20
        }
      },
      "46": {
        start: {
          line: 194,
          column: 8
        },
        end: {
          line: 194,
          column: 19
        }
      },
      "47": {
        start: {
          line: 204,
          column: 24
        },
        end: {
          line: 208,
          column: 5
        }
      },
      "48": {
        start: {
          line: 210,
          column: 4
        },
        end: {
          line: 212,
          column: 5
        }
      },
      "49": {
        start: {
          line: 210,
          column: 33
        },
        end: {
          line: 210,
          column: 53
        }
      },
      "50": {
        start: {
          line: 211,
          column: 6
        },
        end: {
          line: 211,
          column: 19
        }
      },
      "51": {
        start: {
          line: 215,
          column: 26
        },
        end: {
          line: 215,
          column: 90
        }
      },
      "52": {
        start: {
          line: 216,
          column: 27
        },
        end: {
          line: 216,
          column: 88
        }
      },
      "53": {
        start: {
          line: 218,
          column: 4
        },
        end: {
          line: 220,
          column: 5
        }
      },
      "54": {
        start: {
          line: 218,
          column: 41
        },
        end: {
          line: 218,
          column: 74
        }
      },
      "55": {
        start: {
          line: 219,
          column: 6
        },
        end: {
          line: 219,
          column: 18
        }
      },
      "56": {
        start: {
          line: 223,
          column: 18
        },
        end: {
          line: 223,
          column: 36
        }
      },
      "57": {
        start: {
          line: 224,
          column: 4
        },
        end: {
          line: 226,
          column: 5
        }
      },
      "58": {
        start: {
          line: 225,
          column: 6
        },
        end: {
          line: 225,
          column: 18
        }
      },
      "59": {
        start: {
          line: 229,
          column: 4
        },
        end: {
          line: 229,
          column: 29
        }
      },
      "60": {
        start: {
          line: 236,
          column: 4
        },
        end: {
          line: 236,
          column: 48
        }
      },
      "61": {
        start: {
          line: 243,
          column: 4
        },
        end: {
          line: 243,
          column: 30
        }
      },
      "62": {
        start: {
          line: 251,
          column: 2
        },
        end: {
          line: 251,
          column: 35
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 48,
            column: 2
          },
          end: {
            line: 48,
            column: 3
          }
        },
        loc: {
          start: {
            line: 48,
            column: 57
          },
          end: {
            line: 50,
            column: 3
          }
        },
        line: 48
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 55,
            column: 2
          },
          end: {
            line: 55,
            column: 3
          }
        },
        loc: {
          start: {
            line: 55,
            column: 57
          },
          end: {
            line: 81,
            column: 3
          }
        },
        line: 55
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 86,
            column: 2
          },
          end: {
            line: 86,
            column: 3
          }
        },
        loc: {
          start: {
            line: 86,
            column: 55
          },
          end: {
            line: 118,
            column: 3
          }
        },
        line: 86
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 117,
            column: 24
          },
          end: {
            line: 117,
            column: 25
          }
        },
        loc: {
          start: {
            line: 117,
            column: 34
          },
          end: {
            line: 117,
            column: 61
          }
        },
        line: 117
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 123,
            column: 2
          },
          end: {
            line: 123,
            column: 3
          }
        },
        loc: {
          start: {
            line: 123,
            column: 72
          },
          end: {
            line: 147,
            column: 3
          }
        },
        line: 123
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 152,
            column: 2
          },
          end: {
            line: 152,
            column: 3
          }
        },
        loc: {
          start: {
            line: 152,
            column: 71
          },
          end: {
            line: 173,
            column: 3
          }
        },
        line: 152
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 178,
            column: 2
          },
          end: {
            line: 178,
            column: 3
          }
        },
        loc: {
          start: {
            line: 178,
            column: 69
          },
          end: {
            line: 196,
            column: 3
          }
        },
        line: 178
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 202,
            column: 2
          },
          end: {
            line: 202,
            column: 3
          }
        },
        loc: {
          start: {
            line: 202,
            column: 80
          },
          end: {
            line: 230,
            column: 3
          }
        },
        line: 202
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 210,
            column: 25
          },
          end: {
            line: 210,
            column: 26
          }
        },
        loc: {
          start: {
            line: 210,
            column: 33
          },
          end: {
            line: 210,
            column: 53
          }
        },
        line: 210
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 218,
            column: 28
          },
          end: {
            line: 218,
            column: 29
          }
        },
        loc: {
          start: {
            line: 218,
            column: 41
          },
          end: {
            line: 218,
            column: 74
          }
        },
        line: 218
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 235,
            column: 2
          },
          end: {
            line: 235,
            column: 3
          }
        },
        loc: {
          start: {
            line: 235,
            column: 59
          },
          end: {
            line: 237,
            column: 3
          }
        },
        line: 235
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 242,
            column: 2
          },
          end: {
            line: 242,
            column: 3
          }
        },
        loc: {
          start: {
            line: 242,
            column: 35
          },
          end: {
            line: 244,
            column: 3
          }
        },
        line: 242
      },
      "12": {
        name: "createPrivacyFilter",
        decl: {
          start: {
            line: 250,
            column: 16
          },
          end: {
            line: 250,
            column: 35
          }
        },
        loc: {
          start: {
            line: 250,
            column: 90
          },
          end: {
            line: 252,
            column: 1
          }
        },
        line: 250
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 48,
            column: 14
          },
          end: {
            line: 48,
            column: 55
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 48,
            column: 53
          },
          end: {
            line: 48,
            column: 55
          }
        }],
        line: 48
      },
      "1": {
        loc: {
          start: {
            line: 61,
            column: 29
          },
          end: {
            line: 63,
            column: 16
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 62,
            column: 10
          },
          end: {
            line: 62,
            column: 47
          }
        }, {
          start: {
            line: 63,
            column: 10
          },
          end: {
            line: 63,
            column: 16
          }
        }],
        line: 61
      },
      "2": {
        loc: {
          start: {
            line: 92,
            column: 6
          },
          end: {
            line: 92,
            column: 31
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 92,
            column: 6
          },
          end: {
            line: 92,
            column: 31
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 92
      },
      "3": {
        loc: {
          start: {
            line: 100,
            column: 8
          },
          end: {
            line: 104,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 100,
            column: 8
          },
          end: {
            line: 104,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 100
      },
      "4": {
        loc: {
          start: {
            line: 101,
            column: 10
          },
          end: {
            line: 103,
            column: 11
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 101,
            column: 10
          },
          end: {
            line: 103,
            column: 11
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 101
      },
      "5": {
        loc: {
          start: {
            line: 132,
            column: 28
          },
          end: {
            line: 134,
            column: 38
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 133,
            column: 10
          },
          end: {
            line: 133,
            column: 61
          }
        }, {
          start: {
            line: 134,
            column: 10
          },
          end: {
            line: 134,
            column: 38
          }
        }],
        line: 132
      },
      "6": {
        loc: {
          start: {
            line: 153,
            column: 4
          },
          end: {
            line: 172,
            column: 5
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 154,
            column: 6
          },
          end: {
            line: 155,
            column: 34
          }
        }, {
          start: {
            line: 156,
            column: 6
          },
          end: {
            line: 157,
            column: 34
          }
        }, {
          start: {
            line: 158,
            column: 6
          },
          end: {
            line: 159,
            column: 29
          }
        }, {
          start: {
            line: 160,
            column: 6
          },
          end: {
            line: 161,
            column: 37
          }
        }, {
          start: {
            line: 162,
            column: 6
          },
          end: {
            line: 163,
            column: 33
          }
        }, {
          start: {
            line: 164,
            column: 6
          },
          end: {
            line: 165,
            column: 28
          }
        }, {
          start: {
            line: 166,
            column: 6
          },
          end: {
            line: 167,
            column: 36
          }
        }, {
          start: {
            line: 168,
            column: 6
          },
          end: {
            line: 169,
            column: 33
          }
        }, {
          start: {
            line: 170,
            column: 6
          },
          end: {
            line: 171,
            column: 44
          }
        }],
        line: 153
      },
      "7": {
        loc: {
          start: {
            line: 180,
            column: 4
          },
          end: {
            line: 195,
            column: 5
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 181,
            column: 6
          },
          end: {
            line: 181,
            column: 25
          }
        }, {
          start: {
            line: 182,
            column: 6
          },
          end: {
            line: 182,
            column: 23
          }
        }, {
          start: {
            line: 183,
            column: 6
          },
          end: {
            line: 183,
            column: 31
          }
        }, {
          start: {
            line: 184,
            column: 6
          },
          end: {
            line: 185,
            column: 20
          }
        }, {
          start: {
            line: 186,
            column: 6
          },
          end: {
            line: 186,
            column: 25
          }
        }, {
          start: {
            line: 187,
            column: 6
          },
          end: {
            line: 188,
            column: 20
          }
        }, {
          start: {
            line: 189,
            column: 6
          },
          end: {
            line: 190,
            column: 20
          }
        }, {
          start: {
            line: 191,
            column: 6
          },
          end: {
            line: 192,
            column: 20
          }
        }, {
          start: {
            line: 193,
            column: 6
          },
          end: {
            line: 194,
            column: 19
          }
        }],
        line: 180
      },
      "8": {
        loc: {
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 212,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 212,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 210
      },
      "9": {
        loc: {
          start: {
            line: 218,
            column: 4
          },
          end: {
            line: 220,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 218,
            column: 4
          },
          end: {
            line: 220,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 218
      },
      "10": {
        loc: {
          start: {
            line: 224,
            column: 4
          },
          end: {
            line: 226,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 224,
            column: 4
          },
          end: {
            line: 226,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 224
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0
    },
    b: {
      "0": [0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0, 0, 0, 0, 0, 0, 0, 0],
      "7": [0, 0, 0, 0, 0, 0, 0, 0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "be1b3b2662dfae8ffcd840e754e57caa00024c2a"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_10pwuqtdt7 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_10pwuqtdt7();
/**
 * Privacy Filter - PII Detection and Redaction
 * Detects and redacts personally identifiable information
 */

import { PIIType } from '../types';
/**
 * Default configuration for privacy filter
 */
const DEFAULT_CONFIG =
/* istanbul ignore next */
(cov_10pwuqtdt7().s[0]++, {
  enabled: true,
  timeout: 5000,
  strictMode: true,
  piiTypesToDetect: Object.values(PIIType),
  redactionPattern: '[REDACTED]',
  preserveFormat: false
});

/**
 * PII detection patterns
 */
const PII_PATTERNS =
/* istanbul ignore next */
(cov_10pwuqtdt7().s[1]++, {
  [PIIType.EMAIL]: /\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,
  [PIIType.PHONE]: /\b(?:\+?1[-.\s]?)?\(?([0-9]{3})\)?[-.\s]?([0-9]{3})[-.\s]?([0-9]{4})\b/g,
  [PIIType.SSN]: /\b\d{3}-\d{2}-\d{4}\b/g,
  [PIIType.CREDIT_CARD]: /\b(?:\d{4}[-\s]?){3}\d{4}\b/g,
  [PIIType.IP_ADDRESS]: /\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/g,
  [PIIType.DATE_OF_BIRTH]: /\b(?:0[1-9]|1[0-2])[-/](?:0[1-9]|[12][0-9]|3[01])[-/](?:19|20)\d{2}\b/g,
  // Address pattern - simplified for common formats
  [PIIType.ADDRESS]: /\b\d+\s+[A-Za-z0-9\s,]+(?:Street|St|Avenue|Ave|Road|Rd|Boulevard|Blvd|Lane|Ln|Drive|Dr|Court|Ct|Circle|Cir|Way)\b/gi,
  // Name pattern - basic detection of capitalized words (2-4 words)
  [PIIType.NAME]: /\b[A-Z][a-z]+(?:\s+[A-Z][a-z]+){1,3}\b/g
});

/**
 * Privacy Filter implementation
 */
export class PrivacyFilter {
  constructor(config =
  /* istanbul ignore next */
  (cov_10pwuqtdt7().b[0][0]++, {})) {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[0]++;
    cov_10pwuqtdt7().s[2]++;
    this.config = {
      ...DEFAULT_CONFIG,
      ...config
    };
  }

  /**
   * Filter PII from output
   */
  async filterPII(output) {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[1]++;
    cov_10pwuqtdt7().s[3]++;
    try {
      // Detect all PII
      const matches =
      /* istanbul ignore next */
      (cov_10pwuqtdt7().s[4]++, await this.detectPII(output));

      // Redact PII if found
      const filteredOutput =
      /* istanbul ignore next */
      (cov_10pwuqtdt7().s[5]++, matches.length > 0 ?
      /* istanbul ignore next */
      (cov_10pwuqtdt7().b[1][0]++, await this.redactPII(output, matches)) :
      /* istanbul ignore next */
      (cov_10pwuqtdt7().b[1][1]++, output));
      /* istanbul ignore next */
      cov_10pwuqtdt7().s[6]++;
      return {
        hasPII: matches.length > 0,
        matches,
        filteredOutput,
        redactionCount: matches.length
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_10pwuqtdt7().s[7]++;
      console.error('Privacy filter error:', error);
      // In case of error, return original output but flag as having potential PII
      /* istanbul ignore next */
      cov_10pwuqtdt7().s[8]++;
      return {
        hasPII: false,
        matches: [],
        filteredOutput: output,
        redactionCount: 0
      };
    }
  }

  /**
   * Detect PII in text
   */
  async detectPII(output) {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[2]++;
    const matches =
    /* istanbul ignore next */
    (cov_10pwuqtdt7().s[9]++, []);

    // Check each PII type that's enabled
    /* istanbul ignore next */
    cov_10pwuqtdt7().s[10]++;
    for (const piiType of this.config.piiTypesToDetect) {
      const pattern =
      /* istanbul ignore next */
      (cov_10pwuqtdt7().s[11]++, PII_PATTERNS[piiType]);
      /* istanbul ignore next */
      cov_10pwuqtdt7().s[12]++;
      if (!pattern) {
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[2][0]++;
        cov_10pwuqtdt7().s[13]++;
        continue;
      } else
      /* istanbul ignore next */
      {
        cov_10pwuqtdt7().b[2][1]++;
      }

      // Reset regex lastIndex
      cov_10pwuqtdt7().s[14]++;
      pattern.lastIndex = 0;
      let match;
      /* istanbul ignore next */
      cov_10pwuqtdt7().s[15]++;
      while ((match = pattern.exec(output)) !== null) {
        /* istanbul ignore next */
        cov_10pwuqtdt7().s[16]++;
        // Additional validation for name detection to reduce false positives
        if (piiType === PIIType.NAME) {
          /* istanbul ignore next */
          cov_10pwuqtdt7().b[3][0]++;
          cov_10pwuqtdt7().s[17]++;
          if (!this.isLikelyName(match[0], output, match.index)) {
            /* istanbul ignore next */
            cov_10pwuqtdt7().b[4][0]++;
            cov_10pwuqtdt7().s[18]++;
            continue;
          } else
          /* istanbul ignore next */
          {
            cov_10pwuqtdt7().b[4][1]++;
          }
        } else
        /* istanbul ignore next */
        {
          cov_10pwuqtdt7().b[3][1]++;
        }
        cov_10pwuqtdt7().s[19]++;
        matches.push({
          type: piiType,
          value: match[0],
          startIndex: match.index,
          endIndex: match.index + match[0].length,
          confidence: this.calculateConfidence(piiType, match[0])
        });
      }
    }

    // Sort matches by start index for proper redaction
    /* istanbul ignore next */
    cov_10pwuqtdt7().s[20]++;
    return matches.sort((a, b) => {
      /* istanbul ignore next */
      cov_10pwuqtdt7().f[3]++;
      cov_10pwuqtdt7().s[21]++;
      return a.startIndex - b.startIndex;
    });
  }

  /**
   * Redact PII from text
   */
  async redactPII(output, matches) {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[4]++;
    let redactedOutput =
    /* istanbul ignore next */
    (cov_10pwuqtdt7().s[22]++, output);
    let offset =
    /* istanbul ignore next */
    (cov_10pwuqtdt7().s[23]++, 0);

    // Process matches in order
    /* istanbul ignore next */
    cov_10pwuqtdt7().s[24]++;
    for (const match of matches) {
      const adjustedStart =
      /* istanbul ignore next */
      (cov_10pwuqtdt7().s[25]++, match.startIndex + offset);
      const adjustedEnd =
      /* istanbul ignore next */
      (cov_10pwuqtdt7().s[26]++, match.endIndex + offset);
      const redactionText =
      /* istanbul ignore next */
      (cov_10pwuqtdt7().s[27]++, this.config.preserveFormat ?
      /* istanbul ignore next */
      (cov_10pwuqtdt7().b[5][0]++, this.getFormattedRedaction(match.type, match.value)) :
      /* istanbul ignore next */
      (cov_10pwuqtdt7().b[5][1]++, this.config.redactionPattern));

      // Replace the PII with redaction text
      /* istanbul ignore next */
      cov_10pwuqtdt7().s[28]++;
      redactedOutput = redactedOutput.substring(0, adjustedStart) + redactionText + redactedOutput.substring(adjustedEnd);

      // Update offset for next replacement
      /* istanbul ignore next */
      cov_10pwuqtdt7().s[29]++;
      offset += redactionText.length - (match.endIndex - match.startIndex);
    }
    /* istanbul ignore next */
    cov_10pwuqtdt7().s[30]++;
    return redactedOutput;
  }

  /**
   * Get formatted redaction that preserves structure
   */
  getFormattedRedaction(type, _value) {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[5]++;
    cov_10pwuqtdt7().s[31]++;
    switch (type) {
      case PIIType.EMAIL:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][0]++;
        cov_10pwuqtdt7().s[32]++;
        return '[EMAIL_REDACTED]';
      case PIIType.PHONE:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][1]++;
        cov_10pwuqtdt7().s[33]++;
        return '[PHONE_REDACTED]';
      case PIIType.SSN:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][2]++;
        cov_10pwuqtdt7().s[34]++;
        return 'XXX-XX-XXXX';
      case PIIType.CREDIT_CARD:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][3]++;
        cov_10pwuqtdt7().s[35]++;
        return 'XXXX-XXXX-XXXX-XXXX';
      case PIIType.IP_ADDRESS:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][4]++;
        cov_10pwuqtdt7().s[36]++;
        return 'XXX.XXX.XXX.XXX';
      case PIIType.DATE_OF_BIRTH:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][5]++;
        cov_10pwuqtdt7().s[37]++;
        return 'XX/XX/XXXX';
      case PIIType.ADDRESS:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][6]++;
        cov_10pwuqtdt7().s[38]++;
        return '[ADDRESS_REDACTED]';
      case PIIType.NAME:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][7]++;
        cov_10pwuqtdt7().s[39]++;
        return '[NAME_REDACTED]';
      default:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[6][8]++;
        cov_10pwuqtdt7().s[40]++;
        return this.config.redactionPattern;
    }
  }

  /**
   * Calculate confidence score for PII detection
   */
  calculateConfidence(type, _value) {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[6]++;
    cov_10pwuqtdt7().s[41]++;
    // Higher confidence for more structured data
    switch (type) {
      case PIIType.EMAIL:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][0]++;
      case PIIType.SSN:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][1]++;
      case PIIType.CREDIT_CARD:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][2]++;
      case PIIType.IP_ADDRESS:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][3]++;
        cov_10pwuqtdt7().s[42]++;
        return 0.95;
      case PIIType.PHONE:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][4]++;
      case PIIType.DATE_OF_BIRTH:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][5]++;
        cov_10pwuqtdt7().s[43]++;
        return 0.85;
      case PIIType.ADDRESS:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][6]++;
        cov_10pwuqtdt7().s[44]++;
        return 0.75;
      case PIIType.NAME:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][7]++;
        cov_10pwuqtdt7().s[45]++;
        return 0.65;
      // Lower confidence due to potential false positives
      default:
        /* istanbul ignore next */
        cov_10pwuqtdt7().b[7][8]++;
        cov_10pwuqtdt7().s[46]++;
        return 0.5;
    }
  }

  /**
   * Check if a matched string is likely a real name
   * Reduces false positives by checking context
   */
  isLikelyName(match, fullText, index) {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[7]++;
    // Skip if it's a common word or phrase
    const commonWords =
    /* istanbul ignore next */
    (cov_10pwuqtdt7().s[47]++, ['The United States', 'New York', 'Los Angeles', 'San Francisco', 'United Kingdom', 'South Africa', 'North America', 'South America', 'Middle East', 'East Coast', 'West Coast', 'Central Park']);
    /* istanbul ignore next */
    cov_10pwuqtdt7().s[48]++;
    if (commonWords.some(word => {
      /* istanbul ignore next */
      cov_10pwuqtdt7().f[8]++;
      cov_10pwuqtdt7().s[49]++;
      return match.includes(word);
    })) {
      /* istanbul ignore next */
      cov_10pwuqtdt7().b[8][0]++;
      cov_10pwuqtdt7().s[50]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_10pwuqtdt7().b[8][1]++;
    }

    // Check if preceded by name indicators
    const precedingText =
    /* istanbul ignore next */
    (cov_10pwuqtdt7().s[51]++, fullText.substring(Math.max(0, index - 20), index).toLowerCase());
    const nameIndicators =
    /* istanbul ignore next */
    (cov_10pwuqtdt7().s[52]++, ['mr.', 'mrs.', 'ms.', 'dr.', 'prof.', 'by ', 'from ', 'to ']);
    /* istanbul ignore next */
    cov_10pwuqtdt7().s[53]++;
    if (nameIndicators.some(indicator => {
      /* istanbul ignore next */
      cov_10pwuqtdt7().f[9]++;
      cov_10pwuqtdt7().s[54]++;
      return precedingText.includes(indicator);
    })) {
      /* istanbul ignore next */
      cov_10pwuqtdt7().b[9][0]++;
      cov_10pwuqtdt7().s[55]++;
      return true;
    } else
    /* istanbul ignore next */
    {
      cov_10pwuqtdt7().b[9][1]++;
    }

    // If it's 2 capitalized words, it's likely a name
    const words =
    /* istanbul ignore next */
    (cov_10pwuqtdt7().s[56]++, match.split(/\s+/));
    /* istanbul ignore next */
    cov_10pwuqtdt7().s[57]++;
    if (words.length === 2) {
      /* istanbul ignore next */
      cov_10pwuqtdt7().b[10][0]++;
      cov_10pwuqtdt7().s[58]++;
      return true;
    } else
    /* istanbul ignore next */
    {
      cov_10pwuqtdt7().b[10][1]++;
    }

    // For 3+ words, be more conservative
    cov_10pwuqtdt7().s[59]++;
    return words.length <= 4;
  }

  /**
   * Update configuration
   */
  updateConfig(config) {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[10]++;
    cov_10pwuqtdt7().s[60]++;
    this.config = {
      ...this.config,
      ...config
    };
  }

  /**
   * Get current configuration
   */
  getConfig() {
    /* istanbul ignore next */
    cov_10pwuqtdt7().f[11]++;
    cov_10pwuqtdt7().s[61]++;
    return {
      ...this.config
    };
  }
}

/**
 * Create a privacy filter instance
 */
export function createPrivacyFilter(config) {
  /* istanbul ignore next */
  cov_10pwuqtdt7().f[12]++;
  cov_10pwuqtdt7().s[62]++;
  return new PrivacyFilter(config);
}

/**
 * Export default instance
 */
export default createPrivacyFilter();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTBwd3VxdGR0NyIsImFjdHVhbENvdmVyYWdlIiwiUElJVHlwZSIsIkRFRkFVTFRfQ09ORklHIiwicyIsImVuYWJsZWQiLCJ0aW1lb3V0Iiwic3RyaWN0TW9kZSIsInBpaVR5cGVzVG9EZXRlY3QiLCJPYmplY3QiLCJ2YWx1ZXMiLCJyZWRhY3Rpb25QYXR0ZXJuIiwicHJlc2VydmVGb3JtYXQiLCJQSUlfUEFUVEVSTlMiLCJFTUFJTCIsIlBIT05FIiwiU1NOIiwiQ1JFRElUX0NBUkQiLCJJUF9BRERSRVNTIiwiREFURV9PRl9CSVJUSCIsIkFERFJFU1MiLCJOQU1FIiwiUHJpdmFjeUZpbHRlciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiYiIsImYiLCJmaWx0ZXJQSUkiLCJvdXRwdXQiLCJtYXRjaGVzIiwiZGV0ZWN0UElJIiwiZmlsdGVyZWRPdXRwdXQiLCJsZW5ndGgiLCJyZWRhY3RQSUkiLCJoYXNQSUkiLCJyZWRhY3Rpb25Db3VudCIsImVycm9yIiwiY29uc29sZSIsInBpaVR5cGUiLCJwYXR0ZXJuIiwibGFzdEluZGV4IiwibWF0Y2giLCJleGVjIiwiaXNMaWtlbHlOYW1lIiwiaW5kZXgiLCJwdXNoIiwidHlwZSIsInZhbHVlIiwic3RhcnRJbmRleCIsImVuZEluZGV4IiwiY29uZmlkZW5jZSIsImNhbGN1bGF0ZUNvbmZpZGVuY2UiLCJzb3J0IiwiYSIsInJlZGFjdGVkT3V0cHV0Iiwib2Zmc2V0IiwiYWRqdXN0ZWRTdGFydCIsImFkanVzdGVkRW5kIiwicmVkYWN0aW9uVGV4dCIsImdldEZvcm1hdHRlZFJlZGFjdGlvbiIsInN1YnN0cmluZyIsIl92YWx1ZSIsImZ1bGxUZXh0IiwiY29tbW9uV29yZHMiLCJzb21lIiwid29yZCIsImluY2x1ZGVzIiwicHJlY2VkaW5nVGV4dCIsIk1hdGgiLCJtYXgiLCJ0b0xvd2VyQ2FzZSIsIm5hbWVJbmRpY2F0b3JzIiwiaW5kaWNhdG9yIiwid29yZHMiLCJzcGxpdCIsInVwZGF0ZUNvbmZpZyIsImdldENvbmZpZyIsImNyZWF0ZVByaXZhY3lGaWx0ZXIiXSwic291cmNlcyI6WyJwcml2YWN5LWZpbHRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByaXZhY3kgRmlsdGVyIC0gUElJIERldGVjdGlvbiBhbmQgUmVkYWN0aW9uXG4gKiBEZXRlY3RzIGFuZCByZWRhY3RzIHBlcnNvbmFsbHkgaWRlbnRpZmlhYmxlIGluZm9ybWF0aW9uXG4gKi9cblxuaW1wb3J0IHtcbiAgSVByaXZhY3lGaWx0ZXIsXG4gIEZpbHRlclJlc3VsdCxcbiAgUElJTWF0Y2gsXG4gIFBJSVR5cGVcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUHJpdmFjeUZpbHRlckNvbmZpZyB9IGZyb20gJy4uL3R5cGVzL3ZhbGlkYXRvcnMnO1xuXG4vKipcbiAqIERlZmF1bHQgY29uZmlndXJhdGlvbiBmb3IgcHJpdmFjeSBmaWx0ZXJcbiAqL1xuY29uc3QgREVGQVVMVF9DT05GSUc6IFByaXZhY3lGaWx0ZXJDb25maWcgPSB7XG4gIGVuYWJsZWQ6IHRydWUsXG4gIHRpbWVvdXQ6IDUwMDAsXG4gIHN0cmljdE1vZGU6IHRydWUsXG4gIHBpaVR5cGVzVG9EZXRlY3Q6IE9iamVjdC52YWx1ZXMoUElJVHlwZSksXG4gIHJlZGFjdGlvblBhdHRlcm46ICdbUkVEQUNURURdJyxcbiAgcHJlc2VydmVGb3JtYXQ6IGZhbHNlXG59O1xuXG4vKipcbiAqIFBJSSBkZXRlY3Rpb24gcGF0dGVybnNcbiAqL1xuY29uc3QgUElJX1BBVFRFUk5TOiBSZWNvcmQ8UElJVHlwZSwgUmVnRXhwPiA9IHtcbiAgW1BJSVR5cGUuRU1BSUxdOiAvXFxiW0EtWmEtejAtOS5fJSstXStAW0EtWmEtejAtOS4tXStcXC5bQS1afGEtel17Mix9XFxiL2csXG4gIFtQSUlUeXBlLlBIT05FXTogL1xcYig/OlxcKz8xWy0uXFxzXT8pP1xcKD8oWzAtOV17M30pXFwpP1stLlxcc10/KFswLTldezN9KVstLlxcc10/KFswLTldezR9KVxcYi9nLFxuICBbUElJVHlwZS5TU05dOiAvXFxiXFxkezN9LVxcZHsyfS1cXGR7NH1cXGIvZyxcbiAgW1BJSVR5cGUuQ1JFRElUX0NBUkRdOiAvXFxiKD86XFxkezR9Wy1cXHNdPyl7M31cXGR7NH1cXGIvZyxcbiAgW1BJSVR5cGUuSVBfQUREUkVTU106IC9cXGIoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXGIvZyxcbiAgW1BJSVR5cGUuREFURV9PRl9CSVJUSF06IC9cXGIoPzowWzEtOV18MVswLTJdKVstL10oPzowWzEtOV18WzEyXVswLTldfDNbMDFdKVstL10oPzoxOXwyMClcXGR7Mn1cXGIvZyxcbiAgLy8gQWRkcmVzcyBwYXR0ZXJuIC0gc2ltcGxpZmllZCBmb3IgY29tbW9uIGZvcm1hdHNcbiAgW1BJSVR5cGUuQUREUkVTU106IC9cXGJcXGQrXFxzK1tBLVphLXowLTlcXHMsXSsoPzpTdHJlZXR8U3R8QXZlbnVlfEF2ZXxSb2FkfFJkfEJvdWxldmFyZHxCbHZkfExhbmV8TG58RHJpdmV8RHJ8Q291cnR8Q3R8Q2lyY2xlfENpcnxXYXkpXFxiL2dpLFxuICAvLyBOYW1lIHBhdHRlcm4gLSBiYXNpYyBkZXRlY3Rpb24gb2YgY2FwaXRhbGl6ZWQgd29yZHMgKDItNCB3b3JkcylcbiAgW1BJSVR5cGUuTkFNRV06IC9cXGJbQS1aXVthLXpdKyg/OlxccytbQS1aXVthLXpdKyl7MSwzfVxcYi9nXG59O1xuXG4vKipcbiAqIFByaXZhY3kgRmlsdGVyIGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBQcml2YWN5RmlsdGVyIGltcGxlbWVudHMgSVByaXZhY3lGaWx0ZXIge1xuICBwcml2YXRlIGNvbmZpZzogUHJpdmFjeUZpbHRlckNvbmZpZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBhcnRpYWw8UHJpdmFjeUZpbHRlckNvbmZpZz4gPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0geyAuLi5ERUZBVUxUX0NPTkZJRywgLi4uY29uZmlnIH07XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVyIFBJSSBmcm9tIG91dHB1dFxuICAgKi9cbiAgYXN5bmMgZmlsdGVyUElJKG91dHB1dDogc3RyaW5nKTogUHJvbWlzZTxGaWx0ZXJSZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRGV0ZWN0IGFsbCBQSUlcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBhd2FpdCB0aGlzLmRldGVjdFBJSShvdXRwdXQpO1xuXG4gICAgICAvLyBSZWRhY3QgUElJIGlmIGZvdW5kXG4gICAgICBjb25zdCBmaWx0ZXJlZE91dHB1dCA9IG1hdGNoZXMubGVuZ3RoID4gMFxuICAgICAgICA/IGF3YWl0IHRoaXMucmVkYWN0UElJKG91dHB1dCwgbWF0Y2hlcylcbiAgICAgICAgOiBvdXRwdXQ7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhhc1BJSTogbWF0Y2hlcy5sZW5ndGggPiAwLFxuICAgICAgICBtYXRjaGVzLFxuICAgICAgICBmaWx0ZXJlZE91dHB1dCxcbiAgICAgICAgcmVkYWN0aW9uQ291bnQ6IG1hdGNoZXMubGVuZ3RoXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQcml2YWN5IGZpbHRlciBlcnJvcjonLCBlcnJvcik7XG4gICAgICAvLyBJbiBjYXNlIG9mIGVycm9yLCByZXR1cm4gb3JpZ2luYWwgb3V0cHV0IGJ1dCBmbGFnIGFzIGhhdmluZyBwb3RlbnRpYWwgUElJXG4gICAgICByZXR1cm4ge1xuICAgICAgICBoYXNQSUk6IGZhbHNlLFxuICAgICAgICBtYXRjaGVzOiBbXSxcbiAgICAgICAgZmlsdGVyZWRPdXRwdXQ6IG91dHB1dCxcbiAgICAgICAgcmVkYWN0aW9uQ291bnQ6IDBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCBQSUkgaW4gdGV4dFxuICAgKi9cbiAgYXN5bmMgZGV0ZWN0UElJKG91dHB1dDogc3RyaW5nKTogUHJvbWlzZTxQSUlNYXRjaFtdPiB7XG4gICAgY29uc3QgbWF0Y2hlczogUElJTWF0Y2hbXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgZWFjaCBQSUkgdHlwZSB0aGF0J3MgZW5hYmxlZFxuICAgIGZvciAoY29uc3QgcGlpVHlwZSBvZiB0aGlzLmNvbmZpZy5waWlUeXBlc1RvRGV0ZWN0KSB7XG4gICAgICBjb25zdCBwYXR0ZXJuID0gUElJX1BBVFRFUk5TW3BpaVR5cGUgYXMgUElJVHlwZV07XG4gICAgICBpZiAoIXBhdHRlcm4pIHtjb250aW51ZTt9XG5cbiAgICAgIC8vIFJlc2V0IHJlZ2V4IGxhc3RJbmRleFxuICAgICAgcGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXG4gICAgICBsZXQgbWF0Y2g7XG4gICAgICB3aGlsZSAoKG1hdGNoID0gcGF0dGVybi5leGVjKG91dHB1dCkpICE9PSBudWxsKSB7XG4gICAgICAgIC8vIEFkZGl0aW9uYWwgdmFsaWRhdGlvbiBmb3IgbmFtZSBkZXRlY3Rpb24gdG8gcmVkdWNlIGZhbHNlIHBvc2l0aXZlc1xuICAgICAgICBpZiAocGlpVHlwZSA9PT0gUElJVHlwZS5OQU1FKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmlzTGlrZWx5TmFtZShtYXRjaFswXSwgb3V0cHV0LCBtYXRjaC5pbmRleCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG1hdGNoZXMucHVzaCh7XG4gICAgICAgICAgdHlwZTogcGlpVHlwZSBhcyBQSUlUeXBlLFxuICAgICAgICAgIHZhbHVlOiBtYXRjaFswXSxcbiAgICAgICAgICBzdGFydEluZGV4OiBtYXRjaC5pbmRleCxcbiAgICAgICAgICBlbmRJbmRleDogbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgsXG4gICAgICAgICAgY29uZmlkZW5jZTogdGhpcy5jYWxjdWxhdGVDb25maWRlbmNlKHBpaVR5cGUgYXMgUElJVHlwZSwgbWF0Y2hbMF0pXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvcnQgbWF0Y2hlcyBieSBzdGFydCBpbmRleCBmb3IgcHJvcGVyIHJlZGFjdGlvblxuICAgIHJldHVybiBtYXRjaGVzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRJbmRleCAtIGIuc3RhcnRJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogUmVkYWN0IFBJSSBmcm9tIHRleHRcbiAgICovXG4gIGFzeW5jIHJlZGFjdFBJSShvdXRwdXQ6IHN0cmluZywgbWF0Y2hlczogUElJTWF0Y2hbXSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgbGV0IHJlZGFjdGVkT3V0cHV0ID0gb3V0cHV0O1xuICAgIGxldCBvZmZzZXQgPSAwO1xuXG4gICAgLy8gUHJvY2VzcyBtYXRjaGVzIGluIG9yZGVyXG4gICAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzKSB7XG4gICAgICBjb25zdCBhZGp1c3RlZFN0YXJ0ID0gbWF0Y2guc3RhcnRJbmRleCArIG9mZnNldDtcbiAgICAgIGNvbnN0IGFkanVzdGVkRW5kID0gbWF0Y2guZW5kSW5kZXggKyBvZmZzZXQ7XG5cbiAgICAgIGNvbnN0IHJlZGFjdGlvblRleHQgPSB0aGlzLmNvbmZpZy5wcmVzZXJ2ZUZvcm1hdFxuICAgICAgICA/IHRoaXMuZ2V0Rm9ybWF0dGVkUmVkYWN0aW9uKG1hdGNoLnR5cGUsIG1hdGNoLnZhbHVlKVxuICAgICAgICA6IHRoaXMuY29uZmlnLnJlZGFjdGlvblBhdHRlcm47XG5cbiAgICAgIC8vIFJlcGxhY2UgdGhlIFBJSSB3aXRoIHJlZGFjdGlvbiB0ZXh0XG4gICAgICByZWRhY3RlZE91dHB1dCA9XG4gICAgICAgIHJlZGFjdGVkT3V0cHV0LnN1YnN0cmluZygwLCBhZGp1c3RlZFN0YXJ0KSArXG4gICAgICAgIHJlZGFjdGlvblRleHQgK1xuICAgICAgICByZWRhY3RlZE91dHB1dC5zdWJzdHJpbmcoYWRqdXN0ZWRFbmQpO1xuXG4gICAgICAvLyBVcGRhdGUgb2Zmc2V0IGZvciBuZXh0IHJlcGxhY2VtZW50XG4gICAgICBvZmZzZXQgKz0gcmVkYWN0aW9uVGV4dC5sZW5ndGggLSAobWF0Y2guZW5kSW5kZXggLSBtYXRjaC5zdGFydEluZGV4KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVkYWN0ZWRPdXRwdXQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZvcm1hdHRlZCByZWRhY3Rpb24gdGhhdCBwcmVzZXJ2ZXMgc3RydWN0dXJlXG4gICAqL1xuICBwcml2YXRlIGdldEZvcm1hdHRlZFJlZGFjdGlvbih0eXBlOiBQSUlUeXBlLCBfdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFBJSVR5cGUuRU1BSUw6XG4gICAgICAgIHJldHVybiAnW0VNQUlMX1JFREFDVEVEXSc7XG4gICAgICBjYXNlIFBJSVR5cGUuUEhPTkU6XG4gICAgICAgIHJldHVybiAnW1BIT05FX1JFREFDVEVEXSc7XG4gICAgICBjYXNlIFBJSVR5cGUuU1NOOlxuICAgICAgICByZXR1cm4gJ1hYWC1YWC1YWFhYJztcbiAgICAgIGNhc2UgUElJVHlwZS5DUkVESVRfQ0FSRDpcbiAgICAgICAgcmV0dXJuICdYWFhYLVhYWFgtWFhYWC1YWFhYJztcbiAgICAgIGNhc2UgUElJVHlwZS5JUF9BRERSRVNTOlxuICAgICAgICByZXR1cm4gJ1hYWC5YWFguWFhYLlhYWCc7XG4gICAgICBjYXNlIFBJSVR5cGUuREFURV9PRl9CSVJUSDpcbiAgICAgICAgcmV0dXJuICdYWC9YWC9YWFhYJztcbiAgICAgIGNhc2UgUElJVHlwZS5BRERSRVNTOlxuICAgICAgICByZXR1cm4gJ1tBRERSRVNTX1JFREFDVEVEXSc7XG4gICAgICBjYXNlIFBJSVR5cGUuTkFNRTpcbiAgICAgICAgcmV0dXJuICdbTkFNRV9SRURBQ1RFRF0nO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLnJlZGFjdGlvblBhdHRlcm47XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBjb25maWRlbmNlIHNjb3JlIGZvciBQSUkgZGV0ZWN0aW9uXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZUNvbmZpZGVuY2UodHlwZTogUElJVHlwZSwgX3ZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIC8vIEhpZ2hlciBjb25maWRlbmNlIGZvciBtb3JlIHN0cnVjdHVyZWQgZGF0YVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBQSUlUeXBlLkVNQUlMOlxuICAgICAgY2FzZSBQSUlUeXBlLlNTTjpcbiAgICAgIGNhc2UgUElJVHlwZS5DUkVESVRfQ0FSRDpcbiAgICAgIGNhc2UgUElJVHlwZS5JUF9BRERSRVNTOlxuICAgICAgICByZXR1cm4gMC45NTtcbiAgICAgIGNhc2UgUElJVHlwZS5QSE9ORTpcbiAgICAgIGNhc2UgUElJVHlwZS5EQVRFX09GX0JJUlRIOlxuICAgICAgICByZXR1cm4gMC44NTtcbiAgICAgIGNhc2UgUElJVHlwZS5BRERSRVNTOlxuICAgICAgICByZXR1cm4gMC43NTtcbiAgICAgIGNhc2UgUElJVHlwZS5OQU1FOlxuICAgICAgICByZXR1cm4gMC42NTsgLy8gTG93ZXIgY29uZmlkZW5jZSBkdWUgdG8gcG90ZW50aWFsIGZhbHNlIHBvc2l0aXZlc1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDAuNTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBtYXRjaGVkIHN0cmluZyBpcyBsaWtlbHkgYSByZWFsIG5hbWVcbiAgICogUmVkdWNlcyBmYWxzZSBwb3NpdGl2ZXMgYnkgY2hlY2tpbmcgY29udGV4dFxuICAgKi9cbiAgcHJpdmF0ZSBpc0xpa2VseU5hbWUobWF0Y2g6IHN0cmluZywgZnVsbFRleHQ6IHN0cmluZywgaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIC8vIFNraXAgaWYgaXQncyBhIGNvbW1vbiB3b3JkIG9yIHBocmFzZVxuICAgIGNvbnN0IGNvbW1vbldvcmRzID0gW1xuICAgICAgJ1RoZSBVbml0ZWQgU3RhdGVzJywgJ05ldyBZb3JrJywgJ0xvcyBBbmdlbGVzJywgJ1NhbiBGcmFuY2lzY28nLFxuICAgICAgJ1VuaXRlZCBLaW5nZG9tJywgJ1NvdXRoIEFmcmljYScsICdOb3J0aCBBbWVyaWNhJywgJ1NvdXRoIEFtZXJpY2EnLFxuICAgICAgJ01pZGRsZSBFYXN0JywgJ0Vhc3QgQ29hc3QnLCAnV2VzdCBDb2FzdCcsICdDZW50cmFsIFBhcmsnXG4gICAgXTtcblxuICAgIGlmIChjb21tb25Xb3Jkcy5zb21lKHdvcmQgPT4gbWF0Y2guaW5jbHVkZXMod29yZCkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgcHJlY2VkZWQgYnkgbmFtZSBpbmRpY2F0b3JzXG4gICAgY29uc3QgcHJlY2VkaW5nVGV4dCA9IGZ1bGxUZXh0LnN1YnN0cmluZyhNYXRoLm1heCgwLCBpbmRleCAtIDIwKSwgaW5kZXgpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgbmFtZUluZGljYXRvcnMgPSBbJ21yLicsICdtcnMuJywgJ21zLicsICdkci4nLCAncHJvZi4nLCAnYnkgJywgJ2Zyb20gJywgJ3RvICddO1xuICAgIFxuICAgIGlmIChuYW1lSW5kaWNhdG9ycy5zb21lKGluZGljYXRvciA9PiBwcmVjZWRpbmdUZXh0LmluY2x1ZGVzKGluZGljYXRvcikpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBJZiBpdCdzIDIgY2FwaXRhbGl6ZWQgd29yZHMsIGl0J3MgbGlrZWx5IGEgbmFtZVxuICAgIGNvbnN0IHdvcmRzID0gbWF0Y2guc3BsaXQoL1xccysvKTtcbiAgICBpZiAod29yZHMubGVuZ3RoID09PSAyKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBGb3IgMysgd29yZHMsIGJlIG1vcmUgY29uc2VydmF0aXZlXG4gICAgcmV0dXJuIHdvcmRzLmxlbmd0aCA8PSA0O1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICB1cGRhdGVDb25maWcoY29uZmlnOiBQYXJ0aWFsPFByaXZhY3lGaWx0ZXJDb25maWc+KTogdm9pZCB7XG4gICAgdGhpcy5jb25maWcgPSB7IC4uLnRoaXMuY29uZmlnLCAuLi5jb25maWcgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBnZXRDb25maWcoKTogUHJpdmFjeUZpbHRlckNvbmZpZyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5jb25maWcgfTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHByaXZhY3kgZmlsdGVyIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcml2YWN5RmlsdGVyKGNvbmZpZz86IFBhcnRpYWw8UHJpdmFjeUZpbHRlckNvbmZpZz4pOiBQcml2YWN5RmlsdGVyIHtcbiAgcmV0dXJuIG5ldyBQcml2YWN5RmlsdGVyKGNvbmZpZyk7XG59XG5cbi8qKlxuICogRXhwb3J0IGRlZmF1bHQgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUHJpdmFjeUZpbHRlcigpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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