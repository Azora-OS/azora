{"version":3,"names":["cov_10pwuqtdt7","actualCoverage","PIIType","DEFAULT_CONFIG","s","enabled","timeout","strictMode","piiTypesToDetect","Object","values","redactionPattern","preserveFormat","PII_PATTERNS","EMAIL","PHONE","SSN","CREDIT_CARD","IP_ADDRESS","DATE_OF_BIRTH","ADDRESS","NAME","PrivacyFilter","constructor","config","b","f","filterPII","output","matches","detectPII","filteredOutput","length","redactPII","hasPII","redactionCount","error","console","piiType","pattern","lastIndex","match","exec","isLikelyName","index","push","type","value","startIndex","endIndex","confidence","calculateConfidence","sort","a","redactedOutput","offset","adjustedStart","adjustedEnd","redactionText","getFormattedRedaction","substring","_value","fullText","commonWords","some","word","includes","precedingText","Math","max","toLowerCase","nameIndicators","indicator","words","split","updateConfig","getConfig","createPrivacyFilter"],"sources":["privacy-filter.ts"],"sourcesContent":["/**\n * Privacy Filter - PII Detection and Redaction\n * Detects and redacts personally identifiable information\n */\n\nimport {\n  IPrivacyFilter,\n  FilterResult,\n  PIIMatch,\n  PIIType\n} from '../types';\nimport { PrivacyFilterConfig } from '../types/validators';\n\n/**\n * Default configuration for privacy filter\n */\nconst DEFAULT_CONFIG: PrivacyFilterConfig = {\n  enabled: true,\n  timeout: 5000,\n  strictMode: true,\n  piiTypesToDetect: Object.values(PIIType),\n  redactionPattern: '[REDACTED]',\n  preserveFormat: false\n};\n\n/**\n * PII detection patterns\n */\nconst PII_PATTERNS: Record<PIIType, RegExp> = {\n  [PIIType.EMAIL]: /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/g,\n  [PIIType.PHONE]: /\\b(?:\\+?1[-.\\s]?)?\\(?([0-9]{3})\\)?[-.\\s]?([0-9]{3})[-.\\s]?([0-9]{4})\\b/g,\n  [PIIType.SSN]: /\\b\\d{3}-\\d{2}-\\d{4}\\b/g,\n  [PIIType.CREDIT_CARD]: /\\b(?:\\d{4}[-\\s]?){3}\\d{4}\\b/g,\n  [PIIType.IP_ADDRESS]: /\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b/g,\n  [PIIType.DATE_OF_BIRTH]: /\\b(?:0[1-9]|1[0-2])[-/](?:0[1-9]|[12][0-9]|3[01])[-/](?:19|20)\\d{2}\\b/g,\n  // Address pattern - simplified for common formats\n  [PIIType.ADDRESS]: /\\b\\d+\\s+[A-Za-z0-9\\s,]+(?:Street|St|Avenue|Ave|Road|Rd|Boulevard|Blvd|Lane|Ln|Drive|Dr|Court|Ct|Circle|Cir|Way)\\b/gi,\n  // Name pattern - basic detection of capitalized words (2-4 words)\n  [PIIType.NAME]: /\\b[A-Z][a-z]+(?:\\s+[A-Z][a-z]+){1,3}\\b/g\n};\n\n/**\n * Privacy Filter implementation\n */\nexport class PrivacyFilter implements IPrivacyFilter {\n  private config: PrivacyFilterConfig;\n\n  constructor(config: Partial<PrivacyFilterConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  /**\n   * Filter PII from output\n   */\n  async filterPII(output: string): Promise<FilterResult> {\n    try {\n      // Detect all PII\n      const matches = await this.detectPII(output);\n\n      // Redact PII if found\n      const filteredOutput = matches.length > 0\n        ? await this.redactPII(output, matches)\n        : output;\n\n      return {\n        hasPII: matches.length > 0,\n        matches,\n        filteredOutput,\n        redactionCount: matches.length\n      };\n    } catch (error) {\n      console.error('Privacy filter error:', error);\n      // In case of error, return original output but flag as having potential PII\n      return {\n        hasPII: false,\n        matches: [],\n        filteredOutput: output,\n        redactionCount: 0\n      };\n    }\n  }\n\n  /**\n   * Detect PII in text\n   */\n  async detectPII(output: string): Promise<PIIMatch[]> {\n    const matches: PIIMatch[] = [];\n\n    // Check each PII type that's enabled\n    for (const piiType of this.config.piiTypesToDetect) {\n      const pattern = PII_PATTERNS[piiType as PIIType];\n      if (!pattern) {continue;}\n\n      // Reset regex lastIndex\n      pattern.lastIndex = 0;\n\n      let match;\n      while ((match = pattern.exec(output)) !== null) {\n        // Additional validation for name detection to reduce false positives\n        if (piiType === PIIType.NAME) {\n          if (!this.isLikelyName(match[0], output, match.index)) {\n            continue;\n          }\n        }\n\n        matches.push({\n          type: piiType as PIIType,\n          value: match[0],\n          startIndex: match.index,\n          endIndex: match.index + match[0].length,\n          confidence: this.calculateConfidence(piiType as PIIType, match[0])\n        });\n      }\n    }\n\n    // Sort matches by start index for proper redaction\n    return matches.sort((a, b) => a.startIndex - b.startIndex);\n  }\n\n  /**\n   * Redact PII from text\n   */\n  async redactPII(output: string, matches: PIIMatch[]): Promise<string> {\n    let redactedOutput = output;\n    let offset = 0;\n\n    // Process matches in order\n    for (const match of matches) {\n      const adjustedStart = match.startIndex + offset;\n      const adjustedEnd = match.endIndex + offset;\n\n      const redactionText = this.config.preserveFormat\n        ? this.getFormattedRedaction(match.type, match.value)\n        : this.config.redactionPattern;\n\n      // Replace the PII with redaction text\n      redactedOutput =\n        redactedOutput.substring(0, adjustedStart) +\n        redactionText +\n        redactedOutput.substring(adjustedEnd);\n\n      // Update offset for next replacement\n      offset += redactionText.length - (match.endIndex - match.startIndex);\n    }\n\n    return redactedOutput;\n  }\n\n  /**\n   * Get formatted redaction that preserves structure\n   */\n  private getFormattedRedaction(type: PIIType, _value: string): string {\n    switch (type) {\n      case PIIType.EMAIL:\n        return '[EMAIL_REDACTED]';\n      case PIIType.PHONE:\n        return '[PHONE_REDACTED]';\n      case PIIType.SSN:\n        return 'XXX-XX-XXXX';\n      case PIIType.CREDIT_CARD:\n        return 'XXXX-XXXX-XXXX-XXXX';\n      case PIIType.IP_ADDRESS:\n        return 'XXX.XXX.XXX.XXX';\n      case PIIType.DATE_OF_BIRTH:\n        return 'XX/XX/XXXX';\n      case PIIType.ADDRESS:\n        return '[ADDRESS_REDACTED]';\n      case PIIType.NAME:\n        return '[NAME_REDACTED]';\n      default:\n        return this.config.redactionPattern;\n    }\n  }\n\n  /**\n   * Calculate confidence score for PII detection\n   */\n  private calculateConfidence(type: PIIType, _value: string): number {\n    // Higher confidence for more structured data\n    switch (type) {\n      case PIIType.EMAIL:\n      case PIIType.SSN:\n      case PIIType.CREDIT_CARD:\n      case PIIType.IP_ADDRESS:\n        return 0.95;\n      case PIIType.PHONE:\n      case PIIType.DATE_OF_BIRTH:\n        return 0.85;\n      case PIIType.ADDRESS:\n        return 0.75;\n      case PIIType.NAME:\n        return 0.65; // Lower confidence due to potential false positives\n      default:\n        return 0.5;\n    }\n  }\n\n  /**\n   * Check if a matched string is likely a real name\n   * Reduces false positives by checking context\n   */\n  private isLikelyName(match: string, fullText: string, index: number): boolean {\n    // Skip if it's a common word or phrase\n    const commonWords = [\n      'The United States', 'New York', 'Los Angeles', 'San Francisco',\n      'United Kingdom', 'South Africa', 'North America', 'South America',\n      'Middle East', 'East Coast', 'West Coast', 'Central Park'\n    ];\n\n    if (commonWords.some(word => match.includes(word))) {\n      return false;\n    }\n\n    // Check if preceded by name indicators\n    const precedingText = fullText.substring(Math.max(0, index - 20), index).toLowerCase();\n    const nameIndicators = ['mr.', 'mrs.', 'ms.', 'dr.', 'prof.', 'by ', 'from ', 'to '];\n    \n    if (nameIndicators.some(indicator => precedingText.includes(indicator))) {\n      return true;\n    }\n\n    // If it's 2 capitalized words, it's likely a name\n    const words = match.split(/\\s+/);\n    if (words.length === 2) {\n      return true;\n    }\n\n    // For 3+ words, be more conservative\n    return words.length <= 4;\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<PrivacyFilterConfig>): void {\n    this.config = { ...this.config, ...config };\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): PrivacyFilterConfig {\n    return { ...this.config };\n  }\n}\n\n/**\n * Create a privacy filter instance\n */\nexport function createPrivacyFilter(config?: Partial<PrivacyFilterConfig>): PrivacyFilter {\n  return new PrivacyFilter(config);\n}\n\n/**\n * Export default instance\n */\nexport default createPrivacyFilter();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}