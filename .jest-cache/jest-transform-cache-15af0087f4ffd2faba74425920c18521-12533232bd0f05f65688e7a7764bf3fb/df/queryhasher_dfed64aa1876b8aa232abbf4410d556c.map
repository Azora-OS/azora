{"version":3,"names":["cov_1yfjfw62ei","actualCoverage","createHash","QueryHasher","hashMap","s","Map","statistics","totalHashes","uniqueQueries","collisions","averageHashTime","lastUpdated","Date","totalHashTime","constructor","config","b","f","algorithm","includeMetadata","includeContext","normalizeQuery","query","toLowerCase","trim","replace","buildHashableString","hashable","metadata","JSON","stringify","context","generateHash","startTime","now","hashableString","normalizedQuery","hash","update","digest","cacheKey","updateStatistics","hashTime","queryNormalized","timestamp","queryLength","length","hasMetadata","hasContext","error","console","generateHashFromString","queryString","normalized","generateConsistentHash","nodeCount","hashValue","parseInt","substring","generateCacheKey","prefix","generateTierCacheKey","tier","generateUserCacheKey","userId","has","set","getStatistics","resetStatistics","clear","getCollisionRate","verifyHashConsistency","expectedHash","result","generateHashBatch","queries","map","exportMetrics","toISOString","hashing","collisionRate","toFixed","queryHasher","getQueryHasher","hashQuery","hasher","hashQueryString"],"sources":["query-hasher.ts"],"sourcesContent":["/**\n * Query Hasher for Cache Key Generation\n * Implements consistent hashing, cache key generation, and statistics\n */\n\nimport { createHash } from 'crypto';\nimport { AIQuery } from './types';\n\nexport interface HashConfig {\n  algorithm: 'sha256' | 'sha1' | 'md5';\n  includeMetadata: boolean;\n  includeContext: boolean;\n  normalizeQuery: boolean;\n}\n\nexport interface QueryHashResult {\n  hash: string;\n  cacheKey: string;\n  queryNormalized: string;\n  metadata: {\n    algorithm: string;\n    timestamp: Date;\n    queryLength: number;\n    hasMetadata: boolean;\n    hasContext: boolean;\n  };\n}\n\nexport interface HashStatistics {\n  totalHashes: number;\n  uniqueQueries: number;\n  collisions: number;\n  averageHashTime: number;\n  lastUpdated: Date;\n}\n\nexport class QueryHasher {\n  private config: HashConfig;\n  private hashMap: Map<string, string> = new Map();\n  private statistics: HashStatistics = {\n    totalHashes: 0,\n    uniqueQueries: 0,\n    collisions: 0,\n    averageHashTime: 0,\n    lastUpdated: new Date()\n  };\n  private totalHashTime: number = 0;\n\n  constructor(config: Partial<HashConfig> = {}) {\n    this.config = {\n      algorithm: 'sha256',\n      includeMetadata: false,\n      includeContext: false,\n      normalizeQuery: true,\n      ...config\n    };\n  }\n\n  /**\n   * Normalize query string\n   */\n  private normalizeQuery(query: string): string {\n    if (!this.config.normalizeQuery) {\n      return query;\n    }\n\n    return query\n      .toLowerCase()\n      .trim()\n      .replace(/\\s+/g, ' ')\n      .replace(/[^\\w\\s]/g, '');\n  }\n\n  /**\n   * Build hashable string from query\n   */\n  private buildHashableString(query: AIQuery): string {\n    let hashable = query.query;\n\n    if (this.config.includeMetadata && query.metadata) {\n      hashable += JSON.stringify(query.metadata);\n    }\n\n    if (this.config.includeContext && query.context) {\n      hashable += JSON.stringify(query.context);\n    }\n\n    return hashable;\n  }\n\n  /**\n   * Generate hash for query\n   */\n  generateHash(query: AIQuery): QueryHashResult {\n    const startTime = Date.now();\n\n    try {\n      const hashableString = this.buildHashableString(query);\n      const normalizedQuery = this.normalizeQuery(hashableString);\n\n      const hash = createHash(this.config.algorithm)\n        .update(normalizedQuery)\n        .digest('hex');\n\n      const cacheKey = `query:${hash}`;\n\n      // Track statistics\n      this.updateStatistics(hash, normalizedQuery);\n\n      const hashTime = Date.now() - startTime;\n      this.totalHashTime += hashTime;\n\n      return {\n        hash,\n        cacheKey,\n        queryNormalized: normalizedQuery,\n        metadata: {\n          algorithm: this.config.algorithm,\n          timestamp: new Date(),\n          queryLength: query.query.length,\n          hasMetadata: !!query.metadata,\n          hasContext: !!query.context\n        }\n      };\n    } catch (error) {\n      console.error('Error generating hash:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate hash from string\n   */\n  generateHashFromString(queryString: string): string {\n    const normalized = this.normalizeQuery(queryString);\n    return createHash(this.config.algorithm)\n      .update(normalized)\n      .digest('hex');\n  }\n\n  /**\n   * Generate consistent hash for distributed caching\n   */\n  generateConsistentHash(query: AIQuery, nodeCount: number = 1): number {\n    const hash = this.generateHash(query);\n    const hashValue = parseInt(hash.substring(0, 8), 16);\n    return hashValue % nodeCount;\n  }\n\n  /**\n   * Generate cache key with prefix\n   */\n  generateCacheKey(query: AIQuery, prefix: string = 'cache'): string {\n    const hash = this.generateHash(query);\n    return `${prefix}:${hash.hash}`;\n  }\n\n  /**\n   * Generate cache key with tier information\n   */\n  generateTierCacheKey(query: AIQuery, tier: string): string {\n    const hash = this.generateHash(query);\n    return `cache:tier:${tier}:${hash.hash}`;\n  }\n\n  /**\n   * Generate cache key with user information\n   */\n  generateUserCacheKey(query: AIQuery, userId: string): string {\n    const hash = this.generateHash(query);\n    return `cache:user:${userId}:${hash.hash}`;\n  }\n\n  /**\n   * Update statistics\n   */\n  private updateStatistics(hash: string, normalizedQuery: string): void {\n    this.statistics.totalHashes++;\n\n    if (!this.hashMap.has(hash)) {\n      this.hashMap.set(hash, normalizedQuery);\n      this.statistics.uniqueQueries++;\n    } else {\n      this.statistics.collisions++;\n    }\n\n    this.statistics.averageHashTime = this.totalHashTime / this.statistics.totalHashes;\n    this.statistics.lastUpdated = new Date();\n  }\n\n  /**\n   * Get hash statistics\n   */\n  getStatistics(): HashStatistics {\n    return { ...this.statistics };\n  }\n\n  /**\n   * Reset statistics\n   */\n  resetStatistics(): void {\n    this.hashMap.clear();\n    this.statistics = {\n      totalHashes: 0,\n      uniqueQueries: 0,\n      collisions: 0,\n      averageHashTime: 0,\n      lastUpdated: new Date()\n    };\n    this.totalHashTime = 0;\n  }\n\n  /**\n   * Get collision rate\n   */\n  getCollisionRate(): number {\n    if (this.statistics.totalHashes === 0) {\n      return 0;\n    }\n    return (this.statistics.collisions / this.statistics.totalHashes) * 100;\n  }\n\n  /**\n   * Verify hash consistency\n   */\n  verifyHashConsistency(query: AIQuery, expectedHash: string): boolean {\n    const result = this.generateHash(query);\n    return result.hash === expectedHash;\n  }\n\n  /**\n   * Generate hash batch\n   */\n  generateHashBatch(queries: AIQuery[]): QueryHashResult[] {\n    return queries.map(query => this.generateHash(query));\n  }\n\n  /**\n   * Export statistics for monitoring\n   */\n  exportMetrics(): Record<string, any> {\n    return {\n      timestamp: new Date().toISOString(),\n      hashing: {\n        totalHashes: this.statistics.totalHashes,\n        uniqueQueries: this.statistics.uniqueQueries,\n        collisions: this.statistics.collisions,\n        collisionRate: this.getCollisionRate().toFixed(2) + '%',\n        averageHashTime: this.statistics.averageHashTime.toFixed(2) + 'ms',\n        algorithm: this.config.algorithm\n      }\n    };\n  }\n}\n\n// Singleton instance\nlet queryHasher: QueryHasher | null = null;\n\n/**\n * Get or create query hasher\n */\nexport function getQueryHasher(config?: Partial<HashConfig>): QueryHasher {\n  if (!queryHasher) {\n    queryHasher = new QueryHasher(config);\n  }\n  return queryHasher;\n}\n\n/**\n * Generate hash for query\n */\nexport function hashQuery(query: AIQuery, config?: Partial<HashConfig>): QueryHashResult {\n  const hasher = getQueryHasher(config);\n  return hasher.generateHash(query);\n}\n\n/**\n * Generate hash from string\n */\nexport function hashQueryString(queryString: string, config?: Partial<HashConfig>): string {\n  const hasher = getQueryHasher(config);\n  return hasher.generateHashFromString(queryString);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}