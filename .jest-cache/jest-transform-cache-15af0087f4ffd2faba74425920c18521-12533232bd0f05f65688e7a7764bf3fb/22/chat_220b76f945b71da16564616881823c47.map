{"version":3,"names":["cov_2p867fyag8","actualCoverage","express","s","require","router","Router","aiFamilyService","post","req","res","f","userId","personality","message","context","body","b","status","json","error","response","routeMessage","preferredMember","get","query","greeting","getPersonalizedGreeting","topic","consultation","consultFamily","config","getFamilyConfig","stats","getInteractionStats","module","exports"],"sources":["chat.js"],"sourcesContent":["const express = require('express');\nconst router = express.Router();\nconst aiFamilyService = require('../index');\n\nrouter.post('/chat', async (req, res) => {\n  try {\n    const { userId, personality, message, context } = req.body;\n    \n    if (!message) {\n      return res.status(400).json({ error: 'Message is required' });\n    }\n    \n    const response = await aiFamilyService.routeMessage(\n      userId || 'anonymous', \n      message, \n      { \n        ...context, \n        preferredMember: personality \n      }\n    );\n    \n    res.json(response);\n  } catch (error) {\n    res.status(500).json({ error: error.message });\n  }\n});\n\nrouter.post('/auto-chat', async (req, res) => {\n  try {\n    const { userId, message, context } = req.body;\n    \n    if (!message) {\n      return res.status(400).json({ error: 'Message is required' });\n    }\n    \n    const response = await aiFamilyService.routeMessage(\n      userId || 'anonymous', \n      message, \n      context || {}\n    );\n    \n    res.json(response);\n  } catch (error) {\n    res.status(500).json({ error: error.message });\n  }\n});\n\nrouter.get('/greeting', async (req, res) => {\n  try {\n    const { userId, personality } = req.query;\n    const greeting = await aiFamilyService.getPersonalizedGreeting(\n      userId || 'anonymous', \n      personality\n    );\n    \n    res.json({ greeting });\n  } catch (error) {\n    res.status(500).json({ error: error.message });\n  }\n});\n\nrouter.post('/consult-family', async (req, res) => {\n  try {\n    const { userId, topic } = req.body;\n    \n    if (!topic) {\n      return res.status(400).json({ error: 'Topic is required' });\n    }\n    \n    const consultation = await aiFamilyService.consultFamily(\n      userId || 'anonymous', \n      topic\n    );\n    \n    res.json(consultation);\n  } catch (error) {\n    res.status(500).json({ error: error.message });\n  }\n});\n\nrouter.get('/family-config', (req, res) => {\n  try {\n    const config = aiFamilyService.getFamilyConfig();\n    res.json(config);\n  } catch (error) {\n    res.status(500).json({ error: error.message });\n  }\n});\n\nrouter.get('/interaction-stats', (req, res) => {\n  try {\n    const stats = aiFamilyService.getInteractionStats();\n    res.json(stats);\n  } catch (error) {\n    res.status(500).json({ error: error.message });\n  }\n});\n\nmodule.exports = router;"],"mappings":"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","ignoreList":[]}