2d2e0807a689b4cc225d6b4c492a707f
/* istanbul ignore next */
function cov_1y8rstclhg() {
  var path = "/workspaces/azora/services/azora-cloud/constitutional-ai/middleware/constitutional-middleware.ts";
  var hash = "d0c50bcbee2e2dc9d1ff548a065221cd6e3eb8b7";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-cloud/constitutional-ai/middleware/constitutional-middleware.ts",
    statementMap: {
      "0": {
        start: {
          line: 24,
          column: 66
        },
        end: {
          line: 30,
          column: 1
        }
      },
      "1": {
        start: {
          line: 52,
          column: 27
        },
        end: {
          line: 52,
          column: 70
        }
      },
      "2": {
        start: {
          line: 54,
          column: 2
        },
        end: {
          line: 84,
          column: 4
        }
      },
      "3": {
        start: {
          line: 56,
          column: 4
        },
        end: {
          line: 58,
          column: 5
        }
      },
      "4": {
        start: {
          line: 57,
          column: 6
        },
        end: {
          line: 57,
          column: 20
        }
      },
      "5": {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 63,
          column: 5
        }
      },
      "6": {
        start: {
          line: 61,
          column: 49
        },
        end: {
          line: 61,
          column: 74
        }
      },
      "7": {
        start: {
          line: 62,
          column: 6
        },
        end: {
          line: 62,
          column: 20
        }
      },
      "8": {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 68,
          column: 5
        }
      },
      "9": {
        start: {
          line: 67,
          column: 6
        },
        end: {
          line: 67,
          column: 20
        }
      },
      "10": {
        start: {
          line: 71,
          column: 25
        },
        end: {
          line: 71,
          column: 43
        }
      },
      "11": {
        start: {
          line: 74,
          column: 4
        },
        end: {
          line: 81,
          column: 13
        }
      },
      "12": {
        start: {
          line: 76,
          column: 6
        },
        end: {
          line: 80,
          column: 7
        }
      },
      "13": {
        start: {
          line: 77,
          column: 8
        },
        end: {
          line: 77,
          column: 89
        }
      },
      "14": {
        start: {
          line: 79,
          column: 8
        },
        end: {
          line: 79,
          column: 34
        }
      },
      "15": {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 11
        }
      },
      "16": {
        start: {
          line: 92,
          column: 2
        },
        end: {
          line: 96,
          column: 4
        }
      },
      "17": {
        start: {
          line: 110,
          column: 2
        },
        end: {
          line: 167,
          column: 3
        }
      },
      "18": {
        start: {
          line: 112,
          column: 19
        },
        end: {
          line: 112,
          column: 79
        }
      },
      "19": {
        start: {
          line: 113,
          column: 18
        },
        end: {
          line: 113,
          column: 35
        }
      },
      "20": {
        start: {
          line: 114,
          column: 19
        },
        end: {
          line: 114,
          column: 37
        }
      },
      "21": {
        start: {
          line: 115,
          column: 17
        },
        end: {
          line: 115,
          column: 39
        }
      },
      "22": {
        start: {
          line: 118,
          column: 22
        },
        end: {
          line: 118,
          column: 32
        }
      },
      "23": {
        start: {
          line: 119,
          column: 19
        },
        end: {
          line: 119,
          column: 67
        }
      },
      "24": {
        start: {
          line: 120,
          column: 27
        },
        end: {
          line: 120,
          column: 49
        }
      },
      "25": {
        start: {
          line: 123,
          column: 4
        },
        end: {
          line: 130,
          column: 6
        }
      },
      "26": {
        start: {
          line: 133,
          column: 4
        },
        end: {
          line: 139,
          column: 6
        }
      },
      "27": {
        start: {
          line: 142,
          column: 4
        },
        end: {
          line: 144,
          column: 5
        }
      },
      "28": {
        start: {
          line: 143,
          column: 6
        },
        end: {
          line: 143,
          column: 75
        }
      },
      "29": {
        start: {
          line: 147,
          column: 4
        },
        end: {
          line: 147,
          column: 64
        }
      },
      "30": {
        start: {
          line: 147,
          column: 24
        },
        end: {
          line: 147,
          column: 63
        }
      },
      "31": {
        start: {
          line: 148,
          column: 4
        },
        end: {
          line: 148,
          column: 60
        }
      },
      "32": {
        start: {
          line: 148,
          column: 22
        },
        end: {
          line: 148,
          column: 59
        }
      },
      "33": {
        start: {
          line: 149,
          column: 4
        },
        end: {
          line: 149,
          column: 62
        }
      },
      "34": {
        start: {
          line: 149,
          column: 23
        },
        end: {
          line: 149,
          column: 61
        }
      },
      "35": {
        start: {
          line: 150,
          column: 4
        },
        end: {
          line: 150,
          column: 62
        }
      },
      "36": {
        start: {
          line: 150,
          column: 23
        },
        end: {
          line: 150,
          column: 61
        }
      },
      "37": {
        start: {
          line: 153,
          column: 4
        },
        end: {
          line: 160,
          column: 5
        }
      },
      "38": {
        start: {
          line: 154,
          column: 6
        },
        end: {
          line: 159,
          column: 8
        }
      },
      "39": {
        start: {
          line: 162,
          column: 4
        },
        end: {
          line: 162,
          column: 30
        }
      },
      "40": {
        start: {
          line: 164,
          column: 4
        },
        end: {
          line: 164,
          column: 61
        }
      },
      "41": {
        start: {
          line: 166,
          column: 4
        },
        end: {
          line: 166,
          column: 30
        }
      },
      "42": {
        start: {
          line: 181,
          column: 2
        },
        end: {
          line: 226,
          column: 3
        }
      },
      "43": {
        start: {
          line: 184,
          column: 6
        },
        end: {
          line: 193,
          column: 9
        }
      },
      "44": {
        start: {
          line: 188,
          column: 55
        },
        end: {
          line: 192,
          column: 9
        }
      },
      "45": {
        start: {
          line: 197,
          column: 6
        },
        end: {
          line: 197,
          column: 66
        }
      },
      "46": {
        start: {
          line: 197,
          column: 26
        },
        end: {
          line: 197,
          column: 65
        }
      },
      "47": {
        start: {
          line: 198,
          column: 6
        },
        end: {
          line: 198,
          column: 62
        }
      },
      "48": {
        start: {
          line: 198,
          column: 24
        },
        end: {
          line: 198,
          column: 61
        }
      },
      "49": {
        start: {
          line: 199,
          column: 6
        },
        end: {
          line: 199,
          column: 64
        }
      },
      "50": {
        start: {
          line: 199,
          column: 25
        },
        end: {
          line: 199,
          column: 63
        }
      },
      "51": {
        start: {
          line: 200,
          column: 6
        },
        end: {
          line: 200,
          column: 64
        }
      },
      "52": {
        start: {
          line: 200,
          column: 25
        },
        end: {
          line: 200,
          column: 63
        }
      },
      "53": {
        start: {
          line: 202,
          column: 6
        },
        end: {
          line: 206,
          column: 8
        }
      },
      "54": {
        start: {
          line: 208,
          column: 6
        },
        end: {
          line: 208,
          column: 32
        }
      },
      "55": {
        start: {
          line: 212,
          column: 6
        },
        end: {
          line: 215,
          column: 9
        }
      },
      "56": {
        start: {
          line: 217,
          column: 6
        },
        end: {
          line: 217,
          column: 66
        }
      },
      "57": {
        start: {
          line: 217,
          column: 26
        },
        end: {
          line: 217,
          column: 65
        }
      },
      "58": {
        start: {
          line: 218,
          column: 6
        },
        end: {
          line: 218,
          column: 62
        }
      },
      "59": {
        start: {
          line: 218,
          column: 24
        },
        end: {
          line: 218,
          column: 61
        }
      },
      "60": {
        start: {
          line: 219,
          column: 6
        },
        end: {
          line: 219,
          column: 64
        }
      },
      "61": {
        start: {
          line: 219,
          column: 25
        },
        end: {
          line: 219,
          column: 63
        }
      },
      "62": {
        start: {
          line: 220,
          column: 6
        },
        end: {
          line: 220,
          column: 64
        }
      },
      "63": {
        start: {
          line: 220,
          column: 25
        },
        end: {
          line: 220,
          column: 63
        }
      },
      "64": {
        start: {
          line: 222,
          column: 6
        },
        end: {
          line: 222,
          column: 32
        }
      },
      "65": {
        start: {
          line: 225,
          column: 6
        },
        end: {
          line: 225,
          column: 32
        }
      },
      "66": {
        start: {
          line: 233,
          column: 2
        },
        end: {
          line: 239,
          column: 4
        }
      },
      "67": {
        start: {
          line: 247,
          column: 15
        },
        end: {
          line: 247,
          column: 32
        }
      },
      "68": {
        start: {
          line: 248,
          column: 2
        },
        end: {
          line: 248,
          column: 33
        }
      },
      "69": {
        start: {
          line: 248,
          column: 17
        },
        end: {
          line: 248,
          column: 32
        }
      },
      "70": {
        start: {
          line: 249,
          column: 2
        },
        end: {
          line: 249,
          column: 41
        }
      },
      "71": {
        start: {
          line: 249,
          column: 21
        },
        end: {
          line: 249,
          column: 40
        }
      },
      "72": {
        start: {
          line: 252,
          column: 17
        },
        end: {
          line: 252,
          column: 51
        }
      },
      "73": {
        start: {
          line: 253,
          column: 2
        },
        end: {
          line: 253,
          column: 30
        }
      },
      "74": {
        start: {
          line: 253,
          column: 15
        },
        end: {
          line: 253,
          column: 29
        }
      },
      "75": {
        start: {
          line: 256,
          column: 2
        },
        end: {
          line: 256,
          column: 31
        }
      },
      "76": {
        start: {
          line: 265,
          column: 2
        },
        end: {
          line: 285,
          column: 4
        }
      },
      "77": {
        start: {
          line: 267,
          column: 28
        },
        end: {
          line: 267,
          column: 61
        }
      },
      "78": {
        start: {
          line: 268,
          column: 23
        },
        end: {
          line: 268,
          column: 51
        }
      },
      "79": {
        start: {
          line: 270,
          column: 4
        },
        end: {
          line: 282,
          column: 5
        }
      },
      "80": {
        start: {
          line: 271,
          column: 54
        },
        end: {
          line: 271,
          column: 56
        }
      },
      "81": {
        start: {
          line: 273,
          column: 6
        },
        end: {
          line: 275,
          column: 7
        }
      },
      "82": {
        start: {
          line: 274,
          column: 8
        },
        end: {
          line: 274,
          column: 73
        }
      },
      "83": {
        start: {
          line: 277,
          column: 6
        },
        end: {
          line: 279,
          column: 7
        }
      },
      "84": {
        start: {
          line: 278,
          column: 8
        },
        end: {
          line: 278,
          column: 50
        }
      },
      "85": {
        start: {
          line: 281,
          column: 6
        },
        end: {
          line: 281,
          column: 40
        }
      },
      "86": {
        start: {
          line: 284,
          column: 4
        },
        end: {
          line: 284,
          column: 11
        }
      },
      "87": {
        start: {
          line: 294,
          column: 2
        },
        end: {
          line: 304,
          column: 4
        }
      },
      "88": {
        start: {
          line: 295,
          column: 4
        },
        end: {
          line: 303,
          column: 5
        }
      },
      "89": {
        start: {
          line: 296,
          column: 22
        },
        end: {
          line: 296,
          column: 63
        }
      },
      "90": {
        start: {
          line: 297,
          column: 6
        },
        end: {
          line: 297,
          column: 24
        }
      },
      "91": {
        start: {
          line: 299,
          column: 6
        },
        end: {
          line: 299,
          column: 64
        }
      },
      "92": {
        start: {
          line: 300,
          column: 6
        },
        end: {
          line: 302,
          column: 9
        }
      },
      "93": {
        start: {
          line: 313,
          column: 2
        },
        end: {
          line: 339,
          column: 4
        }
      },
      "94": {
        start: {
          line: 314,
          column: 4
        },
        end: {
          line: 338,
          column: 5
        }
      },
      "95": {
        start: {
          line: 316,
          column: 25
        },
        end: {
          line: 319,
          column: 7
        }
      },
      "96": {
        start: {
          line: 321,
          column: 6
        },
        end: {
          line: 328,
          column: 9
        }
      },
      "97": {
        start: {
          line: 330,
          column: 6
        },
        end: {
          line: 337,
          column: 9
        }
      }
    },
    fnMap: {
      "0": {
        name: "createConstitutionalMiddleware",
        decl: {
          start: {
            line: 48,
            column: 16
          },
          end: {
            line: 48,
            column: 46
          }
        },
        loc: {
          start: {
            line: 51,
            column: 2
          },
          end: {
            line: 85,
            column: 1
          }
        },
        line: 51
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 54,
            column: 9
          },
          end: {
            line: 54,
            column: 10
          }
        },
        loc: {
          start: {
            line: 54,
            column: 82
          },
          end: {
            line: 84,
            column: 3
          }
        },
        line: 54
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 61,
            column: 41
          },
          end: {
            line: 61,
            column: 42
          }
        },
        loc: {
          start: {
            line: 61,
            column: 49
          },
          end: {
            line: 61,
            column: 74
          }
        },
        line: 61
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 74,
            column: 15
          },
          end: {
            line: 74,
            column: 16
          }
        },
        loc: {
          start: {
            line: 74,
            column: 36
          },
          end: {
            line: 81,
            column: 5
          }
        },
        line: 74
      },
      "4": {
        name: "shouldValidateResponse",
        decl: {
          start: {
            line: 90,
            column: 9
          },
          end: {
            line: 90,
            column: 31
          }
        },
        loc: {
          start: {
            line: 90,
            column: 52
          },
          end: {
            line: 97,
            column: 1
          }
        },
        line: 90
      },
      "5": {
        name: "validateAndRespond",
        decl: {
          start: {
            line: 102,
            column: 15
          },
          end: {
            line: 102,
            column: 33
          }
        },
        loc: {
          start: {
            line: 109,
            column: 16
          },
          end: {
            line: 168,
            column: 1
          }
        },
        line: 109
      },
      "6": {
        name: "handleViolation",
        decl: {
          start: {
            line: 173,
            column: 9
          },
          end: {
            line: 173,
            column: 24
          }
        },
        loc: {
          start: {
            line: 180,
            column: 2
          },
          end: {
            line: 227,
            column: 1
          }
        },
        line: 180
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 188,
            column: 42
          },
          end: {
            line: 188,
            column: 43
          }
        },
        loc: {
          start: {
            line: 188,
            column: 55
          },
          end: {
            line: 192,
            column: 9
          }
        },
        line: 188
      },
      "8": {
        name: "extractQuery",
        decl: {
          start: {
            line: 232,
            column: 9
          },
          end: {
            line: 232,
            column: 21
          }
        },
        loc: {
          start: {
            line: 232,
            column: 44
          },
          end: {
            line: 240,
            column: 1
          }
        },
        line: 232
      },
      "9": {
        name: "extractUserId",
        decl: {
          start: {
            line: 245,
            column: 9
          },
          end: {
            line: 245,
            column: 22
          }
        },
        loc: {
          start: {
            line: 245,
            column: 45
          },
          end: {
            line: 257,
            column: 1
          }
        },
        line: 245
      },
      "10": {
        name: "createValidationRulesMiddleware",
        decl: {
          start: {
            line: 262,
            column: 16
          },
          end: {
            line: 262,
            column: 47
          }
        },
        loc: {
          start: {
            line: 264,
            column: 2
          },
          end: {
            line: 286,
            column: 1
          }
        },
        line: 264
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 265,
            column: 9
          },
          end: {
            line: 265,
            column: 10
          }
        },
        loc: {
          start: {
            line: 265,
            column: 62
          },
          end: {
            line: 285,
            column: 3
          }
        },
        line: 265
      },
      "12": {
        name: "createComplianceMetricsMiddleware",
        decl: {
          start: {
            line: 291,
            column: 16
          },
          end: {
            line: 291,
            column: 49
          }
        },
        loc: {
          start: {
            line: 293,
            column: 2
          },
          end: {
            line: 305,
            column: 1
          }
        },
        line: 293
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 294,
            column: 9
          },
          end: {
            line: 294,
            column: 10
          }
        },
        loc: {
          start: {
            line: 294,
            column: 48
          },
          end: {
            line: 304,
            column: 3
          }
        },
        line: 294
      },
      "14": {
        name: "createConstitutionalHealthCheck",
        decl: {
          start: {
            line: 310,
            column: 16
          },
          end: {
            line: 310,
            column: 47
          }
        },
        loc: {
          start: {
            line: 312,
            column: 2
          },
          end: {
            line: 340,
            column: 1
          }
        },
        line: 312
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 313,
            column: 9
          },
          end: {
            line: 313,
            column: 10
          }
        },
        loc: {
          start: {
            line: 313,
            column: 48
          },
          end: {
            line: 339,
            column: 3
          }
        },
        line: 313
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 50,
            column: 2
          },
          end: {
            line: 50,
            column: 54
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 50,
            column: 52
          },
          end: {
            line: 50,
            column: 54
          }
        }],
        line: 50
      },
      "1": {
        loc: {
          start: {
            line: 56,
            column: 4
          },
          end: {
            line: 58,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 56,
            column: 4
          },
          end: {
            line: 58,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 56
      },
      "2": {
        loc: {
          start: {
            line: 61,
            column: 4
          },
          end: {
            line: 63,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 61,
            column: 4
          },
          end: {
            line: 63,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 61
      },
      "3": {
        loc: {
          start: {
            line: 66,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 66,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 66
      },
      "4": {
        loc: {
          start: {
            line: 76,
            column: 6
          },
          end: {
            line: 80,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 76,
            column: 6
          },
          end: {
            line: 80,
            column: 7
          }
        }, {
          start: {
            line: 78,
            column: 13
          },
          end: {
            line: 80,
            column: 7
          }
        }],
        line: 76
      },
      "5": {
        loc: {
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 95,
            column: 66
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 93,
            column: 8
          }
        }, {
          start: {
            line: 94,
            column: 4
          },
          end: {
            line: 94,
            column: 28
          }
        }, {
          start: {
            line: 95,
            column: 5
          },
          end: {
            line: 95,
            column: 18
          }
        }, {
          start: {
            line: 95,
            column: 22
          },
          end: {
            line: 95,
            column: 33
          }
        }, {
          start: {
            line: 95,
            column: 37
          },
          end: {
            line: 95,
            column: 49
          }
        }, {
          start: {
            line: 95,
            column: 53
          },
          end: {
            line: 95,
            column: 65
          }
        }],
        line: 93
      },
      "6": {
        loc: {
          start: {
            line: 112,
            column: 19
          },
          end: {
            line: 112,
            column: 79
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 112,
            column: 19
          },
          end: {
            line: 112,
            column: 32
          }
        }, {
          start: {
            line: 112,
            column: 36
          },
          end: {
            line: 112,
            column: 47
          }
        }, {
          start: {
            line: 112,
            column: 51
          },
          end: {
            line: 112,
            column: 63
          }
        }, {
          start: {
            line: 112,
            column: 67
          },
          end: {
            line: 112,
            column: 79
          }
        }],
        line: 112
      },
      "7": {
        loc: {
          start: {
            line: 115,
            column: 17
          },
          end: {
            line: 115,
            column: 39
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 115,
            column: 17
          },
          end: {
            line: 115,
            column: 26
          }
        }, {
          start: {
            line: 115,
            column: 30
          },
          end: {
            line: 115,
            column: 39
          }
        }],
        line: 115
      },
      "8": {
        loc: {
          start: {
            line: 142,
            column: 4
          },
          end: {
            line: 144,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 142,
            column: 4
          },
          end: {
            line: 144,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 142
      },
      "9": {
        loc: {
          start: {
            line: 147,
            column: 4
          },
          end: {
            line: 147,
            column: 64
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 147,
            column: 4
          },
          end: {
            line: 147,
            column: 64
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 147
      },
      "10": {
        loc: {
          start: {
            line: 148,
            column: 4
          },
          end: {
            line: 148,
            column: 60
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 148,
            column: 4
          },
          end: {
            line: 148,
            column: 60
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 148
      },
      "11": {
        loc: {
          start: {
            line: 149,
            column: 4
          },
          end: {
            line: 149,
            column: 62
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 149,
            column: 4
          },
          end: {
            line: 149,
            column: 62
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 149
      },
      "12": {
        loc: {
          start: {
            line: 150,
            column: 4
          },
          end: {
            line: 150,
            column: 62
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 150,
            column: 4
          },
          end: {
            line: 150,
            column: 62
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 150
      },
      "13": {
        loc: {
          start: {
            line: 153,
            column: 4
          },
          end: {
            line: 160,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 153,
            column: 4
          },
          end: {
            line: 160,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 153
      },
      "14": {
        loc: {
          start: {
            line: 181,
            column: 2
          },
          end: {
            line: 226,
            column: 3
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 182,
            column: 4
          },
          end: {
            line: 193,
            column: 9
          }
        }, {
          start: {
            line: 195,
            column: 4
          },
          end: {
            line: 208,
            column: 32
          }
        }, {
          start: {
            line: 210,
            column: 4
          },
          end: {
            line: 222,
            column: 32
          }
        }, {
          start: {
            line: 224,
            column: 4
          },
          end: {
            line: 225,
            column: 32
          }
        }],
        line: 181
      },
      "15": {
        loc: {
          start: {
            line: 197,
            column: 6
          },
          end: {
            line: 197,
            column: 66
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 197,
            column: 6
          },
          end: {
            line: 197,
            column: 66
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 197
      },
      "16": {
        loc: {
          start: {
            line: 198,
            column: 6
          },
          end: {
            line: 198,
            column: 62
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 198,
            column: 6
          },
          end: {
            line: 198,
            column: 62
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 198
      },
      "17": {
        loc: {
          start: {
            line: 199,
            column: 6
          },
          end: {
            line: 199,
            column: 64
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 199,
            column: 6
          },
          end: {
            line: 199,
            column: 64
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 199
      },
      "18": {
        loc: {
          start: {
            line: 200,
            column: 6
          },
          end: {
            line: 200,
            column: 64
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 200,
            column: 6
          },
          end: {
            line: 200,
            column: 64
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 200
      },
      "19": {
        loc: {
          start: {
            line: 217,
            column: 6
          },
          end: {
            line: 217,
            column: 66
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 217,
            column: 6
          },
          end: {
            line: 217,
            column: 66
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 217
      },
      "20": {
        loc: {
          start: {
            line: 218,
            column: 6
          },
          end: {
            line: 218,
            column: 62
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 218,
            column: 6
          },
          end: {
            line: 218,
            column: 62
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 218
      },
      "21": {
        loc: {
          start: {
            line: 219,
            column: 6
          },
          end: {
            line: 219,
            column: 64
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 219,
            column: 6
          },
          end: {
            line: 219,
            column: 64
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 219
      },
      "22": {
        loc: {
          start: {
            line: 220,
            column: 6
          },
          end: {
            line: 220,
            column: 64
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 220,
            column: 6
          },
          end: {
            line: 220,
            column: 64
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 220
      },
      "23": {
        loc: {
          start: {
            line: 234,
            column: 4
          },
          end: {
            line: 238,
            column: 6
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 234,
            column: 4
          },
          end: {
            line: 234,
            column: 19
          }
        }, {
          start: {
            line: 235,
            column: 4
          },
          end: {
            line: 235,
            column: 20
          }
        }, {
          start: {
            line: 236,
            column: 4
          },
          end: {
            line: 236,
            column: 21
          }
        }, {
          start: {
            line: 237,
            column: 4
          },
          end: {
            line: 237,
            column: 16
          }
        }, {
          start: {
            line: 238,
            column: 4
          },
          end: {
            line: 238,
            column: 6
          }
        }],
        line: 234
      },
      "24": {
        loc: {
          start: {
            line: 248,
            column: 2
          },
          end: {
            line: 248,
            column: 33
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 248,
            column: 2
          },
          end: {
            line: 248,
            column: 33
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 248
      },
      "25": {
        loc: {
          start: {
            line: 249,
            column: 2
          },
          end: {
            line: 249,
            column: 41
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 249,
            column: 2
          },
          end: {
            line: 249,
            column: 41
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 249
      },
      "26": {
        loc: {
          start: {
            line: 253,
            column: 2
          },
          end: {
            line: 253,
            column: 30
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 253,
            column: 2
          },
          end: {
            line: 253,
            column: 30
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 253
      },
      "27": {
        loc: {
          start: {
            line: 256,
            column: 9
          },
          end: {
            line: 256,
            column: 30
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 256,
            column: 9
          },
          end: {
            line: 256,
            column: 15
          }
        }, {
          start: {
            line: 256,
            column: 19
          },
          end: {
            line: 256,
            column: 30
          }
        }],
        line: 256
      },
      "28": {
        loc: {
          start: {
            line: 270,
            column: 4
          },
          end: {
            line: 282,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 270,
            column: 4
          },
          end: {
            line: 282,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 270
      },
      "29": {
        loc: {
          start: {
            line: 270,
            column: 8
          },
          end: {
            line: 270,
            column: 37
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 270,
            column: 8
          },
          end: {
            line: 270,
            column: 23
          }
        }, {
          start: {
            line: 270,
            column: 27
          },
          end: {
            line: 270,
            column: 37
          }
        }],
        line: 270
      },
      "30": {
        loc: {
          start: {
            line: 273,
            column: 6
          },
          end: {
            line: 275,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 273,
            column: 6
          },
          end: {
            line: 275,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 273
      },
      "31": {
        loc: {
          start: {
            line: 277,
            column: 6
          },
          end: {
            line: 279,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 277,
            column: 6
          },
          end: {
            line: 279,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 277
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0
    },
    b: {
      "0": [0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0, 0, 0, 0, 0],
      "6": [0, 0, 0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0, 0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0, 0, 0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0],
      "30": [0, 0],
      "31": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "d0c50bcbee2e2dc9d1ff548a065221cd6e3eb8b7"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1y8rstclhg = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1y8rstclhg();
/**
 * Constitutional AI Middleware
 * Express middleware for API Gateway integration
 */

/**
 * Middleware configuration
 */

/**
 * Default middleware configuration
 */
const DEFAULT_MIDDLEWARE_CONFIG =
/* istanbul ignore next */
(cov_1y8rstclhg().s[0]++, {
  enabled: true,
  skipPaths: ['/health', '/metrics', '/status'],
  skipMethods: ['OPTIONS', 'HEAD'],
  onViolation: 'block',
  includeMetadata: false
});

/**
 * Extended request interface with constitutional validation
 */

/**
 * Create constitutional validation middleware
 */
export function createConstitutionalMiddleware(orchestrator, config =
/* istanbul ignore next */
(cov_1y8rstclhg().b[0][0]++, {})) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[0]++;
  const middlewareConfig =
  /* istanbul ignore next */
  (cov_1y8rstclhg().s[1]++, {
    ...DEFAULT_MIDDLEWARE_CONFIG,
    ...config
  });
  /* istanbul ignore next */
  cov_1y8rstclhg().s[2]++;
  return async (req, res, next) => {
    /* istanbul ignore next */
    cov_1y8rstclhg().f[1]++;
    cov_1y8rstclhg().s[3]++;
    // Skip if middleware is disabled
    if (!middlewareConfig.enabled) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[1][0]++;
      cov_1y8rstclhg().s[4]++;
      return next();
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[1][1]++;
    }

    // Skip certain paths
    cov_1y8rstclhg().s[5]++;
    if (middlewareConfig.skipPaths?.some(path => {
      /* istanbul ignore next */
      cov_1y8rstclhg().f[2]++;
      cov_1y8rstclhg().s[6]++;
      return req.path.startsWith(path);
    })) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[2][0]++;
      cov_1y8rstclhg().s[7]++;
      return next();
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[2][1]++;
    }

    // Skip certain methods
    cov_1y8rstclhg().s[8]++;
    if (middlewareConfig.skipMethods?.includes(req.method)) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[3][0]++;
      cov_1y8rstclhg().s[9]++;
      return next();
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[3][1]++;
    }

    // Store original res.json to intercept AI responses
    const originalJson =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[10]++, res.json.bind(res));

    // Override res.json to validate AI outputs
    /* istanbul ignore next */
    cov_1y8rstclhg().s[11]++;
    res.json = function (body) {
      /* istanbul ignore next */
      cov_1y8rstclhg().f[3]++;
      cov_1y8rstclhg().s[12]++;
      // Only validate if response contains AI output
      if (shouldValidateResponse(body)) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[4][0]++;
        cov_1y8rstclhg().s[13]++;
        validateAndRespond(body, req, res, originalJson, orchestrator, middlewareConfig);
      } else {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[4][1]++;
        cov_1y8rstclhg().s[14]++;
        return originalJson(body);
      }
    };
    /* istanbul ignore next */
    cov_1y8rstclhg().s[15]++;
    next();
  };
}

/**
 * Determine if response should be validated
 */
function shouldValidateResponse(body) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[4]++;
  cov_1y8rstclhg().s[16]++;
  // Check if response contains AI-generated content
  return /* istanbul ignore next */(cov_1y8rstclhg().b[5][0]++, body) &&
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[5][1]++, typeof body === 'object') && (
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[5][2]++, body.response) ||
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[5][3]++, body.output) ||
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[5][4]++, body.message) ||
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[5][5]++, body.content));
}

/**
 * Validate response and send
 */
async function validateAndRespond(body, req, res, originalJson, orchestrator, config) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[5]++;
  cov_1y8rstclhg().s[17]++;
  try {
    // Extract AI output from response
    const output =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[18]++,
    /* istanbul ignore next */
    (cov_1y8rstclhg().b[6][0]++, body.response) ||
    /* istanbul ignore next */
    (cov_1y8rstclhg().b[6][1]++, body.output) ||
    /* istanbul ignore next */
    (cov_1y8rstclhg().b[6][2]++, body.message) ||
    /* istanbul ignore next */
    (cov_1y8rstclhg().b[6][3]++, body.content));
    const query =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[19]++, extractQuery(req));
    const userId =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[20]++, extractUserId(req));
    const tier =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[21]++,
    /* istanbul ignore next */
    (cov_1y8rstclhg().b[7][0]++, body.tier) ||
    /* istanbul ignore next */
    (cov_1y8rstclhg().b[7][1]++, 'unknown'));

    // Validate output
    const startTime =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[22]++, Date.now());
    const result =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[23]++, await orchestrator.validateOutput(query, output));
    const processingTime =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[24]++, Date.now() - startTime);

    // Log validation
    /* istanbul ignore next */
    cov_1y8rstclhg().s[25]++;
    await orchestrator.logValidation(result, userId, query, output, tier, processingTime);

    // Attach validation info to request for downstream use
    /* istanbul ignore next */
    cov_1y8rstclhg().s[26]++;
    req.constitutional = {
      validated: true,
      complianceScore: result.complianceScore,
      violations: result.violations,
      originalOutput: output,
      validatedOutput: result.validatedOutput
    };

    // Handle based on validation result and config
    /* istanbul ignore next */
    cov_1y8rstclhg().s[27]++;
    if (!result.isValid) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[8][0]++;
      cov_1y8rstclhg().s[28]++;
      return handleViolation(result, body, req, res, originalJson, config);
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[8][1]++;
    }

    // Replace output with validated version
    cov_1y8rstclhg().s[29]++;
    if (body.response) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[9][0]++;
      cov_1y8rstclhg().s[30]++;
      body.response = result.validatedOutput;
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[9][1]++;
    }
    cov_1y8rstclhg().s[31]++;
    if (body.output) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[10][0]++;
      cov_1y8rstclhg().s[32]++;
      body.output = result.validatedOutput;
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[10][1]++;
    }
    cov_1y8rstclhg().s[33]++;
    if (body.message) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[11][0]++;
      cov_1y8rstclhg().s[34]++;
      body.message = result.validatedOutput;
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[11][1]++;
    }
    cov_1y8rstclhg().s[35]++;
    if (body.content) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[12][0]++;
      cov_1y8rstclhg().s[36]++;
      body.content = result.validatedOutput;
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[12][1]++;
    }

    // Add metadata if configured
    cov_1y8rstclhg().s[37]++;
    if (config.includeMetadata) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[13][0]++;
      cov_1y8rstclhg().s[38]++;
      body.constitutional = {
        validated: true,
        complianceScore: result.complianceScore,
        violations: result.violations.length,
        processingTime
      };
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[13][1]++;
    }
    cov_1y8rstclhg().s[39]++;
    return originalJson(body);
  } catch (error) {
    /* istanbul ignore next */
    cov_1y8rstclhg().s[40]++;
    console.error('Constitutional validation error:', error);
    // On error, pass through original response
    /* istanbul ignore next */
    cov_1y8rstclhg().s[41]++;
    return originalJson(body);
  }
}

/**
 * Handle validation violations
 */
function handleViolation(result, body, req, res, originalJson, config) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[6]++;
  cov_1y8rstclhg().s[42]++;
  switch (config.onViolation) {
    case 'block':
      /* istanbul ignore next */
      cov_1y8rstclhg().b[14][0]++;
      cov_1y8rstclhg().s[43]++;
      // Block the response and return error
      return res.status(400).json({
        error: 'Content validation failed',
        message: 'The generated content does not meet constitutional standards',
        complianceScore: result.complianceScore,
        violations: result.violations.map(v => {
          /* istanbul ignore next */
          cov_1y8rstclhg().f[7]++;
          cov_1y8rstclhg().s[44]++;
          return {
            type: v.type,
            severity: v.severity,
            description: v.description
          };
        })
      });
    case 'warn':
      /* istanbul ignore next */
      cov_1y8rstclhg().b[14][1]++;
      cov_1y8rstclhg().s[45]++;
      // Send validated output with warning
      if (body.response) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[15][0]++;
        cov_1y8rstclhg().s[46]++;
        body.response = result.validatedOutput;
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[15][1]++;
      }
      cov_1y8rstclhg().s[47]++;
      if (body.output) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[16][0]++;
        cov_1y8rstclhg().s[48]++;
        body.output = result.validatedOutput;
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[16][1]++;
      }
      cov_1y8rstclhg().s[49]++;
      if (body.message) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[17][0]++;
        cov_1y8rstclhg().s[50]++;
        body.message = result.validatedOutput;
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[17][1]++;
      }
      cov_1y8rstclhg().s[51]++;
      if (body.content) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[18][0]++;
        cov_1y8rstclhg().s[52]++;
        body.content = result.validatedOutput;
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[18][1]++;
      }
      cov_1y8rstclhg().s[53]++;
      body.warning = {
        message: 'Content was modified to meet constitutional standards',
        complianceScore: result.complianceScore,
        violationCount: result.violations.length
      };
      /* istanbul ignore next */
      cov_1y8rstclhg().s[54]++;
      return originalJson(body);
    case 'log':
      /* istanbul ignore next */
      cov_1y8rstclhg().b[14][2]++;
      cov_1y8rstclhg().s[55]++;
      // Just log and pass through validated output
      console.warn('Constitutional violation detected:', {
        complianceScore: result.complianceScore,
        violations: result.violations.length
      });
      /* istanbul ignore next */
      cov_1y8rstclhg().s[56]++;
      if (body.response) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[19][0]++;
        cov_1y8rstclhg().s[57]++;
        body.response = result.validatedOutput;
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[19][1]++;
      }
      cov_1y8rstclhg().s[58]++;
      if (body.output) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[20][0]++;
        cov_1y8rstclhg().s[59]++;
        body.output = result.validatedOutput;
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[20][1]++;
      }
      cov_1y8rstclhg().s[60]++;
      if (body.message) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[21][0]++;
        cov_1y8rstclhg().s[61]++;
        body.message = result.validatedOutput;
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[21][1]++;
      }
      cov_1y8rstclhg().s[62]++;
      if (body.content) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[22][0]++;
        cov_1y8rstclhg().s[63]++;
        body.content = result.validatedOutput;
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[22][1]++;
      }
      cov_1y8rstclhg().s[64]++;
      return originalJson(body);
    default:
      /* istanbul ignore next */
      cov_1y8rstclhg().b[14][3]++;
      cov_1y8rstclhg().s[65]++;
      return originalJson(body);
  }
}

/**
 * Extract query from request
 */
function extractQuery(req) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[8]++;
  cov_1y8rstclhg().s[66]++;
  return /* istanbul ignore next */(cov_1y8rstclhg().b[23][0]++, req.body?.query) ||
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[23][1]++, req.body?.prompt) ||
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[23][2]++, req.body?.message) ||
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[23][3]++, req.query?.q) ||
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[23][4]++, '');
}

/**
 * Extract user ID from request
 */
function extractUserId(req) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[9]++;
  // Try to get from auth token
  const user =
  /* istanbul ignore next */
  (cov_1y8rstclhg().s[67]++, req.user);
  /* istanbul ignore next */
  cov_1y8rstclhg().s[68]++;
  if (user?.id) {
    /* istanbul ignore next */
    cov_1y8rstclhg().b[24][0]++;
    cov_1y8rstclhg().s[69]++;
    return user.id;
  } else
  /* istanbul ignore next */
  {
    cov_1y8rstclhg().b[24][1]++;
  }
  cov_1y8rstclhg().s[70]++;
  if (user?.userId) {
    /* istanbul ignore next */
    cov_1y8rstclhg().b[25][0]++;
    cov_1y8rstclhg().s[71]++;
    return user.userId;
  } else
  /* istanbul ignore next */
  {
    cov_1y8rstclhg().b[25][1]++;
  }

  // Try to get from headers
  const userId =
  /* istanbul ignore next */
  (cov_1y8rstclhg().s[72]++, req.headers['x-user-id']);
  /* istanbul ignore next */
  cov_1y8rstclhg().s[73]++;
  if (userId) {
    /* istanbul ignore next */
    cov_1y8rstclhg().b[26][0]++;
    cov_1y8rstclhg().s[74]++;
    return userId;
  } else
  /* istanbul ignore next */
  {
    cov_1y8rstclhg().b[26][1]++;
  }

  // Fallback to IP address
  cov_1y8rstclhg().s[75]++;
  return /* istanbul ignore next */(cov_1y8rstclhg().b[27][0]++, req.ip) ||
  /* istanbul ignore next */
  (cov_1y8rstclhg().b[27][1]++, 'anonymous');
}

/**
 * Create validation rules configuration middleware
 */
export function createValidationRulesMiddleware(orchestrator) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[10]++;
  cov_1y8rstclhg().s[76]++;
  return (req, res, next) => {
    /* istanbul ignore next */
    cov_1y8rstclhg().f[11]++;
    // Allow dynamic configuration via headers
    const ubuntuThreshold =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[77]++, req.headers['x-ubuntu-threshold']);
    const strictMode =
    /* istanbul ignore next */
    (cov_1y8rstclhg().s[78]++, req.headers['x-strict-mode']);
    /* istanbul ignore next */
    cov_1y8rstclhg().s[79]++;
    if (
    /* istanbul ignore next */
    (cov_1y8rstclhg().b[29][0]++, ubuntuThreshold) ||
    /* istanbul ignore next */
    (cov_1y8rstclhg().b[29][1]++, strictMode)) {
      /* istanbul ignore next */
      cov_1y8rstclhg().b[28][0]++;
      const config =
      /* istanbul ignore next */
      (cov_1y8rstclhg().s[80]++, {});
      /* istanbul ignore next */
      cov_1y8rstclhg().s[81]++;
      if (ubuntuThreshold) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[30][0]++;
        cov_1y8rstclhg().s[82]++;
        config.ubuntuThreshold = parseInt(ubuntuThreshold, 10);
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[30][1]++;
      }
      cov_1y8rstclhg().s[83]++;
      if (strictMode) {
        /* istanbul ignore next */
        cov_1y8rstclhg().b[31][0]++;
        cov_1y8rstclhg().s[84]++;
        config.strictMode = strictMode === 'true';
      } else
      /* istanbul ignore next */
      {
        cov_1y8rstclhg().b[31][1]++;
      }
      cov_1y8rstclhg().s[85]++;
      orchestrator.updateConfig(config);
    } else
    /* istanbul ignore next */
    {
      cov_1y8rstclhg().b[28][1]++;
    }
    cov_1y8rstclhg().s[86]++;
    next();
  };
}

/**
 * Create compliance metrics endpoint middleware
 */
export function createComplianceMetricsMiddleware(orchestrator) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[12]++;
  cov_1y8rstclhg().s[87]++;
  return async (req, res) => {
    /* istanbul ignore next */
    cov_1y8rstclhg().f[13]++;
    cov_1y8rstclhg().s[88]++;
    try {
      const metrics =
      /* istanbul ignore next */
      (cov_1y8rstclhg().s[89]++, await orchestrator.getComplianceMetrics());
      /* istanbul ignore next */
      cov_1y8rstclhg().s[90]++;
      res.json(metrics);
    } catch (error) {
      /* istanbul ignore next */
      cov_1y8rstclhg().s[91]++;
      console.error('Failed to get compliance metrics:', error);
      /* istanbul ignore next */
      cov_1y8rstclhg().s[92]++;
      res.status(500).json({
        error: 'Failed to retrieve compliance metrics'
      });
    }
  };
}

/**
 * Create health check middleware for constitutional AI
 */
export function createConstitutionalHealthCheck(orchestrator) {
  /* istanbul ignore next */
  cov_1y8rstclhg().f[14]++;
  cov_1y8rstclhg().s[93]++;
  return async (req, res) => {
    /* istanbul ignore next */
    cov_1y8rstclhg().f[15]++;
    cov_1y8rstclhg().s[94]++;
    try {
      // Test validation with simple input
      const testResult =
      /* istanbul ignore next */
      (cov_1y8rstclhg().s[95]++, await orchestrator.validateOutput('test query', 'This is a test output for health check'));
      /* istanbul ignore next */
      cov_1y8rstclhg().s[96]++;
      res.json({
        status: 'healthy',
        constitutional: {
          enabled: true,
          complianceScore: testResult.complianceScore,
          timestamp: new Date()
        }
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_1y8rstclhg().s[97]++;
      res.status(503).json({
        status: 'unhealthy',
        constitutional: {
          enabled: false,
          error: error.message,
          timestamp: new Date()
        }
      });
    }
  };
}

/**
 * Export middleware factory
 */
export default createConstitutionalMiddleware;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXk4cnN0Y2xoZyIsImFjdHVhbENvdmVyYWdlIiwiREVGQVVMVF9NSURETEVXQVJFX0NPTkZJRyIsInMiLCJlbmFibGVkIiwic2tpcFBhdGhzIiwic2tpcE1ldGhvZHMiLCJvblZpb2xhdGlvbiIsImluY2x1ZGVNZXRhZGF0YSIsImNyZWF0ZUNvbnN0aXR1dGlvbmFsTWlkZGxld2FyZSIsIm9yY2hlc3RyYXRvciIsImNvbmZpZyIsImIiLCJmIiwibWlkZGxld2FyZUNvbmZpZyIsInJlcSIsInJlcyIsIm5leHQiLCJzb21lIiwicGF0aCIsInN0YXJ0c1dpdGgiLCJpbmNsdWRlcyIsIm1ldGhvZCIsIm9yaWdpbmFsSnNvbiIsImpzb24iLCJiaW5kIiwiYm9keSIsInNob3VsZFZhbGlkYXRlUmVzcG9uc2UiLCJ2YWxpZGF0ZUFuZFJlc3BvbmQiLCJyZXNwb25zZSIsIm91dHB1dCIsIm1lc3NhZ2UiLCJjb250ZW50IiwicXVlcnkiLCJleHRyYWN0UXVlcnkiLCJ1c2VySWQiLCJleHRyYWN0VXNlcklkIiwidGllciIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJyZXN1bHQiLCJ2YWxpZGF0ZU91dHB1dCIsInByb2Nlc3NpbmdUaW1lIiwibG9nVmFsaWRhdGlvbiIsImNvbnN0aXR1dGlvbmFsIiwidmFsaWRhdGVkIiwiY29tcGxpYW5jZVNjb3JlIiwidmlvbGF0aW9ucyIsIm9yaWdpbmFsT3V0cHV0IiwidmFsaWRhdGVkT3V0cHV0IiwiaXNWYWxpZCIsImhhbmRsZVZpb2xhdGlvbiIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsInN0YXR1cyIsIm1hcCIsInYiLCJ0eXBlIiwic2V2ZXJpdHkiLCJkZXNjcmlwdGlvbiIsIndhcm5pbmciLCJ2aW9sYXRpb25Db3VudCIsIndhcm4iLCJwcm9tcHQiLCJxIiwidXNlciIsImlkIiwiaGVhZGVycyIsImlwIiwiY3JlYXRlVmFsaWRhdGlvblJ1bGVzTWlkZGxld2FyZSIsInVidW50dVRocmVzaG9sZCIsInN0cmljdE1vZGUiLCJwYXJzZUludCIsInVwZGF0ZUNvbmZpZyIsImNyZWF0ZUNvbXBsaWFuY2VNZXRyaWNzTWlkZGxld2FyZSIsIm1ldHJpY3MiLCJnZXRDb21wbGlhbmNlTWV0cmljcyIsImNyZWF0ZUNvbnN0aXR1dGlvbmFsSGVhbHRoQ2hlY2siLCJ0ZXN0UmVzdWx0IiwidGltZXN0YW1wIl0sInNvdXJjZXMiOlsiY29uc3RpdHV0aW9uYWwtbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnN0aXR1dGlvbmFsIEFJIE1pZGRsZXdhcmVcbiAqIEV4cHJlc3MgbWlkZGxld2FyZSBmb3IgQVBJIEdhdGV3YXkgaW50ZWdyYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSwgTmV4dEZ1bmN0aW9uIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBDb25zdGl0dXRpb25hbE9yY2hlc3RyYXRvciB9IGZyb20gJy4uL29yY2hlc3RyYXRvcic7XG5pbXBvcnQgeyBDb25zdGl0dXRpb25hbEFJQ29uZmlnIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG4vKipcbiAqIE1pZGRsZXdhcmUgY29uZmlndXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbnN0aXR1dGlvbmFsTWlkZGxld2FyZUNvbmZpZyB7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIHNraXBQYXRocz86IHN0cmluZ1tdOyAvLyBQYXRocyB0byBza2lwIHZhbGlkYXRpb25cbiAgc2tpcE1ldGhvZHM/OiBzdHJpbmdbXTsgLy8gSFRUUCBtZXRob2RzIHRvIHNraXBcbiAgb25WaW9sYXRpb24/OiAnYmxvY2snIHwgJ3dhcm4nIHwgJ2xvZyc7IC8vIEFjdGlvbiBvbiB2aW9sYXRpb25cbiAgaW5jbHVkZU1ldGFkYXRhPzogYm9vbGVhbjsgLy8gSW5jbHVkZSB2YWxpZGF0aW9uIG1ldGFkYXRhIGluIHJlc3BvbnNlXG59XG5cbi8qKlxuICogRGVmYXVsdCBtaWRkbGV3YXJlIGNvbmZpZ3VyYXRpb25cbiAqL1xuY29uc3QgREVGQVVMVF9NSURETEVXQVJFX0NPTkZJRzogQ29uc3RpdHV0aW9uYWxNaWRkbGV3YXJlQ29uZmlnID0ge1xuICBlbmFibGVkOiB0cnVlLFxuICBza2lwUGF0aHM6IFsnL2hlYWx0aCcsICcvbWV0cmljcycsICcvc3RhdHVzJ10sXG4gIHNraXBNZXRob2RzOiBbJ09QVElPTlMnLCAnSEVBRCddLFxuICBvblZpb2xhdGlvbjogJ2Jsb2NrJyxcbiAgaW5jbHVkZU1ldGFkYXRhOiBmYWxzZVxufTtcblxuLyoqXG4gKiBFeHRlbmRlZCByZXF1ZXN0IGludGVyZmFjZSB3aXRoIGNvbnN0aXR1dGlvbmFsIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb25zdGl0dXRpb25hbFJlcXVlc3QgZXh0ZW5kcyBSZXF1ZXN0IHtcbiAgY29uc3RpdHV0aW9uYWw/OiB7XG4gICAgdmFsaWRhdGVkOiBib29sZWFuO1xuICAgIGNvbXBsaWFuY2VTY29yZTogbnVtYmVyO1xuICAgIHZpb2xhdGlvbnM6IGFueVtdO1xuICAgIG9yaWdpbmFsT3V0cHV0Pzogc3RyaW5nO1xuICAgIHZhbGlkYXRlZE91dHB1dD86IHN0cmluZztcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgY29uc3RpdHV0aW9uYWwgdmFsaWRhdGlvbiBtaWRkbGV3YXJlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb25zdGl0dXRpb25hbE1pZGRsZXdhcmUoXG4gIG9yY2hlc3RyYXRvcjogQ29uc3RpdHV0aW9uYWxPcmNoZXN0cmF0b3IsXG4gIGNvbmZpZzogUGFydGlhbDxDb25zdGl0dXRpb25hbE1pZGRsZXdhcmVDb25maWc+ID0ge31cbikge1xuICBjb25zdCBtaWRkbGV3YXJlQ29uZmlnID0geyAuLi5ERUZBVUxUX01JRERMRVdBUkVfQ09ORklHLCAuLi5jb25maWcgfTtcblxuICByZXR1cm4gYXN5bmMgKHJlcTogQ29uc3RpdHV0aW9uYWxSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pID0+IHtcbiAgICAvLyBTa2lwIGlmIG1pZGRsZXdhcmUgaXMgZGlzYWJsZWRcbiAgICBpZiAoIW1pZGRsZXdhcmVDb25maWcuZW5hYmxlZCkge1xuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9XG5cbiAgICAvLyBTa2lwIGNlcnRhaW4gcGF0aHNcbiAgICBpZiAobWlkZGxld2FyZUNvbmZpZy5za2lwUGF0aHM/LnNvbWUocGF0aCA9PiByZXEucGF0aC5zdGFydHNXaXRoKHBhdGgpKSkge1xuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9XG5cbiAgICAvLyBTa2lwIGNlcnRhaW4gbWV0aG9kc1xuICAgIGlmIChtaWRkbGV3YXJlQ29uZmlnLnNraXBNZXRob2RzPy5pbmNsdWRlcyhyZXEubWV0aG9kKSkge1xuICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBvcmlnaW5hbCByZXMuanNvbiB0byBpbnRlcmNlcHQgQUkgcmVzcG9uc2VzXG4gICAgY29uc3Qgb3JpZ2luYWxKc29uID0gcmVzLmpzb24uYmluZChyZXMpO1xuXG4gICAgLy8gT3ZlcnJpZGUgcmVzLmpzb24gdG8gdmFsaWRhdGUgQUkgb3V0cHV0c1xuICAgIHJlcy5qc29uID0gZnVuY3Rpb24gKGJvZHk6IGFueSkge1xuICAgICAgLy8gT25seSB2YWxpZGF0ZSBpZiByZXNwb25zZSBjb250YWlucyBBSSBvdXRwdXRcbiAgICAgIGlmIChzaG91bGRWYWxpZGF0ZVJlc3BvbnNlKGJvZHkpKSB7XG4gICAgICAgIHZhbGlkYXRlQW5kUmVzcG9uZChib2R5LCByZXEsIHJlcywgb3JpZ2luYWxKc29uLCBvcmNoZXN0cmF0b3IsIG1pZGRsZXdhcmVDb25maWcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsSnNvbihib2R5KTtcbiAgICAgIH1cbiAgICB9IGFzIGFueTtcblxuICAgIG5leHQoKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgcmVzcG9uc2Ugc2hvdWxkIGJlIHZhbGlkYXRlZFxuICovXG5mdW5jdGlvbiBzaG91bGRWYWxpZGF0ZVJlc3BvbnNlKGJvZHk6IGFueSk6IGJvb2xlYW4ge1xuICAvLyBDaGVjayBpZiByZXNwb25zZSBjb250YWlucyBBSS1nZW5lcmF0ZWQgY29udGVudFxuICByZXR1cm4gKFxuICAgIGJvZHkgJiZcbiAgICB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiZcbiAgICAoYm9keS5yZXNwb25zZSB8fCBib2R5Lm91dHB1dCB8fCBib2R5Lm1lc3NhZ2UgfHwgYm9keS5jb250ZW50KVxuICApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIHJlc3BvbnNlIGFuZCBzZW5kXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlQW5kUmVzcG9uZChcbiAgYm9keTogYW55LFxuICByZXE6IENvbnN0aXR1dGlvbmFsUmVxdWVzdCxcbiAgcmVzOiBSZXNwb25zZSxcbiAgb3JpZ2luYWxKc29uOiBGdW5jdGlvbixcbiAgb3JjaGVzdHJhdG9yOiBDb25zdGl0dXRpb25hbE9yY2hlc3RyYXRvcixcbiAgY29uZmlnOiBDb25zdGl0dXRpb25hbE1pZGRsZXdhcmVDb25maWdcbik6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgLy8gRXh0cmFjdCBBSSBvdXRwdXQgZnJvbSByZXNwb25zZVxuICAgIGNvbnN0IG91dHB1dCA9IGJvZHkucmVzcG9uc2UgfHwgYm9keS5vdXRwdXQgfHwgYm9keS5tZXNzYWdlIHx8IGJvZHkuY29udGVudDtcbiAgICBjb25zdCBxdWVyeSA9IGV4dHJhY3RRdWVyeShyZXEpO1xuICAgIGNvbnN0IHVzZXJJZCA9IGV4dHJhY3RVc2VySWQocmVxKTtcbiAgICBjb25zdCB0aWVyID0gYm9keS50aWVyIHx8ICd1bmtub3duJztcblxuICAgIC8vIFZhbGlkYXRlIG91dHB1dFxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KHF1ZXJ5LCBvdXRwdXQpO1xuICAgIGNvbnN0IHByb2Nlc3NpbmdUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgIC8vIExvZyB2YWxpZGF0aW9uXG4gICAgYXdhaXQgb3JjaGVzdHJhdG9yLmxvZ1ZhbGlkYXRpb24oXG4gICAgICByZXN1bHQsXG4gICAgICB1c2VySWQsXG4gICAgICBxdWVyeSxcbiAgICAgIG91dHB1dCxcbiAgICAgIHRpZXIsXG4gICAgICBwcm9jZXNzaW5nVGltZVxuICAgICk7XG5cbiAgICAvLyBBdHRhY2ggdmFsaWRhdGlvbiBpbmZvIHRvIHJlcXVlc3QgZm9yIGRvd25zdHJlYW0gdXNlXG4gICAgcmVxLmNvbnN0aXR1dGlvbmFsID0ge1xuICAgICAgdmFsaWRhdGVkOiB0cnVlLFxuICAgICAgY29tcGxpYW5jZVNjb3JlOiByZXN1bHQuY29tcGxpYW5jZVNjb3JlLFxuICAgICAgdmlvbGF0aW9uczogcmVzdWx0LnZpb2xhdGlvbnMsXG4gICAgICBvcmlnaW5hbE91dHB1dDogb3V0cHV0LFxuICAgICAgdmFsaWRhdGVkT3V0cHV0OiByZXN1bHQudmFsaWRhdGVkT3V0cHV0XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBiYXNlZCBvbiB2YWxpZGF0aW9uIHJlc3VsdCBhbmQgY29uZmlnXG4gICAgaWYgKCFyZXN1bHQuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGhhbmRsZVZpb2xhdGlvbihyZXN1bHQsIGJvZHksIHJlcSwgcmVzLCBvcmlnaW5hbEpzb24sIGNvbmZpZyk7XG4gICAgfVxuXG4gICAgLy8gUmVwbGFjZSBvdXRwdXQgd2l0aCB2YWxpZGF0ZWQgdmVyc2lvblxuICAgIGlmIChib2R5LnJlc3BvbnNlKSB7Ym9keS5yZXNwb25zZSA9IHJlc3VsdC52YWxpZGF0ZWRPdXRwdXQ7fVxuICAgIGlmIChib2R5Lm91dHB1dCkge2JvZHkub3V0cHV0ID0gcmVzdWx0LnZhbGlkYXRlZE91dHB1dDt9XG4gICAgaWYgKGJvZHkubWVzc2FnZSkge2JvZHkubWVzc2FnZSA9IHJlc3VsdC52YWxpZGF0ZWRPdXRwdXQ7fVxuICAgIGlmIChib2R5LmNvbnRlbnQpIHtib2R5LmNvbnRlbnQgPSByZXN1bHQudmFsaWRhdGVkT3V0cHV0O31cblxuICAgIC8vIEFkZCBtZXRhZGF0YSBpZiBjb25maWd1cmVkXG4gICAgaWYgKGNvbmZpZy5pbmNsdWRlTWV0YWRhdGEpIHtcbiAgICAgIGJvZHkuY29uc3RpdHV0aW9uYWwgPSB7XG4gICAgICAgIHZhbGlkYXRlZDogdHJ1ZSxcbiAgICAgICAgY29tcGxpYW5jZVNjb3JlOiByZXN1bHQuY29tcGxpYW5jZVNjb3JlLFxuICAgICAgICB2aW9sYXRpb25zOiByZXN1bHQudmlvbGF0aW9ucy5sZW5ndGgsXG4gICAgICAgIHByb2Nlc3NpbmdUaW1lXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBvcmlnaW5hbEpzb24oYm9keSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ29uc3RpdHV0aW9uYWwgdmFsaWRhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgLy8gT24gZXJyb3IsIHBhc3MgdGhyb3VnaCBvcmlnaW5hbCByZXNwb25zZVxuICAgIHJldHVybiBvcmlnaW5hbEpzb24oYm9keSk7XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGUgdmFsaWRhdGlvbiB2aW9sYXRpb25zXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVZpb2xhdGlvbihcbiAgcmVzdWx0OiBhbnksXG4gIGJvZHk6IGFueSxcbiAgcmVxOiBDb25zdGl0dXRpb25hbFJlcXVlc3QsXG4gIHJlczogUmVzcG9uc2UsXG4gIG9yaWdpbmFsSnNvbjogRnVuY3Rpb24sXG4gIGNvbmZpZzogQ29uc3RpdHV0aW9uYWxNaWRkbGV3YXJlQ29uZmlnXG4pIHtcbiAgc3dpdGNoIChjb25maWcub25WaW9sYXRpb24pIHtcbiAgICBjYXNlICdibG9jayc6XG4gICAgICAvLyBCbG9jayB0aGUgcmVzcG9uc2UgYW5kIHJldHVybiBlcnJvclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdDb250ZW50IHZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgbWVzc2FnZTogJ1RoZSBnZW5lcmF0ZWQgY29udGVudCBkb2VzIG5vdCBtZWV0IGNvbnN0aXR1dGlvbmFsIHN0YW5kYXJkcycsXG4gICAgICAgIGNvbXBsaWFuY2VTY29yZTogcmVzdWx0LmNvbXBsaWFuY2VTY29yZSxcbiAgICAgICAgdmlvbGF0aW9uczogcmVzdWx0LnZpb2xhdGlvbnMubWFwKCh2OiBhbnkpID0+ICh7XG4gICAgICAgICAgdHlwZTogdi50eXBlLFxuICAgICAgICAgIHNldmVyaXR5OiB2LnNldmVyaXR5LFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB2LmRlc2NyaXB0aW9uXG4gICAgICAgIH0pKVxuICAgICAgfSk7XG5cbiAgICBjYXNlICd3YXJuJzpcbiAgICAgIC8vIFNlbmQgdmFsaWRhdGVkIG91dHB1dCB3aXRoIHdhcm5pbmdcbiAgICAgIGlmIChib2R5LnJlc3BvbnNlKSB7Ym9keS5yZXNwb25zZSA9IHJlc3VsdC52YWxpZGF0ZWRPdXRwdXQ7fVxuICAgICAgaWYgKGJvZHkub3V0cHV0KSB7Ym9keS5vdXRwdXQgPSByZXN1bHQudmFsaWRhdGVkT3V0cHV0O31cbiAgICAgIGlmIChib2R5Lm1lc3NhZ2UpIHtib2R5Lm1lc3NhZ2UgPSByZXN1bHQudmFsaWRhdGVkT3V0cHV0O31cbiAgICAgIGlmIChib2R5LmNvbnRlbnQpIHtib2R5LmNvbnRlbnQgPSByZXN1bHQudmFsaWRhdGVkT3V0cHV0O31cblxuICAgICAgYm9keS53YXJuaW5nID0ge1xuICAgICAgICBtZXNzYWdlOiAnQ29udGVudCB3YXMgbW9kaWZpZWQgdG8gbWVldCBjb25zdGl0dXRpb25hbCBzdGFuZGFyZHMnLFxuICAgICAgICBjb21wbGlhbmNlU2NvcmU6IHJlc3VsdC5jb21wbGlhbmNlU2NvcmUsXG4gICAgICAgIHZpb2xhdGlvbkNvdW50OiByZXN1bHQudmlvbGF0aW9ucy5sZW5ndGhcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBvcmlnaW5hbEpzb24oYm9keSk7XG5cbiAgICBjYXNlICdsb2cnOlxuICAgICAgLy8gSnVzdCBsb2cgYW5kIHBhc3MgdGhyb3VnaCB2YWxpZGF0ZWQgb3V0cHV0XG4gICAgICBjb25zb2xlLndhcm4oJ0NvbnN0aXR1dGlvbmFsIHZpb2xhdGlvbiBkZXRlY3RlZDonLCB7XG4gICAgICAgIGNvbXBsaWFuY2VTY29yZTogcmVzdWx0LmNvbXBsaWFuY2VTY29yZSxcbiAgICAgICAgdmlvbGF0aW9uczogcmVzdWx0LnZpb2xhdGlvbnMubGVuZ3RoXG4gICAgICB9KTtcblxuICAgICAgaWYgKGJvZHkucmVzcG9uc2UpIHtib2R5LnJlc3BvbnNlID0gcmVzdWx0LnZhbGlkYXRlZE91dHB1dDt9XG4gICAgICBpZiAoYm9keS5vdXRwdXQpIHtib2R5Lm91dHB1dCA9IHJlc3VsdC52YWxpZGF0ZWRPdXRwdXQ7fVxuICAgICAgaWYgKGJvZHkubWVzc2FnZSkge2JvZHkubWVzc2FnZSA9IHJlc3VsdC52YWxpZGF0ZWRPdXRwdXQ7fVxuICAgICAgaWYgKGJvZHkuY29udGVudCkge2JvZHkuY29udGVudCA9IHJlc3VsdC52YWxpZGF0ZWRPdXRwdXQ7fVxuXG4gICAgICByZXR1cm4gb3JpZ2luYWxKc29uKGJvZHkpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBvcmlnaW5hbEpzb24oYm9keSk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHF1ZXJ5IGZyb20gcmVxdWVzdFxuICovXG5mdW5jdGlvbiBleHRyYWN0UXVlcnkocmVxOiBSZXF1ZXN0KTogc3RyaW5nIHtcbiAgcmV0dXJuIChcbiAgICByZXEuYm9keT8ucXVlcnkgfHxcbiAgICByZXEuYm9keT8ucHJvbXB0IHx8XG4gICAgcmVxLmJvZHk/Lm1lc3NhZ2UgfHxcbiAgICByZXEucXVlcnk/LnEgfHxcbiAgICAnJ1xuICApO1xufVxuXG4vKipcbiAqIEV4dHJhY3QgdXNlciBJRCBmcm9tIHJlcXVlc3RcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFVzZXJJZChyZXE6IFJlcXVlc3QpOiBzdHJpbmcge1xuICAvLyBUcnkgdG8gZ2V0IGZyb20gYXV0aCB0b2tlblxuICBjb25zdCB1c2VyID0gKHJlcSBhcyBhbnkpLnVzZXI7XG4gIGlmICh1c2VyPy5pZCkge3JldHVybiB1c2VyLmlkO31cbiAgaWYgKHVzZXI/LnVzZXJJZCkge3JldHVybiB1c2VyLnVzZXJJZDt9XG5cbiAgLy8gVHJ5IHRvIGdldCBmcm9tIGhlYWRlcnNcbiAgY29uc3QgdXNlcklkID0gcmVxLmhlYWRlcnNbJ3gtdXNlci1pZCddIGFzIHN0cmluZztcbiAgaWYgKHVzZXJJZCkge3JldHVybiB1c2VySWQ7fVxuXG4gIC8vIEZhbGxiYWNrIHRvIElQIGFkZHJlc3NcbiAgcmV0dXJuIHJlcS5pcCB8fCAnYW5vbnltb3VzJztcbn1cblxuLyoqXG4gKiBDcmVhdGUgdmFsaWRhdGlvbiBydWxlcyBjb25maWd1cmF0aW9uIG1pZGRsZXdhcmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVZhbGlkYXRpb25SdWxlc01pZGRsZXdhcmUoXG4gIG9yY2hlc3RyYXRvcjogQ29uc3RpdHV0aW9uYWxPcmNoZXN0cmF0b3Jcbikge1xuICByZXR1cm4gKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7XG4gICAgLy8gQWxsb3cgZHluYW1pYyBjb25maWd1cmF0aW9uIHZpYSBoZWFkZXJzXG4gICAgY29uc3QgdWJ1bnR1VGhyZXNob2xkID0gcmVxLmhlYWRlcnNbJ3gtdWJ1bnR1LXRocmVzaG9sZCddO1xuICAgIGNvbnN0IHN0cmljdE1vZGUgPSByZXEuaGVhZGVyc1sneC1zdHJpY3QtbW9kZSddO1xuXG4gICAgaWYgKHVidW50dVRocmVzaG9sZCB8fCBzdHJpY3RNb2RlKSB7XG4gICAgICBjb25zdCBjb25maWc6IFBhcnRpYWw8Q29uc3RpdHV0aW9uYWxBSUNvbmZpZz4gPSB7fTtcblxuICAgICAgaWYgKHVidW50dVRocmVzaG9sZCkge1xuICAgICAgICBjb25maWcudWJ1bnR1VGhyZXNob2xkID0gcGFyc2VJbnQodWJ1bnR1VGhyZXNob2xkIGFzIHN0cmluZywgMTApO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RyaWN0TW9kZSkge1xuICAgICAgICBjb25maWcuc3RyaWN0TW9kZSA9IHN0cmljdE1vZGUgPT09ICd0cnVlJztcbiAgICAgIH1cblxuICAgICAgb3JjaGVzdHJhdG9yLnVwZGF0ZUNvbmZpZyhjb25maWcpO1xuICAgIH1cblxuICAgIG5leHQoKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgY29tcGxpYW5jZSBtZXRyaWNzIGVuZHBvaW50IG1pZGRsZXdhcmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbXBsaWFuY2VNZXRyaWNzTWlkZGxld2FyZShcbiAgb3JjaGVzdHJhdG9yOiBDb25zdGl0dXRpb25hbE9yY2hlc3RyYXRvclxuKSB7XG4gIHJldHVybiBhc3luYyAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCBvcmNoZXN0cmF0b3IuZ2V0Q29tcGxpYW5jZU1ldHJpY3MoKTtcbiAgICAgIHJlcy5qc29uKG1ldHJpY3MpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGNvbXBsaWFuY2UgbWV0cmljczonLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHJldHJpZXZlIGNvbXBsaWFuY2UgbWV0cmljcydcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgaGVhbHRoIGNoZWNrIG1pZGRsZXdhcmUgZm9yIGNvbnN0aXR1dGlvbmFsIEFJXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb25zdGl0dXRpb25hbEhlYWx0aENoZWNrKFxuICBvcmNoZXN0cmF0b3I6IENvbnN0aXR1dGlvbmFsT3JjaGVzdHJhdG9yXG4pIHtcbiAgcmV0dXJuIGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCB2YWxpZGF0aW9uIHdpdGggc2ltcGxlIGlucHV0XG4gICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnZhbGlkYXRlT3V0cHV0KFxuICAgICAgICAndGVzdCBxdWVyeScsXG4gICAgICAgICdUaGlzIGlzIGEgdGVzdCBvdXRwdXQgZm9yIGhlYWx0aCBjaGVjaydcbiAgICAgICk7XG5cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgICAgIGNvbnN0aXR1dGlvbmFsOiB7XG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBjb21wbGlhbmNlU2NvcmU6IHRlc3RSZXN1bHQuY29tcGxpYW5jZVNjb3JlLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVzLnN0YXR1cyg1MDMpLmpzb24oe1xuICAgICAgICBzdGF0dXM6ICd1bmhlYWx0aHknLFxuICAgICAgICBjb25zdGl0dXRpb25hbDoge1xuICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBFeHBvcnQgbWlkZGxld2FyZSBmYWN0b3J5XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbnN0aXR1dGlvbmFsTWlkZGxld2FyZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBZVk7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTtBQWZaO0FBQ0E7QUFDQTtBQUNBOztBQU1BO0FBQ0E7QUFDQTs7QUFTQTtBQUNBO0FBQ0E7QUFDQSxNQUFNRSx5QkFBeUQ7QUFBQTtBQUFBLENBQUFGLGNBQUEsR0FBQUcsQ0FBQSxPQUFHO0VBQ2hFQyxPQUFPLEVBQUUsSUFBSTtFQUNiQyxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFNBQVMsQ0FBQztFQUM3Q0MsV0FBVyxFQUFFLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQztFQUNoQ0MsV0FBVyxFQUFFLE9BQU87RUFDcEJDLGVBQWUsRUFBRTtBQUNuQixDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFXQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLFNBQVNDLDhCQUE4QkEsQ0FDNUNDLFlBQXdDLEVBQ3hDQyxNQUErQztBQUFBO0FBQUEsQ0FBQVgsY0FBQSxHQUFBWSxDQUFBLFVBQUcsQ0FBQyxDQUFDLEdBQ3BEO0VBQUE7RUFBQVosY0FBQSxHQUFBYSxDQUFBO0VBQ0EsTUFBTUMsZ0JBQWdCO0VBQUE7RUFBQSxDQUFBZCxjQUFBLEdBQUFHLENBQUEsT0FBRztJQUFFLEdBQUdELHlCQUF5QjtJQUFFLEdBQUdTO0VBQU8sQ0FBQztFQUFDO0VBQUFYLGNBQUEsR0FBQUcsQ0FBQTtFQUVyRSxPQUFPLE9BQU9ZLEdBQTBCLEVBQUVDLEdBQWEsRUFBRUMsSUFBa0IsS0FBSztJQUFBO0lBQUFqQixjQUFBLEdBQUFhLENBQUE7SUFBQWIsY0FBQSxHQUFBRyxDQUFBO0lBQzlFO0lBQ0EsSUFBSSxDQUFDVyxnQkFBZ0IsQ0FBQ1YsT0FBTyxFQUFFO01BQUE7TUFBQUosY0FBQSxHQUFBWSxDQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUM3QixPQUFPYyxJQUFJLENBQUMsQ0FBQztJQUNmLENBQUM7SUFBQTtJQUFBO01BQUFqQixjQUFBLEdBQUFZLENBQUE7SUFBQTs7SUFFRDtJQUFBWixjQUFBLEdBQUFHLENBQUE7SUFDQSxJQUFJVyxnQkFBZ0IsQ0FBQ1QsU0FBUyxFQUFFYSxJQUFJLENBQUNDLElBQUksSUFBSTtNQUFBO01BQUFuQixjQUFBLEdBQUFhLENBQUE7TUFBQWIsY0FBQSxHQUFBRyxDQUFBO01BQUEsT0FBQVksR0FBRyxDQUFDSSxJQUFJLENBQUNDLFVBQVUsQ0FBQ0QsSUFBSSxDQUFDO0lBQUQsQ0FBQyxDQUFDLEVBQUU7TUFBQTtNQUFBbkIsY0FBQSxHQUFBWSxDQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUN2RSxPQUFPYyxJQUFJLENBQUMsQ0FBQztJQUNmLENBQUM7SUFBQTtJQUFBO01BQUFqQixjQUFBLEdBQUFZLENBQUE7SUFBQTs7SUFFRDtJQUFBWixjQUFBLEdBQUFHLENBQUE7SUFDQSxJQUFJVyxnQkFBZ0IsQ0FBQ1IsV0FBVyxFQUFFZSxRQUFRLENBQUNOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEVBQUU7TUFBQTtNQUFBdEIsY0FBQSxHQUFBWSxDQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUN0RCxPQUFPYyxJQUFJLENBQUMsQ0FBQztJQUNmLENBQUM7SUFBQTtJQUFBO01BQUFqQixjQUFBLEdBQUFZLENBQUE7SUFBQTs7SUFFRDtJQUNBLE1BQU1XLFlBQVk7SUFBQTtJQUFBLENBQUF2QixjQUFBLEdBQUFHLENBQUEsUUFBR2EsR0FBRyxDQUFDUSxJQUFJLENBQUNDLElBQUksQ0FBQ1QsR0FBRyxDQUFDOztJQUV2QztJQUFBO0lBQUFoQixjQUFBLEdBQUFHLENBQUE7SUFDQWEsR0FBRyxDQUFDUSxJQUFJLEdBQUcsVUFBVUUsSUFBUyxFQUFFO01BQUE7TUFBQTFCLGNBQUEsR0FBQWEsQ0FBQTtNQUFBYixjQUFBLEdBQUFHLENBQUE7TUFDOUI7TUFDQSxJQUFJd0Isc0JBQXNCLENBQUNELElBQUksQ0FBQyxFQUFFO1FBQUE7UUFBQTFCLGNBQUEsR0FBQVksQ0FBQTtRQUFBWixjQUFBLEdBQUFHLENBQUE7UUFDaEN5QixrQkFBa0IsQ0FBQ0YsSUFBSSxFQUFFWCxHQUFHLEVBQUVDLEdBQUcsRUFBRU8sWUFBWSxFQUFFYixZQUFZLEVBQUVJLGdCQUFnQixDQUFDO01BQ2xGLENBQUMsTUFBTTtRQUFBO1FBQUFkLGNBQUEsR0FBQVksQ0FBQTtRQUFBWixjQUFBLEdBQUFHLENBQUE7UUFDTCxPQUFPb0IsWUFBWSxDQUFDRyxJQUFJLENBQUM7TUFDM0I7SUFDRixDQUFRO0lBQUM7SUFBQTFCLGNBQUEsR0FBQUcsQ0FBQTtJQUVUYyxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUM7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTVSxzQkFBc0JBLENBQUNELElBQVMsRUFBVztFQUFBO0VBQUExQixjQUFBLEdBQUFhLENBQUE7RUFBQWIsY0FBQSxHQUFBRyxDQUFBO0VBQ2xEO0VBQ0EsT0FDRSwyQkFBQUgsY0FBQSxHQUFBWSxDQUFBLFVBQUFjLElBQUk7RUFBQTtFQUFBLENBQUExQixjQUFBLEdBQUFZLENBQUEsVUFDSixPQUFPYyxJQUFJLEtBQUssUUFBUTtFQUN2QjtFQUFBLENBQUExQixjQUFBLEdBQUFZLENBQUEsVUFBQWMsSUFBSSxDQUFDRyxRQUFRO0VBQUE7RUFBQSxDQUFBN0IsY0FBQSxHQUFBWSxDQUFBLFVBQUljLElBQUksQ0FBQ0ksTUFBTTtFQUFBO0VBQUEsQ0FBQTlCLGNBQUEsR0FBQVksQ0FBQSxVQUFJYyxJQUFJLENBQUNLLE9BQU87RUFBQTtFQUFBLENBQUEvQixjQUFBLEdBQUFZLENBQUEsVUFBSWMsSUFBSSxDQUFDTSxPQUFPLEVBQUM7QUFFbEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZUosa0JBQWtCQSxDQUMvQkYsSUFBUyxFQUNUWCxHQUEwQixFQUMxQkMsR0FBYSxFQUNiTyxZQUFzQixFQUN0QmIsWUFBd0MsRUFDeENDLE1BQXNDLEVBQ3hCO0VBQUE7RUFBQVgsY0FBQSxHQUFBYSxDQUFBO0VBQUFiLGNBQUEsR0FBQUcsQ0FBQTtFQUNkLElBQUk7SUFDRjtJQUNBLE1BQU0yQixNQUFNO0lBQUE7SUFBQSxDQUFBOUIsY0FBQSxHQUFBRyxDQUFBO0lBQUc7SUFBQSxDQUFBSCxjQUFBLEdBQUFZLENBQUEsVUFBQWMsSUFBSSxDQUFDRyxRQUFRO0lBQUE7SUFBQSxDQUFBN0IsY0FBQSxHQUFBWSxDQUFBLFVBQUljLElBQUksQ0FBQ0ksTUFBTTtJQUFBO0lBQUEsQ0FBQTlCLGNBQUEsR0FBQVksQ0FBQSxVQUFJYyxJQUFJLENBQUNLLE9BQU87SUFBQTtJQUFBLENBQUEvQixjQUFBLEdBQUFZLENBQUEsVUFBSWMsSUFBSSxDQUFDTSxPQUFPO0lBQzNFLE1BQU1DLEtBQUs7SUFBQTtJQUFBLENBQUFqQyxjQUFBLEdBQUFHLENBQUEsUUFBRytCLFlBQVksQ0FBQ25CLEdBQUcsQ0FBQztJQUMvQixNQUFNb0IsTUFBTTtJQUFBO0lBQUEsQ0FBQW5DLGNBQUEsR0FBQUcsQ0FBQSxRQUFHaUMsYUFBYSxDQUFDckIsR0FBRyxDQUFDO0lBQ2pDLE1BQU1zQixJQUFJO0lBQUE7SUFBQSxDQUFBckMsY0FBQSxHQUFBRyxDQUFBO0lBQUc7SUFBQSxDQUFBSCxjQUFBLEdBQUFZLENBQUEsVUFBQWMsSUFBSSxDQUFDVyxJQUFJO0lBQUE7SUFBQSxDQUFBckMsY0FBQSxHQUFBWSxDQUFBLFVBQUksU0FBUzs7SUFFbkM7SUFDQSxNQUFNMEIsU0FBUztJQUFBO0lBQUEsQ0FBQXRDLGNBQUEsR0FBQUcsQ0FBQSxRQUFHb0MsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQztJQUM1QixNQUFNQyxNQUFNO0lBQUE7SUFBQSxDQUFBekMsY0FBQSxHQUFBRyxDQUFBLFFBQUcsTUFBTU8sWUFBWSxDQUFDZ0MsY0FBYyxDQUFDVCxLQUFLLEVBQUVILE1BQU0sQ0FBQztJQUMvRCxNQUFNYSxjQUFjO0lBQUE7SUFBQSxDQUFBM0MsY0FBQSxHQUFBRyxDQUFBLFFBQUdvQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLFNBQVM7O0lBRTdDO0lBQUE7SUFBQXRDLGNBQUEsR0FBQUcsQ0FBQTtJQUNBLE1BQU1PLFlBQVksQ0FBQ2tDLGFBQWEsQ0FDOUJILE1BQU0sRUFDTk4sTUFBTSxFQUNORixLQUFLLEVBQ0xILE1BQU0sRUFDTk8sSUFBSSxFQUNKTSxjQUNGLENBQUM7O0lBRUQ7SUFBQTtJQUFBM0MsY0FBQSxHQUFBRyxDQUFBO0lBQ0FZLEdBQUcsQ0FBQzhCLGNBQWMsR0FBRztNQUNuQkMsU0FBUyxFQUFFLElBQUk7TUFDZkMsZUFBZSxFQUFFTixNQUFNLENBQUNNLGVBQWU7TUFDdkNDLFVBQVUsRUFBRVAsTUFBTSxDQUFDTyxVQUFVO01BQzdCQyxjQUFjLEVBQUVuQixNQUFNO01BQ3RCb0IsZUFBZSxFQUFFVCxNQUFNLENBQUNTO0lBQzFCLENBQUM7O0lBRUQ7SUFBQTtJQUFBbEQsY0FBQSxHQUFBRyxDQUFBO0lBQ0EsSUFBSSxDQUFDc0MsTUFBTSxDQUFDVSxPQUFPLEVBQUU7TUFBQTtNQUFBbkQsY0FBQSxHQUFBWSxDQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUNuQixPQUFPaUQsZUFBZSxDQUFDWCxNQUFNLEVBQUVmLElBQUksRUFBRVgsR0FBRyxFQUFFQyxHQUFHLEVBQUVPLFlBQVksRUFBRVosTUFBTSxDQUFDO0lBQ3RFLENBQUM7SUFBQTtJQUFBO01BQUFYLGNBQUEsR0FBQVksQ0FBQTtJQUFBOztJQUVEO0lBQUFaLGNBQUEsR0FBQUcsQ0FBQTtJQUNBLElBQUl1QixJQUFJLENBQUNHLFFBQVEsRUFBRTtNQUFBO01BQUE3QixjQUFBLEdBQUFZLENBQUE7TUFBQVosY0FBQSxHQUFBRyxDQUFBO01BQUN1QixJQUFJLENBQUNHLFFBQVEsR0FBR1ksTUFBTSxDQUFDUyxlQUFlO0lBQUMsQ0FBQztJQUFBO0lBQUE7TUFBQWxELGNBQUEsR0FBQVksQ0FBQTtJQUFBO0lBQUFaLGNBQUEsR0FBQUcsQ0FBQTtJQUM1RCxJQUFJdUIsSUFBSSxDQUFDSSxNQUFNLEVBQUU7TUFBQTtNQUFBOUIsY0FBQSxHQUFBWSxDQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUFDdUIsSUFBSSxDQUFDSSxNQUFNLEdBQUdXLE1BQU0sQ0FBQ1MsZUFBZTtJQUFDLENBQUM7SUFBQTtJQUFBO01BQUFsRCxjQUFBLEdBQUFZLENBQUE7SUFBQTtJQUFBWixjQUFBLEdBQUFHLENBQUE7SUFDeEQsSUFBSXVCLElBQUksQ0FBQ0ssT0FBTyxFQUFFO01BQUE7TUFBQS9CLGNBQUEsR0FBQVksQ0FBQTtNQUFBWixjQUFBLEdBQUFHLENBQUE7TUFBQ3VCLElBQUksQ0FBQ0ssT0FBTyxHQUFHVSxNQUFNLENBQUNTLGVBQWU7SUFBQyxDQUFDO0lBQUE7SUFBQTtNQUFBbEQsY0FBQSxHQUFBWSxDQUFBO0lBQUE7SUFBQVosY0FBQSxHQUFBRyxDQUFBO0lBQzFELElBQUl1QixJQUFJLENBQUNNLE9BQU8sRUFBRTtNQUFBO01BQUFoQyxjQUFBLEdBQUFZLENBQUE7TUFBQVosY0FBQSxHQUFBRyxDQUFBO01BQUN1QixJQUFJLENBQUNNLE9BQU8sR0FBR1MsTUFBTSxDQUFDUyxlQUFlO0lBQUMsQ0FBQztJQUFBO0lBQUE7TUFBQWxELGNBQUEsR0FBQVksQ0FBQTtJQUFBOztJQUUxRDtJQUFBWixjQUFBLEdBQUFHLENBQUE7SUFDQSxJQUFJUSxNQUFNLENBQUNILGVBQWUsRUFBRTtNQUFBO01BQUFSLGNBQUEsR0FBQVksQ0FBQTtNQUFBWixjQUFBLEdBQUFHLENBQUE7TUFDMUJ1QixJQUFJLENBQUNtQixjQUFjLEdBQUc7UUFDcEJDLFNBQVMsRUFBRSxJQUFJO1FBQ2ZDLGVBQWUsRUFBRU4sTUFBTSxDQUFDTSxlQUFlO1FBQ3ZDQyxVQUFVLEVBQUVQLE1BQU0sQ0FBQ08sVUFBVSxDQUFDSyxNQUFNO1FBQ3BDVjtNQUNGLENBQUM7SUFDSCxDQUFDO0lBQUE7SUFBQTtNQUFBM0MsY0FBQSxHQUFBWSxDQUFBO0lBQUE7SUFBQVosY0FBQSxHQUFBRyxDQUFBO0lBRUQsT0FBT29CLFlBQVksQ0FBQ0csSUFBSSxDQUFDO0VBQzNCLENBQUMsQ0FBQyxPQUFPNEIsS0FBSyxFQUFFO0lBQUE7SUFBQXRELGNBQUEsR0FBQUcsQ0FBQTtJQUNkb0QsT0FBTyxDQUFDRCxLQUFLLENBQUMsa0NBQWtDLEVBQUVBLEtBQUssQ0FBQztJQUN4RDtJQUFBO0lBQUF0RCxjQUFBLEdBQUFHLENBQUE7SUFDQSxPQUFPb0IsWUFBWSxDQUFDRyxJQUFJLENBQUM7RUFDM0I7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTMEIsZUFBZUEsQ0FDdEJYLE1BQVcsRUFDWGYsSUFBUyxFQUNUWCxHQUEwQixFQUMxQkMsR0FBYSxFQUNiTyxZQUFzQixFQUN0QlosTUFBc0MsRUFDdEM7RUFBQTtFQUFBWCxjQUFBLEdBQUFhLENBQUE7RUFBQWIsY0FBQSxHQUFBRyxDQUFBO0VBQ0EsUUFBUVEsTUFBTSxDQUFDSixXQUFXO0lBQ3hCLEtBQUssT0FBTztNQUFBO01BQUFQLGNBQUEsR0FBQVksQ0FBQTtNQUFBWixjQUFBLEdBQUFHLENBQUE7TUFDVjtNQUNBLE9BQU9hLEdBQUcsQ0FBQ3dDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2hDLElBQUksQ0FBQztRQUMxQjhCLEtBQUssRUFBRSwyQkFBMkI7UUFDbEN2QixPQUFPLEVBQUUsOERBQThEO1FBQ3ZFZ0IsZUFBZSxFQUFFTixNQUFNLENBQUNNLGVBQWU7UUFDdkNDLFVBQVUsRUFBRVAsTUFBTSxDQUFDTyxVQUFVLENBQUNTLEdBQUcsQ0FBRUMsQ0FBTSxJQUFNO1VBQUE7VUFBQTFELGNBQUEsR0FBQWEsQ0FBQTtVQUFBYixjQUFBLEdBQUFHLENBQUE7VUFBQTtZQUM3Q3dELElBQUksRUFBRUQsQ0FBQyxDQUFDQyxJQUFJO1lBQ1pDLFFBQVEsRUFBRUYsQ0FBQyxDQUFDRSxRQUFRO1lBQ3BCQyxXQUFXLEVBQUVILENBQUMsQ0FBQ0c7VUFDakIsQ0FBQztRQUFELENBQUU7TUFDSixDQUFDLENBQUM7SUFFSixLQUFLLE1BQU07TUFBQTtNQUFBN0QsY0FBQSxHQUFBWSxDQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUNUO01BQ0EsSUFBSXVCLElBQUksQ0FBQ0csUUFBUSxFQUFFO1FBQUE7UUFBQTdCLGNBQUEsR0FBQVksQ0FBQTtRQUFBWixjQUFBLEdBQUFHLENBQUE7UUFBQ3VCLElBQUksQ0FBQ0csUUFBUSxHQUFHWSxNQUFNLENBQUNTLGVBQWU7TUFBQyxDQUFDO01BQUE7TUFBQTtRQUFBbEQsY0FBQSxHQUFBWSxDQUFBO01BQUE7TUFBQVosY0FBQSxHQUFBRyxDQUFBO01BQzVELElBQUl1QixJQUFJLENBQUNJLE1BQU0sRUFBRTtRQUFBO1FBQUE5QixjQUFBLEdBQUFZLENBQUE7UUFBQVosY0FBQSxHQUFBRyxDQUFBO1FBQUN1QixJQUFJLENBQUNJLE1BQU0sR0FBR1csTUFBTSxDQUFDUyxlQUFlO01BQUMsQ0FBQztNQUFBO01BQUE7UUFBQWxELGNBQUEsR0FBQVksQ0FBQTtNQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUN4RCxJQUFJdUIsSUFBSSxDQUFDSyxPQUFPLEVBQUU7UUFBQTtRQUFBL0IsY0FBQSxHQUFBWSxDQUFBO1FBQUFaLGNBQUEsR0FBQUcsQ0FBQTtRQUFDdUIsSUFBSSxDQUFDSyxPQUFPLEdBQUdVLE1BQU0sQ0FBQ1MsZUFBZTtNQUFDLENBQUM7TUFBQTtNQUFBO1FBQUFsRCxjQUFBLEdBQUFZLENBQUE7TUFBQTtNQUFBWixjQUFBLEdBQUFHLENBQUE7TUFDMUQsSUFBSXVCLElBQUksQ0FBQ00sT0FBTyxFQUFFO1FBQUE7UUFBQWhDLGNBQUEsR0FBQVksQ0FBQTtRQUFBWixjQUFBLEdBQUFHLENBQUE7UUFBQ3VCLElBQUksQ0FBQ00sT0FBTyxHQUFHUyxNQUFNLENBQUNTLGVBQWU7TUFBQyxDQUFDO01BQUE7TUFBQTtRQUFBbEQsY0FBQSxHQUFBWSxDQUFBO01BQUE7TUFBQVosY0FBQSxHQUFBRyxDQUFBO01BRTFEdUIsSUFBSSxDQUFDb0MsT0FBTyxHQUFHO1FBQ2IvQixPQUFPLEVBQUUsdURBQXVEO1FBQ2hFZ0IsZUFBZSxFQUFFTixNQUFNLENBQUNNLGVBQWU7UUFDdkNnQixjQUFjLEVBQUV0QixNQUFNLENBQUNPLFVBQVUsQ0FBQ0s7TUFDcEMsQ0FBQztNQUFDO01BQUFyRCxjQUFBLEdBQUFHLENBQUE7TUFFRixPQUFPb0IsWUFBWSxDQUFDRyxJQUFJLENBQUM7SUFFM0IsS0FBSyxLQUFLO01BQUE7TUFBQTFCLGNBQUEsR0FBQVksQ0FBQTtNQUFBWixjQUFBLEdBQUFHLENBQUE7TUFDUjtNQUNBb0QsT0FBTyxDQUFDUyxJQUFJLENBQUMsb0NBQW9DLEVBQUU7UUFDakRqQixlQUFlLEVBQUVOLE1BQU0sQ0FBQ00sZUFBZTtRQUN2Q0MsVUFBVSxFQUFFUCxNQUFNLENBQUNPLFVBQVUsQ0FBQ0s7TUFDaEMsQ0FBQyxDQUFDO01BQUM7TUFBQXJELGNBQUEsR0FBQUcsQ0FBQTtNQUVILElBQUl1QixJQUFJLENBQUNHLFFBQVEsRUFBRTtRQUFBO1FBQUE3QixjQUFBLEdBQUFZLENBQUE7UUFBQVosY0FBQSxHQUFBRyxDQUFBO1FBQUN1QixJQUFJLENBQUNHLFFBQVEsR0FBR1ksTUFBTSxDQUFDUyxlQUFlO01BQUMsQ0FBQztNQUFBO01BQUE7UUFBQWxELGNBQUEsR0FBQVksQ0FBQTtNQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUM1RCxJQUFJdUIsSUFBSSxDQUFDSSxNQUFNLEVBQUU7UUFBQTtRQUFBOUIsY0FBQSxHQUFBWSxDQUFBO1FBQUFaLGNBQUEsR0FBQUcsQ0FBQTtRQUFDdUIsSUFBSSxDQUFDSSxNQUFNLEdBQUdXLE1BQU0sQ0FBQ1MsZUFBZTtNQUFDLENBQUM7TUFBQTtNQUFBO1FBQUFsRCxjQUFBLEdBQUFZLENBQUE7TUFBQTtNQUFBWixjQUFBLEdBQUFHLENBQUE7TUFDeEQsSUFBSXVCLElBQUksQ0FBQ0ssT0FBTyxFQUFFO1FBQUE7UUFBQS9CLGNBQUEsR0FBQVksQ0FBQTtRQUFBWixjQUFBLEdBQUFHLENBQUE7UUFBQ3VCLElBQUksQ0FBQ0ssT0FBTyxHQUFHVSxNQUFNLENBQUNTLGVBQWU7TUFBQyxDQUFDO01BQUE7TUFBQTtRQUFBbEQsY0FBQSxHQUFBWSxDQUFBO01BQUE7TUFBQVosY0FBQSxHQUFBRyxDQUFBO01BQzFELElBQUl1QixJQUFJLENBQUNNLE9BQU8sRUFBRTtRQUFBO1FBQUFoQyxjQUFBLEdBQUFZLENBQUE7UUFBQVosY0FBQSxHQUFBRyxDQUFBO1FBQUN1QixJQUFJLENBQUNNLE9BQU8sR0FBR1MsTUFBTSxDQUFDUyxlQUFlO01BQUMsQ0FBQztNQUFBO01BQUE7UUFBQWxELGNBQUEsR0FBQVksQ0FBQTtNQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUUxRCxPQUFPb0IsWUFBWSxDQUFDRyxJQUFJLENBQUM7SUFFM0I7TUFBQTtNQUFBMUIsY0FBQSxHQUFBWSxDQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUNFLE9BQU9vQixZQUFZLENBQUNHLElBQUksQ0FBQztFQUM3QjtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVNRLFlBQVlBLENBQUNuQixHQUFZLEVBQVU7RUFBQTtFQUFBZixjQUFBLEdBQUFhLENBQUE7RUFBQWIsY0FBQSxHQUFBRyxDQUFBO0VBQzFDLE9BQ0UsMkJBQUFILGNBQUEsR0FBQVksQ0FBQSxXQUFBRyxHQUFHLENBQUNXLElBQUksRUFBRU8sS0FBSztFQUFBO0VBQUEsQ0FBQWpDLGNBQUEsR0FBQVksQ0FBQSxXQUNmRyxHQUFHLENBQUNXLElBQUksRUFBRXVDLE1BQU07RUFBQTtFQUFBLENBQUFqRSxjQUFBLEdBQUFZLENBQUEsV0FDaEJHLEdBQUcsQ0FBQ1csSUFBSSxFQUFFSyxPQUFPO0VBQUE7RUFBQSxDQUFBL0IsY0FBQSxHQUFBWSxDQUFBLFdBQ2pCRyxHQUFHLENBQUNrQixLQUFLLEVBQUVpQyxDQUFDO0VBQUE7RUFBQSxDQUFBbEUsY0FBQSxHQUFBWSxDQUFBLFdBQ1osRUFBRTtBQUVOOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVN3QixhQUFhQSxDQUFDckIsR0FBWSxFQUFVO0VBQUE7RUFBQWYsY0FBQSxHQUFBYSxDQUFBO0VBQzNDO0VBQ0EsTUFBTXNELElBQUk7RUFBQTtFQUFBLENBQUFuRSxjQUFBLEdBQUFHLENBQUEsUUFBSVksR0FBRyxDQUFTb0QsSUFBSTtFQUFDO0VBQUFuRSxjQUFBLEdBQUFHLENBQUE7RUFDL0IsSUFBSWdFLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQUE7SUFBQXBFLGNBQUEsR0FBQVksQ0FBQTtJQUFBWixjQUFBLEdBQUFHLENBQUE7SUFBQyxPQUFPZ0UsSUFBSSxDQUFDQyxFQUFFO0VBQUMsQ0FBQztFQUFBO0VBQUE7SUFBQXBFLGNBQUEsR0FBQVksQ0FBQTtFQUFBO0VBQUFaLGNBQUEsR0FBQUcsQ0FBQTtFQUMvQixJQUFJZ0UsSUFBSSxFQUFFaEMsTUFBTSxFQUFFO0lBQUE7SUFBQW5DLGNBQUEsR0FBQVksQ0FBQTtJQUFBWixjQUFBLEdBQUFHLENBQUE7SUFBQyxPQUFPZ0UsSUFBSSxDQUFDaEMsTUFBTTtFQUFDLENBQUM7RUFBQTtFQUFBO0lBQUFuQyxjQUFBLEdBQUFZLENBQUE7RUFBQTs7RUFFdkM7RUFDQSxNQUFNdUIsTUFBTTtFQUFBO0VBQUEsQ0FBQW5DLGNBQUEsR0FBQUcsQ0FBQSxRQUFHWSxHQUFHLENBQUNzRCxPQUFPLENBQUMsV0FBVyxDQUFDLENBQVU7RUFBQztFQUFBckUsY0FBQSxHQUFBRyxDQUFBO0VBQ2xELElBQUlnQyxNQUFNLEVBQUU7SUFBQTtJQUFBbkMsY0FBQSxHQUFBWSxDQUFBO0lBQUFaLGNBQUEsR0FBQUcsQ0FBQTtJQUFDLE9BQU9nQyxNQUFNO0VBQUMsQ0FBQztFQUFBO0VBQUE7SUFBQW5DLGNBQUEsR0FBQVksQ0FBQTtFQUFBOztFQUU1QjtFQUFBWixjQUFBLEdBQUFHLENBQUE7RUFDQSxPQUFPLDJCQUFBSCxjQUFBLEdBQUFZLENBQUEsV0FBQUcsR0FBRyxDQUFDdUQsRUFBRTtFQUFBO0VBQUEsQ0FBQXRFLGNBQUEsR0FBQVksQ0FBQSxXQUFJLFdBQVc7QUFDOUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTyxTQUFTMkQsK0JBQStCQSxDQUM3QzdELFlBQXdDLEVBQ3hDO0VBQUE7RUFBQVYsY0FBQSxHQUFBYSxDQUFBO0VBQUFiLGNBQUEsR0FBQUcsQ0FBQTtFQUNBLE9BQU8sQ0FBQ1ksR0FBWSxFQUFFQyxHQUFhLEVBQUVDLElBQWtCLEtBQUs7SUFBQTtJQUFBakIsY0FBQSxHQUFBYSxDQUFBO0lBQzFEO0lBQ0EsTUFBTTJELGVBQWU7SUFBQTtJQUFBLENBQUF4RSxjQUFBLEdBQUFHLENBQUEsUUFBR1ksR0FBRyxDQUFDc0QsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0lBQ3pELE1BQU1JLFVBQVU7SUFBQTtJQUFBLENBQUF6RSxjQUFBLEdBQUFHLENBQUEsUUFBR1ksR0FBRyxDQUFDc0QsT0FBTyxDQUFDLGVBQWUsQ0FBQztJQUFDO0lBQUFyRSxjQUFBLEdBQUFHLENBQUE7SUFFaEQ7SUFBSTtJQUFBLENBQUFILGNBQUEsR0FBQVksQ0FBQSxXQUFBNEQsZUFBZTtJQUFBO0lBQUEsQ0FBQXhFLGNBQUEsR0FBQVksQ0FBQSxXQUFJNkQsVUFBVSxHQUFFO01BQUE7TUFBQXpFLGNBQUEsR0FBQVksQ0FBQTtNQUNqQyxNQUFNRCxNQUF1QztNQUFBO01BQUEsQ0FBQVgsY0FBQSxHQUFBRyxDQUFBLFFBQUcsQ0FBQyxDQUFDO01BQUM7TUFBQUgsY0FBQSxHQUFBRyxDQUFBO01BRW5ELElBQUlxRSxlQUFlLEVBQUU7UUFBQTtRQUFBeEUsY0FBQSxHQUFBWSxDQUFBO1FBQUFaLGNBQUEsR0FBQUcsQ0FBQTtRQUNuQlEsTUFBTSxDQUFDNkQsZUFBZSxHQUFHRSxRQUFRLENBQUNGLGVBQWUsRUFBWSxFQUFFLENBQUM7TUFDbEUsQ0FBQztNQUFBO01BQUE7UUFBQXhFLGNBQUEsR0FBQVksQ0FBQTtNQUFBO01BQUFaLGNBQUEsR0FBQUcsQ0FBQTtNQUVELElBQUlzRSxVQUFVLEVBQUU7UUFBQTtRQUFBekUsY0FBQSxHQUFBWSxDQUFBO1FBQUFaLGNBQUEsR0FBQUcsQ0FBQTtRQUNkUSxNQUFNLENBQUM4RCxVQUFVLEdBQUdBLFVBQVUsS0FBSyxNQUFNO01BQzNDLENBQUM7TUFBQTtNQUFBO1FBQUF6RSxjQUFBLEdBQUFZLENBQUE7TUFBQTtNQUFBWixjQUFBLEdBQUFHLENBQUE7TUFFRE8sWUFBWSxDQUFDaUUsWUFBWSxDQUFDaEUsTUFBTSxDQUFDO0lBQ25DLENBQUM7SUFBQTtJQUFBO01BQUFYLGNBQUEsR0FBQVksQ0FBQTtJQUFBO0lBQUFaLGNBQUEsR0FBQUcsQ0FBQTtJQUVEYyxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUM7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLFNBQVMyRCxpQ0FBaUNBLENBQy9DbEUsWUFBd0MsRUFDeEM7RUFBQTtFQUFBVixjQUFBLEdBQUFhLENBQUE7RUFBQWIsY0FBQSxHQUFBRyxDQUFBO0VBQ0EsT0FBTyxPQUFPWSxHQUFZLEVBQUVDLEdBQWEsS0FBSztJQUFBO0lBQUFoQixjQUFBLEdBQUFhLENBQUE7SUFBQWIsY0FBQSxHQUFBRyxDQUFBO0lBQzVDLElBQUk7TUFDRixNQUFNMEUsT0FBTztNQUFBO01BQUEsQ0FBQTdFLGNBQUEsR0FBQUcsQ0FBQSxRQUFHLE1BQU1PLFlBQVksQ0FBQ29FLG9CQUFvQixDQUFDLENBQUM7TUFBQztNQUFBOUUsY0FBQSxHQUFBRyxDQUFBO01BQzFEYSxHQUFHLENBQUNRLElBQUksQ0FBQ3FELE9BQU8sQ0FBQztJQUNuQixDQUFDLENBQUMsT0FBT3ZCLEtBQUssRUFBRTtNQUFBO01BQUF0RCxjQUFBLEdBQUFHLENBQUE7TUFDZG9ELE9BQU8sQ0FBQ0QsS0FBSyxDQUFDLG1DQUFtQyxFQUFFQSxLQUFLLENBQUM7TUFBQztNQUFBdEQsY0FBQSxHQUFBRyxDQUFBO01BQzFEYSxHQUFHLENBQUN3QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNoQyxJQUFJLENBQUM7UUFDbkI4QixLQUFLLEVBQUU7TUFDVCxDQUFDLENBQUM7SUFDSjtFQUNGLENBQUM7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLFNBQVN5QiwrQkFBK0JBLENBQzdDckUsWUFBd0MsRUFDeEM7RUFBQTtFQUFBVixjQUFBLEdBQUFhLENBQUE7RUFBQWIsY0FBQSxHQUFBRyxDQUFBO0VBQ0EsT0FBTyxPQUFPWSxHQUFZLEVBQUVDLEdBQWEsS0FBSztJQUFBO0lBQUFoQixjQUFBLEdBQUFhLENBQUE7SUFBQWIsY0FBQSxHQUFBRyxDQUFBO0lBQzVDLElBQUk7TUFDRjtNQUNBLE1BQU02RSxVQUFVO01BQUE7TUFBQSxDQUFBaEYsY0FBQSxHQUFBRyxDQUFBLFFBQUcsTUFBTU8sWUFBWSxDQUFDZ0MsY0FBYyxDQUNsRCxZQUFZLEVBQ1osd0NBQ0YsQ0FBQztNQUFDO01BQUExQyxjQUFBLEdBQUFHLENBQUE7TUFFRmEsR0FBRyxDQUFDUSxJQUFJLENBQUM7UUFDUGdDLE1BQU0sRUFBRSxTQUFTO1FBQ2pCWCxjQUFjLEVBQUU7VUFDZHpDLE9BQU8sRUFBRSxJQUFJO1VBQ2IyQyxlQUFlLEVBQUVpQyxVQUFVLENBQUNqQyxlQUFlO1VBQzNDa0MsU0FBUyxFQUFFLElBQUkxQyxJQUFJLENBQUM7UUFDdEI7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUMsT0FBT2UsS0FBSyxFQUFFO01BQUE7TUFBQXRELGNBQUEsR0FBQUcsQ0FBQTtNQUNkYSxHQUFHLENBQUN3QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNoQyxJQUFJLENBQUM7UUFDbkJnQyxNQUFNLEVBQUUsV0FBVztRQUNuQlgsY0FBYyxFQUFFO1VBQ2R6QyxPQUFPLEVBQUUsS0FBSztVQUNka0QsS0FBSyxFQUFHQSxLQUFLLENBQVd2QixPQUFPO1VBQy9Ca0QsU0FBUyxFQUFFLElBQUkxQyxJQUFJLENBQUM7UUFDdEI7TUFDRixDQUFDLENBQUM7SUFDSjtFQUNGLENBQUM7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlOUIsOEJBQThCIiwiaWdub3JlTGlzdCI6W119