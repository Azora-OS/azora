{"version":3,"names":["cov_2840sfaux8","actualCoverage","RoutingTier","LocalLLMService","modelLoaded","s","responseCache","Map","cacheExpiry","constructor","config","f","model","quantization","maxTokens","temperature","topP","contextWindow","initialize","b","loadModel","error","Error","message","String","Promise","resolve","setTimeout","processQuery","query","startTime","Date","now","queryHash","hashQuery","cached","getFromCache","id","content","routingTier","LOCAL_LLM","responseTime","cost","metadata","cacheHit","response","generateResponse","setInCache","tokensGenerated","estimateTokenCount","Math","random","generateMockResponse","lowerQuery","toLowerCase","includes","hash","i","length","char","charCodeAt","abs","get","timestamp","delete","set","size","entries","Array","from","sort","a","entry","text","ceil","isReady","getStatus","loaded","cacheSize","clearCache","clear","getCacheStats","maxSize","utilizationPercent","unload"],"sources":["local-llm-service.ts"],"sourcesContent":["/**\n * Local LLM Service\n * Handles on-device inference using quantized Llama/Phi models\n * Route A: Simple queries (FAQ, basic search, factual lookup)\n */\n\nimport { AIQuery, AIResponse, RoutingTier } from './types';\n\n/**\n * Configuration for Local LLM Service\n */\nexport interface LocalLLMConfig {\n  model: 'llama' | 'phi';\n  quantization: 'q4' | 'q5' | 'q8';\n  maxTokens: number;\n  temperature: number;\n  topP: number;\n  contextWindow: number;\n  modelPath?: string;\n}\n\n/**\n * Local LLM Service\n * Provides on-device inference for simple queries\n */\nexport class LocalLLMService {\n  private config: LocalLLMConfig;\n  private modelLoaded: boolean = false;\n  private responseCache: Map<string, { response: string; timestamp: number }> = new Map();\n  private cacheExpiry: number = 3600000; // 1 hour in milliseconds\n\n  constructor(config?: Partial<LocalLLMConfig>) {\n    this.config = {\n      model: 'llama',\n      quantization: 'q4',\n      maxTokens: 512,\n      temperature: 0.7,\n      topP: 0.9,\n      contextWindow: 2048,\n      ...config\n    };\n  }\n\n  /**\n   * Initialize the Local LLM model\n   * In production, this would load the actual quantized model\n   */\n  async initialize(): Promise<void> {\n    if (this.modelLoaded) {\n      return;\n    }\n\n    try {\n      // In a real implementation, this would load the quantized model\n      // For now, we simulate model loading\n      await this.loadModel();\n      this.modelLoaded = true;\n    } catch (error) {\n      throw new Error(`Failed to initialize Local LLM: ${error instanceof Error ? error.message : String(error)}`);\n    }\n  }\n\n  /**\n   * Load the quantized model\n   * This is a placeholder for actual model loading logic\n   */\n  private async loadModel(): Promise<void> {\n    // Simulate model loading delay\n    await new Promise(resolve => setTimeout(resolve, 100));\n\n    // In production, this would:\n    // 1. Check if model exists locally\n    // 2. Download if needed\n    // 3. Load quantized weights\n    // 4. Initialize inference engine\n    // Model loading simulated - in production would load actual quantized model\n  }\n\n  /**\n   * Process a query using the local LLM\n   */\n  async processQuery(query: AIQuery): Promise<AIResponse> {\n    if (!this.modelLoaded) {\n      await this.initialize();\n    }\n\n    const startTime = Date.now();\n    const queryHash = this.hashQuery(query.query);\n\n    // Check cache first\n    const cached = this.getFromCache(queryHash);\n    if (cached) {\n      return {\n        id: `response-${Date.now()}`,\n        content: cached,\n        routingTier: RoutingTier.LOCAL_LLM,\n        responseTime: Date.now() - startTime,\n        cost: 0,\n        cached: true,\n        metadata: {\n          model: this.config.model,\n          quantization: this.config.quantization,\n          cacheHit: true\n        }\n      };\n    }\n\n    // Generate response\n    const response = await this.generateResponse(query.query);\n\n    // Cache the response\n    this.setInCache(queryHash, response);\n\n    const responseTime = Date.now() - startTime;\n\n    return {\n      id: `response-${Date.now()}`,\n      content: response,\n      routingTier: RoutingTier.LOCAL_LLM,\n      responseTime,\n      cost: 0, // Local LLM has no API cost\n      cached: false,\n      metadata: {\n        model: this.config.model,\n        quantization: this.config.quantization,\n        tokensGenerated: this.estimateTokenCount(response),\n        temperature: this.config.temperature,\n        topP: this.config.topP\n      }\n    };\n  }\n\n  /**\n   * Generate a response for the query\n   * In production, this would call the actual LLM inference\n   */\n  private async generateResponse(query: string): Promise<string> {\n    // Simulate inference delay (quantized models are fast)\n    await new Promise(resolve => setTimeout(resolve, Math.random() * 200 + 50));\n\n    // In production, this would:\n    // 1. Tokenize the query\n    // 2. Run inference on the quantized model\n    // 3. Decode tokens to text\n    // 4. Apply post-processing\n\n    return this.generateMockResponse(query);\n  }\n\n  /**\n   * Generate a mock response for testing\n   * In production, this would be replaced with actual LLM inference\n   */\n  private generateMockResponse(query: string): string {\n    // Simple pattern matching for common queries\n    const lowerQuery = query.toLowerCase();\n\n    // FAQ responses\n    if (lowerQuery.includes('hello') || lowerQuery.includes('hi')) {\n      return 'Hello! I\\'m here to help. What would you like to know?';\n    }\n\n    if (lowerQuery.includes('what is') && lowerQuery.includes('azora')) {\n      return 'Azora is an autonomous education and economic platform that combines learning, earning, and community building. It uses AI, blockchain, and token economics to create a sustainable ecosystem.';\n    }\n\n    if (lowerQuery.includes('how do i') && lowerQuery.includes('start')) {\n      return 'To get started with Azora: 1) Create an account, 2) Explore available courses, 3) Complete learning modules, 4) Earn AZR tokens, 5) Participate in the community.';\n    }\n\n    if (lowerQuery.includes('what are') && lowerQuery.includes('token')) {\n      return 'AZR tokens are Azora\\'s native cryptocurrency. They represent value and access within the platform. You can earn tokens by completing courses, contributing knowledge, and participating in the community.';\n    }\n\n    if (lowerQuery.includes('how much') || lowerQuery.includes('cost')) {\n      return 'Azora offers free and premium courses. Free courses are always available. Premium courses have a one-time purchase fee. Prices vary by course complexity and instructor.';\n    }\n\n    if (lowerQuery.includes('certificate') || lowerQuery.includes('proof')) {\n      return 'Upon completing a course, you receive a digital certificate with a verification hash. This serves as proof of knowledge and can be shared with employers or educational institutions.';\n    }\n\n    // Factual lookups\n    if (lowerQuery.includes('capital') && lowerQuery.includes('france')) {\n      return 'The capital of France is Paris.';\n    }\n\n    if (lowerQuery.includes('capital') && lowerQuery.includes('south africa')) {\n      return 'South Africa has three capitals: Pretoria (executive), Cape Town (legislative), and Bloemfontein (judicial).';\n    }\n\n    // Default response for unknown queries\n    return `I can help with that. Your query was: \"${query}\". For more complex questions, please try our advanced search or contact support.`;\n  }\n\n  /**\n   * Hash a query for cache lookup\n   */\n  private hashQuery(query: string): string {\n    // Simple hash function for demonstration\n    // In production, use crypto.createHash('sha256')\n    let hash = 0;\n    for (let i = 0; i < query.length; i++) {\n      const char = query.charCodeAt(i);\n      hash = (hash << 5) - hash + char;\n      hash = hash & hash; // Convert to 32-bit integer\n    }\n    return `query-${Math.abs(hash)}`;\n  }\n\n  /**\n   * Get response from cache\n   */\n  private getFromCache(queryHash: string): string | null {\n    const cached = this.responseCache.get(queryHash);\n    if (!cached) {\n      return null;\n    }\n\n    // Check if cache entry has expired\n    if (Date.now() - cached.timestamp > this.cacheExpiry) {\n      this.responseCache.delete(queryHash);\n      return null;\n    }\n\n    return cached.response;\n  }\n\n  /**\n   * Store response in cache\n   */\n  private setInCache(queryHash: string, response: string): void {\n    this.responseCache.set(queryHash, {\n      response,\n      timestamp: Date.now()\n    });\n\n    // Limit cache size to prevent memory issues\n    if (this.responseCache.size > 1000) {\n      // Remove oldest entries\n      const entries = Array.from(this.responseCache.entries());\n      entries.sort((a, b) => a[1].timestamp - b[1].timestamp);\n      for (let i = 0; i < 100 && i < entries.length; i++) {\n        const entry = entries[i];\n        if (entry) {\n          this.responseCache.delete(entry[0]);\n        }\n      }\n    }\n  }\n\n  /**\n   * Estimate token count for a response\n   * Rough approximation: ~4 characters per token\n   */\n  private estimateTokenCount(text: string): number {\n    return Math.ceil(text.length / 4);\n  }\n\n  /**\n   * Check if the service is ready\n   */\n  isReady(): boolean {\n    return this.modelLoaded;\n  }\n\n  /**\n   * Get service status\n   */\n  getStatus(): {\n    loaded: boolean;\n    model: string;\n    quantization: string;\n    cacheSize: number;\n    maxTokens: number;\n  } {\n    return {\n      loaded: this.modelLoaded,\n      model: this.config.model,\n      quantization: this.config.quantization,\n      cacheSize: this.responseCache.size,\n      maxTokens: this.config.maxTokens\n    };\n  }\n\n  /**\n   * Clear the response cache\n   */\n  clearCache(): void {\n    this.responseCache.clear();\n  }\n\n  /**\n   * Get cache statistics\n   */\n  getCacheStats(): {\n    size: number;\n    maxSize: number;\n    utilizationPercent: number;\n  } {\n    return {\n      size: this.responseCache.size,\n      maxSize: 1000,\n      utilizationPercent: (this.responseCache.size / 1000) * 100\n    };\n  }\n\n  /**\n   * Unload the model to free memory\n   */\n  async unload(): Promise<void> {\n    this.modelLoaded = false;\n    this.responseCache.clear();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}