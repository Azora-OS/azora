{"version":3,"names":["cov_1sy4trmdkp","actualCoverage","EventEmitter","crypto","AzoraDIDManager","constructor","config","f","s","initializeComponents","getInstance","instance","b","Error","keyManager","KeyManager","keyManagement","didResolver","DIDResolver","resolver","credentialManager","CredentialManager","credentials","pivcManager","PIVCManager","securityManager","DIDSecurityManager","security","storage","DIDStorage","createDID","options","keyPair","generateKeyPair","did","generateDIDIdentifier","publicKey","method","didDocument","id","verificationMethod","type","controller","publicKeyJwk","authentication","assertionMethod","keyAgreement","service","serviceEndpoint","metadata","created","Date","toISOString","versionId","storeDIDDocument","storePrivateKey","privateKey","emit","error","console","resolveDID","cached","getDIDDocument","didResolutionMetadata","contentType","didDocumentMetadata","result","resolve","message","updateDID","updates","verifyOwnership","current","updated","String","Number","deactivateDID","deactivated","issueCredential","subject","claims","credential","issue","issuer","verifyCredential","verify","revokeCredential","credentialId","revoke","calculatePIVC","pivcCredential","calculate","updatePIVC","contribution","addContribution","getPIVCScore","score","getScore","verifyPIVC","verified","authenticate","challenge","createAuthenticationChallenge","createChallenge","signChallenge","getPrivateKey","signature","sign","generateShortId","input","hash","createHash","update","digest","substring","getConfig","updateConfig","newConfig","keys","Map","subtle","generateKey","name","namedCurve","exportKey","JSON","stringify","keyData","parse","cryptoKey","importKey","set","get","data","encoder","TextEncoder","dataBuffer","encode","Buffer","from","toString","signatureBuffer","cache","localCache","parseDIDMethod","resolveKeyDID","resolveWebDID","resolveAzoraDID","resolveUniversal","parts","split","universalResolver","response","fetch","json","randomUUID","issuanceDate","expirationDate","now","defaultExpiration","credentialSubject","proof","proofPurpose","jws","results","errors","log","scores","contributions","achievements","calculateScore","pivcScore","verifiedBy","calculatedAt","push","reduce","sum","c","impact","sessions","session","expiresAt","createdAt","sessionTimeout","authenticated","sessionToken","randomBytes","documents","document","deleteDIDDocument","delete"],"sources":["did-implementation.ts"],"sourcesContent":["/* \nAZORA PROPRIETARY LICENSE \nCopyright (c) 2025 Azora ES (Pty) Ltd. All Rights Reserved. \nSee LICENSE file for details. \n*/ \n/**\n * Azora Decentralized Identity (DID) Implementation\n * \n * Sovereign identity system based on W3C DID Core specification, providing\n * cryptographically verifiable, user-controlled identities for the entire\n * Azora ecosystem.\n * \n * Features:\n * - W3C DID Core compliant\n * - Multiple DID methods support (did:key, did:web, did:azora)\n * - Verifiable Credentials for PIVC scores\n * - Zero-knowledge proof capabilities\n * - Cross-platform identity portability\n * - Enterprise-grade key management\n */\n\nimport { EventEmitter } from 'events';\nimport * as crypto from 'crypto';\n\n// W3C DID Core Types\nexport interface DIDDocument {\n  '@context': string | string[];\n  id: string;\n  controller?: string | string[];\n  verificationMethod?: VerificationMethod[];\n  authentication?: (string | VerificationMethod)[];\n  assertionMethod?: (string | VerificationMethod)[];\n  keyAgreement?: (string | VerificationMethod)[];\n  capabilityInvocation?: (string | VerificationMethod)[];\n  capabilityDelegation?: (string | VerificationMethod)[];\n  service?: ServiceEndpoint[];\n  alsoKnownAs?: string[];\n  metadata?: DIDDocumentMetadata;\n}\n\nexport interface VerificationMethod {\n  id: string;\n  type: string;\n  controller: string;\n  publicKeyJwk?: JsonWebKey;\n  publicKeyMultibase?: string;\n  publicKeyBase58?: string;\n}\n\nexport interface ServiceEndpoint {\n  id: string;\n  type: string | string[];\n  serviceEndpoint: string | string[] | Record<string, any>;\n  description?: string;\n}\n\nexport interface DIDDocumentMetadata {\n  created?: string;\n  updated?: string;\n  deactivated?: boolean;\n  nextUpdate?: string;\n  versionId?: string;\n  nextVersionId?: string;\n  equivalentId?: string[];\n  canonicalId?: string;\n}\n\nexport interface DIDResolutionResult {\n  didDocument: DIDDocument | null;\n  didResolutionMetadata: DIDResolutionMetadata;\n  didDocumentMetadata: DIDDocumentMetadata;\n}\n\nexport interface DIDResolutionMetadata {\n  contentType?: string;\n  error?: string;\n  message?: string;\n}\n\n// Verifiable Credentials Types\nexport interface VerifiableCredential {\n  '@context': string | string[];\n  id: string;\n  type: string[];\n  issuer: string | Issuer;\n  issuanceDate: string;\n  expirationDate?: string;\n  credentialSubject: CredentialSubject;\n  credentialStatus?: CredentialStatus;\n  proof: Proof | Proof[];\n}\n\nexport interface Issuer {\n  id: string;\n  name?: string;\n  description?: string;\n}\n\nexport interface CredentialSubject {\n  id: string;\n  [key: string]: any;\n}\n\nexport interface CredentialStatus {\n  id: string;\n  type: string;\n}\n\nexport interface Proof {\n  type: string;\n  created: string;\n  verificationMethod: string;\n  proofPurpose: string;\n  proofValue?: string;\n  jws?: string;\n  challenge?: string;\n  domain?: string;\n}\n\n// PIVC (Proven Positive Impact) Credential Types\nexport interface PIVCCredential extends VerifiableCredential {\n  credentialSubject: PIVCSubject;\n}\n\nexport interface PIVCSubject extends CredentialSubject {\n  pivcScore: number;\n  contributions: Contribution[];\n  achievements: Achievement[];\n  verifiedBy: string[];\n  calculatedAt: string;\n}\n\nexport interface Contribution {\n  id: string;\n  type: 'code' | 'documentation' | 'review' | 'mentorship' | 'community';\n  impact: number;\n  timestamp: string;\n  verified: boolean;\n  repository?: string;\n  description?: string;\n}\n\nexport interface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  earnedAt: string;\n  level: 'bronze' | 'silver' | 'gold' | 'platinum';\n  criteria: string[];\n}\n\n// DID Configuration\nexport interface DIDConfig {\n  method: 'key' | 'web' | 'azora' | 'custom';\n  network?: 'mainnet' | 'testnet' | 'devnet';\n  resolver: DIDResolverConfig;\n  keyManagement: KeyManagementConfig;\n  credentials: CredentialConfig;\n  security: SecurityConfig;\n}\n\nexport interface DIDResolverConfig {\n  universalResolver?: string;\n  localCache: boolean;\n  cacheTimeout: number;\n  fallbackResolvers: string[];\n}\n\nexport interface KeyManagementConfig {\n  storage: 'secure-enclave' | 'keychain' | 'encrypted-file' | 'hardware';\n  encryption: 'aes-256-gcm' | 'chacha20-poly1305';\n  keyRotation: boolean;\n  rotationInterval: number;\n  backupEnabled: boolean;\n}\n\nexport interface CredentialConfig {\n  issuer: string;\n  defaultExpiration: number;\n  revocationEnabled: boolean;\n  statusListEnabled: boolean;\n  zkProofEnabled: boolean;\n}\n\nexport interface SecurityConfig {\n  requireBiometric: boolean;\n  requirePin: boolean;\n  sessionTimeout: number;\n  maxFailedAttempts: number;\n  auditLogging: boolean;\n}\n\n// Main DID Manager Class\nexport class AzoraDIDManager extends EventEmitter {\n  private static instance: AzoraDIDManager;\n  private config: DIDConfig;\n  private keyManager: KeyManager;\n  private didResolver: DIDResolver;\n  private credentialManager: CredentialManager;\n  private pivcManager: PIVCManager;\n  private securityManager: DIDSecurityManager;\n  private storage: DIDStorage;\n\n  private constructor(config: DIDConfig) {\n    super();\n    this.config = config;\n    this.initializeComponents();\n  }\n\n  public static getInstance(config?: DIDConfig): AzoraDIDManager {\n    if (!AzoraDIDManager.instance) {\n      if (!config) {\n        throw new Error('Configuration required for first initialization');\n      }\n      AzoraDIDManager.instance = new AzoraDIDManager(config);\n    }\n    return AzoraDIDManager.instance;\n  }\n\n  private initializeComponents(): void {\n    this.keyManager = new KeyManager(this.config.keyManagement);\n    this.didResolver = new DIDResolver(this.config.resolver);\n    this.credentialManager = new CredentialManager(this.config.credentials);\n    this.pivcManager = new PIVCManager(this.config.credentials);\n    this.securityManager = new DIDSecurityManager(this.config.security);\n    this.storage = new DIDStorage();\n  }\n\n  // DID Creation and Management\n  public async createDID(options?: CreateDIDOptions): Promise<DIDDocument> {\n    try {\n      // Generate key pair\n      const keyPair = await this.keyManager.generateKeyPair();\n      \n      // Create DID based on method\n      const did = this.generateDIDIdentifier(keyPair.publicKey, options?.method || this.config.method);\n      \n      // Create DID Document\n      const didDocument: DIDDocument = {\n        '@context': [\n          'https://www.w3.org/ns/did/v1',\n          'https://w3id.org/security/suites/jws-2020/v1',\n          'https://azora.os/contexts/did/v1'\n        ],\n        id: did,\n        verificationMethod: [\n          {\n            id: `${did}#key-1`,\n            type: 'JsonWebKey2020',\n            controller: did,\n            publicKeyJwk: keyPair.publicKeyJwk\n          }\n        ],\n        authentication: [`${did}#key-1`],\n        assertionMethod: [`${did}#key-1`],\n        keyAgreement: [`${did}#key-1`],\n        service: [\n          {\n            id: `${did}#azorahub`,\n            type: 'AzorahubProfile',\n            serviceEndpoint: `https://azorahub.io/users/${did}`\n          }\n        ],\n        metadata: {\n          created: new Date().toISOString(),\n          versionId: '1'\n        }\n      };\n\n      // Store DID Document\n      await this.storage.storeDIDDocument(did, didDocument);\n      \n      // Store private key securely\n      await this.keyManager.storePrivateKey(did, keyPair.privateKey);\n      \n      this.emit('did-created', { did, didDocument });\n      return didDocument;\n    } catch (error) {\n      console.error('Error creating DID:', error);\n      throw error;\n    }\n  }\n\n  public async resolveDID(did: string): Promise<DIDResolutionResult> {\n    try {\n      // Check local cache first\n      const cached = await this.storage.getDIDDocument(did);\n      if (cached) {\n        return {\n          didDocument: cached,\n          didResolutionMetadata: { contentType: 'application/did+ld+json' },\n          didDocumentMetadata: cached.metadata || {}\n        };\n      }\n\n      // Resolve using DID resolver\n      const result = await this.didResolver.resolve(did);\n      \n      // Cache the result\n      if (result.didDocument) {\n        await this.storage.storeDIDDocument(did, result.didDocument);\n      }\n      \n      this.emit('did-resolved', { did, result });\n      return result;\n    } catch (error) {\n      console.error('Error resolving DID:', error);\n      return {\n        didDocument: null,\n        didResolutionMetadata: {\n          error: 'notFound',\n          message: `DID ${did} not found`\n        },\n        didDocumentMetadata: {}\n      };\n    }\n  }\n\n  public async updateDID(did: string, updates: Partial<DIDDocument>): Promise<DIDDocument> {\n    try {\n      // Verify ownership\n      await this.securityManager.verifyOwnership(did);\n      \n      // Get current document\n      const current = await this.storage.getDIDDocument(did);\n      if (!current) {\n        throw new Error(`DID ${did} not found`);\n      }\n\n      // Apply updates\n      const updated: DIDDocument = {\n        ...current,\n        ...updates,\n        id: did, // Ensure ID doesn't change\n        metadata: {\n          ...current.metadata,\n          updated: new Date().toISOString(),\n          versionId: String(Number(current.metadata?.versionId || '1') + 1)\n        }\n      };\n\n      // Store updated document\n      await this.storage.storeDIDDocument(did, updated);\n      \n      this.emit('did-updated', { did, updated });\n      return updated;\n    } catch (error) {\n      console.error('Error updating DID:', error);\n      throw error;\n    }\n  }\n\n  public async deactivateDID(did: string): Promise<void> {\n    try {\n      // Verify ownership\n      await this.securityManager.verifyOwnership(did);\n      \n      // Get current document\n      const current = await this.storage.getDIDDocument(did);\n      if (!current) {\n        throw new Error(`DID ${did} not found`);\n      }\n\n      // Mark as deactivated\n      const deactivated: DIDDocument = {\n        ...current,\n        metadata: {\n          ...current.metadata,\n          deactivated: true,\n          updated: new Date().toISOString()\n        }\n      };\n\n      // Store deactivated document\n      await this.storage.storeDIDDocument(did, deactivated);\n      \n      this.emit('did-deactivated', { did });\n    } catch (error) {\n      console.error('Error deactivating DID:', error);\n      throw error;\n    }\n  }\n\n  // Verifiable Credentials\n  public async issueCredential(\n    subject: string,\n    claims: Record<string, any>,\n    type: string[]\n  ): Promise<VerifiableCredential> {\n    try {\n      const credential = await this.credentialManager.issue(\n        this.config.credentials.issuer,\n        subject,\n        claims,\n        type\n      );\n      \n      this.emit('credential-issued', { credential });\n      return credential;\n    } catch (error) {\n      console.error('Error issuing credential:', error);\n      throw error;\n    }\n  }\n\n  public async verifyCredential(credential: VerifiableCredential): Promise<VerificationResult> {\n    try {\n      const result = await this.credentialManager.verify(credential);\n      \n      this.emit('credential-verified', { credential, result });\n      return result;\n    } catch (error) {\n      console.error('Error verifying credential:', error);\n      throw error;\n    }\n  }\n\n  public async revokeCredential(credentialId: string): Promise<void> {\n    try {\n      await this.credentialManager.revoke(credentialId);\n      \n      this.emit('credential-revoked', { credentialId });\n    } catch (error) {\n      console.error('Error revoking credential:', error);\n      throw error;\n    }\n  }\n\n  // PIVC Management\n  public async calculatePIVC(did: string): Promise<PIVCCredential> {\n    try {\n      const pivcCredential = await this.pivcManager.calculate(did);\n      \n      this.emit('pivc-calculated', { did, pivcCredential });\n      return pivcCredential;\n    } catch (error) {\n      console.error('Error calculating PIVC:', error);\n      throw error;\n    }\n  }\n\n  public async updatePIVC(did: string, contribution: Contribution): Promise<PIVCCredential> {\n    try {\n      const updated = await this.pivcManager.addContribution(did, contribution);\n      \n      this.emit('pivc-updated', { did, contribution, updated });\n      return updated;\n    } catch (error) {\n      console.error('Error updating PIVC:', error);\n      throw error;\n    }\n  }\n\n  public async getPIVCScore(did: string): Promise<number> {\n    try {\n      const score = await this.pivcManager.getScore(did);\n      return score;\n    } catch (error) {\n      console.error('Error getting PIVC score:', error);\n      return 0;\n    }\n  }\n\n  public async verifyPIVC(credential: PIVCCredential): Promise<boolean> {\n    try {\n      const verified = await this.pivcManager.verify(credential);\n      return verified;\n    } catch (error) {\n      console.error('Error verifying PIVC:', error);\n      return false;\n    }\n  }\n\n  // Authentication\n  public async authenticate(did: string, challenge: string): Promise<AuthenticationResult> {\n    try {\n      const result = await this.securityManager.authenticate(did, challenge);\n      \n      this.emit('authentication', { did, result });\n      return result;\n    } catch (error) {\n      console.error('Error authenticating:', error);\n      throw error;\n    }\n  }\n\n  public async createAuthenticationChallenge(): Promise<string> {\n    return this.securityManager.createChallenge();\n  }\n\n  public async signChallenge(did: string, challenge: string): Promise<string> {\n    try {\n      const privateKey = await this.keyManager.getPrivateKey(did);\n      const signature = await this.keyManager.sign(privateKey, challenge);\n      return signature;\n    } catch (error) {\n      console.error('Error signing challenge:', error);\n      throw error;\n    }\n  }\n\n  // Utility Methods\n  private generateDIDIdentifier(publicKey: string, method: string): string {\n    switch (method) {\n      case 'key':\n        return `did:key:${publicKey}`;\n      case 'web':\n        return `did:web:azorahub.io:users:${this.generateShortId(publicKey)}`;\n      case 'azora':\n        return `did:azora:${this.generateShortId(publicKey)}`;\n      default:\n        return `did:${method}:${publicKey}`;\n    }\n  }\n\n  private generateShortId(input: string): string {\n    const hash = crypto.createHash('sha256').update(input).digest('hex');\n    return hash.substring(0, 16);\n  }\n\n  public getConfig(): DIDConfig {\n    return { ...this.config };\n  }\n\n  public updateConfig(newConfig: Partial<DIDConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n}\n\n// Key Manager\nclass KeyManager {\n  private config: KeyManagementConfig;\n  private keys: Map<string, CryptoKeyPair> = new Map();\n\n  constructor(config: KeyManagementConfig) {\n    this.config = config;\n  }\n\n  public async generateKeyPair(): Promise<KeyPairResult> {\n    const keyPair = await crypto.subtle.generateKey(\n      {\n        name: 'ECDSA',\n        namedCurve: 'P-256'\n      },\n      true,\n      ['sign', 'verify']\n    );\n\n    const publicKeyJwk = await crypto.subtle.exportKey('jwk', keyPair.publicKey);\n    const publicKey = JSON.stringify(publicKeyJwk);\n    const privateKey = await crypto.subtle.exportKey('jwk', keyPair.privateKey);\n\n    return {\n      publicKey,\n      privateKey: JSON.stringify(privateKey),\n      publicKeyJwk\n    };\n  }\n\n  public async storePrivateKey(did: string, privateKey: string): Promise<void> {\n    // In production, this would use secure storage (Keychain, Secure Enclave, etc.)\n    const keyData = JSON.parse(privateKey);\n    const cryptoKey = await crypto.subtle.importKey(\n      'jwk',\n      keyData,\n      { name: 'ECDSA', namedCurve: 'P-256' },\n      true,\n      ['sign']\n    );\n    \n    this.keys.set(did, { privateKey: cryptoKey, publicKey: cryptoKey as any });\n  }\n\n  public async getPrivateKey(did: string): Promise<CryptoKey> {\n    const keyPair = this.keys.get(did);\n    if (!keyPair) {\n      throw new Error(`Private key not found for DID: ${did}`);\n    }\n    return keyPair.privateKey;\n  }\n\n  public async sign(privateKey: CryptoKey, data: string): Promise<string> {\n    const encoder = new TextEncoder();\n    const dataBuffer = encoder.encode(data);\n    \n    const signature = await crypto.subtle.sign(\n      { name: 'ECDSA', hash: 'SHA-256' },\n      privateKey,\n      dataBuffer\n    );\n    \n    return Buffer.from(signature).toString('base64');\n  }\n\n  public async verify(publicKey: CryptoKey, data: string, signature: string): Promise<boolean> {\n    const encoder = new TextEncoder();\n    const dataBuffer = encoder.encode(data);\n    const signatureBuffer = Buffer.from(signature, 'base64');\n    \n    return await crypto.subtle.verify(\n      { name: 'ECDSA', hash: 'SHA-256' },\n      publicKey,\n      signatureBuffer,\n      dataBuffer\n    );\n  }\n}\n\n// DID Resolver\nclass DIDResolver {\n  private config: DIDResolverConfig;\n  private cache: Map<string, DIDResolutionResult> = new Map();\n\n  constructor(config: DIDResolverConfig) {\n    this.config = config;\n  }\n\n  public async resolve(did: string): Promise<DIDResolutionResult> {\n    // Check cache\n    if (this.config.localCache) {\n      const cached = this.cache.get(did);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    // Parse DID method\n    const method = this.parseDIDMethod(did);\n    \n    // Resolve based on method\n    let result: DIDResolutionResult;\n    switch (method) {\n      case 'key':\n        result = await this.resolveKeyDID(did);\n        break;\n      case 'web':\n        result = await this.resolveWebDID(did);\n        break;\n      case 'azora':\n        result = await this.resolveAzoraDID(did);\n        break;\n      default:\n        result = await this.resolveUniversal(did);\n    }\n\n    // Cache result\n    if (this.config.localCache && result.didDocument) {\n      this.cache.set(did, result);\n    }\n\n    return result;\n  }\n\n  private parseDIDMethod(did: string): string {\n    const parts = did.split(':');\n    return parts[1] || 'unknown';\n  }\n\n  private async resolveKeyDID(did: string): Promise<DIDResolutionResult> {\n    // did:key resolution logic\n    return {\n      didDocument: null,\n      didResolutionMetadata: { error: 'notImplemented' },\n      didDocumentMetadata: {}\n    };\n  }\n\n  private async resolveWebDID(did: string): Promise<DIDResolutionResult> {\n    // did:web resolution logic\n    return {\n      didDocument: null,\n      didResolutionMetadata: { error: 'notImplemented' },\n      didDocumentMetadata: {}\n    };\n  }\n\n  private async resolveAzoraDID(did: string): Promise<DIDResolutionResult> {\n    // did:azora resolution logic\n    return {\n      didDocument: null,\n      didResolutionMetadata: { error: 'notImplemented' },\n      didDocumentMetadata: {}\n    };\n  }\n\n  private async resolveUniversal(did: string): Promise<DIDResolutionResult> {\n    // Universal resolver fallback\n    if (this.config.universalResolver) {\n      try {\n        const response = await fetch(`${this.config.universalResolver}/${did}`);\n        const result = await response.json();\n        return result;\n      } catch (error) {\n        return {\n          didDocument: null,\n          didResolutionMetadata: { error: 'notFound' },\n          didDocumentMetadata: {}\n        };\n      }\n    }\n    \n    return {\n      didDocument: null,\n      didResolutionMetadata: { error: 'methodNotSupported' },\n      didDocumentMetadata: {}\n    };\n  }\n}\n\n// Credential Manager\nclass CredentialManager {\n  private config: CredentialConfig;\n\n  constructor(config: CredentialConfig) {\n    this.config = config;\n  }\n\n  public async issue(\n    issuer: string,\n    subject: string,\n    claims: Record<string, any>,\n    type: string[]\n  ): Promise<VerifiableCredential> {\n    const credential: VerifiableCredential = {\n      '@context': [\n        'https://www.w3.org/2018/credentials/v1',\n        'https://azora.os/contexts/credentials/v1'\n      ],\n      id: `urn:uuid:${crypto.randomUUID()}`,\n      type: ['VerifiableCredential', ...type],\n      issuer,\n      issuanceDate: new Date().toISOString(),\n      expirationDate: new Date(Date.now() + this.config.defaultExpiration).toISOString(),\n      credentialSubject: {\n        id: subject,\n        ...claims\n      },\n      proof: {\n        type: 'JsonWebSignature2020',\n        created: new Date().toISOString(),\n        verificationMethod: `${issuer}#key-1`,\n        proofPurpose: 'assertionMethod',\n        jws: 'placeholder-signature'\n      }\n    };\n\n    return credential;\n  }\n\n  public async verify(credential: VerifiableCredential): Promise<VerificationResult> {\n    // Verification logic\n    return {\n      verified: true,\n      results: [],\n      errors: []\n    };\n  }\n\n  public async revoke(credentialId: string): Promise<void> {\n    // Revocation logic\n    console.log(`Credential ${credentialId} revoked`);\n  }\n}\n\n// PIVC Manager\nclass PIVCManager {\n  private config: CredentialConfig;\n  private scores: Map<string, PIVCCredential> = new Map();\n\n  constructor(config: CredentialConfig) {\n    this.config = config;\n  }\n\n  public async calculate(did: string): Promise<PIVCCredential> {\n    // Calculate PIVC score based on contributions\n    const contributions: Contribution[] = [];\n    const achievements: Achievement[] = [];\n    \n    const score = this.calculateScore(contributions);\n    \n    const pivcCredential: PIVCCredential = {\n      '@context': [\n        'https://www.w3.org/2018/credentials/v1',\n        'https://azora.os/contexts/pivc/v1'\n      ],\n      id: `urn:uuid:${crypto.randomUUID()}`,\n      type: ['VerifiableCredential', 'PIVCCredential'],\n      issuer: this.config.issuer,\n      issuanceDate: new Date().toISOString(),\n      credentialSubject: {\n        id: did,\n        pivcScore: score,\n        contributions,\n        achievements,\n        verifiedBy: [this.config.issuer],\n        calculatedAt: new Date().toISOString()\n      },\n      proof: {\n        type: 'JsonWebSignature2020',\n        created: new Date().toISOString(),\n        verificationMethod: `${this.config.issuer}#key-1`,\n        proofPurpose: 'assertionMethod',\n        jws: 'placeholder-signature'\n      }\n    };\n\n    this.scores.set(did, pivcCredential);\n    return pivcCredential;\n  }\n\n  public async addContribution(did: string, contribution: Contribution): Promise<PIVCCredential> {\n    const current = this.scores.get(did);\n    if (!current) {\n      return await this.calculate(did);\n    }\n\n    current.credentialSubject.contributions.push(contribution);\n    current.credentialSubject.pivcScore = this.calculateScore(\n      current.credentialSubject.contributions\n    );\n    current.credentialSubject.calculatedAt = new Date().toISOString();\n\n    this.scores.set(did, current);\n    return current;\n  }\n\n  public async getScore(did: string): Promise<number> {\n    const credential = this.scores.get(did);\n    return credential?.credentialSubject.pivcScore || 0;\n  }\n\n  public async verify(credential: PIVCCredential): Promise<boolean> {\n    // Verify PIVC credential\n    return true;\n  }\n\n  private calculateScore(contributions: Contribution[]): number {\n    return contributions.reduce((sum, c) => sum + c.impact, 0);\n  }\n}\n\n// Security Manager\nclass DIDSecurityManager {\n  private config: SecurityConfig;\n  private sessions: Map<string, SecuritySession> = new Map();\n\n  constructor(config: SecurityConfig) {\n    this.config = config;\n  }\n\n  public async verifyOwnership(did: string): Promise<boolean> {\n    // Verify that the current user owns the DID\n    const session = this.sessions.get(did);\n    if (!session || session.expiresAt < Date.now()) {\n      throw new Error('Unauthorized: No valid session');\n    }\n    return true;\n  }\n\n  public async authenticate(did: string, challenge: string): Promise<AuthenticationResult> {\n    // Authentication logic\n    const session: SecuritySession = {\n      did,\n      createdAt: Date.now(),\n      expiresAt: Date.now() + this.config.sessionTimeout\n    };\n    \n    this.sessions.set(did, session);\n    \n    return {\n      authenticated: true,\n      sessionToken: crypto.randomUUID(),\n      expiresAt: session.expiresAt\n    };\n  }\n\n  public createChallenge(): string {\n    return crypto.randomBytes(32).toString('hex');\n  }\n}\n\n// Storage\nclass DIDStorage {\n  private documents: Map<string, DIDDocument> = new Map();\n\n  public async storeDIDDocument(did: string, document: DIDDocument): Promise<void> {\n    this.documents.set(did, document);\n  }\n\n  public async getDIDDocument(did: string): Promise<DIDDocument | null> {\n    return this.documents.get(did) || null;\n  }\n\n  public async deleteDIDDocument(did: string): Promise<void> {\n    this.documents.delete(did);\n  }\n}\n\n// Supporting Types\nexport interface CreateDIDOptions {\n  method?: 'key' | 'web' | 'azora' | 'custom';\n  controller?: string;\n  services?: ServiceEndpoint[];\n}\n\nexport interface KeyPairResult {\n  publicKey: string;\n  privateKey: string;\n  publicKeyJwk: JsonWebKey;\n}\n\nexport interface VerificationResult {\n  verified: boolean;\n  results: VerificationCheck[];\n  errors: string[];\n}\n\nexport interface VerificationCheck {\n  check: string;\n  status: 'passed' | 'failed';\n  message?: string;\n}\n\nexport interface AuthenticationResult {\n  authenticated: boolean;\n  sessionToken: string;\n  expiresAt: number;\n}\n\nexport interface SecuritySession {\n  did: string;\n  createdAt: number;\n  expiresAt: number;\n}\n\n// Export the main class\nexport default AzoraDIDManager;\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}