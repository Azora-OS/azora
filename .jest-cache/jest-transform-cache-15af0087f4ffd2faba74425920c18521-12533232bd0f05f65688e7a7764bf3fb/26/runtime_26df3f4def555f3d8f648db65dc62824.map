{"version":3,"names":["cov_1kc9mo5sfv","actualCoverage","s","executor_1","require","sandboxExecutor_1","index_1","persistence_1","nanoid_1","logger_1","index_2","AgentRuntime","executor","active","Map","bus","EventBus","circuit","constructor","f","process","env","SANDBOX_ENABLED","b","SandboxExecutor","SimpleExecutor","CircuitBreaker","executeTask","payload","id","nanoid","task","status","createdAt","Date","now","updatedAt","agentId","saveTask","logger","info","taskId","promise","updateTask","publish","result","execute","toISOString","success","err","error","message","stack","set","finally","delete","getActiveExecutions","Array","from","keys","getAgentStatus","tasks","push","state","length","activeTasks","cancelTask","pauseTask","resumeTask","t","getTask","Error","exports"],"sources":["runtime.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}