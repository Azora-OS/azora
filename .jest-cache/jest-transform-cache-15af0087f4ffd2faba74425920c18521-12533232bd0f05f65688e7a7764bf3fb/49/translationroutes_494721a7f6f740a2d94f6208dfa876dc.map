{"version":3,"names":["cov_1y1cphzn2k","actualCoverage","Router","translationService","logger","router","s","get","req","res","f","id","params","language","query","b","status","json","success","error","translation","translateCourse","data","Error","message","post","languages","body","Array","isArray","supportedLanguages","getSupportedLanguages","invalidLanguages","filter","lang","includes","length","join","translations","Promise","all","map","courseId","count","uiStrings","getLocalizedUI","localizedAssessment","localizeAssessment"],"sources":["translation.routes.ts"],"sourcesContent":["import { Router, Request, Response } from 'express';\nimport { translationService } from '../services/translation.service';\nimport { logger } from '../utils/logger';\n\nconst router = Router();\n\n/**\n * GET /courses/:id/translate\n * Get available translations for a course\n * Requirements: 6.1, 6.2\n */\nrouter.get('/courses/:id/translate', async (req: Request, res: Response) => {\n  try {\n    const { id } = req.params;\n    const { language } = req.query;\n\n    if (!language || typeof language !== 'string') {\n      return res.status(400).json({\n        success: false,\n        error: 'language query parameter is required',\n      });\n    }\n\n    const translation = await translationService.translateCourse(id, language);\n\n    res.json({\n      success: true,\n      data: translation,\n    });\n  } catch (error) {\n    logger.error('Error translating course', { error });\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to translate course',\n    });\n  }\n});\n\n/**\n * POST /courses/:id/languages\n * Add language support to a course\n * Requirements: 6.1, 6.2\n */\nrouter.post('/courses/:id/languages', async (req: Request, res: Response) => {\n  try {\n    const { id } = req.params;\n    const { languages } = req.body;\n\n    if (!languages || !Array.isArray(languages)) {\n      return res.status(400).json({\n        success: false,\n        error: 'languages array is required',\n      });\n    }\n\n    const supportedLanguages = translationService.getSupportedLanguages();\n    const invalidLanguages = languages.filter((lang) => !supportedLanguages.includes(lang));\n\n    if (invalidLanguages.length > 0) {\n      return res.status(400).json({\n        success: false,\n        error: `Unsupported languages: ${invalidLanguages.join(', ')}`,\n        supportedLanguages,\n      });\n    }\n\n    // Translate course to each language\n    const translations = await Promise.all(\n      languages.map((lang) => translationService.translateCourse(id, lang))\n    );\n\n    res.status(201).json({\n      success: true,\n      data: {\n        courseId: id,\n        languages: translations,\n        count: translations.length,\n      },\n    });\n  } catch (error) {\n    logger.error('Error adding language support', { error });\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to add language support',\n    });\n  }\n});\n\n/**\n * GET /languages\n * Get list of supported languages\n * Requirements: 6.1, 6.2\n */\nrouter.get('/languages', async (req: Request, res: Response) => {\n  try {\n    const languages = translationService.getSupportedLanguages();\n\n    res.json({\n      success: true,\n      data: languages,\n      count: languages.length,\n    });\n  } catch (error) {\n    logger.error('Error fetching supported languages', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to fetch supported languages',\n    });\n  }\n});\n\n/**\n * GET /ui/:language\n * Get localized UI strings for a language\n * Requirements: 6.1, 6.2\n */\nrouter.get('/ui/:language', async (req: Request, res: Response) => {\n  try {\n    const { language } = req.params;\n\n    const uiStrings = await translationService.getLocalizedUI(language);\n\n    res.json({\n      success: true,\n      data: uiStrings,\n      language,\n    });\n  } catch (error) {\n    logger.error('Error fetching localized UI', { error });\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to fetch localized UI',\n    });\n  }\n});\n\n/**\n * GET /assessments/:id/localize/:language\n * Get localized assessment for a language\n * Requirements: 6.1, 6.2\n */\nrouter.get('/assessments/:id/localize/:language', async (req: Request, res: Response) => {\n  try {\n    const { id, language } = req.params;\n\n    const localizedAssessment = await translationService.localizeAssessment(id, language);\n\n    res.json({\n      success: true,\n      data: localizedAssessment,\n      language,\n    });\n  } catch (error) {\n    logger.error('Error localizing assessment', { error });\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to localize assessment',\n    });\n  }\n});\n\nexport default router;\n"],"mappings":"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","ignoreList":[]}