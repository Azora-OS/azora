{"version":3,"names":["cov_sf9bx0en6","actualCoverage","SkillVerificationService","RatingService","ProfileService","createProfile","data","f","profile","s","id","Date","now","Math","random","toString","substr","timezone","skills","portfolio","packages","availability","status","hoursPerWeek","responseTime","stats","totalProjects","completedProjects","ongoingProjects","totalEarnings","repeatClients","averageDeliveryTime","badges","achievements","ratingSummary","createdAt","updatedAt","lastActiveAt","getVerifiedSkills","userId","getSellerRatingSummary","emitEvent","getProfile","updateProfile","updates","addPortfolioItem","item","portfolioItem","addServicePackage","packageData","servicePackage","package","updateAvailability","updateProfileStats","projectData","awardBadge","badgeName","badge","unlockAchievement","achievement","newAchievement","unlockedAt","searchProfiles","filters","profiles","total","getTopRatedProfiles","limit","b","updateLastActive","event","console","log"],"sources":["profileService.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport { SkillVerificationService, SkillBadge } from '../verification/skillVerificationService';\nimport { RatingService, SellerRatingSummary } from '../ratings/ratingService';\n\nexport interface ServiceProviderProfile {\n  id: string;\n  userId: string;\n  displayName: string;\n  bio: string;\n  avatar?: string;\n  coverImage?: string;\n  location: string;\n  languages: string[];\n  timezone: string;\n  \n  // Skills & Verification\n  skills: SkillBadge[];\n  expertise: string[];\n  yearsOfExperience: number;\n  \n  // Ratings & Reviews\n  ratingSummary: SellerRatingSummary;\n  \n  // Portfolio\n  portfolio: PortfolioItem[];\n  \n  // Service Packages\n  packages: ServicePackage[];\n  \n  // Availability\n  availability: {\n    status: 'available' | 'busy' | 'unavailable';\n    hoursPerWeek: number;\n    responseTime: string; // e.g., \"within 2 hours\"\n  };\n  \n  // Statistics\n  stats: {\n    totalProjects: number;\n    completedProjects: number;\n    ongoingProjects: number;\n    totalEarnings: number;\n    repeatClients: number;\n    averageDeliveryTime: number; // in days\n  };\n  \n  // Badges & Achievements\n  badges: string[];\n  achievements: Achievement[];\n  \n  // Social & Links\n  socialLinks?: {\n    linkedin?: string;\n    twitter?: string;\n    github?: string;\n    portfolio?: string;\n  };\n  \n  createdAt: Date;\n  updatedAt: Date;\n  lastActiveAt: Date;\n}\n\nexport interface PortfolioItem {\n  id: string;\n  title: string;\n  description: string;\n  images: string[];\n  videoUrl?: string;\n  tags: string[];\n  category: string;\n  projectDate: Date;\n  clientName?: string;\n  testimonial?: string;\n}\n\nexport interface ServicePackage {\n  id: string;\n  name: 'Basic' | 'Standard' | 'Premium' | 'Custom';\n  description: string;\n  price: number;\n  currency: string;\n  deliveryTime: number; // in days\n  revisions: number;\n  features: string[];\n  active: boolean;\n}\n\nexport interface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  unlockedAt: Date;\n}\n\n/**\n * ðŸ‘¤ SERVICE PROVIDER PROFILE SERVICE\n * \n * Comprehensive profiles for sellers showcasing their skills,\n * portfolio, and reputation.\n */\nexport class ProfileService {\n  \n  /**\n   * Create a new service provider profile\n   */\n  static async createProfile(data: {\n    userId: string;\n    displayName: string;\n    bio: string;\n    location: string;\n    languages: string[];\n    expertise: string[];\n    yearsOfExperience: number;\n  }): Promise<ServiceProviderProfile> {\n    const profile: ServiceProviderProfile = {\n      id: `profile_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...data,\n      timezone: 'Africa/Johannesburg',\n      skills: [],\n      portfolio: [],\n      packages: [],\n      availability: {\n        status: 'available',\n        hoursPerWeek: 40,\n        responseTime: 'within 24 hours'\n      },\n      stats: {\n        totalProjects: 0,\n        completedProjects: 0,\n        ongoingProjects: 0,\n        totalEarnings: 0,\n        repeatClients: 0,\n        averageDeliveryTime: 0\n      },\n      badges: [],\n      achievements: [],\n      ratingSummary: {} as SellerRatingSummary,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      lastActiveAt: new Date()\n    };\n\n    // Load verified skills from Education\n    profile.skills = await SkillVerificationService.getVerifiedSkills(data.userId);\n\n    // Load rating summary\n    profile.ratingSummary = await RatingService.getSellerRatingSummary(data.userId);\n\n    // TODO: Save to database\n    // await prisma.serviceProviderProfile.create({ data: profile });\n\n    this.emitEvent('profile:created', profile);\n\n    return profile;\n  }\n\n  /**\n   * Get profile by user ID\n   */\n  static async getProfile(userId: string): Promise<ServiceProviderProfile | null> {\n    // TODO: Fetch from database\n    // return await prisma.serviceProviderProfile.findUnique({\n    //   where: { userId },\n    //   include: { portfolio: true, packages: true, skills: true }\n    // });\n    return null;\n  }\n\n  /**\n   * Update profile\n   */\n  static async updateProfile(\n    userId: string,\n    updates: Partial<ServiceProviderProfile>\n  ): Promise<ServiceProviderProfile> {\n    // TODO: Update in database\n    // await prisma.serviceProviderProfile.update({\n    //   where: { userId },\n    //   data: { ...updates, updatedAt: new Date() }\n    // });\n\n    this.emitEvent('profile:updated', { userId, updates });\n\n    return {} as ServiceProviderProfile;\n  }\n\n  /**\n   * Add portfolio item\n   */\n  static async addPortfolioItem(\n    userId: string,\n    item: Omit<PortfolioItem, 'id'>\n  ): Promise<PortfolioItem> {\n    const portfolioItem: PortfolioItem = {\n      ...item,\n      id: `portfolio_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n    };\n\n    // TODO: Save to database\n    // await prisma.portfolioItem.create({\n    //   data: { ...portfolioItem, userId }\n    // });\n\n    this.emitEvent('profile:portfolio_added', { userId, item: portfolioItem });\n\n    return portfolioItem;\n  }\n\n  /**\n   * Add service package\n   */\n  static async addServicePackage(\n    userId: string,\n    packageData: Omit<ServicePackage, 'id'>\n  ): Promise<ServicePackage> {\n    const servicePackage: ServicePackage = {\n      ...packageData,\n      id: `package_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n    };\n\n    // TODO: Save to database\n    // await prisma.servicePackage.create({\n    //   data: { ...servicePackage, userId }\n    // });\n\n    this.emitEvent('profile:package_added', { userId, package: servicePackage });\n\n    return servicePackage;\n  }\n\n  /**\n   * Update availability status\n   */\n  static async updateAvailability(\n    userId: string,\n    availability: ServiceProviderProfile['availability']\n  ): Promise<void> {\n    // TODO: Update in database\n    // await prisma.serviceProviderProfile.update({\n    //   where: { userId },\n    //   data: { availability }\n    // });\n\n    this.emitEvent('profile:availability_updated', { userId, availability });\n  }\n\n  /**\n   * Update profile statistics after project completion\n   */\n  static async updateProfileStats(\n    userId: string,\n    projectData: {\n      completed: boolean;\n      earnings: number;\n      deliveryTime: number;\n      isRepeatClient: boolean;\n    }\n  ): Promise<void> {\n    // TODO: Update in database\n    // const profile = await this.getProfile(userId);\n    // const updatedStats = {\n    //   totalProjects: profile.stats.totalProjects + 1,\n    //   completedProjects: projectData.completed ? profile.stats.completedProjects + 1 : profile.stats.completedProjects,\n    //   totalEarnings: profile.stats.totalEarnings + projectData.earnings,\n    //   repeatClients: projectData.isRepeatClient ? profile.stats.repeatClients + 1 : profile.stats.repeatClients,\n    //   // Calculate new average delivery time\n    //   averageDeliveryTime: ((profile.stats.averageDeliveryTime * profile.stats.totalProjects) + projectData.deliveryTime) / (profile.stats.totalProjects + 1)\n    // };\n\n    // await prisma.serviceProviderProfile.update({\n    //   where: { userId },\n    //   data: { stats: updatedStats }\n    // });\n\n    this.emitEvent('profile:stats_updated', { userId });\n  }\n\n  /**\n   * Award badge\n   */\n  static async awardBadge(userId: string, badgeName: string): Promise<void> {\n    // TODO: Add badge to profile\n    // await prisma.serviceProviderProfile.update({\n    //   where: { userId },\n    //   data: { badges: { push: badgeName } }\n    // });\n\n    this.emitEvent('profile:badge_awarded', { userId, badge: badgeName });\n  }\n\n  /**\n   * Unlock achievement\n   */\n  static async unlockAchievement(\n    userId: string,\n    achievement: Omit<Achievement, 'id' | 'unlockedAt'>\n  ): Promise<Achievement> {\n    const newAchievement: Achievement = {\n      ...achievement,\n      id: `achievement_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      unlockedAt: new Date()\n    };\n\n    // TODO: Save to database\n    // await prisma.achievement.create({\n    //   data: { ...newAchievement, userId }\n    // });\n\n    this.emitEvent('profile:achievement_unlocked', { userId, achievement: newAchievement });\n\n    return newAchievement;\n  }\n\n  /**\n   * Search profiles by skills, location, rating\n   */\n  static async searchProfiles(filters: {\n    skills?: string[];\n    location?: string;\n    minRating?: number;\n    availability?: 'available' | 'busy' | 'unavailable';\n    maxPrice?: number;\n    page?: number;\n    limit?: number;\n  }): Promise<{ profiles: ServiceProviderProfile[]; total: number }> {\n    // TODO: Search in database with filters\n    // const query: any = {};\n    \n    // if (filters.skills) query.skills = { some: { skillName: { in: filters.skills } } };\n    // if (filters.location) query.location = { contains: filters.location };\n    // if (filters.minRating) query.ratingSummary = { averageRatings: { overall: { gte: filters.minRating } } };\n    // if (filters.availability) query.availability = { status: filters.availability };\n\n    // const profiles = await prisma.serviceProviderProfile.findMany({\n    //   where: query,\n    //   skip: ((filters.page || 1) - 1) * (filters.limit || 20),\n    //   take: filters.limit || 20\n    // });\n\n    return { profiles: [], total: 0 };\n  }\n\n  /**\n   * Get top-rated profiles\n   */\n  static async getTopRatedProfiles(limit: number = 10): Promise<ServiceProviderProfile[]> {\n    // TODO: Fetch from database\n    // return await prisma.serviceProviderProfile.findMany({\n    //   where: { ratingSummary: { averageRatings: { overall: { gte: 4.5 } } } },\n    //   orderBy: { ratingSummary: { averageRatings: { overall: 'desc' } } },\n    //   take: limit\n    // });\n    return [];\n  }\n\n  /**\n   * Update last active time\n   */\n  static async updateLastActive(userId: string): Promise<void> {\n    // TODO: Update in database\n    // await prisma.serviceProviderProfile.update({\n    //   where: { userId },\n    //   data: { lastActiveAt: new Date() }\n    // });\n  }\n\n  private static emitEvent(event: string, data: any) {\n    console.log(`ðŸ”” Profile Event: ${event}`, data);\n    // Emit to organism event bus\n    // OrganismEventBus.emit(event, data);\n  }\n}\n"],"mappings":"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","ignoreList":[]}