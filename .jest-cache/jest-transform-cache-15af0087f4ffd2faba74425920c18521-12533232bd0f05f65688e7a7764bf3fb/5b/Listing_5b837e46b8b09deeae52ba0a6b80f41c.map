{"version":3,"names":["cov_1rei79as1t","actualCoverage","mongoose","Schema","ListingSchema","s","sellerId","type","String","required","index","title","maxlength","description","category","price","Number","min","images","tags","status","enum","default","expiresAt","Date","deliveryMethod","requirements","estimatedDelivery","timestamps","createdAt","Listing","model","CategorySchema","name","unique","icon","parentCategory","Types","ObjectId","ref","subcategories","isActive","Boolean","Category","TransactionSchema","listingId","buyerId","amount","transactionHash","completedAt","notes","Transaction"],"sources":["Listing.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport mongoose, { Document, Schema } from 'mongoose';\n\nexport interface IListing extends Document {\n  _id: mongoose.Types.ObjectId;\n  sellerId: string;\n  title: string;\n  description: string;\n  category: string;\n  price: number; // in AZR\n  images?: string[];\n  tags?: string[];\n  status: 'active' | 'sold' | 'inactive';\n  createdAt: Date;\n  updatedAt: Date;\n  expiresAt?: Date;\n  deliveryMethod: 'digital' | 'service';\n  requirements?: string; // What buyer needs to provide\n  estimatedDelivery?: string;\n}\n\nconst ListingSchema = new Schema<IListing>({\n  sellerId: { type: String, required: true, index: true },\n  title: { type: String, required: true, maxlength: 100 },\n  description: { type: String, required: true, maxlength: 1000 },\n  category: { type: String, required: true },\n  price: { type: Number, required: true, min: 0.01 },\n  images: [{ type: String }],\n  tags: [{ type: String }],\n  status: { type: String, enum: ['active', 'sold', 'inactive'], default: 'active' },\n  expiresAt: { type: Date },\n  deliveryMethod: { type: String, enum: ['digital', 'service'], required: true },\n  requirements: { type: String, maxlength: 500 },\n  estimatedDelivery: { type: String, maxlength: 100 },\n}, {\n  timestamps: true,\n});\n\n// Indexes\nListingSchema.index({ category: 1, status: 1 });\nListingSchema.index({ title: 'text', description: 'text' });\nListingSchema.index({ tags: 1 });\nListingSchema.index({ createdAt: -1 });\n\nexport const Listing = mongoose.model<IListing>('Listing', ListingSchema);\n\n// Category model\nexport interface ICategory extends Document {\n  _id: mongoose.Types.ObjectId;\n  name: string;\n  description: string;\n  icon?: string;\n  parentCategory?: mongoose.Types.ObjectId;\n  subcategories: mongoose.Types.ObjectId[];\n  isActive: boolean;\n}\n\nconst CategorySchema = new Schema<ICategory>({\n  name: { type: String, required: true, unique: true },\n  description: { type: String, required: true },\n  icon: { type: String },\n  parentCategory: { type: Schema.Types.ObjectId, ref: 'Category' },\n  subcategories: [{ type: Schema.Types.ObjectId, ref: 'Category' }],\n  isActive: { type: Boolean, default: true },\n});\n\nexport const Category = mongoose.model<ICategory>('Category', CategorySchema);\n\n// Transaction model for tracking marketplace activity\nexport interface ITransaction extends Document {\n  _id: mongoose.Types.ObjectId;\n  listingId: mongoose.Types.ObjectId;\n  buyerId: string;\n  sellerId: string;\n  amount: number; // in AZR\n  status: 'pending' | 'completed' | 'disputed' | 'cancelled';\n  transactionHash?: string; // blockchain transaction hash\n  completedAt?: Date;\n  notes?: string;\n}\n\nconst TransactionSchema = new Schema<ITransaction>({\n  listingId: { type: Schema.Types.ObjectId, ref: 'Listing', required: true },\n  buyerId: { type: String, required: true },\n  sellerId: { type: String, required: true },\n  amount: { type: Number, required: true },\n  status: { type: String, enum: ['pending', 'completed', 'disputed', 'cancelled'], default: 'pending' },\n  transactionHash: { type: String },\n  completedAt: { type: Date },\n  notes: { type: String },\n}, {\n  timestamps: true,\n});\n\nexport const Transaction = mongoose.model<ITransaction>('Transaction', TransactionSchema);"],"mappings":"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","ignoreList":[]}