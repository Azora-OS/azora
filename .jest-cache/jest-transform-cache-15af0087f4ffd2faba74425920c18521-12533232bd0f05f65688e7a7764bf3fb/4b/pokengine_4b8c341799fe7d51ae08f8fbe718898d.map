{"version":3,"names":["cov_10pbnmzfe1","actualCoverage","crypto","ProofOfKnowledgeEngine","constructor","f","s","activityTypes","COURSE_COMPLETION","weight","baseReward","LESSON_COMPLETION","QUIZ_PASSED","ASSIGNMENT_SUBMITTED","PEER_TEACHING","DISCUSSION_CONTRIBUTION","PROJECT_COMPLETION","CERTIFICATION_EARNED","validateProof","activity","b","type","valid","reason","activityConfig","userId","timestamp","score","proof","activityType","metadata","verified","calculateReward","config","reward","difficulty","difficultyMultiplier","beginner","intermediate","advanced","expert","scoreBonus","Math","max","timeSpent","engagementBonus","min","round","generateProofHash","data","JSON","stringify","user","time","meta","createHash","update","digest"],"sources":["pok-engine.ts"],"sourcesContent":["import * as crypto from 'crypto';\n\ninterface Activity {\n    type: string;\n    userId: string;\n    timestamp: number;\n    score?: number;\n    metadata?: {\n        difficulty?: 'beginner' | 'intermediate' | 'advanced' | 'expert';\n        score?: number;\n        timeSpent?: number;\n    };\n}\n\ninterface Proof {\n    activityType: string;\n    userId: string;\n    timestamp: number;\n    metadata: any;\n    weight: number;\n    verified: boolean;\n}\n\ninterface ValidationResult {\n    valid: boolean;\n    reason?: string;\n    proof?: Proof;\n}\n\nexport class ProofOfKnowledgeEngine {\n    activityTypes: {\n        [key: string]: { weight: number; baseReward: number };\n    };\n\n    constructor() {\n        this.activityTypes = {\n            COURSE_COMPLETION: { weight: 1.0, baseReward: 100 },\n            LESSON_COMPLETION: { weight: 0.3, baseReward: 10 },\n            QUIZ_PASSED: { weight: 0.5, baseReward: 25 },\n            ASSIGNMENT_SUBMITTED: { weight: 0.4, baseReward: 15 },\n            PEER_TEACHING: { weight: 0.8, baseReward: 50 },\n            DISCUSSION_CONTRIBUTION: { weight: 0.2, baseReward: 5 },\n            PROJECT_COMPLETION: { weight: 1.2, baseReward: 150 },\n            CERTIFICATION_EARNED: { weight: 2.0, baseReward: 500 },\n        };\n    }\n\n    validateProof(activity: Activity): ValidationResult {\n        if (!activity || !activity.type) {\n            return { valid: false, reason: 'Invalid activity structure' };\n        }\n\n        const activityConfig = this.activityTypes[activity.type];\n        if (!activityConfig) {\n            return { valid: false, reason: 'Unknown activity type' };\n        }\n\n        if (!activity.userId || !activity.timestamp) {\n            return { valid: false, reason: 'Missing required fields' };\n        }\n\n        if (activity.type === 'QUIZ_PASSED' && (!activity.score || activity.score < 70)) {\n            return { valid: false, reason: 'Quiz score below passing threshold' };\n        }\n\n        const proof: Proof = {\n            activityType: activity.type,\n            userId: activity.userId,\n            timestamp: activity.timestamp,\n            metadata: activity.metadata || {},\n            weight: activityConfig.weight,\n            verified: true,\n        };\n\n        return { valid: true, proof };\n    }\n\n    calculateReward(proof: Proof): number {\n        const config = this.activityTypes[proof.activityType];\n        if (!config) {return 0;}\n\n        let reward = config.baseReward * proof.weight;\n\n        if (proof.metadata.difficulty) {\n            const difficultyMultiplier = {\n                beginner: 1.0,\n                intermediate: 1.5,\n                advanced: 2.0,\n                expert: 3.0,\n            }[proof.metadata.difficulty] || 1.0;\n            reward *= difficultyMultiplier;\n        }\n\n        if (proof.metadata.score) {\n            const scoreBonus = (proof.metadata.score - 70) / 30;\n            reward *= (1 + Math.max(0, scoreBonus));\n        }\n\n        if (proof.metadata.timeSpent) {\n            const engagementBonus = Math.min(proof.metadata.timeSpent / 3600, 0.5);\n            reward *= (1 + engagementBonus);\n        }\n\n        return Math.round(reward * 100) / 100;\n    }\n\n    generateProofHash(proof: Proof): string {\n        const data = JSON.stringify({\n            type: proof.activityType,\n            user: proof.userId,\n            time: proof.timestamp,\n            meta: proof.metadata,\n        });\n        return crypto.createHash('sha256').update(data).digest('hex');\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,OAAO,KAAKE,MAAM,MAAM,QAAQ;AA6BhC,OAAO,MAAMC,sBAAsB,CAAC;EAKhCC,WAAWA,CAAA,EAAG;IAAA;IAAAJ,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAM,CAAA;IACV,IAAI,CAACC,aAAa,GAAG;MACjBC,iBAAiB,EAAE;QAAEC,MAAM,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAI,CAAC;MACnDC,iBAAiB,EAAE;QAAEF,MAAM,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAG,CAAC;MAClDE,WAAW,EAAE;QAAEH,MAAM,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAG,CAAC;MAC5CG,oBAAoB,EAAE;QAAEJ,MAAM,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAG,CAAC;MACrDI,aAAa,EAAE;QAAEL,MAAM,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAG,CAAC;MAC9CK,uBAAuB,EAAE;QAAEN,MAAM,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAE,CAAC;MACvDM,kBAAkB,EAAE;QAAEP,MAAM,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAI,CAAC;MACpDO,oBAAoB,EAAE;QAAER,MAAM,EAAE,GAAG;QAAEC,UAAU,EAAE;MAAI;IACzD,CAAC;EACL;EAEAQ,aAAaA,CAACC,QAAkB,EAAoB;IAAA;IAAAnB,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAM,CAAA;IAChD;IAAI;IAAA,CAAAN,cAAA,GAAAoB,CAAA,WAACD,QAAQ;IAAA;IAAA,CAAAnB,cAAA,GAAAoB,CAAA,UAAI,CAACD,QAAQ,CAACE,IAAI,GAAE;MAAA;MAAArB,cAAA,GAAAoB,CAAA;MAAApB,cAAA,GAAAM,CAAA;MAC7B,OAAO;QAAEgB,KAAK,EAAE,KAAK;QAAEC,MAAM,EAAE;MAA6B,CAAC;IACjE,CAAC;IAAA;IAAA;MAAAvB,cAAA,GAAAoB,CAAA;IAAA;IAED,MAAMI,cAAc;IAAA;IAAA,CAAAxB,cAAA,GAAAM,CAAA,OAAG,IAAI,CAACC,aAAa,CAACY,QAAQ,CAACE,IAAI,CAAC;IAAC;IAAArB,cAAA,GAAAM,CAAA;IACzD,IAAI,CAACkB,cAAc,EAAE;MAAA;MAAAxB,cAAA,GAAAoB,CAAA;MAAApB,cAAA,GAAAM,CAAA;MACjB,OAAO;QAAEgB,KAAK,EAAE,KAAK;QAAEC,MAAM,EAAE;MAAwB,CAAC;IAC5D,CAAC;IAAA;IAAA;MAAAvB,cAAA,GAAAoB,CAAA;IAAA;IAAApB,cAAA,GAAAM,CAAA;IAED;IAAI;IAAA,CAAAN,cAAA,GAAAoB,CAAA,WAACD,QAAQ,CAACM,MAAM;IAAA;IAAA,CAAAzB,cAAA,GAAAoB,CAAA,UAAI,CAACD,QAAQ,CAACO,SAAS,GAAE;MAAA;MAAA1B,cAAA,GAAAoB,CAAA;MAAApB,cAAA,GAAAM,CAAA;MACzC,OAAO;QAAEgB,KAAK,EAAE,KAAK;QAAEC,MAAM,EAAE;MAA0B,CAAC;IAC9D,CAAC;IAAA;IAAA;MAAAvB,cAAA,GAAAoB,CAAA;IAAA;IAAApB,cAAA,GAAAM,CAAA;IAED;IAAI;IAAA,CAAAN,cAAA,GAAAoB,CAAA,UAAAD,QAAQ,CAACE,IAAI,KAAK,aAAa;IAAK;IAAA,CAAArB,cAAA,GAAAoB,CAAA,WAACD,QAAQ,CAACQ,KAAK;IAAA;IAAA,CAAA3B,cAAA,GAAAoB,CAAA,UAAID,QAAQ,CAACQ,KAAK,GAAG,EAAE,EAAC,EAAE;MAAA;MAAA3B,cAAA,GAAAoB,CAAA;MAAApB,cAAA,GAAAM,CAAA;MAC7E,OAAO;QAAEgB,KAAK,EAAE,KAAK;QAAEC,MAAM,EAAE;MAAqC,CAAC;IACzE,CAAC;IAAA;IAAA;MAAAvB,cAAA,GAAAoB,CAAA;IAAA;IAED,MAAMQ,KAAY;IAAA;IAAA,CAAA5B,cAAA,GAAAM,CAAA,QAAG;MACjBuB,YAAY,EAAEV,QAAQ,CAACE,IAAI;MAC3BI,MAAM,EAAEN,QAAQ,CAACM,MAAM;MACvBC,SAAS,EAAEP,QAAQ,CAACO,SAAS;MAC7BI,QAAQ;MAAE;MAAA,CAAA9B,cAAA,GAAAoB,CAAA,UAAAD,QAAQ,CAACW,QAAQ;MAAA;MAAA,CAAA9B,cAAA,GAAAoB,CAAA,UAAI,CAAC,CAAC;MACjCX,MAAM,EAAEe,cAAc,CAACf,MAAM;MAC7BsB,QAAQ,EAAE;IACd,CAAC;IAAC;IAAA/B,cAAA,GAAAM,CAAA;IAEF,OAAO;MAAEgB,KAAK,EAAE,IAAI;MAAEM;IAAM,CAAC;EACjC;EAEAI,eAAeA,CAACJ,KAAY,EAAU;IAAA;IAAA5B,cAAA,GAAAK,CAAA;IAClC,MAAM4B,MAAM;IAAA;IAAA,CAAAjC,cAAA,GAAAM,CAAA,QAAG,IAAI,CAACC,aAAa,CAACqB,KAAK,CAACC,YAAY,CAAC;IAAC;IAAA7B,cAAA,GAAAM,CAAA;IACtD,IAAI,CAAC2B,MAAM,EAAE;MAAA;MAAAjC,cAAA,GAAAoB,CAAA;MAAApB,cAAA,GAAAM,CAAA;MAAC,OAAO,CAAC;IAAC,CAAC;IAAA;IAAA;MAAAN,cAAA,GAAAoB,CAAA;IAAA;IAExB,IAAIc,MAAM;IAAA;IAAA,CAAAlC,cAAA,GAAAM,CAAA,QAAG2B,MAAM,CAACvB,UAAU,GAAGkB,KAAK,CAACnB,MAAM;IAAC;IAAAT,cAAA,GAAAM,CAAA;IAE9C,IAAIsB,KAAK,CAACE,QAAQ,CAACK,UAAU,EAAE;MAAA;MAAAnC,cAAA,GAAAoB,CAAA;MAC3B,MAAMgB,oBAAoB;MAAA;MAAA,CAAApC,cAAA,GAAAM,CAAA;MAAG;MAAA,CAAAN,cAAA,GAAAoB,CAAA;QACzBiB,QAAQ,EAAE,GAAG;QACbC,YAAY,EAAE,GAAG;QACjBC,QAAQ,EAAE,GAAG;QACbC,MAAM,EAAE;MACZ,CAAC,CAACZ,KAAK,CAACE,QAAQ,CAACK,UAAU,CAAC;MAAA;MAAA,CAAAnC,cAAA,GAAAoB,CAAA,WAAI,GAAG;MAAC;MAAApB,cAAA,GAAAM,CAAA;MACpC4B,MAAM,IAAIE,oBAAoB;IAClC,CAAC;IAAA;IAAA;MAAApC,cAAA,GAAAoB,CAAA;IAAA;IAAApB,cAAA,GAAAM,CAAA;IAED,IAAIsB,KAAK,CAACE,QAAQ,CAACH,KAAK,EAAE;MAAA;MAAA3B,cAAA,GAAAoB,CAAA;MACtB,MAAMqB,UAAU;MAAA;MAAA,CAAAzC,cAAA,GAAAM,CAAA,QAAG,CAACsB,KAAK,CAACE,QAAQ,CAACH,KAAK,GAAG,EAAE,IAAI,EAAE;MAAC;MAAA3B,cAAA,GAAAM,CAAA;MACpD4B,MAAM,IAAK,CAAC,GAAGQ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEF,UAAU,CAAE;IAC3C,CAAC;IAAA;IAAA;MAAAzC,cAAA,GAAAoB,CAAA;IAAA;IAAApB,cAAA,GAAAM,CAAA;IAED,IAAIsB,KAAK,CAACE,QAAQ,CAACc,SAAS,EAAE;MAAA;MAAA5C,cAAA,GAAAoB,CAAA;MAC1B,MAAMyB,eAAe;MAAA;MAAA,CAAA7C,cAAA,GAAAM,CAAA,QAAGoC,IAAI,CAACI,GAAG,CAAClB,KAAK,CAACE,QAAQ,CAACc,SAAS,GAAG,IAAI,EAAE,GAAG,CAAC;MAAC;MAAA5C,cAAA,GAAAM,CAAA;MACvE4B,MAAM,IAAK,CAAC,GAAGW,eAAgB;IACnC,CAAC;IAAA;IAAA;MAAA7C,cAAA,GAAAoB,CAAA;IAAA;IAAApB,cAAA,GAAAM,CAAA;IAED,OAAOoC,IAAI,CAACK,KAAK,CAACb,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG;EACzC;EAEAc,iBAAiBA,CAACpB,KAAY,EAAU;IAAA;IAAA5B,cAAA,GAAAK,CAAA;IACpC,MAAM4C,IAAI;IAAA;IAAA,CAAAjD,cAAA,GAAAM,CAAA,QAAG4C,IAAI,CAACC,SAAS,CAAC;MACxB9B,IAAI,EAAEO,KAAK,CAACC,YAAY;MACxBuB,IAAI,EAAExB,KAAK,CAACH,MAAM;MAClB4B,IAAI,EAAEzB,KAAK,CAACF,SAAS;MACrB4B,IAAI,EAAE1B,KAAK,CAACE;IAChB,CAAC,CAAC;IAAC;IAAA9B,cAAA,GAAAM,CAAA;IACH,OAAOJ,MAAM,CAACqD,UAAU,CAAC,QAAQ,CAAC,CAACC,MAAM,CAACP,IAAI,CAAC,CAACQ,MAAM,CAAC,KAAK,CAAC;EACjE;AACJ","ignoreList":[]}