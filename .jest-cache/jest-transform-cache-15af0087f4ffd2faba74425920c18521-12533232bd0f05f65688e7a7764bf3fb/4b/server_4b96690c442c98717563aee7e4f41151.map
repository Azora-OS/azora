{"version":3,"names":["cov_zaw2hxzq4","actualCoverage","express","s","require","cors","helmet","rateLimit","EnhancedConstitutionalAI","config","app","PORT","b","process","env","constitutionalAI","use","origin","credentials","json","ubuntuLimiter","windowMs","max","message","error","ubuntu","get","req","res","f","status","service","timestamp","Date","toISOString","philosophy","constitutionalPrinciples","ubuntuPrinciples","post","content","context","body","validation","validateContent","success","err","next","console","stack","availableEndpoints","listen","log","module","exports"],"sources":["server.js"],"sourcesContent":["const express = require('express');\nconst cors = require('cors');\nconst helmet = require('helmet');\nconst rateLimit = require('express-rate-limit');\nconst { EnhancedConstitutionalAI } = require('./src/enhanced-constitutional-ai');\nrequire('dotenv').config();\n\nconst app = express();\nconst PORT = process.env.PORT || 4012;\n\n// Initialize Enhanced Constitutional AI\nconst constitutionalAI = new EnhancedConstitutionalAI();\n\n// Ubuntu Middleware\napp.use(helmet());\napp.use(cors({\n  origin: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002', 'http://localhost:3003'],\n  credentials: true\n}));\napp.use(express.json());\n\n// Ubuntu Rate Limiting\nconst ubuntuLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  max: 1000,\n  message: {\n    error: 'Too many requests',\n    ubuntu: 'We protect our collective resources with Ubuntu wisdom'\n  }\n});\n\napp.use(ubuntuLimiter);\n\n// Routes\napp.get('/health', (req, res) => {\n  res.json({ \n    status: 'healthy', \n    service: 'Enhanced Constitutional AI',\n    ubuntu: 'I serve because we prosper together',\n    timestamp: new Date().toISOString() \n  });\n});\n\n// Ubuntu Philosophy\napp.get('/ubuntu/philosophy', (req, res) => {\n  res.json({\n    philosophy: 'Ngiyakwazi ngoba sikwazi - I am because we are',\n    constitutionalPrinciples: constitutionalAI.ubuntuPrinciples,\n    ubuntu: 'Enhanced Constitutional AI - Ubuntu wisdom in action'\n  });\n});\n\n// Enhanced content validation\napp.post('/validate', async (req, res) => {\n  try {\n    const { content, context } = req.body;\n    \n    if (!content) {\n      return res.status(400).json({\n        error: 'Content is required',\n        ubuntu: 'Ubuntu validation requires meaningful content'\n      });\n    }\n\n    const validation = await constitutionalAI.validateContent(content, context);\n    \n    res.json({\n      success: true,\n      validation,\n      ubuntu: 'Ubuntu constitutional analysis complete'\n    });\n  } catch (error) {\n    res.status(500).json({\n      error: error.message,\n      ubuntu: 'Ubuntu constitutional analysis handles challenges with wisdom'\n    });\n  }\n});\n\n// Error handling\napp.use((err, req, res, next) => {\n  console.error(err.stack);\n  res.status(500).json({\n    error: 'Something went wrong',\n    ubuntu: 'Ubuntu communities face challenges together'\n  });\n});\n\n// 404 handler\napp.use((req, res) => {\n  res.status(404).json({\n    error: 'Endpoint not found',\n    ubuntu: 'Ubuntu guides us to the right path',\n    availableEndpoints: [\n      'GET /health',\n      'GET /ubuntu/philosophy',\n      'POST /validate'\n    ]\n  });\n});\n\napp.listen(PORT, () => {\n  console.log(`üß† Enhanced Constitutional AI running on port ${PORT}`);\n  console.log(`üåç Ubuntu Principles: Advanced ethical reasoning active`);\n  console.log(`üéØ Ubuntu Philosophy: Ngiyakwazi ngoba sikwazi`);\n});\n\nmodule.exports = app;"],"mappings":"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","ignoreList":[]}