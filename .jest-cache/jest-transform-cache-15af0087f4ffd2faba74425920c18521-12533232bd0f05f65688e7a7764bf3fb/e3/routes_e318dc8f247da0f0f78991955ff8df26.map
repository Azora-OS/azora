{"version":3,"names":["cov_1zz7lbxajx","actualCoverage","express","s","require","PrismaClient","router","Router","prisma","get","req","res","f","wallet","b","findUnique","where","userId","params","balance","currency","json","success","data","post","amount","address","body","tx","transaction","create","type","status","metadata","update","decrement","txHash","id","query","txs","findMany","orderBy","createdAt","take","reward","Math","random","upsert","increment","module","exports"],"sources":["routes.js"],"sourcesContent":["const express = require('express');\nconst { PrismaClient } = require('@prisma/client');\nconst router = express.Router();\nconst prisma = new PrismaClient();\n\nrouter.get('/api/wallet/:userId', async (req, res) => {\n  const wallet = await prisma.wallet.findUnique({\n    where: { userId: req.params.userId }\n  }) || { balance: 0, currency: 'AZR' };\n  res.json({ success: true, data: wallet });\n});\n\nrouter.post('/api/wallet/send', async (req, res) => {\n  const { userId, amount, address } = req.body;\n  const tx = await prisma.transaction.create({\n    data: { userId, amount, type: 'TRANSFER', status: 'COMPLETED', metadata: { address } }\n  });\n  await prisma.wallet.update({\n    where: { userId },\n    data: { balance: { decrement: amount } }\n  });\n  res.json({ success: true, txHash: tx.id });\n});\n\nrouter.get('/api/transactions', async (req, res) => {\n  const { userId } = req.query;\n  const txs = await prisma.transaction.findMany({\n    where: { userId },\n    orderBy: { createdAt: 'desc' },\n    take: 50\n  });\n  res.json({ success: true, data: txs });\n});\n\nrouter.post('/api/mining/start', async (req, res) => {\n  const { userId } = req.body;\n  const reward = Math.random() * 10;\n  await prisma.wallet.upsert({\n    where: { userId },\n    update: { balance: { increment: reward } },\n    create: { userId, balance: reward, currency: 'AZR' }\n  });\n  res.json({ success: true, reward });\n});\n\nmodule.exports = router;\n"],"mappings":"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","ignoreList":[]}