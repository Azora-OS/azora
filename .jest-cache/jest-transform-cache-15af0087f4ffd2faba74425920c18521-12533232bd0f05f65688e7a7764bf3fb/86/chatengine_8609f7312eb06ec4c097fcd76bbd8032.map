{"version":3,"names":["cov_26n29frwv0","actualCoverage","personalityManager","s","require","aiResponseEngine","ChatEngine","chat","personalityName","userMessage","userId","context","b","f","personality","getPersonality","Error","config","getConfig","response","generateResponse","message","mood","timestamp","multiPersonalityChat","personalityNames","responses","Promise","all","map","name","clearHistory","module","exports"],"sources":["chat-engine.js"],"sourcesContent":["const personalityManager = require('./personality-manager');\nconst aiResponseEngine = require('./engines/ai-response-engine');\n\nclass ChatEngine {\n    async chat(personalityName, userMessage, userId, context = {}) {\n        const personality = personalityManager.getPersonality(personalityName);\n        if (!personality) {\n            throw new Error(`Personality '${personalityName}' not found`);\n        }\n\n        const config = personality.getConfig();\n        const response = await aiResponseEngine.generateResponse(config, userMessage, userId, context);\n        \n        return {\n            personality: personalityName,\n            message: response.message,\n            mood: response.mood,\n            timestamp: response.timestamp\n        };\n    }\n\n    async multiPersonalityChat(personalityNames, userMessage, userId) {\n        const responses = await Promise.all(\n            personalityNames.map(name => this.chat(name, userMessage, userId))\n        );\n        return responses;\n    }\n\n    clearHistory(userId, personalityName = null) {\n        aiResponseEngine.clearHistory(userId, personalityName);\n    }\n}\n\nmodule.exports = new ChatEngine();\n"],"mappings":"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","ignoreList":[]}