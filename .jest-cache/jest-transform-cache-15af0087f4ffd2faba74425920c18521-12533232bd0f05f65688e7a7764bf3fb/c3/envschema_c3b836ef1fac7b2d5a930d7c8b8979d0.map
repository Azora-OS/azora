{"version":3,"names":["cov_1st1ix1y8h","actualCoverage","z","envSchema","s","object","NODE_ENV","enum","default","PORT","string","transform","v","f","Number","DATABASE_URL","url","optional","REDIS_URL","JWT_SECRET","min","OPENAI_API_KEY","STRIPE_SECRET_KEY","startsWith","CORS_ORIGIN","validateEnv","env","b","process","result","safeParse","success","console","error","flatten","Error","data"],"sources":["env-schema.ts"],"sourcesContent":["import { z } from 'zod';\n\nexport const envSchema = z.object({\n  NODE_ENV: z.enum(['development', 'staging', 'production']).default('development'),\n  PORT: z.string().default('3000').transform((v) => Number(v)),\n  DATABASE_URL: z.string().url().optional(),\n  REDIS_URL: z.string().url().optional(),\n  JWT_SECRET: z.string().min(32).optional(),\n  OPENAI_API_KEY: z.string().min(20).optional(),\n  STRIPE_SECRET_KEY: z.string().startsWith('sk_').optional(),\n  CORS_ORIGIN: z.string().url().optional(),\n});\n\nexport type Env = z.infer<typeof envSchema>;\n\nexport function validateEnv(env: NodeJS.ProcessEnv = process.env): Env {\n  const result = envSchema.safeParse(env);\n  if (!result.success) {\n    console.error('‚ùå Invalid environment variables:', result.error.flatten());\n    // Do not exit here to avoid breaking test/dev environments unexpectedly\n    throw new Error('Invalid environment variables');\n  }\n  return result.data;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,SAASE,CAAC,QAAQ,KAAK;AAEvB,OAAO,MAAMC,SAAS;AAAA;AAAA,CAAAH,cAAA,GAAAI,CAAA,OAAGF,CAAC,CAACG,MAAM,CAAC;EAChCC,QAAQ,EAAEJ,CAAC,CAACK,IAAI,CAAC,CAAC,aAAa,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC,CAACC,OAAO,CAAC,aAAa,CAAC;EACjFC,IAAI,EAAEP,CAAC,CAACQ,MAAM,CAAC,CAAC,CAACF,OAAO,CAAC,MAAM,CAAC,CAACG,SAAS,CAAEC,CAAC,IAAK;IAAA;IAAAZ,cAAA,GAAAa,CAAA;IAAAb,cAAA,GAAAI,CAAA;IAAA,OAAAU,MAAM,CAACF,CAAC,CAAC;EAAD,CAAC,CAAC;EAC5DG,YAAY,EAAEb,CAAC,CAACQ,MAAM,CAAC,CAAC,CAACM,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;EACzCC,SAAS,EAAEhB,CAAC,CAACQ,MAAM,CAAC,CAAC,CAACM,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;EACtCE,UAAU,EAAEjB,CAAC,CAACQ,MAAM,CAAC,CAAC,CAACU,GAAG,CAAC,EAAE,CAAC,CAACH,QAAQ,CAAC,CAAC;EACzCI,cAAc,EAAEnB,CAAC,CAACQ,MAAM,CAAC,CAAC,CAACU,GAAG,CAAC,EAAE,CAAC,CAACH,QAAQ,CAAC,CAAC;EAC7CK,iBAAiB,EAAEpB,CAAC,CAACQ,MAAM,CAAC,CAAC,CAACa,UAAU,CAAC,KAAK,CAAC,CAACN,QAAQ,CAAC,CAAC;EAC1DO,WAAW,EAAEtB,CAAC,CAACQ,MAAM,CAAC,CAAC,CAACM,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC;AACzC,CAAC,CAAC;AAIF,OAAO,SAASQ,WAAWA,CAACC,GAAsB;AAAA;AAAA,CAAA1B,cAAA,GAAA2B,CAAA,UAAGC,OAAO,CAACF,GAAG,GAAO;EAAA;EAAA1B,cAAA,GAAAa,CAAA;EACrE,MAAMgB,MAAM;EAAA;EAAA,CAAA7B,cAAA,GAAAI,CAAA,OAAGD,SAAS,CAAC2B,SAAS,CAACJ,GAAG,CAAC;EAAC;EAAA1B,cAAA,GAAAI,CAAA;EACxC,IAAI,CAACyB,MAAM,CAACE,OAAO,EAAE;IAAA;IAAA/B,cAAA,GAAA2B,CAAA;IAAA3B,cAAA,GAAAI,CAAA;IACnB4B,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEJ,MAAM,CAACI,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC;IACzE;IAAA;IAAAlC,cAAA,GAAAI,CAAA;IACA,MAAM,IAAI+B,KAAK,CAAC,+BAA+B,CAAC;EAClD,CAAC;EAAA;EAAA;IAAAnC,cAAA,GAAA2B,CAAA;EAAA;EAAA3B,cAAA,GAAAI,CAAA;EACD,OAAOyB,MAAM,CAACO,IAAI;AACpB","ignoreList":[]}