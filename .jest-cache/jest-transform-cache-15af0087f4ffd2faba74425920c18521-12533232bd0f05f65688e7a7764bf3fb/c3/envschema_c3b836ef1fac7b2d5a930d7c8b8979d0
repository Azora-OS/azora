300ddabd70baa5b0a7d5296e2f320587
/* istanbul ignore next */
function cov_1st1ix1y8h() {
  var path = "/workspaces/azora/services/shared/env-schema.ts";
  var hash = "bb1ef64df419e3c566e1277916ebb15651800763";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/shared/env-schema.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 25
        },
        end: {
          line: 12,
          column: 2
        }
      },
      "1": {
        start: {
          line: 5,
          column: 52
        },
        end: {
          line: 5,
          column: 61
        }
      },
      "2": {
        start: {
          line: 17,
          column: 17
        },
        end: {
          line: 17,
          column: 41
        }
      },
      "3": {
        start: {
          line: 18,
          column: 2
        },
        end: {
          line: 22,
          column: 3
        }
      },
      "4": {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 19,
          column: 78
        }
      },
      "5": {
        start: {
          line: 21,
          column: 4
        },
        end: {
          line: 21,
          column: 53
        }
      },
      "6": {
        start: {
          line: 23,
          column: 2
        },
        end: {
          line: 23,
          column: 21
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 5,
            column: 45
          },
          end: {
            line: 5,
            column: 46
          }
        },
        loc: {
          start: {
            line: 5,
            column: 52
          },
          end: {
            line: 5,
            column: 61
          }
        },
        line: 5
      },
      "1": {
        name: "validateEnv",
        decl: {
          start: {
            line: 16,
            column: 16
          },
          end: {
            line: 16,
            column: 27
          }
        },
        loc: {
          start: {
            line: 16,
            column: 71
          },
          end: {
            line: 24,
            column: 1
          }
        },
        line: 16
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 16,
            column: 28
          },
          end: {
            line: 16,
            column: 64
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 16,
            column: 53
          },
          end: {
            line: 16,
            column: 64
          }
        }],
        line: 16
      },
      "1": {
        loc: {
          start: {
            line: 18,
            column: 2
          },
          end: {
            line: 22,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 18,
            column: 2
          },
          end: {
            line: 22,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 18
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0],
      "1": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "bb1ef64df419e3c566e1277916ebb15651800763"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1st1ix1y8h = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1st1ix1y8h();
import { z } from 'zod';
export const envSchema =
/* istanbul ignore next */
(cov_1st1ix1y8h().s[0]++, z.object({
  NODE_ENV: z.enum(['development', 'staging', 'production']).default('development'),
  PORT: z.string().default('3000').transform(v => {
    /* istanbul ignore next */
    cov_1st1ix1y8h().f[0]++;
    cov_1st1ix1y8h().s[1]++;
    return Number(v);
  }),
  DATABASE_URL: z.string().url().optional(),
  REDIS_URL: z.string().url().optional(),
  JWT_SECRET: z.string().min(32).optional(),
  OPENAI_API_KEY: z.string().min(20).optional(),
  STRIPE_SECRET_KEY: z.string().startsWith('sk_').optional(),
  CORS_ORIGIN: z.string().url().optional()
}));
export function validateEnv(env =
/* istanbul ignore next */
(cov_1st1ix1y8h().b[0][0]++, process.env)) {
  /* istanbul ignore next */
  cov_1st1ix1y8h().f[1]++;
  const result =
  /* istanbul ignore next */
  (cov_1st1ix1y8h().s[2]++, envSchema.safeParse(env));
  /* istanbul ignore next */
  cov_1st1ix1y8h().s[3]++;
  if (!result.success) {
    /* istanbul ignore next */
    cov_1st1ix1y8h().b[1][0]++;
    cov_1st1ix1y8h().s[4]++;
    console.error('‚ùå Invalid environment variables:', result.error.flatten());
    // Do not exit here to avoid breaking test/dev environments unexpectedly
    /* istanbul ignore next */
    cov_1st1ix1y8h().s[5]++;
    throw new Error('Invalid environment variables');
  } else
  /* istanbul ignore next */
  {
    cov_1st1ix1y8h().b[1][1]++;
  }
  cov_1st1ix1y8h().s[6]++;
  return result.data;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXN0MWl4MXk4aCIsImFjdHVhbENvdmVyYWdlIiwieiIsImVudlNjaGVtYSIsInMiLCJvYmplY3QiLCJOT0RFX0VOViIsImVudW0iLCJkZWZhdWx0IiwiUE9SVCIsInN0cmluZyIsInRyYW5zZm9ybSIsInYiLCJmIiwiTnVtYmVyIiwiREFUQUJBU0VfVVJMIiwidXJsIiwib3B0aW9uYWwiLCJSRURJU19VUkwiLCJKV1RfU0VDUkVUIiwibWluIiwiT1BFTkFJX0FQSV9LRVkiLCJTVFJJUEVfU0VDUkVUX0tFWSIsInN0YXJ0c1dpdGgiLCJDT1JTX09SSUdJTiIsInZhbGlkYXRlRW52IiwiZW52IiwiYiIsInByb2Nlc3MiLCJyZXN1bHQiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiY29uc29sZSIsImVycm9yIiwiZmxhdHRlbiIsIkVycm9yIiwiZGF0YSJdLCJzb3VyY2VzIjpbImVudi1zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbmV4cG9ydCBjb25zdCBlbnZTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIE5PREVfRU5WOiB6LmVudW0oWydkZXZlbG9wbWVudCcsICdzdGFnaW5nJywgJ3Byb2R1Y3Rpb24nXSkuZGVmYXVsdCgnZGV2ZWxvcG1lbnQnKSxcbiAgUE9SVDogei5zdHJpbmcoKS5kZWZhdWx0KCczMDAwJykudHJhbnNmb3JtKCh2KSA9PiBOdW1iZXIodikpLFxuICBEQVRBQkFTRV9VUkw6IHouc3RyaW5nKCkudXJsKCkub3B0aW9uYWwoKSxcbiAgUkVESVNfVVJMOiB6LnN0cmluZygpLnVybCgpLm9wdGlvbmFsKCksXG4gIEpXVF9TRUNSRVQ6IHouc3RyaW5nKCkubWluKDMyKS5vcHRpb25hbCgpLFxuICBPUEVOQUlfQVBJX0tFWTogei5zdHJpbmcoKS5taW4oMjApLm9wdGlvbmFsKCksXG4gIFNUUklQRV9TRUNSRVRfS0VZOiB6LnN0cmluZygpLnN0YXJ0c1dpdGgoJ3NrXycpLm9wdGlvbmFsKCksXG4gIENPUlNfT1JJR0lOOiB6LnN0cmluZygpLnVybCgpLm9wdGlvbmFsKCksXG59KTtcblxuZXhwb3J0IHR5cGUgRW52ID0gei5pbmZlcjx0eXBlb2YgZW52U2NoZW1hPjtcblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW52KGVudjogTm9kZUpTLlByb2Nlc3NFbnYgPSBwcm9jZXNzLmVudik6IEVudiB7XG4gIGNvbnN0IHJlc3VsdCA9IGVudlNjaGVtYS5zYWZlUGFyc2UoZW52KTtcbiAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBJbnZhbGlkIGVudmlyb25tZW50IHZhcmlhYmxlczonLCByZXN1bHQuZXJyb3IuZmxhdHRlbigpKTtcbiAgICAvLyBEbyBub3QgZXhpdCBoZXJlIHRvIGF2b2lkIGJyZWFraW5nIHRlc3QvZGV2IGVudmlyb25tZW50cyB1bmV4cGVjdGVkbHlcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdC5kYXRhO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFmWixTQUFTRSxDQUFDLFFBQVEsS0FBSztBQUV2QixPQUFPLE1BQU1DLFNBQVM7QUFBQTtBQUFBLENBQUFILGNBQUEsR0FBQUksQ0FBQSxPQUFHRixDQUFDLENBQUNHLE1BQU0sQ0FBQztFQUNoQ0MsUUFBUSxFQUFFSixDQUFDLENBQUNLLElBQUksQ0FBQyxDQUFDLGFBQWEsRUFBRSxTQUFTLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLGFBQWEsQ0FBQztFQUNqRkMsSUFBSSxFQUFFUCxDQUFDLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUNGLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQ0csU0FBUyxDQUFFQyxDQUFDLElBQUs7SUFBQTtJQUFBWixjQUFBLEdBQUFhLENBQUE7SUFBQWIsY0FBQSxHQUFBSSxDQUFBO0lBQUEsT0FBQVUsTUFBTSxDQUFDRixDQUFDLENBQUM7RUFBRCxDQUFDLENBQUM7RUFDNURHLFlBQVksRUFBRWIsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDTSxHQUFHLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQztFQUN6Q0MsU0FBUyxFQUFFaEIsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDTSxHQUFHLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQztFQUN0Q0UsVUFBVSxFQUFFakIsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDVSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUNILFFBQVEsQ0FBQyxDQUFDO0VBQ3pDSSxjQUFjLEVBQUVuQixDQUFDLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUNVLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQ0gsUUFBUSxDQUFDLENBQUM7RUFDN0NLLGlCQUFpQixFQUFFcEIsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDYSxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUNOLFFBQVEsQ0FBQyxDQUFDO0VBQzFETyxXQUFXLEVBQUV0QixDQUFDLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUNNLEdBQUcsQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FBQztBQUN6QyxDQUFDLENBQUM7QUFJRixPQUFPLFNBQVNRLFdBQVdBLENBQUNDLEdBQXNCO0FBQUE7QUFBQSxDQUFBMUIsY0FBQSxHQUFBMkIsQ0FBQSxVQUFHQyxPQUFPLENBQUNGLEdBQUcsR0FBTztFQUFBO0VBQUExQixjQUFBLEdBQUFhLENBQUE7RUFDckUsTUFBTWdCLE1BQU07RUFBQTtFQUFBLENBQUE3QixjQUFBLEdBQUFJLENBQUEsT0FBR0QsU0FBUyxDQUFDMkIsU0FBUyxDQUFDSixHQUFHLENBQUM7RUFBQztFQUFBMUIsY0FBQSxHQUFBSSxDQUFBO0VBQ3hDLElBQUksQ0FBQ3lCLE1BQU0sQ0FBQ0UsT0FBTyxFQUFFO0lBQUE7SUFBQS9CLGNBQUEsR0FBQTJCLENBQUE7SUFBQTNCLGNBQUEsR0FBQUksQ0FBQTtJQUNuQjRCLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLGtDQUFrQyxFQUFFSixNQUFNLENBQUNJLEtBQUssQ0FBQ0MsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUN6RTtJQUFBO0lBQUFsQyxjQUFBLEdBQUFJLENBQUE7SUFDQSxNQUFNLElBQUkrQixLQUFLLENBQUMsK0JBQStCLENBQUM7RUFDbEQsQ0FBQztFQUFBO0VBQUE7SUFBQW5DLGNBQUEsR0FBQTJCLENBQUE7RUFBQTtFQUFBM0IsY0FBQSxHQUFBSSxDQUFBO0VBQ0QsT0FBT3lCLE1BQU0sQ0FBQ08sSUFBSTtBQUNwQiIsImlnbm9yZUxpc3QiOltdfQ==