{"version":3,"names":["cov_encwk6bxo","actualCoverage","ElaraLogger","PricingService","studentTiers","s","free","tier","discountPercentage","features","monthlyPrice","premium","pro","discountsByUserType","founder","student","teacher","researcher","professional","enterprise","government","benefitsByUserType","constructor","f","logger","getPricingTiers","userType","info","b","getStudentPricingTiers","getFounderPricingTiers","getTeacherPricingTiers","getResearcherPricingTiers","getProfessionalPricingTiers","getEnterprisePricingTiers","getNonProfitPricingTiers","getGovernmentPricingTiers","Error","error","getBenefits","studentTier","discount","pricingTiers","calculatePricing","basePrice","discountAmount","finalPrice","getStudentTier","verifyStudent","email","endsWith","applyDiscount","generatePricingReport","totalUsers","averageDiscount","averagePrice","totalDiscountedRevenue","revenueImpact","timestamp","Date","name","description"],"sources":["pricing.service.ts"],"sourcesContent":["/**\n * Pricing & Benefits Service\n * \n * Manages pricing tiers, discounts, and benefits for all user types\n */\n\nimport { ElaraLogger } from '../utils/logger';\nimport { UserType } from './user-type-detection.service';\n\nexport interface PricingTier {\n  name: string;\n  basePrice: number;\n  discountPercentage: number;\n  features: string[];\n  description: string;\n}\n\nexport interface UserBenefits {\n  userType: UserType;\n  tier?: string;\n  discountPercentage: number;\n  features: string[];\n  pricingTiers: PricingTier[];\n}\n\nexport interface PricingCalculation {\n  basePrice: number;\n  discountPercentage: number;\n  discountAmount: number;\n  finalPrice: number;\n  userType: UserType;\n  tier?: string;\n}\n\nexport interface StudentTier {\n  tier: 'free' | 'premium' | 'pro';\n  discountPercentage: number;\n  features: string[];\n  monthlyPrice?: number;\n}\n\nexport interface PricingReport {\n  userType: UserType;\n  totalUsers: number;\n  averageDiscount: number;\n  totalDiscountedRevenue: number;\n  revenueImpact: number;\n  timestamp: Date;\n}\n\nexport class PricingService {\n  private logger: ElaraLogger;\n\n  // Student tier definitions\n  private readonly studentTiers: Record<string, StudentTier> = {\n    free: {\n      tier: 'free',\n      discountPercentage: 100,\n      features: [\n        '3 free courses',\n        '10 AI queries per month',\n        '1GB storage',\n        'Community support only',\n        'No certifications',\n        'No career services',\n      ],\n      monthlyPrice: 0,\n    },\n    premium: {\n      tier: 'premium',\n      discountPercentage: 50,\n      features: [\n        'Unlimited courses',\n        'Unlimited AI queries',\n        '10GB storage',\n        'Priority email support',\n        'Certifications included',\n        'Career services included',\n      ],\n      monthlyPrice: 99.50,\n    },\n    pro: {\n      tier: 'pro',\n      discountPercentage: 30,\n      features: [\n        'Everything in Premium',\n        'API access',\n        'Advanced AI features',\n        'Development tools',\n        'Research collaboration',\n        '100GB storage',\n      ],\n      monthlyPrice: 139.30,\n    },\n  };\n\n  // Discount structure by user type\n  private readonly discountsByUserType: Record<UserType, number> = {\n    founder: 0,\n    student: 30, // Average (freemium model)\n    teacher: 25,\n    researcher: 30,\n    professional: 0,\n    enterprise: 25, // Average (15-40% based on size)\n    'non-profit': 75,\n    government: 20, // Negotiated average\n  };\n\n  // Benefits by user type\n  private readonly benefitsByUserType: Record<UserType, string[]> = {\n    founder: [\n      'Course creation tools',\n      'Revenue analytics',\n      'Student management',\n      'Payment processing',\n      'Marketing tools',\n      'API access',\n    ],\n    student: [\n      'Course access',\n      'Certifications',\n      'Career services',\n      'Peer learning',\n      'Mentorship',\n      'Job board access',\n    ],\n    teacher: [\n      'Educator tools',\n      'Class management',\n      'Student analytics',\n      'Grading tools',\n      'Course templates',\n      'Professional development',\n    ],\n    researcher: [\n      'Research collaboration',\n      'Data analysis tools',\n      'Publication support',\n      'Peer review system',\n      'Research funding database',\n      'Academic networking',\n    ],\n    professional: [\n      'Career development',\n      'Skill assessments',\n      'Job matching',\n      'Networking events',\n      'Resume builder',\n      'Interview prep',\n    ],\n    enterprise: [\n      'Admin dashboard',\n      'User management',\n      'Advanced analytics',\n      'Custom integrations',\n      'Dedicated support',\n      'SLA guarantees',\n    ],\n    'non-profit': [\n      'Unlimited courses',\n      'Team collaboration',\n      'Impact tracking',\n      'Fundraising tools',\n      'Volunteer management',\n      'Community features',\n    ],\n    government: [\n      'Compliance features',\n      'Audit logging',\n      'Data residency',\n      'Security certifications',\n      'Custom compliance',\n      'Government support',\n    ],\n  };\n\n  constructor() {\n    this.logger = new ElaraLogger('PricingService');\n  }\n\n  /**\n   * Get pricing tiers for a user type\n   */\n  async getPricingTiers(userType: UserType): Promise<PricingTier[]> {\n    try {\n      this.logger.info(`Getting pricing tiers for user type: ${userType}`);\n\n      switch (userType) {\n        case 'student':\n          return this.getStudentPricingTiers();\n        case 'founder':\n          return this.getFounderPricingTiers();\n        case 'teacher':\n          return this.getTeacherPricingTiers();\n        case 'researcher':\n          return this.getResearcherPricingTiers();\n        case 'professional':\n          return this.getProfessionalPricingTiers();\n        case 'enterprise':\n          return this.getEnterprisePricingTiers();\n        case 'non-profit':\n          return this.getNonProfitPricingTiers();\n        case 'government':\n          return this.getGovernmentPricingTiers();\n        default:\n          throw new Error(`Unknown user type: ${userType}`);\n      }\n    } catch (error) {\n      this.logger.error('Error getting pricing tiers:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get benefits for a user type\n   */\n  async getBenefits(userType: UserType, studentTier?: string): Promise<UserBenefits> {\n    try {\n      this.logger.info(`Getting benefits for user type: ${userType}`);\n\n      const discount = this.discountsByUserType[userType];\n      const features = this.benefitsByUserType[userType];\n      const pricingTiers = await this.getPricingTiers(userType);\n\n      return {\n        userType,\n        tier: studentTier,\n        discountPercentage: discount,\n        features,\n        pricingTiers,\n      };\n    } catch (error) {\n      this.logger.error('Error getting benefits:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Calculate pricing for a service\n   */\n  async calculatePricing(\n    basePrice: number,\n    userType: UserType,\n    studentTier?: string\n  ): Promise<PricingCalculation> {\n    try {\n      this.logger.info(`Calculating pricing for user type: ${userType}`);\n\n      let discountPercentage = this.discountsByUserType[userType];\n\n      // Override discount for student tiers\n      if (userType === 'student' && studentTier) {\n        const tier = this.studentTiers[studentTier];\n        if (tier) {\n          discountPercentage = tier.discountPercentage;\n        }\n      }\n\n      const discountAmount = (basePrice * discountPercentage) / 100;\n      const finalPrice = basePrice - discountAmount;\n\n      return {\n        basePrice,\n        discountPercentage,\n        discountAmount,\n        finalPrice,\n        userType,\n        tier: studentTier,\n      };\n    } catch (error) {\n      this.logger.error('Error calculating pricing:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get student tier information\n   */\n  async getStudentTier(tier: string): Promise<StudentTier> {\n    try {\n      this.logger.info(`Getting student tier: ${tier}`);\n\n      const studentTier = this.studentTiers[tier];\n      if (!studentTier) {\n        throw new Error(`Unknown student tier: ${tier}`);\n      }\n\n      return studentTier;\n    } catch (error) {\n      this.logger.error('Error getting student tier:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Verify student status\n   */\n  async verifyStudent(email: string): Promise<boolean> {\n    try {\n      this.logger.info(`Verifying student status for email: ${email}`);\n\n      // Check for .edu email\n      if (email.endsWith('.edu')) {\n        return true;\n      }\n\n      // In production, would verify student ID or enrollment\n      return false;\n    } catch (error) {\n      this.logger.error('Error verifying student:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Apply discount to price\n   */\n  async applyDiscount(basePrice: number, discountPercentage: number): Promise<number> {\n    try {\n      this.logger.info(`Applying ${discountPercentage}% discount to price: ${basePrice}`);\n\n      const discountAmount = (basePrice * discountPercentage) / 100;\n      const finalPrice = basePrice - discountAmount;\n\n      return finalPrice;\n    } catch (error) {\n      this.logger.error('Error applying discount:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate pricing report\n   */\n  async generatePricingReport(userType: UserType, totalUsers: number): Promise<PricingReport> {\n    try {\n      this.logger.info(`Generating pricing report for user type: ${userType}`);\n\n      const averageDiscount = this.discountsByUserType[userType];\n      const averagePrice = 150; // Average service price\n      const totalDiscountedRevenue = totalUsers * averagePrice * (1 - averageDiscount / 100);\n      const revenueImpact = -(totalUsers * averagePrice * (averageDiscount / 100));\n\n      return {\n        userType,\n        totalUsers,\n        averageDiscount,\n        totalDiscountedRevenue,\n        revenueImpact,\n        timestamp: new Date(),\n      };\n    } catch (error) {\n      this.logger.error('Error generating pricing report:', error);\n      throw error;\n    }\n  }\n\n  // Private helper methods for pricing tiers\n\n  private getStudentPricingTiers(): PricingTier[] {\n    return [\n      {\n        name: 'Free',\n        basePrice: 0,\n        discountPercentage: 100,\n        features: this.studentTiers.free.features,\n        description: 'Perfect for getting started',\n      },\n      {\n        name: 'Premium',\n        basePrice: 99.50,\n        discountPercentage: 50,\n        features: this.studentTiers.premium.features,\n        description: 'Most popular for students',\n      },\n      {\n        name: 'Pro',\n        basePrice: 139.30,\n        discountPercentage: 30,\n        features: this.studentTiers.pro.features,\n        description: 'For advanced learners',\n      },\n    ];\n  }\n\n  private getFounderPricingTiers(): PricingTier[] {\n    return [\n      {\n        name: 'Starter',\n        basePrice: 99,\n        discountPercentage: 0,\n        features: [\n          'Course creation',\n          'Up to 100 students',\n          'Basic analytics',\n          'Email support',\n        ],\n        description: 'For new course creators',\n      },\n      {\n        name: 'Professional',\n        basePrice: 299,\n        discountPercentage: 0,\n        features: [\n          'Unlimited students',\n          'Advanced analytics',\n          'Marketing tools',\n          'Priority support',\n        ],\n        description: 'For established creators',\n      },\n      {\n        name: 'Enterprise',\n        basePrice: 999,\n        discountPercentage: 0,\n        features: [\n          'Everything in Professional',\n          'API access',\n          'Custom integrations',\n          'Dedicated support',\n        ],\n        description: 'For large organizations',\n      },\n    ];\n  }\n\n  private getTeacherPricingTiers(): PricingTier[] {\n    return [\n      {\n        name: 'Educator',\n        basePrice: 74.25, // 25% discount on 99\n        discountPercentage: 25,\n        features: [\n          'Class management',\n          'Student analytics',\n          'Grading tools',\n          'Course templates',\n        ],\n        description: 'For educators',\n      },\n      {\n        name: 'Professional Educator',\n        basePrice: 111.75, // 25% discount on 149\n        discountPercentage: 25,\n        features: [\n          'Everything in Educator',\n          'Advanced analytics',\n          'Professional development',\n          'Certification tools',\n        ],\n        description: 'For professional educators',\n      },\n    ];\n  }\n\n  private getResearcherPricingTiers(): PricingTier[] {\n    return [\n      {\n        name: 'Researcher',\n        basePrice: 69.30, // 30% discount on 99\n        discountPercentage: 30,\n        features: [\n          'Research collaboration',\n          'Data analysis tools',\n          'Publication support',\n          'Peer review system',\n        ],\n        description: 'For researchers',\n      },\n      {\n        name: 'Advanced Researcher',\n        basePrice: 104.30, // 30% discount on 149\n        discountPercentage: 30,\n        features: [\n          'Everything in Researcher',\n          'Advanced analytics',\n          'Research funding database',\n          'Academic networking',\n        ],\n        description: 'For advanced researchers',\n      },\n    ];\n  }\n\n  private getProfessionalPricingTiers(): PricingTier[] {\n    return [\n      {\n        name: 'Professional',\n        basePrice: 99,\n        discountPercentage: 0,\n        features: [\n          'Career development',\n          'Skill assessments',\n          'Job matching',\n          'Networking events',\n        ],\n        description: 'For professionals',\n      },\n      {\n        name: 'Premium Professional',\n        basePrice: 149,\n        discountPercentage: 0,\n        features: [\n          'Everything in Professional',\n          'Resume builder',\n          'Interview prep',\n          'Priority job matching',\n        ],\n        description: 'For career advancement',\n      },\n    ];\n  }\n\n  private getEnterprisePricingTiers(): PricingTier[] {\n    return [\n      {\n        name: 'Enterprise Starter',\n        basePrice: 749.25, // 25% discount on 999\n        discountPercentage: 25,\n        features: [\n          'Admin dashboard',\n          'User management',\n          'Basic analytics',\n          'Email support',\n        ],\n        description: 'For small enterprises',\n      },\n      {\n        name: 'Enterprise Professional',\n        basePrice: 599.40, // 40% discount on 999\n        discountPercentage: 40,\n        features: [\n          'Everything in Starter',\n          'Advanced analytics',\n          'Custom integrations',\n          'Priority support',\n        ],\n        description: 'For large enterprises',\n      },\n    ];\n  }\n\n  private getNonProfitPricingTiers(): PricingTier[] {\n    return [\n      {\n        name: 'Non-Profit',\n        basePrice: 24.75, // 75% discount on 99\n        discountPercentage: 75,\n        features: [\n          'Unlimited courses',\n          'Team collaboration',\n          'Impact tracking',\n          'Fundraising tools',\n        ],\n        description: 'For non-profits',\n      },\n      {\n        name: 'Non-Profit Plus',\n        basePrice: 49.75, // 75% discount on 199\n        discountPercentage: 75,\n        features: [\n          'Everything in Non-Profit',\n          'Volunteer management',\n          'Community features',\n          'Advanced reporting',\n        ],\n        description: 'For larger non-profits',\n      },\n    ];\n  }\n\n  private getGovernmentPricingTiers(): PricingTier[] {\n    return [\n      {\n        name: 'Government',\n        basePrice: 799.20, // 20% discount on 999\n        discountPercentage: 20,\n        features: [\n          'Compliance features',\n          'Audit logging',\n          'Data residency',\n          'Security certifications',\n        ],\n        description: 'For government agencies',\n      },\n      {\n        name: 'Government Enterprise',\n        basePrice: 1199, // Custom negotiated\n        discountPercentage: 0,\n        features: [\n          'Everything in Government',\n          'Custom compliance',\n          'Dedicated support',\n          'SLA guarantees',\n        ],\n        description: 'For large government organizations',\n      },\n    ];\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}