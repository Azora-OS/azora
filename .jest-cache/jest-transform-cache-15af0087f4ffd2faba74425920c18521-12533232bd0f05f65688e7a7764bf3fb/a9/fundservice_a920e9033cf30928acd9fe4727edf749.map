{"version":3,"names":["cov_2ovn9apik3","actualCoverage","generateUUID","AppError","auditService","fund","s","id","balance","totalContributions","totalDistributions","updatedAt","Date","distributions","Map","fundAuditTrail","FundService","getFundStatus","f","getBalance","addContribution","amount","source","userId","ipAddress","b","push","timestamp","action","details","logFundAction","console","log","createDistribution","data","distributionId","now","distribution","fundId","type","description","distributedAt","status","set","getDistributionById","get","getDistributions","page","pageSize","allDistributions","Array","from","values","filter","d","sort","a","getTime","total","length","totalPages","Math","ceil","start","end","slice","updateDistributionStatus","getDistributionStats","byType","byStatus","totalAmount","forEach","count","totalDistributedAmount","averageDistribution","getImpactMetrics","scholarshipsAwarded","projectsFunded","communityBeneficiaries","totalImpactAmount","getAnalytics","startDate","endDate","filtered","distDate","distributionTrend","date","toISOString","split","typeStats","topDistributionTypes","Object","entries","map","stats","currentBalance","contributionTrend","dateA","dateB","localeCompare","getAuditTrail","entry","validateDistribution","errors","validTypes","includes","join","trim","valid","fundService"],"sources":["fund.service.ts"],"sourcesContent":["import { generateUUID } from '../utils/uuid.js';\nimport { CitadelFund, FundDistribution, FundDistributionRequest } from '../types/index.js';\nimport { AppError } from '../middleware/errorHandler.js';\nimport { auditService } from './audit.service.js';\n\n// Mock database - replace with actual database calls\nconst fund: CitadelFund = {\n  id: generateUUID(),\n  balance: 0,\n  totalContributions: 0,\n  totalDistributions: 0,\n  updatedAt: new Date(),\n};\n\nconst distributions: Map<string, FundDistribution> = new Map();\n\n// Audit trail for fund operations\nconst fundAuditTrail: Array<{\n  timestamp: Date;\n  action: string;\n  details: string;\n  userId?: string;\n  ipAddress?: string;\n}> = [];\n\nexport class FundService {\n  /**\n   * Get Citadel Fund status\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async getFundStatus(): Promise<CitadelFund> {\n    return { ...fund };\n  }\n\n  /**\n   * Get fund balance\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async getBalance(): Promise<number> {\n    return fund.balance;\n  }\n\n  /**\n   * Add contribution to fund\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async addContribution(amount: number, source: string, userId?: string, ipAddress?: string): Promise<CitadelFund> {\n    if (amount <= 0) {\n      throw new AppError(400, 'Contribution amount must be positive');\n    }\n\n    fund.balance += amount;\n    fund.totalContributions += amount;\n    fund.updatedAt = new Date();\n\n    // Log to audit trail\n    fundAuditTrail.push({\n      timestamp: new Date(),\n      action: 'contribution_added',\n      details: `Added contribution of ${amount} from ${source}`,\n      userId,\n      ipAddress,\n    });\n\n    // Also log to global audit service\n    await auditService.logFundAction(\n      'contribution_added',\n      `Added contribution of ${amount} from ${source}`,\n      userId,\n      ipAddress\n    );\n\n    console.log(`[Fund] Added contribution of ${amount} from ${source}`);\n\n    return { ...fund };\n  }\n\n  /**\n   * Create fund distribution\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async createDistribution(data: FundDistributionRequest): Promise<FundDistribution> {\n    if (data.amount <= 0) {\n      throw new AppError(400, 'Distribution amount must be positive');\n    }\n\n    if (data.amount > fund.balance) {\n      throw new AppError(400, 'Insufficient fund balance for distribution');\n    }\n\n    const distributionId = generateUUID();\n    const now = new Date();\n\n    const distribution: FundDistribution = {\n      id: distributionId,\n      fundId: fund.id,\n      amount: data.amount,\n      type: data.type,\n      description: data.description,\n      distributedAt: now,\n      status: 'pending',\n    };\n\n    distributions.set(distributionId, distribution);\n\n    // Log to audit trail\n    fundAuditTrail.push({\n      timestamp: now,\n      action: 'distribution_created',\n      details: `Created ${data.type} distribution for ${data.amount}: ${data.description}`,\n    });\n\n    return distribution;\n  }\n\n  /**\n   * Get distribution by ID\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async getDistributionById(distributionId: string): Promise<FundDistribution> {\n    const distribution = distributions.get(distributionId);\n\n    if (!distribution) {\n      throw new AppError(404, 'Fund distribution not found');\n    }\n\n    return distribution;\n  }\n\n  /**\n   * Get all distributions\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async getDistributions(\n    page: number = 1,\n    pageSize: number = 10,\n    type?: string\n  ): Promise<{\n    distributions: FundDistribution[];\n    total: number;\n    page: number;\n    pageSize: number;\n    totalPages: number;\n  }> {\n    let allDistributions = Array.from(distributions.values());\n\n    if (type) {\n      allDistributions = allDistributions.filter((d) => d.type === type);\n    }\n\n    // Sort by date (newest first)\n    allDistributions.sort((a, b) => b.distributedAt.getTime() - a.distributedAt.getTime());\n\n    const total = allDistributions.length;\n    const totalPages = Math.ceil(total / pageSize);\n    const start = (page - 1) * pageSize;\n    const end = start + pageSize;\n\n    return {\n      distributions: allDistributions.slice(start, end),\n      total,\n      page,\n      pageSize,\n      totalPages,\n    };\n  }\n\n  /**\n   * Update distribution status\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async updateDistributionStatus(\n    distributionId: string,\n    status: 'pending' | 'completed' | 'failed'\n  ): Promise<FundDistribution> {\n    const distribution = await this.getDistributionById(distributionId);\n\n    if (status === 'completed' && distribution.status !== 'pending') {\n      throw new AppError(400, 'Only pending distributions can be completed');\n    }\n\n    if (status === 'completed') {\n      // Deduct from fund balance\n      fund.balance -= distribution.amount;\n      fund.totalDistributions += distribution.amount;\n      fund.updatedAt = new Date();\n\n      // Log to audit trail\n      fundAuditTrail.push({\n        timestamp: new Date(),\n        action: 'distribution_completed',\n        details: `Completed ${distribution.type} distribution for ${distribution.amount}`,\n      });\n    }\n\n    distribution.status = status;\n    distributions.set(distributionId, distribution);\n\n    return distribution;\n  }\n\n  /**\n   * Get distribution statistics\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async getDistributionStats(): Promise<{\n    totalDistributions: number;\n    totalDistributedAmount: number;\n    averageDistribution: number;\n    byType: Record<string, { count: number; amount: number }>;\n    byStatus: Record<string, number>;\n  }> {\n    const allDistributions = Array.from(distributions.values());\n\n    const byType: Record<string, { count: number; amount: number }> = {};\n    const byStatus: Record<string, number> = {};\n    let totalAmount = 0;\n\n    allDistributions.forEach((d) => {\n      // By type\n      if (!byType[d.type]) {\n        byType[d.type] = { count: 0, amount: 0 };\n      }\n      byType[d.type].count++;\n      byType[d.type].amount += d.amount;\n\n      // By status\n      byStatus[d.status] = (byStatus[d.status] || 0) + 1;\n\n      // Total\n      if (d.status === 'completed') {\n        totalAmount += d.amount;\n      }\n    });\n\n    return {\n      totalDistributions: allDistributions.length,\n      totalDistributedAmount: totalAmount,\n      averageDistribution: allDistributions.length > 0 ? totalAmount / allDistributions.length : 0,\n      byType,\n      byStatus,\n    };\n  }\n\n  /**\n   * Get impact metrics\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async getImpactMetrics(): Promise<{\n    scholarshipsAwarded: number;\n    projectsFunded: number;\n    communityBeneficiaries: number;\n    totalImpactAmount: number;\n  }> {\n    const allDistributions = Array.from(distributions.values()).filter(\n      (d) => d.status === 'completed'\n    );\n\n    let scholarshipsAwarded = 0;\n    let projectsFunded = 0;\n    let communityBeneficiaries = 0;\n    let totalImpactAmount = 0;\n\n    allDistributions.forEach((d) => {\n      totalImpactAmount += d.amount;\n\n      switch (d.type) {\n        case 'scholarship':\n          scholarshipsAwarded++;\n          break;\n        case 'project':\n          projectsFunded++;\n          break;\n        case 'community':\n          communityBeneficiaries++;\n          break;\n      }\n    });\n\n    return {\n      scholarshipsAwarded,\n      projectsFunded,\n      communityBeneficiaries,\n      totalImpactAmount,\n    };\n  }\n\n  /**\n   * Get fund analytics\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async getAnalytics(startDate?: Date, endDate?: Date): Promise<{\n    currentBalance: number;\n    totalContributions: number;\n    totalDistributions: number;\n    contributionTrend: Array<{ date: string; amount: number }>;\n    distributionTrend: Array<{ date: string; amount: number }>;\n    topDistributionTypes: Array<{ type: string; amount: number; count: number }>;\n  }> {\n    const allDistributions = Array.from(distributions.values());\n\n    let filtered = allDistributions;\n\n    if (startDate || endDate) {\n      const start = startDate || new Date(0);\n      const end = endDate || new Date();\n\n      filtered = allDistributions.filter((d) => {\n        const distDate = new Date(d.distributedAt);\n        return distDate >= start && distDate <= end;\n      });\n    }\n\n    // Calculate trends\n    const distributionTrend: Record<string, number> = {};\n    filtered.forEach((d) => {\n      const date = new Date(d.distributedAt).toISOString().split('T')[0];\n      if (d.status === 'completed') {\n        distributionTrend[date] = (distributionTrend[date] || 0) + d.amount;\n      }\n    });\n\n    // Top distribution types\n    const typeStats: Record<string, { amount: number; count: number }> = {};\n    filtered.forEach((d) => {\n      if (!typeStats[d.type]) {\n        typeStats[d.type] = { amount: 0, count: 0 };\n      }\n      typeStats[d.type].amount += d.amount;\n      typeStats[d.type].count++;\n    });\n\n    const topDistributionTypes = Object.entries(typeStats)\n      .map(([type, stats]) => ({\n        type,\n        amount: stats.amount,\n        count: stats.count,\n      }))\n      .sort((a, b) => b.amount - a.amount);\n\n    return {\n      currentBalance: fund.balance,\n      totalContributions: fund.totalContributions,\n      totalDistributions: fund.totalDistributions,\n      contributionTrend: [],\n      distributionTrend: Object.entries(distributionTrend)\n        .sort(([dateA], [dateB]) => dateA.localeCompare(dateB))\n        .map(([date, amount]) => ({ date, amount })),\n      topDistributionTypes,\n    };\n  }\n\n  /**\n   * Get fund audit trail\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  async getAuditTrail(\n    page: number = 1,\n    pageSize: number = 10\n  ): Promise<{\n    entries: Array<{\n      action: string;\n      amount?: number;\n      timestamp: Date;\n      details: string;\n    }>;\n    total: number;\n    page: number;\n    pageSize: number;\n    totalPages: number;\n  }> {\n    const entries: Array<{\n      action: string;\n      amount?: number;\n      timestamp: Date;\n      details: string;\n    }> = [];\n\n    // Add fund audit trail entries\n    fundAuditTrail.forEach((entry) => {\n      entries.push({\n        action: entry.action,\n        timestamp: entry.timestamp,\n        details: entry.details,\n      });\n    });\n\n    // Add distribution entries\n    Array.from(distributions.values()).forEach((d) => {\n      entries.push({\n        action: 'distribution_created',\n        amount: d.amount,\n        timestamp: d.distributedAt,\n        details: `${d.type} distribution created: ${d.description}`,\n      });\n\n      if (d.status === 'completed') {\n        entries.push({\n          action: 'distribution_completed',\n          amount: d.amount,\n          timestamp: d.distributedAt,\n          details: `${d.type} distribution completed`,\n        });\n      }\n    });\n\n    // Sort by timestamp (newest first)\n    entries.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\n\n    const total = entries.length;\n    const totalPages = Math.ceil(total / pageSize);\n    const start = (page - 1) * pageSize;\n    const end = start + pageSize;\n\n    return {\n      entries: entries.slice(start, end),\n      total,\n      page,\n      pageSize,\n      totalPages,\n    };\n  }\n\n  /**\n   * Validate distribution\n   * Requirements: 2.1, 2.2, 2.3\n   */\n  validateDistribution(data: FundDistributionRequest): {\n    valid: boolean;\n    errors: string[];\n  } {\n    const errors: string[] = [];\n\n    if (data.amount <= 0) {\n      errors.push('Distribution amount must be positive');\n    }\n\n    if (data.amount > fund.balance) {\n      errors.push(`Insufficient fund balance. Available: ${fund.balance}`);\n    }\n\n    const validTypes = ['scholarship', 'project', 'community'];\n    if (!validTypes.includes(data.type)) {\n      errors.push(`Invalid distribution type. Must be one of: ${validTypes.join(', ')}`);\n    }\n\n    if (!data.description || data.description.trim().length === 0) {\n      errors.push('Distribution description is required');\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors,\n    };\n  }\n}\n\nexport const fundService = new FundService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}