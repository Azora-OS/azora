{"version":3,"names":["cov_1klyrx6f62","actualCoverage","MarketplaceEscrowSystem","createEscrow","clientId","freelancerId","amount","f","escrow","s","id","generateId","currency","status","milestones","saveEscrow","fundEscrow","escrowId","paymentMethod","getEscrow","processPayment","updateEscrowStatus","notifyFreelancer","submitWork","workDeliverable","notifyClient","approveWork","releasePayment","updateReputationScores","disputeWork","reason","initiateArbitration","Date","now","method","event","data"],"sources":["marketplace-escrow.ts"],"sourcesContent":["/**\n * AZORA FORGE MARKETPLACE ESCROW SYSTEM\n * Secure freelance payment system with constitutional compliance\n */\n\ninterface EscrowContract {\n  id: string;\n  clientId: string;\n  freelancerId: string;\n  amount: number;\n  currency: string;\n  status: 'CREATED' | 'FUNDED' | 'WORK_SUBMITTED' | 'COMPLETED' | 'DISPUTED';\n  milestones: Milestone[];\n}\n\ninterface Milestone {\n  id: string;\n  description: string;\n  amount: number;\n  status: 'PENDING' | 'COMPLETED' | 'APPROVED' | 'DISPUTED';\n}\n\nexport class MarketplaceEscrowSystem {\n  \n  async createEscrow(clientId: string, freelancerId: string, amount: number): Promise<string> {\n    const escrow: EscrowContract = {\n      id: this.generateId(),\n      clientId,\n      freelancerId,\n      amount,\n      currency: 'AZR',\n      status: 'CREATED',\n      milestones: []\n    };\n    \n    await this.saveEscrow(escrow);\n    return escrow.id;\n  }\n\n  async fundEscrow(escrowId: string, paymentMethod: string): Promise<void> {\n    const escrow = await this.getEscrow(escrowId);\n    \n    await this.processPayment(escrow.clientId, escrow.amount, paymentMethod);\n    await this.updateEscrowStatus(escrowId, 'FUNDED');\n    \n    await this.notifyFreelancer(escrow.freelancerId, 'ESCROW_FUNDED');\n  }\n\n  async submitWork(escrowId: string, workDeliverable: any): Promise<void> {\n    await this.updateEscrowStatus(escrowId, 'WORK_SUBMITTED');\n    await this.notifyClient(escrowId, 'WORK_SUBMITTED', workDeliverable);\n  }\n\n  async approveWork(escrowId: string): Promise<void> {\n    const escrow = await this.getEscrow(escrowId);\n    \n    await this.releasePayment(escrow.freelancerId, escrow.amount);\n    await this.updateEscrowStatus(escrowId, 'COMPLETED');\n    \n    await this.updateReputationScores(escrow.clientId, escrow.freelancerId);\n  }\n\n  async disputeWork(escrowId: string, reason: string): Promise<void> {\n    await this.updateEscrowStatus(escrowId, 'DISPUTED');\n    await this.initiateArbitration(escrowId, reason);\n  }\n\n  private generateId(): string {\n    return 'escrow-' + Date.now();\n  }\n\n  private async saveEscrow(escrow: EscrowContract): Promise<void> {\n    // Implementation placeholder\n  }\n\n  private async getEscrow(escrowId: string): Promise<EscrowContract> {\n    // Implementation placeholder\n    return {} as EscrowContract;\n  }\n\n  private async processPayment(clientId: string, amount: number, method: string): Promise<void> {\n    // Implementation placeholder\n  }\n\n  private async updateEscrowStatus(escrowId: string, status: EscrowContract['status']): Promise<void> {\n    // Implementation placeholder\n  }\n\n  private async releasePayment(freelancerId: string, amount: number): Promise<void> {\n    // Implementation placeholder\n  }\n\n  private async notifyFreelancer(freelancerId: string, event: string): Promise<void> {\n    // Implementation placeholder\n  }\n\n  private async notifyClient(escrowId: string, event: string, data?: any): Promise<void> {\n    // Implementation placeholder\n  }\n\n  private async updateReputationScores(clientId: string, freelancerId: string): Promise<void> {\n    // Implementation placeholder\n  }\n\n  private async initiateArbitration(escrowId: string, reason: string): Promise<void> {\n    // Implementation placeholder\n  }\n}"],"mappings":"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","ignoreList":[]}