72bbd289564bc2c60051eca85b187f44
/* istanbul ignore next */
function cov_dv76rrpxj() {
  var path = "/workspaces/azora/services/chaos-monkey/src/chaos-engine.ts";
  var hash = "becca09b117ba856624b26830468b64731a213b4";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/chaos-monkey/src/chaos-engine.ts",
    statementMap: {
      "0": {
        start: {
          line: 11,
          column: 8
        },
        end: {
          line: 11,
          column: 16
        }
      },
      "1": {
        start: {
          line: 12,
          column: 8
        },
        end: {
          line: 12,
          column: 29
        }
      },
      "2": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 38
        }
      },
      "3": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 14,
          column: 31
        }
      },
      "4": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 23,
          column: 9
        }
      },
      "5": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 56
        }
      },
      "6": {
        start: {
          line: 26,
          column: 30
        },
        end: {
          line: 26,
          column: 55
        }
      },
      "7": {
        start: {
          line: 29,
          column: 28
        },
        end: {
          line: 29,
          column: 54
        }
      },
      "8": {
        start: {
          line: 32,
          column: 34
        },
        end: {
          line: 40,
          column: 9
        }
      },
      "9": {
        start: {
          line: 42,
          column: 8
        },
        end: {
          line: 42,
          column: 86
        }
      },
      "10": {
        start: {
          line: 45,
          column: 23
        },
        end: {
          line: 45,
          column: 53
        }
      },
      "11": {
        start: {
          line: 48,
          column: 8
        },
        end: {
          line: 48,
          column: 39
        }
      },
      "12": {
        start: {
          line: 49,
          column: 8
        },
        end: {
          line: 49,
          column: 44
        }
      },
      "13": {
        start: {
          line: 51,
          column: 8
        },
        end: {
          line: 51,
          column: 22
        }
      },
      "14": {
        start: {
          line: 58,
          column: 8
        },
        end: {
          line: 58,
          column: 47
        }
      },
      "15": {
        start: {
          line: 59,
          column: 26
        },
        end: {
          line: 59,
          column: 36
        }
      },
      "16": {
        start: {
          line: 61,
          column: 8
        },
        end: {
          line: 107,
          column: 9
        }
      },
      "17": {
        start: {
          line: 62,
          column: 12
        },
        end: {
          line: 80,
          column: 13
        }
      },
      "18": {
        start: {
          line: 64,
          column: 20
        },
        end: {
          line: 64,
          column: 51
        }
      },
      "19": {
        start: {
          line: 65,
          column: 20
        },
        end: {
          line: 65,
          column: 26
        }
      },
      "20": {
        start: {
          line: 67,
          column: 20
        },
        end: {
          line: 67,
          column: 52
        }
      },
      "21": {
        start: {
          line: 68,
          column: 20
        },
        end: {
          line: 68,
          column: 26
        }
      },
      "22": {
        start: {
          line: 70,
          column: 20
        },
        end: {
          line: 70,
          column: 57
        }
      },
      "23": {
        start: {
          line: 71,
          column: 20
        },
        end: {
          line: 71,
          column: 26
        }
      },
      "24": {
        start: {
          line: 73,
          column: 20
        },
        end: {
          line: 73,
          column: 57
        }
      },
      "25": {
        start: {
          line: 74,
          column: 20
        },
        end: {
          line: 74,
          column: 26
        }
      },
      "26": {
        start: {
          line: 76,
          column: 20
        },
        end: {
          line: 76,
          column: 55
        }
      },
      "27": {
        start: {
          line: 77,
          column: 20
        },
        end: {
          line: 77,
          column: 26
        }
      },
      "28": {
        start: {
          line: 79,
          column: 20
        },
        end: {
          line: 79,
          column: 75
        }
      },
      "29": {
        start: {
          line: 82,
          column: 33
        },
        end: {
          line: 82,
          column: 55
        }
      },
      "30": {
        start: {
          line: 84,
          column: 12
        },
        end: {
          line: 93,
          column: 14
        }
      },
      "31": {
        start: {
          line: 95,
          column: 12
        },
        end: {
          line: 104,
          column: 14
        }
      },
      "32": {
        start: {
          line: 106,
          column: 12
        },
        end: {
          line: 106,
          column: 47
        }
      },
      "33": {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 114,
          column: 67
        }
      },
      "34": {
        start: {
          line: 117,
          column: 8
        },
        end: {
          line: 117,
          column: 41
        }
      },
      "35": {
        start: {
          line: 124,
          column: 26
        },
        end: {
          line: 125,
          column: 59
        }
      },
      "36": {
        start: {
          line: 126,
          column: 8
        },
        end: {
          line: 126,
          column: 85
        }
      },
      "37": {
        start: {
          line: 127,
          column: 8
        },
        end: {
          line: 127,
          column: 36
        }
      },
      "38": {
        start: {
          line: 134,
          column: 8
        },
        end: {
          line: 134,
          column: 76
        }
      },
      "39": {
        start: {
          line: 136,
          column: 8
        },
        end: {
          line: 136,
          column: 41
        }
      },
      "40": {
        start: {
          line: 143,
          column: 8
        },
        end: {
          line: 143,
          column: 75
        }
      },
      "41": {
        start: {
          line: 145,
          column: 8
        },
        end: {
          line: 145,
          column: 41
        }
      },
      "42": {
        start: {
          line: 152,
          column: 8
        },
        end: {
          line: 152,
          column: 72
        }
      },
      "43": {
        start: {
          line: 154,
          column: 8
        },
        end: {
          line: 154,
          column: 41
        }
      },
      "44": {
        start: {
          line: 161,
          column: 33
        },
        end: {
          line: 163,
          column: 9
        }
      },
      "45": {
        start: {
          line: 162,
          column: 23
        },
        end: {
          line: 162,
          column: 69
        }
      },
      "46": {
        start: {
          line: 164,
          column: 8
        },
        end: {
          line: 164,
          column: 85
        }
      },
      "47": {
        start: {
          line: 171,
          column: 25
        },
        end: {
          line: 171,
          column: 51
        }
      },
      "48": {
        start: {
          line: 172,
          column: 8
        },
        end: {
          line: 172,
          column: 69
        }
      },
      "49": {
        start: {
          line: 179,
          column: 21
        },
        end: {
          line: 180,
          column: 62
        }
      },
      "50": {
        start: {
          line: 181,
          column: 8
        },
        end: {
          line: 181,
          column: 44
        }
      },
      "51": {
        start: {
          line: 189,
          column: 8
        },
        end: {
          line: 189,
          column: 35
        }
      },
      "52": {
        start: {
          line: 196,
          column: 36
        },
        end: {
          line: 196,
          column: 38
        }
      },
      "53": {
        start: {
          line: 198,
          column: 8
        },
        end: {
          line: 202,
          column: 9
        }
      },
      "54": {
        start: {
          line: 199,
          column: 12
        },
        end: {
          line: 199,
          column: 99
        }
      },
      "55": {
        start: {
          line: 200,
          column: 15
        },
        end: {
          line: 202,
          column: 9
        }
      },
      "56": {
        start: {
          line: 201,
          column: 12
        },
        end: {
          line: 201,
          column: 102
        }
      },
      "57": {
        start: {
          line: 204,
          column: 8
        },
        end: {
          line: 204,
          column: 87
        }
      },
      "58": {
        start: {
          line: 206,
          column: 8
        },
        end: {
          line: 206,
          column: 25
        }
      },
      "59": {
        start: {
          line: 213,
          column: 8
        },
        end: {
          line: 213,
          column: 33
        }
      },
      "60": {
        start: {
          line: 220,
          column: 8
        },
        end: {
          line: 220,
          column: 54
        }
      },
      "61": {
        start: {
          line: 224,
          column: 8
        },
        end: {
          line: 224,
          column: 63
        }
      },
      "62": {
        start: {
          line: 224,
          column: 38
        },
        end: {
          line: 224,
          column: 61
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 10,
            column: 4
          },
          end: {
            line: 10,
            column: 5
          }
        },
        loc: {
          start: {
            line: 10,
            column: 37
          },
          end: {
            line: 15,
            column: 5
          }
        },
        line: 10
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 20,
            column: 4
          },
          end: {
            line: 20,
            column: 5
          }
        },
        loc: {
          start: {
            line: 20,
            column: 46
          },
          end: {
            line: 52,
            column: 5
          }
        },
        line: 20
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 57,
            column: 4
          },
          end: {
            line: 57,
            column: 5
          }
        },
        loc: {
          start: {
            line: 57,
            column: 72
          },
          end: {
            line: 108,
            column: 5
          }
        },
        line: 57
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 113,
            column: 5
          }
        },
        loc: {
          start: {
            line: 113,
            column: 65
          },
          end: {
            line: 118,
            column: 5
          }
        },
        line: 113
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 123,
            column: 4
          },
          end: {
            line: 123,
            column: 5
          }
        },
        loc: {
          start: {
            line: 123,
            column: 66
          },
          end: {
            line: 128,
            column: 5
          }
        },
        line: 123
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 133,
            column: 4
          },
          end: {
            line: 133,
            column: 5
          }
        },
        loc: {
          start: {
            line: 133,
            column: 71
          },
          end: {
            line: 137,
            column: 5
          }
        },
        line: 133
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 142,
            column: 4
          },
          end: {
            line: 142,
            column: 5
          }
        },
        loc: {
          start: {
            line: 142,
            column: 71
          },
          end: {
            line: 146,
            column: 5
          }
        },
        line: 142
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 151,
            column: 4
          },
          end: {
            line: 151,
            column: 5
          }
        },
        loc: {
          start: {
            line: 151,
            column: 69
          },
          end: {
            line: 155,
            column: 5
          }
        },
        line: 151
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 160,
            column: 4
          },
          end: {
            line: 160,
            column: 5
          }
        },
        loc: {
          start: {
            line: 160,
            column: 41
          },
          end: {
            line: 165,
            column: 5
          }
        },
        line: 160
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 162,
            column: 12
          },
          end: {
            line: 162,
            column: 13
          }
        },
        loc: {
          start: {
            line: 162,
            column: 23
          },
          end: {
            line: 162,
            column: 69
          }
        },
        line: 162
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 170,
            column: 4
          },
          end: {
            line: 170,
            column: 5
          }
        },
        loc: {
          start: {
            line: 170,
            column: 47
          },
          end: {
            line: 173,
            column: 5
          }
        },
        line: 170
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 178,
            column: 4
          },
          end: {
            line: 178,
            column: 5
          }
        },
        loc: {
          start: {
            line: 178,
            column: 40
          },
          end: {
            line: 182,
            column: 5
          }
        },
        line: 178
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 187,
            column: 4
          },
          end: {
            line: 187,
            column: 5
          }
        },
        loc: {
          start: {
            line: 187,
            column: 41
          },
          end: {
            line: 190,
            column: 5
          }
        },
        line: 187
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 195,
            column: 4
          },
          end: {
            line: 195,
            column: 5
          }
        },
        loc: {
          start: {
            line: 195,
            column: 80
          },
          end: {
            line: 207,
            column: 5
          }
        },
        line: 195
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 212,
            column: 4
          },
          end: {
            line: 212,
            column: 5
          }
        },
        loc: {
          start: {
            line: 212,
            column: 39
          },
          end: {
            line: 214,
            column: 5
          }
        },
        line: 212
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 219,
            column: 4
          },
          end: {
            line: 219,
            column: 5
          }
        },
        loc: {
          start: {
            line: 219,
            column: 43
          },
          end: {
            line: 221,
            column: 5
          }
        },
        line: 219
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 223,
            column: 4
          },
          end: {
            line: 223,
            column: 5
          }
        },
        loc: {
          start: {
            line: 223,
            column: 45
          },
          end: {
            line: 225,
            column: 5
          }
        },
        line: 223
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 224,
            column: 27
          },
          end: {
            line: 224,
            column: 28
          }
        },
        loc: {
          start: {
            line: 224,
            column: 38
          },
          end: {
            line: 224,
            column: 61
          }
        },
        line: 224
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 23,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 23,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 21
      },
      "1": {
        loc: {
          start: {
            line: 62,
            column: 12
          },
          end: {
            line: 80,
            column: 13
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 63,
            column: 16
          },
          end: {
            line: 65,
            column: 26
          }
        }, {
          start: {
            line: 66,
            column: 16
          },
          end: {
            line: 68,
            column: 26
          }
        }, {
          start: {
            line: 69,
            column: 16
          },
          end: {
            line: 71,
            column: 26
          }
        }, {
          start: {
            line: 72,
            column: 16
          },
          end: {
            line: 74,
            column: 26
          }
        }, {
          start: {
            line: 75,
            column: 16
          },
          end: {
            line: 77,
            column: 26
          }
        }, {
          start: {
            line: 78,
            column: 16
          },
          end: {
            line: 79,
            column: 75
          }
        }],
        line: 62
      },
      "2": {
        loc: {
          start: {
            line: 124,
            column: 26
          },
          end: {
            line: 125,
            column: 59
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 124,
            column: 61
          },
          end: {
            line: 124,
            column: 65
          }
        }, {
          start: {
            line: 125,
            column: 12
          },
          end: {
            line: 125,
            column: 59
          }
        }],
        line: 124
      },
      "3": {
        loc: {
          start: {
            line: 125,
            column: 12
          },
          end: {
            line: 125,
            column: 59
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 125,
            column: 49
          },
          end: {
            line: 125,
            column: 53
          }
        }, {
          start: {
            line: 125,
            column: 56
          },
          end: {
            line: 125,
            column: 59
          }
        }],
        line: 125
      },
      "4": {
        loc: {
          start: {
            line: 179,
            column: 21
          },
          end: {
            line: 180,
            column: 62
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 179,
            column: 56
          },
          end: {
            line: 179,
            column: 61
          }
        }, {
          start: {
            line: 180,
            column: 12
          },
          end: {
            line: 180,
            column: 62
          }
        }],
        line: 179
      },
      "5": {
        loc: {
          start: {
            line: 180,
            column: 12
          },
          end: {
            line: 180,
            column: 62
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 180,
            column: 49
          },
          end: {
            line: 180,
            column: 54
          }
        }, {
          start: {
            line: 180,
            column: 57
          },
          end: {
            line: 180,
            column: 62
          }
        }],
        line: 180
      },
      "6": {
        loc: {
          start: {
            line: 198,
            column: 8
          },
          end: {
            line: 202,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 198,
            column: 8
          },
          end: {
            line: 202,
            column: 9
          }
        }, {
          start: {
            line: 200,
            column: 15
          },
          end: {
            line: 202,
            column: 9
          }
        }],
        line: 198
      },
      "7": {
        loc: {
          start: {
            line: 200,
            column: 15
          },
          end: {
            line: 202,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 200,
            column: 15
          },
          end: {
            line: 202,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 200
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0, 0, 0, 0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "becca09b117ba856624b26830468b64731a213b4"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_dv76rrpxj = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_dv76rrpxj();
import { EventEmitter } from 'events';
import { v4 as uuidv4 } from 'uuid';
import { FailureType } from './failure-types';
export class ChaosEngine extends EventEmitter {
  constructor(config) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[0]++;
    cov_dv76rrpxj().s[0]++;
    super();
    /* istanbul ignore next */
    cov_dv76rrpxj().s[1]++;
    this.config = config;
    /* istanbul ignore next */
    cov_dv76rrpxj().s[2]++;
    this.activeEvents = new Map();
    /* istanbul ignore next */
    cov_dv76rrpxj().s[3]++;
    this.chaosHistory = [];
  }

  /**
   * Inject a random failure into the system
   */
  async injectChaos() {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[1]++;
    cov_dv76rrpxj().s[4]++;
    if (!this.config.enabled) {
      /* istanbul ignore next */
      cov_dv76rrpxj().b[0][0]++;
      cov_dv76rrpxj().s[5]++;
      throw new Error('Chaos Monkey is disabled');
    } else
    /* istanbul ignore next */
    {
      cov_dv76rrpxj().b[0][1]++;
    }

    // Select random target service
    const targetService =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[6]++, this.selectRandomTarget());

    // Select random failure type
    const failureType =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[7]++, this.selectRandomFailure());

    // Create chaos event
    const event =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[8]++, {
      id: uuidv4(),
      type: failureType,
      targetService,
      timestamp: new Date().toISOString(),
      duration: this.calculateDuration(),
      intensity: this.config.intensity,
      metadata: {}
    });
    /* istanbul ignore next */
    cov_dv76rrpxj().s[9]++;
    console.log(`ðŸµ ChaosMonkey: Injecting ${failureType} into ${targetService}`);

    // Execute the chaos
    const result =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[10]++, await this.executeChaos(event));

    // Record to history
    /* istanbul ignore next */
    cov_dv76rrpxj().s[11]++;
    this.chaosHistory.push(result);
    /* istanbul ignore next */
    cov_dv76rrpxj().s[12]++;
    this.emit('chaos-injected', result);
    /* istanbul ignore next */
    cov_dv76rrpxj().s[13]++;
    return result;
  }

  /**
   * Execute specific chaos event
   */
  async executeChaos(event) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[2]++;
    cov_dv76rrpxj().s[14]++;
    this.activeEvents.set(event.id, event);
    const startTime =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[15]++, Date.now());
    /* istanbul ignore next */
    cov_dv76rrpxj().s[16]++;
    try {
      /* istanbul ignore next */
      cov_dv76rrpxj().s[17]++;
      switch (event.type) {
        case FailureType.SERVICE_CRASH:
          /* istanbul ignore next */
          cov_dv76rrpxj().b[1][0]++;
          cov_dv76rrpxj().s[18]++;
          await this.crashService(event);
          /* istanbul ignore next */
          cov_dv76rrpxj().s[19]++;
          break;
        case FailureType.NETWORK_LATENCY:
          /* istanbul ignore next */
          cov_dv76rrpxj().b[1][1]++;
          cov_dv76rrpxj().s[20]++;
          await this.injectLatency(event);
          /* istanbul ignore next */
          cov_dv76rrpxj().s[21]++;
          break;
        case FailureType.DATABASE_DISCONNECT:
          /* istanbul ignore next */
          cov_dv76rrpxj().b[1][2]++;
          cov_dv76rrpxj().s[22]++;
          await this.disconnectDatabase(event);
          /* istanbul ignore next */
          cov_dv76rrpxj().s[23]++;
          break;
        case FailureType.MEMORY_LEAK:
          /* istanbul ignore next */
          cov_dv76rrpxj().b[1][3]++;
          cov_dv76rrpxj().s[24]++;
          await this.simulateMemoryLeak(event);
          /* istanbul ignore next */
          cov_dv76rrpxj().s[25]++;
          break;
        case FailureType.CPU_SPIKE:
          /* istanbul ignore next */
          cov_dv76rrpxj().b[1][4]++;
          cov_dv76rrpxj().s[26]++;
          await this.simulateCPUSpike(event);
          /* istanbul ignore next */
          cov_dv76rrpxj().s[27]++;
          break;
        default:
          /* istanbul ignore next */
          cov_dv76rrpxj().b[1][5]++;
          cov_dv76rrpxj().s[28]++;
          throw new Error(`Unknown failure type: ${event.type}`);
      }
      const recoveryTime =
      /* istanbul ignore next */
      (cov_dv76rrpxj().s[29]++, Date.now() - startTime);
      /* istanbul ignore next */
      cov_dv76rrpxj().s[30]++;
      return {
        eventId: event.id,
        success: true,
        impact: {
          servicesAffected: [event.targetService],
          errorRate: this.calculateErrorRate(),
          recoveryTime
        },
        learnings: this.extractLearnings(event, recoveryTime)
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_dv76rrpxj().s[31]++;
      return {
        eventId: event.id,
        success: false,
        impact: {
          servicesAffected: [event.targetService],
          errorRate: 0,
          recoveryTime: Date.now() - startTime
        },
        learnings: [`Chaos injection failed: ${error.message}`]
      };
    } finally {
      /* istanbul ignore next */
      cov_dv76rrpxj().s[32]++;
      this.activeEvents.delete(event.id);
    }
  }

  /**
   * Crash a service (simulated)
   */
  async crashService(event) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[3]++;
    cov_dv76rrpxj().s[33]++;
    console.log(`ðŸ’¥ Crashing service: ${event.targetService}`);
    // In production, this would send a kill signal to the service
    // For now, we simulate by logging
    /* istanbul ignore next */
    cov_dv76rrpxj().s[34]++;
    await this.sleep(event.duration);
  }

  /**
   * Inject network latency
   */
  async injectLatency(event) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[4]++;
    const latencyMs =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[35]++, this.config.intensity === 'high' ?
    /* istanbul ignore next */
    (cov_dv76rrpxj().b[2][0]++, 5000) :
    /* istanbul ignore next */
    (cov_dv76rrpxj().b[2][1]++, this.config.intensity === 'medium' ?
    /* istanbul ignore next */
    (cov_dv76rrpxj().b[3][0]++, 2000) :
    /* istanbul ignore next */
    (cov_dv76rrpxj().b[3][1]++, 500)));
    /* istanbul ignore next */
    cov_dv76rrpxj().s[36]++;
    console.log(`ðŸŒ Injecting ${latencyMs}ms latency to ${event.targetService}`);
    /* istanbul ignore next */
    cov_dv76rrpxj().s[37]++;
    await this.sleep(latencyMs);
  }

  /**
   * Disconnect database
   */
  async disconnectDatabase(event) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[5]++;
    cov_dv76rrpxj().s[38]++;
    console.log(`ðŸ”Œ Disconnecting database for ${event.targetService}`);
    // In production, this would close DB connections
    /* istanbul ignore next */
    cov_dv76rrpxj().s[39]++;
    await this.sleep(event.duration);
  }

  /**
   * Simulate memory leak
   */
  async simulateMemoryLeak(event) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[6]++;
    cov_dv76rrpxj().s[40]++;
    console.log(`ðŸ’¾ Simulating memory leak in ${event.targetService}`);
    // In production, this would gradually allocate memory
    /* istanbul ignore next */
    cov_dv76rrpxj().s[41]++;
    await this.sleep(event.duration);
  }

  /**
   * Simulate CPU spike
   */
  async simulateCPUSpike(event) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[7]++;
    cov_dv76rrpxj().s[42]++;
    console.log(`âš¡ Simulating CPU spike in ${event.targetService}`);
    // In production, this would run CPU-intensive operations
    /* istanbul ignore next */
    cov_dv76rrpxj().s[43]++;
    await this.sleep(event.duration);
  }

  /**
   * Select random target service
   */
  selectRandomTarget() {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[8]++;
    const availableTargets =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[44]++, this.config.targetServices.filter(service => {
      /* istanbul ignore next */
      cov_dv76rrpxj().f[9]++;
      cov_dv76rrpxj().s[45]++;
      return !this.config.excludeServices.includes(service);
    }));
    /* istanbul ignore next */
    cov_dv76rrpxj().s[46]++;
    return availableTargets[Math.floor(Math.random() * availableTargets.length)];
  }

  /**
   * Select random failure type
   */
  selectRandomFailure() {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[10]++;
    const failures =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[47]++, Object.values(FailureType));
    /* istanbul ignore next */
    cov_dv76rrpxj().s[48]++;
    return failures[Math.floor(Math.random() * failures.length)];
  }

  /**
   * Calculate chaos duration based on intensity
   */
  calculateDuration() {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[11]++;
    const base =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[49]++, this.config.intensity === 'high' ?
    /* istanbul ignore next */
    (cov_dv76rrpxj().b[4][0]++, 60000) :
    /* istanbul ignore next */
    (cov_dv76rrpxj().b[4][1]++, this.config.intensity === 'medium' ?
    /* istanbul ignore next */
    (cov_dv76rrpxj().b[5][0]++, 30000) :
    /* istanbul ignore next */
    (cov_dv76rrpxj().b[5][1]++, 10000)));
    /* istanbul ignore next */
    cov_dv76rrpxj().s[50]++;
    return base + Math.random() * 10000;
  }

  /**
   * Calculate current error rate
   */
  calculateErrorRate() {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[12]++;
    cov_dv76rrpxj().s[51]++;
    // In production, this would query actual metrics
    return Math.random() * 0.1; // 0-10% error rate
  }

  /**
   * Extract learnings from chaos event
   */
  extractLearnings(event, recoveryTime) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[13]++;
    const learnings =
    /* istanbul ignore next */
    (cov_dv76rrpxj().s[52]++, []);
    /* istanbul ignore next */
    cov_dv76rrpxj().s[53]++;
    if (recoveryTime < 5000) {
      /* istanbul ignore next */
      cov_dv76rrpxj().b[6][0]++;
      cov_dv76rrpxj().s[54]++;
      learnings.push(`Fast recovery: ${event.targetService} recovered in ${recoveryTime}ms`);
    } else {
      /* istanbul ignore next */
      cov_dv76rrpxj().b[6][1]++;
      cov_dv76rrpxj().s[55]++;
      if (recoveryTime > 30000) {
        /* istanbul ignore next */
        cov_dv76rrpxj().b[7][0]++;
        cov_dv76rrpxj().s[56]++;
        learnings.push(`Slow recovery: ${event.targetService} took ${recoveryTime}ms to recover`);
      } else
      /* istanbul ignore next */
      {
        cov_dv76rrpxj().b[7][1]++;
      }
    }
    /* istanbul ignore next */
    cov_dv76rrpxj().s[57]++;
    learnings.push(`${event.type} handled successfully by ${event.targetService}`);
    /* istanbul ignore next */
    cov_dv76rrpxj().s[58]++;
    return learnings;
  }

  /**
   * Get chaos history
   */
  getHistory() {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[14]++;
    cov_dv76rrpxj().s[59]++;
    return this.chaosHistory;
  }

  /**
   * Get active chaos events
   */
  getActiveEvents() {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[15]++;
    cov_dv76rrpxj().s[60]++;
    return Array.from(this.activeEvents.values());
  }
  sleep(ms) {
    /* istanbul ignore next */
    cov_dv76rrpxj().f[16]++;
    cov_dv76rrpxj().s[61]++;
    return new Promise(resolve => {
      /* istanbul ignore next */
      cov_dv76rrpxj().f[17]++;
      cov_dv76rrpxj().s[62]++;
      return setTimeout(resolve, ms);
    });
  }
}
export default ChaosEngine;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfZHY3NnJycHhqIiwiYWN0dWFsQ292ZXJhZ2UiLCJFdmVudEVtaXR0ZXIiLCJ2NCIsInV1aWR2NCIsIkZhaWx1cmVUeXBlIiwiQ2hhb3NFbmdpbmUiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImYiLCJzIiwiYWN0aXZlRXZlbnRzIiwiTWFwIiwiY2hhb3NIaXN0b3J5IiwiaW5qZWN0Q2hhb3MiLCJlbmFibGVkIiwiYiIsIkVycm9yIiwidGFyZ2V0U2VydmljZSIsInNlbGVjdFJhbmRvbVRhcmdldCIsImZhaWx1cmVUeXBlIiwic2VsZWN0UmFuZG9tRmFpbHVyZSIsImV2ZW50IiwiaWQiLCJ0eXBlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZHVyYXRpb24iLCJjYWxjdWxhdGVEdXJhdGlvbiIsImludGVuc2l0eSIsIm1ldGFkYXRhIiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImV4ZWN1dGVDaGFvcyIsInB1c2giLCJlbWl0Iiwic2V0Iiwic3RhcnRUaW1lIiwibm93IiwiU0VSVklDRV9DUkFTSCIsImNyYXNoU2VydmljZSIsIk5FVFdPUktfTEFURU5DWSIsImluamVjdExhdGVuY3kiLCJEQVRBQkFTRV9ESVNDT05ORUNUIiwiZGlzY29ubmVjdERhdGFiYXNlIiwiTUVNT1JZX0xFQUsiLCJzaW11bGF0ZU1lbW9yeUxlYWsiLCJDUFVfU1BJS0UiLCJzaW11bGF0ZUNQVVNwaWtlIiwicmVjb3ZlcnlUaW1lIiwiZXZlbnRJZCIsInN1Y2Nlc3MiLCJpbXBhY3QiLCJzZXJ2aWNlc0FmZmVjdGVkIiwiZXJyb3JSYXRlIiwiY2FsY3VsYXRlRXJyb3JSYXRlIiwibGVhcm5pbmdzIiwiZXh0cmFjdExlYXJuaW5ncyIsImVycm9yIiwibWVzc2FnZSIsImRlbGV0ZSIsInNsZWVwIiwibGF0ZW5jeU1zIiwiYXZhaWxhYmxlVGFyZ2V0cyIsInRhcmdldFNlcnZpY2VzIiwiZmlsdGVyIiwic2VydmljZSIsImV4Y2x1ZGVTZXJ2aWNlcyIsImluY2x1ZGVzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwiZmFpbHVyZXMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJiYXNlIiwiZ2V0SGlzdG9yeSIsImdldEFjdGl2ZUV2ZW50cyIsIkFycmF5IiwiZnJvbSIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Il0sInNvdXJjZXMiOlsiY2hhb3MtZW5naW5lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IEZhaWx1cmVUeXBlLCBDaGFvc0V2ZW50LCBDaGFvc0NvbmZpZywgQ2hhb3NSZXN1bHQgfSBmcm9tICcuL2ZhaWx1cmUtdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhb3NFbmdpbmUgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIHByaXZhdGUgY29uZmlnOiBDaGFvc0NvbmZpZztcbiAgICBwcml2YXRlIGFjdGl2ZUV2ZW50czogTWFwPHN0cmluZywgQ2hhb3NFdmVudD47XG4gICAgcHJpdmF0ZSBjaGFvc0hpc3Rvcnk6IENoYW9zUmVzdWx0W107XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IENoYW9zQ29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmFjdGl2ZUV2ZW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5jaGFvc0hpc3RvcnkgPSBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbmplY3QgYSByYW5kb20gZmFpbHVyZSBpbnRvIHRoZSBzeXN0ZW1cbiAgICAgKi9cbiAgICBhc3luYyBpbmplY3RDaGFvcygpOiBQcm9taXNlPENoYW9zUmVzdWx0PiB7XG4gICAgICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGFvcyBNb25rZXkgaXMgZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNlbGVjdCByYW5kb20gdGFyZ2V0IHNlcnZpY2VcbiAgICAgICAgY29uc3QgdGFyZ2V0U2VydmljZSA9IHRoaXMuc2VsZWN0UmFuZG9tVGFyZ2V0KCk7XG5cbiAgICAgICAgLy8gU2VsZWN0IHJhbmRvbSBmYWlsdXJlIHR5cGVcbiAgICAgICAgY29uc3QgZmFpbHVyZVR5cGUgPSB0aGlzLnNlbGVjdFJhbmRvbUZhaWx1cmUoKTtcblxuICAgICAgICAvLyBDcmVhdGUgY2hhb3MgZXZlbnRcbiAgICAgICAgY29uc3QgZXZlbnQ6IENoYW9zRXZlbnQgPSB7XG4gICAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgICB0eXBlOiBmYWlsdXJlVHlwZSxcbiAgICAgICAgICAgIHRhcmdldFNlcnZpY2UsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmNhbGN1bGF0ZUR1cmF0aW9uKCksXG4gICAgICAgICAgICBpbnRlbnNpdHk6IHRoaXMuY29uZmlnLmludGVuc2l0eSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5C1IENoYW9zTW9ua2V5OiBJbmplY3RpbmcgJHtmYWlsdXJlVHlwZX0gaW50byAke3RhcmdldFNlcnZpY2V9YCk7XG5cbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2hhb3NcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlQ2hhb3MoZXZlbnQpO1xuXG4gICAgICAgIC8vIFJlY29yZCB0byBoaXN0b3J5XG4gICAgICAgIHRoaXMuY2hhb3NIaXN0b3J5LnB1c2gocmVzdWx0KTtcbiAgICAgICAgdGhpcy5lbWl0KCdjaGFvcy1pbmplY3RlZCcsIHJlc3VsdCk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIHNwZWNpZmljIGNoYW9zIGV2ZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQ2hhb3MoZXZlbnQ6IENoYW9zRXZlbnQpOiBQcm9taXNlPENoYW9zUmVzdWx0PiB7XG4gICAgICAgIHRoaXMuYWN0aXZlRXZlbnRzLnNldChldmVudC5pZCwgZXZlbnQpO1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEZhaWx1cmVUeXBlLlNFUlZJQ0VfQ1JBU0g6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3Jhc2hTZXJ2aWNlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBGYWlsdXJlVHlwZS5ORVRXT1JLX0xBVEVOQ1k6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5qZWN0TGF0ZW5jeShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRmFpbHVyZVR5cGUuREFUQUJBU0VfRElTQ09OTkVDVDpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXNjb25uZWN0RGF0YWJhc2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEZhaWx1cmVUeXBlLk1FTU9SWV9MRUFLOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNpbXVsYXRlTWVtb3J5TGVhayhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRmFpbHVyZVR5cGUuQ1BVX1NQSUtFOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNpbXVsYXRlQ1BVU3Bpa2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZmFpbHVyZSB0eXBlOiAke2V2ZW50LnR5cGV9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlY292ZXJ5VGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZXZlbnRJZDogZXZlbnQuaWQsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbXBhY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZXNBZmZlY3RlZDogW2V2ZW50LnRhcmdldFNlcnZpY2VdLFxuICAgICAgICAgICAgICAgICAgICBlcnJvclJhdGU6IHRoaXMuY2FsY3VsYXRlRXJyb3JSYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHJlY292ZXJ5VGltZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbGVhcm5pbmdzOiB0aGlzLmV4dHJhY3RMZWFybmluZ3MoZXZlbnQsIHJlY292ZXJ5VGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGV2ZW50SWQ6IGV2ZW50LmlkLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGltcGFjdDoge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlc0FmZmVjdGVkOiBbZXZlbnQudGFyZ2V0U2VydmljZV0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yUmF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcnlUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsZWFybmluZ3M6IFtgQ2hhb3MgaW5qZWN0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWBdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVFdmVudHMuZGVsZXRlKGV2ZW50LmlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyYXNoIGEgc2VydmljZSAoc2ltdWxhdGVkKVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY3Jhc2hTZXJ2aWNlKGV2ZW50OiBDaGFvc0V2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5KlIENyYXNoaW5nIHNlcnZpY2U6ICR7ZXZlbnQudGFyZ2V0U2VydmljZX1gKTtcbiAgICAgICAgLy8gSW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZCBzZW5kIGEga2lsbCBzaWduYWwgdG8gdGhlIHNlcnZpY2VcbiAgICAgICAgLy8gRm9yIG5vdywgd2Ugc2ltdWxhdGUgYnkgbG9nZ2luZ1xuICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKGV2ZW50LmR1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbmplY3QgbmV0d29yayBsYXRlbmN5XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbmplY3RMYXRlbmN5KGV2ZW50OiBDaGFvc0V2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGxhdGVuY3lNcyA9IHRoaXMuY29uZmlnLmludGVuc2l0eSA9PT0gJ2hpZ2gnID8gNTAwMCA6XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5pbnRlbnNpdHkgPT09ICdtZWRpdW0nID8gMjAwMCA6IDUwMDtcbiAgICAgICAgY29uc29sZS5sb2coYPCfkIwgSW5qZWN0aW5nICR7bGF0ZW5jeU1zfW1zIGxhdGVuY3kgdG8gJHtldmVudC50YXJnZXRTZXJ2aWNlfWApO1xuICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKGxhdGVuY3lNcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCBkYXRhYmFzZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZGlzY29ubmVjdERhdGFiYXNlKGV2ZW50OiBDaGFvc0V2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SMIERpc2Nvbm5lY3RpbmcgZGF0YWJhc2UgZm9yICR7ZXZlbnQudGFyZ2V0U2VydmljZX1gKTtcbiAgICAgICAgLy8gSW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZCBjbG9zZSBEQiBjb25uZWN0aW9uc1xuICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKGV2ZW50LmR1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaW11bGF0ZSBtZW1vcnkgbGVha1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc2ltdWxhdGVNZW1vcnlMZWFrKGV2ZW50OiBDaGFvc0V2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5K+IFNpbXVsYXRpbmcgbWVtb3J5IGxlYWsgaW4gJHtldmVudC50YXJnZXRTZXJ2aWNlfWApO1xuICAgICAgICAvLyBJbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIGdyYWR1YWxseSBhbGxvY2F0ZSBtZW1vcnlcbiAgICAgICAgYXdhaXQgdGhpcy5zbGVlcChldmVudC5kdXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2ltdWxhdGUgQ1BVIHNwaWtlXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBzaW11bGF0ZUNQVVNwaWtlKGV2ZW50OiBDaGFvc0V2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDimqEgU2ltdWxhdGluZyBDUFUgc3Bpa2UgaW4gJHtldmVudC50YXJnZXRTZXJ2aWNlfWApO1xuICAgICAgICAvLyBJbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIHJ1biBDUFUtaW50ZW5zaXZlIG9wZXJhdGlvbnNcbiAgICAgICAgYXdhaXQgdGhpcy5zbGVlcChldmVudC5kdXJhdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0IHJhbmRvbSB0YXJnZXQgc2VydmljZVxuICAgICAqL1xuICAgIHByaXZhdGUgc2VsZWN0UmFuZG9tVGFyZ2V0KCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVRhcmdldHMgPSB0aGlzLmNvbmZpZy50YXJnZXRTZXJ2aWNlcy5maWx0ZXIoXG4gICAgICAgICAgICBzZXJ2aWNlID0+ICF0aGlzLmNvbmZpZy5leGNsdWRlU2VydmljZXMuaW5jbHVkZXMoc2VydmljZSlcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGF2YWlsYWJsZVRhcmdldHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXZhaWxhYmxlVGFyZ2V0cy5sZW5ndGgpXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3QgcmFuZG9tIGZhaWx1cmUgdHlwZVxuICAgICAqL1xuICAgIHByaXZhdGUgc2VsZWN0UmFuZG9tRmFpbHVyZSgpOiBGYWlsdXJlVHlwZSB7XG4gICAgICAgIGNvbnN0IGZhaWx1cmVzID0gT2JqZWN0LnZhbHVlcyhGYWlsdXJlVHlwZSk7XG4gICAgICAgIHJldHVybiBmYWlsdXJlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmYWlsdXJlcy5sZW5ndGgpXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgY2hhb3MgZHVyYXRpb24gYmFzZWQgb24gaW50ZW5zaXR5XG4gICAgICovXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVEdXJhdGlvbigpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5jb25maWcuaW50ZW5zaXR5ID09PSAnaGlnaCcgPyA2MDAwMCA6XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5pbnRlbnNpdHkgPT09ICdtZWRpdW0nID8gMzAwMDAgOiAxMDAwMDtcbiAgICAgICAgcmV0dXJuIGJhc2UgKyBNYXRoLnJhbmRvbSgpICogMTAwMDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGN1cnJlbnQgZXJyb3IgcmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgY2FsY3VsYXRlRXJyb3JSYXRlKCk6IG51bWJlciB7XG4gICAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHRoaXMgd291bGQgcXVlcnkgYWN0dWFsIG1ldHJpY3NcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAwLjE7IC8vIDAtMTAlIGVycm9yIHJhdGVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRyYWN0IGxlYXJuaW5ncyBmcm9tIGNoYW9zIGV2ZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBleHRyYWN0TGVhcm5pbmdzKGV2ZW50OiBDaGFvc0V2ZW50LCByZWNvdmVyeVRpbWU6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgbGVhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGlmIChyZWNvdmVyeVRpbWUgPCA1MDAwKSB7XG4gICAgICAgICAgICBsZWFybmluZ3MucHVzaChgRmFzdCByZWNvdmVyeTogJHtldmVudC50YXJnZXRTZXJ2aWNlfSByZWNvdmVyZWQgaW4gJHtyZWNvdmVyeVRpbWV9bXNgKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNvdmVyeVRpbWUgPiAzMDAwMCkge1xuICAgICAgICAgICAgbGVhcm5pbmdzLnB1c2goYFNsb3cgcmVjb3Zlcnk6ICR7ZXZlbnQudGFyZ2V0U2VydmljZX0gdG9vayAke3JlY292ZXJ5VGltZX1tcyB0byByZWNvdmVyYCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZWFybmluZ3MucHVzaChgJHtldmVudC50eXBlfSBoYW5kbGVkIHN1Y2Nlc3NmdWxseSBieSAke2V2ZW50LnRhcmdldFNlcnZpY2V9YCk7XG5cbiAgICAgICAgcmV0dXJuIGxlYXJuaW5ncztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY2hhb3MgaGlzdG9yeVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRIaXN0b3J5KCk6IENoYW9zUmVzdWx0W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFvc0hpc3Rvcnk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFjdGl2ZSBjaGFvcyBldmVudHNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWN0aXZlRXZlbnRzKCk6IENoYW9zRXZlbnRbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYWN0aXZlRXZlbnRzLnZhbHVlcygpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2hhb3NFbmdpbmU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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LENBQUE7TUFBQWhCLGFBQUEsR0FBQVUsQ0FBQTtNQUNyQmdELFNBQVMsQ0FBQ3RCLElBQUksQ0FBQyxrQkFBa0JkLEtBQUssQ0FBQ0osYUFBYSxpQkFBaUJpQyxZQUFZLElBQUksQ0FBQztJQUMxRixDQUFDLE1BQU07TUFBQTtNQUFBbkQsYUFBQSxHQUFBZ0IsQ0FBQTtNQUFBaEIsYUFBQSxHQUFBVSxDQUFBO01BQUEsSUFBSXlDLFlBQVksR0FBRyxLQUFLLEVBQUU7UUFBQTtRQUFBbkQsYUFBQSxHQUFBZ0IsQ0FBQTtRQUFBaEIsYUFBQSxHQUFBVSxDQUFBO1FBQzdCZ0QsU0FBUyxDQUFDdEIsSUFBSSxDQUFDLGtCQUFrQmQsS0FBSyxDQUFDSixhQUFhLFNBQVNpQyxZQUFZLGVBQWUsQ0FBQztNQUM3RixDQUFDO01BQUE7TUFBQTtRQUFBbkQsYUFBQSxHQUFBZ0IsQ0FBQTtNQUFBO0lBQUQ7SUFBQztJQUFBaEIsYUFBQSxHQUFBVSxDQUFBO0lBRURnRCxTQUFTLENBQUN0QixJQUFJLENBQUMsR0FBR2QsS0FBSyxDQUFDRSxJQUFJLDRCQUE0QkYsS0FBSyxDQUFDSixhQUFhLEVBQUUsQ0FBQztJQUFDO0lBQUFsQixhQUFBLEdBQUFVLENBQUE7SUFFL0UsT0FBT2dELFNBQVM7RUFDcEI7O0VBRUE7QUFDSjtBQUNBO0VBQ1dxQixVQUFVQSxDQUFBLEVBQWtCO0lBQUE7SUFBQS9FLGFBQUEsR0FBQVMsQ0FBQTtJQUFBVCxhQUFBLEdBQUFVLENBQUE7SUFDL0IsT0FBTyxJQUFJLENBQUNHLFlBQVk7RUFDNUI7O0VBRUE7QUFDSjtBQUNBO0VBQ1dtRSxlQUFlQSxDQUFBLEVBQWlCO0lBQUE7SUFBQWhGLGFBQUEsR0FBQVMsQ0FBQTtJQUFBVCxhQUFBLEdBQUFVLENBQUE7SUFDbkMsT0FBT3VFLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQ3ZFLFlBQVksQ0FBQ2tFLE1BQU0sQ0FBQyxDQUFDLENBQUM7RUFDakQ7RUFFUWQsS0FBS0EsQ0FBQ29CLEVBQVUsRUFBaUI7SUFBQTtJQUFBbkYsYUFBQSxHQUFBUyxDQUFBO0lBQUFULGFBQUEsR0FBQVUsQ0FBQTtJQUNyQyxPQUFPLElBQUkwRSxPQUFPLENBQUNDLE9BQU8sSUFBSTtNQUFBO01BQUFyRixhQUFBLEdBQUFTLENBQUE7TUFBQVQsYUFBQSxHQUFBVSxDQUFBO01BQUEsT0FBQTRFLFVBQVUsQ0FBQ0QsT0FBTyxFQUFFRixFQUFFLENBQUM7SUFBRCxDQUFDLENBQUM7RUFDMUQ7QUFDSjtBQUVBLGVBQWU3RSxXQUFXIiwiaWdub3JlTGlzdCI6W119