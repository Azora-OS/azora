{"version":3,"names":["cov_1e1p36uz5z","actualCoverage","express","conversionService","logger","router","s","Router","post","req","res","f","studentId","eventType","triggerValue","body","b","undefined","status","json","success","error","timestamp","Date","event","trackConversionEvent","data","message","get","params","events","offers","Promise","all","getStudentConversionEvents","getStudentActiveOffers","activeOffers","offerType","discount","expirationDays","offer","createConversionOffer","offerId","getConversionOffer","acceptConversionOffer","period","test","metrics","getConversionMetrics"],"sources":["conversion.routes.ts"],"sourcesContent":["import express, { Router, Request, Response } from 'express';\nimport { conversionService } from '../services/conversion.service';\nimport { logger } from '../utils/logger';\n\nconst router: Router = express.Router();\n\n/**\n * POST /api/v1/conversions/track\n * Track a conversion event (module completion, assessment pass, course completion)\n */\nrouter.post('/track', async (req: Request, res: Response): Promise<void> => {\n  try {\n    const { studentId, eventType, triggerValue } = req.body;\n\n    if (!studentId || !eventType || triggerValue === undefined) {\n      res.status(400).json({\n        success: false,\n        error: 'Missing required fields: studentId, eventType, triggerValue',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const event = await conversionService.trackConversionEvent({\n      studentId,\n      eventType,\n      triggerValue,\n    });\n\n    res.status(201).json({\n      success: true,\n      data: event,\n      timestamp: new Date(),\n    });\n  } catch (error: any) {\n    logger.error('Error tracking conversion event:', error);\n    res.status(500).json({\n      success: false,\n      error: error.message || 'Failed to track conversion event',\n      timestamp: new Date(),\n    });\n  }\n});\n\n/**\n * GET /api/v1/conversions/:studentId\n * Get conversion events and active offers for a student\n */\nrouter.get('/:studentId', async (req: Request, res: Response): Promise<void> => {\n  try {\n    const { studentId } = req.params;\n\n    if (!studentId) {\n      res.status(400).json({\n        success: false,\n        error: 'Missing required parameter: studentId',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const [events, offers] = await Promise.all([\n      conversionService.getStudentConversionEvents(studentId),\n      conversionService.getStudentActiveOffers(studentId),\n    ]);\n\n    res.status(200).json({\n      success: true,\n      data: {\n        events,\n        activeOffers: offers,\n      },\n      timestamp: new Date(),\n    });\n  } catch (error: any) {\n    logger.error('Error getting conversion data:', error);\n    res.status(500).json({\n      success: false,\n      error: error.message || 'Failed to get conversion data',\n      timestamp: new Date(),\n    });\n  }\n});\n\n/**\n * POST /api/v1/conversions/offers\n * Create a conversion offer\n */\nrouter.post('/offers', async (req: Request, res: Response): Promise<void> => {\n  try {\n    const { studentId, offerType, discount, expirationDays } = req.body;\n\n    if (!studentId || !offerType || discount === undefined) {\n      res.status(400).json({\n        success: false,\n        error: 'Missing required fields: studentId, offerType, discount',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const offer = await conversionService.createConversionOffer({\n      studentId,\n      offerType,\n      discount,\n      expirationDays: expirationDays || 7,\n    });\n\n    res.status(201).json({\n      success: true,\n      data: offer,\n      timestamp: new Date(),\n    });\n  } catch (error: any) {\n    logger.error('Error creating conversion offer:', error);\n    res.status(500).json({\n      success: false,\n      error: error.message || 'Failed to create conversion offer',\n      timestamp: new Date(),\n    });\n  }\n});\n\n/**\n * GET /api/v1/conversions/offers/:offerId\n * Get a specific conversion offer\n */\nrouter.get('/offers/:offerId', async (req: Request, res: Response): Promise<void> => {\n  try {\n    const { offerId } = req.params;\n\n    if (!offerId) {\n      res.status(400).json({\n        success: false,\n        error: 'Missing required parameter: offerId',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const offer = await conversionService.getConversionOffer(offerId);\n\n    if (!offer) {\n      res.status(404).json({\n        success: false,\n        error: 'Offer not found',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    res.status(200).json({\n      success: true,\n      data: offer,\n      timestamp: new Date(),\n    });\n  } catch (error: any) {\n    logger.error('Error getting conversion offer:', error);\n    res.status(500).json({\n      success: false,\n      error: error.message || 'Failed to get conversion offer',\n      timestamp: new Date(),\n    });\n  }\n});\n\n/**\n * POST /api/v1/conversions/offers/:offerId/accept\n * Accept a conversion offer\n */\nrouter.post('/offers/:offerId/accept', async (req: Request, res: Response): Promise<void> => {\n  try {\n    const { offerId } = req.params;\n\n    if (!offerId) {\n      res.status(400).json({\n        success: false,\n        error: 'Missing required parameter: offerId',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const offer = await conversionService.acceptConversionOffer(offerId);\n\n    res.status(200).json({\n      success: true,\n      data: offer,\n      message: 'Offer accepted successfully. Your tier has been upgraded to premium.',\n      timestamp: new Date(),\n    });\n  } catch (error: any) {\n    logger.error('Error accepting conversion offer:', error);\n    res.status(500).json({\n      success: false,\n      error: error.message || 'Failed to accept conversion offer',\n      timestamp: new Date(),\n    });\n  }\n});\n\n/**\n * GET /api/v1/conversions/metrics/:period\n * Get conversion metrics for a period (e.g., \"2024-01\")\n */\nrouter.get('/metrics/:period', async (req: Request, res: Response): Promise<void> => {\n  try {\n    const { period } = req.params;\n\n    if (!period || !/^\\d{4}-\\d{2}$/.test(period)) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid period format. Use YYYY-MM (e.g., 2024-01)',\n        timestamp: new Date(),\n      });\n      return;\n    }\n\n    const metrics = await conversionService.getConversionMetrics(period);\n\n    res.status(200).json({\n      success: true,\n      data: metrics,\n      timestamp: new Date(),\n    });\n  } catch (error: any) {\n    logger.error('Error getting conversion metrics:', error);\n    res.status(500).json({\n      success: false,\n      error: error.message || 'Failed to get conversion metrics',\n      timestamp: new Date(),\n    });\n  }\n});\n\nexport default router;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}