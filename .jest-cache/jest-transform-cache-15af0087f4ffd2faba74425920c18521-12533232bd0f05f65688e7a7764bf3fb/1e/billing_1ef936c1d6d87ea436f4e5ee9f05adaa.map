{"version":3,"names":["cov_13k8he6szj","actualCoverage","invoices","s","Map","subscriptions","createInvoice","req","res","f","userId","amount","description","items","body","b","status","json","error","invoice","id","Date","now","createdAt","toISOString","dueDate","set","message","console","processPayment","invoiceId","paymentMethod","get","paidAt","transactionId","module","exports"],"sources":["billing.js"],"sourcesContent":["const invoices = new Map();\nconst subscriptions = new Map();\n\nconst createInvoice = async (req, res) => {\n  try {\n    const { userId, amount, description, items } = req.body;\n    \n    if (!userId || !amount || !description) {\n      return res.status(400).json({ error: 'UserId, amount, and description are required' });\n    }\n\n    const invoice = {\n      id: `inv_${Date.now()}`,\n      userId,\n      amount,\n      description,\n      items: items || [],\n      status: 'pending',\n      createdAt: new Date().toISOString(),\n      dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString()\n    };\n\n    invoices.set(invoice.id, invoice);\n\n    res.status(201).json({\n      message: 'Invoice created successfully',\n      invoice\n    });\n  } catch (error) {\n    console.error('Invoice creation error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n};\n\nconst processPayment = async (req, res) => {\n  try {\n    const { invoiceId, paymentMethod } = req.body;\n    \n    if (!invoiceId || !paymentMethod) {\n      return res.status(400).json({ error: 'InvoiceId and paymentMethod are required' });\n    }\n\n    const invoice = invoices.get(invoiceId);\n    if (!invoice) {\n      return res.status(404).json({ error: 'Invoice not found' });\n    }\n\n    if (invoice.status === 'paid') {\n      return res.status(400).json({ error: 'Invoice already paid' });\n    }\n\n    invoice.status = 'paid';\n    invoice.paidAt = new Date().toISOString();\n    invoice.paymentMethod = paymentMethod;\n\n    invoices.set(invoiceId, invoice);\n\n    res.json({\n      message: 'Payment processed successfully',\n      invoice,\n      transactionId: `txn_${Date.now()}`\n    });\n  } catch (error) {\n    console.error('Payment processing error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n};\n\nmodule.exports = {\n  createInvoice,\n  processPayment\n};"],"mappings":"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","ignoreList":[]}