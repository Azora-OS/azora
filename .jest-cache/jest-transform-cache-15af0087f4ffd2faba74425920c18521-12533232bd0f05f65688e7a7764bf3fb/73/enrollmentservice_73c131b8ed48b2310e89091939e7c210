3be1a798e12b2971e9ad61e0c88031c5
/* istanbul ignore next */
function cov_2gif30vk2e() {
  var path = "/workspaces/azora/services/education-revenue-engine/src/services/enrollment.service.ts";
  var hash = "3823bd90c02f71408fc91271d2874115188dd4df";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/education-revenue-engine/src/services/enrollment.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 6,
          column: 25
        },
        end: {
          line: 10,
          column: 2
        }
      },
      "1": {
        start: {
          line: 14,
          column: 4
        },
        end: {
          line: 61,
          column: 5
        }
      },
      "2": {
        start: {
          line: 15,
          column: 31
        },
        end: {
          line: 15,
          column: 62
        }
      },
      "3": {
        start: {
          line: 16,
          column: 6
        },
        end: {
          line: 18,
          column: 7
        }
      },
      "4": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 17,
          column: 62
        }
      },
      "5": {
        start: {
          line: 21,
          column: 23
        },
        end: {
          line: 26,
          column: 8
        }
      },
      "6": {
        start: {
          line: 28,
          column: 6
        },
        end: {
          line: 30,
          column: 7
        }
      },
      "7": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 29,
          column: 67
        }
      },
      "8": {
        start: {
          line: 33,
          column: 21
        },
        end: {
          line: 35,
          column: 8
        }
      },
      "9": {
        start: {
          line: 37,
          column: 6
        },
        end: {
          line: 39,
          column: 7
        }
      },
      "10": {
        start: {
          line: 38,
          column: 8
        },
        end: {
          line: 38,
          column: 44
        }
      },
      "11": {
        start: {
          line: 42,
          column: 28
        },
        end: {
          line: 42,
          column: 59
        }
      },
      "12": {
        start: {
          line: 43,
          column: 6
        },
        end: {
          line: 45,
          column: 7
        }
      },
      "13": {
        start: {
          line: 44,
          column: 8
        },
        end: {
          line: 44,
          column: 76
        }
      },
      "14": {
        start: {
          line: 47,
          column: 25
        },
        end: {
          line: 54,
          column: 8
        }
      },
      "15": {
        start: {
          line: 56,
          column: 6
        },
        end: {
          line: 56,
          column: 86
        }
      },
      "16": {
        start: {
          line: 57,
          column: 6
        },
        end: {
          line: 57,
          column: 38
        }
      },
      "17": {
        start: {
          line: 59,
          column: 6
        },
        end: {
          line: 59,
          column: 54
        }
      },
      "18": {
        start: {
          line: 60,
          column: 6
        },
        end: {
          line: 60,
          column: 18
        }
      },
      "19": {
        start: {
          line: 65,
          column: 4
        },
        end: {
          line: 74,
          column: 5
        }
      },
      "20": {
        start: {
          line: 66,
          column: 25
        },
        end: {
          line: 68,
          column: 8
        }
      },
      "21": {
        start: {
          line: 70,
          column: 6
        },
        end: {
          line: 70,
          column: 45
        }
      },
      "22": {
        start: {
          line: 72,
          column: 6
        },
        end: {
          line: 72,
          column: 55
        }
      },
      "23": {
        start: {
          line: 73,
          column: 6
        },
        end: {
          line: 73,
          column: 18
        }
      },
      "24": {
        start: {
          line: 78,
          column: 4
        },
        end: {
          line: 87,
          column: 5
        }
      },
      "25": {
        start: {
          line: 79,
          column: 26
        },
        end: {
          line: 81,
          column: 8
        }
      },
      "26": {
        start: {
          line: 83,
          column: 6
        },
        end: {
          line: 83,
          column: 41
        }
      },
      "27": {
        start: {
          line: 85,
          column: 6
        },
        end: {
          line: 85,
          column: 64
        }
      },
      "28": {
        start: {
          line: 86,
          column: 6
        },
        end: {
          line: 86,
          column: 18
        }
      },
      "29": {
        start: {
          line: 91,
          column: 4
        },
        end: {
          line: 106,
          column: 5
        }
      },
      "30": {
        start: {
          line: 92,
          column: 6
        },
        end: {
          line: 94,
          column: 7
        }
      },
      "31": {
        start: {
          line: 93,
          column: 8
        },
        end: {
          line: 93,
          column: 62
        }
      },
      "32": {
        start: {
          line: 96,
          column: 25
        },
        end: {
          line: 99,
          column: 8
        }
      },
      "33": {
        start: {
          line: 101,
          column: 6
        },
        end: {
          line: 101,
          column: 83
        }
      },
      "34": {
        start: {
          line: 102,
          column: 6
        },
        end: {
          line: 102,
          column: 38
        }
      },
      "35": {
        start: {
          line: 104,
          column: 6
        },
        end: {
          line: 104,
          column: 54
        }
      },
      "36": {
        start: {
          line: 105,
          column: 6
        },
        end: {
          line: 105,
          column: 18
        }
      },
      "37": {
        start: {
          line: 110,
          column: 4
        },
        end: {
          line: 125,
          column: 5
        }
      },
      "38": {
        start: {
          line: 111,
          column: 25
        },
        end: {
          line: 118,
          column: 8
        }
      },
      "39": {
        start: {
          line: 120,
          column: 6
        },
        end: {
          line: 120,
          column: 59
        }
      },
      "40": {
        start: {
          line: 121,
          column: 6
        },
        end: {
          line: 121,
          column: 38
        }
      },
      "41": {
        start: {
          line: 123,
          column: 6
        },
        end: {
          line: 123,
          column: 58
        }
      },
      "42": {
        start: {
          line: 124,
          column: 6
        },
        end: {
          line: 124,
          column: 18
        }
      },
      "43": {
        start: {
          line: 129,
          column: 4
        },
        end: {
          line: 140,
          column: 5
        }
      },
      "44": {
        start: {
          line: 130,
          column: 25
        },
        end: {
          line: 133,
          column: 8
        }
      },
      "45": {
        start: {
          line: 135,
          column: 6
        },
        end: {
          line: 135,
          column: 57
        }
      },
      "46": {
        start: {
          line: 136,
          column: 6
        },
        end: {
          line: 136,
          column: 38
        }
      },
      "47": {
        start: {
          line: 138,
          column: 6
        },
        end: {
          line: 138,
          column: 56
        }
      },
      "48": {
        start: {
          line: 139,
          column: 6
        },
        end: {
          line: 139,
          column: 18
        }
      },
      "49": {
        start: {
          line: 144,
          column: 33
        },
        end: {
          line: 144,
          column: 56
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 13,
            column: 2
          },
          end: {
            line: 13,
            column: 3
          }
        },
        loc: {
          start: {
            line: 13,
            column: 54
          },
          end: {
            line: 62,
            column: 3
          }
        },
        line: 13
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 64,
            column: 2
          },
          end: {
            line: 64,
            column: 3
          }
        },
        loc: {
          start: {
            line: 64,
            column: 72
          },
          end: {
            line: 75,
            column: 3
          }
        },
        line: 64
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 77,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        },
        loc: {
          start: {
            line: 77,
            column: 72
          },
          end: {
            line: 88,
            column: 3
          }
        },
        line: 77
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 90,
            column: 2
          },
          end: {
            line: 90,
            column: 3
          }
        },
        loc: {
          start: {
            line: 90,
            column: 84
          },
          end: {
            line: 107,
            column: 3
          }
        },
        line: 90
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 109,
            column: 2
          },
          end: {
            line: 109,
            column: 3
          }
        },
        loc: {
          start: {
            line: 109,
            column: 70
          },
          end: {
            line: 126,
            column: 3
          }
        },
        line: 109
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 128,
            column: 2
          },
          end: {
            line: 128,
            column: 3
          }
        },
        loc: {
          start: {
            line: 128,
            column: 66
          },
          end: {
            line: 141,
            column: 3
          }
        },
        line: 128
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 16,
            column: 6
          },
          end: {
            line: 18,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 16,
            column: 6
          },
          end: {
            line: 18,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 16
      },
      "1": {
        loc: {
          start: {
            line: 28,
            column: 6
          },
          end: {
            line: 30,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 28,
            column: 6
          },
          end: {
            line: 30,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 28
      },
      "2": {
        loc: {
          start: {
            line: 37,
            column: 6
          },
          end: {
            line: 39,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 37,
            column: 6
          },
          end: {
            line: 39,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 37
      },
      "3": {
        loc: {
          start: {
            line: 43,
            column: 6
          },
          end: {
            line: 45,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 43,
            column: 6
          },
          end: {
            line: 45,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 43
      },
      "4": {
        loc: {
          start: {
            line: 92,
            column: 6
          },
          end: {
            line: 94,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 92,
            column: 6
          },
          end: {
            line: 94,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 92
      },
      "5": {
        loc: {
          start: {
            line: 92,
            column: 10
          },
          end: {
            line: 92,
            column: 40
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 92,
            column: 10
          },
          end: {
            line: 92,
            column: 22
          }
        }, {
          start: {
            line: 92,
            column: 26
          },
          end: {
            line: 92,
            column: 40
          }
        }],
        line: 92
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "3823bd90c02f71408fc91271d2874115188dd4df"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2gif30vk2e = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2gif30vk2e();
import { prisma } from '../index';
import { logger } from '../utils/logger';
import Joi from 'joi';
const enrollmentSchema =
/* istanbul ignore next */
(cov_2gif30vk2e().s[0]++, Joi.object({
  studentId: Joi.string().required(),
  courseId: Joi.string().required(),
  tier: Joi.string().valid('free', 'premium', 'pro').required()
}));
export class EnrollmentService {
  async enrollStudent(data) {
    /* istanbul ignore next */
    cov_2gif30vk2e().f[0]++;
    cov_2gif30vk2e().s[1]++;
    try {
      const {
        error,
        value
      } =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[2]++, enrollmentSchema.validate(data));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[3]++;
      if (error) {
        /* istanbul ignore next */
        cov_2gif30vk2e().b[0][0]++;
        cov_2gif30vk2e().s[4]++;
        throw new Error(`Validation error: ${error.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_2gif30vk2e().b[0][1]++;
      }

      // Check if student already enrolled
      const existing =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[5]++, await prisma.enrollment.findFirst({
        where: {
          studentId: value.studentId,
          courseId: value.courseId
        }
      }));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[6]++;
      if (existing) {
        /* istanbul ignore next */
        cov_2gif30vk2e().b[1][0]++;
        cov_2gif30vk2e().s[7]++;
        throw new Error('Student already enrolled in this course');
      } else
      /* istanbul ignore next */
      {
        cov_2gif30vk2e().b[1][1]++;
      }

      // Check tier access
      const course =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[8]++, await prisma.course.findUnique({
        where: {
          id: value.courseId
        }
      }));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[9]++;
      if (!course) {
        /* istanbul ignore next */
        cov_2gif30vk2e().b[2][0]++;
        cov_2gif30vk2e().s[10]++;
        throw new Error('Course not found');
      } else
      /* istanbul ignore next */
      {
        cov_2gif30vk2e().b[2][1]++;
      }

      // Verify student tier has access to course tier
      const tierHierarchy =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[11]++, {
        free: 0,
        premium: 1,
        pro: 2
      });
      /* istanbul ignore next */
      cov_2gif30vk2e().s[12]++;
      if (tierHierarchy[value.tier] < tierHierarchy[course.tier]) {
        /* istanbul ignore next */
        cov_2gif30vk2e().b[3][0]++;
        cov_2gif30vk2e().s[13]++;
        throw new Error('Student tier does not have access to this course');
      } else
      /* istanbul ignore next */
      {
        cov_2gif30vk2e().b[3][1]++;
      }
      const enrollment =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[14]++, await prisma.enrollment.create({
        data: {
          studentId: value.studentId,
          courseId: value.courseId,
          tier: value.tier,
          status: 'active'
        }
      }));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[15]++;
      logger.info(`Student enrolled: ${value.studentId} in course ${value.courseId}`);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[16]++;
      return enrollment;
    } catch (error) {
      /* istanbul ignore next */
      cov_2gif30vk2e().s[17]++;
      logger.error('Error enrolling student:', error);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[18]++;
      throw error;
    }
  }
  async getEnrollment(enrollmentId) {
    /* istanbul ignore next */
    cov_2gif30vk2e().f[1]++;
    cov_2gif30vk2e().s[19]++;
    try {
      const enrollment =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[20]++, await prisma.enrollment.findUnique({
        where: {
          id: enrollmentId
        }
      }));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[21]++;
      return enrollment;
    } catch (error) {
      /* istanbul ignore next */
      cov_2gif30vk2e().s[22]++;
      logger.error('Error getting enrollment:', error);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[23]++;
      throw error;
    }
  }
  async getStudentEnrollments(studentId) {
    /* istanbul ignore next */
    cov_2gif30vk2e().f[2]++;
    cov_2gif30vk2e().s[24]++;
    try {
      const enrollments =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[25]++, await prisma.enrollment.findMany({
        where: {
          studentId
        }
      }));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[26]++;
      return enrollments;
    } catch (error) {
      /* istanbul ignore next */
      cov_2gif30vk2e().s[27]++;
      logger.error('Error getting student enrollments:', error);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[28]++;
      throw error;
    }
  }
  async updateProgress(enrollmentId, progress) {
    /* istanbul ignore next */
    cov_2gif30vk2e().f[3]++;
    cov_2gif30vk2e().s[29]++;
    try {
      /* istanbul ignore next */
      cov_2gif30vk2e().s[30]++;
      if (
      /* istanbul ignore next */
      (cov_2gif30vk2e().b[5][0]++, progress < 0) ||
      /* istanbul ignore next */
      (cov_2gif30vk2e().b[5][1]++, progress > 100)) {
        /* istanbul ignore next */
        cov_2gif30vk2e().b[4][0]++;
        cov_2gif30vk2e().s[31]++;
        throw new Error('Progress must be between 0 and 100');
      } else
      /* istanbul ignore next */
      {
        cov_2gif30vk2e().b[4][1]++;
      }
      const enrollment =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[32]++, await prisma.enrollment.update({
        where: {
          id: enrollmentId
        },
        data: {
          progress
        }
      }));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[33]++;
      logger.info(`Progress updated for enrollment ${enrollmentId}: ${progress}%`);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[34]++;
      return enrollment;
    } catch (error) {
      /* istanbul ignore next */
      cov_2gif30vk2e().s[35]++;
      logger.error('Error updating progress:', error);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[36]++;
      throw error;
    }
  }
  async completeEnrollment(enrollmentId) {
    /* istanbul ignore next */
    cov_2gif30vk2e().f[4]++;
    cov_2gif30vk2e().s[37]++;
    try {
      const enrollment =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[38]++, await prisma.enrollment.update({
        where: {
          id: enrollmentId
        },
        data: {
          status: 'completed',
          progress: 100,
          completionDate: new Date()
        }
      }));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[39]++;
      logger.info(`Enrollment completed: ${enrollmentId}`);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[40]++;
      return enrollment;
    } catch (error) {
      /* istanbul ignore next */
      cov_2gif30vk2e().s[41]++;
      logger.error('Error completing enrollment:', error);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[42]++;
      throw error;
    }
  }
  async dropEnrollment(enrollmentId) {
    /* istanbul ignore next */
    cov_2gif30vk2e().f[5]++;
    cov_2gif30vk2e().s[43]++;
    try {
      const enrollment =
      /* istanbul ignore next */
      (cov_2gif30vk2e().s[44]++, await prisma.enrollment.update({
        where: {
          id: enrollmentId
        },
        data: {
          status: 'dropped'
        }
      }));
      /* istanbul ignore next */
      cov_2gif30vk2e().s[45]++;
      logger.info(`Enrollment dropped: ${enrollmentId}`);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[46]++;
      return enrollment;
    } catch (error) {
      /* istanbul ignore next */
      cov_2gif30vk2e().s[47]++;
      logger.error('Error dropping enrollment:', error);
      /* istanbul ignore next */
      cov_2gif30vk2e().s[48]++;
      throw error;
    }
  }
}
export const enrollmentService =
/* istanbul ignore next */
(cov_2gif30vk2e().s[49]++, new EnrollmentService());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmdpZjMwdmsyZSIsImFjdHVhbENvdmVyYWdlIiwicHJpc21hIiwibG9nZ2VyIiwiSm9pIiwiZW5yb2xsbWVudFNjaGVtYSIsInMiLCJvYmplY3QiLCJzdHVkZW50SWQiLCJzdHJpbmciLCJyZXF1aXJlZCIsImNvdXJzZUlkIiwidGllciIsInZhbGlkIiwiRW5yb2xsbWVudFNlcnZpY2UiLCJlbnJvbGxTdHVkZW50IiwiZGF0YSIsImYiLCJlcnJvciIsInZhbHVlIiwidmFsaWRhdGUiLCJiIiwiRXJyb3IiLCJtZXNzYWdlIiwiZXhpc3RpbmciLCJlbnJvbGxtZW50IiwiZmluZEZpcnN0Iiwid2hlcmUiLCJjb3Vyc2UiLCJmaW5kVW5pcXVlIiwiaWQiLCJ0aWVySGllcmFyY2h5IiwiZnJlZSIsInByZW1pdW0iLCJwcm8iLCJjcmVhdGUiLCJzdGF0dXMiLCJpbmZvIiwiZ2V0RW5yb2xsbWVudCIsImVucm9sbG1lbnRJZCIsImdldFN0dWRlbnRFbnJvbGxtZW50cyIsImVucm9sbG1lbnRzIiwiZmluZE1hbnkiLCJ1cGRhdGVQcm9ncmVzcyIsInByb2dyZXNzIiwidXBkYXRlIiwiY29tcGxldGVFbnJvbGxtZW50IiwiY29tcGxldGlvbkRhdGUiLCJEYXRlIiwiZHJvcEVucm9sbG1lbnQiLCJlbnJvbGxtZW50U2VydmljZSJdLCJzb3VyY2VzIjpbImVucm9sbG1lbnQuc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBFbnJvbGxtZW50IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcbmltcG9ydCBKb2kgZnJvbSAnam9pJztcblxuY29uc3QgZW5yb2xsbWVudFNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBzdHVkZW50SWQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBjb3Vyc2VJZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHRpZXI6IEpvaS5zdHJpbmcoKS52YWxpZCgnZnJlZScsICdwcmVtaXVtJywgJ3BybycpLnJlcXVpcmVkKCksXG59KTtcblxuZXhwb3J0IGNsYXNzIEVucm9sbG1lbnRTZXJ2aWNlIHtcbiAgYXN5bmMgZW5yb2xsU3R1ZGVudChkYXRhOiBhbnkpOiBQcm9taXNlPEVucm9sbG1lbnQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciwgdmFsdWUgfSA9IGVucm9sbG1lbnRTY2hlbWEudmFsaWRhdGUoZGF0YSk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWxpZGF0aW9uIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHN0dWRlbnQgYWxyZWFkeSBlbnJvbGxlZFxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEuZW5yb2xsbWVudC5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHN0dWRlbnRJZDogdmFsdWUuc3R1ZGVudElkLFxuICAgICAgICAgIGNvdXJzZUlkOiB2YWx1ZS5jb3Vyc2VJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdHVkZW50IGFscmVhZHkgZW5yb2xsZWQgaW4gdGhpcyBjb3Vyc2UnKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgdGllciBhY2Nlc3NcbiAgICAgIGNvbnN0IGNvdXJzZSA9IGF3YWl0IHByaXNtYS5jb3Vyc2UuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB2YWx1ZS5jb3Vyc2VJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghY291cnNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ291cnNlIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBWZXJpZnkgc3R1ZGVudCB0aWVyIGhhcyBhY2Nlc3MgdG8gY291cnNlIHRpZXJcbiAgICAgIGNvbnN0IHRpZXJIaWVyYXJjaHkgPSB7IGZyZWU6IDAsIHByZW1pdW06IDEsIHBybzogMiB9O1xuICAgICAgaWYgKHRpZXJIaWVyYXJjaHlbdmFsdWUudGllciBhcyBrZXlvZiB0eXBlb2YgdGllckhpZXJhcmNoeV0gPCB0aWVySGllcmFyY2h5W2NvdXJzZS50aWVyIGFzIGtleW9mIHR5cGVvZiB0aWVySGllcmFyY2h5XSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0dWRlbnQgdGllciBkb2VzIG5vdCBoYXZlIGFjY2VzcyB0byB0aGlzIGNvdXJzZScpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbnJvbGxtZW50ID0gYXdhaXQgcHJpc21hLmVucm9sbG1lbnQuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN0dWRlbnRJZDogdmFsdWUuc3R1ZGVudElkLFxuICAgICAgICAgIGNvdXJzZUlkOiB2YWx1ZS5jb3Vyc2VJZCxcbiAgICAgICAgICB0aWVyOiB2YWx1ZS50aWVyLFxuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYFN0dWRlbnQgZW5yb2xsZWQ6ICR7dmFsdWUuc3R1ZGVudElkfSBpbiBjb3Vyc2UgJHt2YWx1ZS5jb3Vyc2VJZH1gKTtcbiAgICAgIHJldHVybiBlbnJvbGxtZW50IGFzIEVucm9sbG1lbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZW5yb2xsaW5nIHN0dWRlbnQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0RW5yb2xsbWVudChlbnJvbGxtZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RW5yb2xsbWVudCB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZW5yb2xsbWVudCA9IGF3YWl0IHByaXNtYS5lbnJvbGxtZW50LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZW5yb2xsbWVudElkIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGVucm9sbG1lbnQgYXMgRW5yb2xsbWVudCB8IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyBlbnJvbGxtZW50OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFN0dWRlbnRFbnJvbGxtZW50cyhzdHVkZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RW5yb2xsbWVudFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVucm9sbG1lbnRzID0gYXdhaXQgcHJpc21hLmVucm9sbG1lbnQuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBzdHVkZW50SWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZW5yb2xsbWVudHMgYXMgRW5yb2xsbWVudFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGdldHRpbmcgc3R1ZGVudCBlbnJvbGxtZW50czonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVQcm9ncmVzcyhlbnJvbGxtZW50SWQ6IHN0cmluZywgcHJvZ3Jlc3M6IG51bWJlcik6IFByb21pc2U8RW5yb2xsbWVudD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAocHJvZ3Jlc3MgPCAwIHx8IHByb2dyZXNzID4gMTAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvZ3Jlc3MgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEwMCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbnJvbGxtZW50ID0gYXdhaXQgcHJpc21hLmVucm9sbG1lbnQudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGVucm9sbG1lbnRJZCB9LFxuICAgICAgICBkYXRhOiB7IHByb2dyZXNzIH0sXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYFByb2dyZXNzIHVwZGF0ZWQgZm9yIGVucm9sbG1lbnQgJHtlbnJvbGxtZW50SWR9OiAke3Byb2dyZXNzfSVgKTtcbiAgICAgIHJldHVybiBlbnJvbGxtZW50IGFzIEVucm9sbG1lbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgcHJvZ3Jlc3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29tcGxldGVFbnJvbGxtZW50KGVucm9sbG1lbnRJZDogc3RyaW5nKTogUHJvbWlzZTxFbnJvbGxtZW50PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVucm9sbG1lbnQgPSBhd2FpdCBwcmlzbWEuZW5yb2xsbWVudC51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZW5yb2xsbWVudElkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgIHByb2dyZXNzOiAxMDAsXG4gICAgICAgICAgY29tcGxldGlvbkRhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYEVucm9sbG1lbnQgY29tcGxldGVkOiAke2Vucm9sbG1lbnRJZH1gKTtcbiAgICAgIHJldHVybiBlbnJvbGxtZW50IGFzIEVucm9sbG1lbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgY29tcGxldGluZyBlbnJvbGxtZW50OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRyb3BFbnJvbGxtZW50KGVucm9sbG1lbnRJZDogc3RyaW5nKTogUHJvbWlzZTxFbnJvbGxtZW50PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVucm9sbG1lbnQgPSBhd2FpdCBwcmlzbWEuZW5yb2xsbWVudC51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZW5yb2xsbWVudElkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnZHJvcHBlZCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhgRW5yb2xsbWVudCBkcm9wcGVkOiAke2Vucm9sbG1lbnRJZH1gKTtcbiAgICAgIHJldHVybiBlbnJvbGxtZW50IGFzIEVucm9sbG1lbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZHJvcHBpbmcgZW5yb2xsbWVudDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGVucm9sbG1lbnRTZXJ2aWNlID0gbmV3IEVucm9sbG1lbnRTZXJ2aWNlKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFmWixTQUFTRSxNQUFNLFFBQVEsVUFBVTtBQUVqQyxTQUFTQyxNQUFNLFFBQVEsaUJBQWlCO0FBQ3hDLE9BQU9DLEdBQUcsTUFBTSxLQUFLO0FBRXJCLE1BQU1DLGdCQUFnQjtBQUFBO0FBQUEsQ0FBQUwsY0FBQSxHQUFBTSxDQUFBLE9BQUdGLEdBQUcsQ0FBQ0csTUFBTSxDQUFDO0VBQ2xDQyxTQUFTLEVBQUVKLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUM7RUFDbENDLFFBQVEsRUFBRVAsR0FBRyxDQUFDSyxNQUFNLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQztFQUNqQ0UsSUFBSSxFQUFFUixHQUFHLENBQUNLLE1BQU0sQ0FBQyxDQUFDLENBQUNJLEtBQUssQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDSCxRQUFRLENBQUM7QUFDOUQsQ0FBQyxDQUFDO0FBRUYsT0FBTyxNQUFNSSxpQkFBaUIsQ0FBQztFQUM3QixNQUFNQyxhQUFhQSxDQUFDQyxJQUFTLEVBQXVCO0lBQUE7SUFBQWhCLGNBQUEsR0FBQWlCLENBQUE7SUFBQWpCLGNBQUEsR0FBQU0sQ0FBQTtJQUNsRCxJQUFJO01BQ0YsTUFBTTtRQUFFWSxLQUFLO1FBQUVDO01BQU0sQ0FBQztNQUFBO01BQUEsQ0FBQW5CLGNBQUEsR0FBQU0sQ0FBQSxPQUFHRCxnQkFBZ0IsQ0FBQ2UsUUFBUSxDQUFDSixJQUFJLENBQUM7TUFBQztNQUFBaEIsY0FBQSxHQUFBTSxDQUFBO01BQ3pELElBQUlZLEtBQUssRUFBRTtRQUFBO1FBQUFsQixjQUFBLEdBQUFxQixDQUFBO1FBQUFyQixjQUFBLEdBQUFNLENBQUE7UUFDVCxNQUFNLElBQUlnQixLQUFLLENBQUMscUJBQXFCSixLQUFLLENBQUNLLE9BQU8sRUFBRSxDQUFDO01BQ3ZELENBQUM7TUFBQTtNQUFBO1FBQUF2QixjQUFBLEdBQUFxQixDQUFBO01BQUE7O01BRUQ7TUFDQSxNQUFNRyxRQUFRO01BQUE7TUFBQSxDQUFBeEIsY0FBQSxHQUFBTSxDQUFBLE9BQUcsTUFBTUosTUFBTSxDQUFDdUIsVUFBVSxDQUFDQyxTQUFTLENBQUM7UUFDakRDLEtBQUssRUFBRTtVQUNMbkIsU0FBUyxFQUFFVyxLQUFLLENBQUNYLFNBQVM7VUFDMUJHLFFBQVEsRUFBRVEsS0FBSyxDQUFDUjtRQUNsQjtNQUNGLENBQUMsQ0FBQztNQUFDO01BQUFYLGNBQUEsR0FBQU0sQ0FBQTtNQUVILElBQUlrQixRQUFRLEVBQUU7UUFBQTtRQUFBeEIsY0FBQSxHQUFBcUIsQ0FBQTtRQUFBckIsY0FBQSxHQUFBTSxDQUFBO1FBQ1osTUFBTSxJQUFJZ0IsS0FBSyxDQUFDLHlDQUF5QyxDQUFDO01BQzVELENBQUM7TUFBQTtNQUFBO1FBQUF0QixjQUFBLEdBQUFxQixDQUFBO01BQUE7O01BRUQ7TUFDQSxNQUFNTyxNQUFNO01BQUE7TUFBQSxDQUFBNUIsY0FBQSxHQUFBTSxDQUFBLE9BQUcsTUFBTUosTUFBTSxDQUFDMEIsTUFBTSxDQUFDQyxVQUFVLENBQUM7UUFDNUNGLEtBQUssRUFBRTtVQUFFRyxFQUFFLEVBQUVYLEtBQUssQ0FBQ1I7UUFBUztNQUM5QixDQUFDLENBQUM7TUFBQztNQUFBWCxjQUFBLEdBQUFNLENBQUE7TUFFSCxJQUFJLENBQUNzQixNQUFNLEVBQUU7UUFBQTtRQUFBNUIsY0FBQSxHQUFBcUIsQ0FBQTtRQUFBckIsY0FBQSxHQUFBTSxDQUFBO1FBQ1gsTUFBTSxJQUFJZ0IsS0FBSyxDQUFDLGtCQUFrQixDQUFDO01BQ3JDLENBQUM7TUFBQTtNQUFBO1FBQUF0QixjQUFBLEdBQUFxQixDQUFBO01BQUE7O01BRUQ7TUFDQSxNQUFNVSxhQUFhO01BQUE7TUFBQSxDQUFBL0IsY0FBQSxHQUFBTSxDQUFBLFFBQUc7UUFBRTBCLElBQUksRUFBRSxDQUFDO1FBQUVDLE9BQU8sRUFBRSxDQUFDO1FBQUVDLEdBQUcsRUFBRTtNQUFFLENBQUM7TUFBQztNQUFBbEMsY0FBQSxHQUFBTSxDQUFBO01BQ3RELElBQUl5QixhQUFhLENBQUNaLEtBQUssQ0FBQ1AsSUFBSSxDQUErQixHQUFHbUIsYUFBYSxDQUFDSCxNQUFNLENBQUNoQixJQUFJLENBQStCLEVBQUU7UUFBQTtRQUFBWixjQUFBLEdBQUFxQixDQUFBO1FBQUFyQixjQUFBLEdBQUFNLENBQUE7UUFDdEgsTUFBTSxJQUFJZ0IsS0FBSyxDQUFDLGtEQUFrRCxDQUFDO01BQ3JFLENBQUM7TUFBQTtNQUFBO1FBQUF0QixjQUFBLEdBQUFxQixDQUFBO01BQUE7TUFFRCxNQUFNSSxVQUFVO01BQUE7TUFBQSxDQUFBekIsY0FBQSxHQUFBTSxDQUFBLFFBQUcsTUFBTUosTUFBTSxDQUFDdUIsVUFBVSxDQUFDVSxNQUFNLENBQUM7UUFDaERuQixJQUFJLEVBQUU7VUFDSlIsU0FBUyxFQUFFVyxLQUFLLENBQUNYLFNBQVM7VUFDMUJHLFFBQVEsRUFBRVEsS0FBSyxDQUFDUixRQUFRO1VBQ3hCQyxJQUFJLEVBQUVPLEtBQUssQ0FBQ1AsSUFBSTtVQUNoQndCLE1BQU0sRUFBRTtRQUNWO01BQ0YsQ0FBQyxDQUFDO01BQUM7TUFBQXBDLGNBQUEsR0FBQU0sQ0FBQTtNQUVISCxNQUFNLENBQUNrQyxJQUFJLENBQUMscUJBQXFCbEIsS0FBSyxDQUFDWCxTQUFTLGNBQWNXLEtBQUssQ0FBQ1IsUUFBUSxFQUFFLENBQUM7TUFBQztNQUFBWCxjQUFBLEdBQUFNLENBQUE7TUFDaEYsT0FBT21CLFVBQVU7SUFDbkIsQ0FBQyxDQUFDLE9BQU9QLEtBQUssRUFBRTtNQUFBO01BQUFsQixjQUFBLEdBQUFNLENBQUE7TUFDZEgsTUFBTSxDQUFDZSxLQUFLLENBQUMsMEJBQTBCLEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUFsQixjQUFBLEdBQUFNLENBQUE7TUFDaEQsTUFBTVksS0FBSztJQUNiO0VBQ0Y7RUFFQSxNQUFNb0IsYUFBYUEsQ0FBQ0MsWUFBb0IsRUFBOEI7SUFBQTtJQUFBdkMsY0FBQSxHQUFBaUIsQ0FBQTtJQUFBakIsY0FBQSxHQUFBTSxDQUFBO0lBQ3BFLElBQUk7TUFDRixNQUFNbUIsVUFBVTtNQUFBO01BQUEsQ0FBQXpCLGNBQUEsR0FBQU0sQ0FBQSxRQUFHLE1BQU1KLE1BQU0sQ0FBQ3VCLFVBQVUsQ0FBQ0ksVUFBVSxDQUFDO1FBQ3BERixLQUFLLEVBQUU7VUFBRUcsRUFBRSxFQUFFUztRQUFhO01BQzVCLENBQUMsQ0FBQztNQUFDO01BQUF2QyxjQUFBLEdBQUFNLENBQUE7TUFFSCxPQUFPbUIsVUFBVTtJQUNuQixDQUFDLENBQUMsT0FBT1AsS0FBSyxFQUFFO01BQUE7TUFBQWxCLGNBQUEsR0FBQU0sQ0FBQTtNQUNkSCxNQUFNLENBQUNlLEtBQUssQ0FBQywyQkFBMkIsRUFBRUEsS0FBSyxDQUFDO01BQUM7TUFBQWxCLGNBQUEsR0FBQU0sQ0FBQTtNQUNqRCxNQUFNWSxLQUFLO0lBQ2I7RUFDRjtFQUVBLE1BQU1zQixxQkFBcUJBLENBQUNoQyxTQUFpQixFQUF5QjtJQUFBO0lBQUFSLGNBQUEsR0FBQWlCLENBQUE7SUFBQWpCLGNBQUEsR0FBQU0sQ0FBQTtJQUNwRSxJQUFJO01BQ0YsTUFBTW1DLFdBQVc7TUFBQTtNQUFBLENBQUF6QyxjQUFBLEdBQUFNLENBQUEsUUFBRyxNQUFNSixNQUFNLENBQUN1QixVQUFVLENBQUNpQixRQUFRLENBQUM7UUFDbkRmLEtBQUssRUFBRTtVQUFFbkI7UUFBVTtNQUNyQixDQUFDLENBQUM7TUFBQztNQUFBUixjQUFBLEdBQUFNLENBQUE7TUFFSCxPQUFPbUMsV0FBVztJQUNwQixDQUFDLENBQUMsT0FBT3ZCLEtBQUssRUFBRTtNQUFBO01BQUFsQixjQUFBLEdBQUFNLENBQUE7TUFDZEgsTUFBTSxDQUFDZSxLQUFLLENBQUMsb0NBQW9DLEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUFsQixjQUFBLEdBQUFNLENBQUE7TUFDMUQsTUFBTVksS0FBSztJQUNiO0VBQ0Y7RUFFQSxNQUFNeUIsY0FBY0EsQ0FBQ0osWUFBb0IsRUFBRUssUUFBZ0IsRUFBdUI7SUFBQTtJQUFBNUMsY0FBQSxHQUFBaUIsQ0FBQTtJQUFBakIsY0FBQSxHQUFBTSxDQUFBO0lBQ2hGLElBQUk7TUFBQTtNQUFBTixjQUFBLEdBQUFNLENBQUE7TUFDRjtNQUFJO01BQUEsQ0FBQU4sY0FBQSxHQUFBcUIsQ0FBQSxVQUFBdUIsUUFBUSxHQUFHLENBQUM7TUFBQTtNQUFBLENBQUE1QyxjQUFBLEdBQUFxQixDQUFBLFVBQUl1QixRQUFRLEdBQUcsR0FBRyxHQUFFO1FBQUE7UUFBQTVDLGNBQUEsR0FBQXFCLENBQUE7UUFBQXJCLGNBQUEsR0FBQU0sQ0FBQTtRQUNsQyxNQUFNLElBQUlnQixLQUFLLENBQUMsb0NBQW9DLENBQUM7TUFDdkQsQ0FBQztNQUFBO01BQUE7UUFBQXRCLGNBQUEsR0FBQXFCLENBQUE7TUFBQTtNQUVELE1BQU1JLFVBQVU7TUFBQTtNQUFBLENBQUF6QixjQUFBLEdBQUFNLENBQUEsUUFBRyxNQUFNSixNQUFNLENBQUN1QixVQUFVLENBQUNvQixNQUFNLENBQUM7UUFDaERsQixLQUFLLEVBQUU7VUFBRUcsRUFBRSxFQUFFUztRQUFhLENBQUM7UUFDM0J2QixJQUFJLEVBQUU7VUFBRTRCO1FBQVM7TUFDbkIsQ0FBQyxDQUFDO01BQUM7TUFBQTVDLGNBQUEsR0FBQU0sQ0FBQTtNQUVISCxNQUFNLENBQUNrQyxJQUFJLENBQUMsbUNBQW1DRSxZQUFZLEtBQUtLLFFBQVEsR0FBRyxDQUFDO01BQUM7TUFBQTVDLGNBQUEsR0FBQU0sQ0FBQTtNQUM3RSxPQUFPbUIsVUFBVTtJQUNuQixDQUFDLENBQUMsT0FBT1AsS0FBSyxFQUFFO01BQUE7TUFBQWxCLGNBQUEsR0FBQU0sQ0FBQTtNQUNkSCxNQUFNLENBQUNlLEtBQUssQ0FBQywwQkFBMEIsRUFBRUEsS0FBSyxDQUFDO01BQUM7TUFBQWxCLGNBQUEsR0FBQU0sQ0FBQTtNQUNoRCxNQUFNWSxLQUFLO0lBQ2I7RUFDRjtFQUVBLE1BQU00QixrQkFBa0JBLENBQUNQLFlBQW9CLEVBQXVCO0lBQUE7SUFBQXZDLGNBQUEsR0FBQWlCLENBQUE7SUFBQWpCLGNBQUEsR0FBQU0sQ0FBQTtJQUNsRSxJQUFJO01BQ0YsTUFBTW1CLFVBQVU7TUFBQTtNQUFBLENBQUF6QixjQUFBLEdBQUFNLENBQUEsUUFBRyxNQUFNSixNQUFNLENBQUN1QixVQUFVLENBQUNvQixNQUFNLENBQUM7UUFDaERsQixLQUFLLEVBQUU7VUFBRUcsRUFBRSxFQUFFUztRQUFhLENBQUM7UUFDM0J2QixJQUFJLEVBQUU7VUFDSm9CLE1BQU0sRUFBRSxXQUFXO1VBQ25CUSxRQUFRLEVBQUUsR0FBRztVQUNiRyxjQUFjLEVBQUUsSUFBSUMsSUFBSSxDQUFDO1FBQzNCO01BQ0YsQ0FBQyxDQUFDO01BQUM7TUFBQWhELGNBQUEsR0FBQU0sQ0FBQTtNQUVISCxNQUFNLENBQUNrQyxJQUFJLENBQUMseUJBQXlCRSxZQUFZLEVBQUUsQ0FBQztNQUFDO01BQUF2QyxjQUFBLEdBQUFNLENBQUE7TUFDckQsT0FBT21CLFVBQVU7SUFDbkIsQ0FBQyxDQUFDLE9BQU9QLEtBQUssRUFBRTtNQUFBO01BQUFsQixjQUFBLEdBQUFNLENBQUE7TUFDZEgsTUFBTSxDQUFDZSxLQUFLLENBQUMsOEJBQThCLEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUFsQixjQUFBLEdBQUFNLENBQUE7TUFDcEQsTUFBTVksS0FBSztJQUNiO0VBQ0Y7RUFFQSxNQUFNK0IsY0FBY0EsQ0FBQ1YsWUFBb0IsRUFBdUI7SUFBQTtJQUFBdkMsY0FBQSxHQUFBaUIsQ0FBQTtJQUFBakIsY0FBQSxHQUFBTSxDQUFBO0lBQzlELElBQUk7TUFDRixNQUFNbUIsVUFBVTtNQUFBO01BQUEsQ0FBQXpCLGNBQUEsR0FBQU0sQ0FBQSxRQUFHLE1BQU1KLE1BQU0sQ0FBQ3VCLFVBQVUsQ0FBQ29CLE1BQU0sQ0FBQztRQUNoRGxCLEtBQUssRUFBRTtVQUFFRyxFQUFFLEVBQUVTO1FBQWEsQ0FBQztRQUMzQnZCLElBQUksRUFBRTtVQUFFb0IsTUFBTSxFQUFFO1FBQVU7TUFDNUIsQ0FBQyxDQUFDO01BQUM7TUFBQXBDLGNBQUEsR0FBQU0sQ0FBQTtNQUVISCxNQUFNLENBQUNrQyxJQUFJLENBQUMsdUJBQXVCRSxZQUFZLEVBQUUsQ0FBQztNQUFDO01BQUF2QyxjQUFBLEdBQUFNLENBQUE7TUFDbkQsT0FBT21CLFVBQVU7SUFDbkIsQ0FBQyxDQUFDLE9BQU9QLEtBQUssRUFBRTtNQUFBO01BQUFsQixjQUFBLEdBQUFNLENBQUE7TUFDZEgsTUFBTSxDQUFDZSxLQUFLLENBQUMsNEJBQTRCLEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUFsQixjQUFBLEdBQUFNLENBQUE7TUFDbEQsTUFBTVksS0FBSztJQUNiO0VBQ0Y7QUFDRjtBQUVBLE9BQU8sTUFBTWdDLGlCQUFpQjtBQUFBO0FBQUEsQ0FBQWxELGNBQUEsR0FBQU0sQ0FBQSxRQUFHLElBQUlRLGlCQUFpQixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=