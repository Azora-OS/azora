{"version":3,"names":["cov_22ulod0ivf","actualCoverage","express","s","require","compression","helmetConfig","corsConfig","createRateLimiter","errorHandler","chatRoutes","app","PORT","b","process","env","use","json","get","req","res","f","status","service","timestamp","Date","toISOString","message","endpoints","error","listen","console","log","module","exports"],"sources":["server.js"],"sourcesContent":["const express = require('express');\nconst compression = require('compression');\nconst { helmetConfig, corsConfig, createRateLimiter, errorHandler } = require('../shared/middleware');\nconst chatRoutes = require('./api/chat');\n\nconst app = express();\nconst PORT = process.env.PORT || 3004;\n\n// Security middleware stack\napp.use(helmetConfig);\napp.use(corsConfig);\napp.use(compression());\napp.use(express.json());\napp.use(createRateLimiter(100));\n\n// Routes\napp.use('/api/chat', chatRoutes);\n\n// Health check endpoint\napp.get('/api/health', (req, res) => {\n  res.json({ \n    status: 'OK', \n    service: 'AI Family Service',\n    timestamp: new Date().toISOString()\n  });\n});\n\n// Root endpoint\napp.get('/', (req, res) => {\n  res.json({ \n    message: 'Welcome to the Azora AI Family Service API',\n    endpoints: {\n      'POST /api/chat/chat': 'Send a message to a specific AI family member',\n      'POST /api/chat/auto-chat': 'Send a message and let the system choose the best family member',\n      'GET /api/chat/greeting': 'Get a personalized greeting from a family member',\n      'POST /api/chat/consult-family': 'Get insights from multiple family members on a topic',\n      'GET /api/chat/family-config': 'Get configuration of all AI family members',\n      'GET /api/chat/interaction-stats': 'Get statistics on family interactions',\n      'GET /api/health': 'Health check endpoint'\n    }\n  });\n});\n\n// 404 handler\napp.use((req, res) => {\n  res.status(404).json({ error: 'Endpoint not found' });\n});\n\n// Error handling middleware (must be last)\napp.use(errorHandler);\n\n// Start server\napp.listen(PORT, () => {\n  console.log(`ðŸ¤– Azora AI Family Service running on port ${PORT}`);\n  console.log(`ðŸ”— Health check: http://localhost:${PORT}/api/health`);\n  console.log(`ðŸ“š API docs: http://localhost:${PORT}`);\n});\n\nmodule.exports = app;"],"mappings":"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","ignoreList":[]}