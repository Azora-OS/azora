{"version":3,"names":["cov_2f28gx3mc8","actualCoverage","BiasType","BiasSeverity","DEFAULT_CONFIG","s","enabled","confidenceThreshold","autoMitigate","severityThreshold","MEDIUM","biasTypesToCheck","Object","values","BiasDetector","constructor","config","b","f","biasPatterns","initializeBiasPatterns","type","GENDER","patterns","severity","HIGH","description","RACE","CRITICAL","AGE","RELIGION","DISABILITY","SOCIOECONOMIC","NATIONALITY","detectBias","output","trim","length","hasBias","biasTypes","overallSeverity","LOW","mitigatedOutput","undefined","mitigationApplied","biasScores","checkDemographicBias","calculateOverallSeverity","mitigateBias","pattern","includes","regex","matches","Array","from","matchAll","match","index","confidence","calculateConfidence","push","context","extractContext","location","start","end","biases","mitigatedText","sortedBiases","sort","a","bias","biasedText","substring","neutralText","getNeutralReplacement","matchedText","Math","min","severityOrder","maxSeverity","score","currentIndex","indexOf","maxIndex","text","contextRadius","contextStart","max","contextEnd","biasType","replacements","updateConfig","getConfig"],"sources":["bias-detector.ts"],"sourcesContent":["/**\n * Bias Detector Module\n * Detects and mitigates demographic bias in AI outputs\n */\n\nimport {\n  BiasReport,\n  BiasScore,\n  BiasType,\n  BiasSeverity,\n  IBiasDetector\n} from '../types';\n\n/**\n * Configuration for bias detection\n */\nexport interface BiasDetectorConfig {\n  enabled: boolean;\n  confidenceThreshold: number; // 0-1\n  autoMitigate: boolean;\n  severityThreshold: BiasSeverity;\n  biasTypesToCheck: BiasType[];\n}\n\n/**\n * Default configuration\n */\nconst DEFAULT_CONFIG: BiasDetectorConfig = {\n  enabled: true,\n  confidenceThreshold: 0.6,\n  autoMitigate: true,\n  severityThreshold: BiasSeverity.MEDIUM,\n  biasTypesToCheck: Object.values(BiasType)\n};\n\n/**\n * Bias pattern definitions for detection\n */\ninterface BiasPattern {\n  type: BiasType;\n  patterns: RegExp[];\n  severity: BiasSeverity;\n  description: string;\n}\n\n/**\n * BiasDetector class\n * Implements demographic bias detection and mitigation\n */\nexport class BiasDetector implements IBiasDetector {\n  private config: BiasDetectorConfig;\n  private biasPatterns: BiasPattern[];\n\n  constructor(config: Partial<BiasDetectorConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.biasPatterns = this.initializeBiasPatterns();\n  }\n\n  /**\n   * Initialize bias detection patterns\n   */\n  private initializeBiasPatterns(): BiasPattern[] {\n    return [\n      // Gender bias patterns\n      {\n        type: BiasType.GENDER,\n        patterns: [\n          /\\b(men|male|he|him|his)\\s+(are|is)\\s+(better|superior|smarter|stronger)\\b/gi,\n          /\\b(women|female|she|her)\\s+(are|is)\\s+(worse|inferior|weaker|emotional)\\b/gi,\n          /\\b(girls?|ladies)\\s+(should|must|need to)\\s+(stay|remain|be)\\b/gi,\n          /\\b(boys?|men)\\s+(don't|shouldn't|can't)\\s+(cry|show emotion|be sensitive)\\b/gi,\n          /\\b(woman|female)\\s+driver\\b/gi,\n          /\\b(man|male)\\s+nurse\\b/gi,\n          /\\bfor\\s+a\\s+(woman|girl|female)\\b/gi\n        ],\n        severity: BiasSeverity.HIGH,\n        description: 'Gender-based stereotyping or discrimination'\n      },\n      // Race bias patterns\n      {\n        type: BiasType.RACE,\n        patterns: [\n          /\\b(white|black|asian|hispanic|latino)\\s+(people|person)\\s+(are|is)\\s+(better|worse|smarter|dumber)\\b/gi,\n          /\\b(race|ethnicity)\\s+(determines|defines|dictates)\\b/gi,\n          /\\b(all|every)\\s+(whites?|blacks?|asians?|hispanics?|latinos?)\\s+(are|do|have)\\b/gi,\n          /\\b(typical|stereotypical)\\s+(white|black|asian|hispanic|latino)\\b/gi\n        ],\n        severity: BiasSeverity.CRITICAL,\n        description: 'Racial stereotyping or discrimination'\n      },\n      // Age bias patterns\n      {\n        type: BiasType.AGE,\n        patterns: [\n          /\\b(old|elderly|senior)\\s+(people|person)\\s+(can't|cannot|shouldn't)\\b/gi,\n          /\\b(young|millennial|gen\\s*z)\\s+(people|person)\\s+(are|is)\\s+(lazy|entitled|irresponsible)\\b/gi,\n          /\\btoo\\s+(old|young)\\s+(for|to)\\b/gi,\n          /\\b(boomers?|millennials?)\\s+(are|always|never)\\b/gi\n        ],\n        severity: BiasSeverity.MEDIUM,\n        description: 'Age-based stereotyping or discrimination'\n      },\n      // Religion bias patterns\n      {\n        type: BiasType.RELIGION,\n        patterns: [\n          /\\b(muslim|christian|jewish|hindu|buddhist)s?\\s+(are|is)\\s+(terrorist|extremist|radical)\\b/gi,\n          /\\b(religion|faith)\\s+(makes|causes)\\s+(violence|terrorism|hatred)\\b/gi,\n          /\\b(all|every)\\s+(muslim|christian|jewish|hindu|buddhist)s?\\s+(believe|think|do)\\b/gi\n        ],\n        severity: BiasSeverity.CRITICAL,\n        description: 'Religious stereotyping or discrimination'\n      },\n      // Disability bias patterns\n      {\n        type: BiasType.DISABILITY,\n        patterns: [\n          /\\b(disabled|handicapped)\\s+(people|person)\\s+(can't|cannot|shouldn't)\\b/gi,\n          /\\b(wheelchair\\s+bound|confined\\s+to\\s+wheelchair)\\b/gi,\n          /\\b(suffers?\\s+from|victim\\s+of)\\s+(disability|condition)\\b/gi,\n          /\\b(normal|regular)\\s+people\\b/gi,\n          /\\b(retarded|crippled|lame)\\b/gi\n        ],\n        severity: BiasSeverity.HIGH,\n        description: 'Disability-based stereotyping or ableist language'\n      },\n      // Socioeconomic bias patterns\n      {\n        type: BiasType.SOCIOECONOMIC,\n        patterns: [\n          /\\b(poor|low-income)\\s+(people|person)\\s+(are|is)\\s+(lazy|stupid|criminal)\\b/gi,\n          /\\b(rich|wealthy)\\s+(people|person)\\s+(deserve|earned)\\s+(everything|success)\\b/gi,\n          /\\b(poverty|being\\s+poor)\\s+(is|means)\\s+(their\\s+fault|a\\s+choice)\\b/gi\n        ],\n        severity: BiasSeverity.MEDIUM,\n        description: 'Socioeconomic stereotyping or discrimination'\n      },\n      // Nationality bias patterns\n      {\n        type: BiasType.NATIONALITY,\n        patterns: [\n          /\\b(all|every)\\s+([A-Z][a-z]+)\\s+(people|person)\\s+(are|is)\\s+(lazy|criminal|terrorist)\\b/gi,\n          /\\b([A-Z][a-z]+)\\s+(people|person)\\s+(should|must)\\s+(go\\s+back|leave|stay\\s+out)\\b/gi\n        ],\n        severity: BiasSeverity.HIGH,\n        description: 'Nationality-based stereotyping or discrimination'\n      }\n    ];\n  }\n\n  /**\n   * Detect bias in output text\n   */\n  async detectBias(output: string): Promise<BiasReport> {\n    if (!this.config.enabled || !output || output.trim().length === 0) {\n      return {\n        hasBias: false,\n        biasTypes: [],\n        overallSeverity: BiasSeverity.LOW,\n        mitigatedOutput: undefined,\n        mitigationApplied: false\n      };\n    }\n\n    const biasScores = await this.checkDemographicBias(output);\n    const hasBias = biasScores.length > 0;\n    const overallSeverity = this.calculateOverallSeverity(biasScores);\n\n    let mitigatedOutput: string | undefined;\n    let mitigationApplied = false;\n\n    if (hasBias && this.config.autoMitigate) {\n      mitigatedOutput = await this.mitigateBias(output, biasScores);\n      mitigationApplied = true;\n    }\n\n    return {\n      hasBias,\n      biasTypes: biasScores,\n      overallSeverity,\n      mitigatedOutput,\n      mitigationApplied\n    };\n  }\n\n  /**\n   * Check for demographic bias in text\n   */\n  async checkDemographicBias(output: string): Promise<BiasScore[]> {\n    const biasScores: BiasScore[] = [];\n\n    for (const pattern of this.biasPatterns) {\n      // Skip if this bias type is not configured to be checked\n      if (!this.config.biasTypesToCheck.includes(pattern.type)) {\n        continue;\n      }\n\n      for (const regex of pattern.patterns) {\n        const matches = Array.from(output.matchAll(regex));\n\n        for (const match of matches) {\n          if (match.index !== undefined) {\n            const confidence = this.calculateConfidence(match[0], pattern);\n\n            // Only include if confidence meets threshold\n            if (confidence >= this.config.confidenceThreshold) {\n              biasScores.push({\n                type: pattern.type,\n                severity: pattern.severity,\n                confidence,\n                context: this.extractContext(output, match.index, match[0].length),\n                location: {\n                  start: match.index,\n                  end: match.index + match[0].length\n                }\n              });\n            }\n          }\n        }\n      }\n    }\n\n    return biasScores;\n  }\n\n  /**\n   * Mitigate detected bias in text\n   */\n  async mitigateBias(output: string, biases: BiasScore[]): Promise<string> {\n    if (biases.length === 0) {\n      return output;\n    }\n\n    let mitigatedText = output;\n\n    // Sort biases by location (descending) to avoid index shifting\n    const sortedBiases = [...biases].sort((a, b) => b.location.start - a.location.start);\n\n    for (const bias of sortedBiases) {\n      const biasedText = output.substring(bias.location.start, bias.location.end);\n      const neutralText = this.getNeutralReplacement(biasedText, bias.type);\n\n      mitigatedText =\n        mitigatedText.substring(0, bias.location.start) +\n        neutralText +\n        mitigatedText.substring(bias.location.end);\n    }\n\n    return mitigatedText;\n  }\n\n  /**\n   * Calculate confidence score for a bias match\n   */\n  private calculateConfidence(matchedText: string, pattern: BiasPattern): number {\n    // Base confidence on pattern severity and match characteristics\n    let confidence = 0.7; // Base confidence\n\n    // Increase confidence for critical severity patterns\n    if (pattern.severity === BiasSeverity.CRITICAL) {\n      confidence += 0.2;\n    } else if (pattern.severity === BiasSeverity.HIGH) {\n      confidence += 0.1;\n    }\n\n    // Increase confidence for longer matches (more specific)\n    if (matchedText.length > 30) {\n      confidence += 0.1;\n    }\n\n    // Cap at 1.0\n    return Math.min(confidence, 1.0);\n  }\n\n  /**\n   * Calculate overall severity from multiple bias scores\n   */\n  private calculateOverallSeverity(biasScores: BiasScore[]): BiasSeverity {\n    if (biasScores.length === 0) {\n      return BiasSeverity.LOW;\n    }\n\n    // Find the highest severity\n    const severityOrder = [\n      BiasSeverity.LOW,\n      BiasSeverity.MEDIUM,\n      BiasSeverity.HIGH,\n      BiasSeverity.CRITICAL\n    ];\n\n    let maxSeverity = BiasSeverity.LOW;\n    for (const score of biasScores) {\n      const currentIndex = severityOrder.indexOf(score.severity);\n      const maxIndex = severityOrder.indexOf(maxSeverity);\n      if (currentIndex > maxIndex) {\n        maxSeverity = score.severity;\n      }\n    }\n\n    return maxSeverity;\n  }\n\n  /**\n   * Extract context around a bias match\n   */\n  private extractContext(text: string, start: number, length: number): string {\n    const contextRadius = 50;\n    const contextStart = Math.max(0, start - contextRadius);\n    const contextEnd = Math.min(text.length, start + length + contextRadius);\n\n    let context = text.substring(contextStart, contextEnd);\n\n    // Add ellipsis if truncated\n    if (contextStart > 0) {\n      context = '...' + context;\n    }\n    if (contextEnd < text.length) {\n      context = context + '...';\n    }\n\n    return context;\n  }\n\n  /**\n   * Get neutral replacement for biased text\n   */\n  private getNeutralReplacement(biasedText: string, biasType: BiasType): string {\n    // Simple mitigation strategy: replace with neutral language\n    const replacements: Record<BiasType, string> = {\n      [BiasType.GENDER]: '[neutral language needed]',\n      [BiasType.RACE]: '[neutral language needed]',\n      [BiasType.AGE]: '[neutral language needed]',\n      [BiasType.RELIGION]: '[neutral language needed]',\n      [BiasType.DISABILITY]: '[neutral language needed]',\n      [BiasType.SOCIOECONOMIC]: '[neutral language needed]',\n      [BiasType.NATIONALITY]: '[neutral language needed]'\n    };\n\n    return replacements[biasType] || '[neutral language needed]';\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<BiasDetectorConfig>): void {\n    this.config = { ...this.config, ...config };\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): BiasDetectorConfig {\n    return { ...this.config };\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}