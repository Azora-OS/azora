{"version":3,"names":["cov_1td2mpwl8x","actualCoverage","express","s","require","cors","helmet","compression","rateLimit","jwt","app","use","origin","b","process","env","ALLOWED_ORIGINS","split","credentials","optionsSuccessStatus","validateInput","req","res","next","f","body","Object","keys","forEach","key","replace","json","limit","console","log","subscriptions","Map","plans","billing","initializePlans","defaultPlans","id","name","price","features","limits","courses","storage","support","plan","set","get","status","service","ubuntu","size","timestamp","Date","toISOString","planList","Array","from","values","success","data","total","length","error","post","userId","planId","paymentMethodId","subscription","now","currentPeriodStart","currentPeriodEnd","createdAt","message","params","userSubscription","find","sub","put","updatedAt","delete","cancelledAt","PORT","listen","module","exports"],"sources":["server.js"],"sourcesContent":["const express = require('express');\nconst cors = require('cors');\nconst helmet = require('helmet');\nconst compression = require('compression');\nconst rateLimit = require('express-rate-limit');\nconst jwt = require('jsonwebtoken');\n\nconst app = express();\n\napp.use(helmet());\napp.use(cors({\n  origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000'],\n  credentials: true,\n  optionsSuccessStatus: 200\n}));\napp.use(compression());\n\n// Input validation middleware\nconst validateInput = (req, res, next) => {\n  if (req.body) {\n    Object.keys(req.body).forEach(key => {\n      if (typeof req.body[key] === 'string') {\n        req.body[key] = req.body[key].replace(/<script[^>]*>.*?<\\/script>/gi, '');\n        req.body[key] = req.body[key].replace(/javascript:/gi, '');\n      }\n    });\n  }\n  next();\n};\napp.use(validateInput);\n\napp.use(express.json({ limit: '10mb' }));\n\n// ðŸ’³ AZORA SUBSCRIPTION - BILLING & PLANS\nconsole.log('ðŸŒŸ Azora Subscription Service - Initializing...');\n\n// Subscription data storage\nconst subscriptions = new Map();\nconst plans = new Map();\nconst billing = new Map();\n\n// Initialize subscription plans\nconst initializePlans = () => {\n  const defaultPlans = [\n    {\n      id: 'free',\n      name: 'Ubuntu Free',\n      price: 0,\n      features: ['basic-learning', 'community-access', '5-courses'],\n      limits: { courses: 5, storage: '1GB', support: 'community' }\n    },\n    {\n      id: 'pro',\n      name: 'Ubuntu Pro',\n      price: 29,\n      features: ['unlimited-learning', 'ai-tutor', 'certificates', 'priority-support'],\n      limits: { courses: 'unlimited', storage: '10GB', support: 'email' }\n    },\n    {\n      id: 'enterprise',\n      name: 'Ubuntu Enterprise',\n      price: 99,\n      features: ['white-label', 'custom-branding', 'analytics', 'dedicated-support'],\n      limits: { courses: 'unlimited', storage: '100GB', support: 'phone' }\n    }\n  ];\n  \n  defaultPlans.forEach(plan => plans.set(plan.id, plan));\n};\n\n// ðŸŽ¯ API ROUTES\napp.get('/api/health', (req, res) => {\n  res.json({\n    status: 'healthy',\n    service: 'azora-subscription',\n    ubuntu: 'I subscribe because we grow together',\n    subscriptions: subscriptions.size,\n    plans: plans.size,\n    timestamp: new Date().toISOString()\n  });\n});\n\n// Get all subscription plans\napp.get('/api/plans', (req, res) => {\n  try {\n    const planList = Array.from(plans.values());\n    \n    res.json({\n      success: true,\n      data: planList,\n      total: planList.length\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch plans' });\n  }\n});\n\n// Create subscription\napp.post('/api/subscriptions', (req, res) => {\n  try {\n    const { userId, planId, paymentMethodId } = req.body;\n    \n    if (!userId || !planId) {\n      return res.status(400).json({ error: 'User ID and plan ID are required' });\n    }\n    \n    const plan = plans.get(planId);\n    if (!plan) {\n      return res.status(404).json({ error: 'Plan not found' });\n    }\n    \n    const subscription = {\n      id: `sub_${Date.now()}`,\n      userId,\n      planId,\n      status: 'ACTIVE',\n      currentPeriodStart: new Date().toISOString(),\n      currentPeriodEnd: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n      createdAt: new Date().toISOString()\n    };\n    \n    subscriptions.set(subscription.id, subscription);\n    \n    res.status(201).json({\n      success: true,\n      message: 'Subscription created successfully',\n      data: subscription\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to create subscription' });\n  }\n});\n\n// Get user subscription\napp.get('/api/users/:userId/subscription', (req, res) => {\n  try {\n    const { userId } = req.params;\n    \n    const userSubscription = Array.from(subscriptions.values())\n      .find(sub => sub.userId === userId && sub.status === 'ACTIVE');\n    \n    if (!userSubscription) {\n      return res.status(404).json({ error: 'No active subscription found' });\n    }\n    \n    const plan = plans.get(userSubscription.planId);\n    \n    res.json({\n      success: true,\n      data: {\n        ...userSubscription,\n        plan\n      }\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch subscription' });\n  }\n});\n\n// Update subscription\napp.put('/api/subscriptions/:id', (req, res) => {\n  try {\n    const { id } = req.params;\n    const { planId, status } = req.body;\n    \n    const subscription = subscriptions.get(id);\n    if (!subscription) {\n      return res.status(404).json({ error: 'Subscription not found' });\n    }\n    \n    if (planId) {subscription.planId = planId;}\n    if (status) {subscription.status = status;}\n    subscription.updatedAt = new Date().toISOString();\n    \n    subscriptions.set(id, subscription);\n    \n    res.json({\n      success: true,\n      message: 'Subscription updated successfully',\n      data: subscription\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to update subscription' });\n  }\n});\n\n// Cancel subscription\napp.delete('/api/subscriptions/:id', (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    const subscription = subscriptions.get(id);\n    if (!subscription) {\n      return res.status(404).json({ error: 'Subscription not found' });\n    }\n    \n    subscription.status = 'CANCELLED';\n    subscription.cancelledAt = new Date().toISOString();\n    \n    subscriptions.set(id, subscription);\n    \n    res.json({\n      success: true,\n      message: 'Subscription cancelled successfully'\n    });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to cancel subscription' });\n  }\n});\n\n// Initialize and start server\ninitializePlans();\n\nconst PORT = process.env.PORT || 3024;\napp.listen(PORT, () => {\n  console.log('ðŸŒŸ Azora Subscription Service running on port', PORT);\n  console.log('ðŸ’³ Features: Plan Management, Billing, Subscription Lifecycle');\n});\n\nmodule.exports = app;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}