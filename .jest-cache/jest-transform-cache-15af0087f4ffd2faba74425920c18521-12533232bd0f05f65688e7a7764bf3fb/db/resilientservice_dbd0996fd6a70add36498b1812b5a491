a6f74c4a0b4a9cc4f0e135ae908f2898
/* istanbul ignore next */
function cov_2eai22tglk() {
  var path = "/workspaces/azora/services/azora-education/src/resilience/resilient-service.ts";
  var hash = "f544ab4edbb5ee7630fed013f71a4fc9b616148b";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-education/src/resilience/resilient-service.ts",
    statementMap: {
      "0": {
        start: {
          line: 15,
          column: 8
        },
        end: {
          line: 15,
          column: 65
        }
      },
      "1": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 58
        }
      },
      "2": {
        start: {
          line: 23,
          column: 26
        },
        end: {
          line: 23,
          column: 35
        }
      },
      "3": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 39,
          column: 7
        }
      },
      "4": {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 55,
          column: 7
        }
      },
      "5": {
        start: {
          line: 57,
          column: 8
        },
        end: {
          line: 57,
          column: 25
        }
      },
      "6": {
        start: {
          line: 64,
          column: 25
        },
        end: {
          line: 64,
          column: 51
        }
      },
      "7": {
        start: {
          line: 66,
          column: 8
        },
        end: {
          line: 85,
          column: 9
        }
      },
      "8": {
        start: {
          line: 68,
          column: 29
        },
        end: {
          line: 73,
          column: 14
        }
      },
      "9": {
        start: {
          line: 75,
          column: 12
        },
        end: {
          line: 82,
          column: 13
        }
      },
      "10": {
        start: {
          line: 76,
          column: 31
        },
        end: {
          line: 76,
          column: 52
        }
      },
      "11": {
        start: {
          line: 79,
          column: 16
        },
        end: {
          line: 79,
          column: 70
        }
      },
      "12": {
        start: {
          line: 81,
          column: 16
        },
        end: {
          line: 81,
          column: 30
        }
      },
      "13": {
        start: {
          line: 84,
          column: 12
        },
        end: {
          line: 84,
          column: 77
        }
      },
      "14": {
        start: {
          line: 88,
          column: 23
        },
        end: {
          line: 88,
          column: 66
        }
      },
      "15": {
        start: {
          line: 89,
          column: 8
        },
        end: {
          line: 91,
          column: 9
        }
      },
      "16": {
        start: {
          line: 90,
          column: 12
        },
        end: {
          line: 90,
          column: 26
        }
      },
      "17": {
        start: {
          line: 94,
          column: 25
        },
        end: {
          line: 94,
          column: 100
        }
      },
      "18": {
        start: {
          line: 96,
          column: 8
        },
        end: {
          line: 101,
          column: 10
        }
      },
      "19": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 123,
          column: 9
        }
      },
      "20": {
        start: {
          line: 109,
          column: 12
        },
        end: {
          line: 114,
          column: 15
        }
      },
      "21": {
        start: {
          line: 117,
          column: 12
        },
        end: {
          line: 121,
          column: 15
        }
      },
      "22": {
        start: {
          line: 122,
          column: 12
        },
        end: {
          line: 122,
          column: 75
        }
      },
      "23": {
        start: {
          line: 130,
          column: 8
        },
        end: {
          line: 130,
          column: 52
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 14,
            column: 4
          },
          end: {
            line: 14,
            column: 5
          }
        },
        loc: {
          start: {
            line: 14,
            column: 18
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 14
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 22,
            column: 4
          },
          end: {
            line: 22,
            column: 5
          }
        },
        loc: {
          start: {
            line: 22,
            column: 55
          },
          end: {
            line: 58,
            column: 5
          }
        },
        line: 22
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 63,
            column: 4
          },
          end: {
            line: 63,
            column: 5
          }
        },
        loc: {
          start: {
            line: 63,
            column: 78
          },
          end: {
            line: 102,
            column: 5
          }
        },
        line: 63
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 107,
            column: 4
          },
          end: {
            line: 107,
            column: 5
          }
        },
        loc: {
          start: {
            line: 107,
            column: 94
          },
          end: {
            line: 124,
            column: 5
          }
        },
        line: 107
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 129,
            column: 4
          },
          end: {
            line: 129,
            column: 5
          }
        },
        loc: {
          start: {
            line: 129,
            column: 23
          },
          end: {
            line: 131,
            column: 5
          }
        },
        line: 129
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 75,
            column: 12
          },
          end: {
            line: 82,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 75,
            column: 12
          },
          end: {
            line: 82,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 75
      },
      "1": {
        loc: {
          start: {
            line: 89,
            column: 8
          },
          end: {
            line: 91,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 89,
            column: 8
          },
          end: {
            line: 91,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 89
      },
      "2": {
        loc: {
          start: {
            line: 94,
            column: 25
          },
          end: {
            line: 94,
            column: 100
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 94,
            column: 25
          },
          end: {
            line: 94,
            column: 56
          }
        }, {
          start: {
            line: 94,
            column: 60
          },
          end: {
            line: 94,
            column: 100
          }
        }],
        line: 94
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "f544ab4edbb5ee7630fed013f71a4fc9b616148b"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2eai22tglk = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2eai22tglk();
import { OfflineAdapter } from './offline-adapter';
export class ResilientEducationService {
  constructor() {
    /* istanbul ignore next */
    cov_2eai22tglk().f[0]++;
    cov_2eai22tglk().s[0]++;
    this.offlineAdapter = new OfflineAdapter();
    /* istanbul ignore next */
    cov_2eai22tglk().s[1]++;
    this.lessonTemplates = this.initializeTemplates();
  }

  /**
   * Initialize fallback lesson templates
   */
  initializeTemplates() {
    /* istanbul ignore next */
    cov_2eai22tglk().f[1]++;
    const templates =
    /* istanbul ignore next */
    (cov_2eai22tglk().s[2]++, new Map());
    /* istanbul ignore next */
    cov_2eai22tglk().s[3]++;
    templates.set('mathematics', `
# Mathematics Lesson

## Introduction
This lesson covers fundamental mathematical concepts.

## Key Concepts
- Problem solving
- Logical thinking
- Pattern recognition

## Practice Exercises
1. Solve basic equations
2. Apply concepts to real-world problems
    `);
    /* istanbul ignore next */
    cov_2eai22tglk().s[4]++;
    templates.set('science', `
# Science Lesson

## Introduction
Explore the wonders of science through observation and experimentation.

## Key Concepts
- Scientific method
- Observation and hypothesis
- Experimentation

## Activities
1. Conduct simple experiments
2. Record observations
    `);
    /* istanbul ignore next */
    cov_2eai22tglk().s[5]++;
    return templates;
  }

  /**
   * Generate lesson with offline fallback
   */
  async generateLesson(topic, level) {
    /* istanbul ignore next */
    cov_2eai22tglk().f[2]++;
    const cacheKey =
    /* istanbul ignore next */
    (cov_2eai22tglk().s[6]++, `lesson-${topic}-${level}`);
    /* istanbul ignore next */
    cov_2eai22tglk().s[7]++;
    try {
      // Try online generation
      const response =
      /* istanbul ignore next */
      (cov_2eai22tglk().s[8]++, await fetch('http://localhost:3002/api/generate-lesson', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          topic,
          level
        }),
        signal: AbortSignal.timeout(5000)
      }));
      /* istanbul ignore next */
      cov_2eai22tglk().s[9]++;
      if (response.ok) {
        /* istanbul ignore next */
        cov_2eai22tglk().b[0][0]++;
        const lesson =
        /* istanbul ignore next */
        (cov_2eai22tglk().s[10]++, await response.json());

        // Cache for offline use
        /* istanbul ignore next */
        cov_2eai22tglk().s[11]++;
        this.offlineAdapter.cacheData(cacheKey, lesson, 1440); // 24 hours
        /* istanbul ignore next */
        cov_2eai22tglk().s[12]++;
        return lesson;
      } else
      /* istanbul ignore next */
      {
        cov_2eai22tglk().b[0][1]++;
      }
    } catch (error) {
      /* istanbul ignore next */
      cov_2eai22tglk().s[13]++;
      console.warn('Online generation failed, using offline fallback');
    }

    // Try cached version
    const cached =
    /* istanbul ignore next */
    (cov_2eai22tglk().s[14]++, this.offlineAdapter.getCachedData(cacheKey));
    /* istanbul ignore next */
    cov_2eai22tglk().s[15]++;
    if (cached) {
      /* istanbul ignore next */
      cov_2eai22tglk().b[1][0]++;
      cov_2eai22tglk().s[16]++;
      return cached;
    } else
    /* istanbul ignore next */
    {
      cov_2eai22tglk().b[1][1]++;
    }

    // Use template as last resort
    const template =
    /* istanbul ignore next */
    (cov_2eai22tglk().s[17]++,
    /* istanbul ignore next */
    (cov_2eai22tglk().b[2][0]++, this.lessonTemplates.get(topic)) ||
    /* istanbul ignore next */
    (cov_2eai22tglk().b[2][1]++, this.lessonTemplates.get('mathematics')));
    /* istanbul ignore next */
    cov_2eai22tglk().s[18]++;
    return {
      topic,
      content: template,
      level,
      timestamp: new Date().toISOString()
    };
  }

  /**
   * Submit assignment with offline queue
   */
  async submitAssignment(userId, assignmentId, answers) {
    /* istanbul ignore next */
    cov_2eai22tglk().f[3]++;
    cov_2eai22tglk().s[19]++;
    try {
      /* istanbul ignore next */
      cov_2eai22tglk().s[20]++;
      await fetch('http://localhost:3002/api/submit-assignment', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          userId,
          assignmentId,
          answers
        }),
        signal: AbortSignal.timeout(5000)
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_2eai22tglk().s[21]++;
      // Queue for later submission
      this.offlineAdapter.queueOperation('submit-assignment', {
        userId,
        assignmentId,
        answers
      });
      /* istanbul ignore next */
      cov_2eai22tglk().s[22]++;
      console.log('ðŸ“¥ Assignment queued for submission when online');
    }
  }

  /**
   * Get offline status
   */
  getOfflineStatus() {
    /* istanbul ignore next */
    cov_2eai22tglk().f[4]++;
    cov_2eai22tglk().s[23]++;
    return this.offlineAdapter.getQueueStatus();
  }
}
export default ResilientEducationService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmVhaTIydGdsayIsImFjdHVhbENvdmVyYWdlIiwiT2ZmbGluZUFkYXB0ZXIiLCJSZXNpbGllbnRFZHVjYXRpb25TZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJmIiwicyIsIm9mZmxpbmVBZGFwdGVyIiwibGVzc29uVGVtcGxhdGVzIiwiaW5pdGlhbGl6ZVRlbXBsYXRlcyIsInRlbXBsYXRlcyIsIk1hcCIsInNldCIsImdlbmVyYXRlTGVzc29uIiwidG9waWMiLCJsZXZlbCIsImNhY2hlS2V5IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwidGltZW91dCIsIm9rIiwiYiIsImxlc3NvbiIsImpzb24iLCJjYWNoZURhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiY2FjaGVkIiwiZ2V0Q2FjaGVkRGF0YSIsInRlbXBsYXRlIiwiZ2V0IiwiY29udGVudCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN1Ym1pdEFzc2lnbm1lbnQiLCJ1c2VySWQiLCJhc3NpZ25tZW50SWQiLCJhbnN3ZXJzIiwicXVldWVPcGVyYXRpb24iLCJsb2ciLCJnZXRPZmZsaW5lU3RhdHVzIiwiZ2V0UXVldWVTdGF0dXMiXSwic291cmNlcyI6WyJyZXNpbGllbnQtc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPZmZsaW5lQWRhcHRlciB9IGZyb20gJy4vb2ZmbGluZS1hZGFwdGVyJztcblxuZXhwb3J0IGludGVyZmFjZSBDYWNoZWRMZXNzb24ge1xuICAgIHRvcGljOiBzdHJpbmc7XG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIGxldmVsOiBzdHJpbmc7XG4gICAgdGltZXN0YW1wOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBSZXNpbGllbnRFZHVjYXRpb25TZXJ2aWNlIHtcbiAgICBwcml2YXRlIG9mZmxpbmVBZGFwdGVyOiBPZmZsaW5lQWRhcHRlcjxDYWNoZWRMZXNzb24+O1xuICAgIHByaXZhdGUgbGVzc29uVGVtcGxhdGVzOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub2ZmbGluZUFkYXB0ZXIgPSBuZXcgT2ZmbGluZUFkYXB0ZXI8Q2FjaGVkTGVzc29uPigpO1xuICAgICAgICB0aGlzLmxlc3NvblRlbXBsYXRlcyA9IHRoaXMuaW5pdGlhbGl6ZVRlbXBsYXRlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgZmFsbGJhY2sgbGVzc29uIHRlbXBsYXRlc1xuICAgICAqL1xuICAgIHByaXZhdGUgaW5pdGlhbGl6ZVRlbXBsYXRlcygpOiBNYXA8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVzID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIHRlbXBsYXRlcy5zZXQoJ21hdGhlbWF0aWNzJywgYFxuIyBNYXRoZW1hdGljcyBMZXNzb25cblxuIyMgSW50cm9kdWN0aW9uXG5UaGlzIGxlc3NvbiBjb3ZlcnMgZnVuZGFtZW50YWwgbWF0aGVtYXRpY2FsIGNvbmNlcHRzLlxuXG4jIyBLZXkgQ29uY2VwdHNcbi0gUHJvYmxlbSBzb2x2aW5nXG4tIExvZ2ljYWwgdGhpbmtpbmdcbi0gUGF0dGVybiByZWNvZ25pdGlvblxuXG4jIyBQcmFjdGljZSBFeGVyY2lzZXNcbjEuIFNvbHZlIGJhc2ljIGVxdWF0aW9uc1xuMi4gQXBwbHkgY29uY2VwdHMgdG8gcmVhbC13b3JsZCBwcm9ibGVtc1xuICAgIGApO1xuXG4gICAgICAgIHRlbXBsYXRlcy5zZXQoJ3NjaWVuY2UnLCBgXG4jIFNjaWVuY2UgTGVzc29uXG5cbiMjIEludHJvZHVjdGlvblxuRXhwbG9yZSB0aGUgd29uZGVycyBvZiBzY2llbmNlIHRocm91Z2ggb2JzZXJ2YXRpb24gYW5kIGV4cGVyaW1lbnRhdGlvbi5cblxuIyMgS2V5IENvbmNlcHRzXG4tIFNjaWVudGlmaWMgbWV0aG9kXG4tIE9ic2VydmF0aW9uIGFuZCBoeXBvdGhlc2lzXG4tIEV4cGVyaW1lbnRhdGlvblxuXG4jIyBBY3Rpdml0aWVzXG4xLiBDb25kdWN0IHNpbXBsZSBleHBlcmltZW50c1xuMi4gUmVjb3JkIG9ic2VydmF0aW9uc1xuICAgIGApO1xuXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgbGVzc29uIHdpdGggb2ZmbGluZSBmYWxsYmFja1xuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlTGVzc29uKHRvcGljOiBzdHJpbmcsIGxldmVsOiBzdHJpbmcpOiBQcm9taXNlPENhY2hlZExlc3Nvbj4ge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGBsZXNzb24tJHt0b3BpY30tJHtsZXZlbH1gO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUcnkgb25saW5lIGdlbmVyYXRpb25cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMi9hcGkvZ2VuZXJhdGUtbGVzc29uJywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdG9waWMsIGxldmVsIH0pLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCg1MDAwKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlc3NvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICAgICAgICAgIC8vIENhY2hlIGZvciBvZmZsaW5lIHVzZVxuICAgICAgICAgICAgICAgIHRoaXMub2ZmbGluZUFkYXB0ZXIuY2FjaGVEYXRhKGNhY2hlS2V5LCBsZXNzb24sIDE0NDApOyAvLyAyNCBob3Vyc1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxlc3NvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignT25saW5lIGdlbmVyYXRpb24gZmFpbGVkLCB1c2luZyBvZmZsaW5lIGZhbGxiYWNrJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgY2FjaGVkIHZlcnNpb25cbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5vZmZsaW5lQWRhcHRlci5nZXRDYWNoZWREYXRhKGNhY2hlS2V5KTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZSB0ZW1wbGF0ZSBhcyBsYXN0IHJlc29ydFxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMubGVzc29uVGVtcGxhdGVzLmdldCh0b3BpYykgfHwgdGhpcy5sZXNzb25UZW1wbGF0ZXMuZ2V0KCdtYXRoZW1hdGljcycpITtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9waWMsXG4gICAgICAgICAgICBjb250ZW50OiB0ZW1wbGF0ZSxcbiAgICAgICAgICAgIGxldmVsLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdWJtaXQgYXNzaWdubWVudCB3aXRoIG9mZmxpbmUgcXVldWVcbiAgICAgKi9cbiAgICBhc3luYyBzdWJtaXRBc3NpZ25tZW50KHVzZXJJZDogc3RyaW5nLCBhc3NpZ25tZW50SWQ6IHN0cmluZywgYW5zd2VyczogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDozMDAyL2FwaS9zdWJtaXQtYXNzaWdubWVudCcsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXJJZCwgYXNzaWdubWVudElkLCBhbnN3ZXJzIH0pLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCg1MDAwKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBRdWV1ZSBmb3IgbGF0ZXIgc3VibWlzc2lvblxuICAgICAgICAgICAgdGhpcy5vZmZsaW5lQWRhcHRlci5xdWV1ZU9wZXJhdGlvbignc3VibWl0LWFzc2lnbm1lbnQnLCB7XG4gICAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRJZCxcbiAgICAgICAgICAgICAgICBhbnN3ZXJzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OlIEFzc2lnbm1lbnQgcXVldWVkIGZvciBzdWJtaXNzaW9uIHdoZW4gb25saW5lJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgb2ZmbGluZSBzdGF0dXNcbiAgICAgKi9cbiAgICBnZXRPZmZsaW5lU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZsaW5lQWRhcHRlci5nZXRRdWV1ZVN0YXR1cygpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVzaWxpZW50RWR1Y2F0aW9uU2VydmljZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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