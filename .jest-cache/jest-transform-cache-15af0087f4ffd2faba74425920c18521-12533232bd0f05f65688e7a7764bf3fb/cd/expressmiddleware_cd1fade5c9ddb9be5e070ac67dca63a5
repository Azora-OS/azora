a33671a293e4ee19506791ea5986169e
/* istanbul ignore next */
function cov_m81tw4bel() {
  var path = "/workspaces/azora/services/shared/tracing/express-middleware.ts";
  var hash = "d661528f23b0abffcfaf74949141cb46a7c9b9c5";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/shared/tracing/express-middleware.ts",
    statementMap: {
      "0": {
        start: {
          line: 13,
          column: 2
        },
        end: {
          line: 56,
          column: 4
        }
      },
      "1": {
        start: {
          line: 14,
          column: 19
        },
        end: {
          line: 14,
          column: 50
        }
      },
      "2": {
        start: {
          line: 17,
          column: 17
        },
        end: {
          line: 27,
          column: 6
        }
      },
      "3": {
        start: {
          line: 30,
          column: 4
        },
        end: {
          line: 30,
          column: 29
        }
      },
      "4": {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 31,
          column: 54
        }
      },
      "5": {
        start: {
          line: 32,
          column: 4
        },
        end: {
          line: 32,
          column: 52
        }
      },
      "6": {
        start: {
          line: 35,
          column: 25
        },
        end: {
          line: 35,
          column: 33
        }
      },
      "7": {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 50,
          column: 6
        }
      },
      "8": {
        start: {
          line: 37,
          column: 6
        },
        end: {
          line: 40,
          column: 9
        }
      },
      "9": {
        start: {
          line: 42,
          column: 6
        },
        end: {
          line: 46,
          column: 7
        }
      },
      "10": {
        start: {
          line: 43,
          column: 8
        },
        end: {
          line: 43,
          column: 55
        }
      },
      "11": {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 45,
          column: 52
        }
      },
      "12": {
        start: {
          line: 48,
          column: 6
        },
        end: {
          line: 48,
          column: 17
        }
      },
      "13": {
        start: {
          line: 49,
          column: 6
        },
        end: {
          line: 49,
          column: 43
        }
      },
      "14": {
        start: {
          line: 53,
          column: 4
        },
        end: {
          line: 55,
          column: 7
        }
      },
      "15": {
        start: {
          line: 54,
          column: 6
        },
        end: {
          line: 54,
          column: 13
        }
      },
      "16": {
        start: {
          line: 67,
          column: 17
        },
        end: {
          line: 67,
          column: 44
        }
      },
      "17": {
        start: {
          line: 68,
          column: 15
        },
        end: {
          line: 74,
          column: 4
        }
      },
      "18": {
        start: {
          line: 76,
          column: 2
        },
        end: {
          line: 76,
          column: 14
        }
      },
      "19": {
        start: {
          line: 88,
          column: 17
        },
        end: {
          line: 88,
          column: 47
        }
      },
      "20": {
        start: {
          line: 89,
          column: 15
        },
        end: {
          line: 96,
          column: 4
        }
      },
      "21": {
        start: {
          line: 98,
          column: 2
        },
        end: {
          line: 98,
          column: 14
        }
      },
      "22": {
        start: {
          line: 105,
          column: 21
        },
        end: {
          line: 105,
          column: 50
        }
      },
      "23": {
        start: {
          line: 106,
          column: 2
        },
        end: {
          line: 109,
          column: 3
        }
      },
      "24": {
        start: {
          line: 107,
          column: 4
        },
        end: {
          line: 107,
          column: 38
        }
      },
      "25": {
        start: {
          line: 108,
          column: 4
        },
        end: {
          line: 108,
          column: 57
        }
      },
      "26": {
        start: {
          line: 116,
          column: 15
        },
        end: {
          line: 116,
          column: 36
        }
      },
      "27": {
        start: {
          line: 117,
          column: 2
        },
        end: {
          line: 119,
          column: 3
        }
      },
      "28": {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 118,
          column: 35
        }
      },
      "29": {
        start: {
          line: 130,
          column: 17
        },
        end: {
          line: 130,
          column: 41
        }
      },
      "30": {
        start: {
          line: 131,
          column: 15
        },
        end: {
          line: 137,
          column: 4
        }
      },
      "31": {
        start: {
          line: 139,
          column: 2
        },
        end: {
          line: 139,
          column: 14
        }
      },
      "32": {
        start: {
          line: 149,
          column: 17
        },
        end: {
          line: 149,
          column: 44
        }
      },
      "33": {
        start: {
          line: 150,
          column: 15
        },
        end: {
          line: 152,
          column: 4
        }
      },
      "34": {
        start: {
          line: 154,
          column: 2
        },
        end: {
          line: 154,
          column: 14
        }
      }
    },
    fnMap: {
      "0": {
        name: "createTracingMiddleware",
        decl: {
          start: {
            line: 12,
            column: 16
          },
          end: {
            line: 12,
            column: 39
          }
        },
        loc: {
          start: {
            line: 12,
            column: 42
          },
          end: {
            line: 57,
            column: 1
          }
        },
        line: 12
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 13,
            column: 9
          },
          end: {
            line: 13,
            column: 10
          }
        },
        loc: {
          start: {
            line: 13,
            column: 62
          },
          end: {
            line: 56,
            column: 3
          }
        },
        line: 13
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 36,
            column: 15
          },
          end: {
            line: 36,
            column: 16
          }
        },
        loc: {
          start: {
            line: 36,
            column: 36
          },
          end: {
            line: 50,
            column: 5
          }
        },
        line: 36
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 53,
            column: 56
          },
          end: {
            line: 53,
            column: 57
          }
        },
        loc: {
          start: {
            line: 53,
            column: 62
          },
          end: {
            line: 55,
            column: 5
          }
        },
        line: 53
      },
      "4": {
        name: "createDatabaseSpan",
        decl: {
          start: {
            line: 62,
            column: 16
          },
          end: {
            line: 62,
            column: 34
          }
        },
        loc: {
          start: {
            line: 66,
            column: 2
          },
          end: {
            line: 77,
            column: 1
          }
        },
        line: 66
      },
      "5": {
        name: "createServiceSpan",
        decl: {
          start: {
            line: 82,
            column: 16
          },
          end: {
            line: 82,
            column: 33
          }
        },
        loc: {
          start: {
            line: 87,
            column: 2
          },
          end: {
            line: 99,
            column: 1
          }
        },
        line: 87
      },
      "6": {
        name: "recordSpanError",
        decl: {
          start: {
            line: 104,
            column: 16
          },
          end: {
            line: 104,
            column: 31
          }
        },
        loc: {
          start: {
            line: 104,
            column: 58
          },
          end: {
            line: 110,
            column: 1
          }
        },
        line: 104
      },
      "7": {
        name: "addSpanAttributes",
        decl: {
          start: {
            line: 115,
            column: 16
          },
          end: {
            line: 115,
            column: 33
          }
        },
        loc: {
          start: {
            line: 115,
            column: 67
          },
          end: {
            line: 120,
            column: 1
          }
        },
        line: 115
      },
      "8": {
        name: "createCacheSpan",
        decl: {
          start: {
            line: 125,
            column: 16
          },
          end: {
            line: 125,
            column: 31
          }
        },
        loc: {
          start: {
            line: 129,
            column: 2
          },
          end: {
            line: 140,
            column: 1
          }
        },
        line: 129
      },
      "9": {
        name: "createBusinessSpan",
        decl: {
          start: {
            line: 145,
            column: 16
          },
          end: {
            line: 145,
            column: 34
          }
        },
        loc: {
          start: {
            line: 148,
            column: 2
          },
          end: {
            line: 155,
            column: 1
          }
        },
        line: 148
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 42,
            column: 6
          },
          end: {
            line: 46,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 42,
            column: 6
          },
          end: {
            line: 46,
            column: 7
          }
        }, {
          start: {
            line: 44,
            column: 13
          },
          end: {
            line: 46,
            column: 7
          }
        }],
        line: 42
      },
      "1": {
        loc: {
          start: {
            line: 105,
            column: 21
          },
          end: {
            line: 105,
            column: 50
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 105,
            column: 21
          },
          end: {
            line: 105,
            column: 25
          }
        }, {
          start: {
            line: 105,
            column: 29
          },
          end: {
            line: 105,
            column: 50
          }
        }],
        line: 105
      },
      "2": {
        loc: {
          start: {
            line: 106,
            column: 2
          },
          end: {
            line: 109,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 106,
            column: 2
          },
          end: {
            line: 109,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 106
      },
      "3": {
        loc: {
          start: {
            line: 117,
            column: 2
          },
          end: {
            line: 119,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 117,
            column: 2
          },
          end: {
            line: 119,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 117
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "d661528f23b0abffcfaf74949141cb46a7c9b9c5"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_m81tw4bel = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_m81tw4bel();
/**
 * Express middleware for OpenTelemetry tracing
 * Automatically traces all HTTP requests and responses
 */

import { trace, context, SpanStatusCode } from '@opentelemetry/api';

/**
 * Middleware to trace HTTP requests
 */
export function createTracingMiddleware() {
  /* istanbul ignore next */
  cov_m81tw4bel().f[0]++;
  cov_m81tw4bel().s[0]++;
  return (req, res, next) => {
    /* istanbul ignore next */
    cov_m81tw4bel().f[1]++;
    const tracer =
    /* istanbul ignore next */
    (cov_m81tw4bel().s[1]++, trace.getTracer('express-http'));

    // Create span for this request
    const span =
    /* istanbul ignore next */
    (cov_m81tw4bel().s[2]++, tracer.startSpan(`${req.method} ${req.path}`, {
      attributes: {
        'http.method': req.method,
        'http.url': req.url,
        'http.target': req.path,
        'http.host': req.hostname,
        'http.scheme': req.protocol,
        'http.client_ip': req.ip,
        'http.user_agent': req.get('user-agent')
      }
    }));

    // Store trace context in request for child spans
    /* istanbul ignore next */
    cov_m81tw4bel().s[3]++;
    req.span = span;
    /* istanbul ignore next */
    cov_m81tw4bel().s[4]++;
    req.traceId = span.spanContext().traceId;
    /* istanbul ignore next */
    cov_m81tw4bel().s[5]++;
    req.spanId = span.spanContext().spanId;

    // Capture response
    const originalSend =
    /* istanbul ignore next */
    (cov_m81tw4bel().s[6]++, res.send);
    /* istanbul ignore next */
    cov_m81tw4bel().s[7]++;
    res.send = function (data) {
      /* istanbul ignore next */
      cov_m81tw4bel().f[2]++;
      cov_m81tw4bel().s[8]++;
      span.setAttributes({
        'http.status_code': res.statusCode,
        'http.response_content_length': Buffer.byteLength(JSON.stringify(data))
      });
      /* istanbul ignore next */
      cov_m81tw4bel().s[9]++;
      if (res.statusCode >= 400) {
        /* istanbul ignore next */
        cov_m81tw4bel().b[0][0]++;
        cov_m81tw4bel().s[10]++;
        span.setStatus({
          code: SpanStatusCode.ERROR
        });
      } else {
        /* istanbul ignore next */
        cov_m81tw4bel().b[0][1]++;
        cov_m81tw4bel().s[11]++;
        span.setStatus({
          code: SpanStatusCode.OK
        });
      }
      /* istanbul ignore next */
      cov_m81tw4bel().s[12]++;
      span.end();
      /* istanbul ignore next */
      cov_m81tw4bel().s[13]++;
      return originalSend.call(this, data);
    };

    // Run handler in span context
    /* istanbul ignore next */
    cov_m81tw4bel().s[14]++;
    context.with(trace.setSpan(context.active(), span), () => {
      /* istanbul ignore next */
      cov_m81tw4bel().f[3]++;
      cov_m81tw4bel().s[15]++;
      next();
    });
  };
}

/**
 * Create a child span for database operations
 */
export function createDatabaseSpan(operation, query, attributes) {
  /* istanbul ignore next */
  cov_m81tw4bel().f[4]++;
  const tracer =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[16]++, trace.getTracer('database'));
  const span =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[17]++, tracer.startSpan(`db.${operation}`, {
    attributes: {
      'db.operation': operation,
      'db.statement': query,
      ...attributes
    }
  }));
  /* istanbul ignore next */
  cov_m81tw4bel().s[18]++;
  return span;
}

/**
 * Create a child span for external service calls
 */
export function createServiceSpan(serviceName, method, path, attributes) {
  /* istanbul ignore next */
  cov_m81tw4bel().f[5]++;
  const tracer =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[19]++, trace.getTracer('http-client'));
  const span =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[20]++, tracer.startSpan(`${serviceName}.${method}`, {
    attributes: {
      'http.method': method,
      'http.url': path,
      'peer.service': serviceName,
      ...attributes
    }
  }));
  /* istanbul ignore next */
  cov_m81tw4bel().s[21]++;
  return span;
}

/**
 * Record an error in the current span
 */
export function recordSpanError(error, span) {
  /* istanbul ignore next */
  cov_m81tw4bel().f[6]++;
  const targetSpan =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[22]++,
  /* istanbul ignore next */
  (cov_m81tw4bel().b[1][0]++, span) ||
  /* istanbul ignore next */
  (cov_m81tw4bel().b[1][1]++, trace.getActiveSpan()));
  /* istanbul ignore next */
  cov_m81tw4bel().s[23]++;
  if (targetSpan) {
    /* istanbul ignore next */
    cov_m81tw4bel().b[2][0]++;
    cov_m81tw4bel().s[24]++;
    targetSpan.recordException(error);
    /* istanbul ignore next */
    cov_m81tw4bel().s[25]++;
    targetSpan.setStatus({
      code: SpanStatusCode.ERROR
    });
  } else
  /* istanbul ignore next */
  {
    cov_m81tw4bel().b[2][1]++;
  }
}

/**
 * Add custom attributes to current span
 */
export function addSpanAttributes(attributes) {
  /* istanbul ignore next */
  cov_m81tw4bel().f[7]++;
  const span =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[26]++, trace.getActiveSpan());
  /* istanbul ignore next */
  cov_m81tw4bel().s[27]++;
  if (span) {
    /* istanbul ignore next */
    cov_m81tw4bel().b[3][0]++;
    cov_m81tw4bel().s[28]++;
    span.setAttributes(attributes);
  } else
  /* istanbul ignore next */
  {
    cov_m81tw4bel().b[3][1]++;
  }
}

/**
 * Create a child span for cache operations
 */
export function createCacheSpan(operation, key, attributes) {
  /* istanbul ignore next */
  cov_m81tw4bel().f[8]++;
  const tracer =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[29]++, trace.getTracer('cache'));
  const span =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[30]++, tracer.startSpan(`cache.${operation}`, {
    attributes: {
      'cache.operation': operation,
      'cache.key': key,
      ...attributes
    }
  }));
  /* istanbul ignore next */
  cov_m81tw4bel().s[31]++;
  return span;
}

/**
 * Create a child span for business operations
 */
export function createBusinessSpan(operation, attributes) {
  /* istanbul ignore next */
  cov_m81tw4bel().f[9]++;
  const tracer =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[32]++, trace.getTracer('business'));
  const span =
  /* istanbul ignore next */
  (cov_m81tw4bel().s[33]++, tracer.startSpan(`business.${operation}`, {
    attributes
  }));
  /* istanbul ignore next */
  cov_m81tw4bel().s[34]++;
  return span;
}
export default {
  createTracingMiddleware,
  createDatabaseSpan,
  createServiceSpan,
  recordSpanError,
  addSpanAttributes,
  createCacheSpan,
  createBusinessSpan
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfbTgxdHc0YmVsIiwiYWN0dWFsQ292ZXJhZ2UiLCJ0cmFjZSIsImNvbnRleHQiLCJTcGFuU3RhdHVzQ29kZSIsImNyZWF0ZVRyYWNpbmdNaWRkbGV3YXJlIiwiZiIsInMiLCJyZXEiLCJyZXMiLCJuZXh0IiwidHJhY2VyIiwiZ2V0VHJhY2VyIiwic3BhbiIsInN0YXJ0U3BhbiIsIm1ldGhvZCIsInBhdGgiLCJhdHRyaWJ1dGVzIiwidXJsIiwiaG9zdG5hbWUiLCJwcm90b2NvbCIsImlwIiwiZ2V0IiwidHJhY2VJZCIsInNwYW5Db250ZXh0Iiwic3BhbklkIiwib3JpZ2luYWxTZW5kIiwic2VuZCIsImRhdGEiLCJzZXRBdHRyaWJ1dGVzIiwic3RhdHVzQ29kZSIsIkJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJKU09OIiwic3RyaW5naWZ5IiwiYiIsInNldFN0YXR1cyIsImNvZGUiLCJFUlJPUiIsIk9LIiwiZW5kIiwiY2FsbCIsIndpdGgiLCJzZXRTcGFuIiwiYWN0aXZlIiwiY3JlYXRlRGF0YWJhc2VTcGFuIiwib3BlcmF0aW9uIiwicXVlcnkiLCJjcmVhdGVTZXJ2aWNlU3BhbiIsInNlcnZpY2VOYW1lIiwicmVjb3JkU3BhbkVycm9yIiwiZXJyb3IiLCJ0YXJnZXRTcGFuIiwiZ2V0QWN0aXZlU3BhbiIsInJlY29yZEV4Y2VwdGlvbiIsImFkZFNwYW5BdHRyaWJ1dGVzIiwiY3JlYXRlQ2FjaGVTcGFuIiwia2V5IiwiY3JlYXRlQnVzaW5lc3NTcGFuIl0sInNvdXJjZXMiOlsiZXhwcmVzcy1taWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRXhwcmVzcyBtaWRkbGV3YXJlIGZvciBPcGVuVGVsZW1ldHJ5IHRyYWNpbmdcbiAqIEF1dG9tYXRpY2FsbHkgdHJhY2VzIGFsbCBIVFRQIHJlcXVlc3RzIGFuZCByZXNwb25zZXNcbiAqL1xuXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSwgTmV4dEZ1bmN0aW9uIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyB0cmFjZSwgY29udGV4dCwgU3BhblN0YXR1c0NvZGUgfSBmcm9tICdAb3BlbnRlbGVtZXRyeS9hcGknO1xuXG4vKipcbiAqIE1pZGRsZXdhcmUgdG8gdHJhY2UgSFRUUCByZXF1ZXN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhY2luZ01pZGRsZXdhcmUoKSB7XG4gIHJldHVybiAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pID0+IHtcbiAgICBjb25zdCB0cmFjZXIgPSB0cmFjZS5nZXRUcmFjZXIoJ2V4cHJlc3MtaHR0cCcpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBzcGFuIGZvciB0aGlzIHJlcXVlc3RcbiAgICBjb25zdCBzcGFuID0gdHJhY2VyLnN0YXJ0U3BhbihgJHtyZXEubWV0aG9kfSAke3JlcS5wYXRofWAsIHtcbiAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgJ2h0dHAubWV0aG9kJzogcmVxLm1ldGhvZCxcbiAgICAgICAgJ2h0dHAudXJsJzogcmVxLnVybCxcbiAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnBhdGgsXG4gICAgICAgICdodHRwLmhvc3QnOiByZXEuaG9zdG5hbWUsXG4gICAgICAgICdodHRwLnNjaGVtZSc6IHJlcS5wcm90b2NvbCxcbiAgICAgICAgJ2h0dHAuY2xpZW50X2lwJzogcmVxLmlwLFxuICAgICAgICAnaHR0cC51c2VyX2FnZW50JzogcmVxLmdldCgndXNlci1hZ2VudCcpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFN0b3JlIHRyYWNlIGNvbnRleHQgaW4gcmVxdWVzdCBmb3IgY2hpbGQgc3BhbnNcbiAgICAocmVxIGFzIGFueSkuc3BhbiA9IHNwYW47XG4gICAgKHJlcSBhcyBhbnkpLnRyYWNlSWQgPSBzcGFuLnNwYW5Db250ZXh0KCkudHJhY2VJZDtcbiAgICAocmVxIGFzIGFueSkuc3BhbklkID0gc3Bhbi5zcGFuQ29udGV4dCgpLnNwYW5JZDtcblxuICAgIC8vIENhcHR1cmUgcmVzcG9uc2VcbiAgICBjb25zdCBvcmlnaW5hbFNlbmQgPSByZXMuc2VuZDtcbiAgICByZXMuc2VuZCA9IGZ1bmN0aW9uIChkYXRhOiBhbnkpIHtcbiAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICdodHRwLnJlc3BvbnNlX2NvbnRlbnRfbGVuZ3RoJzogQnVmZmVyLmJ5dGVMZW5ndGgoSlNPTi5zdHJpbmdpZnkoZGF0YSkpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgICAgc3Bhbi5zZXRTdGF0dXMoeyBjb2RlOiBTcGFuU3RhdHVzQ29kZS5FUlJPUiB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwYW4uc2V0U3RhdHVzKHsgY29kZTogU3BhblN0YXR1c0NvZGUuT0sgfSk7XG4gICAgICB9XG5cbiAgICAgIHNwYW4uZW5kKCk7XG4gICAgICByZXR1cm4gb3JpZ2luYWxTZW5kLmNhbGwodGhpcywgZGF0YSk7XG4gICAgfTtcblxuICAgIC8vIFJ1biBoYW5kbGVyIGluIHNwYW4gY29udGV4dFxuICAgIGNvbnRleHQud2l0aCh0cmFjZS5zZXRTcGFuKGNvbnRleHQuYWN0aXZlKCksIHNwYW4pLCAoKSA9PiB7XG4gICAgICBuZXh0KCk7XG4gICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgY2hpbGQgc3BhbiBmb3IgZGF0YWJhc2Ugb3BlcmF0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGF0YWJhc2VTcGFuKFxuICBvcGVyYXRpb246IHN0cmluZyxcbiAgcXVlcnk6IHN0cmluZyxcbiAgYXR0cmlidXRlcz86IFJlY29yZDxzdHJpbmcsIGFueT5cbikge1xuICBjb25zdCB0cmFjZXIgPSB0cmFjZS5nZXRUcmFjZXIoJ2RhdGFiYXNlJyk7XG4gIGNvbnN0IHNwYW4gPSB0cmFjZXIuc3RhcnRTcGFuKGBkYi4ke29wZXJhdGlvbn1gLCB7XG4gICAgYXR0cmlidXRlczoge1xuICAgICAgJ2RiLm9wZXJhdGlvbic6IG9wZXJhdGlvbixcbiAgICAgICdkYi5zdGF0ZW1lbnQnOiBxdWVyeSxcbiAgICAgIC4uLmF0dHJpYnV0ZXMsXG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIHNwYW47XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgY2hpbGQgc3BhbiBmb3IgZXh0ZXJuYWwgc2VydmljZSBjYWxsc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VydmljZVNwYW4oXG4gIHNlcnZpY2VOYW1lOiBzdHJpbmcsXG4gIG1ldGhvZDogc3RyaW5nLFxuICBwYXRoOiBzdHJpbmcsXG4gIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4pIHtcbiAgY29uc3QgdHJhY2VyID0gdHJhY2UuZ2V0VHJhY2VyKCdodHRwLWNsaWVudCcpO1xuICBjb25zdCBzcGFuID0gdHJhY2VyLnN0YXJ0U3BhbihgJHtzZXJ2aWNlTmFtZX0uJHttZXRob2R9YCwge1xuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICdodHRwLnVybCc6IHBhdGgsXG4gICAgICAncGVlci5zZXJ2aWNlJzogc2VydmljZU5hbWUsXG4gICAgICAuLi5hdHRyaWJ1dGVzLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBzcGFuO1xufVxuXG4vKipcbiAqIFJlY29yZCBhbiBlcnJvciBpbiB0aGUgY3VycmVudCBzcGFuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWNvcmRTcGFuRXJyb3IoZXJyb3I6IEVycm9yLCBzcGFuPzogYW55KSB7XG4gIGNvbnN0IHRhcmdldFNwYW4gPSBzcGFuIHx8IHRyYWNlLmdldEFjdGl2ZVNwYW4oKTtcbiAgaWYgKHRhcmdldFNwYW4pIHtcbiAgICB0YXJnZXRTcGFuLnJlY29yZEV4Y2VwdGlvbihlcnJvcik7XG4gICAgdGFyZ2V0U3Bhbi5zZXRTdGF0dXMoeyBjb2RlOiBTcGFuU3RhdHVzQ29kZS5FUlJPUiB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZCBjdXN0b20gYXR0cmlidXRlcyB0byBjdXJyZW50IHNwYW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFNwYW5BdHRyaWJ1dGVzKGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgY29uc3Qgc3BhbiA9IHRyYWNlLmdldEFjdGl2ZVNwYW4oKTtcbiAgaWYgKHNwYW4pIHtcbiAgICBzcGFuLnNldEF0dHJpYnV0ZXMoYXR0cmlidXRlcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjaGlsZCBzcGFuIGZvciBjYWNoZSBvcGVyYXRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYWNoZVNwYW4oXG4gIG9wZXJhdGlvbjogc3RyaW5nLFxuICBrZXk6IHN0cmluZyxcbiAgYXR0cmlidXRlcz86IFJlY29yZDxzdHJpbmcsIGFueT5cbikge1xuICBjb25zdCB0cmFjZXIgPSB0cmFjZS5nZXRUcmFjZXIoJ2NhY2hlJyk7XG4gIGNvbnN0IHNwYW4gPSB0cmFjZXIuc3RhcnRTcGFuKGBjYWNoZS4ke29wZXJhdGlvbn1gLCB7XG4gICAgYXR0cmlidXRlczoge1xuICAgICAgJ2NhY2hlLm9wZXJhdGlvbic6IG9wZXJhdGlvbixcbiAgICAgICdjYWNoZS5rZXknOiBrZXksXG4gICAgICAuLi5hdHRyaWJ1dGVzLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBzcGFuO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGNoaWxkIHNwYW4gZm9yIGJ1c2luZXNzIG9wZXJhdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJ1c2luZXNzU3BhbihcbiAgb3BlcmF0aW9uOiBzdHJpbmcsXG4gIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4pIHtcbiAgY29uc3QgdHJhY2VyID0gdHJhY2UuZ2V0VHJhY2VyKCdidXNpbmVzcycpO1xuICBjb25zdCBzcGFuID0gdHJhY2VyLnN0YXJ0U3BhbihgYnVzaW5lc3MuJHtvcGVyYXRpb259YCwge1xuICAgIGF0dHJpYnV0ZXMsXG4gIH0pO1xuXG4gIHJldHVybiBzcGFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGNyZWF0ZVRyYWNpbmdNaWRkbGV3YXJlLFxuICBjcmVhdGVEYXRhYmFzZVNwYW4sXG4gIGNyZWF0ZVNlcnZpY2VTcGFuLFxuICByZWNvcmRTcGFuRXJyb3IsXG4gIGFkZFNwYW5BdHRyaWJ1dGVzLFxuICBjcmVhdGVDYWNoZVNwYW4sXG4gIGNyZWF0ZUJ1c2luZXNzU3Bhbixcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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