{"version":3,"names":["cov_1j8viexswi","actualCoverage","PaymentService","constructor","axios","f","createPayment","amount","currency","userId","description","s","response","post","success","transactionId","data","status","error","b","message","getBalance","get","listTransactions","filters","params","refund","reason","earnTokens","transfer","fromUserId","toUserId"],"sources":["payment.service.ts"],"sourcesContent":["import { AxiosInstance } from 'axios';\nimport { ApiResponse, PaymentResponse, WalletBalance, Transaction } from '../types';\n\nexport class PaymentService {\n  constructor(private axios: AxiosInstance) {}\n\n  async createPayment(\n    amount: number, \n    currency: string, \n    userId: string,\n    description?: string\n  ): Promise<PaymentResponse> {\n    try {\n      const response = await this.axios.post('/payments/create', { \n        amount, \n        currency, \n        userId,\n        description \n      });\n      return { \n        success: true, \n        transactionId: response.data.transactionId,\n        amount,\n        currency,\n        status: response.data.status\n      };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || error.message \n      };\n    }\n  }\n\n  async getBalance(userId: string): Promise<ApiResponse<WalletBalance>> {\n    try {\n      const response = await this.axios.get(`/payments/balance/${userId}`);\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || error.message \n      };\n    }\n  }\n\n  async listTransactions(userId: string, filters?: {\n    limit?: number;\n    type?: 'credit' | 'debit';\n    startDate?: string;\n    endDate?: string;\n  }): Promise<ApiResponse<Transaction[]>> {\n    try {\n      const response = await this.axios.get(`/payments/transactions/${userId}`, {\n        params: filters\n      });\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || error.message \n      };\n    }\n  }\n\n  async refund(transactionId: string, reason?: string): Promise<PaymentResponse> {\n    try {\n      const response = await this.axios.post(`/payments/refund`, { \n        transactionId,\n        reason \n      });\n      return { \n        success: true, \n        transactionId: response.data.transactionId,\n        status: 'completed'\n      };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || error.message \n      };\n    }\n  }\n\n  async earnTokens(userId: string, amount: number, reason: string): Promise<PaymentResponse> {\n    try {\n      const response = await this.axios.post('/payments/earn', {\n        userId,\n        amount,\n        reason\n      });\n      return {\n        success: true,\n        transactionId: response.data.transactionId,\n        amount,\n        currency: 'AZR',\n        status: 'completed'\n      };\n    } catch (error: any) {\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message\n      };\n    }\n  }\n\n  async transfer(\n    fromUserId: string,\n    toUserId: string,\n    amount: number,\n    currency: string\n  ): Promise<PaymentResponse> {\n    try {\n      const response = await this.axios.post('/payments/transfer', {\n        fromUserId,\n        toUserId,\n        amount,\n        currency\n      });\n      return {\n        success: true,\n        transactionId: response.data.transactionId,\n        status: 'completed'\n      };\n    } catch (error: any) {\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message\n      };\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAZZ,OAAO,MAAME,cAAc,CAAC;EAC1BC,WAAWA,CAASC,KAAoB,EAAE;IAAA;IAAA,KAAtBA,KAAoB,GAApBA,KAAoB;IAAA;IAAAJ,cAAA,GAAAK,CAAA;EAAG;EAE3C,MAAMC,aAAaA,CACjBC,MAAc,EACdC,QAAgB,EAChBC,MAAc,EACdC,WAAoB,EACM;IAAA;IAAAV,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAW,CAAA;IAC1B,IAAI;MACF,MAAMC,QAAQ;MAAA;MAAA,CAAAZ,cAAA,GAAAW,CAAA,OAAG,MAAM,IAAI,CAACP,KAAK,CAACS,IAAI,CAAC,kBAAkB,EAAE;QACzDN,MAAM;QACNC,QAAQ;QACRC,MAAM;QACNC;MACF,CAAC,CAAC;MAAC;MAAAV,cAAA,GAAAW,CAAA;MACH,OAAO;QACLG,OAAO,EAAE,IAAI;QACbC,aAAa,EAAEH,QAAQ,CAACI,IAAI,CAACD,aAAa;QAC1CR,MAAM;QACNC,QAAQ;QACRS,MAAM,EAAEL,QAAQ,CAACI,IAAI,CAACC;MACxB,CAAC;IACH,CAAC,CAAC,OAAOC,KAAU,EAAE;MAAA;MAAAlB,cAAA,GAAAW,CAAA;MACnB,OAAO;QACLG,OAAO,EAAE,KAAK;QACdI,KAAK;QAAE;QAAA,CAAAlB,cAAA,GAAAmB,CAAA,UAAAD,KAAK,CAACN,QAAQ,EAAEI,IAAI,EAAEI,OAAO;QAAA;QAAA,CAAApB,cAAA,GAAAmB,CAAA,UAAID,KAAK,CAACE,OAAO;MACvD,CAAC;IACH;EACF;EAEA,MAAMC,UAAUA,CAACZ,MAAc,EAAuC;IAAA;IAAAT,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAW,CAAA;IACpE,IAAI;MACF,MAAMC,QAAQ;MAAA;MAAA,CAAAZ,cAAA,GAAAW,CAAA,OAAG,MAAM,IAAI,CAACP,KAAK,CAACkB,GAAG,CAAC,qBAAqBb,MAAM,EAAE,CAAC;MAAC;MAAAT,cAAA,GAAAW,CAAA;MACrE,OAAO;QAAEG,OAAO,EAAE,IAAI;QAAEE,IAAI,EAAEJ,QAAQ,CAACI;MAAK,CAAC;IAC/C,CAAC,CAAC,OAAOE,KAAU,EAAE;MAAA;MAAAlB,cAAA,GAAAW,CAAA;MACnB,OAAO;QACLG,OAAO,EAAE,KAAK;QACdI,KAAK;QAAE;QAAA,CAAAlB,cAAA,GAAAmB,CAAA,UAAAD,KAAK,CAACN,QAAQ,EAAEI,IAAI,EAAEI,OAAO;QAAA;QAAA,CAAApB,cAAA,GAAAmB,CAAA,UAAID,KAAK,CAACE,OAAO;MACvD,CAAC;IACH;EACF;EAEA,MAAMG,gBAAgBA,CAACd,MAAc,EAAEe,OAKtC,EAAuC;IAAA;IAAAxB,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAW,CAAA;IACtC,IAAI;MACF,MAAMC,QAAQ;MAAA;MAAA,CAAAZ,cAAA,GAAAW,CAAA,OAAG,MAAM,IAAI,CAACP,KAAK,CAACkB,GAAG,CAAC,0BAA0Bb,MAAM,EAAE,EAAE;QACxEgB,MAAM,EAAED;MACV,CAAC,CAAC;MAAC;MAAAxB,cAAA,GAAAW,CAAA;MACH,OAAO;QAAEG,OAAO,EAAE,IAAI;QAAEE,IAAI,EAAEJ,QAAQ,CAACI;MAAK,CAAC;IAC/C,CAAC,CAAC,OAAOE,KAAU,EAAE;MAAA;MAAAlB,cAAA,GAAAW,CAAA;MACnB,OAAO;QACLG,OAAO,EAAE,KAAK;QACdI,KAAK;QAAE;QAAA,CAAAlB,cAAA,GAAAmB,CAAA,UAAAD,KAAK,CAACN,QAAQ,EAAEI,IAAI,EAAEI,OAAO;QAAA;QAAA,CAAApB,cAAA,GAAAmB,CAAA,UAAID,KAAK,CAACE,OAAO;MACvD,CAAC;IACH;EACF;EAEA,MAAMM,MAAMA,CAACX,aAAqB,EAAEY,MAAe,EAA4B;IAAA;IAAA3B,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAW,CAAA;IAC7E,IAAI;MACF,MAAMC,QAAQ;MAAA;MAAA,CAAAZ,cAAA,GAAAW,CAAA,QAAG,MAAM,IAAI,CAACP,KAAK,CAACS,IAAI,CAAC,kBAAkB,EAAE;QACzDE,aAAa;QACbY;MACF,CAAC,CAAC;MAAC;MAAA3B,cAAA,GAAAW,CAAA;MACH,OAAO;QACLG,OAAO,EAAE,IAAI;QACbC,aAAa,EAAEH,QAAQ,CAACI,IAAI,CAACD,aAAa;QAC1CE,MAAM,EAAE;MACV,CAAC;IACH,CAAC,CAAC,OAAOC,KAAU,EAAE;MAAA;MAAAlB,cAAA,GAAAW,CAAA;MACnB,OAAO;QACLG,OAAO,EAAE,KAAK;QACdI,KAAK;QAAE;QAAA,CAAAlB,cAAA,GAAAmB,CAAA,UAAAD,KAAK,CAACN,QAAQ,EAAEI,IAAI,EAAEI,OAAO;QAAA;QAAA,CAAApB,cAAA,GAAAmB,CAAA,UAAID,KAAK,CAACE,OAAO;MACvD,CAAC;IACH;EACF;EAEA,MAAMQ,UAAUA,CAACnB,MAAc,EAAEF,MAAc,EAAEoB,MAAc,EAA4B;IAAA;IAAA3B,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAW,CAAA;IACzF,IAAI;MACF,MAAMC,QAAQ;MAAA;MAAA,CAAAZ,cAAA,GAAAW,CAAA,QAAG,MAAM,IAAI,CAACP,KAAK,CAACS,IAAI,CAAC,gBAAgB,EAAE;QACvDJ,MAAM;QACNF,MAAM;QACNoB;MACF,CAAC,CAAC;MAAC;MAAA3B,cAAA,GAAAW,CAAA;MACH,OAAO;QACLG,OAAO,EAAE,IAAI;QACbC,aAAa,EAAEH,QAAQ,CAACI,IAAI,CAACD,aAAa;QAC1CR,MAAM;QACNC,QAAQ,EAAE,KAAK;QACfS,MAAM,EAAE;MACV,CAAC;IACH,CAAC,CAAC,OAAOC,KAAU,EAAE;MAAA;MAAAlB,cAAA,GAAAW,CAAA;MACnB,OAAO;QACLG,OAAO,EAAE,KAAK;QACdI,KAAK;QAAE;QAAA,CAAAlB,cAAA,GAAAmB,CAAA,UAAAD,KAAK,CAACN,QAAQ,EAAEI,IAAI,EAAEI,OAAO;QAAA;QAAA,CAAApB,cAAA,GAAAmB,CAAA,UAAID,KAAK,CAACE,OAAO;MACvD,CAAC;IACH;EACF;EAEA,MAAMS,QAAQA,CACZC,UAAkB,EAClBC,QAAgB,EAChBxB,MAAc,EACdC,QAAgB,EACU;IAAA;IAAAR,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAW,CAAA;IAC1B,IAAI;MACF,MAAMC,QAAQ;MAAA;MAAA,CAAAZ,cAAA,GAAAW,CAAA,QAAG,MAAM,IAAI,CAACP,KAAK,CAACS,IAAI,CAAC,oBAAoB,EAAE;QAC3DiB,UAAU;QACVC,QAAQ;QACRxB,MAAM;QACNC;MACF,CAAC,CAAC;MAAC;MAAAR,cAAA,GAAAW,CAAA;MACH,OAAO;QACLG,OAAO,EAAE,IAAI;QACbC,aAAa,EAAEH,QAAQ,CAACI,IAAI,CAACD,aAAa;QAC1CE,MAAM,EAAE;MACV,CAAC;IACH,CAAC,CAAC,OAAOC,KAAU,EAAE;MAAA;MAAAlB,cAAA,GAAAW,CAAA;MACnB,OAAO;QACLG,OAAO,EAAE,KAAK;QACdI,KAAK;QAAE;QAAA,CAAAlB,cAAA,GAAAmB,CAAA,UAAAD,KAAK,CAACN,QAAQ,EAAEI,IAAI,EAAEI,OAAO;QAAA;QAAA,CAAApB,cAAA,GAAAmB,CAAA,UAAID,KAAK,CAACE,OAAO;MACvD,CAAC;IACH;EACF;AACF","ignoreList":[]}