1b77d86f2754ea744db4b33bea676902
/* istanbul ignore next */
function cov_1htaj9rx5o() {
  var path = "/workspaces/azora/services/azora-forge/src/ratings/ratingService.ts";
  var hash = "89b6f1f78132a150868f2577e880ff7c8d688301";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-forge/src/ratings/ratingService.ts",
    statementMap: {
      "0": {
        start: {
          line: 72,
          column: 70
        },
        end: {
          line: 72,
          column: 74
        }
      },
      "1": {
        start: {
          line: 75,
          column: 23
        },
        end: {
          line: 75,
          column: 45
        }
      },
      "2": {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 78,
          column: 5
        }
      },
      "3": {
        start: {
          line: 76,
          column: 29
        },
        end: {
          line: 76,
          column: 43
        }
      },
      "4": {
        start: {
          line: 77,
          column: 6
        },
        end: {
          line: 77,
          column: 61
        }
      },
      "5": {
        start: {
          line: 92,
          column: 27
        },
        end: {
          line: 104,
          column: 5
        }
      },
      "6": {
        start: {
          line: 110,
          column: 4
        },
        end: {
          line: 110,
          column: 51
        }
      },
      "7": {
        start: {
          line: 113,
          column: 4
        },
        end: {
          line: 113,
          column: 45
        }
      },
      "8": {
        start: {
          line: 115,
          column: 4
        },
        end: {
          line: 115,
          column: 18
        }
      },
      "9": {
        start: {
          line: 145,
          column: 4
        },
        end: {
          line: 145,
          column: 68
        }
      },
      "10": {
        start: {
          line: 147,
          column: 4
        },
        end: {
          line: 147,
          column: 24
        }
      },
      "11": {
        start: {
          line: 160,
          column: 4
        },
        end: {
          line: 160,
          column: 66
        }
      },
      "12": {
        start: {
          line: 181,
          column: 4
        },
        end: {
          line: 181,
          column: 37
        }
      },
      "13": {
        start: {
          line: 216,
          column: 19
        },
        end: {
          line: 219,
          column: 6
        }
      },
      "14": {
        start: {
          line: 221,
          column: 4
        },
        end: {
          line: 227,
          column: 6
        }
      },
      "15": {
        start: {
          line: 234,
          column: 20
        },
        end: {
          line: 234,
          column: 63
        }
      },
      "16": {
        start: {
          line: 249,
          column: 29
        },
        end: {
          line: 249,
          column: 31
        }
      },
      "17": {
        start: {
          line: 252,
          column: 4
        },
        end: {
          line: 256,
          column: 5
        }
      },
      "18": {
        start: {
          line: 253,
          column: 6
        },
        end: {
          line: 253,
          column: 31
        }
      },
      "19": {
        start: {
          line: 254,
          column: 11
        },
        end: {
          line: 256,
          column: 5
        }
      },
      "20": {
        start: {
          line: 255,
          column: 6
        },
        end: {
          line: 255,
          column: 33
        }
      },
      "21": {
        start: {
          line: 259,
          column: 4
        },
        end: {
          line: 260,
          column: 67
        }
      },
      "22": {
        start: {
          line: 259,
          column: 35
        },
        end: {
          line: 259,
          column: 63
        }
      },
      "23": {
        start: {
          line: 260,
          column: 9
        },
        end: {
          line: 260,
          column: 67
        }
      },
      "24": {
        start: {
          line: 260,
          column: 39
        },
        end: {
          line: 260,
          column: 66
        }
      },
      "25": {
        start: {
          line: 262,
          column: 4
        },
        end: {
          line: 262,
          column: 18
        }
      },
      "26": {
        start: {
          line: 271,
          column: 4
        },
        end: {
          line: 271,
          column: 16
        }
      },
      "27": {
        start: {
          line: 293,
          column: 4
        },
        end: {
          line: 293,
          column: 67
        }
      },
      "28": {
        start: {
          line: 297,
          column: 4
        },
        end: {
          line: 297,
          column: 51
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 64,
            column: 2
          },
          end: {
            line: 64,
            column: 3
          }
        },
        loc: {
          start: {
            line: 71,
            column: 22
          },
          end: {
            line: 116,
            column: 3
          }
        },
        line: 71
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 76,
            column: 24
          },
          end: {
            line: 76,
            column: 25
          }
        },
        loc: {
          start: {
            line: 76,
            column: 29
          },
          end: {
            line: 76,
            column: 43
          }
        },
        line: 76
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 121,
            column: 2
          },
          end: {
            line: 121,
            column: 3
          }
        },
        loc: {
          start: {
            line: 125,
            column: 21
          },
          end: {
            line: 148,
            column: 3
          }
        },
        line: 125
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 153,
            column: 2
          },
          end: {
            line: 153,
            column: 3
          }
        },
        loc: {
          start: {
            line: 153,
            column: 76
          },
          end: {
            line: 161,
            column: 3
          }
        },
        line: 153
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 166,
            column: 2
          },
          end: {
            line: 166,
            column: 3
          }
        },
        loc: {
          start: {
            line: 170,
            column: 51
          },
          end: {
            line: 182,
            column: 3
          }
        },
        line: 170
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 187,
            column: 2
          },
          end: {
            line: 187,
            column: 3
          }
        },
        loc: {
          start: {
            line: 187,
            column: 86
          },
          end: {
            line: 228,
            column: 3
          }
        },
        line: 187
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 233,
            column: 2
          },
          end: {
            line: 233,
            column: 3
          }
        },
        loc: {
          start: {
            line: 233,
            column: 82
          },
          end: {
            line: 240,
            column: 3
          }
        },
        line: 233
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 245,
            column: 2
          },
          end: {
            line: 245,
            column: 3
          }
        },
        loc: {
          start: {
            line: 248,
            column: 15
          },
          end: {
            line: 263,
            column: 3
          }
        },
        line: 248
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 268,
            column: 2
          },
          end: {
            line: 268,
            column: 3
          }
        },
        loc: {
          start: {
            line: 268,
            column: 75
          },
          end: {
            line: 272,
            column: 3
          }
        },
        line: 268
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 277,
            column: 2
          },
          end: {
            line: 277,
            column: 3
          }
        },
        loc: {
          start: {
            line: 281,
            column: 19
          },
          end: {
            line: 294,
            column: 3
          }
        },
        line: 281
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 296,
            column: 2
          },
          end: {
            line: 296,
            column: 3
          }
        },
        loc: {
          start: {
            line: 296,
            column: 53
          },
          end: {
            line: 300,
            column: 3
          }
        },
        line: 296
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 78,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 78,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 76
      },
      "1": {
        loc: {
          start: {
            line: 76,
            column: 29
          },
          end: {
            line: 76,
            column: 43
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 76,
            column: 29
          },
          end: {
            line: 76,
            column: 34
          }
        }, {
          start: {
            line: 76,
            column: 38
          },
          end: {
            line: 76,
            column: 43
          }
        }],
        line: 76
      },
      "2": {
        loc: {
          start: {
            line: 168,
            column: 4
          },
          end: {
            line: 168,
            column: 20
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 168,
            column: 19
          },
          end: {
            line: 168,
            column: 20
          }
        }],
        line: 168
      },
      "3": {
        loc: {
          start: {
            line: 169,
            column: 4
          },
          end: {
            line: 169,
            column: 22
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 169,
            column: 20
          },
          end: {
            line: 169,
            column: 22
          }
        }],
        line: 169
      },
      "4": {
        loc: {
          start: {
            line: 252,
            column: 4
          },
          end: {
            line: 256,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 252,
            column: 4
          },
          end: {
            line: 256,
            column: 5
          }
        }, {
          start: {
            line: 254,
            column: 11
          },
          end: {
            line: 256,
            column: 5
          }
        }],
        line: 252
      },
      "5": {
        loc: {
          start: {
            line: 252,
            column: 8
          },
          end: {
            line: 252,
            column: 61
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 252,
            column: 8
          },
          end: {
            line: 252,
            column: 31
          }
        }, {
          start: {
            line: 252,
            column: 35
          },
          end: {
            line: 252,
            column: 61
          }
        }],
        line: 252
      },
      "6": {
        loc: {
          start: {
            line: 254,
            column: 11
          },
          end: {
            line: 256,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 254,
            column: 11
          },
          end: {
            line: 256,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 254
      },
      "7": {
        loc: {
          start: {
            line: 254,
            column: 15
          },
          end: {
            line: 254,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 254,
            column: 15
          },
          end: {
            line: 254,
            column: 38
          }
        }, {
          start: {
            line: 254,
            column: 42
          },
          end: {
            line: 254,
            column: 68
          }
        }],
        line: 254
      },
      "8": {
        loc: {
          start: {
            line: 259,
            column: 4
          },
          end: {
            line: 260,
            column: 67
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 259,
            column: 4
          },
          end: {
            line: 260,
            column: 67
          }
        }, {
          start: {
            line: 260,
            column: 9
          },
          end: {
            line: 260,
            column: 67
          }
        }],
        line: 259
      },
      "9": {
        loc: {
          start: {
            line: 260,
            column: 9
          },
          end: {
            line: 260,
            column: 67
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 260,
            column: 9
          },
          end: {
            line: 260,
            column: 67
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 260
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0],
      "3": [0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "89b6f1f78132a150868f2577e880ff7c8d688301"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1htaj9rx5o = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1htaj9rx5o();
/*
AZORA PROPRIETARY LICENSE

Copyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.

See LICENSE file for details.
*/

/**
 * â­ RATING & REVIEW SERVICE
 * 
 * Builds trust through transparent ratings and reviews.
 * Buyers rate sellers, sellers can respond.
 */
export class RatingService {
  /**
   * Create a rating/review after project completion
   */
  static async createRating(data) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[0]++;
    const {
      projectId,
      sellerId,
      buyerId,
      ratings,
      review,
      images
    } =
    /* istanbul ignore next */
    (cov_1htaj9rx5o().s[0]++, data);

    // Validate ratings are 1-5
    const allRatings =
    /* istanbul ignore next */
    (cov_1htaj9rx5o().s[1]++, Object.values(ratings));
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[2]++;
    if (allRatings.some(r => {
      /* istanbul ignore next */
      cov_1htaj9rx5o().f[1]++;
      cov_1htaj9rx5o().s[3]++;
      return /* istanbul ignore next */(cov_1htaj9rx5o().b[1][0]++, r < 1) ||
      /* istanbul ignore next */
      (cov_1htaj9rx5o().b[1][1]++, r > 5);
    })) {
      /* istanbul ignore next */
      cov_1htaj9rx5o().b[0][0]++;
      cov_1htaj9rx5o().s[4]++;
      throw new Error('All ratings must be between 1 and 5');
    } else
    /* istanbul ignore next */
    {
      cov_1htaj9rx5o().b[0][1]++;
    }

    // Check if buyer already rated this project
    // const existing = await prisma.rating.findFirst({
    //   where: { projectId, buyerId }
    // });
    // if (existing) throw new Error('You have already rated this project');

    // Verify project is completed
    // const project = await ProjectService.getProject(projectId);
    // if (project.status !== 'completed') {
    //   throw new Error('Can only rate completed projects');
    // }

    const rating =
    /* istanbul ignore next */
    (cov_1htaj9rx5o().s[5]++, {
      id: `rating_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
      projectId,
      sellerId,
      buyerId,
      ratings,
      review,
      images,
      helpful: 0,
      verified: true,
      createdAt: new Date(),
      updatedAt: new Date()
    });

    // TODO: Save to database
    // await prisma.rating.create({ data: rating });

    // Update seller's rating summary
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[6]++;
    await this.updateSellerRatingSummary(sellerId);

    // Emit event
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[7]++;
    this.emitEvent('rating:created', rating);
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[8]++;
    return rating;
  }

  /**
   * Add seller response to a rating
   */
  static async addResponse(ratingId, sellerId, responseText) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[2]++;
    cov_1htaj9rx5o().s[9]++;
    // TODO: Fetch rating
    // const rating = await prisma.rating.findUnique({ where: { id: ratingId } });

    // Validate seller owns this rating
    // if (rating.sellerId !== sellerId) {
    //   throw new Error('Only the seller can respond to this rating');
    // }

    // Update rating with response
    // await prisma.rating.update({
    //   where: { id: ratingId },
    //   data: {
    //     response: {
    //       text: responseText,
    //       createdAt: new Date()
    //     }
    //   }
    // });

    this.emitEvent('rating:response_added', {
      ratingId,
      sellerId
    });
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[10]++;
    return {};
  }

  /**
   * Mark rating as helpful
   */
  static async markHelpful(ratingId, userId) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[3]++;
    cov_1htaj9rx5o().s[11]++;
    // TODO: Increment helpful count
    // await prisma.rating.update({
    //   where: { id: ratingId },
    //   data: { helpful: { increment: 1 } }
    // });

    this.emitEvent('rating:marked_helpful', {
      ratingId,
      userId
    });
  }

  /**
   * Get all ratings for a seller
   */
  static async getSellerRatings(sellerId, page =
  /* istanbul ignore next */
  (cov_1htaj9rx5o().b[2][0]++, 1), limit =
  /* istanbul ignore next */
  (cov_1htaj9rx5o().b[3][0]++, 20)) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[4]++;
    cov_1htaj9rx5o().s[12]++;
    // TODO: Fetch from database
    // const ratings = await prisma.rating.findMany({
    //   where: { sellerId },
    //   orderBy: { createdAt: 'desc' },
    //   skip: (page - 1) * limit,
    //   take: limit
    // });

    // const total = await prisma.rating.count({ where: { sellerId } });

    return {
      ratings: [],
      total: 0
    };
  }

  /**
   * Get rating summary for a seller
   */
  static async getSellerRatingSummary(sellerId) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[5]++;
    // TODO: Aggregate from database
    // const ratings = await prisma.rating.findMany({
    //   where: { sellerId },
    //   select: { ratings: true }
    // });

    // if (ratings.length === 0) {
    //   return {
    //     sellerId,
    //     totalRatings: 0,
    //     averageRatings: { overall: 0, quality: 0, communication: 0, delivery: 0, value: 0 },
    //     ratingDistribution: { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 },
    //     badges: []
    //   };
    // }

    // Calculate averages
    // const avgOverall = ratings.reduce((sum, r) => sum + r.ratings.overall, 0) / ratings.length;
    // ...

    // Calculate distribution
    // const distribution = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 };
    // ratings.forEach(r => {
    //   const overall = Math.round(r.ratings.overall);
    //   distribution[overall]++;
    // });

    // Determine badges
    const badges =
    /* istanbul ignore next */
    (cov_1htaj9rx5o().s[13]++, this.calculateBadges({
      totalRatings: 0,
      averageOverall: 0
    }));
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[14]++;
    return {
      sellerId,
      totalRatings: 0,
      averageRatings: {
        overall: 0,
        quality: 0,
        communication: 0,
        delivery: 0,
        value: 0
      },
      ratingDistribution: {
        5: 0,
        4: 0,
        3: 0,
        2: 0,
        1: 0
      },
      badges
    };
  }

  /**
   * Update seller's rating summary (called after new rating)
   */
  static async updateSellerRatingSummary(sellerId) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[6]++;
    const summary =
    /* istanbul ignore next */
    (cov_1htaj9rx5o().s[15]++, await this.getSellerRatingSummary(sellerId));
    // TODO: Cache summary in database for fast access
    // await prisma.sellerProfile.update({
    //   where: { id: sellerId },
    //   data: { ratingSummary: summary }
    // });
  }

  /**
   * Calculate badges based on performance
   */
  static calculateBadges(data) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[7]++;
    const badges =
    /* istanbul ignore next */
    (cov_1htaj9rx5o().s[16]++, []);

    // Top Rated Badge
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[17]++;
    if (
    /* istanbul ignore next */
    (cov_1htaj9rx5o().b[5][0]++, data.totalRatings >= 50) &&
    /* istanbul ignore next */
    (cov_1htaj9rx5o().b[5][1]++, data.averageOverall >= 4.8)) {
      /* istanbul ignore next */
      cov_1htaj9rx5o().b[4][0]++;
      cov_1htaj9rx5o().s[18]++;
      badges.push('Top Rated');
    } else {
      /* istanbul ignore next */
      cov_1htaj9rx5o().b[4][1]++;
      cov_1htaj9rx5o().s[19]++;
      if (
      /* istanbul ignore next */
      (cov_1htaj9rx5o().b[7][0]++, data.totalRatings >= 20) &&
      /* istanbul ignore next */
      (cov_1htaj9rx5o().b[7][1]++, data.averageOverall >= 4.5)) {
        /* istanbul ignore next */
        cov_1htaj9rx5o().b[6][0]++;
        cov_1htaj9rx5o().s[20]++;
        badges.push('Rising Star');
      } else
      /* istanbul ignore next */
      {
        cov_1htaj9rx5o().b[6][1]++;
      }
    }

    // Volume badges
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[21]++;
    if (data.totalRatings >= 100) {
      /* istanbul ignore next */
      cov_1htaj9rx5o().b[8][0]++;
      cov_1htaj9rx5o().s[22]++;
      badges.push('100+ Reviews');
    } else {
      /* istanbul ignore next */
      cov_1htaj9rx5o().b[8][1]++;
      cov_1htaj9rx5o().s[23]++;
      if (data.totalRatings >= 50) {
        /* istanbul ignore next */
        cov_1htaj9rx5o().b[9][0]++;
        cov_1htaj9rx5o().s[24]++;
        badges.push('50+ Reviews');
      } else
      /* istanbul ignore next */
      {
        cov_1htaj9rx5o().b[9][1]++;
      }
    }
    /* istanbul ignore next */
    cov_1htaj9rx5o().s[25]++;
    return badges;
  }

  /**
   * Get rating for a specific project
   */
  static async getProjectRating(projectId) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[8]++;
    cov_1htaj9rx5o().s[26]++;
    // TODO: Fetch from database
    // return await prisma.rating.findFirst({ where: { projectId } });
    return null;
  }

  /**
   * Flag inappropriate rating for review
   */
  static async flagRating(ratingId, userId, reason) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[9]++;
    cov_1htaj9rx5o().s[27]++;
    // TODO: Create moderation ticket
    // await prisma.moderationTicket.create({
    //   data: {
    //     type: 'rating',
    //     itemId: ratingId,
    //     reportedBy: userId,
    //     reason,
    //     status: 'pending'
    //   }
    // });

    this.emitEvent('rating:flagged', {
      ratingId,
      userId,
      reason
    });
  }
  static emitEvent(event, data) {
    /* istanbul ignore next */
    cov_1htaj9rx5o().f[10]++;
    cov_1htaj9rx5o().s[28]++;
    console.log(`ðŸ”” Rating Event: ${event}`, data);
    // Emit to organism event bus
    // OrganismEventBus.emit(event, data);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWh0YWo5cng1byIsImFjdHVhbENvdmVyYWdlIiwiUmF0aW5nU2VydmljZSIsImNyZWF0ZVJhdGluZyIsImRhdGEiLCJmIiwicHJvamVjdElkIiwic2VsbGVySWQiLCJidXllcklkIiwicmF0aW5ncyIsInJldmlldyIsImltYWdlcyIsInMiLCJhbGxSYXRpbmdzIiwiT2JqZWN0IiwidmFsdWVzIiwic29tZSIsInIiLCJiIiwiRXJyb3IiLCJyYXRpbmciLCJpZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJoZWxwZnVsIiwidmVyaWZpZWQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJ1cGRhdGVTZWxsZXJSYXRpbmdTdW1tYXJ5IiwiZW1pdEV2ZW50IiwiYWRkUmVzcG9uc2UiLCJyYXRpbmdJZCIsInJlc3BvbnNlVGV4dCIsIm1hcmtIZWxwZnVsIiwidXNlcklkIiwiZ2V0U2VsbGVyUmF0aW5ncyIsInBhZ2UiLCJsaW1pdCIsInRvdGFsIiwiZ2V0U2VsbGVyUmF0aW5nU3VtbWFyeSIsImJhZGdlcyIsImNhbGN1bGF0ZUJhZGdlcyIsInRvdGFsUmF0aW5ncyIsImF2ZXJhZ2VPdmVyYWxsIiwiYXZlcmFnZVJhdGluZ3MiLCJvdmVyYWxsIiwicXVhbGl0eSIsImNvbW11bmljYXRpb24iLCJkZWxpdmVyeSIsInZhbHVlIiwicmF0aW5nRGlzdHJpYnV0aW9uIiwic3VtbWFyeSIsInB1c2giLCJnZXRQcm9qZWN0UmF0aW5nIiwiZmxhZ1JhdGluZyIsInJlYXNvbiIsImV2ZW50IiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VzIjpbInJhdGluZ1NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFaT1JBIFBST1BSSUVUQVJZIExJQ0VOU0VcblxuQ29weXJpZ2h0IMKpIDIwMjUgQXpvcmEgRVMgKFB0eSkgTHRkLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuXG5TZWUgTElDRU5TRSBmaWxlIGZvciBkZXRhaWxzLlxuKi9cblxuZXhwb3J0IGludGVyZmFjZSBSYXRpbmcge1xuICBpZDogc3RyaW5nO1xuICBwcm9qZWN0SWQ6IHN0cmluZztcbiAgc2VsbGVySWQ6IHN0cmluZztcbiAgYnV5ZXJJZDogc3RyaW5nO1xuICByYXRpbmdzOiB7XG4gICAgb3ZlcmFsbDogbnVtYmVyOyAvLyAxLTVcbiAgICBxdWFsaXR5OiBudW1iZXI7IC8vIDEtNVxuICAgIGNvbW11bmljYXRpb246IG51bWJlcjsgLy8gMS01XG4gICAgZGVsaXZlcnk6IG51bWJlcjsgLy8gMS01XG4gICAgdmFsdWU6IG51bWJlcjsgLy8gMS01XG4gIH07XG4gIHJldmlldz86IHN0cmluZztcbiAgaW1hZ2VzPzogc3RyaW5nW107XG4gIHJlc3BvbnNlPzoge1xuICAgIHRleHQ6IHN0cmluZztcbiAgICBjcmVhdGVkQXQ6IERhdGU7XG4gIH07XG4gIGhlbHBmdWw6IG51bWJlcjsgLy8gSG93IG1hbnkgZm91bmQgdGhpcyBoZWxwZnVsXG4gIHZlcmlmaWVkOiBib29sZWFuOyAvLyBWZXJpZmllZCBwdXJjaGFzZVxuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWxsZXJSYXRpbmdTdW1tYXJ5IHtcbiAgc2VsbGVySWQ6IHN0cmluZztcbiAgdG90YWxSYXRpbmdzOiBudW1iZXI7XG4gIGF2ZXJhZ2VSYXRpbmdzOiB7XG4gICAgb3ZlcmFsbDogbnVtYmVyO1xuICAgIHF1YWxpdHk6IG51bWJlcjtcbiAgICBjb21tdW5pY2F0aW9uOiBudW1iZXI7XG4gICAgZGVsaXZlcnk6IG51bWJlcjtcbiAgICB2YWx1ZTogbnVtYmVyO1xuICB9O1xuICByYXRpbmdEaXN0cmlidXRpb246IHtcbiAgICA1OiBudW1iZXI7XG4gICAgNDogbnVtYmVyO1xuICAgIDM6IG51bWJlcjtcbiAgICAyOiBudW1iZXI7XG4gICAgMTogbnVtYmVyO1xuICB9O1xuICBiYWRnZXM6IHN0cmluZ1tdOyAvLyBlLmcuLCBcIlRvcCBSYXRlZFwiLCBcIkZhc3QgUmVzcG9uZGVyXCIsIFwiUXVhbGl0eSBBc3N1cmVkXCJcbn1cblxuLyoqXG4gKiDirZAgUkFUSU5HICYgUkVWSUVXIFNFUlZJQ0VcbiAqIFxuICogQnVpbGRzIHRydXN0IHRocm91Z2ggdHJhbnNwYXJlbnQgcmF0aW5ncyBhbmQgcmV2aWV3cy5cbiAqIEJ1eWVycyByYXRlIHNlbGxlcnMsIHNlbGxlcnMgY2FuIHJlc3BvbmQuXG4gKi9cbmV4cG9ydCBjbGFzcyBSYXRpbmdTZXJ2aWNlIHtcbiAgXG4gIC8qKlxuICAgKiBDcmVhdGUgYSByYXRpbmcvcmV2aWV3IGFmdGVyIHByb2plY3QgY29tcGxldGlvblxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZVJhdGluZyhkYXRhOiB7XG4gICAgcHJvamVjdElkOiBzdHJpbmc7XG4gICAgc2VsbGVySWQ6IHN0cmluZztcbiAgICBidXllcklkOiBzdHJpbmc7XG4gICAgcmF0aW5nczogUmF0aW5nWydyYXRpbmdzJ107XG4gICAgcmV2aWV3Pzogc3RyaW5nO1xuICAgIGltYWdlcz86IHN0cmluZ1tdO1xuICB9KTogUHJvbWlzZTxSYXRpbmc+IHtcbiAgICBjb25zdCB7IHByb2plY3RJZCwgc2VsbGVySWQsIGJ1eWVySWQsIHJhdGluZ3MsIHJldmlldywgaW1hZ2VzIH0gPSBkYXRhO1xuXG4gICAgLy8gVmFsaWRhdGUgcmF0aW5ncyBhcmUgMS01XG4gICAgY29uc3QgYWxsUmF0aW5ncyA9IE9iamVjdC52YWx1ZXMocmF0aW5ncyk7XG4gICAgaWYgKGFsbFJhdGluZ3Muc29tZShyID0+IHIgPCAxIHx8IHIgPiA1KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbGwgcmF0aW5ncyBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNScpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGJ1eWVyIGFscmVhZHkgcmF0ZWQgdGhpcyBwcm9qZWN0XG4gICAgLy8gY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEucmF0aW5nLmZpbmRGaXJzdCh7XG4gICAgLy8gICB3aGVyZTogeyBwcm9qZWN0SWQsIGJ1eWVySWQgfVxuICAgIC8vIH0pO1xuICAgIC8vIGlmIChleGlzdGluZykgdGhyb3cgbmV3IEVycm9yKCdZb3UgaGF2ZSBhbHJlYWR5IHJhdGVkIHRoaXMgcHJvamVjdCcpO1xuXG4gICAgLy8gVmVyaWZ5IHByb2plY3QgaXMgY29tcGxldGVkXG4gICAgLy8gY29uc3QgcHJvamVjdCA9IGF3YWl0IFByb2plY3RTZXJ2aWNlLmdldFByb2plY3QocHJvamVjdElkKTtcbiAgICAvLyBpZiAocHJvamVjdC5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKSB7XG4gICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBvbmx5IHJhdGUgY29tcGxldGVkIHByb2plY3RzJyk7XG4gICAgLy8gfVxuXG4gICAgY29uc3QgcmF0aW5nOiBSYXRpbmcgPSB7XG4gICAgICBpZDogYHJhdGluZ18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICBwcm9qZWN0SWQsXG4gICAgICBzZWxsZXJJZCxcbiAgICAgIGJ1eWVySWQsXG4gICAgICByYXRpbmdzLFxuICAgICAgcmV2aWV3LFxuICAgICAgaW1hZ2VzLFxuICAgICAgaGVscGZ1bDogMCxcbiAgICAgIHZlcmlmaWVkOiB0cnVlLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfTtcblxuICAgIC8vIFRPRE86IFNhdmUgdG8gZGF0YWJhc2VcbiAgICAvLyBhd2FpdCBwcmlzbWEucmF0aW5nLmNyZWF0ZSh7IGRhdGE6IHJhdGluZyB9KTtcblxuICAgIC8vIFVwZGF0ZSBzZWxsZXIncyByYXRpbmcgc3VtbWFyeVxuICAgIGF3YWl0IHRoaXMudXBkYXRlU2VsbGVyUmF0aW5nU3VtbWFyeShzZWxsZXJJZCk7XG5cbiAgICAvLyBFbWl0IGV2ZW50XG4gICAgdGhpcy5lbWl0RXZlbnQoJ3JhdGluZzpjcmVhdGVkJywgcmF0aW5nKTtcblxuICAgIHJldHVybiByYXRpbmc7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHNlbGxlciByZXNwb25zZSB0byBhIHJhdGluZ1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGFkZFJlc3BvbnNlKFxuICAgIHJhdGluZ0lkOiBzdHJpbmcsXG4gICAgc2VsbGVySWQ6IHN0cmluZyxcbiAgICByZXNwb25zZVRleHQ6IHN0cmluZ1xuICApOiBQcm9taXNlPFJhdGluZz4ge1xuICAgIC8vIFRPRE86IEZldGNoIHJhdGluZ1xuICAgIC8vIGNvbnN0IHJhdGluZyA9IGF3YWl0IHByaXNtYS5yYXRpbmcuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiByYXRpbmdJZCB9IH0pO1xuXG4gICAgLy8gVmFsaWRhdGUgc2VsbGVyIG93bnMgdGhpcyByYXRpbmdcbiAgICAvLyBpZiAocmF0aW5nLnNlbGxlcklkICE9PSBzZWxsZXJJZCkge1xuICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKCdPbmx5IHRoZSBzZWxsZXIgY2FuIHJlc3BvbmQgdG8gdGhpcyByYXRpbmcnKTtcbiAgICAvLyB9XG5cbiAgICAvLyBVcGRhdGUgcmF0aW5nIHdpdGggcmVzcG9uc2VcbiAgICAvLyBhd2FpdCBwcmlzbWEucmF0aW5nLnVwZGF0ZSh7XG4gICAgLy8gICB3aGVyZTogeyBpZDogcmF0aW5nSWQgfSxcbiAgICAvLyAgIGRhdGE6IHtcbiAgICAvLyAgICAgcmVzcG9uc2U6IHtcbiAgICAvLyAgICAgICB0ZXh0OiByZXNwb25zZVRleHQsXG4gICAgLy8gICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH1cbiAgICAvLyB9KTtcblxuICAgIHRoaXMuZW1pdEV2ZW50KCdyYXRpbmc6cmVzcG9uc2VfYWRkZWQnLCB7IHJhdGluZ0lkLCBzZWxsZXJJZCB9KTtcblxuICAgIHJldHVybiB7fSBhcyBSYXRpbmc7XG4gIH1cblxuICAvKipcbiAgICogTWFyayByYXRpbmcgYXMgaGVscGZ1bFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIG1hcmtIZWxwZnVsKHJhdGluZ0lkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVE9ETzogSW5jcmVtZW50IGhlbHBmdWwgY291bnRcbiAgICAvLyBhd2FpdCBwcmlzbWEucmF0aW5nLnVwZGF0ZSh7XG4gICAgLy8gICB3aGVyZTogeyBpZDogcmF0aW5nSWQgfSxcbiAgICAvLyAgIGRhdGE6IHsgaGVscGZ1bDogeyBpbmNyZW1lbnQ6IDEgfSB9XG4gICAgLy8gfSk7XG5cbiAgICB0aGlzLmVtaXRFdmVudCgncmF0aW5nOm1hcmtlZF9oZWxwZnVsJywgeyByYXRpbmdJZCwgdXNlcklkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgcmF0aW5ncyBmb3IgYSBzZWxsZXJcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRTZWxsZXJSYXRpbmdzKFxuICAgIHNlbGxlcklkOiBzdHJpbmcsXG4gICAgcGFnZTogbnVtYmVyID0gMSxcbiAgICBsaW1pdDogbnVtYmVyID0gMjBcbiAgKTogUHJvbWlzZTx7IHJhdGluZ3M6IFJhdGluZ1tdOyB0b3RhbDogbnVtYmVyIH0+IHtcbiAgICAvLyBUT0RPOiBGZXRjaCBmcm9tIGRhdGFiYXNlXG4gICAgLy8gY29uc3QgcmF0aW5ncyA9IGF3YWl0IHByaXNtYS5yYXRpbmcuZmluZE1hbnkoe1xuICAgIC8vICAgd2hlcmU6IHsgc2VsbGVySWQgfSxcbiAgICAvLyAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAvLyAgIHNraXA6IChwYWdlIC0gMSkgKiBsaW1pdCxcbiAgICAvLyAgIHRha2U6IGxpbWl0XG4gICAgLy8gfSk7XG5cbiAgICAvLyBjb25zdCB0b3RhbCA9IGF3YWl0IHByaXNtYS5yYXRpbmcuY291bnQoeyB3aGVyZTogeyBzZWxsZXJJZCB9IH0pO1xuXG4gICAgcmV0dXJuIHsgcmF0aW5nczogW10sIHRvdGFsOiAwIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJhdGluZyBzdW1tYXJ5IGZvciBhIHNlbGxlclxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldFNlbGxlclJhdGluZ1N1bW1hcnkoc2VsbGVySWQ6IHN0cmluZyk6IFByb21pc2U8U2VsbGVyUmF0aW5nU3VtbWFyeT4ge1xuICAgIC8vIFRPRE86IEFnZ3JlZ2F0ZSBmcm9tIGRhdGFiYXNlXG4gICAgLy8gY29uc3QgcmF0aW5ncyA9IGF3YWl0IHByaXNtYS5yYXRpbmcuZmluZE1hbnkoe1xuICAgIC8vICAgd2hlcmU6IHsgc2VsbGVySWQgfSxcbiAgICAvLyAgIHNlbGVjdDogeyByYXRpbmdzOiB0cnVlIH1cbiAgICAvLyB9KTtcblxuICAgIC8vIGlmIChyYXRpbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgIC8vICAgcmV0dXJuIHtcbiAgICAvLyAgICAgc2VsbGVySWQsXG4gICAgLy8gICAgIHRvdGFsUmF0aW5nczogMCxcbiAgICAvLyAgICAgYXZlcmFnZVJhdGluZ3M6IHsgb3ZlcmFsbDogMCwgcXVhbGl0eTogMCwgY29tbXVuaWNhdGlvbjogMCwgZGVsaXZlcnk6IDAsIHZhbHVlOiAwIH0sXG4gICAgLy8gICAgIHJhdGluZ0Rpc3RyaWJ1dGlvbjogeyA1OiAwLCA0OiAwLCAzOiAwLCAyOiAwLCAxOiAwIH0sXG4gICAgLy8gICAgIGJhZGdlczogW11cbiAgICAvLyAgIH07XG4gICAgLy8gfVxuXG4gICAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2VzXG4gICAgLy8gY29uc3QgYXZnT3ZlcmFsbCA9IHJhdGluZ3MucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIucmF0aW5ncy5vdmVyYWxsLCAwKSAvIHJhdGluZ3MubGVuZ3RoO1xuICAgIC8vIC4uLlxuXG4gICAgLy8gQ2FsY3VsYXRlIGRpc3RyaWJ1dGlvblxuICAgIC8vIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IHsgNTogMCwgNDogMCwgMzogMCwgMjogMCwgMTogMCB9O1xuICAgIC8vIHJhdGluZ3MuZm9yRWFjaChyID0+IHtcbiAgICAvLyAgIGNvbnN0IG92ZXJhbGwgPSBNYXRoLnJvdW5kKHIucmF0aW5ncy5vdmVyYWxsKTtcbiAgICAvLyAgIGRpc3RyaWJ1dGlvbltvdmVyYWxsXSsrO1xuICAgIC8vIH0pO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGJhZGdlc1xuICAgIGNvbnN0IGJhZGdlcyA9IHRoaXMuY2FsY3VsYXRlQmFkZ2VzKHtcbiAgICAgIHRvdGFsUmF0aW5nczogMCxcbiAgICAgIGF2ZXJhZ2VPdmVyYWxsOiAwXG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2VsbGVySWQsXG4gICAgICB0b3RhbFJhdGluZ3M6IDAsXG4gICAgICBhdmVyYWdlUmF0aW5nczogeyBvdmVyYWxsOiAwLCBxdWFsaXR5OiAwLCBjb21tdW5pY2F0aW9uOiAwLCBkZWxpdmVyeTogMCwgdmFsdWU6IDAgfSxcbiAgICAgIHJhdGluZ0Rpc3RyaWJ1dGlvbjogeyA1OiAwLCA0OiAwLCAzOiAwLCAyOiAwLCAxOiAwIH0sXG4gICAgICBiYWRnZXNcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzZWxsZXIncyByYXRpbmcgc3VtbWFyeSAoY2FsbGVkIGFmdGVyIG5ldyByYXRpbmcpXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBhc3luYyB1cGRhdGVTZWxsZXJSYXRpbmdTdW1tYXJ5KHNlbGxlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgdGhpcy5nZXRTZWxsZXJSYXRpbmdTdW1tYXJ5KHNlbGxlcklkKTtcbiAgICAvLyBUT0RPOiBDYWNoZSBzdW1tYXJ5IGluIGRhdGFiYXNlIGZvciBmYXN0IGFjY2Vzc1xuICAgIC8vIGF3YWl0IHByaXNtYS5zZWxsZXJQcm9maWxlLnVwZGF0ZSh7XG4gICAgLy8gICB3aGVyZTogeyBpZDogc2VsbGVySWQgfSxcbiAgICAvLyAgIGRhdGE6IHsgcmF0aW5nU3VtbWFyeTogc3VtbWFyeSB9XG4gICAgLy8gfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGJhZGdlcyBiYXNlZCBvbiBwZXJmb3JtYW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgY2FsY3VsYXRlQmFkZ2VzKGRhdGE6IHtcbiAgICB0b3RhbFJhdGluZ3M6IG51bWJlcjtcbiAgICBhdmVyYWdlT3ZlcmFsbDogbnVtYmVyO1xuICB9KTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGJhZGdlczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIFRvcCBSYXRlZCBCYWRnZVxuICAgIGlmIChkYXRhLnRvdGFsUmF0aW5ncyA+PSA1MCAmJiBkYXRhLmF2ZXJhZ2VPdmVyYWxsID49IDQuOCkge1xuICAgICAgYmFkZ2VzLnB1c2goJ1RvcCBSYXRlZCcpO1xuICAgIH0gZWxzZSBpZiAoZGF0YS50b3RhbFJhdGluZ3MgPj0gMjAgJiYgZGF0YS5hdmVyYWdlT3ZlcmFsbCA+PSA0LjUpIHtcbiAgICAgIGJhZGdlcy5wdXNoKCdSaXNpbmcgU3RhcicpO1xuICAgIH1cblxuICAgIC8vIFZvbHVtZSBiYWRnZXNcbiAgICBpZiAoZGF0YS50b3RhbFJhdGluZ3MgPj0gMTAwKSB7YmFkZ2VzLnB1c2goJzEwMCsgUmV2aWV3cycpO31cbiAgICBlbHNlIGlmIChkYXRhLnRvdGFsUmF0aW5ncyA+PSA1MCkge2JhZGdlcy5wdXNoKCc1MCsgUmV2aWV3cycpO31cblxuICAgIHJldHVybiBiYWRnZXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJhdGluZyBmb3IgYSBzcGVjaWZpYyBwcm9qZWN0XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0UHJvamVjdFJhdGluZyhwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8UmF0aW5nIHwgbnVsbD4ge1xuICAgIC8vIFRPRE86IEZldGNoIGZyb20gZGF0YWJhc2VcbiAgICAvLyByZXR1cm4gYXdhaXQgcHJpc21hLnJhdGluZy5maW5kRmlyc3QoeyB3aGVyZTogeyBwcm9qZWN0SWQgfSB9KTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbGFnIGluYXBwcm9wcmlhdGUgcmF0aW5nIGZvciByZXZpZXdcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmbGFnUmF0aW5nKFxuICAgIHJhdGluZ0lkOiBzdHJpbmcsXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgcmVhc29uOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVE9ETzogQ3JlYXRlIG1vZGVyYXRpb24gdGlja2V0XG4gICAgLy8gYXdhaXQgcHJpc21hLm1vZGVyYXRpb25UaWNrZXQuY3JlYXRlKHtcbiAgICAvLyAgIGRhdGE6IHtcbiAgICAvLyAgICAgdHlwZTogJ3JhdGluZycsXG4gICAgLy8gICAgIGl0ZW1JZDogcmF0aW5nSWQsXG4gICAgLy8gICAgIHJlcG9ydGVkQnk6IHVzZXJJZCxcbiAgICAvLyAgICAgcmVhc29uLFxuICAgIC8vICAgICBzdGF0dXM6ICdwZW5kaW5nJ1xuICAgIC8vICAgfVxuICAgIC8vIH0pO1xuXG4gICAgdGhpcy5lbWl0RXZlbnQoJ3JhdGluZzpmbGFnZ2VkJywgeyByYXRpbmdJZCwgdXNlcklkLCByZWFzb24gfSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBlbWl0RXZlbnQoZXZlbnQ6IHN0cmluZywgZGF0YTogYW55KSB7XG4gICAgY29uc29sZS5sb2coYPCflJQgUmF0aW5nIEV2ZW50OiAke2V2ZW50fWAsIGRhdGEpO1xuICAgIC8vIEVtaXQgdG8gb3JnYW5pc20gZXZlbnQgYnVzXG4gICAgLy8gT3JnYW5pc21FdmVudEJ1cy5lbWl0KGV2ZW50LCBkYXRhKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlWTtJQUFBQSxjQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxjQUFBO0FBZlo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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