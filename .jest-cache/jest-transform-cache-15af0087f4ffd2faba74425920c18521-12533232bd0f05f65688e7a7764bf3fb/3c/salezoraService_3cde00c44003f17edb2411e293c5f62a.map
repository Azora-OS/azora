{"version":3,"names":["cov_xu9tmg6k","actualCoverage","PrismaClient","prisma","s","AuditService","log","eventType","details","userId","f","auditLog","create","data","SalezoraService","createCampaign","name","target","strategy","deadline","campaign","salesCampaign","addLead","campaignId","score","lead","getCampaigns","findMany","orderBy","createdAt","getLeads","where","b","optimizeStrategy","findUnique","id","Error","optimizedStrategy","update"],"sources":["salezoraService.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport { PrismaClient } from '@prisma/client';\nconst prisma = new PrismaClient();\n\nexport class AuditService {\n  static async log(eventType: string, details: any, userId?: string) {\n    await prisma.auditLog.create({\n      data: {\n        eventType,\n        details,\n        userId,\n      },\n    });\n  }\n}\n\nexport class SalezoraService {\n  static async createCampaign(name: string, target: string, strategy: string, deadline: Date) {\n    const campaign = await prisma.salesCampaign.create({\n      data: {\n        name,\n        target,\n        strategy,\n        deadline,\n      },\n    });\n    await AuditService.log('CAMPAIGN_CREATED', { name, target, strategy, deadline }, 'salezora');\n    return campaign;\n  }\n\n  static async addLead(userId: string, campaignId: string, score: number) {\n    const lead = await prisma.lead.create({\n      data: {\n        userId,\n        campaignId,\n        score,\n      },\n    });\n    await AuditService.log('LEAD_ADDED', { userId, campaignId, score }, 'salezora');\n    return lead;\n  }\n\n  static async getCampaigns() {\n    return await prisma.salesCampaign.findMany({\n      orderBy: { createdAt: 'desc' },\n    });\n  }\n\n  static async getLeads(campaignId?: string) {\n    return await prisma.lead.findMany({\n      where: campaignId ? { campaignId } : {},\n      orderBy: { createdAt: 'desc' },\n    });\n  }\n\n  // AI-driven strategy optimization (placeholder)\n  static async optimizeStrategy(campaignId: string) {\n    // Integrate with Azora AI for best marketing strategies\n    const campaign = await prisma.salesCampaign.findUnique({ where: { id: campaignId } });\n    if (!campaign) {throw new Error('Campaign not found');}\n    // Mock AI optimization\n    const optimizedStrategy = `${campaign.strategy} + AI-enhanced targeting`;\n    await prisma.salesCampaign.update({\n      where: { id: campaignId },\n      data: { strategy: optimizedStrategy },\n    });\n    await AuditService.log('STRATEGY_OPTIMIZED', { campaignId, optimizedStrategy }, 'salezora');\n    return optimizedStrategy;\n  }\n}"],"mappings":"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","ignoreList":[]}