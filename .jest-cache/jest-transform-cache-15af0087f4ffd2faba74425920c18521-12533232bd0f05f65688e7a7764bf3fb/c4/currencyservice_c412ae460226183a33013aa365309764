4d3ece3531f5a942f4037c78a0795c5d
/* istanbul ignore next */
function cov_24770iunk2() {
  var path = "/workspaces/azora/services/education-revenue-engine/src/services/currency.service.ts";
  var hash = "e98a419051d3ec0361a7a51f376f50acc4edc748";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/education-revenue-engine/src/services/currency.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 7,
          column: 53
        },
        end: {
          line: 34,
          column: 1
        }
      },
      "1": {
        start: {
          line: 37,
          column: 58
        },
        end: {
          line: 64,
          column: 1
        }
      },
      "2": {
        start: {
          line: 66,
          column: 29
        },
        end: {
          line: 72,
          column: 2
        }
      },
      "3": {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 79,
          column: 68
        }
      },
      "4": {
        start: {
          line: 86,
          column: 23
        },
        end: {
          line: 86,
          column: 82
        }
      },
      "5": {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 87,
          column: 58
        }
      },
      "6": {
        start: {
          line: 94,
          column: 4
        },
        end: {
          line: 136,
          column: 5
        }
      },
      "7": {
        start: {
          line: 95,
          column: 31
        },
        end: {
          line: 95,
          column: 66
        }
      },
      "8": {
        start: {
          line: 96,
          column: 6
        },
        end: {
          line: 98,
          column: 7
        }
      },
      "9": {
        start: {
          line: 97,
          column: 8
        },
        end: {
          line: 97,
          column: 62
        }
      },
      "10": {
        start: {
          line: 101,
          column: 30
        },
        end: {
          line: 108,
          column: 8
        }
      },
      "11": {
        start: {
          line: 110,
          column: 6
        },
        end: {
          line: 114,
          column: 7
        }
      },
      "12": {
        start: {
          line: 111,
          column: 8
        },
        end: {
          line: 113,
          column: 10
        }
      },
      "13": {
        start: {
          line: 116,
          column: 22
        },
        end: {
          line: 124,
          column: 8
        }
      },
      "14": {
        start: {
          line: 126,
          column: 6
        },
        end: {
          line: 128,
          column: 8
        }
      },
      "15": {
        start: {
          line: 129,
          column: 6
        },
        end: {
          line: 132,
          column: 26
        }
      },
      "16": {
        start: {
          line: 134,
          column: 6
        },
        end: {
          line: 134,
          column: 61
        }
      },
      "17": {
        start: {
          line: 135,
          column: 6
        },
        end: {
          line: 135,
          column: 18
        }
      },
      "18": {
        start: {
          line: 146,
          column: 4
        },
        end: {
          line: 165,
          column: 5
        }
      },
      "19": {
        start: {
          line: 147,
          column: 22
        },
        end: {
          line: 154,
          column: 8
        }
      },
      "20": {
        start: {
          line: 156,
          column: 6
        },
        end: {
          line: 161,
          column: 15
        }
      },
      "21": {
        start: {
          line: 163,
          column: 6
        },
        end: {
          line: 163,
          column: 79
        }
      },
      "22": {
        start: {
          line: 164,
          column: 6
        },
        end: {
          line: 164,
          column: 18
        }
      },
      "23": {
        start: {
          line: 172,
          column: 4
        },
        end: {
          line: 184,
          column: 5
        }
      },
      "24": {
        start: {
          line: 173,
          column: 22
        },
        end: {
          line: 175,
          column: 8
        }
      },
      "25": {
        start: {
          line: 177,
          column: 6
        },
        end: {
          line: 180,
          column: 30
        }
      },
      "26": {
        start: {
          line: 177,
          column: 38
        },
        end: {
          line: 180,
          column: 7
        }
      },
      "27": {
        start: {
          line: 182,
          column: 6
        },
        end: {
          line: 182,
          column: 90
        }
      },
      "28": {
        start: {
          line: 183,
          column: 6
        },
        end: {
          line: 183,
          column: 18
        }
      },
      "29": {
        start: {
          line: 195,
          column: 4
        },
        end: {
          line: 229,
          column: 5
        }
      },
      "30": {
        start: {
          line: 196,
          column: 27
        },
        end: {
          line: 200,
          column: 8
        }
      },
      "31": {
        start: {
          line: 202,
          column: 31
        },
        end: {
          line: 202,
          column: 58
        }
      },
      "32": {
        start: {
          line: 203,
          column: 6
        },
        end: {
          line: 205,
          column: 7
        }
      },
      "33": {
        start: {
          line: 204,
          column: 8
        },
        end: {
          line: 204,
          column: 62
        }
      },
      "34": {
        start: {
          line: 207,
          column: 22
        },
        end: {
          line: 219,
          column: 8
        }
      },
      "35": {
        start: {
          line: 221,
          column: 6
        },
        end: {
          line: 221,
          column: 61
        }
      },
      "36": {
        start: {
          line: 222,
          column: 6
        },
        end: {
          line: 225,
          column: 26
        }
      },
      "37": {
        start: {
          line: 227,
          column: 6
        },
        end: {
          line: 227,
          column: 80
        }
      },
      "38": {
        start: {
          line: 228,
          column: 6
        },
        end: {
          line: 228,
          column: 18
        }
      },
      "39": {
        start: {
          line: 236,
          column: 4
        },
        end: {
          line: 269,
          column: 5
        }
      },
      "40": {
        start: {
          line: 237,
          column: 24
        },
        end: {
          line: 237,
          column: 57
        }
      },
      "41": {
        start: {
          line: 239,
          column: 6
        },
        end: {
          line: 263,
          column: 7
        }
      },
      "42": {
        start: {
          line: 240,
          column: 32
        },
        end: {
          line: 247,
          column: 10
        }
      },
      "43": {
        start: {
          line: 249,
          column: 8
        },
        end: {
          line: 262,
          column: 9
        }
      },
      "44": {
        start: {
          line: 250,
          column: 33
        },
        end: {
          line: 250,
          column: 85
        }
      },
      "45": {
        start: {
          line: 251,
          column: 27
        },
        end: {
          line: 251,
          column: 66
        }
      },
      "46": {
        start: {
          line: 253,
          column: 10
        },
        end: {
          line: 261,
          column: 13
        }
      },
      "47": {
        start: {
          line: 265,
          column: 6
        },
        end: {
          line: 265,
          column: 75
        }
      },
      "48": {
        start: {
          line: 267,
          column: 6
        },
        end: {
          line: 267,
          column: 65
        }
      },
      "49": {
        start: {
          line: 268,
          column: 6
        },
        end: {
          line: 268,
          column: 18
        }
      },
      "50": {
        start: {
          line: 280,
          column: 4
        },
        end: {
          line: 328,
          column: 5
        }
      },
      "51": {
        start: {
          line: 281,
          column: 19
        },
        end: {
          line: 281,
          column: 63
        }
      },
      "52": {
        start: {
          line: 282,
          column: 6
        },
        end: {
          line: 284,
          column: 7
        }
      },
      "53": {
        start: {
          line: 283,
          column: 8
        },
        end: {
          line: 283,
          column: 20
        }
      },
      "54": {
        start: {
          line: 286,
          column: 29
        },
        end: {
          line: 286,
          column: 79
        }
      },
      "55": {
        start: {
          line: 288,
          column: 6
        },
        end: {
          line: 304,
          column: 7
        }
      },
      "56": {
        start: {
          line: 290,
          column: 31
        },
        end: {
          line: 290,
          column: 91
        }
      },
      "57": {
        start: {
          line: 291,
          column: 25
        },
        end: {
          line: 291,
          column: 64
        }
      },
      "58": {
        start: {
          line: 293,
          column: 8
        },
        end: {
          line: 303,
          column: 10
        }
      },
      "59": {
        start: {
          line: 306,
          column: 6
        },
        end: {
          line: 324,
          column: 8
        }
      },
      "60": {
        start: {
          line: 326,
          column: 6
        },
        end: {
          line: 326,
          column: 81
        }
      },
      "61": {
        start: {
          line: 327,
          column: 6
        },
        end: {
          line: 327,
          column: 18
        }
      },
      "62": {
        start: {
          line: 335,
          column: 27
        },
        end: {
          line: 335,
          column: 65
        }
      },
      "63": {
        start: {
          line: 336,
          column: 4
        },
        end: {
          line: 336,
          column: 67
        }
      },
      "64": {
        start: {
          line: 340,
          column: 31
        },
        end: {
          line: 340,
          column: 52
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 78,
            column: 2
          },
          end: {
            line: 78,
            column: 3
          }
        },
        loc: {
          start: {
            line: 78,
            column: 53
          },
          end: {
            line: 80,
            column: 3
          }
        },
        line: 78
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 85,
            column: 2
          },
          end: {
            line: 85,
            column: 3
          }
        },
        loc: {
          start: {
            line: 85,
            column: 74
          },
          end: {
            line: 88,
            column: 3
          }
        },
        line: 85
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 93,
            column: 2
          },
          end: {
            line: 93,
            column: 3
          }
        },
        loc: {
          start: {
            line: 93,
            column: 65
          },
          end: {
            line: 137,
            column: 3
          }
        },
        line: 93
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 142,
            column: 2
          },
          end: {
            line: 142,
            column: 3
          }
        },
        loc: {
          start: {
            line: 145,
            column: 36
          },
          end: {
            line: 166,
            column: 3
          }
        },
        line: 145
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 171,
            column: 2
          },
          end: {
            line: 171,
            column: 3
          }
        },
        loc: {
          start: {
            line: 171,
            column: 79
          },
          end: {
            line: 185,
            column: 3
          }
        },
        line: 171
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 177,
            column: 25
          },
          end: {
            line: 177,
            column: 26
          }
        },
        loc: {
          start: {
            line: 177,
            column: 38
          },
          end: {
            line: 180,
            column: 7
          }
        },
        line: 177
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 190,
            column: 2
          },
          end: {
            line: 190,
            column: 3
          }
        },
        loc: {
          start: {
            line: 194,
            column: 29
          },
          end: {
            line: 230,
            column: 3
          }
        },
        line: 194
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 235,
            column: 2
          },
          end: {
            line: 235,
            column: 3
          }
        },
        loc: {
          start: {
            line: 235,
            column: 90
          },
          end: {
            line: 270,
            column: 3
          }
        },
        line: 235
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 275,
            column: 2
          },
          end: {
            line: 275,
            column: 3
          }
        },
        loc: {
          start: {
            line: 279,
            column: 38
          },
          end: {
            line: 329,
            column: 3
          }
        },
        line: 279
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 334,
            column: 2
          },
          end: {
            line: 334,
            column: 3
          }
        },
        loc: {
          start: {
            line: 334,
            column: 87
          },
          end: {
            line: 337,
            column: 3
          }
        },
        line: 334
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 79,
            column: 11
          },
          end: {
            line: 79,
            column: 67
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 79,
            column: 11
          },
          end: {
            line: 79,
            column: 58
          }
        }, {
          start: {
            line: 79,
            column: 62
          },
          end: {
            line: 79,
            column: 67
          }
        }],
        line: 79
      },
      "1": {
        loc: {
          start: {
            line: 86,
            column: 23
          },
          end: {
            line: 86,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 86,
            column: 23
          },
          end: {
            line: 86,
            column: 75
          }
        }, {
          start: {
            line: 86,
            column: 79
          },
          end: {
            line: 86,
            column: 82
          }
        }],
        line: 86
      },
      "2": {
        loc: {
          start: {
            line: 96,
            column: 6
          },
          end: {
            line: 98,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 96,
            column: 6
          },
          end: {
            line: 98,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 96
      },
      "3": {
        loc: {
          start: {
            line: 110,
            column: 6
          },
          end: {
            line: 114,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 110,
            column: 6
          },
          end: {
            line: 114,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 110
      },
      "4": {
        loc: {
          start: {
            line: 156,
            column: 13
          },
          end: {
            line: 161,
            column: 14
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 157,
            column: 11
          },
          end: {
            line: 160,
            column: 29
          }
        }, {
          start: {
            line: 161,
            column: 10
          },
          end: {
            line: 161,
            column: 14
          }
        }],
        line: 156
      },
      "5": {
        loc: {
          start: {
            line: 203,
            column: 6
          },
          end: {
            line: 205,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 203,
            column: 6
          },
          end: {
            line: 205,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 203
      },
      "6": {
        loc: {
          start: {
            line: 215,
            column: 14
          },
          end: {
            line: 215,
            column: 86
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 215,
            column: 14
          },
          end: {
            line: 215,
            column: 46
          }
        }, {
          start: {
            line: 215,
            column: 50
          },
          end: {
            line: 215,
            column: 86
          }
        }],
        line: 215
      },
      "7": {
        loc: {
          start: {
            line: 216,
            column: 14
          },
          end: {
            line: 216,
            column: 95
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 216,
            column: 14
          },
          end: {
            line: 216,
            column: 49
          }
        }, {
          start: {
            line: 216,
            column: 53
          },
          end: {
            line: 216,
            column: 95
          }
        }],
        line: 216
      },
      "8": {
        loc: {
          start: {
            line: 217,
            column: 14
          },
          end: {
            line: 217,
            column: 74
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 217,
            column: 14
          },
          end: {
            line: 217,
            column: 28
          }
        }, {
          start: {
            line: 217,
            column: 32
          },
          end: {
            line: 217,
            column: 74
          }
        }],
        line: 217
      },
      "9": {
        loc: {
          start: {
            line: 249,
            column: 8
          },
          end: {
            line: 262,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 249,
            column: 8
          },
          end: {
            line: 262,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 249
      },
      "10": {
        loc: {
          start: {
            line: 282,
            column: 6
          },
          end: {
            line: 284,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 282,
            column: 6
          },
          end: {
            line: 284,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 282
      },
      "11": {
        loc: {
          start: {
            line: 288,
            column: 6
          },
          end: {
            line: 304,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 288,
            column: 6
          },
          end: {
            line: 304,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 288
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "e98a419051d3ec0361a7a51f376f50acc4edc748"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_24770iunk2 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_24770iunk2();
import { prisma } from '../index';
import { logger } from '../utils/logger';
import Joi from 'joi';

// Country to currency mapping
const COUNTRY_CURRENCY_MAP =
/* istanbul ignore next */
(cov_24770iunk2().s[0]++, {
  US: 'USD',
  GB: 'GBP',
  CA: 'CAD',
  AU: 'AUD',
  IN: 'INR',
  ZA: 'ZAR',
  NG: 'NGN',
  KE: 'KES',
  GH: 'GHS',
  EG: 'EGP',
  BR: 'BRL',
  MX: 'MXN',
  DE: 'EUR',
  FR: 'EUR',
  IT: 'EUR',
  ES: 'EUR',
  JP: 'JPY',
  CN: 'CNY',
  SG: 'SGD',
  MY: 'MYR',
  TH: 'THB',
  PH: 'PHP',
  ID: 'IDR',
  VN: 'VND',
  PK: 'PKR',
  BD: 'BDT'
});

// Default pricing multipliers by country (relative to USD)
const COUNTRY_PRICE_MULTIPLIERS =
/* istanbul ignore next */
(cov_24770iunk2().s[1]++, {
  US: 1.0,
  GB: 0.85,
  CA: 1.35,
  AU: 1.55,
  IN: 0.012,
  // INR to USD conversion
  ZA: 0.053,
  NG: 0.0013,
  KE: 0.0077,
  GH: 0.065,
  EG: 0.032,
  BR: 0.2,
  MX: 0.058,
  DE: 0.92,
  FR: 0.92,
  IT: 0.92,
  ES: 0.92,
  JP: 0.0067,
  CN: 0.14,
  SG: 0.74,
  MY: 0.21,
  TH: 0.028,
  PH: 0.018,
  ID: 0.000063,
  VN: 0.000039,
  PK: 0.0036,
  BD: 0.0095
});
const countryPricingSchema =
/* istanbul ignore next */
(cov_24770iunk2().s[2]++, Joi.object({
  pricingTierId: Joi.string().required(),
  countryCode: Joi.string().length(2).uppercase().required(),
  currency: Joi.string().length(3).uppercase().required(),
  monthlyPrice: Joi.number().min(0).required(),
  studentDiscount: Joi.number().min(0).max(100).default(0)
}));
export class CurrencyService {
  /**
   * Get currency for a country
   */
  getCurrencyForCountry(countryCode) {
    /* istanbul ignore next */
    cov_24770iunk2().f[0]++;
    cov_24770iunk2().s[3]++;
    return /* istanbul ignore next */(cov_24770iunk2().b[0][0]++, COUNTRY_CURRENCY_MAP[countryCode.toUpperCase()]) ||
    /* istanbul ignore next */
    (cov_24770iunk2().b[0][1]++, 'USD');
  }

  /**
   * Calculate localized price for a country
   */
  calculateLocalizedPrice(basePrice, countryCode) {
    /* istanbul ignore next */
    cov_24770iunk2().f[1]++;
    const multiplier =
    /* istanbul ignore next */
    (cov_24770iunk2().s[4]++,
    /* istanbul ignore next */
    (cov_24770iunk2().b[1][0]++, COUNTRY_PRICE_MULTIPLIERS[countryCode.toUpperCase()]) ||
    /* istanbul ignore next */
    (cov_24770iunk2().b[1][1]++, 1.0));
    /* istanbul ignore next */
    cov_24770iunk2().s[5]++;
    return Math.round(basePrice * multiplier * 100) / 100;
  }

  /**
   * Create country-specific pricing
   */
  async createCountryPricing(data) {
    /* istanbul ignore next */
    cov_24770iunk2().f[2]++;
    cov_24770iunk2().s[6]++;
    try {
      const {
        error,
        value
      } =
      /* istanbul ignore next */
      (cov_24770iunk2().s[7]++, countryPricingSchema.validate(data));
      /* istanbul ignore next */
      cov_24770iunk2().s[8]++;
      if (error) {
        /* istanbul ignore next */
        cov_24770iunk2().b[2][0]++;
        cov_24770iunk2().s[9]++;
        throw new Error(`Validation error: ${error.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_24770iunk2().b[2][1]++;
      }

      // Check if pricing already exists for this country
      const existingPricing =
      /* istanbul ignore next */
      (cov_24770iunk2().s[10]++, await prisma.countryPricing.findUnique({
        where: {
          pricingTierId_countryCode: {
            pricingTierId: value.pricingTierId,
            countryCode: value.countryCode
          }
        }
      }));
      /* istanbul ignore next */
      cov_24770iunk2().s[11]++;
      if (existingPricing) {
        /* istanbul ignore next */
        cov_24770iunk2().b[3][0]++;
        cov_24770iunk2().s[12]++;
        throw new Error(`Pricing already exists for tier ${value.pricingTierId} in country ${value.countryCode}`);
      } else
      /* istanbul ignore next */
      {
        cov_24770iunk2().b[3][1]++;
      }
      const pricing =
      /* istanbul ignore next */
      (cov_24770iunk2().s[13]++, await prisma.countryPricing.create({
        data: {
          pricingTierId: value.pricingTierId,
          countryCode: value.countryCode.toUpperCase(),
          currency: value.currency.toUpperCase(),
          monthlyPrice: value.monthlyPrice,
          studentDiscount: value.studentDiscount
        }
      }));
      /* istanbul ignore next */
      cov_24770iunk2().s[14]++;
      logger.info(`Country pricing created: ${value.countryCode} - ${value.currency} ${value.monthlyPrice}`);
      /* istanbul ignore next */
      cov_24770iunk2().s[15]++;
      return {
        ...pricing,
        monthlyPrice: Number(pricing.monthlyPrice)
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_24770iunk2().s[16]++;
      logger.error('Error creating country pricing:', error);
      /* istanbul ignore next */
      cov_24770iunk2().s[17]++;
      throw error;
    }
  }

  /**
   * Get pricing for a specific country and tier
   */
  async getCountryPricing(pricingTierId, countryCode) {
    /* istanbul ignore next */
    cov_24770iunk2().f[3]++;
    cov_24770iunk2().s[18]++;
    try {
      const pricing =
      /* istanbul ignore next */
      (cov_24770iunk2().s[19]++, await prisma.countryPricing.findUnique({
        where: {
          pricingTierId_countryCode: {
            pricingTierId,
            countryCode: countryCode.toUpperCase()
          }
        }
      }));
      /* istanbul ignore next */
      cov_24770iunk2().s[20]++;
      return pricing ?
      /* istanbul ignore next */
      (cov_24770iunk2().b[4][0]++, {
        ...pricing,
        monthlyPrice: Number(pricing.monthlyPrice)
      }) :
      /* istanbul ignore next */
      (cov_24770iunk2().b[4][1]++, null);
    } catch (error) {
      /* istanbul ignore next */
      cov_24770iunk2().s[21]++;
      logger.error(`Error getting country pricing for ${countryCode}:`, error);
      /* istanbul ignore next */
      cov_24770iunk2().s[22]++;
      throw error;
    }
  }

  /**
   * Get all country pricing for a tier
   */
  async getAllCountryPricing(pricingTierId) {
    /* istanbul ignore next */
    cov_24770iunk2().f[4]++;
    cov_24770iunk2().s[23]++;
    try {
      const pricing =
      /* istanbul ignore next */
      (cov_24770iunk2().s[24]++, await prisma.countryPricing.findMany({
        where: {
          pricingTierId
        }
      }));
      /* istanbul ignore next */
      cov_24770iunk2().s[25]++;
      return pricing.map(p => {
        /* istanbul ignore next */
        cov_24770iunk2().f[5]++;
        cov_24770iunk2().s[26]++;
        return {
          ...p,
          monthlyPrice: Number(p.monthlyPrice)
        };
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_24770iunk2().s[27]++;
      logger.error(`Error getting all country pricing for tier ${pricingTierId}:`, error);
      /* istanbul ignore next */
      cov_24770iunk2().s[28]++;
      throw error;
    }
  }

  /**
   * Update country pricing
   */
  async updateCountryPricing(pricingTierId, countryCode, data) {
    /* istanbul ignore next */
    cov_24770iunk2().f[6]++;
    cov_24770iunk2().s[29]++;
    try {
      const updateSchema =
      /* istanbul ignore next */
      (cov_24770iunk2().s[30]++, Joi.object({
        monthlyPrice: Joi.number().min(0),
        studentDiscount: Joi.number().min(0).max(100),
        currency: Joi.string().length(3).uppercase()
      }));
      const {
        error,
        value
      } =
      /* istanbul ignore next */
      (cov_24770iunk2().s[31]++, updateSchema.validate(data));
      /* istanbul ignore next */
      cov_24770iunk2().s[32]++;
      if (error) {
        /* istanbul ignore next */
        cov_24770iunk2().b[5][0]++;
        cov_24770iunk2().s[33]++;
        throw new Error(`Validation error: ${error.message}`);
      } else
      /* istanbul ignore next */
      {
        cov_24770iunk2().b[5][1]++;
      }
      const pricing =
      /* istanbul ignore next */
      (cov_24770iunk2().s[34]++, await prisma.countryPricing.update({
        where: {
          pricingTierId_countryCode: {
            pricingTierId,
            countryCode: countryCode.toUpperCase()
          }
        },
        data: {
          ...(
          /* istanbul ignore next */
          (cov_24770iunk2().b[6][0]++, value.monthlyPrice !== undefined) &&
          /* istanbul ignore next */
          (cov_24770iunk2().b[6][1]++, {
            monthlyPrice: value.monthlyPrice
          })),
          ...(
          /* istanbul ignore next */
          (cov_24770iunk2().b[7][0]++, value.studentDiscount !== undefined) &&
          /* istanbul ignore next */
          (cov_24770iunk2().b[7][1]++, {
            studentDiscount: value.studentDiscount
          })),
          ...(
          /* istanbul ignore next */
          (cov_24770iunk2().b[8][0]++, value.currency) &&
          /* istanbul ignore next */
          (cov_24770iunk2().b[8][1]++, {
            currency: value.currency.toUpperCase()
          }))
        }
      }));
      /* istanbul ignore next */
      cov_24770iunk2().s[35]++;
      logger.info(`Country pricing updated: ${countryCode}`);
      /* istanbul ignore next */
      cov_24770iunk2().s[36]++;
      return {
        ...pricing,
        monthlyPrice: Number(pricing.monthlyPrice)
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_24770iunk2().s[37]++;
      logger.error(`Error updating country pricing for ${countryCode}:`, error);
      /* istanbul ignore next */
      cov_24770iunk2().s[38]++;
      throw error;
    }
  }

  /**
   * Initialize country pricing for all tiers
   */
  async initializeCountryPricing(pricingTierId, basePrice) {
    /* istanbul ignore next */
    cov_24770iunk2().f[7]++;
    cov_24770iunk2().s[39]++;
    try {
      const countries =
      /* istanbul ignore next */
      (cov_24770iunk2().s[40]++, Object.keys(COUNTRY_CURRENCY_MAP));
      /* istanbul ignore next */
      cov_24770iunk2().s[41]++;
      for (const countryCode of countries) {
        const existingPricing =
        /* istanbul ignore next */
        (cov_24770iunk2().s[42]++, await prisma.countryPricing.findUnique({
          where: {
            pricingTierId_countryCode: {
              pricingTierId,
              countryCode
            }
          }
        }));
        /* istanbul ignore next */
        cov_24770iunk2().s[43]++;
        if (!existingPricing) {
          /* istanbul ignore next */
          cov_24770iunk2().b[9][0]++;
          const localizedPrice =
          /* istanbul ignore next */
          (cov_24770iunk2().s[44]++, this.calculateLocalizedPrice(basePrice, countryCode));
          const currency =
          /* istanbul ignore next */
          (cov_24770iunk2().s[45]++, this.getCurrencyForCountry(countryCode));
          /* istanbul ignore next */
          cov_24770iunk2().s[46]++;
          await prisma.countryPricing.create({
            data: {
              pricingTierId,
              countryCode,
              currency,
              monthlyPrice: localizedPrice,
              studentDiscount: 0
            }
          });
        } else
        /* istanbul ignore next */
        {
          cov_24770iunk2().b[9][1]++;
        }
      }
      /* istanbul ignore next */
      cov_24770iunk2().s[47]++;
      logger.info(`Country pricing initialized for tier ${pricingTierId}`);
    } catch (error) {
      /* istanbul ignore next */
      cov_24770iunk2().s[48]++;
      logger.error('Error initializing country pricing:', error);
      /* istanbul ignore next */
      cov_24770iunk2().s[49]++;
      throw error;
    }
  }

  /**
   * Get localized pricing for a student
   */
  async getLocalizedPricing(tierName, countryCode, pricingService) {
    /* istanbul ignore next */
    cov_24770iunk2().f[8]++;
    cov_24770iunk2().s[50]++;
    try {
      const tier =
      /* istanbul ignore next */
      (cov_24770iunk2().s[51]++, await pricingService.getTierByName(tierName));
      /* istanbul ignore next */
      cov_24770iunk2().s[52]++;
      if (!tier) {
        /* istanbul ignore next */
        cov_24770iunk2().b[10][0]++;
        cov_24770iunk2().s[53]++;
        return null;
      } else
      /* istanbul ignore next */
      {
        cov_24770iunk2().b[10][1]++;
      }
      const countryPricing =
      /* istanbul ignore next */
      (cov_24770iunk2().s[54]++, await this.getCountryPricing(tier.id, countryCode));
      /* istanbul ignore next */
      cov_24770iunk2().s[55]++;
      if (!countryPricing) {
        /* istanbul ignore next */
        cov_24770iunk2().b[11][0]++;
        // Fallback to calculated pricing if not explicitly set
        const localizedPrice =
        /* istanbul ignore next */
        (cov_24770iunk2().s[56]++, this.calculateLocalizedPrice(tier.monthlyPrice, countryCode));
        const currency =
        /* istanbul ignore next */
        (cov_24770iunk2().s[57]++, this.getCurrencyForCountry(countryCode));
        /* istanbul ignore next */
        cov_24770iunk2().s[58]++;
        return {
          tier: tierName,
          countryCode: countryCode.toUpperCase(),
          currency,
          originalPrice: localizedPrice,
          studentDiscount: tier.studentDiscount,
          studentPrice: this.calculateStudentPrice(localizedPrice, tier.studentDiscount),
          savings: localizedPrice - this.calculateStudentPrice(localizedPrice, tier.studentDiscount),
          features: tier.features,
          limits: tier.limits
        };
      } else
      /* istanbul ignore next */
      {
        cov_24770iunk2().b[11][1]++;
      }
      cov_24770iunk2().s[59]++;
      return {
        tier: tierName,
        countryCode: countryPricing.countryCode,
        currency: countryPricing.currency,
        originalPrice: Number(countryPricing.monthlyPrice),
        studentDiscount: countryPricing.studentDiscount,
        studentPrice: this.calculateStudentPrice(Number(countryPricing.monthlyPrice), countryPricing.studentDiscount),
        savings: Number(countryPricing.monthlyPrice) - this.calculateStudentPrice(Number(countryPricing.monthlyPrice), countryPricing.studentDiscount),
        features: tier.features,
        limits: tier.limits
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_24770iunk2().s[60]++;
      logger.error(`Error getting localized pricing for ${countryCode}:`, error);
      /* istanbul ignore next */
      cov_24770iunk2().s[61]++;
      throw error;
    }
  }

  /**
   * Calculate student price with discount
   */
  calculateStudentPrice(monthlyPrice, studentDiscount) {
    /* istanbul ignore next */
    cov_24770iunk2().f[9]++;
    const discountAmount =
    /* istanbul ignore next */
    (cov_24770iunk2().s[62]++, monthlyPrice * studentDiscount / 100);
    /* istanbul ignore next */
    cov_24770iunk2().s[63]++;
    return Math.round((monthlyPrice - discountAmount) * 100) / 100;
  }
}
export const currencyService =
/* istanbul ignore next */
(cov_24770iunk2().s[64]++, new CurrencyService());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjQ3NzBpdW5rMiIsImFjdHVhbENvdmVyYWdlIiwicHJpc21hIiwibG9nZ2VyIiwiSm9pIiwiQ09VTlRSWV9DVVJSRU5DWV9NQVAiLCJzIiwiVVMiLCJHQiIsIkNBIiwiQVUiLCJJTiIsIlpBIiwiTkciLCJLRSIsIkdIIiwiRUciLCJCUiIsIk1YIiwiREUiLCJGUiIsIklUIiwiRVMiLCJKUCIsIkNOIiwiU0ciLCJNWSIsIlRIIiwiUEgiLCJJRCIsIlZOIiwiUEsiLCJCRCIsIkNPVU5UUllfUFJJQ0VfTVVMVElQTElFUlMiLCJjb3VudHJ5UHJpY2luZ1NjaGVtYSIsIm9iamVjdCIsInByaWNpbmdUaWVySWQiLCJzdHJpbmciLCJyZXF1aXJlZCIsImNvdW50cnlDb2RlIiwibGVuZ3RoIiwidXBwZXJjYXNlIiwiY3VycmVuY3kiLCJtb250aGx5UHJpY2UiLCJudW1iZXIiLCJtaW4iLCJzdHVkZW50RGlzY291bnQiLCJtYXgiLCJkZWZhdWx0IiwiQ3VycmVuY3lTZXJ2aWNlIiwiZ2V0Q3VycmVuY3lGb3JDb3VudHJ5IiwiZiIsImIiLCJ0b1VwcGVyQ2FzZSIsImNhbGN1bGF0ZUxvY2FsaXplZFByaWNlIiwiYmFzZVByaWNlIiwibXVsdGlwbGllciIsIk1hdGgiLCJyb3VuZCIsImNyZWF0ZUNvdW50cnlQcmljaW5nIiwiZGF0YSIsImVycm9yIiwidmFsdWUiLCJ2YWxpZGF0ZSIsIkVycm9yIiwibWVzc2FnZSIsImV4aXN0aW5nUHJpY2luZyIsImNvdW50cnlQcmljaW5nIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwicHJpY2luZ1RpZXJJZF9jb3VudHJ5Q29kZSIsInByaWNpbmciLCJjcmVhdGUiLCJpbmZvIiwiTnVtYmVyIiwiZ2V0Q291bnRyeVByaWNpbmciLCJnZXRBbGxDb3VudHJ5UHJpY2luZyIsImZpbmRNYW55IiwibWFwIiwicCIsInVwZGF0ZUNvdW50cnlQcmljaW5nIiwidXBkYXRlU2NoZW1hIiwidXBkYXRlIiwidW5kZWZpbmVkIiwiaW5pdGlhbGl6ZUNvdW50cnlQcmljaW5nIiwiY291bnRyaWVzIiwiT2JqZWN0Iiwia2V5cyIsImxvY2FsaXplZFByaWNlIiwiZ2V0TG9jYWxpemVkUHJpY2luZyIsInRpZXJOYW1lIiwicHJpY2luZ1NlcnZpY2UiLCJ0aWVyIiwiZ2V0VGllckJ5TmFtZSIsImlkIiwib3JpZ2luYWxQcmljZSIsInN0dWRlbnRQcmljZSIsImNhbGN1bGF0ZVN0dWRlbnRQcmljZSIsInNhdmluZ3MiLCJmZWF0dXJlcyIsImxpbWl0cyIsImRpc2NvdW50QW1vdW50IiwiY3VycmVuY3lTZXJ2aWNlIl0sInNvdXJjZXMiOlsiY3VycmVuY3kuc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBDb3VudHJ5UHJpY2luZywgTG9jYWxpemVkUHJpY2luZyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbi8vIENvdW50cnkgdG8gY3VycmVuY3kgbWFwcGluZ1xuY29uc3QgQ09VTlRSWV9DVVJSRU5DWV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFVTOiAnVVNEJyxcbiAgR0I6ICdHQlAnLFxuICBDQTogJ0NBRCcsXG4gIEFVOiAnQVVEJyxcbiAgSU46ICdJTlInLFxuICBaQTogJ1pBUicsXG4gIE5HOiAnTkdOJyxcbiAgS0U6ICdLRVMnLFxuICBHSDogJ0dIUycsXG4gIEVHOiAnRUdQJyxcbiAgQlI6ICdCUkwnLFxuICBNWDogJ01YTicsXG4gIERFOiAnRVVSJyxcbiAgRlI6ICdFVVInLFxuICBJVDogJ0VVUicsXG4gIEVTOiAnRVVSJyxcbiAgSlA6ICdKUFknLFxuICBDTjogJ0NOWScsXG4gIFNHOiAnU0dEJyxcbiAgTVk6ICdNWVInLFxuICBUSDogJ1RIQicsXG4gIFBIOiAnUEhQJyxcbiAgSUQ6ICdJRFInLFxuICBWTjogJ1ZORCcsXG4gIFBLOiAnUEtSJyxcbiAgQkQ6ICdCRFQnLFxufTtcblxuLy8gRGVmYXVsdCBwcmljaW5nIG11bHRpcGxpZXJzIGJ5IGNvdW50cnkgKHJlbGF0aXZlIHRvIFVTRClcbmNvbnN0IENPVU5UUllfUFJJQ0VfTVVMVElQTElFUlM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gIFVTOiAxLjAsXG4gIEdCOiAwLjg1LFxuICBDQTogMS4zNSxcbiAgQVU6IDEuNTUsXG4gIElOOiAwLjAxMiwgLy8gSU5SIHRvIFVTRCBjb252ZXJzaW9uXG4gIFpBOiAwLjA1MyxcbiAgTkc6IDAuMDAxMyxcbiAgS0U6IDAuMDA3NyxcbiAgR0g6IDAuMDY1LFxuICBFRzogMC4wMzIsXG4gIEJSOiAwLjIsXG4gIE1YOiAwLjA1OCxcbiAgREU6IDAuOTIsXG4gIEZSOiAwLjkyLFxuICBJVDogMC45MixcbiAgRVM6IDAuOTIsXG4gIEpQOiAwLjAwNjcsXG4gIENOOiAwLjE0LFxuICBTRzogMC43NCxcbiAgTVk6IDAuMjEsXG4gIFRIOiAwLjAyOCxcbiAgUEg6IDAuMDE4LFxuICBJRDogMC4wMDAwNjMsXG4gIFZOOiAwLjAwMDAzOSxcbiAgUEs6IDAuMDAzNixcbiAgQkQ6IDAuMDA5NSxcbn07XG5cbmNvbnN0IGNvdW50cnlQcmljaW5nU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIHByaWNpbmdUaWVySWQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBjb3VudHJ5Q29kZTogSm9pLnN0cmluZygpLmxlbmd0aCgyKS51cHBlcmNhc2UoKS5yZXF1aXJlZCgpLFxuICBjdXJyZW5jeTogSm9pLnN0cmluZygpLmxlbmd0aCgzKS51cHBlcmNhc2UoKS5yZXF1aXJlZCgpLFxuICBtb250aGx5UHJpY2U6IEpvaS5udW1iZXIoKS5taW4oMCkucmVxdWlyZWQoKSxcbiAgc3R1ZGVudERpc2NvdW50OiBKb2kubnVtYmVyKCkubWluKDApLm1heCgxMDApLmRlZmF1bHQoMCksXG59KTtcblxuZXhwb3J0IGNsYXNzIEN1cnJlbmN5U2VydmljZSB7XG4gIC8qKlxuICAgKiBHZXQgY3VycmVuY3kgZm9yIGEgY291bnRyeVxuICAgKi9cbiAgZ2V0Q3VycmVuY3lGb3JDb3VudHJ5KGNvdW50cnlDb2RlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBDT1VOVFJZX0NVUlJFTkNZX01BUFtjb3VudHJ5Q29kZS50b1VwcGVyQ2FzZSgpXSB8fCAnVVNEJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgbG9jYWxpemVkIHByaWNlIGZvciBhIGNvdW50cnlcbiAgICovXG4gIGNhbGN1bGF0ZUxvY2FsaXplZFByaWNlKGJhc2VQcmljZTogbnVtYmVyLCBjb3VudHJ5Q29kZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBtdWx0aXBsaWVyID0gQ09VTlRSWV9QUklDRV9NVUxUSVBMSUVSU1tjb3VudHJ5Q29kZS50b1VwcGVyQ2FzZSgpXSB8fCAxLjA7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoYmFzZVByaWNlICogbXVsdGlwbGllciAqIDEwMCkgLyAxMDA7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGNvdW50cnktc3BlY2lmaWMgcHJpY2luZ1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlQ291bnRyeVByaWNpbmcoZGF0YTogYW55KTogUHJvbWlzZTxDb3VudHJ5UHJpY2luZz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yLCB2YWx1ZSB9ID0gY291bnRyeVByaWNpbmdTY2hlbWEudmFsaWRhdGUoZGF0YSk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWxpZGF0aW9uIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHByaWNpbmcgYWxyZWFkeSBleGlzdHMgZm9yIHRoaXMgY291bnRyeVxuICAgICAgY29uc3QgZXhpc3RpbmdQcmljaW5nID0gYXdhaXQgcHJpc21hLmNvdW50cnlQcmljaW5nLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHByaWNpbmdUaWVySWRfY291bnRyeUNvZGU6IHtcbiAgICAgICAgICAgIHByaWNpbmdUaWVySWQ6IHZhbHVlLnByaWNpbmdUaWVySWQsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogdmFsdWUuY291bnRyeUNvZGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZXhpc3RpbmdQcmljaW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgUHJpY2luZyBhbHJlYWR5IGV4aXN0cyBmb3IgdGllciAke3ZhbHVlLnByaWNpbmdUaWVySWR9IGluIGNvdW50cnkgJHt2YWx1ZS5jb3VudHJ5Q29kZX1gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByaWNpbmcgPSBhd2FpdCBwcmlzbWEuY291bnRyeVByaWNpbmcuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHByaWNpbmdUaWVySWQ6IHZhbHVlLnByaWNpbmdUaWVySWQsXG4gICAgICAgICAgY291bnRyeUNvZGU6IHZhbHVlLmNvdW50cnlDb2RlLnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgY3VycmVuY3k6IHZhbHVlLmN1cnJlbmN5LnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgbW9udGhseVByaWNlOiB2YWx1ZS5tb250aGx5UHJpY2UsXG4gICAgICAgICAgc3R1ZGVudERpc2NvdW50OiB2YWx1ZS5zdHVkZW50RGlzY291bnQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgIGBDb3VudHJ5IHByaWNpbmcgY3JlYXRlZDogJHt2YWx1ZS5jb3VudHJ5Q29kZX0gLSAke3ZhbHVlLmN1cnJlbmN5fSAke3ZhbHVlLm1vbnRobHlQcmljZX1gXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucHJpY2luZyxcbiAgICAgICAgbW9udGhseVByaWNlOiBOdW1iZXIocHJpY2luZy5tb250aGx5UHJpY2UpLFxuICAgICAgfSBhcyBDb3VudHJ5UHJpY2luZztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjcmVhdGluZyBjb3VudHJ5IHByaWNpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwcmljaW5nIGZvciBhIHNwZWNpZmljIGNvdW50cnkgYW5kIHRpZXJcbiAgICovXG4gIGFzeW5jIGdldENvdW50cnlQcmljaW5nKFxuICAgIHByaWNpbmdUaWVySWQ6IHN0cmluZyxcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nXG4gICk6IFByb21pc2U8Q291bnRyeVByaWNpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByaWNpbmcgPSBhd2FpdCBwcmlzbWEuY291bnRyeVByaWNpbmcuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcHJpY2luZ1RpZXJJZF9jb3VudHJ5Q29kZToge1xuICAgICAgICAgICAgcHJpY2luZ1RpZXJJZCxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBjb3VudHJ5Q29kZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHByaWNpbmdcbiAgICAgICAgPyAoe1xuICAgICAgICAgICAgLi4ucHJpY2luZyxcbiAgICAgICAgICAgIG1vbnRobHlQcmljZTogTnVtYmVyKHByaWNpbmcubW9udGhseVByaWNlKSxcbiAgICAgICAgICB9IGFzIENvdW50cnlQcmljaW5nKVxuICAgICAgICA6IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgZ2V0dGluZyBjb3VudHJ5IHByaWNpbmcgZm9yICR7Y291bnRyeUNvZGV9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGNvdW50cnkgcHJpY2luZyBmb3IgYSB0aWVyXG4gICAqL1xuICBhc3luYyBnZXRBbGxDb3VudHJ5UHJpY2luZyhwcmljaW5nVGllcklkOiBzdHJpbmcpOiBQcm9taXNlPENvdW50cnlQcmljaW5nW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJpY2luZyA9IGF3YWl0IHByaXNtYS5jb3VudHJ5UHJpY2luZy5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IHByaWNpbmdUaWVySWQgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcHJpY2luZy5tYXAoKHA6IGFueSkgPT4gKHtcbiAgICAgICAgLi4ucCxcbiAgICAgICAgbW9udGhseVByaWNlOiBOdW1iZXIocC5tb250aGx5UHJpY2UpLFxuICAgICAgfSkpIGFzIENvdW50cnlQcmljaW5nW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgZ2V0dGluZyBhbGwgY291bnRyeSBwcmljaW5nIGZvciB0aWVyICR7cHJpY2luZ1RpZXJJZH06YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjb3VudHJ5IHByaWNpbmdcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNvdW50cnlQcmljaW5nKFxuICAgIHByaWNpbmdUaWVySWQ6IHN0cmluZyxcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nLFxuICAgIGRhdGE6IGFueVxuICApOiBQcm9taXNlPENvdW50cnlQcmljaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZVNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgICAgICBtb250aGx5UHJpY2U6IEpvaS5udW1iZXIoKS5taW4oMCksXG4gICAgICAgIHN0dWRlbnREaXNjb3VudDogSm9pLm51bWJlcigpLm1pbigwKS5tYXgoMTAwKSxcbiAgICAgICAgY3VycmVuY3k6IEpvaS5zdHJpbmcoKS5sZW5ndGgoMykudXBwZXJjYXNlKCksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyBlcnJvciwgdmFsdWUgfSA9IHVwZGF0ZVNjaGVtYS52YWxpZGF0ZShkYXRhKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbGlkYXRpb24gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJpY2luZyA9IGF3YWl0IHByaXNtYS5jb3VudHJ5UHJpY2luZy51cGRhdGUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHByaWNpbmdUaWVySWRfY291bnRyeUNvZGU6IHtcbiAgICAgICAgICAgIHByaWNpbmdUaWVySWQsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogY291bnRyeUNvZGUudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4uKHZhbHVlLm1vbnRobHlQcmljZSAhPT0gdW5kZWZpbmVkICYmIHsgbW9udGhseVByaWNlOiB2YWx1ZS5tb250aGx5UHJpY2UgfSksXG4gICAgICAgICAgLi4uKHZhbHVlLnN0dWRlbnREaXNjb3VudCAhPT0gdW5kZWZpbmVkICYmIHsgc3R1ZGVudERpc2NvdW50OiB2YWx1ZS5zdHVkZW50RGlzY291bnQgfSksXG4gICAgICAgICAgLi4uKHZhbHVlLmN1cnJlbmN5ICYmIHsgY3VycmVuY3k6IHZhbHVlLmN1cnJlbmN5LnRvVXBwZXJDYXNlKCkgfSksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyLmluZm8oYENvdW50cnkgcHJpY2luZyB1cGRhdGVkOiAke2NvdW50cnlDb2RlfWApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucHJpY2luZyxcbiAgICAgICAgbW9udGhseVByaWNlOiBOdW1iZXIocHJpY2luZy5tb250aGx5UHJpY2UpLFxuICAgICAgfSBhcyBDb3VudHJ5UHJpY2luZztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciB1cGRhdGluZyBjb3VudHJ5IHByaWNpbmcgZm9yICR7Y291bnRyeUNvZGV9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGNvdW50cnkgcHJpY2luZyBmb3IgYWxsIHRpZXJzXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplQ291bnRyeVByaWNpbmcocHJpY2luZ1RpZXJJZDogc3RyaW5nLCBiYXNlUHJpY2U6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb3VudHJpZXMgPSBPYmplY3Qua2V5cyhDT1VOVFJZX0NVUlJFTkNZX01BUCk7XG5cbiAgICAgIGZvciAoY29uc3QgY291bnRyeUNvZGUgb2YgY291bnRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUHJpY2luZyA9IGF3YWl0IHByaXNtYS5jb3VudHJ5UHJpY2luZy5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgcHJpY2luZ1RpZXJJZF9jb3VudHJ5Q29kZToge1xuICAgICAgICAgICAgICBwcmljaW5nVGllcklkLFxuICAgICAgICAgICAgICBjb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFleGlzdGluZ1ByaWNpbmcpIHtcbiAgICAgICAgICBjb25zdCBsb2NhbGl6ZWRQcmljZSA9IHRoaXMuY2FsY3VsYXRlTG9jYWxpemVkUHJpY2UoYmFzZVByaWNlLCBjb3VudHJ5Q29kZSk7XG4gICAgICAgICAgY29uc3QgY3VycmVuY3kgPSB0aGlzLmdldEN1cnJlbmN5Rm9yQ291bnRyeShjb3VudHJ5Q29kZSk7XG5cbiAgICAgICAgICBhd2FpdCBwcmlzbWEuY291bnRyeVByaWNpbmcuY3JlYXRlKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgcHJpY2luZ1RpZXJJZCxcbiAgICAgICAgICAgICAgY291bnRyeUNvZGUsXG4gICAgICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgICAgICBtb250aGx5UHJpY2U6IGxvY2FsaXplZFByaWNlLFxuICAgICAgICAgICAgICBzdHVkZW50RGlzY291bnQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKGBDb3VudHJ5IHByaWNpbmcgaW5pdGlhbGl6ZWQgZm9yIHRpZXIgJHtwcmljaW5nVGllcklkfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBjb3VudHJ5IHByaWNpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBsb2NhbGl6ZWQgcHJpY2luZyBmb3IgYSBzdHVkZW50XG4gICAqL1xuICBhc3luYyBnZXRMb2NhbGl6ZWRQcmljaW5nKFxuICAgIHRpZXJOYW1lOiBzdHJpbmcsXG4gICAgY291bnRyeUNvZGU6IHN0cmluZyxcbiAgICBwcmljaW5nU2VydmljZTogYW55XG4gICk6IFByb21pc2U8TG9jYWxpemVkUHJpY2luZyB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGllciA9IGF3YWl0IHByaWNpbmdTZXJ2aWNlLmdldFRpZXJCeU5hbWUodGllck5hbWUpO1xuICAgICAgaWYgKCF0aWVyKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb3VudHJ5UHJpY2luZyA9IGF3YWl0IHRoaXMuZ2V0Q291bnRyeVByaWNpbmcodGllci5pZCwgY291bnRyeUNvZGUpO1xuXG4gICAgICBpZiAoIWNvdW50cnlQcmljaW5nKSB7XG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIGNhbGN1bGF0ZWQgcHJpY2luZyBpZiBub3QgZXhwbGljaXRseSBzZXRcbiAgICAgICAgY29uc3QgbG9jYWxpemVkUHJpY2UgPSB0aGlzLmNhbGN1bGF0ZUxvY2FsaXplZFByaWNlKHRpZXIubW9udGhseVByaWNlLCBjb3VudHJ5Q29kZSk7XG4gICAgICAgIGNvbnN0IGN1cnJlbmN5ID0gdGhpcy5nZXRDdXJyZW5jeUZvckNvdW50cnkoY291bnRyeUNvZGUpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGllcjogdGllck5hbWUsXG4gICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnlDb2RlLnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgb3JpZ2luYWxQcmljZTogbG9jYWxpemVkUHJpY2UsXG4gICAgICAgICAgc3R1ZGVudERpc2NvdW50OiB0aWVyLnN0dWRlbnREaXNjb3VudCxcbiAgICAgICAgICBzdHVkZW50UHJpY2U6IHRoaXMuY2FsY3VsYXRlU3R1ZGVudFByaWNlKGxvY2FsaXplZFByaWNlLCB0aWVyLnN0dWRlbnREaXNjb3VudCksXG4gICAgICAgICAgc2F2aW5nczogbG9jYWxpemVkUHJpY2UgLSB0aGlzLmNhbGN1bGF0ZVN0dWRlbnRQcmljZShsb2NhbGl6ZWRQcmljZSwgdGllci5zdHVkZW50RGlzY291bnQpLFxuICAgICAgICAgIGZlYXR1cmVzOiB0aWVyLmZlYXR1cmVzLFxuICAgICAgICAgIGxpbWl0czogdGllci5saW1pdHMsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpZXI6IHRpZXJOYW1lLFxuICAgICAgICBjb3VudHJ5Q29kZTogY291bnRyeVByaWNpbmcuY291bnRyeUNvZGUsXG4gICAgICAgIGN1cnJlbmN5OiBjb3VudHJ5UHJpY2luZy5jdXJyZW5jeSxcbiAgICAgICAgb3JpZ2luYWxQcmljZTogTnVtYmVyKGNvdW50cnlQcmljaW5nLm1vbnRobHlQcmljZSksXG4gICAgICAgIHN0dWRlbnREaXNjb3VudDogY291bnRyeVByaWNpbmcuc3R1ZGVudERpc2NvdW50LFxuICAgICAgICBzdHVkZW50UHJpY2U6IHRoaXMuY2FsY3VsYXRlU3R1ZGVudFByaWNlKFxuICAgICAgICAgIE51bWJlcihjb3VudHJ5UHJpY2luZy5tb250aGx5UHJpY2UpLFxuICAgICAgICAgIGNvdW50cnlQcmljaW5nLnN0dWRlbnREaXNjb3VudFxuICAgICAgICApLFxuICAgICAgICBzYXZpbmdzOlxuICAgICAgICAgIE51bWJlcihjb3VudHJ5UHJpY2luZy5tb250aGx5UHJpY2UpIC1cbiAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVN0dWRlbnRQcmljZShcbiAgICAgICAgICAgIE51bWJlcihjb3VudHJ5UHJpY2luZy5tb250aGx5UHJpY2UpLFxuICAgICAgICAgICAgY291bnRyeVByaWNpbmcuc3R1ZGVudERpc2NvdW50XG4gICAgICAgICAgKSxcbiAgICAgICAgZmVhdHVyZXM6IHRpZXIuZmVhdHVyZXMsXG4gICAgICAgIGxpbWl0czogdGllci5saW1pdHMsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGdldHRpbmcgbG9jYWxpemVkIHByaWNpbmcgZm9yICR7Y291bnRyeUNvZGV9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgc3R1ZGVudCBwcmljZSB3aXRoIGRpc2NvdW50XG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVN0dWRlbnRQcmljZShtb250aGx5UHJpY2U6IG51bWJlciwgc3R1ZGVudERpc2NvdW50OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGRpc2NvdW50QW1vdW50ID0gKG1vbnRobHlQcmljZSAqIHN0dWRlbnREaXNjb3VudCkgLyAxMDA7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoKG1vbnRobHlQcmljZSAtIGRpc2NvdW50QW1vdW50KSAqIDEwMCkgLyAxMDA7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGN1cnJlbmN5U2VydmljZSA9IG5ldyBDdXJyZW5jeVNlcnZpY2UoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFmWixTQUFTRSxNQUFNLFFBQVEsVUFBVTtBQUVqQyxTQUFTQyxNQUFNLFFBQVEsaUJBQWlCO0FBQ3hDLE9BQU9DLEdBQUcsTUFBTSxLQUFLOztBQUVyQjtBQUNBLE1BQU1DLG9CQUE0QztBQUFBO0FBQUEsQ0FBQUwsY0FBQSxHQUFBTSxDQUFBLE9BQUc7RUFDbkRDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRSxLQUFLO0VBQ1RDLEVBQUUsRUFBRTtBQUNOLENBQUM7O0FBRUQ7QUFDQSxNQUFNQyx5QkFBaUQ7QUFBQTtBQUFBLENBQUFqQyxjQUFBLEdBQUFNLENBQUEsT0FBRztFQUN4REMsRUFBRSxFQUFFLEdBQUc7RUFDUEMsRUFBRSxFQUFFLElBQUk7RUFDUkMsRUFBRSxFQUFFLElBQUk7RUFDUkMsRUFBRSxFQUFFLElBQUk7RUFDUkMsRUFBRSxFQUFFLEtBQUs7RUFBRTtFQUNYQyxFQUFFLEVBQUUsS0FBSztFQUNUQyxFQUFFLEVBQUUsTUFBTTtFQUNWQyxFQUFFLEVBQUUsTUFBTTtFQUNWQyxFQUFFLEVBQUUsS0FBSztFQUNUQyxFQUFFLEVBQUUsS0FBSztFQUNUQyxFQUFFLEVBQUUsR0FBRztFQUNQQyxFQUFFLEVBQUUsS0FBSztFQUNUQyxFQUFFLEVBQUUsSUFBSTtFQUNSQyxFQUFFLEVBQUUsSUFBSTtFQUNSQyxFQUFFLEVB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LElBQUksRUFBRUYsUUFBUTtRQUNkbkQsV0FBVyxFQUFFNEIsY0FBYyxDQUFDNUIsV0FBVztRQUN2Q0csUUFBUSxFQUFFeUIsY0FBYyxDQUFDekIsUUFBUTtRQUNqQ3FELGFBQWEsRUFBRXJCLE1BQU0sQ0FBQ1AsY0FBYyxDQUFDeEIsWUFBWSxDQUFDO1FBQ2xERyxlQUFlLEVBQUVxQixjQUFjLENBQUNyQixlQUFlO1FBQy9Da0QsWUFBWSxFQUFFLElBQUksQ0FBQ0MscUJBQXFCLENBQ3RDdkIsTUFBTSxDQUFDUCxjQUFjLENBQUN4QixZQUFZLENBQUMsRUFDbkN3QixjQUFjLENBQUNyQixlQUNqQixDQUFDO1FBQ0RvRCxPQUFPLEVBQ0x4QixNQUFNLENBQUNQLGNBQWMsQ0FBQ3hCLFlBQVksQ0FBQyxHQUNuQyxJQUFJLENBQUNzRCxxQkFBcUIsQ0FDeEJ2QixNQUFNLENBQUNQLGNBQWMsQ0FBQ3hCLFlBQVksQ0FBQyxFQUNuQ3dCLGNBQWMsQ0FBQ3JCLGVBQ2pCLENBQUM7UUFDSHFELFFBQVEsRUFBRVAsSUFBSSxDQUFDTyxRQUFRO1FBQ3ZCQyxNQUFNLEVBQUVSLElBQUksQ0FBQ1E7TUFDZixDQUFDO0lBQ0gsQ0FBQyxDQUFDLE9BQU92QyxLQUFLLEVBQUU7TUFBQTtNQUFBN0QsY0FBQSxHQUFBTSxDQUFBO01BQ2RILE1BQU0sQ0FBQzBELEtBQUssQ0FBQyx1Q0FBdUN0QixXQUFXLEdBQUcsRUFBRXNCLEtBQUssQ0FBQztNQUFDO01BQUE3RCxjQUFBLEdBQUFNLENBQUE7TUFDM0UsTUFBTXVELEtBQUs7SUFDYjtFQUNGOztFQUVBO0FBQ0Y7QUFDQTtFQUNVb0MscUJBQXFCQSxDQUFDdEQsWUFBb0IsRUFBRUcsZUFBdUIsRUFBVTtJQUFBO0lBQUE5QyxjQUFBLEdBQUFtRCxDQUFBO0lBQ25GLE1BQU1rRCxjQUFjO0lBQUE7SUFBQSxDQUFBckcsY0FBQSxHQUFBTSxDQUFBLFFBQUlxQyxZQUFZLEdBQUdHLGVBQWUsR0FBSSxHQUFHO0lBQUM7SUFBQTlDLGNBQUEsR0FBQU0sQ0FBQTtJQUM5RCxPQUFPbUQsSUFBSSxDQUFDQyxLQUFLLENBQUMsQ0FBQ2YsWUFBWSxHQUFHMEQsY0FBYyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEdBQUc7RUFDaEU7QUFDRjtBQUVBLE9BQU8sTUFBTUMsZUFBZTtBQUFBO0FBQUEsQ0FBQXRHLGNBQUEsR0FBQU0sQ0FBQSxRQUFHLElBQUkyQyxlQUFlLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==