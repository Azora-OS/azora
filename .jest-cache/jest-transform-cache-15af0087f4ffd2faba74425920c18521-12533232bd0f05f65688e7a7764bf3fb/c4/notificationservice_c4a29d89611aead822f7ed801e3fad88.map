{"version":3,"names":["cov_xo1ef1mi9","actualCoverage","generateUUID","AppError","notifications","s","Map","NotificationService","createNotification","userId","data","f","notificationId","now","Date","notification","id","type","title","message","read","createdAt","set","sendNotification","getUserNotifications","page","b","pageSize","unreadOnly","userNotifications","Array","from","values","filter","n","sort","a","getTime","total","length","unreadCount","totalPages","Math","ceil","start","end","slice","getNotificationById","get","markAsRead","markAllAsRead","count","deleteNotification","delete","deleteAllNotifications","notifyPayment","paymentId","amount","status","toFixed","notifyMilestone","businessId","milestoneName","description","notifyMentorship","mentorshipType","recommendation","notifyFundDistribution","distributionId","distributionType","notifyReminder","reminderType","details","getUnreadCount","getNotificationsByType","console","log","scheduleReminder","scheduledFor","toISOString","scheduled","getStatistics","byType","forEach","readPercentage","round","totalNotifications","unreadNotifications","notificationService"],"sources":["notification.service.ts"],"sourcesContent":["import { generateUUID } from '../utils/uuid.js';\nimport { Notification, NotificationRequest } from '../types/index.js';\nimport { AppError } from '../middleware/errorHandler.js';\n\n// Mock database - replace with actual database calls\nconst notifications: Map<string, Notification> = new Map();\n\nexport class NotificationService {\n  /**\n   * Create a notification\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async createNotification(userId: string, data: NotificationRequest): Promise<Notification> {\n    const notificationId = generateUUID();\n    const now = new Date();\n\n    const notification: Notification = {\n      id: notificationId,\n      userId,\n      type: data.type,\n      title: data.title,\n      message: data.message,\n      data: data.data,\n      read: false,\n      createdAt: now,\n    };\n\n    notifications.set(notificationId, notification);\n\n    // TODO: Send notification via email, SMS, push notification, etc.\n    await this.sendNotification(notification);\n\n    return notification;\n  }\n\n  /**\n   * Get notifications for a user\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async getUserNotifications(\n    userId: string,\n    page: number = 1,\n    pageSize: number = 10,\n    unreadOnly: boolean = false\n  ): Promise<{\n    notifications: Notification[];\n    total: number;\n    unreadCount: number;\n    page: number;\n    pageSize: number;\n    totalPages: number;\n  }> {\n    let userNotifications = Array.from(notifications.values()).filter((n) => n.userId === userId);\n\n    if (unreadOnly) {\n      userNotifications = userNotifications.filter((n) => !n.read);\n    }\n\n    // Sort by creation date (newest first)\n    userNotifications.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n\n    const total = userNotifications.length;\n    const unreadCount = userNotifications.filter((n) => !n.read).length;\n    const totalPages = Math.ceil(total / pageSize);\n    const start = (page - 1) * pageSize;\n    const end = start + pageSize;\n\n    return {\n      notifications: userNotifications.slice(start, end),\n      total,\n      unreadCount,\n      page,\n      pageSize,\n      totalPages,\n    };\n  }\n\n  /**\n   * Get notification by ID\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async getNotificationById(notificationId: string, userId: string): Promise<Notification> {\n    const notification = notifications.get(notificationId);\n\n    if (!notification) {\n      throw new AppError(404, 'Notification not found');\n    }\n\n    if (notification.userId !== userId) {\n      throw new AppError(403, 'Unauthorized access to this notification');\n    }\n\n    return notification;\n  }\n\n  /**\n   * Mark notification as read\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async markAsRead(notificationId: string, userId: string): Promise<Notification> {\n    const notification = await this.getNotificationById(notificationId, userId);\n\n    notification.read = true;\n    notifications.set(notificationId, notification);\n\n    return notification;\n  }\n\n  /**\n   * Mark all notifications as read for a user\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async markAllAsRead(userId: string): Promise<number> {\n    let count = 0;\n\n    for (const notification of notifications.values()) {\n      if (notification.userId === userId && !notification.read) {\n        notification.read = true;\n        notifications.set(notification.id, notification);\n        count++;\n      }\n    }\n\n    return count;\n  }\n\n  /**\n   * Delete notification\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async deleteNotification(notificationId: string, userId: string): Promise<void> {\n    const notification = await this.getNotificationById(notificationId, userId);\n    notifications.delete(notification.id);\n  }\n\n  /**\n   * Delete all notifications for a user\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async deleteAllNotifications(userId: string): Promise<number> {\n    let count = 0;\n\n    for (const notification of notifications.values()) {\n      if (notification.userId === userId) {\n        notifications.delete(notification.id);\n        count++;\n      }\n    }\n\n    return count;\n  }\n\n  /**\n   * Create payment notification\n   * Requirements: 8.1\n   */\n  async notifyPayment(\n    userId: string,\n    paymentId: string,\n    amount: number,\n    status: string\n  ): Promise<Notification> {\n    const title = `Payment ${status}`;\n    const message = `Your payment of $${amount.toFixed(2)} has been ${status}.`;\n\n    return this.createNotification(userId, {\n      type: 'payment',\n      title,\n      message,\n      data: {\n        paymentId,\n        amount,\n        status,\n      },\n    });\n  }\n\n  /**\n   * Create milestone notification\n   * Requirements: 8.2\n   */\n  async notifyMilestone(\n    userId: string,\n    businessId: string,\n    milestoneName: string,\n    description: string\n  ): Promise<Notification> {\n    const title = `Milestone Reached: ${milestoneName}`;\n    const message = description;\n\n    return this.createNotification(userId, {\n      type: 'milestone',\n      title,\n      message,\n      data: {\n        businessId,\n        milestoneName,\n      },\n    });\n  }\n\n  /**\n   * Create mentorship notification\n   * Requirements: 8.3\n   */\n  async notifyMentorship(\n    userId: string,\n    businessId: string,\n    mentorshipType: string,\n    recommendation: string\n  ): Promise<Notification> {\n    const title = `Elara AI Mentorship: ${mentorshipType}`;\n    const message = recommendation;\n\n    return this.createNotification(userId, {\n      type: 'mentorship',\n      title,\n      message,\n      data: {\n        businessId,\n        mentorshipType,\n      },\n    });\n  }\n\n  /**\n   * Create fund distribution notification\n   * Requirements: 8.4\n   */\n  async notifyFundDistribution(\n    userId: string,\n    distributionId: string,\n    amount: number,\n    distributionType: string\n  ): Promise<Notification> {\n    const title = `Citadel Fund Distribution: ${distributionType}`;\n    const message = `A fund distribution of $${amount.toFixed(2)} has been made for ${distributionType}.`;\n\n    return this.createNotification(userId, {\n      type: 'fund_distribution',\n      title,\n      message,\n      data: {\n        distributionId,\n        amount,\n        distributionType,\n      },\n    });\n  }\n\n  /**\n   * Create reminder notification\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async notifyReminder(\n    userId: string,\n    businessId: string,\n    reminderType: string,\n    details: string\n  ): Promise<Notification> {\n    const title = `Reminder: ${reminderType}`;\n    const message = details;\n\n    return this.createNotification(userId, {\n      type: 'reminder',\n      title,\n      message,\n      data: {\n        businessId,\n        reminderType,\n      },\n    });\n  }\n\n  /**\n   * Get unread notification count for a user\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async getUnreadCount(userId: string): Promise<number> {\n    return Array.from(notifications.values()).filter((n) => n.userId === userId && !n.read)\n      .length;\n  }\n\n  /**\n   * Get notifications by type\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async getNotificationsByType(\n    userId: string,\n    type: 'payment' | 'milestone' | 'mentorship' | 'fund_distribution' | 'reminder'\n  ): Promise<Notification[]> {\n    return Array.from(notifications.values()).filter((n) => n.userId === userId && n.type === type);\n  }\n\n  /**\n   * Send notification (placeholder for actual implementation)\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  private async sendNotification(notification: Notification): Promise<void> {\n    // TODO: Implement actual notification sending\n    // - Email notification\n    // - SMS notification\n    // - Push notification\n    // - In-app notification (already stored)\n\n    console.log(`[Notification] Sending ${notification.type} notification to user ${notification.userId}`);\n    console.log(`  Title: ${notification.title}`);\n    console.log(`  Message: ${notification.message}`);\n  }\n\n  /**\n   * Schedule reminder notification\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async scheduleReminder(\n    userId: string,\n    businessId: string,\n    reminderType: string,\n    details: string,\n    scheduledFor: Date\n  ): Promise<{\n    scheduled: boolean;\n    scheduledFor: Date;\n  }> {\n    // TODO: Implement actual scheduling (e.g., using a job queue)\n    console.log(\n      `[Scheduled Reminder] ${reminderType} for user ${userId} at ${scheduledFor.toISOString()}`\n    );\n\n    return {\n      scheduled: true,\n      scheduledFor,\n    };\n  }\n\n  /**\n   * Get notification statistics for a user\n   * Requirements: 8.1, 8.2, 8.3, 8.4\n   */\n  async getStatistics(userId: string): Promise<{\n    totalNotifications: number;\n    unreadNotifications: number;\n    byType: Record<string, number>;\n    readPercentage: number;\n  }> {\n    const userNotifications = Array.from(notifications.values()).filter((n) => n.userId === userId);\n\n    const unreadCount = userNotifications.filter((n) => !n.read).length;\n    const byType: Record<string, number> = {};\n\n    userNotifications.forEach((n) => {\n      byType[n.type] = (byType[n.type] || 0) + 1;\n    });\n\n    const readPercentage =\n      userNotifications.length > 0\n        ? Math.round(((userNotifications.length - unreadCount) / userNotifications.length) * 100)\n        : 0;\n\n    return {\n      totalNotifications: userNotifications.length,\n      unreadNotifications: unreadCount,\n      byType,\n      readPercentage,\n    };\n  }\n}\n\nexport const notificationService = new NotificationService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}