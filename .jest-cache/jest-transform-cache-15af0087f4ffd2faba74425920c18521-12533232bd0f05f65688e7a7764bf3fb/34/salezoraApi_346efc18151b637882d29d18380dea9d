e3d34eca084b94d70491bf888c7aa6ec
/* istanbul ignore next */
function cov_1vxjyoklzk() {
  var path = "/workspaces/azora/services/azora-forge/src/salezoraApi.ts";
  var hash = "0f524fe3863226f93b67c50053b1f29183f15a93";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-forge/src/salezoraApi.ts",
    statementMap: {
      "0": {
        start: {
          line: 12,
          column: 15
        },
        end: {
          line: 12,
          column: 31
        }
      },
      "1": {
        start: {
          line: 14,
          column: 0
        },
        end: {
          line: 23,
          column: 3
        }
      },
      "2": {
        start: {
          line: 15,
          column: 47
        },
        end: {
          line: 15,
          column: 55
        }
      },
      "3": {
        start: {
          line: 16,
          column: 2
        },
        end: {
          line: 16,
          column: 109
        }
      },
      "4": {
        start: {
          line: 16,
          column: 51
        },
        end: {
          line: 16,
          column: 108
        }
      },
      "5": {
        start: {
          line: 17,
          column: 2
        },
        end: {
          line: 22,
          column: 3
        }
      },
      "6": {
        start: {
          line: 18,
          column: 21
        },
        end: {
          line: 18,
          column: 101
        }
      },
      "7": {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 19,
          column: 27
        }
      },
      "8": {
        start: {
          line: 21,
          column: 4
        },
        end: {
          line: 21,
          column: 79
        }
      },
      "9": {
        start: {
          line: 25,
          column: 0
        },
        end: {
          line: 34,
          column: 3
        }
      },
      "10": {
        start: {
          line: 26,
          column: 40
        },
        end: {
          line: 26,
          column: 48
        }
      },
      "11": {
        start: {
          line: 27,
          column: 2
        },
        end: {
          line: 27,
          column: 112
        }
      },
      "12": {
        start: {
          line: 27,
          column: 54
        },
        end: {
          line: 27,
          column: 111
        }
      },
      "13": {
        start: {
          line: 28,
          column: 2
        },
        end: {
          line: 33,
          column: 3
        }
      },
      "14": {
        start: {
          line: 29,
          column: 17
        },
        end: {
          line: 29,
          column: 73
        }
      },
      "15": {
        start: {
          line: 30,
          column: 4
        },
        end: {
          line: 30,
          column: 23
        }
      },
      "16": {
        start: {
          line: 32,
          column: 4
        },
        end: {
          line: 32,
          column: 72
        }
      },
      "17": {
        start: {
          line: 36,
          column: 0
        },
        end: {
          line: 43,
          column: 3
        }
      },
      "18": {
        start: {
          line: 37,
          column: 2
        },
        end: {
          line: 42,
          column: 3
        }
      },
      "19": {
        start: {
          line: 38,
          column: 22
        },
        end: {
          line: 38,
          column: 58
        }
      },
      "20": {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 28
        }
      },
      "21": {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 41,
          column: 77
        }
      },
      "22": {
        start: {
          line: 45,
          column: 0
        },
        end: {
          line: 53,
          column: 3
        }
      },
      "23": {
        start: {
          line: 46,
          column: 25
        },
        end: {
          line: 46,
          column: 34
        }
      },
      "24": {
        start: {
          line: 47,
          column: 2
        },
        end: {
          line: 52,
          column: 3
        }
      },
      "25": {
        start: {
          line: 48,
          column: 18
        },
        end: {
          line: 48,
          column: 70
        }
      },
      "26": {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 49,
          column: 24
        }
      },
      "27": {
        start: {
          line: 51,
          column: 4
        },
        end: {
          line: 51,
          column: 73
        }
      },
      "28": {
        start: {
          line: 55,
          column: 0
        },
        end: {
          line: 64,
          column: 3
        }
      },
      "29": {
        start: {
          line: 56,
          column: 25
        },
        end: {
          line: 56,
          column: 35
        }
      },
      "30": {
        start: {
          line: 57,
          column: 2
        },
        end: {
          line: 63,
          column: 3
        }
      },
      "31": {
        start: {
          line: 58,
          column: 30
        },
        end: {
          line: 58,
          column: 80
        }
      },
      "32": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 36
        }
      },
      "33": {
        start: {
          line: 61,
          column: 25
        },
        end: {
          line: 61,
          column: 141
        }
      },
      "34": {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 62,
          column: 64
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 14,
            column: 25
          },
          end: {
            line: 14,
            column: 26
          }
        },
        loc: {
          start: {
            line: 14,
            column: 45
          },
          end: {
            line: 23,
            column: 1
          }
        },
        line: 14
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 25,
            column: 21
          },
          end: {
            line: 25,
            column: 22
          }
        },
        loc: {
          start: {
            line: 25,
            column: 41
          },
          end: {
            line: 34,
            column: 1
          }
        },
        line: 25
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 36,
            column: 25
          },
          end: {
            line: 36,
            column: 26
          }
        },
        loc: {
          start: {
            line: 36,
            column: 45
          },
          end: {
            line: 43,
            column: 1
          }
        },
        line: 36
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 45,
            column: 21
          },
          end: {
            line: 45,
            column: 22
          }
        },
        loc: {
          start: {
            line: 45,
            column: 41
          },
          end: {
            line: 53,
            column: 1
          }
        },
        line: 45
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 55,
            column: 37
          },
          end: {
            line: 55,
            column: 38
          }
        },
        loc: {
          start: {
            line: 55,
            column: 57
          },
          end: {
            line: 64,
            column: 1
          }
        },
        line: 55
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 16,
            column: 2
          },
          end: {
            line: 16,
            column: 109
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 16,
            column: 2
          },
          end: {
            line: 16,
            column: 109
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 16
      },
      "1": {
        loc: {
          start: {
            line: 16,
            column: 6
          },
          end: {
            line: 16,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 16,
            column: 6
          },
          end: {
            line: 16,
            column: 11
          }
        }, {
          start: {
            line: 16,
            column: 15
          },
          end: {
            line: 16,
            column: 22
          }
        }, {
          start: {
            line: 16,
            column: 26
          },
          end: {
            line: 16,
            column: 35
          }
        }, {
          start: {
            line: 16,
            column: 39
          },
          end: {
            line: 16,
            column: 48
          }
        }],
        line: 16
      },
      "2": {
        loc: {
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 27,
            column: 112
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 27,
            column: 112
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 27
      },
      "3": {
        loc: {
          start: {
            line: 27,
            column: 6
          },
          end: {
            line: 27,
            column: 51
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 27,
            column: 6
          },
          end: {
            line: 27,
            column: 13
          }
        }, {
          start: {
            line: 27,
            column: 17
          },
          end: {
            line: 27,
            column: 28
          }
        }, {
          start: {
            line: 27,
            column: 32
          },
          end: {
            line: 27,
            column: 51
          }
        }],
        line: 27
      },
      "4": {
        loc: {
          start: {
            line: 61,
            column: 25
          },
          end: {
            line: 61,
            column: 141
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 61,
            column: 87
          },
          end: {
            line: 61,
            column: 123
          }
        }, {
          start: {
            line: 61,
            column: 126
          },
          end: {
            line: 61,
            column: 141
          }
        }],
        line: 61
      },
      "5": {
        loc: {
          start: {
            line: 61,
            column: 25
          },
          end: {
            line: 61,
            column: 84
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 61,
            column: 25
          },
          end: {
            line: 61,
            column: 48
          }
        }, {
          start: {
            line: 61,
            column: 52
          },
          end: {
            line: 61,
            column: 64
          }
        }, {
          start: {
            line: 61,
            column: 68
          },
          end: {
            line: 61,
            column: 84
          }
        }],
        line: 61
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0, 0, 0],
      "2": [0, 0],
      "3": [0, 0, 0],
      "4": [0, 0],
      "5": [0, 0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "0f524fe3863226f93b67c50053b1f29183f15a93"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1vxjyoklzk = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1vxjyoklzk();
/*
AZORA PROPRIETARY LICENSE

Copyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.

See LICENSE file for details.
*/

import express from 'express';
import { SalezoraService } from './salezoraService';
const router =
/* istanbul ignore next */
(cov_1vxjyoklzk().s[0]++, express.Router());
/* istanbul ignore next */
cov_1vxjyoklzk().s[1]++;
router.post('/campaign', async (req, res) => {
  /* istanbul ignore next */
  cov_1vxjyoklzk().f[0]++;
  const {
    name,
    target,
    strategy,
    deadline
  } =
  /* istanbul ignore next */
  (cov_1vxjyoklzk().s[2]++, req.body);
  /* istanbul ignore next */
  cov_1vxjyoklzk().s[3]++;
  if (
  /* istanbul ignore next */
  (cov_1vxjyoklzk().b[1][0]++, !name) ||
  /* istanbul ignore next */
  (cov_1vxjyoklzk().b[1][1]++, !target) ||
  /* istanbul ignore next */
  (cov_1vxjyoklzk().b[1][2]++, !strategy) ||
  /* istanbul ignore next */
  (cov_1vxjyoklzk().b[1][3]++, !deadline)) {
    /* istanbul ignore next */
    cov_1vxjyoklzk().b[0][0]++;
    cov_1vxjyoklzk().s[4]++;
    return res.status(400).json({
      error: 'Missing fields'
    });
  } else
  /* istanbul ignore next */
  {
    cov_1vxjyoklzk().b[0][1]++;
  }
  cov_1vxjyoklzk().s[5]++;
  try {
    const campaign =
    /* istanbul ignore next */
    (cov_1vxjyoklzk().s[6]++, await SalezoraService.createCampaign(name, target, strategy, new Date(deadline)));
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[7]++;
    res.json({
      campaign
    });
  } catch (err) {
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[8]++;
    res.status(500).json({
      error: 'Failed to create campaign',
      details: err
    });
  }
});
/* istanbul ignore next */
cov_1vxjyoklzk().s[9]++;
router.post('/lead', async (req, res) => {
  /* istanbul ignore next */
  cov_1vxjyoklzk().f[1]++;
  const {
    userId,
    campaignId,
    score
  } =
  /* istanbul ignore next */
  (cov_1vxjyoklzk().s[10]++, req.body);
  /* istanbul ignore next */
  cov_1vxjyoklzk().s[11]++;
  if (
  /* istanbul ignore next */
  (cov_1vxjyoklzk().b[3][0]++, !userId) ||
  /* istanbul ignore next */
  (cov_1vxjyoklzk().b[3][1]++, !campaignId) ||
  /* istanbul ignore next */
  (cov_1vxjyoklzk().b[3][2]++, score === undefined)) {
    /* istanbul ignore next */
    cov_1vxjyoklzk().b[2][0]++;
    cov_1vxjyoklzk().s[12]++;
    return res.status(400).json({
      error: 'Missing fields'
    });
  } else
  /* istanbul ignore next */
  {
    cov_1vxjyoklzk().b[2][1]++;
  }
  cov_1vxjyoklzk().s[13]++;
  try {
    const lead =
    /* istanbul ignore next */
    (cov_1vxjyoklzk().s[14]++, await SalezoraService.addLead(userId, campaignId, score));
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[15]++;
    res.json({
      lead
    });
  } catch (err) {
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[16]++;
    res.status(500).json({
      error: 'Failed to add lead',
      details: err
    });
  }
});
/* istanbul ignore next */
cov_1vxjyoklzk().s[17]++;
router.get('/campaigns', async (req, res) => {
  /* istanbul ignore next */
  cov_1vxjyoklzk().f[2]++;
  cov_1vxjyoklzk().s[18]++;
  try {
    const campaigns =
    /* istanbul ignore next */
    (cov_1vxjyoklzk().s[19]++, await SalezoraService.getCampaigns());
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[20]++;
    res.json({
      campaigns
    });
  } catch (err) {
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[21]++;
    res.status(500).json({
      error: 'Failed to get campaigns',
      details: err
    });
  }
});
/* istanbul ignore next */
cov_1vxjyoklzk().s[22]++;
router.get('/leads', async (req, res) => {
  /* istanbul ignore next */
  cov_1vxjyoklzk().f[3]++;
  const {
    campaignId
  } =
  /* istanbul ignore next */
  (cov_1vxjyoklzk().s[23]++, req.query);
  /* istanbul ignore next */
  cov_1vxjyoklzk().s[24]++;
  try {
    const leads =
    /* istanbul ignore next */
    (cov_1vxjyoklzk().s[25]++, await SalezoraService.getLeads(campaignId));
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[26]++;
    res.json({
      leads
    });
  } catch (err) {
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[27]++;
    res.status(500).json({
      error: 'Failed to get leads',
      details: err
    });
  }
});
/* istanbul ignore next */
cov_1vxjyoklzk().s[28]++;
router.post('/optimize/:campaignId', async (req, res) => {
  /* istanbul ignore next */
  cov_1vxjyoklzk().f[4]++;
  const {
    campaignId
  } =
  /* istanbul ignore next */
  (cov_1vxjyoklzk().s[29]++, req.params);
  /* istanbul ignore next */
  cov_1vxjyoklzk().s[30]++;
  try {
    const optimizedStrategy =
    /* istanbul ignore next */
    (cov_1vxjyoklzk().s[31]++, await SalezoraService.optimizeStrategy(campaignId));
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[32]++;
    res.json({
      optimizedStrategy
    });
  } catch (err) {
    const errorMessage =
    /* istanbul ignore next */
    (cov_1vxjyoklzk().s[33]++,
    /* istanbul ignore next */
    (cov_1vxjyoklzk().b[5][0]++, typeof err === 'object') &&
    /* istanbul ignore next */
    (cov_1vxjyoklzk().b[5][1]++, err !== null) &&
    /* istanbul ignore next */
    (cov_1vxjyoklzk().b[5][2]++, 'message' in err) ?
    /* istanbul ignore next */
    (cov_1vxjyoklzk().b[4][0]++, err.message) :
    /* istanbul ignore next */
    (cov_1vxjyoklzk().b[4][1]++, 'Unknown error'));
    /* istanbul ignore next */
    cov_1vxjyoklzk().s[34]++;
    res.status(500).json({
      error: errorMessage,
      details: err
    });
  }
});
export default router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXZ4anlva2x6ayIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsIlNhbGV6b3JhU2VydmljZSIsInJvdXRlciIsInMiLCJSb3V0ZXIiLCJwb3N0IiwicmVxIiwicmVzIiwiZiIsIm5hbWUiLCJ0YXJnZXQiLCJzdHJhdGVneSIsImRlYWRsaW5lIiwiYm9keSIsImIiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJjYW1wYWlnbiIsImNyZWF0ZUNhbXBhaWduIiwiRGF0ZSIsImVyciIsImRldGFpbHMiLCJ1c2VySWQiLCJjYW1wYWlnbklkIiwic2NvcmUiLCJ1bmRlZmluZWQiLCJsZWFkIiwiYWRkTGVhZCIsImdldCIsImNhbXBhaWducyIsImdldENhbXBhaWducyIsInF1ZXJ5IiwibGVhZHMiLCJnZXRMZWFkcyIsInBhcmFtcyIsIm9wdGltaXplZFN0cmF0ZWd5Iiwib3B0aW1pemVTdHJhdGVneSIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiXSwic291cmNlcyI6WyJzYWxlem9yYUFwaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQVpPUkEgUFJPUFJJRVRBUlkgTElDRU5TRVxuXG5Db3B5cmlnaHQgwqkgMjAyNSBBem9yYSBFUyAoUHR5KSBMdGQuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5cblNlZSBMSUNFTlNFIGZpbGUgZm9yIGRldGFpbHMuXG4qL1xuXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IFNhbGV6b3JhU2VydmljZSB9IGZyb20gJy4vc2FsZXpvcmFTZXJ2aWNlJztcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxucm91dGVyLnBvc3QoJy9jYW1wYWlnbicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG5hbWUsIHRhcmdldCwgc3RyYXRlZ3ksIGRlYWRsaW5lIH0gPSByZXEuYm9keTtcbiAgaWYgKCFuYW1lIHx8ICF0YXJnZXQgfHwgIXN0cmF0ZWd5IHx8ICFkZWFkbGluZSkge3JldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBmaWVsZHMnIH0pO31cbiAgdHJ5IHtcbiAgICBjb25zdCBjYW1wYWlnbiA9IGF3YWl0IFNhbGV6b3JhU2VydmljZS5jcmVhdGVDYW1wYWlnbihuYW1lLCB0YXJnZXQsIHN0cmF0ZWd5LCBuZXcgRGF0ZShkZWFkbGluZSkpO1xuICAgIHJlcy5qc29uKHsgY2FtcGFpZ24gfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGNhbXBhaWduJywgZGV0YWlsczogZXJyIH0pO1xuICB9XG59KTtcblxucm91dGVyLnBvc3QoJy9sZWFkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdXNlcklkLCBjYW1wYWlnbklkLCBzY29yZSB9ID0gcmVxLmJvZHk7XG4gIGlmICghdXNlcklkIHx8ICFjYW1wYWlnbklkIHx8IHNjb3JlID09PSB1bmRlZmluZWQpIHtyZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgZmllbGRzJyB9KTt9XG4gIHRyeSB7XG4gICAgY29uc3QgbGVhZCA9IGF3YWl0IFNhbGV6b3JhU2VydmljZS5hZGRMZWFkKHVzZXJJZCwgY2FtcGFpZ25JZCwgc2NvcmUpO1xuICAgIHJlcy5qc29uKHsgbGVhZCB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBhZGQgbGVhZCcsIGRldGFpbHM6IGVyciB9KTtcbiAgfVxufSk7XG5cbnJvdXRlci5nZXQoJy9jYW1wYWlnbnMnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjYW1wYWlnbnMgPSBhd2FpdCBTYWxlem9yYVNlcnZpY2UuZ2V0Q2FtcGFpZ25zKCk7XG4gICAgcmVzLmpzb24oeyBjYW1wYWlnbnMgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZ2V0IGNhbXBhaWducycsIGRldGFpbHM6IGVyciB9KTtcbiAgfVxufSk7XG5cbnJvdXRlci5nZXQoJy9sZWFkcycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IGNhbXBhaWduSWQgfSA9IHJlcS5xdWVyeTtcbiAgdHJ5IHtcbiAgICBjb25zdCBsZWFkcyA9IGF3YWl0IFNhbGV6b3JhU2VydmljZS5nZXRMZWFkcyhjYW1wYWlnbklkIGFzIHN0cmluZyk7XG4gICAgcmVzLmpzb24oeyBsZWFkcyB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBnZXQgbGVhZHMnLCBkZXRhaWxzOiBlcnIgfSk7XG4gIH1cbn0pO1xuXG5yb3V0ZXIucG9zdCgnL29wdGltaXplLzpjYW1wYWlnbklkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgY2FtcGFpZ25JZCB9ID0gcmVxLnBhcmFtcztcbiAgdHJ5IHtcbiAgICBjb25zdCBvcHRpbWl6ZWRTdHJhdGVneSA9IGF3YWl0IFNhbGV6b3JhU2VydmljZS5vcHRpbWl6ZVN0cmF0ZWd5KGNhbXBhaWduSWQpO1xuICAgIHJlcy5qc29uKHsgb3B0aW1pemVkU3RyYXRlZ3kgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHR5cGVvZiBlcnIgPT09ICdvYmplY3QnICYmIGVyciAhPT0gbnVsbCAmJiAnbWVzc2FnZScgaW4gZXJyID8gKGVyciBhcyB7IG1lc3NhZ2U6IHN0cmluZyB9KS5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yTWVzc2FnZSwgZGV0YWlsczogZXJyIH0pO1xuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlWTtJQUFBQSxjQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxjQUFBO0FBZlo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0UsT0FBTyxNQUFNLFNBQVM7QUFDN0IsU0FBU0MsZUFBZSxRQUFRLG1CQUFtQjtBQUVuRCxNQUFNQyxNQUFNO0FBQUE7QUFBQSxDQUFBSixjQUFBLEdBQUFLLENBQUEsT0FBR0gsT0FBTyxDQUFDSSxNQUFNLENBQUMsQ0FBQztBQUFDO0FBQUFOLGNBQUEsR0FBQUssQ0FBQTtBQUVoQ0QsTUFBTSxDQUFDRyxJQUFJLENBQUMsV0FBVyxFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQUE7RUFBQVQsY0FBQSxHQUFBVSxDQUFBO0VBQzNDLE1BQU07SUFBRUMsSUFBSTtJQUFFQyxNQUFNO0lBQUVDLFFBQVE7SUFBRUM7RUFBUyxDQUFDO0VBQUE7RUFBQSxDQUFBZCxjQUFBLEdBQUFLLENBQUEsT0FBR0csR0FBRyxDQUFDTyxJQUFJO0VBQUM7RUFBQWYsY0FBQSxHQUFBSyxDQUFBO0VBQ3REO0VBQUk7RUFBQSxDQUFBTCxjQUFBLEdBQUFnQixDQUFBLFdBQUNMLElBQUk7RUFBQTtFQUFBLENBQUFYLGNBQUEsR0FBQWdCLENBQUEsVUFBSSxDQUFDSixNQUFNO0VBQUE7RUFBQSxDQUFBWixjQUFBLEdBQUFnQixDQUFBLFVBQUksQ0FBQ0gsUUFBUTtFQUFBO0VBQUEsQ0FBQWIsY0FBQSxHQUFBZ0IsQ0FBQSxVQUFJLENBQUNGLFFBQVEsR0FBRTtJQUFBO0lBQUFkLGNBQUEsR0FBQWdCLENBQUE7SUFBQWhCLGNBQUEsR0FBQUssQ0FBQTtJQUFDLE9BQU9JLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFO0lBQWlCLENBQUMsQ0FBQztFQUFDLENBQUM7RUFBQTtFQUFBO0lBQUFuQixjQUFBLEdBQUFnQixDQUFBO0VBQUE7RUFBQWhCLGNBQUEsR0FBQUssQ0FBQTtFQUMzRyxJQUFJO0lBQ0YsTUFBTWUsUUFBUTtJQUFBO0lBQUEsQ0FBQXBCLGNBQUEsR0FBQUssQ0FBQSxPQUFHLE1BQU1GLGVBQWUsQ0FBQ2tCLGNBQWMsQ0FBQ1YsSUFBSSxFQUFFQyxNQUFNLEVBQUVDLFFBQVEsRUFBRSxJQUFJUyxJQUFJLENBQUNSLFFBQVEsQ0FBQyxDQUFDO0lBQUM7SUFBQWQsY0FBQSxHQUFBSyxDQUFBO0lBQ2xHSSxHQUFHLENBQUNTLElBQUksQ0FBQztNQUFFRTtJQUFTLENBQUMsQ0FBQztFQUN4QixDQUFDLENBQUMsT0FBT0csR0FBRyxFQUFFO0lBQUE7SUFBQXZCLGNBQUEsR0FBQUssQ0FBQTtJQUNaSSxHQUFHLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRSwyQkFBMkI7TUFBRUssT0FBTyxFQUFFRDtJQUFJLENBQUMsQ0FBQztFQUM1RTtBQUNGLENBQUMsQ0FBQztBQUFDO0FBQUF2QixjQUFBLEdBQUFLLENBQUE7QUFFSEQsTUFBTSxDQUFDRyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQUE7RUFBQVQsY0FBQSxHQUFBVSxDQUFBO0VBQ3ZDLE1BQU07SUFBRWUsTUFBTTtJQUFFQyxVQUFVO0lBQUVDO0VBQU0sQ0FBQztFQUFBO0VBQUEsQ0FBQTNCLGNBQUEsR0FBQUssQ0FBQSxRQUFHRyxHQUFHLENBQUNPLElBQUk7RUFBQztFQUFBZixjQUFBLEdBQUFLLENBQUE7RUFDL0M7RUFBSTtFQUFBLENBQUFMLGNBQUEsR0FBQWdCLENBQUEsV0FBQ1MsTUFBTTtFQUFBO0VBQUEsQ0FBQXpCLGNBQUEsR0FBQWdCLENBQUEsVUFBSSxDQUFDVSxVQUFVO0VBQUE7RUFBQSxDQUFBMUIsY0FBQSxHQUFBZ0IsQ0FBQSxVQUFJVyxLQUFLLEtBQUtDLFNBQVMsR0FBRTtJQUFBO0lBQUE1QixjQUFBLEdBQUFnQixDQUFBO0lBQUFoQixjQUFBLEdBQUFLLENBQUE7SUFBQyxPQUFPSSxHQUFHLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUFpQixDQUFDLENBQUM7RUFBQyxDQUFDO0VBQUE7RUFBQTtJQUFBbkIsY0FBQSxHQUFBZ0IsQ0FBQTtFQUFBO0VBQUFoQixjQUFBLEdBQUFLLENBQUE7RUFDOUcsSUFBSTtJQUNGLE1BQU13QixJQUFJO0lBQUE7SUFBQSxDQUFBN0IsY0FBQSxHQUFBSyxDQUFBLFFBQUcsTUFBTUYsZUFBZSxDQUFDMkIsT0FBTyxDQUFDTCxNQUFNLEVBQUVDLFVBQVUsRUFBRUMsS0FBSyxDQUFDO0lBQUM7SUFBQTNCLGNBQUEsR0FBQUssQ0FBQTtJQUN0RUksR0FBRyxDQUFDUyxJQUFJLENBQUM7TUFBRVc7SUFBSyxDQUFDLENBQUM7RUFDcEIsQ0FBQyxDQUFDLE9BQU9OLEdBQUcsRUFBRTtJQUFBO0lBQUF2QixjQUFBLEdBQUFLLENBQUE7SUFDWkksR0FBRyxDQUFDUSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxLQUFLLEVBQUUsb0JBQW9CO01BQUVLLE9BQU8sRUFBRUQ7SUFBSSxDQUFDLENBQUM7RUFDckU7QUFDRixDQUFDLENBQUM7QUFBQztBQUFBdkIsY0FBQSxHQUFBSyxDQUFBO0FBRUhELE1BQU0sQ0FBQzJCLEdBQUcsQ0FBQyxZQUFZLEVBQUUsT0FBT3ZCLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQUE7RUFBQVQsY0FBQSxHQUFBVSxDQUFBO0VBQUFWLGNBQUEsR0FBQUssQ0FBQTtFQUMzQyxJQUFJO0lBQ0YsTUFBTTJCLFNBQVM7SUFBQTtJQUFBLENBQUFoQyxjQUFBLEdBQUFLLENBQUEsUUFBRyxNQUFNRixlQUFlLENBQUM4QixZQUFZLENBQUMsQ0FBQztJQUFDO0lBQUFqQyxjQUFBLEdBQUFLLENBQUE7SUFDdkRJLEdBQUcsQ0FBQ1MsSUFBSSxDQUFDO01BQUVjO0lBQVUsQ0FBQyxDQUFDO0VBQ3pCLENBQUMsQ0FBQyxPQUFPVCxHQUFHLEVBQUU7SUFBQTtJQUFBdkIsY0FBQSxHQUFBSyxDQUFBO0lBQ1pJLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFLHlCQUF5QjtNQUFFSyxPQUFPLEVBQUVEO0lBQUksQ0FBQyxDQUFDO0VBQzFFO0FBQ0YsQ0FBQyxDQUFDO0FBQUM7QUFBQXZCLGNBQUEsR0FBQUssQ0FBQTtBQUVIRCxNQUFNLENBQUMyQixHQUFHLENBQUMsUUFBUSxFQUFFLE9BQU92QixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUFBO0VBQUFULGNBQUEsR0FBQVUsQ0FBQTtFQUN2QyxNQUFNO0lBQUVnQjtFQUFXLENBQUM7RUFBQTtFQUFBLENBQUExQixjQUFBLEdBQUFLLENBQUEsUUFBR0csR0FBRyxDQUFDMEIsS0FBSztFQUFDO0VBQUFsQyxjQUFBLEdBQUFLLENBQUE7RUFDakMsSUFBSTtJQUNGLE1BQU04QixLQUFLO0lBQUE7SUFBQSxDQUFBbkMsY0FBQSxHQUFBSyxDQUFBLFFBQUcsTUFBTUYsZUFBZSxDQUFDaUMsUUFBUSxDQUFDVixVQUFvQixDQUFDO0lBQUM7SUFBQTFCLGNBQUEsR0FBQUssQ0FBQTtJQUNuRUksR0FBRyxDQUFDUyxJQUFJLENBQUM7TUFBRWlCO0lBQU0sQ0FBQyxDQUFDO0VBQ3JCLENBQUMsQ0FBQyxPQUFPWixHQUFHLEVBQUU7SUFBQTtJQUFBdkIsY0FBQSxHQUFBSyxDQUFBO0lBQ1pJLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFLHFCQUFxQjtNQUFFSyxPQUFPLEVBQUVEO0lBQUksQ0FBQyxDQUFDO0VBQ3RFO0FBQ0YsQ0FBQyxDQUFDO0FBQUM7QUFBQXZCLGNBQUEsR0FBQUssQ0FBQTtBQUVIRCxNQUFNLENBQUNHLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUFBO0VBQUFULGNBQUEsR0FBQVUsQ0FBQTtFQUN2RCxNQUFNO0lBQUVnQjtFQUFXLENBQUM7RUFBQTtFQUFBLENBQUExQixjQUFBLEdBQUFLLENBQUEsUUFBR0csR0FBRyxDQUFDNkIsTUFBTTtFQUFDO0VBQUFyQyxjQUFBLEdBQUFLLENBQUE7RUFDbEMsSUFBSTtJQUNGLE1BQU1pQyxpQkFBaUI7SUFBQTtJQUFBLENBQUF0QyxjQUFBLEdBQUFLLENBQUEsUUFBRyxNQUFNRixlQUFlLENBQUNvQyxnQkFBZ0IsQ0FBQ2IsVUFBVSxDQUFDO0lBQUM7SUFBQTFCLGNBQUEsR0FBQUssQ0FBQTtJQUM3RUksR0FBRyxDQUFDUyxJQUFJLENBQUM7TUFBRW9CO0lBQWtCLENBQUMsQ0FBQztFQUNqQyxDQUFDLENBQUMsT0FBT2YsR0FBRyxFQUFFO0lBQ1osTUFBTWlCLFlBQVk7SUFBQTtJQUFBLENBQUF4QyxjQUFBLEdBQUFLLENBQUE7SUFBRztJQUFBLENBQUFMLGNBQUEsR0FBQWdCLENBQUEsaUJBQU9PLEdBQUcsS0FBSyxRQUFRO0lBQUE7SUFBQSxDQUFBdkIsY0FBQSxHQUFBZ0IsQ0FBQSxVQUFJTyxHQUFHLEtBQUssSUFBSTtJQUFBO0lBQUEsQ0FBQXZCLGNBQUEsR0FBQWdCLENBQUEsVUFBSSxTQUFTLElBQUlPLEdBQUc7SUFBQTtJQUFBLENBQUF2QixjQUFBLEdBQUFnQixDQUFBLFVBQUlPLEdBQUcsQ0FBeUJrQixPQUFPO0lBQUE7SUFBQSxDQUFBekMsY0FBQSxHQUFBZ0IsQ0FBQSxVQUFHLGVBQWU7SUFBQztJQUFBaEIsY0FBQSxHQUFBSyxDQUFBO0lBQzFJSSxHQUFHLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRXFCLFlBQVk7TUFBRWhCLE9BQU8sRUFBRUQ7SUFBSSxDQUFDLENBQUM7RUFDN0Q7QUFDRixDQUFDLENBQUM7QUFFRixlQUFlbkIsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==