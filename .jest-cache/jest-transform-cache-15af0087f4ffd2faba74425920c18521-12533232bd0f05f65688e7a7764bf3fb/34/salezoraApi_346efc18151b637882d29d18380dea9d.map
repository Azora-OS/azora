{"version":3,"names":["cov_1vxjyoklzk","actualCoverage","express","SalezoraService","router","s","Router","post","req","res","f","name","target","strategy","deadline","body","b","status","json","error","campaign","createCampaign","Date","err","details","userId","campaignId","score","undefined","lead","addLead","get","campaigns","getCampaigns","query","leads","getLeads","params","optimizedStrategy","optimizeStrategy","errorMessage","message"],"sources":["salezoraApi.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport express from 'express';\nimport { SalezoraService } from './salezoraService';\n\nconst router = express.Router();\n\nrouter.post('/campaign', async (req, res) => {\n  const { name, target, strategy, deadline } = req.body;\n  if (!name || !target || !strategy || !deadline) {return res.status(400).json({ error: 'Missing fields' });}\n  try {\n    const campaign = await SalezoraService.createCampaign(name, target, strategy, new Date(deadline));\n    res.json({ campaign });\n  } catch (err) {\n    res.status(500).json({ error: 'Failed to create campaign', details: err });\n  }\n});\n\nrouter.post('/lead', async (req, res) => {\n  const { userId, campaignId, score } = req.body;\n  if (!userId || !campaignId || score === undefined) {return res.status(400).json({ error: 'Missing fields' });}\n  try {\n    const lead = await SalezoraService.addLead(userId, campaignId, score);\n    res.json({ lead });\n  } catch (err) {\n    res.status(500).json({ error: 'Failed to add lead', details: err });\n  }\n});\n\nrouter.get('/campaigns', async (req, res) => {\n  try {\n    const campaigns = await SalezoraService.getCampaigns();\n    res.json({ campaigns });\n  } catch (err) {\n    res.status(500).json({ error: 'Failed to get campaigns', details: err });\n  }\n});\n\nrouter.get('/leads', async (req, res) => {\n  const { campaignId } = req.query;\n  try {\n    const leads = await SalezoraService.getLeads(campaignId as string);\n    res.json({ leads });\n  } catch (err) {\n    res.status(500).json({ error: 'Failed to get leads', details: err });\n  }\n});\n\nrouter.post('/optimize/:campaignId', async (req, res) => {\n  const { campaignId } = req.params;\n  try {\n    const optimizedStrategy = await SalezoraService.optimizeStrategy(campaignId);\n    res.json({ optimizedStrategy });\n  } catch (err) {\n    const errorMessage = typeof err === 'object' && err !== null && 'message' in err ? (err as { message: string }).message : 'Unknown error';\n    res.status(500).json({ error: errorMessage, details: err });\n  }\n});\n\nexport default router;"],"mappings":"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","ignoreList":[]}