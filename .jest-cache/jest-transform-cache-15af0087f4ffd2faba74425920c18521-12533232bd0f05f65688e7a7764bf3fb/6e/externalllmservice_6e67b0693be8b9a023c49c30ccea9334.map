{"version":3,"names":["cov_2dj8atm1nf","actualCoverage","RoutingTier","ExternalLLMService","responseCache","s","Map","costTracking","totalCost","totalRequests","totalInputTokens","totalOutputTokens","averageCostPerRequest","costByModel","costByDate","constructor","config","f","maxTokens","temperature","topP","cacheTTL","initializeClient","provider","b","OpenAI","require","client","apiKey","error","console","Error","Anthropic","processQuery","query","startTime","Date","now","queryHash","hashQuery","cached","getFromCache","id","content","response","routingTier","EXTERNAL_LLM","responseTime","cost","metadata","cacheHit","model","inputTokens","outputTokens","callExternalLLM","calculateCost","trackCost","setInCache","totalTokens","message","String","callOpenAI","callAnthropic","chat","completions","create","messages","role","max_tokens","top_p","choices","usage","prompt_tokens","completion_tokens","type","text","input_tokens","output_tokens","inputCost","outputCost","includes","today","toISOString","split","getCostTracking","resetCostTracking","getCostByDate","date","getCostByModel","crypto","createHash","update","digest","get","timestamp","delete","set","getCacheStats","size","entries","clearCache","clear","getCacheSize","updateConfig","getConfig","validateApiKey","models","list","getAvailableModels","data","filter","m","map"],"sources":["external-llm-service.ts"],"sourcesContent":["/**\n * External LLM Service (Route C)\n * Handles OpenAI GPT-4 integration with cost tracking and response caching\n * Route C: Complex queries (strategic decisions, novel problems, creative tasks)\n */\n\nimport { AIQuery, AIResponse, RoutingTier } from './types';\n\n/**\n * Configuration for External LLM Service\n */\nexport interface ExternalLLMConfig {\n  provider: 'openai' | 'anthropic';\n  model: string;\n  apiKey: string;\n  maxTokens?: number;\n  temperature?: number;\n  topP?: number;\n  cacheTTL?: number; // Cache time-to-live in seconds\n}\n\n/**\n * Cost tracking for API calls\n */\nexport interface CostTrackingData {\n  totalCost: number;\n  totalRequests: number;\n  totalInputTokens: number;\n  totalOutputTokens: number;\n  averageCostPerRequest: number;\n  costByModel: Record<string, number>;\n  costByDate: Record<string, number>;\n}\n\n/**\n * External LLM Service\n * Implements OpenAI GPT-4 integration with cost tracking and caching\n */\nexport class ExternalLLMService {\n  private config: ExternalLLMConfig;\n  private client: any;\n  private responseCache: Map<string, { response: string; cost: number; timestamp: number }> = new Map();\n  private costTracking: CostTrackingData = {\n    totalCost: 0,\n    totalRequests: 0,\n    totalInputTokens: 0,\n    totalOutputTokens: 0,\n    averageCostPerRequest: 0,\n    costByModel: {},\n    costByDate: {}\n  };\n\n  constructor(config: ExternalLLMConfig) {\n    this.config = {\n      maxTokens: 2000,\n      temperature: 0.7,\n      topP: 0.9,\n      cacheTTL: 3600, // 1 hour default\n      ...config\n    };\n\n    this.initializeClient();\n  }\n\n  /**\n   * Initialize external LLM client based on provider\n   */\n  private initializeClient(): void {\n    if (this.config.provider === 'openai') {\n      try {\n        const { OpenAI } = require('openai');\n        this.client = new OpenAI({\n          apiKey: this.config.apiKey\n        });\n      } catch (error) {\n        console.error('Failed to initialize OpenAI client:', error);\n        throw new Error('OpenAI client initialization failed');\n      }\n    } else if (this.config.provider === 'anthropic') {\n      try {\n        const Anthropic = require('@anthropic-ai/sdk');\n        this.client = new Anthropic({\n          apiKey: this.config.apiKey\n        });\n      } catch (error) {\n        console.error('Failed to initialize Anthropic client:', error);\n        throw new Error('Anthropic client initialization failed');\n      }\n    } else {\n      throw new Error(`Unsupported LLM provider: ${this.config.provider}`);\n    }\n  }\n\n  /**\n   * Process a query using external LLM\n   */\n  async processQuery(query: AIQuery): Promise<AIResponse> {\n    const startTime = Date.now();\n    const queryHash = this.hashQuery(query.query);\n\n    // Check cache first\n    const cached = this.getFromCache(queryHash);\n    if (cached) {\n      return {\n        id: `response-${Date.now()}`,\n        content: cached.response,\n        routingTier: RoutingTier.EXTERNAL_LLM,\n        responseTime: Date.now() - startTime,\n        cost: 0, // No cost for cached response\n        cached: true,\n        metadata: {\n          cacheHit: true,\n          provider: this.config.provider,\n          model: this.config.model\n        }\n      };\n    }\n\n    try {\n      // Call external LLM\n      const { response, inputTokens, outputTokens } = await this.callExternalLLM(query.query);\n\n      // Calculate cost\n      const cost = this.calculateCost(inputTokens, outputTokens);\n\n      // Track cost\n      this.trackCost(cost, inputTokens, outputTokens);\n\n      // Cache the response\n      this.setInCache(queryHash, response, cost);\n\n      return {\n        id: `response-${Date.now()}`,\n        content: response,\n        routingTier: RoutingTier.EXTERNAL_LLM,\n        responseTime: Date.now() - startTime,\n        cost,\n        cached: false,\n        metadata: {\n          cacheHit: false,\n          provider: this.config.provider,\n          model: this.config.model,\n          inputTokens,\n          outputTokens,\n          totalTokens: inputTokens + outputTokens\n        }\n      };\n    } catch (error) {\n      throw new Error(\n        `External LLM processing failed: ${error instanceof Error ? error.message : String(error)}`\n      );\n    }\n  }\n\n  /**\n   * Call external LLM API\n   */\n  private async callExternalLLM(\n    query: string\n  ): Promise<{ response: string; inputTokens: number; outputTokens: number }> {\n    try {\n      if (this.config.provider === 'openai') {\n        return await this.callOpenAI(query);\n      } else if (this.config.provider === 'anthropic') {\n        return await this.callAnthropic(query);\n      }\n\n      throw new Error(`Unsupported LLM provider: ${this.config.provider}`);\n    } catch (error) {\n      console.error('Error calling external LLM:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Call OpenAI API\n   */\n  private async callOpenAI(\n    query: string\n  ): Promise<{ response: string; inputTokens: number; outputTokens: number }> {\n    const response = await this.client.chat.completions.create({\n      model: this.config.model,\n      messages: [\n        {\n          role: 'system',\n          content: 'You are an intelligent AI assistant. Provide accurate, comprehensive, and well-reasoned responses.'\n        },\n        {\n          role: 'user',\n          content: query\n        }\n      ],\n      temperature: this.config.temperature,\n      max_tokens: this.config.maxTokens,\n      top_p: this.config.topP\n    });\n\n    const content = response.choices[0].message.content || '';\n    const inputTokens = response.usage?.prompt_tokens || 0;\n    const outputTokens = response.usage?.completion_tokens || 0;\n\n    return {\n      response: content,\n      inputTokens,\n      outputTokens\n    };\n  }\n\n  /**\n   * Call Anthropic API\n   */\n  private async callAnthropic(\n    query: string\n  ): Promise<{ response: string; inputTokens: number; outputTokens: number }> {\n    const response = await this.client.messages.create({\n      model: this.config.model,\n      max_tokens: this.config.maxTokens || 2000,\n      messages: [\n        {\n          role: 'user',\n          content: query\n        }\n      ]\n    });\n\n    const content = response.content[0].type === 'text' ? response.content[0].text : '';\n    const inputTokens = response.usage?.input_tokens || 0;\n    const outputTokens = response.usage?.output_tokens || 0;\n\n    return {\n      response: content,\n      inputTokens,\n      outputTokens\n    };\n  }\n\n  /**\n   * Calculate cost based on tokens used\n   */\n  private calculateCost(inputTokens: number, outputTokens: number): number {\n    // Cost per 1K tokens varies by provider and model\n    // OpenAI GPT-4: ~$0.03 per 1K input tokens, ~$0.06 per 1K output tokens\n    // OpenAI GPT-4 Turbo: ~$0.01 per 1K input tokens, ~$0.03 per 1K output tokens\n    // Anthropic Claude 3: ~$0.003 per 1K input tokens, ~$0.015 per 1K output tokens\n\n    let inputCost = 0;\n    let outputCost = 0;\n\n    if (this.config.provider === 'openai') {\n      if (this.config.model.includes('gpt-4-turbo')) {\n        inputCost = (inputTokens / 1000) * 0.01;\n        outputCost = (outputTokens / 1000) * 0.03;\n      } else if (this.config.model.includes('gpt-4')) {\n        inputCost = (inputTokens / 1000) * 0.03;\n        outputCost = (outputTokens / 1000) * 0.06;\n      } else if (this.config.model.includes('gpt-3.5')) {\n        inputCost = (inputTokens / 1000) * 0.0005;\n        outputCost = (outputTokens / 1000) * 0.0015;\n      }\n    } else if (this.config.provider === 'anthropic') {\n      inputCost = (inputTokens / 1000) * 0.003;\n      outputCost = (outputTokens / 1000) * 0.015;\n    }\n\n    return inputCost + outputCost;\n  }\n\n  /**\n   * Track cost for analytics\n   */\n  private trackCost(cost: number, inputTokens: number, outputTokens: number): void {\n    this.costTracking.totalCost += cost;\n    this.costTracking.totalRequests += 1;\n    this.costTracking.totalInputTokens += inputTokens;\n    this.costTracking.totalOutputTokens += outputTokens;\n    this.costTracking.averageCostPerRequest = this.costTracking.totalCost / this.costTracking.totalRequests;\n\n    // Track by model\n    if (!this.costTracking.costByModel[this.config.model]) {\n      this.costTracking.costByModel[this.config.model] = 0;\n    }\n    this.costTracking.costByModel[this.config.model] += cost;\n\n    // Track by date\n    const today = new Date().toISOString().split('T')[0];\n    if (!this.costTracking.costByDate[today]) {\n      this.costTracking.costByDate[today] = 0;\n    }\n    this.costTracking.costByDate[today] += cost;\n  }\n\n  /**\n   * Get cost tracking data\n   */\n  getCostTracking(): CostTrackingData {\n    return { ...this.costTracking };\n  }\n\n  /**\n   * Reset cost tracking\n   */\n  resetCostTracking(): void {\n    this.costTracking = {\n      totalCost: 0,\n      totalRequests: 0,\n      totalInputTokens: 0,\n      totalOutputTokens: 0,\n      averageCostPerRequest: 0,\n      costByModel: {},\n      costByDate: {}\n    };\n  }\n\n  /**\n   * Get cost for a specific date\n   */\n  getCostByDate(date: string): number {\n    return this.costTracking.costByDate[date] || 0;\n  }\n\n  /**\n   * Get cost for a specific model\n   */\n  getCostByModel(model: string): number {\n    return this.costTracking.costByModel[model] || 0;\n  }\n\n  /**\n   * Hash query for caching\n   */\n  private hashQuery(query: string): string {\n    const crypto = require('crypto');\n    return crypto.createHash('sha256').update(query).digest('hex');\n  }\n\n  /**\n   * Get response from cache\n   */\n  private getFromCache(queryHash: string): { response: string; cost: number } | null {\n    const cached = this.responseCache.get(queryHash);\n    if (cached && Date.now() - cached.timestamp < (this.config.cacheTTL || 3600) * 1000) {\n      return {\n        response: cached.response,\n        cost: cached.cost\n      };\n    }\n    this.responseCache.delete(queryHash);\n    return null;\n  }\n\n  /**\n   * Store response in cache\n   */\n  private setInCache(queryHash: string, response: string, cost: number): void {\n    this.responseCache.set(queryHash, {\n      response,\n      cost,\n      timestamp: Date.now()\n    });\n  }\n\n  /**\n   * Get cache statistics\n   */\n  getCacheStats(): { size: number; entries: number } {\n    return {\n      size: this.responseCache.size,\n      entries: this.responseCache.size\n    };\n  }\n\n  /**\n   * Clear cache\n   */\n  clearCache(): void {\n    this.responseCache.clear();\n  }\n\n  /**\n   * Get cache entry count\n   */\n  getCacheSize(): number {\n    return this.responseCache.size;\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(config: Partial<ExternalLLMConfig>): void {\n    this.config = {\n      ...this.config,\n      ...config\n    };\n\n    // Reinitialize client if provider or API key changed\n    if (config.provider || config.apiKey) {\n      this.initializeClient();\n    }\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): ExternalLLMConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Validate API key\n   */\n  async validateApiKey(): Promise<boolean> {\n    try {\n      if (this.config.provider === 'openai') {\n        // Make a minimal API call to validate\n        await this.client.models.list();\n        return true;\n      } else if (this.config.provider === 'anthropic') {\n        // Anthropic doesn't have a simple validation endpoint\n        // We'll consider it valid if client initialized successfully\n        return !!this.client;\n      }\n      return false;\n    } catch (error) {\n      console.error('API key validation failed:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Get available models for provider\n   */\n  async getAvailableModels(): Promise<string[]> {\n    try {\n      if (this.config.provider === 'openai') {\n        const models = await this.client.models.list();\n        return models.data\n          .filter((m: any) => m.id.includes('gpt'))\n          .map((m: any) => m.id);\n      } else if (this.config.provider === 'anthropic') {\n        // Return known Anthropic models\n        return ['claude-3-opus', 'claude-3-sonnet', 'claude-3-haiku'];\n      }\n      return [];\n    } catch (error) {\n      console.error('Failed to get available models:', error);\n      return [];\n    }\n  }\n}\n\nexport default ExternalLLMService;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}