{"version":3,"names":["cov_2pzmk3puq5","actualCoverage","winston","logger","s","createLogger","level","format","combine","timestamp","errors","stack","json","defaultMeta","service","transports","Console","colorize","simple","File","filename","requestLogger","req","res","next","f","start","Date","now","on","duration","info","method","url","status","statusCode","ip","userAgent","get"],"sources":["requestLogger.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\n\nCopyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.\n\nSee LICENSE file for details.\n*/\n\nimport { Request, Response, NextFunction } from 'express';\nimport winston from 'winston';\n\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.errors({ stack: true }),\n    winston.format.json()\n  ),\n  defaultMeta: { service: 'azora-forge' },\n  transports: [\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.simple()\n      ),\n    }),\n    new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),\n    new winston.transports.File({ filename: 'logs/combined.log' }),\n  ],\n});\n\nexport const requestLogger = (req: Request, res: Response, next: NextFunction): void => {\n  const start = Date.now();\n\n  res.on('finish', () => {\n    const duration = Date.now() - start;\n    logger.info('Request completed', {\n      method: req.method,\n      url: req.url,\n      status: res.statusCode,\n      duration: `${duration}ms`,\n      ip: req.ip,\n      userAgent: req.get('User-Agent'),\n    });\n  });\n\n  next();\n};\n\nexport default logger;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,OAAOE,OAAO,MAAM,SAAS;AAE7B,MAAMC,MAAM;AAAA;AAAA,CAAAH,cAAA,GAAAI,CAAA,OAAGF,OAAO,CAACG,YAAY,CAAC;EAClCC,KAAK,EAAE,MAAM;EACbC,MAAM,EAAEL,OAAO,CAACK,MAAM,CAACC,OAAO,CAC5BN,OAAO,CAACK,MAAM,CAACE,SAAS,CAAC,CAAC,EAC1BP,OAAO,CAACK,MAAM,CAACG,MAAM,CAAC;IAAEC,KAAK,EAAE;EAAK,CAAC,CAAC,EACtCT,OAAO,CAACK,MAAM,CAACK,IAAI,CAAC,CACtB,CAAC;EACDC,WAAW,EAAE;IAAEC,OAAO,EAAE;EAAc,CAAC;EACvCC,UAAU,EAAE,CACV,IAAIb,OAAO,CAACa,UAAU,CAACC,OAAO,CAAC;IAC7BT,MAAM,EAAEL,OAAO,CAACK,MAAM,CAACC,OAAO,CAC5BN,OAAO,CAACK,MAAM,CAACU,QAAQ,CAAC,CAAC,EACzBf,OAAO,CAACK,MAAM,CAACW,MAAM,CAAC,CACxB;EACF,CAAC,CAAC,EACF,IAAIhB,OAAO,CAACa,UAAU,CAACI,IAAI,CAAC;IAAEC,QAAQ,EAAE,gBAAgB;IAAEd,KAAK,EAAE;EAAQ,CAAC,CAAC,EAC3E,IAAIJ,OAAO,CAACa,UAAU,CAACI,IAAI,CAAC;IAAEC,QAAQ,EAAE;EAAoB,CAAC,CAAC;AAElE,CAAC,CAAC;AAAC;AAAApB,cAAA,GAAAI,CAAA;AAEH,OAAO,MAAMiB,aAAa,GAAGA,CAACC,GAAY,EAAEC,GAAa,EAAEC,IAAkB,KAAW;EAAA;EAAAxB,cAAA,GAAAyB,CAAA;EACtF,MAAMC,KAAK;EAAA;EAAA,CAAA1B,cAAA,GAAAI,CAAA,OAAGuB,IAAI,CAACC,GAAG,CAAC,CAAC;EAAC;EAAA5B,cAAA,GAAAI,CAAA;EAEzBmB,GAAG,CAACM,EAAE,CAAC,QAAQ,EAAE,MAAM;IAAA;IAAA7B,cAAA,GAAAyB,CAAA;IACrB,MAAMK,QAAQ;IAAA;IAAA,CAAA9B,cAAA,GAAAI,CAAA,OAAGuB,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGF,KAAK;IAAC;IAAA1B,cAAA,GAAAI,CAAA;IACpCD,MAAM,CAAC4B,IAAI,CAAC,mBAAmB,EAAE;MAC/BC,MAAM,EAAEV,GAAG,CAACU,MAAM;MAClBC,GAAG,EAAEX,GAAG,CAACW,GAAG;MACZC,MAAM,EAAEX,GAAG,CAACY,UAAU;MACtBL,QAAQ,EAAE,GAAGA,QAAQ,IAAI;MACzBM,EAAE,EAAEd,GAAG,CAACc,EAAE;MACVC,SAAS,EAAEf,GAAG,CAACgB,GAAG,CAAC,YAAY;IACjC,CAAC,CAAC;EACJ,CAAC,CAAC;EAAC;EAAAtC,cAAA,GAAAI,CAAA;EAEHoB,IAAI,CAAC,CAAC;AACR,CAAC;AAED,eAAerB,MAAM","ignoreList":[]}