258e419edbcf648462179690653c8cf8
/* istanbul ignore next */
function cov_2pzmk3puq5() {
  var path = "/workspaces/azora/services/azora-forge/src/middleware/requestLogger.ts";
  var hash = "080b6565f30000f6d95a50e9b47f51922f782298";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/azora-forge/src/middleware/requestLogger.ts",
    statementMap: {
      "0": {
        start: {
          line: 12,
          column: 15
        },
        end: {
          line: 30,
          column: 2
        }
      },
      "1": {
        start: {
          line: 32,
          column: 29
        },
        end: {
          line: 48,
          column: 1
        }
      },
      "2": {
        start: {
          line: 33,
          column: 16
        },
        end: {
          line: 33,
          column: 26
        }
      },
      "3": {
        start: {
          line: 35,
          column: 2
        },
        end: {
          line: 45,
          column: 5
        }
      },
      "4": {
        start: {
          line: 36,
          column: 21
        },
        end: {
          line: 36,
          column: 39
        }
      },
      "5": {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 44,
          column: 7
        }
      },
      "6": {
        start: {
          line: 47,
          column: 2
        },
        end: {
          line: 47,
          column: 9
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 32,
            column: 29
          },
          end: {
            line: 32,
            column: 30
          }
        },
        loc: {
          start: {
            line: 32,
            column: 88
          },
          end: {
            line: 48,
            column: 1
          }
        },
        line: 32
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 35,
            column: 19
          },
          end: {
            line: 35,
            column: 20
          }
        },
        loc: {
          start: {
            line: 35,
            column: 25
          },
          end: {
            line: 45,
            column: 3
          }
        },
        line: 35
      }
    },
    branchMap: {},
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {},
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "080b6565f30000f6d95a50e9b47f51922f782298"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2pzmk3puq5 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2pzmk3puq5();
/*
AZORA PROPRIETARY LICENSE

Copyright Â© 2025 Azora ES (Pty) Ltd. All Rights Reserved.

See LICENSE file for details.
*/

import winston from 'winston';
const logger =
/* istanbul ignore next */
(cov_2pzmk3puq5().s[0]++, winston.createLogger({
  level: 'info',
  format: winston.format.combine(winston.format.timestamp(), winston.format.errors({
    stack: true
  }), winston.format.json()),
  defaultMeta: {
    service: 'azora-forge'
  },
  transports: [new winston.transports.Console({
    format: winston.format.combine(winston.format.colorize(), winston.format.simple())
  }), new winston.transports.File({
    filename: 'logs/error.log',
    level: 'error'
  }), new winston.transports.File({
    filename: 'logs/combined.log'
  })]
}));
/* istanbul ignore next */
cov_2pzmk3puq5().s[1]++;
export const requestLogger = (req, res, next) => {
  /* istanbul ignore next */
  cov_2pzmk3puq5().f[0]++;
  const start =
  /* istanbul ignore next */
  (cov_2pzmk3puq5().s[2]++, Date.now());
  /* istanbul ignore next */
  cov_2pzmk3puq5().s[3]++;
  res.on('finish', () => {
    /* istanbul ignore next */
    cov_2pzmk3puq5().f[1]++;
    const duration =
    /* istanbul ignore next */
    (cov_2pzmk3puq5().s[4]++, Date.now() - start);
    /* istanbul ignore next */
    cov_2pzmk3puq5().s[5]++;
    logger.info('Request completed', {
      method: req.method,
      url: req.url,
      status: res.statusCode,
      duration: `${duration}ms`,
      ip: req.ip,
      userAgent: req.get('User-Agent')
    });
  });
  /* istanbul ignore next */
  cov_2pzmk3puq5().s[6]++;
  next();
};
export default logger;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMnB6bWszcHVxNSIsImFjdHVhbENvdmVyYWdlIiwid2luc3RvbiIsImxvZ2dlciIsInMiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsImZvcm1hdCIsImNvbWJpbmUiLCJ0aW1lc3RhbXAiLCJlcnJvcnMiLCJzdGFjayIsImpzb24iLCJkZWZhdWx0TWV0YSIsInNlcnZpY2UiLCJ0cmFuc3BvcnRzIiwiQ29uc29sZSIsImNvbG9yaXplIiwic2ltcGxlIiwiRmlsZSIsImZpbGVuYW1lIiwicmVxdWVzdExvZ2dlciIsInJlcSIsInJlcyIsIm5leHQiLCJmIiwic3RhcnQiLCJEYXRlIiwibm93Iiwib24iLCJkdXJhdGlvbiIsImluZm8iLCJtZXRob2QiLCJ1cmwiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiaXAiLCJ1c2VyQWdlbnQiLCJnZXQiXSwic291cmNlcyI6WyJyZXF1ZXN0TG9nZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BWk9SQSBQUk9QUklFVEFSWSBMSUNFTlNFXG5cbkNvcHlyaWdodCDCqSAyMDI1IEF6b3JhIEVTIChQdHkpIEx0ZC4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cblxuU2VlIExJQ0VOU0UgZmlsZSBmb3IgZGV0YWlscy5cbiovXG5cbmltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlLCBOZXh0RnVuY3Rpb24gfSBmcm9tICdleHByZXNzJztcbmltcG9ydCB3aW5zdG9uIGZyb20gJ3dpbnN0b24nO1xuXG5jb25zdCBsb2dnZXIgPSB3aW5zdG9uLmNyZWF0ZUxvZ2dlcih7XG4gIGxldmVsOiAnaW5mbycsXG4gIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICB3aW5zdG9uLmZvcm1hdC50aW1lc3RhbXAoKSxcbiAgICB3aW5zdG9uLmZvcm1hdC5lcnJvcnMoeyBzdGFjazogdHJ1ZSB9KSxcbiAgICB3aW5zdG9uLmZvcm1hdC5qc29uKClcbiAgKSxcbiAgZGVmYXVsdE1ldGE6IHsgc2VydmljZTogJ2F6b3JhLWZvcmdlJyB9LFxuICB0cmFuc3BvcnRzOiBbXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcbiAgICAgIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQuY29sb3JpemUoKSxcbiAgICAgICAgd2luc3Rvbi5mb3JtYXQuc2ltcGxlKClcbiAgICAgICksXG4gICAgfSksXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHsgZmlsZW5hbWU6ICdsb2dzL2Vycm9yLmxvZycsIGxldmVsOiAnZXJyb3InIH0pLFxuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiAnbG9ncy9jb21iaW5lZC5sb2cnIH0pLFxuICBdLFxufSk7XG5cbmV4cG9ydCBjb25zdCByZXF1ZXN0TG9nZ2VyID0gKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKTogdm9pZCA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcblxuICByZXMub24oJ2ZpbmlzaCcsICgpID0+IHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBsb2dnZXIuaW5mbygnUmVxdWVzdCBjb21wbGV0ZWQnLCB7XG4gICAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgICB1cmw6IHJlcS51cmwsXG4gICAgICBzdGF0dXM6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgZHVyYXRpb246IGAke2R1cmF0aW9ufW1zYCxcbiAgICAgIGlwOiByZXEuaXAsXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5nZXQoJ1VzZXItQWdlbnQnKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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