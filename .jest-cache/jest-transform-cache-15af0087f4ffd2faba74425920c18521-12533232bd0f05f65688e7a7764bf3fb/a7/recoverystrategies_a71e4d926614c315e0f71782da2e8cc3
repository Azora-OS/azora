687e949a56596110785c3aa90198343d
/* istanbul ignore next */
function cov_2o6cype7kj() {
  var path = "/workspaces/azora/services/phoenix-server/src/recovery-strategies.ts";
  var hash = "e462135e6ae89cd245fe63c6bdcc79d9d960a5ee";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/workspaces/azora/services/phoenix-server/src/recovery-strategies.ts",
    statementMap: {
      "0": {
        start: {
          line: 35,
          column: 8
        },
        end: {
          line: 35,
          column: 16
        }
      },
      "1": {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 36,
          column: 54
        }
      },
      "2": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 37,
          column: 28
        }
      },
      "3": {
        start: {
          line: 44,
          column: 8
        },
        end: {
          line: 109,
          column: 10
        }
      },
      "4": {
        start: {
          line: 49,
          column: 39
        },
        end: {
          line: 49,
          column: 85
        }
      },
      "5": {
        start: {
          line: 51,
          column: 20
        },
        end: {
          line: 51,
          column: 74
        }
      },
      "6": {
        start: {
          line: 53,
          column: 20
        },
        end: {
          line: 53,
          column: 43
        }
      },
      "7": {
        start: {
          line: 54,
          column: 20
        },
        end: {
          line: 54,
          column: 32
        }
      },
      "8": {
        start: {
          line: 62,
          column: 39
        },
        end: {
          line: 62,
          column: 60
        }
      },
      "9": {
        start: {
          line: 64,
          column: 20
        },
        end: {
          line: 64,
          column: 79
        }
      },
      "10": {
        start: {
          line: 66,
          column: 20
        },
        end: {
          line: 66,
          column: 43
        }
      },
      "11": {
        start: {
          line: 67,
          column: 20
        },
        end: {
          line: 67,
          column: 32
        }
      },
      "12": {
        start: {
          line: 75,
          column: 39
        },
        end: {
          line: 75,
          column: 97
        }
      },
      "13": {
        start: {
          line: 77,
          column: 20
        },
        end: {
          line: 77,
          column: 74
        }
      },
      "14": {
        start: {
          line: 79,
          column: 20
        },
        end: {
          line: 79,
          column: 43
        }
      },
      "15": {
        start: {
          line: 80,
          column: 20
        },
        end: {
          line: 80,
          column: 32
        }
      },
      "16": {
        start: {
          line: 88,
          column: 39
        },
        end: {
          line: 88,
          column: 89
        }
      },
      "17": {
        start: {
          line: 90,
          column: 20
        },
        end: {
          line: 90,
          column: 86
        }
      },
      "18": {
        start: {
          line: 92,
          column: 20
        },
        end: {
          line: 92,
          column: 43
        }
      },
      "19": {
        start: {
          line: 93,
          column: 20
        },
        end: {
          line: 93,
          column: 32
        }
      },
      "20": {
        start: {
          line: 101,
          column: 39
        },
        end: {
          line: 101,
          column: 85
        }
      },
      "21": {
        start: {
          line: 103,
          column: 20
        },
        end: {
          line: 103,
          column: 83
        }
      },
      "22": {
        start: {
          line: 105,
          column: 20
        },
        end: {
          line: 105,
          column: 42
        }
      },
      "23": {
        start: {
          line: 106,
          column: 20
        },
        end: {
          line: 106,
          column: 32
        }
      },
      "24": {
        start: {
          line: 116,
          column: 26
        },
        end: {
          line: 116,
          column: 36
        }
      },
      "25": {
        start: {
          line: 117,
          column: 27
        },
        end: {
          line: 117,
          column: 51
        }
      },
      "26": {
        start: {
          line: 120,
          column: 25
        },
        end: {
          line: 122,
          column: 55
        }
      },
      "27": {
        start: {
          line: 121,
          column: 25
        },
        end: {
          line: 121,
          column: 45
        }
      },
      "28": {
        start: {
          line: 122,
          column: 28
        },
        end: {
          line: 122,
          column: 51
        }
      },
      "29": {
        start: {
          line: 124,
          column: 8
        },
        end: {
          line: 135,
          column: 9
        }
      },
      "30": {
        start: {
          line: 125,
          column: 12
        },
        end: {
          line: 125,
          column: 80
        }
      },
      "31": {
        start: {
          line: 126,
          column: 12
        },
        end: {
          line: 134,
          column: 14
        }
      },
      "32": {
        start: {
          line: 137,
          column: 8
        },
        end: {
          line: 137,
          column: 85
        }
      },
      "33": {
        start: {
          line: 139,
          column: 8
        },
        end: {
          line: 173,
          column: 9
        }
      },
      "34": {
        start: {
          line: 140,
          column: 28
        },
        end: {
          line: 140,
          column: 59
        }
      },
      "35": {
        start: {
          line: 141,
          column: 33
        },
        end: {
          line: 141,
          column: 55
        }
      },
      "36": {
        start: {
          line: 143,
          column: 47
        },
        end: {
          line: 151,
          column: 13
        }
      },
      "37": {
        start: {
          line: 153,
          column: 12
        },
        end: {
          line: 153,
          column: 42
        }
      },
      "38": {
        start: {
          line: 154,
          column: 12
        },
        end: {
          line: 154,
          column: 54
        }
      },
      "39": {
        start: {
          line: 157,
          column: 12
        },
        end: {
          line: 157,
          column: 50
        }
      },
      "40": {
        start: {
          line: 159,
          column: 12
        },
        end: {
          line: 159,
          column: 28
        }
      },
      "41": {
        start: {
          line: 161,
          column: 47
        },
        end: {
          line: 169,
          column: 13
        }
      },
      "42": {
        start: {
          line: 171,
          column: 12
        },
        end: {
          line: 171,
          column: 42
        }
      },
      "43": {
        start: {
          line: 172,
          column: 12
        },
        end: {
          line: 172,
          column: 28
        }
      },
      "44": {
        start: {
          line: 180,
          column: 8
        },
        end: {
          line: 195,
          column: 9
        }
      },
      "45": {
        start: {
          line: 181,
          column: 12
        },
        end: {
          line: 192,
          column: 74
        }
      },
      "46": {
        start: {
          line: 192,
          column: 27
        },
        end: {
          line: 192,
          column: 72
        }
      },
      "47": {
        start: {
          line: 194,
          column: 12
        },
        end: {
          line: 194,
          column: 55
        }
      },
      "48": {
        start: {
          line: 202,
          column: 8
        },
        end: {
          line: 202,
          column: 30
        }
      },
      "49": {
        start: {
          line: 209,
          column: 22
        },
        end: {
          line: 209,
          column: 43
        }
      },
      "50": {
        start: {
          line: 210,
          column: 27
        },
        end: {
          line: 210,
          column: 71
        }
      },
      "51": {
        start: {
          line: 210,
          column: 54
        },
        end: {
          line: 210,
          column: 63
        }
      },
      "52": {
        start: {
          line: 211,
          column: 32
        },
        end: {
          line: 211,
          column: 103
        }
      },
      "53": {
        start: {
          line: 211,
          column: 66
        },
        end: {
          line: 211,
          column: 86
        }
      },
      "54": {
        start: {
          line: 213,
          column: 8
        },
        end: {
          line: 218,
          column: 10
        }
      },
      "55": {
        start: {
          line: 222,
          column: 8
        },
        end: {
          line: 222,
          column: 63
        }
      },
      "56": {
        start: {
          line: 222,
          column: 38
        },
        end: {
          line: 222,
          column: 61
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 34,
            column: 4
          },
          end: {
            line: 34,
            column: 5
          }
        },
        loc: {
          start: {
            line: 34,
            column: 18
          },
          end: {
            line: 38,
            column: 5
          }
        },
        line: 34
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 43,
            column: 4
          },
          end: {
            line: 43,
            column: 5
          }
        },
        loc: {
          start: {
            line: 43,
            column: 55
          },
          end: {
            line: 110,
            column: 5
          }
        },
        line: 43
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 49,
            column: 27
          },
          end: {
            line: 49,
            column: 28
          }
        },
        loc: {
          start: {
            line: 49,
            column: 39
          },
          end: {
            line: 49,
            column: 85
          }
        },
        line: 49
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 50,
            column: 25
          },
          end: {
            line: 50,
            column: 26
          }
        },
        loc: {
          start: {
            line: 50,
            column: 44
          },
          end: {
            line: 55,
            column: 17
          }
        },
        line: 50
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 62,
            column: 27
          },
          end: {
            line: 62,
            column: 28
          }
        },
        loc: {
          start: {
            line: 62,
            column: 39
          },
          end: {
            line: 62,
            column: 60
          }
        },
        line: 62
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 63,
            column: 25
          },
          end: {
            line: 63,
            column: 26
          }
        },
        loc: {
          start: {
            line: 63,
            column: 44
          },
          end: {
            line: 68,
            column: 17
          }
        },
        line: 63
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 75,
            column: 27
          },
          end: {
            line: 75,
            column: 28
          }
        },
        loc: {
          start: {
            line: 75,
            column: 39
          },
          end: {
            line: 75,
            column: 97
          }
        },
        line: 75
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 76,
            column: 25
          },
          end: {
            line: 76,
            column: 26
          }
        },
        loc: {
          start: {
            line: 76,
            column: 44
          },
          end: {
            line: 81,
            column: 17
          }
        },
        line: 76
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 88,
            column: 27
          },
          end: {
            line: 88,
            column: 28
          }
        },
        loc: {
          start: {
            line: 88,
            column: 39
          },
          end: {
            line: 88,
            column: 89
          }
        },
        line: 88
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 89,
            column: 25
          },
          end: {
            line: 89,
            column: 26
          }
        },
        loc: {
          start: {
            line: 89,
            column: 44
          },
          end: {
            line: 94,
            column: 17
          }
        },
        line: 89
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 101,
            column: 27
          },
          end: {
            line: 101,
            column: 28
          }
        },
        loc: {
          start: {
            line: 101,
            column: 39
          },
          end: {
            line: 101,
            column: 85
          }
        },
        line: 101
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 102,
            column: 25
          },
          end: {
            line: 102,
            column: 26
          }
        },
        loc: {
          start: {
            line: 102,
            column: 44
          },
          end: {
            line: 107,
            column: 17
          }
        },
        line: 102
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 115,
            column: 4
          },
          end: {
            line: 115,
            column: 5
          }
        },
        loc: {
          start: {
            line: 115,
            column: 77
          },
          end: {
            line: 174,
            column: 5
          }
        },
        line: 115
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 121,
            column: 20
          },
          end: {
            line: 121,
            column: 21
          }
        },
        loc: {
          start: {
            line: 121,
            column: 25
          },
          end: {
            line: 121,
            column: 45
          }
        },
        line: 121
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 122,
            column: 18
          },
          end: {
            line: 122,
            column: 19
          }
        },
        loc: {
          start: {
            line: 122,
            column: 28
          },
          end: {
            line: 122,
            column: 51
          }
        },
        line: 122
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 179,
            column: 4
          },
          end: {
            line: 179,
            column: 5
          }
        },
        loc: {
          start: {
            line: 179,
            column: 78
          },
          end: {
            line: 196,
            column: 5
          }
        },
        line: 179
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 192,
            column: 21
          },
          end: {
            line: 192,
            column: 22
          }
        },
        loc: {
          start: {
            line: 192,
            column: 27
          },
          end: {
            line: 192,
            column: 72
          }
        },
        line: 192
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 201,
            column: 4
          },
          end: {
            line: 201,
            column: 5
          }
        },
        loc: {
          start: {
            line: 201,
            column: 39
          },
          end: {
            line: 203,
            column: 5
          }
        },
        line: 201
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 208,
            column: 4
          },
          end: {
            line: 208,
            column: 5
          }
        },
        loc: {
          start: {
            line: 208,
            column: 15
          },
          end: {
            line: 219,
            column: 5
          }
        },
        line: 208
      },
      "19": {
        name: "(anonymous_19)",
        decl: {
          start: {
            line: 210,
            column: 49
          },
          end: {
            line: 210,
            column: 50
          }
        },
        loc: {
          start: {
            line: 210,
            column: 54
          },
          end: {
            line: 210,
            column: 63
          }
        },
        line: 210
      },
      "20": {
        name: "(anonymous_20)",
        decl: {
          start: {
            line: 211,
            column: 54
          },
          end: {
            line: 211,
            column: 55
          }
        },
        loc: {
          start: {
            line: 211,
            column: 66
          },
          end: {
            line: 211,
            column: 86
          }
        },
        line: 211
      },
      "21": {
        name: "(anonymous_21)",
        decl: {
          start: {
            line: 221,
            column: 4
          },
          end: {
            line: 221,
            column: 5
          }
        },
        loc: {
          start: {
            line: 221,
            column: 45
          },
          end: {
            line: 223,
            column: 5
          }
        },
        line: 221
      },
      "22": {
        name: "(anonymous_22)",
        decl: {
          start: {
            line: 222,
            column: 27
          },
          end: {
            line: 222,
            column: 28
          }
        },
        loc: {
          start: {
            line: 222,
            column: 38
          },
          end: {
            line: 222,
            column: 61
          }
        },
        line: 222
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 49,
            column: 39
          },
          end: {
            line: 49,
            column: 85
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 49,
            column: 39
          },
          end: {
            line: 49,
            column: 63
          }
        }, {
          start: {
            line: 49,
            column: 67
          },
          end: {
            line: 49,
            column: 85
          }
        }],
        line: 49
      },
      "1": {
        loc: {
          start: {
            line: 75,
            column: 39
          },
          end: {
            line: 75,
            column: 97
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 75,
            column: 39
          },
          end: {
            line: 75,
            column: 65
          }
        }, {
          start: {
            line: 75,
            column: 69
          },
          end: {
            line: 75,
            column: 97
          }
        }],
        line: 75
      },
      "2": {
        loc: {
          start: {
            line: 88,
            column: 39
          },
          end: {
            line: 88,
            column: 89
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 88,
            column: 39
          },
          end: {
            line: 88,
            column: 67
          }
        }, {
          start: {
            line: 88,
            column: 71
          },
          end: {
            line: 88,
            column: 89
          }
        }],
        line: 88
      },
      "3": {
        loc: {
          start: {
            line: 101,
            column: 39
          },
          end: {
            line: 101,
            column: 85
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 101,
            column: 39
          },
          end: {
            line: 101,
            column: 63
          }
        }, {
          start: {
            line: 101,
            column: 67
          },
          end: {
            line: 101,
            column: 85
          }
        }],
        line: 101
      },
      "4": {
        loc: {
          start: {
            line: 124,
            column: 8
          },
          end: {
            line: 135,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 124,
            column: 8
          },
          end: {
            line: 135,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 124
      },
      "5": {
        loc: {
          start: {
            line: 150,
            column: 47
          },
          end: {
            line: 150,
            column: 79
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 150,
            column: 57
          },
          end: {
            line: 150,
            column: 68
          }
        }, {
          start: {
            line: 150,
            column: 71
          },
          end: {
            line: 150,
            column: 79
          }
        }],
        line: 150
      },
      "6": {
        loc: {
          start: {
            line: 211,
            column: 32
          },
          end: {
            line: 211,
            column: 103
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 211,
            column: 32
          },
          end: {
            line: 211,
            column: 98
          }
        }, {
          start: {
            line: 211,
            column: 102
          },
          end: {
            line: 211,
            column: 103
          }
        }],
        line: 211
      },
      "7": {
        loc: {
          start: {
            line: 216,
            column: 25
          },
          end: {
            line: 216,
            column: 67
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 216,
            column: 37
          },
          end: {
            line: 216,
            column: 63
          }
        }, {
          start: {
            line: 216,
            column: 66
          },
          end: {
            line: 216,
            column: 67
          }
        }],
        line: 216
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "e462135e6ae89cd245fe63c6bdcc79d9d960a5ee"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2o6cype7kj = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2o6cype7kj();
import { EventEmitter } from 'events';
export
/* istanbul ignore next */
let RecoveryAction = /*#__PURE__*/function (RecoveryAction) {
  RecoveryAction["RESTART_SERVICE"] = "RESTART_SERVICE";
  RecoveryAction["REROUTE_TRAFFIC"] = "REROUTE_TRAFFIC";
  RecoveryAction["SCALE_UP"] = "SCALE_UP";
  RecoveryAction["ROLLBACK"] = "ROLLBACK";
  RecoveryAction["CIRCUIT_BREAK"] = "CIRCUIT_BREAK";
  RecoveryAction["ALERT_TEAM"] = "ALERT_TEAM";
  return RecoveryAction;
}({});
export class RecoveryStrategies extends EventEmitter {
  constructor() {
    /* istanbul ignore next */
    cov_2o6cype7kj().f[0]++;
    cov_2o6cype7kj().s[0]++;
    super();
    /* istanbul ignore next */
    cov_2o6cype7kj().s[1]++;
    this.strategies = this.initializeStrategies();
    /* istanbul ignore next */
    cov_2o6cype7kj().s[2]++;
    this.incidents = [];
  }

  /**
   * Initialize recovery strategies
   */
  initializeStrategies() {
    /* istanbul ignore next */
    cov_2o6cype7kj().f[1]++;
    cov_2o6cype7kj().s[3]++;
    return [
    // Strategy 1: Restart crashed services
    {
      action: RecoveryAction.RESTART_SERVICE,
      priority: 1,
      condition: health => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[2]++;
        cov_2o6cype7kj().s[4]++;
        return /* istanbul ignore next */(cov_2o6cype7kj().b[0][0]++, health.status === 'down') &&
        /* istanbul ignore next */
        (cov_2o6cype7kj().b[0][1]++, health.uptime < 50);
      },
      execute: async service => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[3]++;
        cov_2o6cype7kj().s[5]++;
        console.log(`ðŸ”¥ Phoenix: Restarting ${service.name}`);
        // In production, this would restart the service via Docker/K8s
        /* istanbul ignore next */
        cov_2o6cype7kj().s[6]++;
        await this.sleep(2000);
        /* istanbul ignore next */
        cov_2o6cype7kj().s[7]++;
        return true;
      }
    },
    // Strategy 2: Circuit breaker for degraded services
    {
      action: RecoveryAction.CIRCUIT_BREAK,
      priority: 2,
      condition: health => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[4]++;
        cov_2o6cype7kj().s[8]++;
        return health.errorRate > 50;
      },
      execute: async service => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[5]++;
        cov_2o6cype7kj().s[9]++;
        console.log(`âš¡ Phoenix: Circuit breaking ${service.name}`);
        // Temporarily stop routing traffic to this service
        /* istanbul ignore next */
        cov_2o6cype7kj().s[10]++;
        await this.sleep(1000);
        /* istanbul ignore next */
        cov_2o6cype7kj().s[11]++;
        return true;
      }
    },
    // Strategy 3: Scale up under load
    {
      action: RecoveryAction.SCALE_UP,
      priority: 3,
      condition: health => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[6]++;
        cov_2o6cype7kj().s[12]++;
        return /* istanbul ignore next */(cov_2o6cype7kj().b[1][0]++, health.responseTime > 5000) &&
        /* istanbul ignore next */
        (cov_2o6cype7kj().b[1][1]++, health.status === 'degraded');
      },
      execute: async service => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[7]++;
        cov_2o6cype7kj().s[13]++;
        console.log(`ðŸ“ˆ Phoenix: Scaling up ${service.name}`);
        // In production, add more instances
        /* istanbul ignore next */
        cov_2o6cype7kj().s[14]++;
        await this.sleep(3000);
        /* istanbul ignore next */
        cov_2o6cype7kj().s[15]++;
        return true;
      }
    },
    // Strategy 4: Reroute traffic
    {
      action: RecoveryAction.REROUTE_TRAFFIC,
      priority: 4,
      condition: health => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[8]++;
        cov_2o6cype7kj().s[16]++;
        return /* istanbul ignore next */(cov_2o6cype7kj().b[2][0]++, health.status === 'degraded') &&
        /* istanbul ignore next */
        (cov_2o6cype7kj().b[2][1]++, health.uptime < 80);
      },
      execute: async service => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[9]++;
        cov_2o6cype7kj().s[17]++;
        console.log(`ðŸ”€ Phoenix: Rerouting traffic from ${service.name}`);
        // Route to backup instance
        /* istanbul ignore next */
        cov_2o6cype7kj().s[18]++;
        await this.sleep(1000);
        /* istanbul ignore next */
        cov_2o6cype7kj().s[19]++;
        return true;
      }
    },
    // Strategy 5: Alert team for persistent issues
    {
      action: RecoveryAction.ALERT_TEAM,
      priority: 5,
      condition: health => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[10]++;
        cov_2o6cype7kj().s[20]++;
        return /* istanbul ignore next */(cov_2o6cype7kj().b[3][0]++, health.status === 'down') &&
        /* istanbul ignore next */
        (cov_2o6cype7kj().b[3][1]++, health.uptime < 20);
      },
      execute: async service => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[11]++;
        cov_2o6cype7kj().s[21]++;
        console.log(`ðŸš¨ Phoenix: Alerting team about ${service.name}`);
        // Send alert to team
        /* istanbul ignore next */
        cov_2o6cype7kj().s[22]++;
        await this.sleep(500);
        /* istanbul ignore next */
        cov_2o6cype7kj().s[23]++;
        return true;
      }
    }];
  }

  /**
   * Attempt recovery for unhealthy service
   */
  async attemptRecovery(service) {
    /* istanbul ignore next */
    cov_2o6cype7kj().f[12]++;
    const startTime =
    /* istanbul ignore next */
    (cov_2o6cype7kj().s[24]++, Date.now());
    const incidentId =
    /* istanbul ignore next */
    (cov_2o6cype7kj().s[25]++, `incident-${Date.now()}`);

    // Find applicable strategy
    const strategy =
    /* istanbul ignore next */
    (cov_2o6cype7kj().s[26]++, this.strategies.filter(s => {
      /* istanbul ignore next */
      cov_2o6cype7kj().f[13]++;
      cov_2o6cype7kj().s[27]++;
      return s.condition(service);
    }).sort((a, b) => {
      /* istanbul ignore next */
      cov_2o6cype7kj().f[14]++;
      cov_2o6cype7kj().s[28]++;
      return a.priority - b.priority;
    })[0]);
    /* istanbul ignore next */
    cov_2o6cype7kj().s[29]++;
    if (!strategy) {
      /* istanbul ignore next */
      cov_2o6cype7kj().b[4][0]++;
      cov_2o6cype7kj().s[30]++;
      console.log(`ðŸ”¥ Phoenix: No recovery strategy for ${service.name}`);
      /* istanbul ignore next */
      cov_2o6cype7kj().s[31]++;
      return {
        id: incidentId,
        service: service.name,
        detectedAt: new Date().toISOString(),
        action: RecoveryAction.ALERT_TEAM,
        success: false,
        recoveryTime: 0,
        details: 'No applicable recovery strategy'
      };
    } else
    /* istanbul ignore next */
    {
      cov_2o6cype7kj().b[4][1]++;
    }
    cov_2o6cype7kj().s[32]++;
    console.log(`ðŸ”¥ Phoenix: Attempting ${strategy.action} for ${service.name}`);
    /* istanbul ignore next */
    cov_2o6cype7kj().s[33]++;
    try {
      const success =
      /* istanbul ignore next */
      (cov_2o6cype7kj().s[34]++, await strategy.execute(service));
      const recoveryTime =
      /* istanbul ignore next */
      (cov_2o6cype7kj().s[35]++, Date.now() - startTime);
      const incident =
      /* istanbul ignore next */
      (cov_2o6cype7kj().s[36]++, {
        id: incidentId,
        service: service.name,
        detectedAt: new Date().toISOString(),
        action: strategy.action,
        success,
        recoveryTime,
        details: `${strategy.action} ${success ?
        /* istanbul ignore next */
        (cov_2o6cype7kj().b[5][0]++, 'succeeded') :
        /* istanbul ignore next */
        (cov_2o6cype7kj().b[5][1]++, 'failed')}`
      });
      /* istanbul ignore next */
      cov_2o6cype7kj().s[37]++;
      this.incidents.push(incident);
      /* istanbul ignore next */
      cov_2o6cype7kj().s[38]++;
      this.emit('recovery-attempted', incident);

      // Log to AML
      /* istanbul ignore next */
      cov_2o6cype7kj().s[39]++;
      await this.logToAuditLedger(incident);
      /* istanbul ignore next */
      cov_2o6cype7kj().s[40]++;
      return incident;
    } catch (error) {
      const incident =
      /* istanbul ignore next */
      (cov_2o6cype7kj().s[41]++, {
        id: incidentId,
        service: service.name,
        detectedAt: new Date().toISOString(),
        action: strategy.action,
        success: false,
        recoveryTime: Date.now() - startTime,
        details: `Recovery failed: ${error.message}`
      });
      /* istanbul ignore next */
      cov_2o6cype7kj().s[42]++;
      this.incidents.push(incident);
      /* istanbul ignore next */
      cov_2o6cype7kj().s[43]++;
      return incident;
    }
  }

  /**
   * Log recovery incident to Auditable Mutation Ledger
   */
  async logToAuditLedger(incident) {
    /* istanbul ignore next */
    cov_2o6cype7kj().f[15]++;
    cov_2o6cype7kj().s[44]++;
    try {
      /* istanbul ignore next */
      cov_2o6cype7kj().s[45]++;
      await fetch('http://localhost:3011/api/blockchain/transaction', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          from: 'phoenix-server',
          to: 'system',
          amount: 0,
          currency: 'AZR',
          type: 'Education',
          // Recovery teaches the system
          data: {
            recoveryIncident: incident
          }
        })
      }).catch(() => {
        /* istanbul ignore next */
        cov_2o6cype7kj().f[16]++;
        cov_2o6cype7kj().s[46]++;
        return console.warn('Failed to log recovery to AML');
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_2o6cype7kj().s[47]++;
      console.warn('AML logging failed:', error);
    }
  }

  /**
   * Get recovery history
   */
  getIncidents() {
    /* istanbul ignore next */
    cov_2o6cype7kj().f[17]++;
    cov_2o6cype7kj().s[48]++;
    return this.incidents;
  }

  /**
   * Get recovery statistics
   */
  getStats() {
    /* istanbul ignore next */
    cov_2o6cype7kj().f[18]++;
    const total =
    /* istanbul ignore next */
    (cov_2o6cype7kj().s[49]++, this.incidents.length);
    const successful =
    /* istanbul ignore next */
    (cov_2o6cype7kj().s[50]++, this.incidents.filter(i => {
      /* istanbul ignore next */
      cov_2o6cype7kj().f[19]++;
      cov_2o6cype7kj().s[51]++;
      return i.success;
    }).length);
    const avgRecoveryTime =
    /* istanbul ignore next */
    (cov_2o6cype7kj().s[52]++,
    /* istanbul ignore next */
    (cov_2o6cype7kj().b[6][0]++, this.incidents.reduce((sum, i) => {
      /* istanbul ignore next */
      cov_2o6cype7kj().f[20]++;
      cov_2o6cype7kj().s[53]++;
      return sum + i.recoveryTime;
    }, 0) / total) ||
    /* istanbul ignore next */
    (cov_2o6cype7kj().b[6][1]++, 0));
    /* istanbul ignore next */
    cov_2o6cype7kj().s[54]++;
    return {
      totalIncidents: total,
      successfulRecoveries: successful,
      successRate: total > 0 ?
      /* istanbul ignore next */
      (cov_2o6cype7kj().b[7][0]++, successful / total * 100) :
      /* istanbul ignore next */
      (cov_2o6cype7kj().b[7][1]++, 0),
      avgRecoveryTime: Math.round(avgRecoveryTime)
    };
  }
  sleep(ms) {
    /* istanbul ignore next */
    cov_2o6cype7kj().f[21]++;
    cov_2o6cype7kj().s[55]++;
    return new Promise(resolve => {
      /* istanbul ignore next */
      cov_2o6cype7kj().f[22]++;
      cov_2o6cype7kj().s[56]++;
      return setTimeout(resolve, ms);
    });
  }
}
export default RecoveryStrategies;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMm82Y3lwZTdraiIsImFjdHVhbENvdmVyYWdlIiwiRXZlbnRFbWl0dGVyIiwiUmVjb3ZlcnlBY3Rpb24iLCJSZWNvdmVyeVN0cmF0ZWdpZXMiLCJjb25zdHJ1Y3RvciIsImYiLCJzIiwic3RyYXRlZ2llcyIsImluaXRpYWxpemVTdHJhdGVnaWVzIiwiaW5jaWRlbnRzIiwiYWN0aW9uIiwiUkVTVEFSVF9TRVJWSUNFIiwicHJpb3JpdHkiLCJjb25kaXRpb24iLCJoZWFsdGgiLCJiIiwic3RhdHVzIiwidXB0aW1lIiwiZXhlY3V0ZSIsInNlcnZpY2UiLCJjb25zb2xlIiwibG9nIiwibmFtZSIsInNsZWVwIiwiQ0lSQ1VJVF9CUkVBSyIsImVycm9yUmF0ZSIsIlNDQUxFX1VQIiwicmVzcG9uc2VUaW1lIiwiUkVST1VURV9UUkFGRklDIiwiQUxFUlRfVEVBTSIsImF0dGVtcHRSZWNvdmVyeSIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJpbmNpZGVudElkIiwic3RyYXRlZ3kiLCJmaWx0ZXIiLCJzb3J0IiwiYSIsImlkIiwiZGV0ZWN0ZWRBdCIsInRvSVNPU3RyaW5nIiwic3VjY2VzcyIsInJlY292ZXJ5VGltZSIsImRldGFpbHMiLCJpbmNpZGVudCIsInB1c2giLCJlbWl0IiwibG9nVG9BdWRpdExlZGdlciIsImVycm9yIiwibWVzc2FnZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZnJvbSIsInRvIiwiYW1vdW50IiwiY3VycmVuY3kiLCJ0eXBlIiwiZGF0YSIsInJlY292ZXJ5SW5jaWRlbnQiLCJjYXRjaCIsIndhcm4iLCJnZXRJbmNpZGVudHMiLCJnZXRTdGF0cyIsInRvdGFsIiwibGVuZ3RoIiwic3VjY2Vzc2Z1bCIsImkiLCJhdmdSZWNvdmVyeVRpbWUiLCJyZWR1Y2UiLCJzdW0iLCJ0b3RhbEluY2lkZW50cyIsInN1Y2Nlc3NmdWxSZWNvdmVyaWVzIiwic3VjY2Vzc1JhdGUiLCJNYXRoIiwicm91bmQiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCJdLCJzb3VyY2VzIjpbInJlY292ZXJ5LXN0cmF0ZWdpZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7IFNlcnZpY2VIZWFsdGggfSBmcm9tICcuL2hlYWx0aC1tb25pdG9yJztcblxuZXhwb3J0IGVudW0gUmVjb3ZlcnlBY3Rpb24ge1xuICAgIFJFU1RBUlRfU0VSVklDRSA9ICdSRVNUQVJUX1NFUlZJQ0UnLFxuICAgIFJFUk9VVEVfVFJBRkZJQyA9ICdSRVJPVVRFX1RSQUZGSUMnLFxuICAgIFNDQUxFX1VQID0gJ1NDQUxFX1VQJyxcbiAgICBST0xMQkFDSyA9ICdST0xMQkFDSycsXG4gICAgQ0lSQ1VJVF9CUkVBSyA9ICdDSVJDVUlUX0JSRUFLJyxcbiAgICBBTEVSVF9URUFNID0gJ0FMRVJUX1RFQU0nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb3ZlcnlTdHJhdGVneSB7XG4gICAgYWN0aW9uOiBSZWNvdmVyeUFjdGlvbjtcbiAgICBjb25kaXRpb246IChoZWFsdGg6IFNlcnZpY2VIZWFsdGgpID0+IGJvb2xlYW47XG4gICAgZXhlY3V0ZTogKHNlcnZpY2U6IFNlcnZpY2VIZWFsdGgpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gICAgcHJpb3JpdHk6IG51bWJlcjsgLy8gTG93ZXIgPSBoaWdoZXIgcHJpb3JpdHlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWNvdmVyeUluY2lkZW50IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHNlcnZpY2U6IHN0cmluZztcbiAgICBkZXRlY3RlZEF0OiBzdHJpbmc7XG4gICAgYWN0aW9uOiBSZWNvdmVyeUFjdGlvbjtcbiAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgIHJlY292ZXJ5VGltZTogbnVtYmVyO1xuICAgIGRldGFpbHM6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFJlY292ZXJ5U3RyYXRlZ2llcyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgcHJpdmF0ZSBzdHJhdGVnaWVzOiBSZWNvdmVyeVN0cmF0ZWd5W107XG4gICAgcHJpdmF0ZSBpbmNpZGVudHM6IFJlY292ZXJ5SW5jaWRlbnRbXTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0cmF0ZWdpZXMgPSB0aGlzLmluaXRpYWxpemVTdHJhdGVnaWVzKCk7XG4gICAgICAgIHRoaXMuaW5jaWRlbnRzID0gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSByZWNvdmVyeSBzdHJhdGVnaWVzXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplU3RyYXRlZ2llcygpOiBSZWNvdmVyeVN0cmF0ZWd5W10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLy8gU3RyYXRlZ3kgMTogUmVzdGFydCBjcmFzaGVkIHNlcnZpY2VzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBSZWNvdmVyeUFjdGlvbi5SRVNUQVJUX1NFUlZJQ0UsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDEsXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uOiAoaGVhbHRoKSA9PiBoZWFsdGguc3RhdHVzID09PSAnZG93bicgJiYgaGVhbHRoLnVwdGltZSA8IDUwLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGU6IGFzeW5jIChzZXJ2aWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SlIFBob2VuaXg6IFJlc3RhcnRpbmcgJHtzZXJ2aWNlLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHRoaXMgd291bGQgcmVzdGFydCB0aGUgc2VydmljZSB2aWEgRG9ja2VyL0s4c1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDIwMDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBTdHJhdGVneSAyOiBDaXJjdWl0IGJyZWFrZXIgZm9yIGRlZ3JhZGVkIHNlcnZpY2VzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBSZWNvdmVyeUFjdGlvbi5DSVJDVUlUX0JSRUFLLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAyLFxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogKGhlYWx0aCkgPT4gaGVhbHRoLmVycm9yUmF0ZSA+IDUwLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGU6IGFzeW5jIChzZXJ2aWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDimqEgUGhvZW5peDogQ2lyY3VpdCBicmVha2luZyAke3NlcnZpY2UubmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGVtcG9yYXJpbHkgc3RvcCByb3V0aW5nIHRyYWZmaWMgdG8gdGhpcyBzZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIFN0cmF0ZWd5IDM6IFNjYWxlIHVwIHVuZGVyIGxvYWRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlY292ZXJ5QWN0aW9uLlNDQUxFX1VQLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAzLFxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogKGhlYWx0aCkgPT4gaGVhbHRoLnJlc3BvbnNlVGltZSA+IDUwMDAgJiYgaGVhbHRoLnN0YXR1cyA9PT0gJ2RlZ3JhZGVkJyxcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoc2VydmljZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+TiCBQaG9lbml4OiBTY2FsaW5nIHVwICR7c2VydmljZS5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAvLyBJbiBwcm9kdWN0aW9uLCBhZGQgbW9yZSBpbnN0YW5jZXNcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcCgzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gU3RyYXRlZ3kgNDogUmVyb3V0ZSB0cmFmZmljXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBSZWNvdmVyeUFjdGlvbi5SRVJPVVRFX1RSQUZGSUMsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDQsXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uOiAoaGVhbHRoKSA9PiBoZWFsdGguc3RhdHVzID09PSAnZGVncmFkZWQnICYmIGhlYWx0aC51cHRpbWUgPCA4MCxcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoc2VydmljZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UgCBQaG9lbml4OiBSZXJvdXRpbmcgdHJhZmZpYyBmcm9tICR7c2VydmljZS5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAvLyBSb3V0ZSB0byBiYWNrdXAgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcCgxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gU3RyYXRlZ3kgNTogQWxlcnQgdGVhbSBmb3IgcGVyc2lzdGVudCBpc3N1ZXNcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlY292ZXJ5QWN0aW9uLkFMRVJUX1RFQU0sXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDUsXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uOiAoaGVhbHRoKSA9PiBoZWFsdGguc3RhdHVzID09PSAnZG93bicgJiYgaGVhbHRoLnVwdGltZSA8IDIwLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGU6IGFzeW5jIChzZXJ2aWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5qoIFBob2VuaXg6IEFsZXJ0aW5nIHRlYW0gYWJvdXQgJHtzZXJ2aWNlLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgYWxlcnQgdG8gdGVhbVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDUwMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHJlY292ZXJ5IGZvciB1bmhlYWx0aHkgc2VydmljZVxuICAgICAqL1xuICAgIGFzeW5jIGF0dGVtcHRSZWNvdmVyeShzZXJ2aWNlOiBTZXJ2aWNlSGVhbHRoKTogUHJvbWlzZTxSZWNvdmVyeUluY2lkZW50PiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGluY2lkZW50SWQgPSBgaW5jaWRlbnQtJHtEYXRlLm5vdygpfWA7XG5cbiAgICAgICAgLy8gRmluZCBhcHBsaWNhYmxlIHN0cmF0ZWd5XG4gICAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gdGhpcy5zdHJhdGVnaWVzXG4gICAgICAgICAgICAuZmlsdGVyKHMgPT4gcy5jb25kaXRpb24oc2VydmljZSkpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpWzBdO1xuXG4gICAgICAgIGlmICghc3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SlIFBob2VuaXg6IE5vIHJlY292ZXJ5IHN0cmF0ZWd5IGZvciAke3NlcnZpY2UubmFtZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGluY2lkZW50SWQsXG4gICAgICAgICAgICAgICAgc2VydmljZTogc2VydmljZS5uYW1lLFxuICAgICAgICAgICAgICAgIGRldGVjdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlY292ZXJ5QWN0aW9uLkFMRVJUX1RFQU0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVjb3ZlcnlUaW1lOiAwLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6ICdObyBhcHBsaWNhYmxlIHJlY292ZXJ5IHN0cmF0ZWd5J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SlIFBob2VuaXg6IEF0dGVtcHRpbmcgJHtzdHJhdGVneS5hY3Rpb259IGZvciAke3NlcnZpY2UubmFtZX1gKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHN0cmF0ZWd5LmV4ZWN1dGUoc2VydmljZSk7XG4gICAgICAgICAgICBjb25zdCByZWNvdmVyeVRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuXG4gICAgICAgICAgICBjb25zdCBpbmNpZGVudDogUmVjb3ZlcnlJbmNpZGVudCA9IHtcbiAgICAgICAgICAgICAgICBpZDogaW5jaWRlbnRJZCxcbiAgICAgICAgICAgICAgICBzZXJ2aWNlOiBzZXJ2aWNlLm5hbWUsXG4gICAgICAgICAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogc3RyYXRlZ3kuYWN0aW9uLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3MsXG4gICAgICAgICAgICAgICAgcmVjb3ZlcnlUaW1lLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IGAke3N0cmF0ZWd5LmFjdGlvbn0gJHtzdWNjZXNzID8gJ3N1Y2NlZWRlZCcgOiAnZmFpbGVkJ31gXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmluY2lkZW50cy5wdXNoKGluY2lkZW50KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgncmVjb3ZlcnktYXR0ZW1wdGVkJywgaW5jaWRlbnQpO1xuXG4gICAgICAgICAgICAvLyBMb2cgdG8gQU1MXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvZ1RvQXVkaXRMZWRnZXIoaW5jaWRlbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4gaW5jaWRlbnQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBpbmNpZGVudDogUmVjb3ZlcnlJbmNpZGVudCA9IHtcbiAgICAgICAgICAgICAgICBpZDogaW5jaWRlbnRJZCxcbiAgICAgICAgICAgICAgICBzZXJ2aWNlOiBzZXJ2aWNlLm5hbWUsXG4gICAgICAgICAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogc3RyYXRlZ3kuYWN0aW9uLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlY292ZXJ5VGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiBgUmVjb3ZlcnkgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5pbmNpZGVudHMucHVzaChpbmNpZGVudCk7XG4gICAgICAgICAgICByZXR1cm4gaW5jaWRlbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2cgcmVjb3ZlcnkgaW5jaWRlbnQgdG8gQXVkaXRhYmxlIE11dGF0aW9uIExlZGdlclxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgbG9nVG9BdWRpdExlZGdlcihpbmNpZGVudDogUmVjb3ZlcnlJbmNpZGVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAxMS9hcGkvYmxvY2tjaGFpbi90cmFuc2FjdGlvbicsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGZyb206ICdwaG9lbml4LXNlcnZlcicsXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnc3lzdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogJ0FaUicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdFZHVjYXRpb24nLCAvLyBSZWNvdmVyeSB0ZWFjaGVzIHRoZSBzeXN0ZW1cbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyByZWNvdmVyeUluY2lkZW50OiBpbmNpZGVudCB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvZyByZWNvdmVyeSB0byBBTUwnKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FNTCBsb2dnaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcmVjb3ZlcnkgaGlzdG9yeVxuICAgICAqL1xuICAgIGdldEluY2lkZW50cygpOiBSZWNvdmVyeUluY2lkZW50W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmNpZGVudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHJlY292ZXJ5IHN0YXRpc3RpY3NcbiAgICAgKi9cbiAgICBnZXRTdGF0cygpIHtcbiAgICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmluY2lkZW50cy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3NmdWwgPSB0aGlzLmluY2lkZW50cy5maWx0ZXIoaSA9PiBpLnN1Y2Nlc3MpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYXZnUmVjb3ZlcnlUaW1lID0gdGhpcy5pbmNpZGVudHMucmVkdWNlKChzdW0sIGkpID0+IHN1bSArIGkucmVjb3ZlcnlUaW1lLCAwKSAvIHRvdGFsIHx8IDA7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsSW5jaWRlbnRzOiB0b3RhbCxcbiAgICAgICAgICAgIHN1Y2Nlc3NmdWxSZWNvdmVyaWVzOiBzdWNjZXNzZnVsLFxuICAgICAgICAgICAgc3VjY2Vzc1JhdGU6IHRvdGFsID4gMCA/IChzdWNjZXNzZnVsIC8gdG90YWwpICogMTAwIDogMCxcbiAgICAgICAgICAgIGF2Z1JlY292ZXJ5VGltZTogTWF0aC5yb3VuZChhdmdSZWNvdmVyeVRpbWUpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzbGVlcChtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlY292ZXJ5U3RyYXRlZ2llcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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