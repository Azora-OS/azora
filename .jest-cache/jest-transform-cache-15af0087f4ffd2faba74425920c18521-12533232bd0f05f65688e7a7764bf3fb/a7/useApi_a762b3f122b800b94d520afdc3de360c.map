{"version":3,"names":["cov_15gt1xg7zw","actualCoverage","useQuery","ApiClient","useApi","serviceName","endpoint","method","b","body","enabled","queryOptions","f","s","queryKey","queryFn","client","get","post","put","patch","delete","Error","retry","refetchOnWindowFocus","staleTime","useLmsApi","options","useMintApi","useNexusApi","useForgeApi","useAegisApi","useAuthApi","useComplianceApi","usePaymentApi","useMarketplaceApi","useAnalyticsApi"],"sources":["useApi.ts"],"sourcesContent":["/*\nAZORA PROPRIETARY LICENSE\nCopyright (c) 2025 Azora ES (Pty) Ltd. All Rights Reserved.\nSee LICENSE file for details.\n*/\n\nimport { useQuery, UseQueryOptions } from '@tanstack/react-query';\nimport { ApiClient, ApiResponse } from '../lib/api-client';\n\ninterface UseApiOptions<T> extends Omit<UseQueryOptions<ApiResponse<T>, Error>, 'queryKey' | 'queryFn'> {\n  serviceName: string;\n  endpoint: string;\n  method?: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';\n  body?: any;\n  enabled?: boolean;\n}\n\n// Custom hook for API calls with automatic fallback to mock data\nexport function useApi<T = any>({\n  serviceName,\n  endpoint,\n  method = 'GET',\n  body,\n  enabled = true,\n  ...queryOptions\n}: UseApiOptions<T>) {\n  return useQuery({\n    queryKey: [serviceName, endpoint, method, body],\n    queryFn: async (): Promise<ApiResponse<T>> => {\n      const client = new ApiClient(serviceName);\n\n      switch (method) {\n        case 'GET':\n          return client.get<T>(endpoint);\n        case 'POST':\n          return client.post<T>(endpoint, body);\n        case 'PUT':\n          return client.put<T>(endpoint, body);\n        case 'PATCH':\n          return client.patch<T>(endpoint, body);\n        case 'DELETE':\n          return client.delete<T>(endpoint);\n        default:\n          throw new Error(`Unsupported method: ${method}`);\n      }\n    },\n    enabled,\n    retry: false, // Don't retry - fallback to mock data on failure\n    refetchOnWindowFocus: false,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    ...queryOptions,\n  });\n}\n\n// Convenience hooks for specific services\nexport function useLmsApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'lms', endpoint, ...options });\n}\n\nexport function useMintApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'mint', endpoint, ...options });\n}\n\nexport function useNexusApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'nexus', endpoint, ...options });\n}\n\nexport function useForgeApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'forge', endpoint, ...options });\n}\n\nexport function useAegisApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'aegis', endpoint, ...options });\n}\n\nexport function useAuthApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'auth', endpoint, ...options });\n}\n\nexport function useComplianceApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'compliance', endpoint, ...options });\n}\n\nexport function usePaymentApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'payment', endpoint, ...options });\n}\n\nexport function useMarketplaceApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'marketplace', endpoint, ...options });\n}\n\nexport function useAnalyticsApi<T = any>(endpoint: string, options?: Omit<UseApiOptions<T>, 'serviceName'>) {\n  return useApi<T>({ serviceName: 'analytics', endpoint, ...options });\n}"],"mappings":"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","ignoreList":[]}