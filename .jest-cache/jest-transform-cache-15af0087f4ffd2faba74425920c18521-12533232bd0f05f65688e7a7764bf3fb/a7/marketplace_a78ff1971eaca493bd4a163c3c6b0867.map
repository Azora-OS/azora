{"version":3,"names":["cov_dv1qkqyn5","actualCoverage","products","s","Map","orders","createProduct","req","res","f","name","description","price","category","sellerId","body","b","status","json","error","product","id","Date","now","createdAt","toISOString","set","message","console","getProducts","search","limit","offset","query","filteredProducts","Array","from","values","filter","p","toLowerCase","includes","total","length","slice","parseInt","createOrder","productId","buyerId","quantity","get","order","totalAmount","module","exports"],"sources":["marketplace.js"],"sourcesContent":["const products = new Map();\nconst orders = new Map();\n\nconst createProduct = async (req, res) => {\n  try {\n    const { name, description, price, category, sellerId } = req.body;\n    \n    if (!name || !price || !sellerId) {\n      return res.status(400).json({ error: 'Name, price, and sellerId are required' });\n    }\n\n    const product = {\n      id: `prod_${Date.now()}`,\n      name,\n      description: description || '',\n      price,\n      category: category || 'general',\n      sellerId,\n      status: 'active',\n      createdAt: new Date().toISOString()\n    };\n\n    products.set(product.id, product);\n\n    res.status(201).json({\n      message: 'Product created successfully',\n      product\n    });\n  } catch (error) {\n    console.error('Product creation error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n};\n\nconst getProducts = async (req, res) => {\n  try {\n    const { category, search, limit = 10, offset = 0 } = req.query;\n    let filteredProducts = Array.from(products.values());\n\n    if (category) {\n      filteredProducts = filteredProducts.filter(p => p.category === category);\n    }\n\n    if (search) {\n      filteredProducts = filteredProducts.filter(p => \n        p.name.toLowerCase().includes(search.toLowerCase()) ||\n        p.description.toLowerCase().includes(search.toLowerCase())\n      );\n    }\n\n    const total = filteredProducts.length;\n    filteredProducts = filteredProducts.slice(offset, offset + parseInt(limit));\n\n    res.json({\n      products: filteredProducts,\n      total,\n      limit: parseInt(limit),\n      offset: parseInt(offset)\n    });\n  } catch (error) {\n    console.error('Get products error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n};\n\nconst createOrder = async (req, res) => {\n  try {\n    const { productId, buyerId, quantity = 1 } = req.body;\n    \n    if (!productId || !buyerId) {\n      return res.status(400).json({ error: 'ProductId and buyerId are required' });\n    }\n\n    const product = products.get(productId);\n    if (!product) {\n      return res.status(404).json({ error: 'Product not found' });\n    }\n\n    const order = {\n      id: `order_${Date.now()}`,\n      productId,\n      buyerId,\n      sellerId: product.sellerId,\n      quantity,\n      totalAmount: product.price * quantity,\n      status: 'pending',\n      createdAt: new Date().toISOString()\n    };\n\n    orders.set(order.id, order);\n\n    res.status(201).json({\n      message: 'Order created successfully',\n      order\n    });\n  } catch (error) {\n    console.error('Order creation error:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n};\n\nmodule.exports = {\n  createProduct,\n  getProducts,\n  createOrder\n};"],"mappings":"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","ignoreList":[]}