<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ascend IDE - Citadel's Advance Intelligence</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            color: #ffffff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .title-bar {
            background: #1a1a1a;
            padding: 8px 16px;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            -webkit-app-region: drag;
        }

        .title-bar h1 {
            font-size: 14px;
            font-weight: 500;
            color: #61dafb;
        }

        .title-bar .status {
            margin-left: auto;
            font-size: 12px;
            color: #4ade80;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .title-bar .status::before {
            content: '‚óè';
            color: #4ade80;
        }

        .main-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .sidebar {
            width: 300px;
            background: #252526;
            border-right: 1px solid #3e3e42;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 16px;
            border-bottom: 1px solid #3e3e42;
        }

        .sidebar-header h2 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #61dafb;
        }

        .sidebar-header p {
            font-size: 12px;
            color: #cccccc;
            line-height: 1.4;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 16px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 16px;
            padding-right: 8px;
        }

        .message {
            margin-bottom: 16px;
            padding: 12px;
            border-radius: 8px;
            max-width: 80%;
        }

        .message.user {
            background: #007acc;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .message.assistant {
            background: #2d2d30;
            border-bottom-left-radius: 4px;
        }

        .message.system {
            background: #4ade80;
            text-align: center;
            max-width: 100%;
            font-style: italic;
        }

        .chat-input {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .chat-input input {
            flex: 1;
            padding: 12px;
            background: #3c3c3c;
            border: 1px solid #555;
            border-radius: 6px;
            color: #ffffff;
            font-size: 14px;
        }

        .chat-input input:focus {
            outline: none;
            border-color: #007acc;
        }

        .chat-input button {
            padding: 12px 20px;
            background: #007acc;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .chat-input button:hover {
            background: #005999;
        }

        .chat-input button:disabled {
            background: #555;
            cursor: not-allowed;
        }

        .editor-area {
            flex: 1;
            background: #1e1e1e;
            display: flex;
            flex-direction: column;
        }

        .editor-toolbar {
            padding: 8px 16px;
            background: #252526;
            border-bottom: 1px solid #3e3e42;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .editor-toolbar button {
            padding: 6px 12px;
            background: #007acc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .editor-toolbar button:hover {
            background: #005999;
        }

        .editor-content {
            flex: 1;
            padding: 16px;
            font-family: 'Fira Code', Monaco, monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            overflow-y: auto;
            background: #1e1e1e;
            color: #d4d4d4;
        }

        .status-bar {
            background: #007acc;
            padding: 4px 16px;
            font-size: 12px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .awakening-ceremony {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 32px;
            border-radius: 12px;
            text-align: center;
            z-index: 1000;
            max-width: 500px;
            border: 2px solid #61dafb;
        }

        .awakening-ceremony h2 {
            color: #61dafb;
            margin-bottom: 16px;
            font-size: 24px;
        }

        .awakening-ceremony p {
            color: #cccccc;
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .awakening-ceremony .progress {
            width: 100%;
            height: 4px;
            background: #333;
            border-radius: 2px;
            margin: 16px 0;
            overflow: hidden;
        }

        .awakening-ceremony .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #61dafb, #4ade80);
            width: 0%;
            transition: width 0.5s ease;
        }

        .awakening-ceremony.hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -60%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }

        .awakening-ceremony {
            animation: fadeIn 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="title-bar">
        <h1>Ascend IDE</h1>
        <div class="status">
            <span>Constitutional AI Active</span>
        </div>
    </div>

    <div class="awakening-ceremony" id="awakeningCeremony">
        <h2>üöÄ Citadel's Advance Intelligence</h2>
        <p>Initializing Constitutional AI systems and awakening the digital living ecosystem...</p>
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <p id="ceremonyStatus">Loading AzStudio services...</p>
    </div>

    <div class="main-content" id="mainContent" style="display: none;">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>Ascend AI Assistant</h2>
                <p>Constitutional AI powered by Citadel's framework</p>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="message system">
                        Welcome to Ascend IDE! I'm your Constitutional AI assistant. How can I help you build ethical, powerful software today?
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Ask Ascend AI..." />
                    <button id="sendButton" disabled>Send</button>
                </div>
            </div>
        </div>

        <div class="editor-area">
            <div class="editor-toolbar">
                <button id="generateCodeBtn">Generate Code</button>
                <button id="analyzeCodeBtn">Analyze Code</button>
                <button id="verifyCodeBtn">Verify Compliance</button>
                <button id="searchKnowledgeBtn">Search Knowledge</button>
            </div>
            <div class="editor-content" id="editorContent" contenteditable="true">// Welcome to Ascend IDE!
// This is the Constitutional AI-powered code editor.
// Try generating code, analyzing this content, or asking questions!

console.log("Ascend IDE is operational");</div>
        </div>
    </div>

    <div class="status-bar">
        <span>Ascend IDE v0.1.0 | Constitutional AI: Active | Knowledge Ocean: Online</span>
        <span>Ready</span>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const editorContent = document.getElementById('editorContent');
        const awakeningCeremony = document.getElementById('awakeningCeremony');
        const progressBar = document.getElementById('progressBar');
        const ceremonyStatus = document.getElementById('ceremonyStatus');
        const mainContent = document.getElementById('mainContent');

        let currentSession = null;
        let ceremonyStep = 0;
        const ceremonySteps = [
            'Initializing Constitutional Core...',
            'Loading Knowledge Ocean...',
            'Activating AI Orchestrator...',
            'Establishing Verification Pipeline...',
            'Awakening complete!'
        ];

        // Awakening ceremony animation
        function runAwakeningCeremony() {
            const interval = setInterval(() => {
                ceremonyStep++;
                const progress = (ceremonyStep / ceremonySteps.length) * 100;
                progressBar.style.width = progress + '%';
                ceremonyStatus.textContent = ceremonySteps[Math.min(ceremonyStep - 1, ceremonySteps.length - 1)];

                if (ceremonyStep >= ceremonySteps.length) {
                    clearInterval(interval);
                    setTimeout(() => {
                        awakeningCeremony.classList.add('hidden');
                        mainContent.style.display = 'flex';
                        initializeAscend();
                    }, 1000);
                }
            }, 800);
        }

        // Initialize Ascend IDE
        async function initializeAscend() {
            try {
                // Create chat session
                const sessionResult = await window.electronAPI.createChatSession('ascend-general');
                if (sessionResult.success) {
                    currentSession = sessionResult.session;
                    addMessage('System', 'Ascend AI session initialized successfully!', 'system');
                }

                // Get constitutional guidelines
                const guidelinesResult = await window.electronAPI.getGuidelines();
                if (guidelinesResult.success) {
                    addMessage('System', `Constitutional guidelines loaded: ${guidelinesResult.guidelines.length} principles active`, 'system');
                }

            } catch (error) {
                addMessage('System', `Initialization error: ${error.message}`, 'system');
            }
        }

        // Add message to chat
        function addMessage(sender, message, type = 'assistant') {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.innerHTML = `<strong>${sender}:</strong> ${message}`;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Chat input handling
        chatInput.addEventListener('input', () => {
            sendButton.disabled = chatInput.value.trim().length === 0;
        });

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !sendButton.disabled) {
                sendMessage();
            }
        });

        sendButton.addEventListener('click', sendMessage);

        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message || !currentSession) return;

            addMessage('You', message, 'user');
            chatInput.value = '';
            sendButton.disabled = true;

            try {
                const result = await window.electronAPI.sendChatMessage(currentSession.id, message);
                if (result.success) {
                    addMessage('Ascend AI', result.response, 'assistant');
                } else {
                    addMessage('System', `Error: ${result.error}`, 'system');
                }
            } catch (error) {
                addMessage('System', `Failed to send message: ${error.message}`, 'system');
            }
        }

        // Toolbar button handlers
        document.getElementById('generateCodeBtn').addEventListener('click', async () => {
            const prompt = prompt('Enter code generation prompt:');
            if (prompt) {
                addMessage('You', `Generate code: ${prompt}`, 'user');
                try {
                    const result = await window.electronAPI.generateCode(prompt);
                    if (result.success) {
                        editorContent.textContent = result.code;
                        addMessage('Ascend AI', 'Code generated successfully!', 'assistant');
                    } else {
                        addMessage('System', `Code generation failed: ${result.error}`, 'system');
                    }
                } catch (error) {
                    addMessage('System', `Error: ${error.message}`, 'system');
                }
            }
        });

        document.getElementById('analyzeCodeBtn').addEventListener('click', async () => {
            const code = editorContent.textContent;
            addMessage('You', 'Analyze current code', 'user');

            try {
                const result = await window.electronAPI.analyzeCode(code);
                if (result.success) {
                    const analysis = result.analysis;
                    addMessage('Ascend AI',
                        `Analysis: ${analysis.score}/100 score, ${analysis.complexity} complexity. Suggestions: ${analysis.suggestions.join(', ')}`,
                        'assistant');
                } else {
                    addMessage('System', `Analysis failed: ${result.error}`, 'system');
                }
            } catch (error) {
                addMessage('System', `Error: ${error.message}`, 'system');
            }
        });

        document.getElementById('verifyCodeBtn').addEventListener('click', async () => {
            const code = editorContent.textContent;
            addMessage('You', 'Verify constitutional compliance', 'user');

            try {
                const result = await window.electronAPI.verifyCompliance(code);
                if (result.success) {
                    const compliance = result.compliance;
                    addMessage('Ascend AI',
                        `Compliance check: ${compliance.compliant ? 'PASSED' : 'FAILED'} (${compliance.score}/100). ${compliance.guidelines.join(', ')}`,
                        'assistant');
                } else {
                    addMessage('System', `Verification failed: ${result.error}`, 'system');
                }
            } catch (error) {
                addMessage('System', `Error: ${error.message}`, 'system');
            }
        });

        document.getElementById('searchKnowledgeBtn').addEventListener('click', async () => {
            const query = prompt('Enter knowledge search query:');
            if (query) {
                addMessage('You', `Search knowledge: ${query}`, 'user');

                try {
                    const result = await window.electronAPI.searchKnowledge(query);
                    if (result.success && result.results.length > 0) {
                        const topResult = result.results[0];
                        addMessage('Ascend AI',
                            `Knowledge found: "${topResult.title}" - ${topResult.content.substring(0, 100)}...`,
                            'assistant');
                    } else {
                        addMessage('Ascend AI', 'No relevant knowledge found for that query.', 'assistant');
                    }
                } catch (error) {
                    addMessage('System', `Error: ${error.message}`, 'system');
                }
            }
        });

        // Start the awakening ceremony
        runAwakeningCeremony();
    </script>
</body>
</html>
