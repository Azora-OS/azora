# BuildSpaces Environment Configuration

This file contains all environment variables needed for BuildSpaces development.

## Copy this file and configure:
```bash
cp .env.example .env.local
```

---

## API Keys (add your own before launch)

### LLM Providers
```env
# OpenAI (GPT-4 primary model)
OPENAI_API_KEY=sk-...
OPENAI_ORG_ID=org-...

# Anthropic Claude (fallback model)
ANTHROPIC_API_KEY=claude-...

# Local LLM (optional, offline support)
LOCAL_LLM_MODEL=llama2
LOCAL_LLM_API_URL=http://localhost:11434
```

### GitHub Integration
```env
GITHUB_TOKEN=ghp_...
GITHUB_APP_ID=...
GITHUB_APP_PRIVATE_KEY=...
GITHUB_WEBHOOK_SECRET=...
```

### Design & Collaboration
```env
FIGMA_API_TOKEN=...
```

### Payments & Blockchain
```env
STRIPE_SECRET_KEY=sk_live_...
STRIPE_PUBLISHABLE_KEY=pk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Optional: Web3 for NFT minting
ETHEREUM_RPC_URL=https://mainnet.infura.io/v3/...
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
```

---

## Database & Cache

### PostgreSQL
```env
DATABASE_URL=postgresql://user:password@localhost:5432/azora_buildspaces
DATABASE_POOL_SIZE=20
```

### Redis
```env
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
```

---

## Application Configuration

### Authentication
```env
NEXTAUTH_SECRET=$(openssl rand -base64 32)
NEXTAUTH_URL=http://localhost:3002
NEXTAUTH_URL_INTERNAL=http://localhost:3002
JWT_SECRET=$(openssl rand -base64 32)
```

### BuildSpaces Core
```env
BUILDSPACES_PORT=3002
BUILDSPACES_ENV=development
BUILDSPACES_DEBUG=true
BUILDSPACES_LOG_LEVEL=info
```

### PredAI / Sensor Service
```env
# PredAI API URL for PredAI sensor overlay (dev default)
NEXT_PUBLIC_PREDAI_API_URL=http://localhost:3015
```

### Feature Flags
```env
SANDBOX_ENABLED=true
USE_REDIS=true
USE_POSTGRES=true
ENABLE_WEBSOCKET_COLLABORATION=true
ENABLE_CONSTITUTIONAL_GATES=true
ENABLE_AGENT_EXECUTION=true
```

### Room Feature Toggles
```env
ENABLE_CODE_CHAMBER=true
ENABLE_SPEC_CHAMBER=true
ENABLE_DESIGN_STUDIO=true
ENABLE_AI_STUDIO=true
ENABLE_COMMAND_DESK=true
ENABLE_MAKER_LAB=true
ENABLE_COLLABORATION_POD=true
ENABLE_COLLECTIBLE_SHOWCASE=true
```

### Agent Configuration
```env
AGENT_TIMEOUT_MS=60000
AGENT_MAX_RETRIES=3
AGENT_COST_THRESHOLD_CENTS=500
TRACK_AGENT_METRICS=true
```

### Token Economy (AZR)
```env
AZR_MINT_ENABLED=false
AZR_TOTAL_SUPPLY=1000000000
AZR_CHAIN=ethereum
AZR_CONTRACT_ADDRESS=0x...
```

---

## Monitoring & Observability

### Prometheus
```env
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_SCRAPE_INTERVAL=15s
```

### Logging
```env
LOG_FORMAT=json
LOG_LEVEL=info
LOG_SERVICE_NAME=buildspaces
SENTRY_DSN=...
```

### Tracing (optional)
```env
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
```

---

## Development Settings

### Hot Reload & Dev Tools
```env
NEXT_PUBLIC_DEBUG=false
NEXT_PUBLIC_MOCKING=false
TURBO_SKIP_PRUNE=true
```

### API Gateway
```env
API_GATEWAY_URL=http://localhost:3000/api
INTERNAL_API_URL=http://localhost:3000
```

---

## Security & Compliance

### Secrets Management
```env
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=...
```

### Rate Limiting
```env
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000
```

### CORS
```env
CORS_ORIGIN=http://localhost:3002,http://localhost:3000
```

---

## Notes

- **Never commit `.env.local`** — it contains secrets
- Use `.env.example` for documentation only
- Rotate API keys regularly
- Enable 2FA on all cloud accounts (GitHub, Stripe, etc.)
- Test with dummy API keys before deploying
- If you encounter build errors related to the `canvas` native module, install the system packages: `pkg-config libcairo2-dev libpango1.0-dev libjpeg-dev libgif-dev librsvg2-dev libpixman-1-dev build-essential python3 make g++` (Ubuntu/Debian)

---

**Last Updated**: December 27, 2025  
**Phase**: 1 — Foundation Setup  
**Status**: Ready for local development
