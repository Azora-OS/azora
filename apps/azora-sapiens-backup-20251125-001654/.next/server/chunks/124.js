exports.id=124,exports.ids=[124],exports.modules={96803:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},25745:()=>{},3719:(e,t,r)=>{"use strict";r.d(t,{Gn:()=>d,LN:()=>h,zx:()=>n,t1:()=>u});var a=r(10326);r(17577),(0,r(70221).j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}}),function(){var e=Error("Cannot find module './utils'");throw e.code="MODULE_NOT_FOUND",e}();let n=({variant:e="primary",size:t="md",className:r,children:n,...o})=>a.jsx("button",{className:Object(function(){var e=Error("Cannot find module './utils'");throw e.code="MODULE_NOT_FOUND",e}())("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:from-blue-600 hover:to-cyan-600 focus:ring-blue-500",outline:"border-2 border-gray-700 text-gray-300 hover:border-primary hover:text-primary focus:ring-primary",ghost:"text-gray-300 hover:bg-gray-800 focus:ring-gray-700"}[e],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t],r),...o,children:n});var o=r(12592),s=r(88560);function i(...e){return(0,s.m6)((0,o.W)(e))}let c=({className:e,...t})=>(0,a.jsxs)("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i("h-10 w-10 transition-transform duration-300 hover:scale-110",e),...t,"aria-label":"Azora Constitutional AI Logo",role:"img",children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"sapphire",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#667eea"}),a.jsx("stop",{offset:"100%",stopColor:"#764ba2"})]}),(0,a.jsxs)("linearGradient",{id:"emerald",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#10b981"}),a.jsx("stop",{offset:"100%",stopColor:"#059669"})]}),(0,a.jsxs)("linearGradient",{id:"ruby",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#ef4444"}),a.jsx("stop",{offset:"100%",stopColor:"#dc2626"})]})]}),a.jsx("path",{d:"M50 10 L70 35 L50 40 L30 35 Z",fill:"url(#sapphire)",opacity:"0.9"}),a.jsx("path",{d:"M30 35 L50 40 L50 70 L20 60 Z",fill:"url(#emerald)",opacity:"0.9"}),a.jsx("path",{d:"M50 40 L70 35 L80 60 L50 70 Z",fill:"url(#ruby)",opacity:"0.9"}),a.jsx("circle",{cx:"50",cy:"50",r:"8",fill:"white",opacity:"0.95"}),a.jsx("path",{d:"M50 50 L50 10 M50 50 L20 60 M50 50 L80 60",stroke:"white",strokeWidth:"1",opacity:"0.3"})]}),l=({children:e})=>a.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 border-t border-border bg-background/95 backdrop-blur-sm shadow-lg",role:"navigation","aria-label":"Mobile navigation",children:a.jsx("div",{className:"flex items-center justify-around p-4 safe-area-inset-bottom",children:e})}),d=({children:e,title:t,description:r,className:n,onClick:o,href:s})=>{let c=i("rounded-lg border border-border bg-card p-6","transition-all duration-200","hover:shadow-lg hover:border-primary/50","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",o||s?"cursor-pointer":"",n),l=(0,a.jsxs)(a.Fragment,{children:[t&&a.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:t}),r&&a.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:r}),e]});return s?a.jsx("a",{href:s,className:c,"aria-label":t,children:l}):a.jsx("div",{className:c,onClick:o,role:o?"button":void 0,children:l})},u=({children:e,className:t,gradient:r="primary"})=>a.jsx("span",{className:i("bg-gradient-to-r bg-clip-text text-transparent",{primary:"from-[#667eea] to-[#764ba2]",success:"from-green-500 to-emerald-600",warning:"from-yellow-500 to-orange-600",danger:"from-red-500 to-rose-600"}[r],t),children:e}),h=({children:e,className:t,showMobileNav:r=!0,mobileNavItems:n,headerActions:o,sidebarContent:s})=>(0,a.jsxs)("div",{className:i("min-h-screen bg-background",t),children:[a.jsx("header",{className:"sticky top-0 z-50 border-b border-border/40 bg-background/80 backdrop-blur-lg supports-[backdrop-filter]:bg-background/60",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(c,{className:"h-10 w-10"}),(0,a.jsxs)("div",{className:"hidden sm:block",children:[a.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-[#667eea] to-[#764ba2] bg-clip-text text-transparent",children:"Azora OS"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Constitutional AI"})]})]}),o&&a.jsx("div",{className:"flex items-center gap-4",children:o})]})})}),(0,a.jsxs)("div",{className:"flex min-h-[calc(100vh-4rem)]",children:[s&&a.jsx("aside",{className:"hidden lg:block w-64 border-r border-border/40 bg-card/50 backdrop-blur-sm",children:a.jsx("div",{className:"sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto p-4",children:s})}),a.jsx("main",{className:"flex-1 overflow-x-hidden",children:a.jsx("div",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8",children:e})})]}),r&&n&&a.jsx(l,{children:n}),(0,a.jsxs)("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute -top-40 -right-40 h-80 w-80 rounded-full bg-[#667eea]/10 blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute -bottom-40 -left-40 h-80 w-80 rounded-full bg-[#764ba2]/10 blur-3xl animate-pulse delay-1000"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-96 w-96 rounded-full bg-[#10b981]/5 blur-3xl"})]})]});var m=r(94007);let g={datasources:{db:{url:process.env.DATABASE_URL}},log:["error"],errorFormat:"pretty"},p=new m.PrismaClient(g),f=!1;async function b(){if(f)try{await p.$disconnect(),f=!1,console.log("✅ Database disconnected")}catch(e){throw console.error("❌ Database disconnection error:",e),e}}process.on("beforeExit",async()=>{await b()});var y=r(35356);let x=null,v=!1;async function w(){if(x&&v)return x;let e=process.env.REDIS_URL||"redis://localhost:6379";return(x=(0,y.createClient)({url:e,socket:{reconnectStrategy:e=>e>10?(console.error("❌ Redis reconnection failed after 10 attempts"),Error("Redis connection failed")):Math.min(100*e,3e3)}})).on("error",e=>{console.error("❌ Redis Client Error:",e),v=!1}),x.on("connect",()=>{console.log("✅ Redis connecting...")}),x.on("ready",()=>{console.log("✅ Redis connected successfully"),v=!0}),x.on("end",()=>{console.log("⚠️  Redis connection ended"),v=!1}),await x.connect(),x}async function j(){return x&&v?x:w()}async function N(){x&&v&&(await x.quit(),v=!1,console.log("✅ Redis disconnected"))}class D{constructor(e){this.client=e}async get(e){try{let t=await this.client.get(e);return t?JSON.parse(t):null}catch(t){return console.error(`Cache get error for key ${e}:`,t),null}}async set(e,t,r){try{let a=JSON.stringify(t);return r?await this.client.setEx(e,r,a):await this.client.set(e,a),!0}catch(t){return console.error(`Cache set error for key ${e}:`,t),!1}}async delete(e){try{return await this.client.del(e),!0}catch(t){return console.error(`Cache delete error for key ${e}:`,t),!1}}async exists(e){try{let t=await this.client.exists(e);return 1===t}catch(t){return console.error(`Cache exists error for key ${e}:`,t),!1}}async clear(e){try{if(e){let t=await this.client.keys(e);if(t.length>0)return await this.client.del(t);return 0}return await this.client.flushDb()}catch(e){return console.error("Cache clear error:",e),0}}}let O=null;async function E(){return O||(O=new D(await j())),O}process.on("beforeExit",async()=>{await N()});class k{async getUserWalletBalance(e){try{let t=await p.wallet.findMany({where:{userId:e},orderBy:{updatedAt:"desc"}}),r=t.find(e=>"AZR"===e.currency)||t[0];if(!r)return{balance:0,currency:"AZR",change:0,changePercent:0};let a=(await p.transaction.findMany({where:{walletId:r.id,createdAt:{gte:new Date(Date.now()-864e5)}},orderBy:{createdAt:"desc"}})).filter(e=>"DEPOSIT"===e.type||"MINING_REWARD"===e.type).reduce((e,t)=>e+Number(t.amount),0),n=Number(r.balance);return{balance:n,currency:r.currency,change:a,changePercent:n>0?a/n*100:0}}catch(e){return console.error("Error getting wallet balance:",e),{balance:0,currency:"AZR",change:0,changePercent:0}}}async getStudentProgress(e){try{let t=await p.enrollment.findMany({where:{userId:e},include:{course:!0},orderBy:{updatedAt:"desc"}}),r=t.filter(e=>e.completed).length,a=t.filter(e=>!e.completed&&e.progress>0).length,n=t.length>0?t.reduce((e,t)=>e+t.progress,0)/t.length:0,o=t.slice(0,5).map(e=>({courseId:e.courseId,courseTitle:e.course.title,progress:e.progress,lastActivity:e.updatedAt}));return{totalCourses:t.length,completedCourses:r,inProgressCourses:a,averageProgress:n,recentActivity:o}}catch(e){return console.error("Error getting student progress:",e),{totalCourses:0,completedCourses:0,inProgressCourses:0,averageProgress:0,recentActivity:[]}}}async getSystemHealth(){try{let e=Date.now();await p.$queryRaw`SELECT 1`;let t=Date.now()-e,r=await E(),a=Date.now();await r.exists("health-check");let n=Date.now()-a,o=[{name:"database",status:t<100?"healthy":t<500?"degraded":"down",latency:t},{name:"redis",status:n<50?"healthy":n<200?"degraded":"down",latency:n}];return{status:o.every(e=>"healthy"===e.status)?"healthy":o.some(e=>"down"===e.status)?"down":"degraded",services:o,timestamp:new Date}}catch(e){return console.error("Error getting system health:",e),{status:"down",services:[],timestamp:new Date}}}async getUserDashboardData(e){let[t,r,a]=await Promise.all([this.getUserWalletBalance(e),this.getStudentProgress(e),this.getSystemHealth()]),[n,o]=await Promise.all([p.enrollment.findMany({where:{userId:e},include:{course:!0},orderBy:{enrolledAt:"desc"},take:5}),p.transaction.findMany({where:{userId:e},orderBy:{createdAt:"desc"},take:5})]);return{wallet:t,progress:r,health:a,recentActivity:[...n.map(e=>({type:"enrollment",title:`Enrolled in ${e.course.title}`,timestamp:e.enrolledAt})),...o.map(e=>({type:"transaction",title:`${e.type} ${e.amount} ${e.currency}`,timestamp:e.createdAt}))].sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,10)}}async getCachedDashboardData(e,t=60){let r=await E(),a=`design:dashboard:${e}`,n=await r.get(a);if(n)return n;let o=await this.getUserDashboardData(e);return await r.set(a,o,t),o}async invalidateDashboardCache(e){let t=await E();await t.delete(`design:dashboard:${e}`)}}let C=new k;var U=r(10146),L=r.n(U);!function(){var e=Error("Cannot find module '@azora/shared-auth/middleware'");throw e.code="MODULE_NOT_FOUND",e}();let _=L().Router();_.get("/wallet-balance",Object(function(){var e=Error("Cannot find module '@azora/shared-auth/middleware'");throw e.code="MODULE_NOT_FOUND",e}()),async(e,t)=>{try{if(!e.user)return t.status(401).json({error:"Unauthorized"});let r=await C.getUserWalletBalance(e.user.userId);t.json({success:!0,data:r})}catch(e){console.error("Error getting wallet balance:",e),t.status(500).json({success:!1,error:"Failed to get wallet balance"})}}),_.get("/student-progress",Object(function(){var e=Error("Cannot find module '@azora/shared-auth/middleware'");throw e.code="MODULE_NOT_FOUND",e}()),async(e,t)=>{try{if(!e.user)return t.status(401).json({error:"Unauthorized"});let r=await C.getStudentProgress(e.user.userId);t.json({success:!0,data:r})}catch(e){console.error("Error getting student progress:",e),t.status(500).json({success:!1,error:"Failed to get student progress"})}}),_.get("/health-check",async(e,t)=>{try{let e=await C.getSystemHealth();t.json({success:!0,data:e})}catch(e){console.error("Error getting health check:",e),t.status(500).json({success:!1,error:"Failed to get health check"})}}),_.get("/dashboard",Object(function(){var e=Error("Cannot find module '@azora/shared-auth/middleware'");throw e.code="MODULE_NOT_FOUND",e}()),async(e,t)=>{try{if(!e.user)return t.status(401).json({error:"Unauthorized"});let r=await C.getCachedDashboardData(e.user.userId);t.json({success:!0,data:r})}catch(e){console.error("Error getting dashboard data:",e),t.status(500).json({success:!1,error:"Failed to get dashboard data"})}}),function(){var e=Error("Cannot find module '@azora/shared-design/tokens'");throw e.code="MODULE_NOT_FOUND",e}(),Object(function(){var e=Error("Cannot find module '@azora/shared-design/tokens'");throw e.code="MODULE_NOT_FOUND",e}())("emerald","500"),Object(function(){var e=Error("Cannot find module '@azora/shared-design/tokens'");throw e.code="MODULE_NOT_FOUND",e}())("ruby","500"),Object(function(){var e=Error("Cannot find module '@azora/shared-design/tokens'");throw e.code="MODULE_NOT_FOUND",e}())("sapphire","500"),function(){var e=Error("Cannot find module './event-bus'");throw e.code="MODULE_NOT_FOUND",e}();class z{async trackComponentUsage(e){await Object(function(){var e=Error("Cannot find module './event-bus'");throw e.code="MODULE_NOT_FOUND",e}()).publish("design.component.used",{component:e.component,action:e.action,userId:e.userId,metadata:e.metadata})}async trackPerformance(e){await this.trackComponentUsage({component:e.component,action:"performance",userId:e.userId,metadata:{loadTime:e.loadTime,renderTime:e.renderTime}})}async trackError(e,t,r){await this.trackComponentUsage({component:e,action:"error",userId:r,metadata:{error:t}})}async getUsageStats(e,t,r){let a=Object(function(){var e=Error("Cannot find module './event-bus'");throw e.code="MODULE_NOT_FOUND",e}()).getEventHistory("design.component.used");return e&&(a=a.filter(t=>t.payload.component===e)),t&&(a=a.filter(e=>new Date(e.timestamp)>=t)),r&&(a=a.filter(e=>new Date(e.timestamp)<=r)),{totalEvents:a.length,uniqueComponents:new Set(a.map(e=>e.payload.component)).size,uniqueUsers:new Set(a.map(e=>e.payload.userId).filter(Boolean)).size,averageLoadTime:this.calculateAverageLoadTime(a),errorRate:this.calculateErrorRate(a),components:this.getComponentUsage(a)}}calculateAverageLoadTime(e){let t=e.map(e=>e.payload.metadata?.loadTime).filter(e=>"number"==typeof e);return 0===t.length?0:t.reduce((e,t)=>e+t,0)/t.length}calculateErrorRate(e){let t=e.filter(e=>"error"===e.payload.action).length;return e.length>0?t/e.length:0}getComponentUsage(e){let t={};return e.forEach(e=>{let r=e.payload.component;t[r]=(t[r]||0)+1}),t}}new z},11506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>s});var a=r(19510),n=r(77366),o=r.n(n);r(67272),function(){var e=Error("Cannot find module '@azora/shared-design/theme/azora-theme.css'");throw e.code="MODULE_NOT_FOUND",e}();let s={title:"Azora Sapiens | The Education System",description:"Personalized learning from K to PhD"};function i({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:o().className,children:e})})}},67272:()=>{}};